<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [S3d-svn] r724 - trunk/apps/comptest
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/s3d-svn/2007-October/index.html" >
   <LINK REL="made" HREF="mailto:s3d-svn%40lists.berlios.de?Subject=Re%3A%20%5BS3d-svn%5D%20r724%20-%20trunk/apps/comptest&In-Reply-To=%3C200710131854.l9DIsB0m004878%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000715.html">
   <LINK REL="Next"  HREF="000717.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[S3d-svn] r724 - trunk/apps/comptest</H1>
    <B>lazhur at BerliOS</B> 
    <A HREF="mailto:s3d-svn%40lists.berlios.de?Subject=Re%3A%20%5BS3d-svn%5D%20r724%20-%20trunk/apps/comptest&In-Reply-To=%3C200710131854.l9DIsB0m004878%40sheep.berlios.de%3E"
       TITLE="[S3d-svn] r724 - trunk/apps/comptest">lazhur at mail.berlios.de
       </A><BR>
    <I>Sat Oct 13 20:54:11 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000715.html">[S3d-svn] r723 - trunk/apps/meshs3d
</A></li>
        <LI>Next message: <A HREF="000717.html">[S3d-svn] r725 - trunk/apps/comptest
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#716">[ date ]</a>
              <a href="thread.html#716">[ thread ]</a>
              <a href="subject.html#716">[ subject ]</a>
              <a href="author.html#716">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: lazhur
Date: 2007-10-13 20:54:11 +0200 (Sat, 13 Oct 2007)
New Revision: 724

Modified:
   trunk/apps/comptest/comptest.c
Log:
comptest: Remove C++-Comments


Modified: trunk/apps/comptest/comptest.c
===================================================================
--- trunk/apps/comptest/comptest.c	2007-10-13 18:54:02 UTC (rev 723)
+++ trunk/apps/comptest/comptest.c	2007-10-13 18:54:11 UTC (rev 724)
@@ -43,8 +43,8 @@
 #endif
 #endif
 
-#define TEXW	256
-#define TEXH	256
+#define TEXW 256
+#define TEXH 256
 
 struct extension {
 	int event, error;
@@ -115,74 +115,71 @@
 		name = &quot;Circulate&quot;;
 		break;
 	}
-	if ( event-&gt;type == xdamage.event + XDamageNotify ) {
-		XDamageNotifyEvent *e = (XDamageNotifyEvent*) event ;
-		// e-&gt;drawable is the window ID of the damaged window
-		// e-&gt;geometry is the geometry of the damaged window	
-		// e-&gt;area     is the bounding rect for the damaged area	
-		// e-&gt;damage   is the damage handle returned by XDamageCreate()
+	if (event-&gt;type == xdamage.event + XDamageNotify) {
+		/* XDamageNotifyEvent *e = (XDamageNotifyEvent*) event; */
+		/* e-&gt;drawable is the window ID of the damaged window
+		   e-&gt;geometry is the geometry of the damaged window
+		   e-&gt;area     is the bounding rect for the damaged area
+		   e-&gt;damage   is the damage handle returned by XDamageCreate() */
 
-		// Subtract all the damage, repairing the window.
+		/* Subtract all the damage, repairing the window. */
 		name = &quot;Damage!!&quot;;
-	}
-	else if ( event-&gt;type == ConfigureNotify ) {
-		XConfigureEvent *e = &amp;event-&gt;xconfigure;	
-		// The windows size, position or Z index in the stacking
-		// order has changed
+	} else if (event-&gt;type == ConfigureNotify) {
+		/* XConfigureEvent *e = &amp;event-&gt;xconfigure; */
+		/* The windows size, position or Z index in the stacking
+		   order has changed */
 		name = &quot;Configure!!&quot;;
 	}
 
-
 	printf(&quot;Event: %s\n&quot;, name);
 	return(0);
-
-
 }
+
 /*static int error(Display *COMPUNUSED(dpy), XErrorEvent *COMPUNUSED(event))*/
 static int error(Display *COMPUNUSED(dpy), XErrorEvent *event)
 {
 	char *name = &quot;&quot;;
-    int     o;
+	int     o;
 
-    o = event-&gt;error_code - xfixes.error;
-    switch (o) {
-    case BadRegion:
-        name = &quot;BadRegion&quot;;
-        break;
-    default:
-        break;
-    }
-    o = event-&gt;error_code - xdamage.error;
-    switch (o) {
-    case BadDamage:
-        name = &quot;BadDamage&quot;;
-        break;
-    default:
-        break;
-    }
-    o = event-&gt;error_code - xrender.error;
-    switch (o) {
-    case BadPictFormat:
-        name = &quot;BadPictFormat&quot;;
-        break;
-    case BadPicture:
-        name = &quot;BadPicture&quot;;
-        break;
-    case BadPictOp:
-        name = &quot;BadPictOp&quot;;
-        break;
-    case BadGlyphSet:
-        name = &quot;BadGlyphSet&quot;;
-        break;
-    case BadGlyph:
-        name = &quot;BadGlyph&quot;;
-        break;
-    default:
-        break;
-    }
+	o = event-&gt;error_code - xfixes.error;
+	switch (o) {
+	case BadRegion:
+		name = &quot;BadRegion&quot;;
+		break;
+	default:
+		break;
+	}
+	o = event-&gt;error_code - xdamage.error;
+	switch (o) {
+	case BadDamage:
+		name = &quot;BadDamage&quot;;
+		break;
+	default:
+		break;
+	}
+	o = event-&gt;error_code - xrender.error;
+	switch (o) {
+	case BadPictFormat:
+		name = &quot;BadPictFormat&quot;;
+		break;
+	case BadPicture:
+		name = &quot;BadPicture&quot;;
+		break;
+	case BadPictOp:
+		name = &quot;BadPictOp&quot;;
+		break;
+	case BadGlyphSet:
+		name = &quot;BadGlyphSet&quot;;
+		break;
+	case BadGlyph:
+		name = &quot;BadGlyph&quot;;
+		break;
+	default:
+		break;
+	}
 
-	 printf (&quot;error %d (name: %s) request %d minor %d serial %d\n&quot;,
-	        event-&gt;error_code, name, event-&gt;request_code, event-&gt;minor_code, (int)event-&gt;serial);
+	printf(&quot;error %d (name: %s) request %d minor %d serial %d\n&quot;,
+	       event-&gt;error_code, name, event-&gt;request_code, event-&gt;minor_code, (int)event-&gt;serial);
 	return(0);
 }
 
@@ -248,10 +245,10 @@
 	float tbuf[] = { 0.0, 0.0,  1.0, 0.0,  1.0, 1.0,
 	                 0.0, 0.0,  1.0, 1.0,  0.0, 1.0
 	               };
-/*	int i;*/
+	/* int i;*/
 	int x, y;
 	int vindex, voffset, pindex;
-	int	xpos, ypos;
+	int xpos, ypos;
 
 	win-&gt;no = win_no++;  /* TODO: REMOVE */
 	win-&gt;oid = s3d_new_object();
@@ -280,26 +277,26 @@
 	voffset = 1;
 	vindex = 0;
 	pindex = 0;
-	s3d_push_vertex(win-&gt;oid, 0, 0, -1);			/* the first point */
+	s3d_push_vertex(win-&gt;oid, 0, 0, -1); /* the first point */
 
-	for (y = 0; y &lt; win-&gt;attr.height; y+= TEXH) {	/* the first column */
+	for (y = 0; y &lt; win-&gt;attr.height;  y += TEXH) { /* the first column */
 		ypos = (y + TEXH &gt; win-&gt;attr.height) ? win-&gt;attr.height : y + TEXH ;
 		s3d_push_vertex(win-&gt;oid, 0, -((float)ypos) / 20, -1);
 		voffset++;
 	}
-	for (x = 0; x &lt; win-&gt;attr.width; x+= TEXW) {	/* the first row */
+	for (x = 0; x &lt; win-&gt;attr.width; x += TEXW) { /* the first row */
 		xpos = (x + TEXW &gt; win-&gt;attr.width) ? win-&gt;attr.width : x + TEXW ;
 		s3d_push_vertex(win-&gt;oid, ((float)xpos) / 20, 0, -1);
 
-		for (y = 0; y &lt; win-&gt;attr.height; y+= TEXH) {
+		for (y = 0; y &lt; win-&gt;attr.height; y += TEXH) {
 			ypos = (y + TEXH &gt; win-&gt;attr.height) ? win-&gt;attr.height : y + TEXH  ;
 			s3d_push_vertex(win-&gt;oid, ((float)xpos) / 20, -((float)ypos) / 20, -1);
 			s3d_push_material_a(win-&gt;oid,
-		                    0.0, 0.8, 0.0 , 1.0,
-		                    1.0, 1.0, 1.0 , 1.0,
-		                    0.0, 0.8, 0.0 , 1.0);
+			                    0.0, 0.8, 0.0 , 1.0,
+			                    1.0, 1.0, 1.0 , 1.0,
+			                    0.0, 0.8, 0.0 , 1.0);
 			s3d_push_texture(win-&gt;oid, xpos - x, ypos - y);
-			s3d_pep_material_texture(win-&gt;oid, pindex); 
+			s3d_pep_material_texture(win-&gt;oid, pindex);
 			s3d_push_polygon(win-&gt;oid, vindex, vindex + voffset, vindex + voffset + 1, pindex);
 			s3d_push_polygon(win-&gt;oid, vindex, vindex + voffset + 1, vindex + 1, pindex);
 			s3d_pep_polygon_tex_coords(win-&gt;oid, tbuf, 2);
@@ -321,10 +318,10 @@
 		return;
 	win-&gt;id = id;
 	XGetWindowAttributes(dpy, win-&gt;id, &amp;win-&gt;attr);
-/*	XSelectInput(dpy, win-&gt;id, ExposureMask|ButtonPressMask|KeyPressMask*/
+	/* XSelectInput(dpy, win-&gt;id, ExposureMask|ButtonPressMask|KeyPressMask*/
 	XSelectInput(dpy, win-&gt;id, ExposureMask
-					|SubstructureNotifyMask | ExposureMask | StructureNotifyMask | PropertyChangeMask);
-/*	XSelectInput(dpy, win-&gt;id, ExposureMask);*/
+	             | SubstructureNotifyMask | ExposureMask | StructureNotifyMask | PropertyChangeMask);
+	/* XSelectInput(dpy, win-&gt;id, ExposureMask);*/
 	win-&gt;format = XRenderFindVisualFormat(dpy, win-&gt;attr.visual);
 
 	if (win-&gt;format != 0) {
@@ -373,22 +370,22 @@
 	texnum = 0;
 
 
-/*	if (!win-&gt;oid)
-		deco_box(win);
-*/
+	/* if (!win-&gt;oid)
+	  deco_box(win);
+	*/
 	for (xleft = 0; xleft &lt; width ; xleft += TEXW) {
 		xright = (xleft + TEXW &gt; width) ? width : xleft + TEXW;
 		chunk_width = xright - xleft;
 		image = XGetImage(dpy, win-&gt;id, xleft, y, chunk_width, win-&gt;attr.height, AllPlanes, ZPixmap);
-		if (!image) 
+		if (!image)
 			return;
-		bitmap = malloc( chunk_width * height * sizeof(uint32_t));
+		bitmap = malloc(chunk_width * height * sizeof(uint32_t));
 		if (!win-&gt;oid)
 			deco_box(win);
 		if (image-&gt;format == ZPixmap) {
 			printf(&quot;XImage: %dx%d, format %d (%d), bpp: %d, depth %d, pad %d\n&quot;,
-				   image-&gt;width, image-&gt;height, image-&gt;format,
-				   ZPixmap, image-&gt;bits_per_pixel, image-&gt;depth, image-&gt;bitmap_pad);
+			       image-&gt;width, image-&gt;height, image-&gt;format,
+			       ZPixmap, image-&gt;bits_per_pixel, image-&gt;depth, image-&gt;bitmap_pad);
 			rs = get_shift(image-&gt;red_mask) - 8;
 			gs = get_shift(image-&gt;green_mask) - 8;
 			bs = get_shift(image-&gt;blue_mask) - 8;
@@ -410,13 +407,13 @@
 					s = (unsigned long *)img_ptr;
 					t = (uint32_t *)bmp_ptr;
 					/*    bmp_ptr[0] = (rs &gt; 0 ? ((*d &amp; image-&gt;red_mask) &gt;&gt; rs)  : ((*d  &amp; image-&gt;red_mask) &lt;&lt; -rs)) ;
-						bmp_ptr[1] = (gs &gt; 0 ? ((*d &amp; image-&gt;green_mask) &gt;&gt; gs) : ((*d  &amp; image-&gt;green_mask) &lt;&lt; -gs)) ;
-						bmp_ptr[2] = (bs &gt; 0 ? ((*d &amp; image-&gt;blue_mask) &gt;&gt; bs)  : ((*d  &amp; image-&gt;blue_mask) &lt;&lt; -bs));
-						bmp_ptr[3] = 255 ;*/
+					 bmp_ptr[1] = (gs &gt; 0 ? ((*d &amp; image-&gt;green_mask) &gt;&gt; gs) : ((*d  &amp; image-&gt;green_mask) &lt;&lt; -gs)) ;
+					 bmp_ptr[2] = (bs &gt; 0 ? ((*d &amp; image-&gt;blue_mask) &gt;&gt; bs)  : ((*d  &amp; image-&gt;blue_mask) &lt;&lt; -bs));
+					 bmp_ptr[3] = 255 ;*/
 					*t = (rs &gt; 0 ? ((*s &amp; image-&gt;red_mask) &gt;&gt; rs)  : ((*s  &amp; image-&gt;red_mask) &lt;&lt; -rs)) |
-						 (gs &gt; 0 ? ((*s &amp; image-&gt;green_mask) &gt;&gt; gs) : ((*s  &amp; image-&gt;green_mask) &lt;&lt; -gs)) |
-						 (bs &gt; 0 ? ((*s &amp; image-&gt;blue_mask) &gt;&gt; bs)  : ((*s  &amp; image-&gt;blue_mask) &lt;&lt; -bs)) |
-						 255 &lt;&lt; 24;
+					     (gs &gt; 0 ? ((*s &amp; image-&gt;green_mask) &gt;&gt; gs) : ((*s  &amp; image-&gt;green_mask) &lt;&lt; -gs)) |
+					     (bs &gt; 0 ? ((*s &amp; image-&gt;blue_mask) &gt;&gt; bs)  : ((*s  &amp; image-&gt;blue_mask) &lt;&lt; -bs)) |
+					     255 &lt;&lt; 24;
 
 					bmp_ptr += sizeof(uint32_t);
 					img_ptr += bpp;
@@ -443,11 +440,11 @@
 	while (QLength(dpy)) {
 		XNextEvent(dpy, &amp;event);
 		print_event(dpy, &amp;event);
-		if ( event.type == xdamage.event + XDamageNotify ) {
-			XDamageNotifyEvent *e = (XDamageNotifyEvent*) &amp;event ;
-			printf(&quot;window = %d, geometry = %d:%d (at %d:%d), area = %d:%d (at %d:%d)\n&quot;, 
-					e-&gt;drawable, e-&gt;geometry.width, e-&gt;geometry.height, e-&gt;geometry.x, e-&gt;geometry.y,
-					e-&gt;area.width, e-&gt;area.height, e-&gt;area.x, e-&gt;area.y);
+		if (event.type == xdamage.event + XDamageNotify) {
+			XDamageNotifyEvent *e = (XDamageNotifyEvent*) &amp; event ;
+			printf(&quot;window = %d, geometry = %d:%d (at %d:%d), area = %d:%d (at %d:%d)\n&quot;,
+			       e-&gt;drawable, e-&gt;geometry.width, e-&gt;geometry.height, e-&gt;geometry.x, e-&gt;geometry.y,
+			       e-&gt;area.width, e-&gt;area.height, e-&gt;area.x, e-&gt;area.y);
 			XDamageSubtract(dpy, e-&gt;damage, None, None);
 		}
 	}
@@ -467,9 +464,9 @@
 	if (!s3d_init(&amp;argc, &amp;argv, &quot;compotest&quot;)) {
 		for (scr_no = 0; scr_no &lt; ScreenCount(dpy); scr_no++) {
 			XCompositeRedirectSubwindows(dpy, RootWindow(dpy, scr_no), CompositeRedirectAutomatic);
-/*			XCompositeRedirectSubwindows(dpy, RootWindow(dpy, scr_no), CompositeRedirectManual);*/
+			/*   XCompositeRedirectSubwindows(dpy, RootWindow(dpy, scr_no), CompositeRedirectManual);*/
 			XSelectInput(dpy, RootWindow(dpy, scr_no),
-						SubstructureNotifyMask | ExposureMask | StructureNotifyMask | PropertyChangeMask);
+			             SubstructureNotifyMask | ExposureMask | StructureNotifyMask | PropertyChangeMask);
 
 			XQueryTree(dpy, RootWindow(dpy, scr_no), &amp;root_return, &amp;parent_return, &amp;children, &amp;nchildren);
 			for (i = 0; i &lt; (int)nchildren; i++)


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000715.html">[S3d-svn] r723 - trunk/apps/meshs3d
</A></li>
	<LI>Next message: <A HREF="000717.html">[S3d-svn] r725 - trunk/apps/comptest
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#716">[ date ]</a>
              <a href="thread.html#716">[ thread ]</a>
              <a href="subject.html#716">[ subject ]</a>
              <a href="author.html#716">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/s3d-svn">More information about the S3d-svn
mailing list</a><br>
</body></html>
