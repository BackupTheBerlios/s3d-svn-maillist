From dotslash at berlios.de  Thu Mar  2 18:03:54 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Thu, 2 Mar 2006 18:03:54 +0100
Subject: [S3d-svn] r130 - in trunk: . server
Message-ID: <200603021703.k22H3sQO031625@sheep.berlios.de>

Author: dotslash
Date: 2006-03-02 18:03:54 +0100 (Thu, 02 Mar 2006)
New Revision: 130

Modified:
   trunk/
   trunk/server/matrix.c
Log:
 r181 at balthasar:  dotslash | 2006-03-02 18:03:45 +0100
 typo



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:177
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:181

Modified: trunk/server/matrix.c
===================================================================
--- trunk/server/matrix.c	2006-02-27 23:35:58 UTC (rev 129)
+++ trunk/server/matrix.c	2006-03-02 17:03:54 UTC (rev 130)
@@ -20,7 +20,6 @@
  * along with s3d; if not, write to the Free Software
  * Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
  */
-i
 
 /*  this file gives some simple matrix functionality for things I was unable */
 /*  to do with OpenGL */



From nichtsnutz at berlios.de  Fri Mar  3 00:59:21 2006
From: nichtsnutz at berlios.de (nichtsnutz at BerliOS)
Date: Fri, 3 Mar 2006 00:59:21 +0100
Subject: [S3d-svn] r131 - trunk/apps/olsrs3d
Message-ID: <200603022359.k22NxLLJ017406@sheep.berlios.de>

Author: nichtsnutz
Date: 2006-03-03 00:59:11 +0100 (Fri, 03 Mar 2006)
New Revision: 131

Modified:
   trunk/apps/olsrs3d/main.c
Log:
just for fun, move the world

Modified: trunk/apps/olsrs3d/main.c
===================================================================
--- trunk/apps/olsrs3d/main.c	2006-03-02 17:03:54 UTC (rev 130)
+++ trunk/apps/olsrs3d/main.c	2006-03-02 23:59:11 UTC (rev 131)
@@ -597,10 +597,10 @@
 		case 27: /* esc */
 			stop();
 			break;
-			case 15: /* strg + o */
+		case 15: /* strg + o */
 			lst_out(); /* output ob2ip list */
 			break;
-		case 99: /* c*/
+		case 99: /* c */
 			if(ColorSwitch) ColorSwitch = 0;
 			else ColorSwitch = 1;
 			break;
@@ -616,6 +616,9 @@
 			if(RotateSwitch && RotateSpeed > 1)
 				RotateSpeed--;
 			break;
+		case 16: /* strg + p */
+			s3d_translate(0,0.0,0.0,0.0);
+			break;
 	}
 }
 
@@ -628,6 +631,7 @@
 void object_click(struct s3d_evt *evt)
 {
 	int oid;
+	float distance,tmp_vector[3];
 	oid=(int)*((unsigned long *)evt->buf);
 	/*s3d_translate(ZeroPoint,0,50,40);
 	ZeroPosition[0] = 0;
@@ -636,6 +640,10 @@
 	struct olsr_node *olsr_node;
 	olsr_node = *lst_search(oid);
 	/* printf("obj2ip: search return %s\n",olsr_node->ip); */
+
+	distance = dirt(olsr_node->pos_vec,CamPosition[0],tmp_vector);
+	mov_add(ZeroPosition,tmp_vector,1.0);	
+	s3d_translate(ZeroPoint,ZeroPosition[0],ZeroPosition[1],ZeroPosition[2]);
 }
 
 /***
@@ -670,7 +678,7 @@
 		s3d_translate(mesh,(-left)*3.0-1.8,bottom*3.0+0.8,-3.0);
 		s3d_flags_on(mesh,S3D_OF_VISIBLE);
 	}
-	/* printf("%f %f %f\n",inf->trans_x,inf->trans_y,inf->trans_z); */
+	// printf("%f %f %f\n",inf->trans_x,inf->trans_y,inf->trans_z);
 }
 
 /***



From marec at berlios.de  Fri Mar  3 01:01:17 2006
From: marec at berlios.de (marec at BerliOS)
Date: Fri, 3 Mar 2006 01:01:17 +0100
Subject: [S3d-svn] r132 - trunk/apps/olsrs3d
Message-ID: <200603030001.k2301HQX018279@sheep.berlios.de>

Author: marec
Date: 2006-03-03 01:01:13 +0100 (Fri, 03 Mar 2006)
New Revision: 132

Modified:
   trunk/apps/olsrs3d/main.c
   trunk/apps/olsrs3d/net.c
   trunk/apps/olsrs3d/olsrs3d.h
   trunk/apps/olsrs3d/process.c
Log:
remove old code I

Modified: trunk/apps/olsrs3d/main.c
===================================================================
--- trunk/apps/olsrs3d/main.c	2006-03-02 23:59:11 UTC (rev 131)
+++ trunk/apps/olsrs3d/main.c	2006-03-03 00:01:13 UTC (rev 132)
@@ -1,10 +1,9 @@
 /*
  * main.c
  *
- * Copyright (C) 2005-2006 Simon Wunderlich <dotslash at packetmixer.de>
+ * Copyright (C) 2004-2006 Simon Wunderlich <dotslash at packetmixer.de>
  *                         Marek Lindner <lindner_marek at yahoo.de>
  *                         Andreas Langer <andreas_lbg at gmx.de>
- * Copyright (C) 2004-2006 Simon Wunderlich <dotslash at packetmixer.de>
  *
  * This file is part of olsrs3d, an olsr topology visualizer for s3d.
  * See http://s3d.berlios.de/ for more updates.
@@ -48,12 +47,12 @@
 int Olsr_node_count_obj = -1;
 int Byte_count;
 
-int node_count=-1;
-int alpha=0;
-int Olsr_node_obj, Olsr_node_inet_obj, Olsr_node_hna_net, mesh;
-float asp=1.0;
-float bottom=-1.0;
-float left=-1.0;
+// int node_count=-1;
+// int alpha=0;
+int Olsr_node_obj, Olsr_node_inet_obj, Olsr_node_hna_net;
+float Asp = 1.0;
+float Bottom = -1.0;
+float Left = -1.0;
 
 float CamPosition[2][3];   /* CamPosition[trans|rot][x-z] */
 float ZeroPosition[3] = {0,0,0};   /* current position zero position */
@@ -549,7 +548,7 @@
 		s3d_link( Olsr_node_count_obj, 0 );
 		s3d_flags_on( Olsr_node_count_obj, S3D_OF_VISIBLE );
 		s3d_scale( Olsr_node_count_obj, 0.2 );
-		s3d_translate( Olsr_node_count_obj, left*3.0, -bottom*3.0-0.2, -3.0 );
+		s3d_translate( Olsr_node_count_obj, Left*3.0, -Bottom*3.0-0.2, -3.0 );
 
 		Last_olsr_node_count = Olsr_node_count;
 
@@ -564,7 +563,7 @@
 		}
 	}
 
-	alpha=(alpha+5)%360;
+// 	alpha=(alpha+5)%360;
 // 	s3d_rotate(mesh,0,alpha,0);
 	if(RotateSwitch) {
 		Zp_rotate = (Zp_rotate+RotateSpeed)%360;
@@ -580,7 +579,7 @@
 {
 	s3d_quit();
 	net_quit();
-	process_quit();
+// 	process_quit();
 }
 
 /***
@@ -665,18 +664,18 @@
 		CamPosition[1][0] = inf->rot_x;
 		CamPosition[1][1] = inf->rot_y;
 		CamPosition[1][2] = inf->rot_z;
-		asp=inf->scale;
-		if (asp>1.0) /* wide screen */
+		Asp=inf->scale;
+		if (Asp>1.0) /* wide screen */
 		{
-			bottom=-1.0;
-			left=-asp;
+			Bottom=-1.0;
+			Left=-Asp;
 		} else {  /* high screen */
-			bottom=(-1.0/asp);
-			left=-1.0;
+			Bottom=(-1.0/Asp);
+			Left=-1.0;
 
 		}
-		s3d_translate(mesh,(-left)*3.0-1.8,bottom*3.0+0.8,-3.0);
-		s3d_flags_on(mesh,S3D_OF_VISIBLE);
+// 		s3d_translate(mesh,(-Left)*3.0-1.8,Bottom*3.0+0.8,-3.0);
+// 		s3d_flags_on(mesh,S3D_OF_VISIBLE);
 	}
 	// printf("%f %f %f\n",inf->trans_x,inf->trans_y,inf->trans_z);
 }
@@ -822,6 +821,7 @@
 
 	int optchar;
 	strncpy( Olsr_host, "127.0.0.1", 256 );
+	lbuf[0] = '\0';   /* init lbuf */
 
 	while ( ( optchar = getopt ( argc, argv, "dhH:" ) ) != -1 ) {
 
@@ -856,7 +856,7 @@
 
 	/* set extern int optind = 0 for parse_args in io.c */
 	optind = 0;
-	process_init(Olsr_host);
+// 	process_init(Olsr_host);
 	if (!net_init(Olsr_host))
 	{
 		if (!s3d_init(&argc,&argv,"olsrs3d"))
@@ -877,7 +877,7 @@
 			s3d_mainloop(mainloop);
 			s3d_quit();
 			net_quit();
-			process_quit();
+// 			process_quit();
 		}
 	}
 	return(0);

Modified: trunk/apps/olsrs3d/net.c
===================================================================
--- trunk/apps/olsrs3d/net.c	2006-03-02 23:59:11 UTC (rev 131)
+++ trunk/apps/olsrs3d/net.c	2006-03-03 00:01:13 UTC (rev 132)
@@ -1,10 +1,9 @@
 /*
  * net.c
  *
- * Copyright (C) 2005-2006 Simon Wunderlich <dotslash at packetmixer.de>
+ * Copyright (C) 2004-2006 Simon Wunderlich <dotslash at packetmixer.de>
  *                         Marek Lindner <lindner_marek at yahoo.de>
  *                         Andreas Langer <andreas_lbg at gmx.de>
- * Copyright (C) 2004-2006 Simon Wunderlich <dotslash at packetmixer.de>
  *
  * This file is part of olsrs3d, an olsr topology visualizer for s3d.
  * See http://s3d.berlios.de/ for more updates.

Modified: trunk/apps/olsrs3d/olsrs3d.h
===================================================================
--- trunk/apps/olsrs3d/olsrs3d.h	2006-03-02 23:59:11 UTC (rev 131)
+++ trunk/apps/olsrs3d/olsrs3d.h	2006-03-03 00:01:13 UTC (rev 132)
@@ -1,10 +1,9 @@
 /*
  * olsrs3d.h
  *
- * Copyright (C) 2005-2006 Simon Wunderlich <dotslash at packetmixer.de>
+ * Copyright (C) 2004-2006 Simon Wunderlich <dotslash at packetmixer.de>
  *                         Marek Lindner <lindner_marek at yahoo.de>
  *                         Andreas Langer <andreas_lbg at gmx.de>
- * Copyright (C) 2004-2006 Simon Wunderlich <dotslash at packetmixer.de>
  *
  * This file is part of olsrs3d, an olsr topology visualizer for s3d.
  * See http://s3d.berlios.de/ for more updates.
@@ -27,13 +26,15 @@
 
 
 #define NAMEMAX		128
-struct t_node {
-	float pos[3], mov[3];
-	char name[NAMEMAX];
-	int obj,s_obj;
-};
 
 
+// struct t_node {
+// 	float pos[3], mov[3];
+// 	char name[NAMEMAX];
+// 	int obj,s_obj;
+// };
+
+
 /* linked list for the all connections */
 struct olsr_con {
 
@@ -98,26 +99,30 @@
 extern int Olsr_node_count_obj;
 extern int Olsr_node_count;
 extern int Last_olsr_node_count;
+
 extern int Byte_count;
+
 extern int ZeroPoint;
 
-extern float bottom,left;
+extern float Bottom, Left;
 
-extern int 	max, new_max;
-extern float 	*adj;
-extern int	*adj_obj;
-extern int	node_count;
-extern float 	bottom,left;
+// extern float bottom,left;
+//
+// extern int 	max, new_max;
+// extern float 	*adj;
+// extern int	*adj_obj;
+// extern int	node_count;
+// extern float Bottom, Left;
 
 
-struct t_node 	*node;
+// struct t_node 	*node;
 #define MAXLINESIZE 1000 /* lines in a digraph just shouldn't get that longer ... */
 #define MAXDATASIZE 100 /* max number of bytes we can get at once  */
 extern char lbuf[MAXLINESIZE];
 /* process */
-int process_init();
+// int process_init();
 int process_main();
-int process_quit();
+// int process_quit();
 /* net */
 int net_init(char *host);
 int net_main();

Modified: trunk/apps/olsrs3d/process.c
===================================================================
--- trunk/apps/olsrs3d/process.c	2006-03-02 23:59:11 UTC (rev 131)
+++ trunk/apps/olsrs3d/process.c	2006-03-03 00:01:13 UTC (rev 132)
@@ -1,10 +1,9 @@
 /*
  * process.c
  *
- * Copyright (C) 2005-2006 Simon Wunderlich <dotslash at packetmixer.de>
+ * Copyright (C) 2004-2006 Simon Wunderlich <dotslash at packetmixer.de>
  *                         Marek Lindner <lindner_marek at yahoo.de>
  *                         Andreas Langer <andreas_lbg at gmx.de>
- * Copyright (C) 2004-2006 Simon Wunderlich <dotslash at packetmixer.de>
  *
  * This file is part of olsrs3d, an olsr topology visualizer for s3d.
  * See http://s3d.berlios.de/ for more updates.
@@ -31,12 +30,15 @@
 #include <stdlib.h> 	/* rand(), malloc(), realloc(), free(), strtof() */
 #include <s3d.h>
 #include "olsrs3d.h"
+
 char lbuf[MAXLINESIZE];
-int max,new_max;
-float 	*adj,*new_adj;
-int		*adj_obj,*new_adj_obj;
 
 
+// int max,new_max;
+// float 	*adj,*new_adj;
+// int		*adj_obj,*new_adj_obj;
+
+
 /***
  *
  * create new or alter connection between 2 nodes
@@ -142,18 +144,18 @@
  *   l    =>   length ? ETX ?
  *
  ***/
-
+/*
 int add_adj(int n1, int n2, float l)
 {
 	int o,i,j;
 	i=n1<n2?n1:n2;
 	j=n1>n2?n1:n2;
 	if ((n1<max) && (n2<max))
-		/* connection already exists */
+		/ * connection already exists * /
 		o=adj_obj[i*max+j];
 	else o=-1;
 	if (o==-1)
-	{ /* need to generate new object .. */
+	{ / * need to generate new object .. * /
 		o=s3d_new_object();
 		s3d_push_material(o,1.0,1.0,1.0,
 							1.0,1.0,1.0,
@@ -162,14 +164,14 @@
 		s3d_push_polygon(o,0,4,5,0);
 		s3d_push_polygon(o,3,1,2,0);
 
-/*		printf("new adjacent object %d between %d and %d\n",o,i,j);*/
+/ *		printf("new adjacent object %d between %d and %d\n",o,i,j);* /
 	}
 	new_adj_obj[i*new_max+j]=o;
 	new_adj[i*new_max+j]=l;
 	new_adj[j*new_max+i]=l;
 
 	return(0);
-}
+}*/
 
 
 
@@ -178,7 +180,7 @@
  * redo all connections between nodes ?
  *
  ***/
-
+/*
 int resize_adj()
 {
 	int i,ind;
@@ -187,26 +189,26 @@
 
 	if (new_max>1)
 	{
-		/* leave out one ? */
+		/ * leave out one ? * /
 		for (i=(new_max-2);i>=0;i--)
 		{
 			memmove(new_adj+new_max*i,new_adj+(new_max-1)*i,sizeof(float)*(new_max-1));
 			memmove(new_adj_obj+new_max*i,new_adj_obj+(new_max-1)*i,sizeof(float)*(new_max-1));
-			ind=i*new_max+(new_max-1);				/* the right edge */
+			ind=i*new_max+(new_max-1);				/ * the right edge * /
 			new_adj[ind]=0.0f;
 			new_adj_obj[ind]=-1;
-			ind=(new_max-1)*new_max+i;				/* the bottom edge */
+			ind=(new_max-1)*new_max+i;				/ * the bottom edge * /
 			new_adj[ind]=0.0f;
 			new_adj_obj[ind]=-1;
 		}
 	}
-	new_adj[new_max*new_max-1]=0.0f;			/* the right bottom corner */
-	new_adj_obj[new_max*new_max-1]=-1;			/* the right bottom corner */
+	new_adj[new_max*new_max-1]=0.0f;			/ * the right bottom corner * /
+	new_adj_obj[new_max*new_max-1]=-1;			/ * the right bottom corner * /
 	return(0);
 }
+*/
 
 
-
 /***
  *
  * get pointer to olsr node or create new node if node string could not be found
@@ -307,35 +309,35 @@
  *   return node id
  *
  ***/
-
+/*
 int get_node_num(char *str)
 {
-	int i,j;   /* inc vars */
-	float f;   /* where does it get its value from ? */
+	int i,j;   / * inc vars * /
+	float f;   / * where does it get its value from ? * /
 
 	for (i=0;i<new_max;i++)
 	{
 		if (strncmp(node[i].name,str,NAMEMAX)==0)
 		{
-			return(i); /* return the index */
+			return(i); / * return the index * /
 		}
 	}
 
-	/* i==new_max now */
+	/ * i==new_max now * /
 	new_max++;
 
 	node=realloc(node,sizeof(struct t_node)*new_max);
 
-	/* create new node */
+	/ * create new node * /
 	strncpy(node[i].name,str,NAMEMAX);
 	node[i].obj=s3d_clone(Olsr_node_obj);
 	s3d_flags_on(node[i].obj,S3D_OF_VISIBLE);
 
-	/* create node text and attach (link) it to the node */
+	/ * create node text and attach (link) it to the node * /
 	node[i].s_obj=s3d_draw_string(str,&f);
 	s3d_link(node[i].s_obj, node[i].obj);
 	s3d_translate(node[i].s_obj,-f/2,-2,0);
-	/*s3d_rotate(node[i].s_obj,0,180,0);*/
+	/ *s3d_rotate(node[i].s_obj,0,180,0);* /
 	s3d_flags_on(node[i].s_obj,S3D_OF_VISIBLE);
 
 	printf("new %s [%d], Olsr_node_obj nr. %d - %d\n",str,i,node[i].obj,node[i].s_obj);
@@ -349,24 +351,24 @@
 	resize_adj();
 
 	return(i);
-}
+}*/
 
-int commit_input()
+/*int commit_input()
 {
 	int 	i,j;
 	float 	*swap_adj;
 	int  	*swap_adj_obj;
 	char	nc_str[20];
-/* 	printf("committing input ... \n");
+	printf("committing input ... \n");
 
-	/ * remove old adjacent objects ... * /
+     / * remove old adjacent objects ... * /
  	for (i=0;i<max;i++)
  		for (j=i+1;j<max;j++)
  			if (adj_obj[i*max+j]!=-1)
  				if (new_adj_obj[i*new_max+j]==-1)
  				{
-   / *				printf("old link does not exist anymore ...\n");* /
- 					/ * this link does not exist anymore ... * /
+ 				printf("old link does not exist anymore ...\n");
+ 					/ * this link does not exist anymore ...
  					s3d_del_object(adj_obj[i*max+j]);
  				}
 	/ * swap the matrices * /
@@ -375,11 +377,11 @@
 
  	adj=new_adj;
  	adj_obj=new_adj_obj;
-	*/
 
 
-	/* if we have more nodes redraw node count */
-	/* what if we have less nodes ?? */
+
+	/ * if we have more nodes redraw node count * /
+	/ * what if we have less nodes ?? * /
 	if (new_max>max)
 	{
 		swap_adj=realloc(swap_adj,sizeof(float)*new_max*new_max);
@@ -394,23 +396,25 @@
 
 	}
 
-/*
+
  	new_adj=swap_adj;
  	new_adj_obj=swap_adj_obj;
- 	*/
-	/* setting new maxsize */
+
+	/ * setting new maxsize * /
 	max=new_max;
-	/* resetting the input-matrices*/
-	/*
+	/ * resetting the input-matrices * /
+
  	for (i=0;i<max;i++)
  	for (j=0;j<max;j++)
  	{
  		new_adj[i*max+j]=0.0;
  		new_adj_obj[i*max+j]=-1;
  	}
- 	*/
+
 	return(0);
 }
+
+*/
 /*
  int parse_line( int lbuf_index ) {
 
@@ -665,7 +669,7 @@
 }
 
 
-int process_init()
+/* int process_init()
 {
 	lbuf[0]='\0';
 	max=new_max=0;
@@ -684,3 +688,4 @@
 	if (new_adj_obj!=NULL) 	free(new_adj_obj);
 	return(0);
 }
+*/
\ No newline at end of file



From marec at berlios.de  Fri Mar  3 02:44:49 2006
From: marec at berlios.de (marec at BerliOS)
Date: Fri, 3 Mar 2006 02:44:49 +0100
Subject: [S3d-svn] r133 - trunk/apps/olsrs3d
Message-ID: <200603030144.k231in54017579@sheep.berlios.de>

Author: marec
Date: 2006-03-03 02:44:42 +0100 (Fri, 03 Mar 2006)
New Revision: 133

Modified:
   trunk/apps/olsrs3d/main.c
   trunk/apps/olsrs3d/olsrs3d.h
   trunk/apps/olsrs3d/process.c
Log:
- remove old code II
- fix crash: vanished node
- update license info
- rename olsr_con_list to olsr_neigh_list in order to improve code clarity

Modified: trunk/apps/olsrs3d/main.c
===================================================================
--- trunk/apps/olsrs3d/main.c	2006-03-03 00:01:13 UTC (rev 132)
+++ trunk/apps/olsrs3d/main.c	2006-03-03 01:44:42 UTC (rev 133)
@@ -45,11 +45,11 @@
 
 int Olsr_node_count = 0, Last_olsr_node_count = -1;
 int Olsr_node_count_obj = -1;
+
 int Byte_count;
 
-// int node_count=-1;
-// int alpha=0;
 int Olsr_node_obj, Olsr_node_inet_obj, Olsr_node_hna_net;
+
 float Asp = 1.0;
 float Bottom = -1.0;
 float Left = -1.0;
@@ -174,7 +174,7 @@
 
 /***
  *
- * check whether is a new / modified node and handle it accordingly
+ * check whether is a new / modified / vanished node and handle it accordingly
  *
  *   *olsr_node =>   pointer to current olsr_node
  *
@@ -185,11 +185,10 @@
 	int result;   /* result of strcmp */
 	float f, distance;
 	float tmp_mov_vec[3];
-	struct olsr_node *top_olsr_node = NULL;   /* parent olsr node */
-	struct olsr_node **tmp_olsr_node;
+	struct olsr_node *other_node;
 	struct olsr_con **olsr_con;
 	struct Obj_to_ip *Obj_to_ip_curr;
-	struct olsr_con_list *olsr_con_list, *prev_olsr_con_list, *other_node_con_list, *tmp_olsr_con_list;
+	struct olsr_neigh_list *olsr_neigh_list, *prev_olsr_neigh_list, *other_node_neigh_list, *tmp_olsr_neigh_list;
 
 	/* no more nodes left */
 	if ( olsr_node == NULL ) return;
@@ -225,51 +224,61 @@
 		}
 
 		/* delete olsr connections of this node */
-		olsr_con_list = olsr_node->olsr_con_list;
+		olsr_neigh_list = olsr_node->olsr_neigh_list;
 
-		while ( olsr_con_list != NULL ) {
+		while ( olsr_neigh_list != NULL ) {
 
 			/* get connection list of 'other' node */
-			if ( olsr_con_list->olsr_con->left_olsr_node == olsr_node ) {
-				other_node_con_list = olsr_con_list->olsr_con->right_olsr_node->olsr_con_list;
+			if ( olsr_neigh_list->olsr_con->left_olsr_node == olsr_node ) {
+				other_node = olsr_neigh_list->olsr_con->right_olsr_node;
 			} else {
-				other_node_con_list = olsr_con_list->olsr_con->left_olsr_node->olsr_con_list;
+				other_node = olsr_neigh_list->olsr_con->left_olsr_node;
 			}
 
 			/* find this connection in 'other' nodes connection list ... */
-			prev_olsr_con_list = NULL;
+			prev_olsr_neigh_list = NULL;
+			other_node_neigh_list = other_node->olsr_neigh_list;
 
-			while ( other_node_con_list != NULL ) {
+			while ( other_node_neigh_list != NULL ) {
 
-				if( other_node_con_list->olsr_con->obj_id == olsr_con_list->olsr_con->obj_id ) break;
+				if ( other_node_neigh_list->olsr_con->obj_id == olsr_neigh_list->olsr_con->obj_id ) {
 
-				prev_olsr_con_list = other_node_con_list;
-				other_node_con_list = other_node_con_list->next_olsr_con_list;
+					/* and delete it ! */
+					if ( prev_olsr_neigh_list != NULL ) {
+						/* is first, any or last element in the list */
+						prev_olsr_neigh_list->next_olsr_neigh_list = other_node_neigh_list->next_olsr_neigh_list;
+					} else {
+						/* the only element in the list */
+						other_node->olsr_neigh_list = NULL;
+					}
 
-			}
+					free( other_node_neigh_list );
 
-			/* and delete it ! */
-			if ( other_node_con_list != NULL ) {
-				if ( prev_olsr_con_list != NULL ) prev_olsr_con_list->next_olsr_con_list = other_node_con_list->next_olsr_con_list;
-				free( other_node_con_list );
+					break;
+
+				}
+
+				prev_olsr_neigh_list = other_node_neigh_list;
+				other_node_neigh_list = other_node_neigh_list->next_olsr_neigh_list;
+
 			}
 
-			s3d_del_object( olsr_con_list->olsr_con->obj_id );
+			s3d_del_object( olsr_neigh_list->olsr_con->obj_id );
 
 			/* delete connection */
-			if ( olsr_con_list->olsr_con->prev_olsr_con != NULL ) olsr_con_list->olsr_con->prev_olsr_con->next_olsr_con = olsr_con_list->olsr_con->next_olsr_con;
-			if ( olsr_con_list->olsr_con->next_olsr_con != NULL ) olsr_con_list->olsr_con->next_olsr_con->prev_olsr_con = olsr_con_list->olsr_con->prev_olsr_con;
+			if ( olsr_neigh_list->olsr_con->prev_olsr_con != NULL ) olsr_neigh_list->olsr_con->prev_olsr_con->next_olsr_con = olsr_neigh_list->olsr_con->next_olsr_con;
+			if ( olsr_neigh_list->olsr_con->next_olsr_con != NULL ) olsr_neigh_list->olsr_con->next_olsr_con->prev_olsr_con = olsr_neigh_list->olsr_con->prev_olsr_con;
 
-			tmp_olsr_con_list = olsr_con_list;
+			tmp_olsr_neigh_list = olsr_neigh_list;
 
-			olsr_con_list = olsr_con_list->next_olsr_con_list;
+			olsr_neigh_list = olsr_neigh_list->next_olsr_neigh_list;
 
-			free( tmp_olsr_con_list->olsr_con );
-			free( tmp_olsr_con_list );
+			free( tmp_olsr_neigh_list->olsr_con );
+			free( tmp_olsr_neigh_list );
 
 		}
 
-		olsr_node->olsr_con_list = NULL;
+		olsr_node->olsr_neigh_list = NULL;
 
 	} else if (olsr_node->visible) {
 
@@ -321,24 +330,24 @@
 			/* myself ... */
 /* 			if ( strncmp( Obj_to_ip_curr->olsr_node->ip, olsr_node->ip, NAMEMAX ) != 0 ) {*/
 
-				olsr_con_list = olsr_node->olsr_con_list;
-				while ( olsr_con_list != NULL ) {
+				olsr_neigh_list = olsr_node->olsr_neigh_list;
+				while ( olsr_neigh_list != NULL ) {
 
 					/* nodes are related */
-					if ( ( olsr_con_list->olsr_con->left_olsr_node->visible == 1 ) && ( olsr_con_list->olsr_con->right_olsr_node->visible == 1 ) ) {
+					if ( ( olsr_neigh_list->olsr_con->left_olsr_node->visible == 1 ) && ( olsr_neigh_list->olsr_con->right_olsr_node->visible == 1 ) ) {
 
-						if ( ( strncmp( olsr_con_list->olsr_con->left_olsr_node->ip, Obj_to_ip_curr->olsr_node->ip, NAMEMAX ) == 0 ) || ( strncmp( olsr_con_list->olsr_con->right_olsr_node->ip, Obj_to_ip_curr->olsr_node->ip, NAMEMAX ) == 0 ) ) break;
+						if ( ( strncmp( olsr_neigh_list->olsr_con->left_olsr_node->ip, Obj_to_ip_curr->olsr_node->ip, NAMEMAX ) == 0 ) || ( strncmp( olsr_neigh_list->olsr_con->right_olsr_node->ip, Obj_to_ip_curr->olsr_node->ip, NAMEMAX ) == 0 ) ) break;
 
-// 						if ( ( olsr_con_list->olsr_con->left_olsr_node == Obj_to_ip_curr->olsr_node ) || (  olsr_con_list->olsr_con->right_olsr_node == Obj_to_ip_curr->olsr_node ) ) break;
+						/* if ( ( olsr_con_list->olsr_con->left_olsr_node == Obj_to_ip_curr->olsr_node ) || (  olsr_con_list->olsr_con->right_olsr_node == Obj_to_ip_curr->olsr_node ) ) break; */
 
 					}
 
-					olsr_con_list = olsr_con_list->next_olsr_con_list;
+					olsr_neigh_list = olsr_neigh_list->next_olsr_neigh_list;
 
 				}
 
 				/* nodes are not related - so drift */
-				if ( olsr_con_list == NULL ) {
+				if ( olsr_neigh_list == NULL ) {
 
 					distance = dirt( olsr_node->pos_vec, Obj_to_ip_curr->olsr_node->pos_vec, tmp_mov_vec );
 					if ( distance < 0.1 ) distance = 0.1;
@@ -563,8 +572,6 @@
 		}
 	}
 
-// 	alpha=(alpha+5)%360;
-// 	s3d_rotate(mesh,0,alpha,0);
 	if(RotateSwitch) {
 		Zp_rotate = (Zp_rotate+RotateSpeed)%360;
 		s3d_rotate(ZeroPoint,0,Zp_rotate,0);
@@ -575,13 +582,17 @@
 
 }
 
-void stop()
-{
+
+
+void stop() {
+
 	s3d_quit();
 	net_quit();
-// 	process_quit();
+
 }
 
+
+
 /***
  *
  * eventhandler when key pressed
@@ -641,7 +652,7 @@
 	/* printf("obj2ip: search return %s\n",olsr_node->ip); */
 
 	distance = dirt(olsr_node->pos_vec,CamPosition[0],tmp_vector);
-	mov_add(ZeroPosition,tmp_vector,1.0);	
+	mov_add(ZeroPosition,tmp_vector,1.0);
 	s3d_translate(ZeroPoint,ZeroPosition[0],ZeroPosition[1],ZeroPosition[2]);
 }
 
@@ -674,10 +685,9 @@
 			Left=-1.0;
 
 		}
-// 		s3d_translate(mesh,(-Left)*3.0-1.8,Bottom*3.0+0.8,-3.0);
-// 		s3d_flags_on(mesh,S3D_OF_VISIBLE);
+
 	}
-	// printf("%f %f %f\n",inf->trans_x,inf->trans_y,inf->trans_z);
+	/* printf("%f %f %f\n",inf->trans_x,inf->trans_y,inf->trans_z); */
 }
 
 /***
@@ -845,8 +855,10 @@
 	}
 
 	if ( Debug ) printf( "debug mode enabled ...\n" );
+
 	/* initialize obj2ip linked list */
 	lst_initialize();
+
 	/* delete olsrs3d options */
 	while ( ( optind < argc ) && ( argv[optind][0] != '-' ) ) optind++;   /* optind may point to ip addr of '-H' */
 	optind--;
@@ -856,7 +868,7 @@
 
 	/* set extern int optind = 0 for parse_args in io.c */
 	optind = 0;
-// 	process_init(Olsr_host);
+
 	if (!net_init(Olsr_host))
 	{
 		if (!s3d_init(&argc,&argv,"olsrs3d"))
@@ -870,14 +882,10 @@
 			Olsr_node_obj = s3d_import_3ds_file( "objs/accesspoint.3ds" );
 			Olsr_node_inet_obj = s3d_import_3ds_file( "objs/accesspoint_inet.3ds" );
 			Olsr_node_hna_net = s3d_import_3ds_file( "objs/internet.3ds" );
-// 			mesh=s3d_import_3ds_file("objs/meshnode.3ds");
-// 			s3d_link(mesh,0);
-// 			s3d_scale(mesh,0.15);
 			ZeroPoint = s3d_new_object();
 			s3d_mainloop(mainloop);
 			s3d_quit();
 			net_quit();
-// 			process_quit();
 		}
 	}
 	return(0);

Modified: trunk/apps/olsrs3d/olsrs3d.h
===================================================================
--- trunk/apps/olsrs3d/olsrs3d.h	2006-03-03 00:01:13 UTC (rev 132)
+++ trunk/apps/olsrs3d/olsrs3d.h	2006-03-03 01:44:42 UTC (rev 133)
@@ -26,15 +26,11 @@
 
 
 #define NAMEMAX		128
+#define MAXLINESIZE 1000 /* lines in a digraph just shouldn't get that longer ... */
+#define MAXDATASIZE 100 /* max number of bytes we can get at once  */
 
 
-// struct t_node {
-// 	float pos[3], mov[3];
-// 	char name[NAMEMAX];
-// 	int obj,s_obj;
-// };
 
-
 /* linked list for the all connections */
 struct olsr_con {
 
@@ -49,10 +45,10 @@
 };
 
 
-/* linked list for the connections of each olsr node */
-struct olsr_con_list {
+/* linked list for the neighbours of each olsr node */
+struct olsr_neigh_list {
 
-	struct olsr_con_list *next_olsr_con_list;   /* pointer to next connection */
+	struct olsr_neigh_list *next_olsr_neigh_list;   /* pointer to next neighbour */
 	struct olsr_con *olsr_con;   /* pointer to the connection */
 
 };
@@ -72,7 +68,7 @@
 	float mov_vec[3];   /* move vector */
 	int obj_id;   /* id of node object in s3d */
 	int desc_id;   /* id of node description object in s3d */
-	struct olsr_con_list *olsr_con_list;   /* pointer to first connection */
+	struct olsr_neigh_list *olsr_neigh_list;   /* pointer to first neighbour */
 
 };
 
@@ -106,23 +102,9 @@
 
 extern float Bottom, Left;
 
-// extern float bottom,left;
-//
-// extern int 	max, new_max;
-// extern float 	*adj;
-// extern int	*adj_obj;
-// extern int	node_count;
-// extern float Bottom, Left;
-
-
-// struct t_node 	*node;
-#define MAXLINESIZE 1000 /* lines in a digraph just shouldn't get that longer ... */
-#define MAXDATASIZE 100 /* max number of bytes we can get at once  */
 extern char lbuf[MAXLINESIZE];
 /* process */
-// int process_init();
 int process_main();
-// int process_quit();
 /* net */
 int net_init(char *host);
 int net_main();

Modified: trunk/apps/olsrs3d/process.c
===================================================================
--- trunk/apps/olsrs3d/process.c	2006-03-03 00:01:13 UTC (rev 132)
+++ trunk/apps/olsrs3d/process.c	2006-03-03 01:44:42 UTC (rev 133)
@@ -34,11 +34,7 @@
 char lbuf[MAXLINESIZE];
 
 
-// int max,new_max;
-// float 	*adj,*new_adj;
-// int		*adj_obj,*new_adj_obj;
 
-
 /***
  *
  * create new or alter connection between 2 nodes
@@ -115,19 +111,19 @@
 		(*olsr_con)->prev_olsr_con = prev_olsr_con;
 
 		/* add new olsr connection to olsr nodes in order to access the connection from the olsr node */
-		struct olsr_con_list **olsr_con_list = &(*olsr_con)->left_olsr_node->olsr_con_list;
-		while ( (*olsr_con_list) != NULL ) olsr_con_list = &(*olsr_con_list)->next_olsr_con_list;
-		(*olsr_con_list) = malloc( sizeof( struct olsr_con_list ) );
-		if ( (*olsr_con_list) == NULL ) out_of_mem();
-		(*olsr_con_list)->olsr_con = (*olsr_con);
-		(*olsr_con_list)->next_olsr_con_list = NULL;
+		struct olsr_neigh_list **olsr_neigh_list = &(*olsr_con)->left_olsr_node->olsr_neigh_list;
+		while ( (*olsr_neigh_list) != NULL ) olsr_neigh_list = &(*olsr_neigh_list)->next_olsr_neigh_list;
+		(*olsr_neigh_list) = malloc( sizeof( struct olsr_neigh_list ) );
+		if ( (*olsr_neigh_list) == NULL ) out_of_mem();
+		(*olsr_neigh_list)->olsr_con = (*olsr_con);
+		(*olsr_neigh_list)->next_olsr_neigh_list = NULL;
 
-		olsr_con_list = &(*olsr_con)->right_olsr_node->olsr_con_list;
-		while ( (*olsr_con_list) != NULL ) olsr_con_list = &(*olsr_con_list)->next_olsr_con_list;
-		(*olsr_con_list) = malloc( sizeof( struct olsr_con_list ) );
-		if ( (*olsr_con_list) == NULL ) out_of_mem();
-		(*olsr_con_list)->olsr_con = (*olsr_con);
-		(*olsr_con_list)->next_olsr_con_list = NULL;
+		olsr_neigh_list = &(*olsr_con)->right_olsr_node->olsr_neigh_list;
+		while ( (*olsr_neigh_list) != NULL ) olsr_neigh_list = &(*olsr_neigh_list)->next_olsr_neigh_list;
+		(*olsr_neigh_list) = malloc( sizeof( struct olsr_neigh_list ) );
+		if ( (*olsr_neigh_list) == NULL ) out_of_mem();
+		(*olsr_neigh_list)->olsr_con = (*olsr_con);
+		(*olsr_neigh_list)->next_olsr_neigh_list = NULL;
 
 	}
 
@@ -137,80 +133,6 @@
 
 /***
  *
- * create new or alter connection between 2 nodes
- *
- *   n1   =>   node id 1
- *   n2   =>   node id 2
- *   l    =>   length ? ETX ?
- *
- ***/
-/*
-int add_adj(int n1, int n2, float l)
-{
-	int o,i,j;
-	i=n1<n2?n1:n2;
-	j=n1>n2?n1:n2;
-	if ((n1<max) && (n2<max))
-		/ * connection already exists * /
-		o=adj_obj[i*max+j];
-	else o=-1;
-	if (o==-1)
-	{ / * need to generate new object .. * /
-		o=s3d_new_object();
-		s3d_push_material(o,1.0,1.0,1.0,
-							1.0,1.0,1.0,
-							1.0,1.0,1.0);
-		s3d_flags_on(o,S3D_OF_VISIBLE);
-		s3d_push_polygon(o,0,4,5,0);
-		s3d_push_polygon(o,3,1,2,0);
-
-/ *		printf("new adjacent object %d between %d and %d\n",o,i,j);* /
-	}
-	new_adj_obj[i*new_max+j]=o;
-	new_adj[i*new_max+j]=l;
-	new_adj[j*new_max+i]=l;
-
-	return(0);
-}*/
-
-
-
-/***
- *
- * redo all connections between nodes ?
- *
- ***/
-/*
-int resize_adj()
-{
-	int i,ind;
-	new_adj=realloc(new_adj,sizeof(float)*new_max*new_max);
-	new_adj_obj=realloc(new_adj_obj,sizeof(int)*new_max*new_max);
-
-	if (new_max>1)
-	{
-		/ * leave out one ? * /
-		for (i=(new_max-2);i>=0;i--)
-		{
-			memmove(new_adj+new_max*i,new_adj+(new_max-1)*i,sizeof(float)*(new_max-1));
-			memmove(new_adj_obj+new_max*i,new_adj_obj+(new_max-1)*i,sizeof(float)*(new_max-1));
-			ind=i*new_max+(new_max-1);				/ * the right edge * /
-			new_adj[ind]=0.0f;
-			new_adj_obj[ind]=-1;
-			ind=(new_max-1)*new_max+i;				/ * the bottom edge * /
-			new_adj[ind]=0.0f;
-			new_adj_obj[ind]=-1;
-		}
-	}
-	new_adj[new_max*new_max-1]=0.0f;			/ * the right bottom corner * /
-	new_adj_obj[new_max*new_max-1]=-1;			/ * the right bottom corner * /
-	return(0);
-}
-*/
-
-
-/***
- *
  * get pointer to olsr node or create new node if node string could not be found
  *
  *   **node =>   pointer to current olsr_node
@@ -290,7 +212,7 @@
 
 		(*olsr_node)->obj_id = -1;
 		(*olsr_node)->desc_id = -1;
-		(*olsr_node)->olsr_con_list = NULL;
+		(*olsr_node)->olsr_neigh_list = NULL;
 
 		return (*olsr_node);
 
@@ -300,254 +222,6 @@
 
 
 
-/***
- *
- * get node id or create new node if node string could not be found
- *
- *   *str   =>   node description
- *
- *   return node id
- *
- ***/
-/*
-int get_node_num(char *str)
-{
-	int i,j;   / * inc vars * /
-	float f;   / * where does it get its value from ? * /
-
-	for (i=0;i<new_max;i++)
-	{
-		if (strncmp(node[i].name,str,NAMEMAX)==0)
-		{
-			return(i); / * return the index * /
-		}
-	}
-
-	/ * i==new_max now * /
-	new_max++;
-
-	node=realloc(node,sizeof(struct t_node)*new_max);
-
-	/ * create new node * /
-	strncpy(node[i].name,str,NAMEMAX);
-	node[i].obj=s3d_clone(Olsr_node_obj);
-	s3d_flags_on(node[i].obj,S3D_OF_VISIBLE);
-
-	/ * create node text and attach (link) it to the node * /
-	node[i].s_obj=s3d_draw_string(str,&f);
-	s3d_link(node[i].s_obj, node[i].obj);
-	s3d_translate(node[i].s_obj,-f/2,-2,0);
-	/ *s3d_rotate(node[i].s_obj,0,180,0);* /
-	s3d_flags_on(node[i].s_obj,S3D_OF_VISIBLE);
-
-	printf("new %s [%d], Olsr_node_obj nr. %d - %d\n",str,i,node[i].obj,node[i].s_obj);
-
-	for (j=0;j<3;j++)
-	{
-		node[i].pos[j]=((float)2.0*rand())/RAND_MAX-1.0;
-		node[i].mov[j]=0.0;
-	}
-
-	resize_adj();
-
-	return(i);
-}*/
-
-/*int commit_input()
-{
-	int 	i,j;
-	float 	*swap_adj;
-	int  	*swap_adj_obj;
-	char	nc_str[20];
-	printf("committing input ... \n");
-
-     / * remove old adjacent objects ... * /
- 	for (i=0;i<max;i++)
- 		for (j=i+1;j<max;j++)
- 			if (adj_obj[i*max+j]!=-1)
- 				if (new_adj_obj[i*new_max+j]==-1)
- 				{
- 				printf("old link does not exist anymore ...\n");
- 					/ * this link does not exist anymore ...
- 					s3d_del_object(adj_obj[i*max+j]);
- 				}
-	/ * swap the matrices * /
- 	swap_adj=adj;
- 	swap_adj_obj=adj_obj;
-
- 	adj=new_adj;
- 	adj_obj=new_adj_obj;
-
-
-
-	/ * if we have more nodes redraw node count * /
-	/ * what if we have less nodes ?? * /
-	if (new_max>max)
-	{
-		swap_adj=realloc(swap_adj,sizeof(float)*new_max*new_max);
-		swap_adj_obj=realloc(swap_adj_obj,sizeof(int)*new_max*new_max);
-		s3d_del_object(node_count);
-		snprintf(nc_str,20,"node count: %d",new_max);
-		node_count=s3d_draw_string(nc_str,NULL);
-		s3d_link(node_count,0);
-		s3d_flags_on(node_count,S3D_OF_VISIBLE);
-		s3d_scale(node_count,0.2);
-		s3d_translate(node_count,left*3.0,-bottom*3.0-0.2,-3.0);
-
-	}
-
-
- 	new_adj=swap_adj;
- 	new_adj_obj=swap_adj_obj;
-
-	/ * setting new maxsize * /
-	max=new_max;
-	/ * resetting the input-matrices * /
-
- 	for (i=0;i<max;i++)
- 	for (j=0;j<max;j++)
- 	{
- 		new_adj[i*max+j]=0.0;
- 		new_adj_obj[i*max+j]=-1;
- 	}
-
-	return(0);
-}
-
-*/
-/*
- int parse_line( int lbuf_index ) {
-
- / * 	int line_length; * /
- 	char *lbuf_ptr;
- / * 	char *data[3];  * / / * in this order: ip_from, ip_to, label * /
- 	char *lbuf_ptr, *con_from, *con_to, *etx;
- 	char *con_from;
- 	char *con_to;
- 	char *etx;
-
- 	struct olsr_node *olsr_node1;   / * pointer to olsr nodes * /
- 	struct olsr_node *olsr_node2;
-
- / * 	line_length = strlen( lbuf[lbuf_index] ); * /
- 	lbuf_ptr = &lbuf[lbuf_index];
-
- 	int i,dn,n1,n2;
- 	float f;
- / * 	data[0]=data[1]=data[2]=NULL; * /
- 	/ *lbuf[n]='\0';  we don't need this one anyway * /
-
- 	dn=0;
- 	while ( (*lbuf_ptr) != '\0' ) {
-
- 		switch ( (*lbuf_ptr) ) {
- / * 			printf( "%c", (*lbuf_ptr) ); * /
- 			case '"':
- 				if (dn<6)
- 				{
- 					if ( !(dn%2) ) { / * starts * /
- 						switch ( dn ) {
- 							case 0:
- 								con_from = lbuf_ptr;
- 								break;
- 							case 2:
- 								con_to = lbuf_ptr;
- 								break;
-							case 4:
- 								etx = lbuf_ptr;
- 								break;
- 						}
- / * 						*data[(dn/2)] = (*lbuf_ptr); * /
- 					} else { / * ends * /
- 						(*lbuf_ptr) = '\0'; / * string terminator!! * /
- 					}
- 				}
- 				dn++;
-
- 				break;
- / * 			case '}':
-  				if (!(dn%2))	 / * we don't end the input inside of strings ... this won't happen anyway, I guess * /
-  					commit_input();
- 				break;
-  * /
- 		}
- 		lbuf_ptr++;
- 	}
- 	if (dn>=6)
- 	{
-  / *		printf("######link from [%s] to [%s], label [%s]\n",data[0],data[1],data[2]);* /
- 		/ * announced network via HNA * /
- 		if ( strncmp( etx, "HNA", NAMEMAX ) == 0 ) {
-
- 			/ * connection to internet * /
- 			if ( strncmp( con_to, "0.0.0.0/0.0.0.0", NAMEMAX ) == 0 ) {
-
- 				olsr_node1 = get_olsr_node( &Olsr_root, con_from );
-
- 				if ( olsr_node1->node_type != 1 ) {
-
- 					olsr_node1->node_type = 1;
- 					olsr_node1->node_type_modified = 1;
- 					if ( Debug ) printf( "new internet: %s\n", olsr_node1->ip );
-
- 				}
-
- 			/ * normal HNA * /
- 			} else {
-
- 				olsr_node1 = get_olsr_node( &Olsr_root, con_from );
- 				olsr_node2 = get_olsr_node( &Olsr_root, con_to );
-
- 				if ( olsr_node2->node_type != 2 ) {
-
- 					olsr_node2->node_type = 2;
- 					olsr_node2->node_type_modified = 1;
- 					if ( Debug ) printf( "new hna network: %s\n", olsr_node2->ip );
-
- 				}
-
- 				add_olsr_con( olsr_node1, olsr_node2, -1000.00 );
-
- 			}
-
-
-
- 		/ * normal node * /
- 		} else {
-				/ *
- 	 			n1=get_node_num(data[0]);
-  				n2=get_node_num(data[1]);
-  			* /
- 			olsr_node1 = get_olsr_node( &Olsr_root, con_from );
- 			olsr_node2 = get_olsr_node( &Olsr_root, con_to );
- 			f=10.0+strtod(etx,NULL)/10.0;
-	 / *		printf("######link from %d to %d, %f, %d\n",n1,n2,f, f>=10);* /
- 			if (f>=5) / * just to prevent ascii to float converting inconsistency ... * /
- / * 				add_adj(n1,n2,f);* /
- 				add_olsr_con( olsr_node1, olsr_node2, f );
- 		}
- 	}
- 	return(0);
- }
- int process_main()
- {
- 	int i,l;
- 	i=0;
- 	l=strlen(lbuf);
- 	while (i<l)
- 	{
- 		if ((lbuf[i])=='\n')
- 		{
- 			parse_line(i);
- 			memmove(lbuf,lbuf+i+1,MAXLINESIZE-i-1);
- 			process_main(); / * well, we don't have to do this the recursive way here, but who cares ... * /
- 			return(0);
- 		}
- 		i++;
- 	}
- 	return(0);
- }
-*/
 int process_main() {
 
 	int dn;
@@ -604,7 +278,7 @@
 				/* terminate strings - but not before 6 times '"' */
 				(*con_from_end) = (*con_to_end) = (*etx_end) = '\0';
 
-// 				printf( "con_from: %s, con_to: %s, etx: %s\n", con_from, con_to, etx );
+				/* printf( "con_from: %s, con_to: %s, etx: %s\n", con_from, con_to, etx ); */
 
 				/* announced network via HNA */
 				if ( strncmp( etx, "HNA", NAMEMAX ) == 0 ) {
@@ -667,25 +341,3 @@
 	return(0);
 
 }
-
-
-/* int process_init()
-{
-	lbuf[0]='\0';
-	max=new_max=0;
-	new_adj=adj=NULL;
-	new_adj_obj=adj_obj=NULL;
-	node=NULL;
-	return(0);
-}
-
-int process_quit()
-{
-	if (adj!=NULL) 		free(adj);
-	if (adj_obj!=NULL) 	free(adj_obj);
-	if (node!=NULL) 	free(node);
-	if (new_adj!=NULL) 	free(new_adj);
-	if (new_adj_obj!=NULL) 	free(new_adj_obj);
-	return(0);
-}
-*/
\ No newline at end of file



From dotslash at berlios.de  Fri Mar  3 19:20:56 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Fri, 3 Mar 2006 19:20:56 +0100
Subject: [S3d-svn] r134 - in trunk: . apps client
Message-ID: <200603031820.k23IKuPw015663@sheep.berlios.de>

Author: dotslash
Date: 2006-03-03 19:20:54 +0100 (Fri, 03 Mar 2006)
New Revision: 134

Modified:
   trunk/
   trunk/ChangeLog
   trunk/apps/Makefile.am
   trunk/client/freetype.c
   trunk/client/io.c
Log:
 r183 at balthasar:  dotslash | 2006-03-03 19:20:47 +0100
 - Finally, Font triangulating is stable (at least it seems so ;)



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:181
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:183

Modified: trunk/ChangeLog
===================================================================
--- trunk/ChangeLog	2006-03-03 01:44:42 UTC (rev 133)
+++ trunk/ChangeLog	2006-03-03 18:20:54 UTC (rev 134)
@@ -1,3 +1,5 @@
+2006-03-03  Simon Wunderlich - <dotslash at packetmixer.de>
+	- Finally, Font triangulating is stable (at least it seems so ;)
 2006-02-27  Simon Wunderlich - <dotslash at packetmixer.de>
 	- added GPL/LGPL copyright notes (phew -.-)
 	- implemented object search path as : delimited list

Modified: trunk/apps/Makefile.am
===================================================================
--- trunk/apps/Makefile.am	2006-03-03 01:44:42 UTC (rev 133)
+++ trunk/apps/Makefile.am	2006-03-03 18:20:54 UTC (rev 134)
@@ -6,5 +6,5 @@
 MAYBE_X11GATE=	s3d_x11gate
 endif
 
-SUBDIRS =  ${MAYBE_S3DGPS} ${MAYBE_X11GATE} s3dvt olsrs3d dot_mcp
+SUBDIRS =  ${MAYBE_S3DGPS} ${MAYBE_X11GATE} s3dvt olsrs3d dot_mcp s3dfm
 

Modified: trunk/client/freetype.c
===================================================================
--- trunk/client/freetype.c	2006-03-03 01:44:42 UTC (rev 133)
+++ trunk/client/freetype.c	2006-03-03 18:20:54 UTC (rev 134)
@@ -25,8 +25,10 @@
 /*  this file should render truetype fonts as objects */
 #include "s3d.h"
 #include "s3dlib.h"
-#include <stdlib.h>    /*  malloc(), free() */
-#include <netinet/in.h>  /*  htonl(), htons() */
+#include "sei_interface.h"	/* sei_triangulate_polygon() */
+#include <stdlib.h>    		/*  malloc(), free() */
+#include <netinet/in.h>  	/*  htonl(), htons() */
+#include <math.h>			/*  atan2() */
 #include "ft2build.h"
 #include FT_FREETYPE_H
 #ifndef CALLBACK 
@@ -102,19 +104,23 @@
 	return(0);
 }
 
+
 /* renders a character with seidels algorithm and stores it in the tess_buf for later
  * usage */
 int _s3d_add_tessbuf(unsigned short a)
 {
-	float norm;
-	int i,j,k,c,start;
-	int np,pos,diff,cpos,mpos;
-	double vertices[SEI_SS+1][2];
+	float norm,ar,xa,ya;
+	int i,j,k,c,n,start,outl,s,e;
+	int np,pos;
 	int triangles[SEI_SS*2][3]; /* more than enough ... */
 	int ncontours,ncon;
 	int cntr[SEI_SS];
-	char used[SEI_SS];
-	int map[SEI_SS+1];
+	int ncntr[SEI_SS];
+	int csta[SEI_SS],ncsta[SEI_SS];
+	int perm[SEI_SS];
+	float area[SEI_SS];
+	double vertices[SEI_SS+1][2];
+	double nvertices[SEI_SS+1][2];
 	
 
 	if (FT_Load_Char(face,a,	FT_LOAD_NO_BITMAP|FT_LOAD_NO_SCALE))
@@ -122,8 +128,7 @@
 		errds(VHIGH,"s3d_add_tessbuf():FT_Load_Char()","can't load character");
 		return(-1);
 	} 
-	if (a=='%') return(-1);
-	dprintf(LOW,"triangulating character %c",a);
+	dprintf(VLOW,"[T]riangulating character %c",a);
 	norm=1.0/face->glyph->metrics.vertAdvance;
 	ch=a;
 	v_off=0;
@@ -139,92 +144,123 @@
 			start=j; 	/* first point */
 			i=0;
 			ncon=face->glyph->outline.contours[c]; /* position of the end of ths contour */
-			cntr[c]=ncon-j+1;
+			cntr[c]=ncon-j+1;					   /* how many points do we have here? */
+			csta[c]=j+1;
+			ar=0.0f;
 			while (j<(ncon+1))
 			{
 				/* vertices have reverse order in seidels algorithm, outer contours go anticlockwise, inner contours clockwise */
+				/* calculate the area */
+				k=((j+2-csta[c])%(cntr[c]))+csta[c]-1;
+				ar-=face->glyph->outline.points[j].x * face->glyph->outline.points[k].y;
+				ar+=face->glyph->outline.points[k].x * face->glyph->outline.points[j].y;
+
 				pos=ncon-i;
-				tess_buf[a].vbuf[pos*3]		=vertices[pos+1][0]=face->glyph->outline.points[j].x*norm;
-				tess_buf[a].vbuf[pos*3+1]	=vertices[pos+1][1]=face->glyph->outline.points[j].y*norm;
-				map[pos+1]=pos;
-				tess_buf[a].vbuf[pos*3+2]	=0;
+				vertices[pos+1][0]=face->glyph->outline.points[j].x*norm;
+				vertices[pos+1][1]=face->glyph->outline.points[j].y*norm;
 				j++;
 				i++;
 			}
+			ar=0.5f*norm*norm*ar;
+			dprintf(VLOW,"contour %d has area of %3.3f, cntr is %d, contour starts at %d, ncon %d",c,ar,cntr[c], csta[c], ncon);
+			area[c]=ar; /* save the area */
 		}
-		k=0; /* polygon counter */
-		/* iterate while there are untriangulated outlines left. this is neccesary
-		 * because seidel will only operate on ONE outline at once (number of holes is not 
-		 * limited though) */
-		tess_buf[a].pbuf=malloc(sizeof(unsigned long)*4*(face->glyph->outline.n_points+2*face->glyph->outline.n_contours)); 
-		do {
-			dprintf(LOW,"triangulating %d contours", ncontours);
-			for (i=0;i<ncontours;i++)
-				dprintf(LOW,"[%d]: %d points ", i, cntr[i]);
-			np=sei_triangulate_polygon(ncontours, cntr, vertices, triangles);
-			dprintf(LOW,"[F]ound %d polygons",np);
-			memset(used,0,ncontours);
-			for (i=0;i<np;i++)
+		/* now as we have the areas and sizes of the contours, we need to order our contours so that 
+		 * the outlines and their holes are grouped together */
+		n=ncontours;
+		for (i=0;i<n;i++)
+			perm[i]=i; /* initialise permutation */
+		while (n!=0)
+		{
+			outl=-1;
+			/* find an outline */
+			for (i=0;i<n;i++)
+				if (area[perm[i]]>0)
+				{
+					outl=i; /* found. that was easy ;) */
+					break;
+				}
+			if (outl==-1)
 			{
-				tess_buf[a].pbuf[k*4]=  map[triangles[i][0]];
-				tess_buf[a].pbuf[k*4+1]=map[triangles[i][1]];
-				tess_buf[a].pbuf[k*4+2]=map[triangles[i][2]];
-				tess_buf[a].pbuf[k*4+3]=0;
-				dprintf(LOW,"TRIANG: %d %d %d = %d %d %d",	triangles[i][0],triangles[i][1],triangles[i][2], 
-															map[triangles[i][0]], map[triangles[i][1]], map[triangles[i][2]]);
-				for (j=0;j<3;j++)
+				dprintf(HIGH,"hole without outline found, exiting ... %c",a);
+				return(-1);
+			}
+			for (i=0;i<n;i++)
+			{
+				if (area[perm[i]]<0)
 				{
-					cpos=1;
-					for (c=0;c<ncontours;c++)
+					/* test for a hole inside by taking one (the first) point of the hole and doing the test */
+					xa=vertices[csta[perm[i]]][0];
+					ya=vertices[csta[perm[i]]][1];
+					s=csta[perm[outl]];							/* start point of outline */
+					e=(csta[perm[outl]]+cntr[perm[outl]])-1;		/* end point */
+					ar=0;
+					for (j=s;j<e;j++)
+					{ /* for all points of the outline, sum: */
+						ar+=atan2((vertices[j+1][1]-ya)*(vertices[j][0]-xa)-(vertices[j+1][0]-xa)*(vertices[j][1]-ya),
+								  (vertices[j+1][0]-xa)*(vertices[j][0]-xa)+(vertices[j+1][1]-ya)*(vertices[j][1]-ya));
+					}
+					/* dont forget the start/end-point connection*/
+					ar+=atan2((vertices[s][1]-ya)*(vertices[e][0]-xa)-(vertices[s][0]-xa)*(vertices[e][1]-ya),
+							  (vertices[s][0]-xa)*(vertices[e][0]-xa)+(vertices[s][1]-ya)*(vertices[e][1]-ya));
+					if (fabsf(ar)>1)						/* if ar = 0.0, it's outside, elseway it's a multiple of pi. this check should be
+															 * very generous to roundoff errors */
 					{
-						cpos+=cntr[c];
-						if (triangles[i][j]<cpos)
-						{
-/*							dprintf(LOW,"point %d in contour line %d (cpos = %d) used",triangles[i][j],c,cpos);*/
-							used[c]=1;
-							break;
-						}
+						dprintf(VLOW,"hole %d (%d) in %d (%d): interior angle sum %f (n=%d)",i,perm[i],outl, perm[outl],ar,n);
+						j=perm[n-1];	/* swap our hole to the end */
+						perm[n-1]=perm[i];
+						perm[i]=j;
+						if (outl==n-1)
+							outl=i;		/* outline got swapped */
+						n--;			/* we don't care for the hole at the end anymore as it's found */
+						i--;			/* check again for the just-swapped value in the next
+										 * loop iteration */
 					}
 				}
-				k++;
 			}
-			j=1;
-			for (c=0;c<ncontours;c++)
+			/* all the holes should be behind n-i, if so, so we swap our outline to the end now */
+			j=perm[n-1];	/* swap our hole to the end */
+			perm[n-1]=perm[outl];
+			perm[outl]=j;
+			n--;			/* we don't care for the hole at the end anymore as it's found */
+		}
+		/* finished the permutation, now apply the new order .... */
+		n=1;
+		for (c=0;c<ncontours;c++)
+		{
+			ncsta[c]=n-1;
+			for (j=csta[perm[c]];j<(csta[perm[c]]+cntr[perm[c]]);j++)
 			{
-				j&=used[c];
+				nvertices[n][0]=vertices[j][0];
+				nvertices[n][1]=vertices[j][1];
+				tess_buf[a].vbuf[(n-1)*3]	=nvertices[n][0];
+				tess_buf[a].vbuf[(n-1)*3+1]	=nvertices[n][1];
+				tess_buf[a].vbuf[(n-1)*3+2]	=0;
+				n++;
 			}
-			if (j) 
-				dprintf(LOW,"all contours used");
-			else 
+			ncntr[c]=cntr[perm[c]];
+		}
+		n=0;
+		tess_buf[a].pbuf=malloc(sizeof(unsigned long)*4*(face->glyph->outline.n_points+2*face->glyph->outline.n_contours)); 
+		k=0;
+		for (c=ncontours-1;c>=0;c--)
+		{
+			n++;				 /* count out and inlines ... */
+			if (area[perm[c]]>0) /* outline? start! */
 			{
-				dprintf(LOW,"not all contours used, restarting");
-				diff=0;
-				ncon=0; /* number of actually unused contours */
-				cpos=1; /* position of source vertices */
-				mpos=1; /* position of dest vertices */
-				for (c=0;c<ncontours;c++)
+				dprintf(VLOW,"[T]riangulation from outline %d (%d contours, area = %f)",perm[c],n,area[perm[c]]);
+				np=sei_triangulate_polygon(n, ncntr+c, nvertices+(ncsta[c]), triangles);
+				for (i=0;i<np;i++)
 				{
-					if (!used[c])
-					{
-					  /* not used, move it to new end */
-						dprintf(LOW,"contour %d (%d) not used!!",c,cntr[c]);
-						cntr[ncon]=cntr[c];
-						ncon++;
-						if (cpos!=mpos)
-						{
-							for (i=0;i<cntr[c];i++)
-							{
-								vertices[mpos+i][0]=vertices[cpos+i][0];
-								vertices[mpos+i][1]=vertices[cpos+i][1];
-								map[mpos+i]=map[cpos+i];
-							}
-						}
-					}
-					cpos+=cntr[c];
+					tess_buf[a].pbuf[k*4]=  triangles[i][0]+ncsta[c]-1;
+					tess_buf[a].pbuf[k*4+1]=triangles[i][1]+ncsta[c]-1;
+					tess_buf[a].pbuf[k*4+2]=triangles[i][2]+ncsta[c]-1;
+					tess_buf[a].pbuf[k*4+3]=0;
+					k++;
 				}
+				n=0;
 			}
-			ncontours=ncon;
-		} while (!j);
+		}
 		tess_buf[a].pn=k;
 	}
 	tess_buf[a].xoff=1.0*face->glyph->metrics.horiAdvance*norm;

Modified: trunk/client/io.c
===================================================================
--- trunk/client/io.c	2006-03-03 01:44:42 UTC (rev 133)
+++ trunk/client/io.c	2006-03-03 18:20:54 UTC (rev 134)
@@ -218,7 +218,7 @@
 	if ((fp = fopen(fname, "rt")) == NULL)
 	{ errdn(VLOW,"s3d_open_file():fopen()",errno); return(-1);}
 	if (fstat(fileno(fp),&bf))
-	{ errdn(VLOW,"s3d_open_file():fopen()",errno); return(-1);}
+	{ errdn(VLOW,"s3d_open_file():fstat()",errno); return(-1);}
 	filesize=bf.st_size;
 	dprintf(VLOW, "opening %s, filesize is %d",fname, filesize);
 	if ((buf=malloc(filesize))==NULL)



From dotslash at berlios.de  Fri Mar  3 20:04:39 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Fri, 3 Mar 2006 20:04:39 +0100
Subject: [S3d-svn] r135 - in trunk: . apps apps/s3dfm client example
Message-ID: <200603031904.k23J4dAk002718@sheep.berlios.de>

Author: dotslash
Date: 2006-03-03 20:04:36 +0100 (Fri, 03 Mar 2006)
New Revision: 135

Added:
   trunk/apps/s3dfm/
   trunk/apps/s3dfm/Makefile.am
   trunk/apps/s3dfm/main.c
Modified:
   trunk/
   trunk/client/sei_interface.h
   trunk/client/sei_misc.c
   trunk/client/sei_monotone.c
   trunk/configure.ac
   trunk/example/strtest.c
Log:
 r188 at balthasar:  dotslash | 2006-03-03 20:04:31 +0100
 - committing new file manager (NOT working yet!)



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:183
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:188

Added: trunk/apps/s3dfm/Makefile.am
===================================================================
--- trunk/apps/s3dfm/Makefile.am	2006-03-03 18:20:54 UTC (rev 134)
+++ trunk/apps/s3dfm/Makefile.am	2006-03-03 19:04:36 UTC (rev 135)
@@ -0,0 +1,11 @@
+bin_PROGRAMS=	s3dfm
+
+s3dfmincludedir = ${pkgincludedir}/s3dfm
+
+s3dfm_SOURCES =  \
+	main.c 
+
+s3dfm_CPPFLAGS=	-I${top_srcdir}/client
+s3dfm_LDADD=		${top_builddir}/client/libs3d.la
+
+

Added: trunk/apps/s3dfm/main.c
===================================================================
--- trunk/apps/s3dfm/main.c	2006-03-03 18:20:54 UTC (rev 134)
+++ trunk/apps/s3dfm/main.c	2006-03-03 19:04:36 UTC (rev 135)
@@ -0,0 +1,301 @@
+/*
+ * main.c
+ * 
+ * Copyright (C) 2004-2006 Simon Wunderlich <dotslash at packetmixer.de>
+ *
+ * This file is part of s3dfm, a s3d file manager.
+ * See http://s3d.berlios.de/ for more updates.
+ * 
+ * s3dfm is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation; either version 2 of the License, or
+ * (at your option) any later version.
+ * 
+ * s3dfm is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ * 
+ * You should have received a copy of the GNU General Public License
+ * along with s3dfm; if not, write to the Free Software
+ * Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
+ */
+
+
+#include <s3d.h>
+#include <stdio.h> 	 /*  printf() */
+#include <unistd.h>  /*  usleep() */
+#include <dirent.h>  /*  dirent */
+#include <stdlib.h>	 /*  malloc() */
+#include <string.h>  /*  strlen(), strncmp(), strrchr() */
+#include <math.h>	 /*  sin(),cos() */
+
+#define SH			0.4 /* height of the step */
+
+#define T_DUNO		0
+#define T_LOCALDIR	1
+#define T_BACKDIR	2
+#define T_FOLDER	3
+#define T_GEOMETRY	4
+#define T_MUSIC		5
+
+#define M_DIR		512
+#define M_NAME		256
+int folder,geometry,mp3,duno,dot,dotdot,dirstep;
+struct t_item {
+	int icon, str;							/* object ids ...*/
+	char name[M_NAME];						/* name (e.g. file name) */
+	struct t_item *parent;					/* parent item */
+	struct t_item *list;					/* list of items  (if it's a subdir)*/
+	float scale;
+	float px,pz;
+	int n_item;								/* number of items in list ( = -1 for normal or not-expanded files) */
+	int type;								/* type, determined by extension or file type like dir, pipe, link etc */
+	int disp;
+};
+struct t_item root;
+
+int display_dir(struct t_item *dir)
+{
+	int n,i;
+	float  px,py,pz;
+	char *ext;
+	char *nstr;
+	float dss; /* dirstep size */
+	int dirn, dirc,dps;
+	int icon;
+	if (dir->disp)
+		return(-1); /* already displayed ... */ 
+
+ /* count directories */
+	dirn=0;
+	for (i=0;i<dir->n_item;i++)
+	{
+		if (dir->list[i].type==T_FOLDER)
+			dirn++;
+	}
+	dps=(dirn+3)/4; /* directories per side */
+	dirc=0;			/* no directories counted yet */
+	dss=1.0/(2.0*dps+1.0);
+	dir->scale=dss;
+	printf("having %d directories, %d per side. one is scaled down to %3.3f \n",dirn,dps,dss);
+	for (i=0;i<dir->n_item;i++)
+	{
+		if (dir->list[i].type==T_FOLDER)
+		{
+			icon=dir->list[i].icon=s3d_clone(dirstep);
+			printf("processing %d [%s] icon %d\n",dirc,dir->list[i].name,icon);
+			s3d_scale(icon,dss);
+		    s3d_flags_on(icon,S3D_OF_VISIBLE|S3D_OF_SELECTABLE);
+			s3d_link(icon,dir->icon);
+			/* castle style:
+			 * direcotires are clockwise oredered, starting from the lower left corner on the 
+			 * underlying dirstep */
+			switch (dirc/dps)
+			{
+				case 0:
+					px=-1.0+dss;
+					pz=-1.0+(dirc*2+0.5)*2*dss;
+					break;
+				case 1:
+					px=-1.0+((dirc-dps)*2+0.5)*2*dss;
+					pz=1.0-dss;
+					break;
+				case 2:
+					px=1.0-dss;
+					pz=1.0-((dirc-2*dps)*2+0.5)*2*dss;
+					break;
+				case 3:
+					px=1.0-((dirc-dps*3)*2+0.5)*2*dss;
+					pz=-1.0+dss;
+					break;
+			}
+			s3d_translate(icon, px,SH,pz);
+			dir->list[i].px=px;
+			dir->list[i].pz=pz;
+			dir->list[i].str=s3d_draw_string(dir->list[i].name,NULL);
+			s3d_translate(	dir->list[i].str, px,1.0+SH,pz);
+			s3d_link(		dir->list[i].str,icon);
+			s3d_flags_on(	dir->list[i].str,S3D_OF_VISIBLE|S3D_OF_SELECTABLE);
+			dirc++;
+			
+        }
+	}
+	dir->disp=1;
+}
+void get_path(struct t_item *dir, char *path)
+{
+	if (dir->parent!=NULL)
+	{
+		get_path(dir->parent,path);
+		strncat(path,dir->name,M_DIR);
+		strncat(path,"/",M_DIR);
+	} else
+		strncpy(path,dir->name,M_DIR);
+}
+int parse_dir(struct t_item *dir)
+{
+	struct t_item *list;
+	struct dirent **namelist;
+	int n,i;
+	char *ext,*nstr;
+	float alpha,al,radius,f;
+	char path[M_DIR];
+	char ndir[M_DIR];  
+	if (dir->n_item>0) /* refusing */
+		return(-1);
+	get_path(dir,path);
+	printf("scanning %s\n",path);
+    n = i = scandir(path, &namelist, 0, alphasort);
+    if (n < 0)
+	{
+        perror("scandir");
+		return(-1);
+	} else {
+		if (dir->n_item>0)
+			free(dir->list); /* this is a refresh, free old items */
+		list=malloc(sizeof(struct t_item)*i);
+		dir->list=list;
+		dir->n_item=n;
+		printf("found %d items, processing ...\n",n);
+        while(n--) {
+			list[n].type=T_DUNO;
+			nstr=namelist[n]->d_name;
+			strncpy(list[n].name,nstr,M_NAME);
+ 		    if ((0==strncmp(nstr,".",1)) && (strlen(nstr)==1))
+				list[n].type=T_LOCALDIR;
+			else if (0==strncmp(nstr,"..",strlen(nstr)<2?strlen(nstr):2))
+			   list[n].type=T_BACKDIR;
+			else {
+				ext=strrchr(nstr,'.');
+				strncpy(ndir,path,M_DIR);
+		    	strncat(ndir,namelist[n]->d_name,M_DIR);
+			    if ((namelist[n]->d_type==DT_DIR) ||
+					((namelist[n]->d_type==DT_UNKNOWN) && (opendir(ndir)!=NULL)))
+						list[n].type=T_FOLDER;
+				else 
+				{
+				   if (ext!=NULL)
+				   {
+					   if (0==strncmp(ext,".3ds",strlen(ext)<4?strlen(ext):4))
+							   list[n].type=T_GEOMETRY;
+					   else if (0==strncmp(ext,".mp3",strlen(ext)<4?strlen(ext):4))
+							   list[n].type=T_MUSIC;
+				   }
+				}
+			}
+			list[n].n_item=-1;
+			list[n].parent=dir;
+			list[n].disp=0;
+			list[n].scale=1.0f;
+			list[n].icon=-1;
+        	free(namelist[n]);
+		}
+		free(namelist);
+   	}
+	return(0);
+}
+/* finds an item in the tree by oid */
+struct t_item *finditem(struct t_item *t, int oid)
+{
+	int i;
+	struct t_item *f;
+	if (t->icon==oid)
+		return(t);
+	if (t->type=T_FOLDER)
+		for (i=0;i<t->n_item;i++)
+			if ((f=finditem(&(t->list[i]),oid))!=NULL)
+				return(f);
+	return(NULL);
+}
+float px, py, pz;
+/* gets the scale by multiplying scales */
+float get_scale(struct t_item *f)
+{
+	float scale;
+	scale=1/f->scale;
+	if (f->parent!=NULL)
+		scale=1/f->scale*get_scale(f->parent);
+	px+=f->px;
+	pz+=f->pz;
+	py+=SH;
+	printf("scale factor of %s: %f\n",f->name,1/f->scale);
+	px*=1/f->scale;
+	py*=1/f->scale;
+	pz*=1/f->scale;
+	
+	
+	return(scale);
+}
+#define SCALE 	1
+void rescale(struct t_item *f)
+{
+	float scale=1.0;
+	px=0.0;
+	py=0.0;
+	pz=0.0;
+	if (f->parent!=NULL)
+	{
+		scale=get_scale(f);
+	}
+	s3d_scale(root.icon,scale*SCALE);
+	printf("rescaling to %f\n",scale);
+	printf("px: %f py:%f pz: %f\n",px,py,pz);
+	s3d_translate(root.icon,px*SCALE,-3.0-SCALE*py,pz*SCALE);
+}
+
+void object_click(struct s3d_evt *evt)
+{
+	int i,oid;
+	struct t_item *f;
+	oid=(int)*((unsigned long *)evt->buf);
+	printf("! clicked object %d\n",oid);
+	if (NULL!=(f=finditem(&root,oid)))
+	{
+		if (f->type==T_FOLDER)
+		{
+			printf("found, expanding %s\n",f->name);
+			parse_dir(f);
+			display_dir(f);
+			rescale(f);
+		}
+	}
+}
+void mainloop()
+{
+	usleep(10000);
+}
+int main (int argc, char **argv)
+{
+	int i;
+	struct t_item dummy;
+	if (!s3d_init(&argc,&argv,"filebrowser"))	
+	{
+		i=0;
+		 /*  load the object files */
+		dirstep=s3d_import_3ds_file("objs/dirstep.3ds");
+		folder=s3d_import_3ds_file("objs/folder.3ds");
+		geometry=s3d_import_3ds_file("objs/geometry.3ds");
+		mp3=s3d_import_3ds_file("objs/notes.3ds");
+		duno=s3d_import_3ds_file("objs/duno.3ds");
+		dot=s3d_import_3ds_file("objs/dot.3ds");
+		dotdot=s3d_import_3ds_file("objs/dotdot.3ds");
+		s3d_select_font("vera");
+		s3d_set_callback(S3D_EVENT_OBJ_CLICK,object_click);
+		
+		/* set up file system representation */
+		strncpy(root.name,"/",M_NAME);
+		root.parent=NULL;
+		root.type=T_FOLDER;
+		root.icon=s3d_clone(dirstep);
+		root.px=root.pz=0.0;
+		root.scale=1.0;
+		rescale(&root);
+	    s3d_flags_on(root.icon,S3D_OF_VISIBLE|S3D_OF_SELECTABLE);
+		parse_dir(&root);
+		display_dir(&root);
+		s3d_mainloop(mainloop);
+		s3d_quit();
+	}
+	return(0);
+}

Modified: trunk/client/sei_interface.h
===================================================================
--- trunk/client/sei_interface.h	2006-03-03 18:20:54 UTC (rev 134)
+++ trunk/client/sei_interface.h	2006-03-03 19:04:36 UTC (rev 135)
@@ -43,7 +43,7 @@
 #define TRUE 1
 #define FALSE 0
 
-extern int triangulate_polygon(int, int *, double (*)[2], int (*)[3]);
+extern int sei_triangulate_polygon(int, int *, double (*)[2], int (*)[3]);
 extern int is_point_inside_polygon(double *);
 
 #endif /* __interface_h */

Modified: trunk/client/sei_misc.c
===================================================================
--- trunk/client/sei_misc.c	2006-03-03 18:20:54 UTC (rev 134)
+++ trunk/client/sei_misc.c	2006-03-03 19:04:36 UTC (rev 135)
@@ -53,12 +53,11 @@
      int n;
 {
   struct timeval tval;
-  struct timezone tzone;
   register int i;
   int m, st[SEGSIZE], *p;
   
   choose_idx = 1;
-  gettimeofday(&tval, &tzone);
+  gettimeofday(&tval, NULL);
   srand48(tval.tv_sec);
 
   for (i = 0; i <= n; i++)

Modified: trunk/client/sei_monotone.c
===================================================================
--- trunk/client/sei_monotone.c	2006-03-03 18:20:54 UTC (rev 134)
+++ trunk/client/sei_monotone.c	2006-03-03 19:04:36 UTC (rev 135)
@@ -39,6 +39,7 @@
 
 #include <sei_triangulate.h>
 #include <math.h>
+#include <string.h> /* memset() */
 
 #define CROSS_SINE(v0, v1) ((v0).x * (v1).y - (v1).x * (v0).y)
 #define LENGTH(v0) (sqrt((v0).x * (v0).x + (v0).y * (v0).y))
@@ -130,6 +131,8 @@
   double angle, temp;
   int tp, tq;
 
+  tp = tq = 0;
+  
   vp0 = &vert[v0];
   vp1 = &vert[v1];
   
@@ -319,9 +322,9 @@
      int dir;
 {
   trap_t *t = &tr[trnum];
-  int howsplit, mnew;
-  int v0, v1, v0next, v1next;
-  int retval, tmp;
+  int mnew;
+  int v0, v1;
+  int retval = -1;
   int do_switch = FALSE;
 
   if ((trnum <= 0) || visited[trnum])

Modified: trunk/configure.ac
===================================================================
--- trunk/configure.ac	2006-03-03 18:20:54 UTC (rev 134)
+++ trunk/configure.ac	2006-03-03 19:04:36 UTC (rev 135)
@@ -161,6 +161,7 @@
 	apps/s3d_x11gate/Makefile
 	apps/s3dgps/Makefile
 	apps/s3dvt/Makefile
+	apps/s3dfm/Makefile
 	apps/dot_mcp/Makefile
 	example/Makefile
 	objs/Makefile])

Modified: trunk/example/strtest.c
===================================================================
--- trunk/example/strtest.c	2006-03-03 18:20:54 UTC (rev 134)
+++ trunk/example/strtest.c	2006-03-03 19:04:36 UTC (rev 135)
@@ -40,10 +40,16 @@
 }
 int main (int argc, char **argv)
 {
+	char c[256];
+	int i;
 	if (!s3d_init(&argc,&argv,"strtest"))	
 	{
 		s3d_select_font("vera");
-		o=s3d_draw_string("The lazy fox is bored enough to jump over everything it sees. weird, isn't it?!",NULL);  
+/*		o=s3d_draw_string("The lazy fox is bored enough to jump over everything it sees. weird, isn't it?!",NULL);  */
+		for (i=0;i<256;i++)
+			c[255-i]=i;
+		o=s3d_draw_string(c,NULL);
+/*		o=s3d_draw_string("A",NULL);*/
 		s3d_flags_on(o,S3D_OF_VISIBLE);
 
 		s3d_set_callback(S3D_EVENT_OBJ_CLICK,	(s3d_cb)stop);



From dotslash at berlios.de  Fri Mar  3 21:30:20 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Fri, 3 Mar 2006 21:30:20 +0100
Subject: [S3d-svn] r136 - in trunk: . apps/olsrs3d apps/s3dfm apps/s3dgps client server
Message-ID: <200603032030.k23KUKmm017092@sheep.berlios.de>

Author: dotslash
Date: 2006-03-03 21:30:10 +0100 (Fri, 03 Mar 2006)
New Revision: 136

Modified:
   trunk/
   trunk/apps/olsrs3d/main.c
   trunk/apps/olsrs3d/olsrs3d.h
   trunk/apps/olsrs3d/process.c
   trunk/apps/s3dfm/main.c
   trunk/apps/s3dgps/s3dgps.c
   trunk/client/3dsread.c
   trunk/client/io.c
   trunk/client/s3d.h
   trunk/client/sei_construct.c
   trunk/client/sei_misc.c
   trunk/client/sei_tri.c
   trunk/server/graphics.c
Log:
 r191 at balthasar:  dotslash | 2006-03-03 21:29:56 +0100
 - compiler output beatifying (-Wall found a lot ;)



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:188
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:191

Modified: trunk/apps/olsrs3d/main.c
===================================================================
--- trunk/apps/olsrs3d/main.c	2006-03-03 19:04:36 UTC (rev 135)
+++ trunk/apps/olsrs3d/main.c	2006-03-03 20:30:10 UTC (rev 136)
@@ -182,11 +182,11 @@
 
 void handle_olsr_node( struct olsr_node *olsr_node ) {
 
-	int result;   /* result of strcmp */
+/*	int result;    * result of strcmp */
 	float f, distance;
 	float tmp_mov_vec[3];
 	struct olsr_node *other_node;
-	struct olsr_con **olsr_con;
+/*	struct olsr_con **olsr_con;*/
 	struct Obj_to_ip *Obj_to_ip_curr;
 	struct olsr_neigh_list *olsr_neigh_list, *prev_olsr_neigh_list, *other_node_neigh_list, *tmp_olsr_neigh_list;
 

Modified: trunk/apps/olsrs3d/olsrs3d.h
===================================================================
--- trunk/apps/olsrs3d/olsrs3d.h	2006-03-03 19:04:36 UTC (rev 135)
+++ trunk/apps/olsrs3d/olsrs3d.h	2006-03-03 20:30:10 UTC (rev 136)
@@ -110,6 +110,7 @@
 int net_main();
 int net_quit();
 /* main obj2ip list*/
+void out_of_mem( void );
 void lst_add(int id,struct olsr_node **olsr_node);
 void lst_del(int id);
 void lst_out();

Modified: trunk/apps/olsrs3d/process.c
===================================================================
--- trunk/apps/olsrs3d/process.c	2006-03-03 19:04:36 UTC (rev 135)
+++ trunk/apps/olsrs3d/process.c	2006-03-03 20:30:10 UTC (rev 136)
@@ -126,7 +126,7 @@
 		(*olsr_neigh_list)->next_olsr_neigh_list = NULL;
 
 	}
-
+	return(0);
 }
 
 
@@ -217,7 +217,7 @@
 		return (*olsr_node);
 
 	}
-
+	return(0);
 }
 
 
@@ -336,7 +336,13 @@
 
 	}
 
-	if ( last_cr_ptr != NULL ) memmove( lbuf, ++last_cr_ptr, strlen( last_cr_ptr) );
+	if ( last_cr_ptr != NULL ) 
+	{
+		/* memmove( lbuf, ++last_cr_ptr, strlen( last_cr_ptr) ); */
+		/* TODO: please check this process.c:339: warning: operation on `last_cr_ptr' may be undefined, i've changed it like this: */
+		last_cr_ptr++;
+		memmove( lbuf, last_cr_ptr, strlen( last_cr_ptr) );
+	}
 
 	return(0);
 

Modified: trunk/apps/s3dfm/main.c
===================================================================
--- trunk/apps/s3dfm/main.c	2006-03-03 19:04:36 UTC (rev 135)
+++ trunk/apps/s3dfm/main.c	2006-03-03 20:30:10 UTC (rev 136)
@@ -57,13 +57,12 @@
 
 int display_dir(struct t_item *dir)
 {
-	int n,i;
-	float  px,py,pz;
-	char *ext;
-	char *nstr;
+	int i;
+	float  px,pz;
 	float dss; /* dirstep size */
 	int dirn, dirc,dps;
 	int icon;
+	px=pz=0.0;
 	if (dir->disp)
 		return(-1); /* already displayed ... */ 
 
@@ -122,6 +121,7 @@
         }
 	}
 	dir->disp=1;
+	return(0);
 }
 void get_path(struct t_item *dir, char *path)
 {
@@ -139,7 +139,6 @@
 	struct dirent **namelist;
 	int n,i;
 	char *ext,*nstr;
-	float alpha,al,radius,f;
 	char path[M_DIR];
 	char ndir[M_DIR];  
 	if (dir->n_item>0) /* refusing */
@@ -202,7 +201,7 @@
 	struct t_item *f;
 	if (t->icon==oid)
 		return(t);
-	if (t->type=T_FOLDER)
+	if (t->type==T_FOLDER)
 		for (i=0;i<t->n_item;i++)
 			if ((f=finditem(&(t->list[i]),oid))!=NULL)
 				return(f);
@@ -246,7 +245,7 @@
 
 void object_click(struct s3d_evt *evt)
 {
-	int i,oid;
+	int oid;
 	struct t_item *f;
 	oid=(int)*((unsigned long *)evt->buf);
 	printf("! clicked object %d\n",oid);
@@ -268,7 +267,6 @@
 int main (int argc, char **argv)
 {
 	int i;
-	struct t_item dummy;
 	if (!s3d_init(&argc,&argv,"filebrowser"))	
 	{
 		i=0;

Modified: trunk/apps/s3dgps/s3dgps.c
===================================================================
--- trunk/apps/s3dgps/s3dgps.c	2006-03-03 19:04:36 UTC (rev 135)
+++ trunk/apps/s3dgps/s3dgps.c	2006-03-03 20:30:10 UTC (rev 136)
@@ -30,7 +30,7 @@
 #include <stdlib.h>	/* malloc(), free() */
 #include <string.h> /* strlen() */
 #include <math.h>	/* sin(),cos(), M_PI */
-#include <simage.h>
+#include <simage.h> /* simage things */
 
 #define PIXELFACT	2817.947378
 #define PIXELFACTN	281794.7378
@@ -101,7 +101,7 @@
 /* recodes the image if it's not in rgba format */
 unsigned char *recode_image(unsigned char *data, int nc, int w, int h)
 {
-	unsigned char *new_block;
+	unsigned char *new_block=NULL;
 	int x,y;
 	switch (nc)
 	{
@@ -153,7 +153,7 @@
 	float x,y,z;
 	double wr,hr,er;
 	unsigned char *data;
-	int oid;
+	int oid=-1;
 	if (simage_check_supported(path))
 	{
 		printf("file %s can be loaded!!\n",path);
@@ -260,7 +260,7 @@
 void parse_mapkoords()
 {
 	FILE *fp;
-	char buf[BFS],*ptr,*sptr,*filename,c;
+	char buf[BFS],*ptr,*sptr,*filename=NULL,c;
 	char path[BFS];
 	char *prefix="/home/dotslash/.s3dgps/";
 	int len;
@@ -268,6 +268,8 @@
 	double lng,lat;
 	int i;
 	long scale;
+	lng=lat=0;
+	scale=0;
 	
 	strncpy(path,prefix,BFS);
 	strncpy(path+strlen(path),"map_koord.txt",BFS);

Modified: trunk/client/3dsread.c
===================================================================
--- trunk/client/3dsread.c	2006-03-03 19:04:36 UTC (rev 135)
+++ trunk/client/3dsread.c	2006-03-03 20:30:10 UTC (rev 136)
@@ -46,7 +46,8 @@
 	while (next!=NULL)
 	{
 		next=NULL;
-		if (next=strchr(ptr,':'))
+		
+		if (NULL!=(next=strchr(ptr,':')))
 		{
 			*next=0; 							/* clear the delimiter */
 			next+=1;							/* move to the beginner of the next dir */

Modified: trunk/client/io.c
===================================================================
--- trunk/client/io.c	2006-03-03 19:04:36 UTC (rev 135)
+++ trunk/client/io.c	2006-03-03 20:30:10 UTC (rev 136)
@@ -61,7 +61,7 @@
 }
 
 #endif
-int s3d_usage()
+void s3d_usage()
 {
 	printf("s3d-parameters:\n");
 	printf(" --s3d-url <url>: skip S3D enviroment and connect to this url\n");

Modified: trunk/client/s3d.h
===================================================================
--- trunk/client/s3d.h	2006-03-03 19:04:36 UTC (rev 135)
+++ trunk/client/s3d.h	2006-03-03 20:30:10 UTC (rev 136)
@@ -30,7 +30,7 @@
 };
 
 typedef void (*s3d_cb)(struct s3d_evt *);
-int s3d_usage();
+void s3d_usage();
 int s3d_init(int *argc, char ***argv, char *name);
 int s3d_quit();
 int s3d_mainloop(void (*f)());

Modified: trunk/client/sei_construct.c
===================================================================
--- trunk/client/sei_construct.c	2006-03-03 19:04:36 UTC (rev 135)
+++ trunk/client/sei_construct.c	2006-03-03 20:30:10 UTC (rev 136)
@@ -39,6 +39,7 @@
 
 #include <sei_triangulate.h>
 #include <math.h>
+#include <string.h> /* memset() */
 
 
 node_t qs[QSIZE];		/* Query structure */
@@ -385,6 +386,7 @@
       errs("sei:locate_endpoint()","Haggu!!!! (whatever)");
       break;
     }
+  return(-1);
 }
 
 
@@ -433,16 +435,20 @@
 	      /* Change the upper neighbours of the lower trapezoids */
 	      
 	      if ((tr[t].d0 = tr[tnext].d0) > 0)
-		if (tr[tr[t].d0].u0 == tnext)
-		  tr[tr[t].d0].u0 = t;
-		else if (tr[tr[t].d0].u1 == tnext)
-		  tr[tr[t].d0].u1 = t;
+		  {
+			if (tr[tr[t].d0].u0 == tnext)
+			  tr[tr[t].d0].u0 = t;
+			else if (tr[tr[t].d0].u1 == tnext)
+			  tr[tr[t].d0].u1 = t;
+		  }
 	      
 	      if ((tr[t].d1 = tr[tnext].d1) > 0)
-		if (tr[tr[t].d1].u0 == tnext)
-		  tr[tr[t].d1].u0 = t;
-		else if (tr[tr[t].d1].u1 == tnext)
-		  tr[tr[t].d1].u1 = t;
+		  {
+			if (tr[tr[t].d1].u0 == tnext)
+			  tr[tr[t].d1].u0 = t;
+			else if (tr[tr[t].d1].u1 == tnext)
+			  tr[tr[t].d1].u1 = t;
+		  }
 	      
 	      tr[t].lo = tr[tnext].lo;
 	      tr[tnext].state = ST_INVALID; /* invalidate the lower */
@@ -470,13 +476,13 @@
      int segnum;
 {
   segment_t s;
-  segment_t *so = &seg[segnum];
-  int tu, tl, sk, tfirst, tlast, tnext;
-  int tfirstr, tlastr, tfirstl, tlastl;
-  int i1, i2, t, t1, t2, tn;
+  int tu, tl, sk, tfirst, tlast;
+  int tfirstr = 0, tlastr = 0, tfirstl, tlastl;
+  int i1, i2, t, tn;
   point_t tpt;
   int tritop = 0, tribot = 0, is_swapped = 0;
   int tmptriseg;
+  int tmpseg = 1;
 
   s = seg[segnum];
   if (_greater_than(&s.v1, &s.v0)) /* Get higher vertex in v0 */
@@ -833,12 +839,11 @@
 	  if (FP_EQUAL(tr[t].lo.y, tr[tlast].lo.y) && 
 	      FP_EQUAL(tr[t].lo.x, tr[tlast].lo.x) && tribot)
 	    {		/* bottom forms a triangle */
-	      int tmpseg;
 
 	      if (is_swapped)	
-		tmptriseg = seg[segnum].prev;
+			tmptriseg = seg[segnum].prev;
 	      else
-		tmptriseg = seg[segnum].next;
+			tmptriseg = seg[segnum].next;
 
 	      if ((tmpseg > 0) && is_left_of(tmpseg, &s.v0))
 		{
@@ -880,7 +885,7 @@
       
       else
 	{
-	  int tmpseg = tr[tr[t].d0].rseg;
+	  tmpseg = tr[tr[t].d0].rseg;
 	  double y0, yt;
 	  point_t tmppt;
 	  int tnext, i_d0, i_d1;

Modified: trunk/client/sei_misc.c
===================================================================
--- trunk/client/sei_misc.c	2006-03-03 19:04:36 UTC (rev 135)
+++ trunk/client/sei_misc.c	2006-03-03 20:30:10 UTC (rev 136)
@@ -79,8 +79,6 @@
 /* segments in S */
 int choose_segment()
 {
-  int i;
-
   errds(VLOW,"sei:choose_segment()","%d", permute[choose_idx]);
   return permute[choose_idx++];
 }

Modified: trunk/client/sei_tri.c
===================================================================
--- trunk/client/sei_tri.c	2006-03-03 19:04:36 UTC (rev 135)
+++ trunk/client/sei_tri.c	2006-03-03 20:30:10 UTC (rev 136)
@@ -39,6 +39,7 @@
 
 #include <sei_triangulate.h>
 #include <sys/time.h>
+#include <string.h> /* memset() */
 
 
 static int initialise(n)

Modified: trunk/server/graphics.c
===================================================================
--- trunk/server/graphics.c	2006-03-03 19:04:36 UTC (rev 135)
+++ trunk/server/graphics.c	2006-03-03 20:30:10 UTC (rev 136)
@@ -222,7 +222,6 @@
 	GLint viewport[4];
 	GLfloat xpos,ypos;
 	float big,z1;
-	int found;
 	uint32_t mcp_o,o;
 	struct t_process *p=get_proc_by_pid(MCP);
 	GLuint select_buf[SBSIZE],*ptr,names,hits;
@@ -268,7 +267,7 @@
 		big=INFINITY;
 		dprintf(LOW,"had %d hits",hits);
 		ptr=select_buf;
-		mcp_o=o=-1;
+		mcp_o=o=names=-1;
 		/* check all the hits, only select the nearest ... */
 		for (i=0;i<hits;i++)
 		{



From dotslash at berlios.de  Fri Mar  3 22:12:18 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Fri, 3 Mar 2006 22:12:18 +0100
Subject: [S3d-svn] r137 - in trunk: . client server
Message-ID: <200603032112.k23LCIAF021338@sheep.berlios.de>

Author: dotslash
Date: 2006-03-03 22:12:17 +0100 (Fri, 03 Mar 2006)
New Revision: 137

Modified:
   trunk/
   trunk/ChangeLog
   trunk/client/config.h
   trunk/client/io.c
   trunk/client/network.c
   trunk/client/s3dlib.h
   trunk/client/shm.c
   trunk/client/shm_ringbuf.c
   trunk/server/config.h
   trunk/server/global.h
   trunk/server/graphics.c
   trunk/server/main.c
   trunk/server/user.c
Log:
 r193 at balthasar:  dotslash | 2006-03-03 22:12:12 +0100
 - using values from config.h, user does not have to edit server/config.h
   or clients/config.h anymore to fit his/her needs
 				  



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:191
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:193

Modified: trunk/ChangeLog
===================================================================
--- trunk/ChangeLog	2006-03-03 20:30:10 UTC (rev 136)
+++ trunk/ChangeLog	2006-03-03 21:12:17 UTC (rev 137)
@@ -1,4 +1,6 @@
 2006-03-03  Simon Wunderlich - <dotslash at packetmixer.de>
+	- using values from config.h, user does not have to edit server/config.h
+	  or clients/config.h anymore to fit his/her needs
 	- Finally, Font triangulating is stable (at least it seems so ;)
 2006-02-27  Simon Wunderlich - <dotslash at packetmixer.de>
 	- added GPL/LGPL copyright notes (phew -.-)

Modified: trunk/client/config.h
===================================================================
--- trunk/client/config.h	2006-03-03 20:30:10 UTC (rev 136)
+++ trunk/client/config.h	2006-03-03 21:12:17 UTC (rev 137)
@@ -23,8 +23,8 @@
 
 
 /*  this is definitly the better way to pick fonts. */
+
 #define WITH_FONTCONFIG
-/* #define WITH_SIGNALS */
 /*  our level of debug messages */
 #define DEBUG			LOW /*  standard debug level */
 #define SHM_MAX_IDLE	200	/* maximum wait for server timeout */

Modified: trunk/client/io.c
===================================================================
--- trunk/client/io.c	2006-03-03 20:30:10 UTC (rev 136)
+++ trunk/client/io.c	2006-03-03 21:12:17 UTC (rev 137)
@@ -34,7 +34,7 @@
 #include <sys/socket.h>  /*  socket() */
 #include <getopt.h>		 /*  getopt() */
 #include <fcntl.h>		 /*  fcntl() */
-#ifdef WITH_SIGNALS
+#ifdef SIGS
 #include <signal.h>		 /*  signal.h, SIG_PIPE */
 #endif
 #include <netinet/in.h>  /*  htons(),htonl() */
@@ -45,7 +45,7 @@
 static char				*url=NULL;
 extern int 				con_type;
 /*  this file is the client-lib-implementation which holds the function to connect and control the server. */
-#ifdef WITH_SIGNALS
+#ifdef SIGS
 int _s3d_sigio=0;
 void sigpipe_handler(int sig, int code)  /*  ... ? */
 {
@@ -158,7 +158,7 @@
 
 	 /*  TODO: we should wait for the INIT-event here before proceeding. */
 	_queue_init();
-#ifdef WITH_SIGNALS
+#ifdef SIGS
     if (signal(SIGINT, (sig_t)sigint_handler) == SIG_ERR)
 		errdn(LOW,"s3d_init():signal()",errno);
     if (signal(SIGTERM, (sig_t)sigint_handler) == SIG_ERR)
@@ -174,8 +174,12 @@
 	net_send(S3D_P_C_QUIT,NULL,0);
 	switch (con_type)
 	{
+#ifdef TCP
 		case CON_TCP:_tcp_quit();break;
+#endif
+#ifdef SHM
 		case CON_SHM:_shm_quit();break;
+#endif
 	}
 	con_type=CON_NULL;
 	_queue_quit();

Modified: trunk/client/network.c
===================================================================
--- trunk/client/network.c	2006-03-03 20:30:10 UTC (rev 136)
+++ trunk/client/network.c	2006-03-03 21:12:17 UTC (rev 137)
@@ -29,11 +29,13 @@
 #include <unistd.h>		 /*  read(), write() */
 #include <errno.h>		 /*  errno */
 #include <netinet/in.h>  /*  htons(),htonl() */
-#ifdef WITH_SIGNALS
+#ifdef SIGS
 extern int _s3d_sigio;
 #endif
 int con_type=CON_NULL;
+#ifdef TCP
 static int _s3d_net_receive();
+#endif
 
 int net_send(unsigned char opcode, char *buf, unsigned short length)
 {
@@ -46,34 +48,45 @@
 	memcpy(buff+3,buf,length);
 	switch (con_type)
 	{
+#ifdef SHM
 		case CON_SHM:shm_writen(buff,length+3);break;
+#endif
+#ifdef TCP		
 		case CON_TCP:tcp_writen(buff,length+3);break;
+#endif
 	}
 	return(0);
 }
 /* handler for socket based connection types */
+#ifdef TCP
 int _s3d_net_receive()
 {
 	return(_s3d_tcp_net_receive());
+	return(0);
 }
+#endif
 int s3d_net_check()
 {
 	switch (con_type)
 	{
+#ifdef TCP
 		case CON_TCP:
-#ifdef WITH_SIGNALS
+#ifdef SIGS
 		if (_s3d_sigio)
 		{
 #endif
 			while (_s3d_net_receive());
-#ifdef WITH_SIGNALS
+#ifdef SIGS
 			_s3d_sigio=0;
 		}	
 #endif
 			break;
+#endif
+#ifdef SHM
 		case CON_SHM:
 			while(_shm_net_receive());
 			break;
+#endif
 	}
 	return(0);
 }
@@ -81,7 +94,9 @@
 {
 	char				*s,*sv,*port=NULL;
 	char				*first_slash=NULL;
+#ifdef TCP
 	int					 pn=0;
+#endif
 	int					 tcp,shm;
 	tcp=shm=1; /* everything is possible, yet */
 	
@@ -124,11 +139,14 @@
 			shm=0;
 		}
 	}
+#ifdef SHM
 	if (shm)
 	{
 		if (!strncmp(port, "shm",3))
 			if (!_shm_init(sv)) return(con_type=CON_SHM);
 	}
+#endif
+#ifdef TCP
 	if (tcp)
 	{
 		pn=6066;
@@ -142,5 +160,6 @@
 		}
 		if (!_tcp_init(sv,pn)) return(con_type=CON_TCP);
 	}
+#endif
 	return(CON_NULL);
 }

Modified: trunk/client/s3dlib.h
===================================================================
--- trunk/client/s3dlib.h	2006-03-03 20:30:10 UTC (rev 136)
+++ trunk/client/s3dlib.h	2006-03-03 21:12:17 UTC (rev 137)
@@ -23,6 +23,7 @@
 
 
 #include <stdint.h>
+#include "../config.h"
 #define VLOW	1
 #define	LOW		2
 #define MED		3
@@ -67,13 +68,16 @@
 int s3d_net_check();
 int net_send(unsigned char opcode, char *buf, unsigned short length);
 int s3d_net_init(char *urlc);
+#ifdef TCP
 /* tcp.c */
 int _tcp_init();
 int _tcp_quit();
 int _s3d_tcp_net_receive();
 int tcp_writen(char *str,int s);
 int tcp_readn(char *str,int s);
+#endif
 /* shm_ringbuf.c */
+#ifdef SHM
 struct buf_t
 {
 	uint32_t start,end,bufsize;	/* start/end of the data */
@@ -86,6 +90,7 @@
 int _shm_net_receive();
 int shm_writen(char *str,int s);
 int shm_readn(char *str,int s);
+#endif
 /* freetype.c */
 struct t_buf
 {

Modified: trunk/client/shm.c
===================================================================
--- trunk/client/shm.c	2006-03-03 20:30:10 UTC (rev 136)
+++ trunk/client/shm.c	2006-03-03 21:12:17 UTC (rev 137)
@@ -21,6 +21,7 @@
  * Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
  */
 
+
 #include "s3d.h"
 #include "s3dlib.h"
 #include <stdlib.h> /* malloc() */
@@ -30,6 +31,7 @@
 #include <netinet/in.h>	/* ntohs() */
 #include <errno.h> /* errno */
 #include <unistd.h>	/* usleep() */
+#ifdef SHM
 
 #define SHM_SIZE 		sizeof(key_t)*2  		/* space for the keys */
 #define SHM_MAXLOOP		10000
@@ -195,3 +197,4 @@
 	}
 	return(found);
 }
+#endif

Modified: trunk/client/shm_ringbuf.c
===================================================================
--- trunk/client/shm_ringbuf.c	2006-03-03 20:30:10 UTC (rev 136)
+++ trunk/client/shm_ringbuf.c	2006-03-03 21:12:17 UTC (rev 137)
@@ -21,10 +21,12 @@
  * Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
  */
 
+
 #include "s3d.h"
 #include "s3dlib.h"
 #include <stdint.h> /* uint32_t */
 #include <string.h>	/* memcpy() */
+#ifdef SHM
 int shm_write(struct buf_t *rb,char *buf, int n)
 {
 	int wrap=0;
@@ -100,4 +102,4 @@
 	if (rb->start>=rb->bufsize) rb->start-=rb->bufsize;
 	return(mn);
 }
-
+#endif

Modified: trunk/server/config.h
===================================================================
--- trunk/server/config.h	2006-03-03 20:30:10 UTC (rev 136)
+++ trunk/server/config.h	2006-03-03 21:12:17 UTC (rev 137)
@@ -21,6 +21,8 @@
  * Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
  */
 
+/* use the global config.h */
+#include "../config.h" 
 
 /*  to be filled with configure options ...  */
 /*   */
@@ -44,22 +46,4 @@
 #define dprintf(...) /* nothing */
 #endif
 
-/*  which subsystem do we use for rendering and ? */
 
-/* GLUT is the GL utility library which you obtain at 
- * http://freeglut.sourceforge.net/  
- */
-#define G_GLUT	1
-/* SDL is a framework for simple media access which contains
- * opengl support besides music, cdrom etc.
- */
-/*  #define G_SDL	2 */
-/*  do we want signals? usually, yes. it makes network things  */
-/*  with polling a lot faster and  */
-/*  we can go down properly on a terminate signal... */
-/*  windows does not support that, so ... */
-#ifndef WIN32
-#define SIGS	1
-#define SHM		1
-#endif
-#define TCP		1

Modified: trunk/server/global.h
===================================================================
--- trunk/server/global.h	2006-03-03 20:30:10 UTC (rev 136)
+++ trunk/server/global.h	2006-03-03 21:12:17 UTC (rev 137)
@@ -186,6 +186,11 @@
 	float r;
 	char name[NAME_MAX]; 
 };
+enum {
+	zero,
+	FRAME_GLUT,
+	FRAME_SDL
+};
 /*  main.c */
 int init(void);
 int quit(void);

Modified: trunk/server/graphics.c
===================================================================
--- trunk/server/graphics.c	2006-03-03 20:30:10 UTC (rev 136)
+++ trunk/server/graphics.c	2006-03-03 21:12:17 UTC (rev 137)
@@ -49,10 +49,10 @@
 	switch (frame_mode)
 	{
 #ifdef G_SDL
-		case G_SDL:graphics_init_sdl();break;
+		case FRAME_SDL:graphics_init_sdl();break;
 #endif
 #ifdef G_GLUT
-		case G_GLUT:graphics_init_glut();break;
+		case FRAME_GLUT:graphics_init_glut();break;
 #endif
 		default: return(-1);
 	}
@@ -371,13 +371,13 @@
 	switch (frame_mode)
 	{
 #ifdef G_GLUT
-		case G_GLUT:glutSwapBuffers();break;
+		case FRAME_GLUT:glutSwapBuffers();break;
 #endif
 #ifdef G_SDL
-    	case G_SDL:SDL_GL_SwapBuffers();break;
+    	case FRAME_SDL:SDL_GL_SwapBuffers();break;
 #endif
 #ifdef G_GLX
-		case G_GLX:...
+		case FRAME_GLX:...
 #endif
 	}
 }

Modified: trunk/server/main.c
===================================================================
--- trunk/server/main.c	2006-03-03 20:30:10 UTC (rev 136)
+++ trunk/server/main.c	2006-03-03 21:12:17 UTC (rev 137)
@@ -72,10 +72,10 @@
 	if (!frame_mode)  /*  turn default frame_mode on */
 	{
 #ifdef G_GLUT
-		frame_mode=G_GLUT;
+		frame_mode=FRAME_GLUT;
 #else
 #ifdef G_SDL
-		frame_mode=G_SDL;
+		frame_mode=FRAME_SDL;
 #endif
 #endif
 	}
@@ -129,14 +129,14 @@
 				case 0:break;
 				case 'g':
 #ifdef G_GLUT
-					frame_mode=G_GLUT;
+					frame_mode=FRAME_GLUT;
 #else
 					errs("process_args()","sorry, GLUT is not available");
 #endif
 					break;
 				case 's':
 #ifdef G_SDL
-					frame_mode=G_SDL;
+					frame_mode=FRAME_SDL;
 #else
 					errs("process_args()","sorry, SDL is not available");
 #endif					
@@ -165,7 +165,7 @@
 	switch (frame_mode)
 	{
 #ifdef G_GLUT
-		case G_GLUT:glutMainLoop();break;
+		case FRAME_GLUT:glutMainLoop();break;
 #endif
 		default:mainloop();
 	}

Modified: trunk/server/user.c
===================================================================
--- trunk/server/user.c	2006-03-03 20:30:10 UTC (rev 136)
+++ trunk/server/user.c	2006-03-03 21:12:17 UTC (rev 137)
@@ -31,10 +31,10 @@
 	switch (frame_mode)
 	{
 #ifdef G_GLUT
-		case G_GLUT:user_init_glut();break;
+		case FRAME_GLUT:user_init_glut();break;
 #endif
 #ifdef G_SDL
-    	case G_SDL:user_init_sdl();break;
+    	case FRAME_SDL:user_init_sdl();break;
 #endif
 		default:return(-1);
 	}
@@ -45,10 +45,10 @@
 	switch (frame_mode)
 	{
 #ifdef G_GLUT
-		case G_GLUT:return(0);  /*  glut uses callback functions */
+		case FRAME_GLUT:return(0);  /*  glut uses callback functions */
 #endif
 #ifdef G_SDL
-    	case G_SDL:user_main_sdl();
+    	case FRAME_SDL:user_main_sdl();
 #endif
 		default:return(0);
 	}



From marec at berlios.de  Fri Mar  3 22:22:36 2006
From: marec at berlios.de (marec at BerliOS)
Date: Fri, 3 Mar 2006 22:22:36 +0100
Subject: [S3d-svn] r138 - trunk/apps/olsrs3d
Message-ID: <200603032122.k23LMa0p022836@sheep.berlios.de>

Author: marec
Date: 2006-03-03 22:22:35 +0100 (Fri, 03 Mar 2006)
New Revision: 138

Modified:
   trunk/apps/olsrs3d/main.c
   trunk/apps/olsrs3d/net.c
   trunk/apps/olsrs3d/process.c
Log:
- minor bugfixes

Modified: trunk/apps/olsrs3d/main.c
===================================================================
--- trunk/apps/olsrs3d/main.c	2006-03-03 21:12:17 UTC (rev 137)
+++ trunk/apps/olsrs3d/main.c	2006-03-03 21:22:35 UTC (rev 138)
@@ -241,7 +241,7 @@
 
 			while ( other_node_neigh_list != NULL ) {
 
-				if ( other_node_neigh_list->olsr_con->obj_id == olsr_neigh_list->olsr_con->obj_id ) {
+				if ( other_node_neigh_list->olsr_con == olsr_neigh_list->olsr_con ) {
 
 					/* and delete it ! */
 					if ( prev_olsr_neigh_list != NULL ) {
@@ -280,7 +280,7 @@
 
 		olsr_node->olsr_neigh_list = NULL;
 
-	} else if (olsr_node->visible) {
+	} else if ( olsr_node->visible ) {
 
 		/* olsr node shape has been modified */
 		if ( olsr_node->node_type_modified ) {
@@ -328,7 +328,7 @@
 		while ( Obj_to_ip_curr != Obj_to_ip_end ) {
 
 			/* myself ... */
-/* 			if ( strncmp( Obj_to_ip_curr->olsr_node->ip, olsr_node->ip, NAMEMAX ) != 0 ) {*/
+			if ( olsr_node != Obj_to_ip_curr->olsr_node ) {
 
 				olsr_neigh_list = olsr_node->olsr_neigh_list;
 				while ( olsr_neigh_list != NULL ) {
@@ -336,10 +336,8 @@
 					/* nodes are related */
 					if ( ( olsr_neigh_list->olsr_con->left_olsr_node->visible == 1 ) && ( olsr_neigh_list->olsr_con->right_olsr_node->visible == 1 ) ) {
 
-						if ( ( strncmp( olsr_neigh_list->olsr_con->left_olsr_node->ip, Obj_to_ip_curr->olsr_node->ip, NAMEMAX ) == 0 ) || ( strncmp( olsr_neigh_list->olsr_con->right_olsr_node->ip, Obj_to_ip_curr->olsr_node->ip, NAMEMAX ) == 0 ) ) break;
+						if ( ( olsr_neigh_list->olsr_con->left_olsr_node == Obj_to_ip_curr->olsr_node ) || (  olsr_neigh_list->olsr_con->right_olsr_node == Obj_to_ip_curr->olsr_node ) ) break;
 
-						/* if ( ( olsr_con_list->olsr_con->left_olsr_node == Obj_to_ip_curr->olsr_node ) || (  olsr_con_list->olsr_con->right_olsr_node == Obj_to_ip_curr->olsr_node ) ) break; */
-
 					}
 
 					olsr_neigh_list = olsr_neigh_list->next_olsr_neigh_list;
@@ -356,9 +354,9 @@
 
 				}
 
-				Obj_to_ip_curr = Obj_to_ip_curr->next;
+			}
 
-/* 			} */
+			Obj_to_ip_curr = Obj_to_ip_curr->next;
 
 		}
 
@@ -381,22 +379,22 @@
 
 	float f, distance;
 	float tmp_mov_vec[3];
-	struct olsr_con **olsr_con = &Con_begin;
+	struct olsr_con *olsr_con = Con_begin;
 
-	while ( (*olsr_con) != NULL ) {
+	while ( olsr_con != NULL ) {
 
-		if ( ( (*olsr_con)->left_etx != 0.0 ) && ( (*olsr_con)->right_etx != 0.0  ) ) {
+		if ( ( olsr_con->left_etx != 0.0 ) && ( olsr_con->right_etx != 0.0  ) ) {
 
-			distance = dirt( (*olsr_con)->left_olsr_node->pos_vec, (*olsr_con)->right_olsr_node->pos_vec, tmp_mov_vec );
-			f = ( ( (*olsr_con)->left_etx + (*olsr_con)->right_etx ) / 4.0 ) / distance;
+			distance = dirt( olsr_con->left_olsr_node->pos_vec, olsr_con->right_olsr_node->pos_vec, tmp_mov_vec );
+			f = ( ( olsr_con->left_etx + olsr_con->right_etx ) / 4.0 ) / distance;
 			if ( f < 0.3 ) f = 0.3;
 
-			mov_add( (*olsr_con)->left_olsr_node->mov_vec, tmp_mov_vec, 1 / f - 1 );
-			mov_add( (*olsr_con)->right_olsr_node->mov_vec, tmp_mov_vec, - ( 1 / f - 1 ) );
+			mov_add( olsr_con->left_olsr_node->mov_vec, tmp_mov_vec, 1 / f - 1 );
+			mov_add( olsr_con->right_olsr_node->mov_vec, tmp_mov_vec, - ( 1 / f - 1 ) );
 
 		}
 
-		olsr_con = &(*olsr_con)->next_olsr_con;
+		olsr_con = olsr_con->next_olsr_con;
 
 	}
 
@@ -414,83 +412,117 @@
 
 	float null_vec[3] = {0,0,0};
 	float tmp_mov_vec[3];
-	float distance, etx, rgb;
-	struct olsr_con **olsr_con = &Con_begin;
+	float distance, factor, etx, rgb;
+	struct olsr_con *olsr_con = Con_begin;
 
-	while ( (*olsr_con) != NULL ) {
+	while ( olsr_con != NULL ) {
 
 		/* move left olsr node if it has not been moved yet */
-		if ( !( ( (*olsr_con)->left_olsr_node->mov_vec[0] == 0 ) && ( (*olsr_con)->left_olsr_node->mov_vec[1] == 0 ) && ( (*olsr_con)->left_olsr_node->mov_vec[2] == 0 ) )  && (*olsr_con)->left_olsr_node->visible) {
+		if ( !( ( olsr_con->left_olsr_node->mov_vec[0] == 0 ) && ( olsr_con->left_olsr_node->mov_vec[1] == 0 ) && ( olsr_con->left_olsr_node->mov_vec[2] == 0 ) ) && olsr_con->left_olsr_node->visible ) {
 
-			distance = dirt( (*olsr_con)->left_olsr_node->pos_vec, null_vec, tmp_mov_vec );
-			mov_add( (*olsr_con)->left_olsr_node->mov_vec, tmp_mov_vec, distance / 100 ); /* move a little bit to point zero */
-			mov_add( (*olsr_con)->left_olsr_node->mov_vec, tmp_mov_vec, 1 ); /* move a little bit to point zero */
+// 			if ( ( dist( olsr_con->left_olsr_node->mov_vec, olsr_con->left_olsr_node->pos_vec ) > 10.0 ) || ( dist( olsr_con->left_olsr_node->pos_vec, null_vec ) < 15.0 ) ) {
 
-			if ( ( distance = dist( (*olsr_con)->left_olsr_node->mov_vec, null_vec ) ) > 10.0 ) {
-				mov_add( (*olsr_con)->left_olsr_node->pos_vec, (*olsr_con)->left_olsr_node->mov_vec, 1.0 / ( (float ) distance ) );
-			} else {
-				mov_add( (*olsr_con)->left_olsr_node->pos_vec, (*olsr_con)->left_olsr_node->mov_vec, 0.1 );
+				distance = dirt( olsr_con->left_olsr_node->pos_vec, null_vec, tmp_mov_vec );
+				mov_add( olsr_con->left_olsr_node->mov_vec, tmp_mov_vec, distance / 100 ); /* move a little bit to point zero */
+				mov_add( olsr_con->left_olsr_node->mov_vec, tmp_mov_vec, 1 ); /* move a little bit to point zero */
+
+				if ( ( distance = dist( olsr_con->left_olsr_node->mov_vec, null_vec ) ) > 10.0 ) {
+					factor = 1.0 / ( (float ) distance );
+				} else {
+					factor = 0.1;
+				}
+
+				olsr_con->left_olsr_node->mov_vec[0] *= factor;
+				olsr_con->left_olsr_node->mov_vec[1] *= factor;
+				olsr_con->left_olsr_node->mov_vec[2] *= factor;
+
+				tmp_mov_vec[0] = olsr_con->left_olsr_node->pos_vec[0];
+				tmp_mov_vec[1] = olsr_con->left_olsr_node->pos_vec[1];
+				tmp_mov_vec[2] = olsr_con->left_olsr_node->pos_vec[2];
+
+				mov_add( tmp_mov_vec, olsr_con->left_olsr_node->mov_vec, 1.0 );
+
+				if ( ( dist( tmp_mov_vec, olsr_con->left_olsr_node->pos_vec ) > 0.75 ) || ( dist( tmp_mov_vec, null_vec ) < 2.0 ) ) {
+
+				mov_add( olsr_con->left_olsr_node->pos_vec, olsr_con->left_olsr_node->mov_vec, 1.0 );
+				s3d_translate( olsr_con->left_olsr_node->obj_id, olsr_con->left_olsr_node->pos_vec[0], olsr_con->left_olsr_node->pos_vec[1], olsr_con->left_olsr_node->pos_vec[2] );
+
 			}
 
-			s3d_translate( (*olsr_con)->left_olsr_node->obj_id, (*olsr_con)->left_olsr_node->pos_vec[0], (*olsr_con)->left_olsr_node->pos_vec[1], (*olsr_con)->left_olsr_node->pos_vec[2] );
-
 			/* reset movement vector */
-			(*olsr_con)->left_olsr_node->mov_vec[0] = (*olsr_con)->left_olsr_node->mov_vec[1] = (*olsr_con)->left_olsr_node->mov_vec[2] = 0.0;
+			olsr_con->left_olsr_node->mov_vec[0] = olsr_con->left_olsr_node->mov_vec[1] = olsr_con->left_olsr_node->mov_vec[2] = 0.0;
 
 		}
 
 		/* move right olsr node if it has not been moved yet */
-		if ( !( ( (*olsr_con)->right_olsr_node->mov_vec[0] == 0 ) && ( (*olsr_con)->right_olsr_node->mov_vec[1] == 0 ) && ( (*olsr_con)->right_olsr_node->mov_vec[2] == 0 ) ) && (*olsr_con)->right_olsr_node->visible) {
+		if ( !( ( olsr_con->right_olsr_node->mov_vec[0] == 0 ) && ( olsr_con->right_olsr_node->mov_vec[1] == 0 ) && ( olsr_con->right_olsr_node->mov_vec[2] == 0 ) ) && olsr_con->right_olsr_node->visible ) {
 
-			distance = dirt( (*olsr_con)->right_olsr_node->pos_vec, null_vec, tmp_mov_vec );
-			mov_add( (*olsr_con)->right_olsr_node->mov_vec, tmp_mov_vec, distance / 100 ); /* move a little bit to point zero */
-			mov_add( (*olsr_con)->right_olsr_node->mov_vec, tmp_mov_vec, 1 ); /* move a little bit to point zero */
+// 			if ( ( dist( olsr_con->right_olsr_node->mov_vec, olsr_con->right_olsr_node->pos_vec )> 10.0 ) || ( dist( olsr_con->right_olsr_node->pos_vec, null_vec ) < 15.0 ) ) {
 
-			if ( ( distance = dist( (*olsr_con)->right_olsr_node->mov_vec, null_vec ) ) > 10.0 ) {
-				mov_add( (*olsr_con)->right_olsr_node->pos_vec, (*olsr_con)->right_olsr_node->mov_vec, 1.0 / ( (float ) distance ) );
-			} else {
-				mov_add( (*olsr_con)->right_olsr_node->pos_vec, (*olsr_con)->right_olsr_node->mov_vec, 0.1 );
-			}
+				distance = dirt( olsr_con->right_olsr_node->pos_vec, null_vec, tmp_mov_vec );
+				mov_add( olsr_con->right_olsr_node->mov_vec, tmp_mov_vec, distance / 100 ); /* move a little bit to point zero */
+				mov_add( olsr_con->right_olsr_node->mov_vec, tmp_mov_vec, 1 ); /* move a little bit to point zero */
 
-			s3d_translate( (*olsr_con)->right_olsr_node->obj_id, (*olsr_con)->right_olsr_node->pos_vec[0], (*olsr_con)->right_olsr_node->pos_vec[1], (*olsr_con)->right_olsr_node->pos_vec[2] );
+				if ( ( distance = dist( olsr_con->right_olsr_node->mov_vec, null_vec ) ) > 10.0 ) {
+					factor = 1.0 / ( (float ) distance );
+				} else {
+					factor = 0.1;
+				}
 
+				olsr_con->right_olsr_node->mov_vec[0] *= factor;
+				olsr_con->right_olsr_node->mov_vec[1] *= factor;
+				olsr_con->right_olsr_node->mov_vec[2] *= factor;
+
+				tmp_mov_vec[0] = olsr_con->right_olsr_node->pos_vec[0];
+				tmp_mov_vec[1] = olsr_con->right_olsr_node->pos_vec[1];
+				tmp_mov_vec[2] = olsr_con->right_olsr_node->pos_vec[2];
+
+				mov_add( tmp_mov_vec, olsr_con->right_olsr_node->mov_vec, 1.0 );
+
+				if ( ( dist( tmp_mov_vec, olsr_con->right_olsr_node->pos_vec )> 0.75 ) || ( dist( tmp_mov_vec, null_vec ) < 2.0 ) ) {
+
+					mov_add( olsr_con->right_olsr_node->pos_vec, olsr_con->right_olsr_node->mov_vec, 1.0 );
+					s3d_translate( olsr_con->right_olsr_node->obj_id, olsr_con->right_olsr_node->pos_vec[0], olsr_con->right_olsr_node->pos_vec[1], olsr_con->right_olsr_node->pos_vec[2] );
+
+				}
+
 			/* reset movement vector */
-			(*olsr_con)->right_olsr_node->mov_vec[0] = (*olsr_con)->right_olsr_node->mov_vec[1] = (*olsr_con)->right_olsr_node->mov_vec[2] = 0.0;
+			olsr_con->right_olsr_node->mov_vec[0] = olsr_con->right_olsr_node->mov_vec[1] = olsr_con->right_olsr_node->mov_vec[2] = 0.0;
 
 		}
 
 
 		/* move connection between left and right olsr node */
-		s3d_pop_vertex( (*olsr_con)->obj_id, 6 );
-		s3d_pop_polygon( (*olsr_con)->obj_id, 2 );
-		s3d_pop_material( (*olsr_con)->obj_id, 1 );
+		s3d_pop_vertex( olsr_con->obj_id, 6 );
+		s3d_pop_polygon( olsr_con->obj_id, 2 );
+		s3d_pop_material( olsr_con->obj_id, 1 );
 
-		s3d_push_vertex( (*olsr_con)->obj_id, (*olsr_con)->left_olsr_node->pos_vec[0] + ZeroPosition[0], (*olsr_con)->left_olsr_node->pos_vec[1] + ZeroPosition[1], (*olsr_con)->left_olsr_node->pos_vec[2] + ZeroPosition[2] );
-		s3d_push_vertex( (*olsr_con)->obj_id, (*olsr_con)->left_olsr_node->pos_vec[0] + 0.2 + ZeroPosition[0], (*olsr_con)->left_olsr_node->pos_vec[1] + ZeroPosition[1], (*olsr_con)->left_olsr_node->pos_vec[2] + ZeroPosition[2] );
-		s3d_push_vertex( (*olsr_con)->obj_id, (*olsr_con)->left_olsr_node->pos_vec[0] - 0.2 + ZeroPosition[0], (*olsr_con)->left_olsr_node->pos_vec[1] + ZeroPosition[1], (*olsr_con)->left_olsr_node->pos_vec[2] + ZeroPosition[2] );
+		s3d_push_vertex( olsr_con->obj_id, olsr_con->left_olsr_node->pos_vec[0] + ZeroPosition[0], olsr_con->left_olsr_node->pos_vec[1] + ZeroPosition[1], olsr_con->left_olsr_node->pos_vec[2] + ZeroPosition[2] );
+		s3d_push_vertex( olsr_con->obj_id, olsr_con->left_olsr_node->pos_vec[0] + 0.2 + ZeroPosition[0], olsr_con->left_olsr_node->pos_vec[1] + ZeroPosition[1], olsr_con->left_olsr_node->pos_vec[2] + ZeroPosition[2] );
+		s3d_push_vertex( olsr_con->obj_id, olsr_con->left_olsr_node->pos_vec[0] - 0.2 + ZeroPosition[0], olsr_con->left_olsr_node->pos_vec[1] + ZeroPosition[1], olsr_con->left_olsr_node->pos_vec[2] + ZeroPosition[2] );
 
-		s3d_push_vertex( (*olsr_con)->obj_id, (*olsr_con)->right_olsr_node->pos_vec[0] + ZeroPosition[0], (*olsr_con)->right_olsr_node->pos_vec[1]+ ZeroPosition[1], (*olsr_con)->right_olsr_node->pos_vec[2] + ZeroPosition[2] );
-		s3d_push_vertex( (*olsr_con)->obj_id, (*olsr_con)->right_olsr_node->pos_vec[0] + ZeroPosition[0], (*olsr_con)->right_olsr_node->pos_vec[1]+ 0.2 + ZeroPosition[1], (*olsr_con)->right_olsr_node->pos_vec[2] + ZeroPosition[2] );
-		s3d_push_vertex( (*olsr_con)->obj_id, (*olsr_con)->right_olsr_node->pos_vec[0] + ZeroPosition[0], (*olsr_con)->right_olsr_node->pos_vec[1]- 0.2 + ZeroPosition[1], (*olsr_con)->right_olsr_node->pos_vec[2] + ZeroPosition[2] );
+		s3d_push_vertex( olsr_con->obj_id, olsr_con->right_olsr_node->pos_vec[0] + ZeroPosition[0], olsr_con->right_olsr_node->pos_vec[1]+ ZeroPosition[1], olsr_con->right_olsr_node->pos_vec[2] + ZeroPosition[2] );
+		s3d_push_vertex( olsr_con->obj_id, olsr_con->right_olsr_node->pos_vec[0] + ZeroPosition[0], olsr_con->right_olsr_node->pos_vec[1]+ 0.2 + ZeroPosition[1], olsr_con->right_olsr_node->pos_vec[2] + ZeroPosition[2] );
+		s3d_push_vertex( olsr_con->obj_id, olsr_con->right_olsr_node->pos_vec[0] + ZeroPosition[0], olsr_con->right_olsr_node->pos_vec[1]- 0.2 + ZeroPosition[1], olsr_con->right_olsr_node->pos_vec[2] + ZeroPosition[2] );
 
 		if ( ColorSwitch ) {
 
 			/* HNA */
-			if ( (*olsr_con)->left_etx == -1000.00 ) {
+			if ( olsr_con->left_etx == -1000.00 ) {
 
-				s3d_push_material( (*olsr_con)->obj_id,
+				s3d_push_material( olsr_con->obj_id,
 							   0.0,0.0,1.0,
 							   0.0,0.0,1.0,
 							   0.0,0.0,1.0);
 
 			} else {
 
-				etx = ( ( ( (*olsr_con)->left_etx + (*olsr_con)->right_etx ) / 2.0 ) - 10.0 ) * 10.0;
+				etx = ( ( ( olsr_con->left_etx + olsr_con->right_etx ) / 2.0 ) - 10.0 ) * 10.0;
 
 				if ( ( etx >= 1.0 ) && ( etx < 2.0 ) ) {
 
 					rgb = etx - 1.0;
-					s3d_push_material( (*olsr_con)->obj_id,
+					s3d_push_material( olsr_con->obj_id,
 								rgb,1.0,0.0,
 								rgb,1.0,0.0,
 								rgb,1.0,0.0);
@@ -498,14 +530,14 @@
 				} else if ( ( etx >= 2.0 ) && ( etx < 3.0 ) ) {
 
 					rgb = 3.0 - etx;
-					s3d_push_material( (*olsr_con)->obj_id,
+					s3d_push_material( olsr_con->obj_id,
 								1.0,rgb,0.0,
 								1.0,rgb,0.0,
 								1.0,rgb,0.0);
 
 				} else {
 
-					s3d_push_material( (*olsr_con)->obj_id,
+					s3d_push_material( olsr_con->obj_id,
 								1.0,0.0,0.0,
 								1.0,0.0,0.0,
 								1.0,0.0,0.0);
@@ -516,17 +548,17 @@
 
 		} else {
 
-			s3d_push_material( (*olsr_con)->obj_id,
+			s3d_push_material( olsr_con->obj_id,
 						1.0,1.0,1.0,
 						1.0,1.0,1.0,
 						1.0,1.0,1.0);
 
 		}
 
-		s3d_push_polygon( (*olsr_con)->obj_id, 0,4,5,0 );
-		s3d_push_polygon( (*olsr_con)->obj_id, 3,1,2,0 );
+		s3d_push_polygon( olsr_con->obj_id, 0,4,5,0 );
+		s3d_push_polygon( olsr_con->obj_id, 3,1,2,0 );
 
-		olsr_con = &(*olsr_con)->next_olsr_con;
+		olsr_con = olsr_con->next_olsr_con;
 
 	}
 

Modified: trunk/apps/olsrs3d/net.c
===================================================================
--- trunk/apps/olsrs3d/net.c	2006-03-03 21:12:17 UTC (rev 137)
+++ trunk/apps/olsrs3d/net.c	2006-03-03 21:22:35 UTC (rev 138)
@@ -29,7 +29,7 @@
 #include <stdlib.h>
 #include <unistd.h>
 #include <errno.h>
-#include <string.h>
+#include <string.h> 	/* strlen(), memmove(), strncpy(), strncat() */
 #include <netdb.h>
 #include <sys/types.h>
 #include <netinet/in.h>
@@ -86,8 +86,29 @@
 	}
 
 	buf[numbytes] = '\0';
- 	strncat(lbuf,buf,MAXLINESIZE);
 
+	/* check for potential buffer overflow */
+	if ( ( strlen( lbuf ) + strlen( buf ) ) < MAXLINESIZE ) {
+
+		strncat( lbuf, buf, MAXLINESIZE );
+
+	} else {
+
+		/* hope that carriage return is now in buf */
+		if ( strlen( lbuf ) < MAXLINESIZE ) {
+
+			if ( Debug ) printf( "WARNING: lbuf almost filled without *any* carriage return within that data !\nAppending truncated buf to lbuf to prevent buffer overflow.\n" );
+			strncat( lbuf, buf, MAXLINESIZE - strlen( lbuf ) );
+
+		} else {
+
+			if ( Debug ) printf( "ERROR: lbuf filled without *any* carriage return within that data !\nClearing lbuf to prevent buffer overflow.\n" );
+			strncpy( lbuf, buf, MAXLINESIZE );
+
+		}
+
+	}
+
 	process_main();
 
 	if ( ( Byte_count += numbytes ) > 1000 ) {

Modified: trunk/apps/olsrs3d/process.c
===================================================================
--- trunk/apps/olsrs3d/process.c	2006-03-03 21:12:17 UTC (rev 137)
+++ trunk/apps/olsrs3d/process.c	2006-03-03 21:22:35 UTC (rev 138)
@@ -27,7 +27,7 @@
 
 #include <stdio.h> 	/* NULL */
 #include <string.h> 	/* strlen(), memmove() */
-#include <stdlib.h> 	/* rand(), malloc(), realloc(), free(), strtof() */
+#include <stdlib.h> 	/* rand(), malloc(), realloc(), free() */
 #include <s3d.h>
 #include "olsrs3d.h"
 
@@ -336,13 +336,16 @@
 
 	}
 
-	if ( last_cr_ptr != NULL ) 
-	{
+	if ( last_cr_ptr != NULL ) memmove( lbuf, ++last_cr_ptr, strlen( last_cr_ptr) );
+
+	/* TODO: check this changes as they crash olsrs3d
+	if ( last_cr_ptr != NULL )
+	{*/
 		/* memmove( lbuf, ++last_cr_ptr, strlen( last_cr_ptr) ); */
 		/* TODO: please check this process.c:339: warning: operation on `last_cr_ptr' may be undefined, i've changed it like this: */
-		last_cr_ptr++;
+		/*last_cr_ptr++;
 		memmove( lbuf, last_cr_ptr, strlen( last_cr_ptr) );
-	}
+	}*/
 
 	return(0);
 



From marec at berlios.de  Fri Mar  3 22:26:50 2006
From: marec at berlios.de (marec at BerliOS)
Date: Fri, 3 Mar 2006 22:26:50 +0100
Subject: [S3d-svn] r139 - trunk/apps/olsrs3d
Message-ID: <200603032126.k23LQoGV023596@sheep.berlios.de>

Author: marec
Date: 2006-03-03 22:26:49 +0100 (Fri, 03 Mar 2006)
New Revision: 139

Modified:
   trunk/apps/olsrs3d/main.c
Log:
remove not needed vars

Modified: trunk/apps/olsrs3d/main.c
===================================================================
--- trunk/apps/olsrs3d/main.c	2006-03-03 21:22:35 UTC (rev 138)
+++ trunk/apps/olsrs3d/main.c	2006-03-03 21:26:49 UTC (rev 139)
@@ -182,11 +182,9 @@
 
 void handle_olsr_node( struct olsr_node *olsr_node ) {
 
-/*	int result;    * result of strcmp */
 	float f, distance;
 	float tmp_mov_vec[3];
 	struct olsr_node *other_node;
-/*	struct olsr_con **olsr_con;*/
 	struct Obj_to_ip *Obj_to_ip_curr;
 	struct olsr_neigh_list *olsr_neigh_list, *prev_olsr_neigh_list, *other_node_neigh_list, *tmp_olsr_neigh_list;
 



From dotslash at berlios.de  Fri Mar  3 22:29:40 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Fri, 3 Mar 2006 22:29:40 +0100
Subject: [S3d-svn] r140 - in trunk: . client
Message-ID: <200603032129.k23LTe0u023945@sheep.berlios.de>

Author: dotslash
Date: 2006-03-03 22:29:40 +0100 (Fri, 03 Mar 2006)
New Revision: 140

Modified:
   trunk/
   trunk/client/io.c
Log:
 r198 at balthasar:  dotslash | 2006-03-03 22:29:29 +0100
 - minor workaround after reenabling signals



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:193
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:198

Modified: trunk/client/io.c
===================================================================
--- trunk/client/io.c	2006-03-03 21:26:49 UTC (rev 139)
+++ trunk/client/io.c	2006-03-03 21:29:40 UTC (rev 140)
@@ -49,7 +49,7 @@
 int _s3d_sigio=0;
 void sigpipe_handler(int sig, int code)  /*  ... ? */
 {
-	errs("sigpip_handler()","there is a broken pipe somewhere");
+	errs("sigpipe_handler()","there is a broken pipe somewhere");
 }
 void sigio_handler(int sig, int code)  /*  ... ? */
 {
@@ -57,7 +57,8 @@
 }
 void sigint_handler(int sig, int code)  /*  ... ? */
 {
-	s3d_quit();
+	/*s3d_quit();*/ /* TODO: sometimes no clean quit ?!*/
+	exit(-1);
 }
 
 #endif



From dotslash at berlios.de  Tue Mar  7 23:52:37 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Tue, 7 Mar 2006 23:52:37 +0100
Subject: [S3d-svn] r141 - in trunk: . client server
Message-ID: <200603072252.k27Mqb8t018602@sheep.berlios.de>

Author: dotslash
Date: 2006-03-07 23:52:35 +0100 (Tue, 07 Mar 2006)
New Revision: 141

Added:
   trunk/client/lgpl.txt
   trunk/gpl.txt
Modified:
   trunk/
   trunk/ChangeLog
   trunk/TODO
   trunk/server/event.c
Log:
 r200 at balthasar:  dotslash | 2006-03-07 23:52:30 +0100
 - fixed -O2 bug
 - forgot to upload gpl.txt and lgpl.txt



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:198
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:200

Modified: trunk/ChangeLog
===================================================================
--- trunk/ChangeLog	2006-03-03 21:29:40 UTC (rev 140)
+++ trunk/ChangeLog	2006-03-07 22:52:35 UTC (rev 141)
@@ -1,3 +1,5 @@
+2006-03-07  Simon Wunderlich - <dotslash at packetmixer.de>
+	- fixed -O2 problem
 2006-03-03  Simon Wunderlich - <dotslash at packetmixer.de>
 	- using values from config.h, user does not have to edit server/config.h
 	  or clients/config.h anymore to fit his/her needs

Modified: trunk/TODO
===================================================================
--- trunk/TODO	2006-03-03 21:29:40 UTC (rev 140)
+++ trunk/TODO	2006-03-07 22:52:35 UTC (rev 141)
@@ -1,4 +1,3 @@
-look for strncat foobar :)
 client(portability?!):
 	shmat() return (char *) -1 or NULL?! data_ctos/data_stoc should
 	really not be 0x0

Added: trunk/client/lgpl.txt
===================================================================
--- trunk/client/lgpl.txt	2006-03-03 21:29:40 UTC (rev 140)
+++ trunk/client/lgpl.txt	2006-03-07 22:52:35 UTC (rev 141)
@@ -0,0 +1,504 @@
+		  GNU LESSER GENERAL PUBLIC LICENSE
+		       Version 2.1, February 1999
+
+ Copyright (C) 1991, 1999 Free Software Foundation, Inc.
+     51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
+ Everyone is permitted to copy and distribute verbatim copies
+ of this license document, but changing it is not allowed.
+
+[This is the first released version of the Lesser GPL.  It also counts
+ as the successor of the GNU Library Public License, version 2, hence
+ the version number 2.1.]
+
+			    Preamble
+
+  The licenses for most software are designed to take away your
+freedom to share and change it.  By contrast, the GNU General Public
+Licenses are intended to guarantee your freedom to share and change
+free software--to make sure the software is free for all its users.
+
+  This license, the Lesser General Public License, applies to some
+specially designated software packages--typically libraries--of the
+Free Software Foundation and other authors who decide to use it.  You
+can use it too, but we suggest you first think carefully about whether
+this license or the ordinary General Public License is the better
+strategy to use in any particular case, based on the explanations below.
+
+  When we speak of free software, we are referring to freedom of use,
+not price.  Our General Public Licenses are designed to make sure that
+you have the freedom to distribute copies of free software (and charge
+for this service if you wish); that you receive source code or can get
+it if you want it; that you can change the software and use pieces of
+it in new free programs; and that you are informed that you can do
+these things.
+
+  To protect your rights, we need to make restrictions that forbid
+distributors to deny you these rights or to ask you to surrender these
+rights.  These restrictions translate to certain responsibilities for
+you if you distribute copies of the library or if you modify it.
+
+  For example, if you distribute copies of the library, whether gratis
+or for a fee, you must give the recipients all the rights that we gave
+you.  You must make sure that they, too, receive or can get the source
+code.  If you link other code with the library, you must provide
+complete object files to the recipients, so that they can relink them
+with the library after making changes to the library and recompiling
+it.  And you must show them these terms so they know their rights.
+
+  We protect your rights with a two-step method: (1) we copyright the
+library, and (2) we offer you this license, which gives you legal
+permission to copy, distribute and/or modify the library.
+
+  To protect each distributor, we want to make it very clear that
+there is no warranty for the free library.  Also, if the library is
+modified by someone else and passed on, the recipients should know
+that what they have is not the original version, so that the original
+author's reputation will not be affected by problems that might be
+introduced by others.
+
+  Finally, software patents pose a constant threat to the existence of
+any free program.  We wish to make sure that a company cannot
+effectively restrict the users of a free program by obtaining a
+restrictive license from a patent holder.  Therefore, we insist that
+any patent license obtained for a version of the library must be
+consistent with the full freedom of use specified in this license.
+
+  Most GNU software, including some libraries, is covered by the
+ordinary GNU General Public License.  This license, the GNU Lesser
+General Public License, applies to certain designated libraries, and
+is quite different from the ordinary General Public License.  We use
+this license for certain libraries in order to permit linking those
+libraries into non-free programs.
+
+  When a program is linked with a library, whether statically or using
+a shared library, the combination of the two is legally speaking a
+combined work, a derivative of the original library.  The ordinary
+General Public License therefore permits such linking only if the
+entire combination fits its criteria of freedom.  The Lesser General
+Public License permits more lax criteria for linking other code with
+the library.
+
+  We call this license the "Lesser" General Public License because it
+does Less to protect the user's freedom than the ordinary General
+Public License.  It also provides other free software developers Less
+of an advantage over competing non-free programs.  These disadvantages
+are the reason we use the ordinary General Public License for many
+libraries.  However, the Lesser license provides advantages in certain
+special circumstances.
+
+  For example, on rare occasions, there may be a special need to
+encourage the widest possible use of a certain library, so that it becomes
+a de-facto standard.  To achieve this, non-free programs must be
+allowed to use the library.  A more frequent case is that a free
+library does the same job as widely used non-free libraries.  In this
+case, there is little to gain by limiting the free library to free
+software only, so we use the Lesser General Public License.
+
+  In other cases, permission to use a particular library in non-free
+programs enables a greater number of people to use a large body of
+free software.  For example, permission to use the GNU C Library in
+non-free programs enables many more people to use the whole GNU
+operating system, as well as its variant, the GNU/Linux operating
+system.
+
+  Although the Lesser General Public License is Less protective of the
+users' freedom, it does ensure that the user of a program that is
+linked with the Library has the freedom and the wherewithal to run
+that program using a modified version of the Library.
+
+  The precise terms and conditions for copying, distribution and
+modification follow.  Pay close attention to the difference between a
+"work based on the library" and a "work that uses the library".  The
+former contains code derived from the library, whereas the latter must
+be combined with the library in order to run.
+
+		  GNU LESSER GENERAL PUBLIC LICENSE
+   TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION
+
+  0. This License Agreement applies to any software library or other
+program which contains a notice placed by the copyright holder or
+other authorized party saying it may be distributed under the terms of
+this Lesser General Public License (also called "this License").
+Each licensee is addressed as "you".
+
+  A "library" means a collection of software functions and/or data
+prepared so as to be conveniently linked with application programs
+(which use some of those functions and data) to form executables.
+
+  The "Library", below, refers to any such software library or work
+which has been distributed under these terms.  A "work based on the
+Library" means either the Library or any derivative work under
+copyright law: that is to say, a work containing the Library or a
+portion of it, either verbatim or with modifications and/or translated
+straightforwardly into another language.  (Hereinafter, translation is
+included without limitation in the term "modification".)
+
+  "Source code" for a work means the preferred form of the work for
+making modifications to it.  For a library, complete source code means
+all the source code for all modules it contains, plus any associated
+interface definition files, plus the scripts used to control compilation
+and installation of the library.
+
+  Activities other than copying, distribution and modification are not
+covered by this License; they are outside its scope.  The act of
+running a program using the Library is not restricted, and output from
+such a program is covered only if its contents constitute a work based
+on the Library (independent of the use of the Library in a tool for
+writing it).  Whether that is true depends on what the Library does
+and what the program that uses the Library does.
+  
+  1. You may copy and distribute verbatim copies of the Library's
+complete source code as you receive it, in any medium, provided that
+you conspicuously and appropriately publish on each copy an
+appropriate copyright notice and disclaimer of warranty; keep intact
+all the notices that refer to this License and to the absence of any
+warranty; and distribute a copy of this License along with the
+Library.
+
+  You may charge a fee for the physical act of transferring a copy,
+and you may at your option offer warranty protection in exchange for a
+fee.
+
+  2. You may modify your copy or copies of the Library or any portion
+of it, thus forming a work based on the Library, and copy and
+distribute such modifications or work under the terms of Section 1
+above, provided that you also meet all of these conditions:
+
+    a) The modified work must itself be a software library.
+
+    b) You must cause the files modified to carry prominent notices
+    stating that you changed the files and the date of any change.
+
+    c) You must cause the whole of the work to be licensed at no
+    charge to all third parties under the terms of this License.
+
+    d) If a facility in the modified Library refers to a function or a
+    table of data to be supplied by an application program that uses
+    the facility, other than as an argument passed when the facility
+    is invoked, then you must make a good faith effort to ensure that,
+    in the event an application does not supply such function or
+    table, the facility still operates, and performs whatever part of
+    its purpose remains meaningful.
+
+    (For example, a function in a library to compute square roots has
+    a purpose that is entirely well-defined independent of the
+    application.  Therefore, Subsection 2d requires that any
+    application-supplied function or table used by this function must
+    be optional: if the application does not supply it, the square
+    root function must still compute square roots.)
+
+These requirements apply to the modified work as a whole.  If
+identifiable sections of that work are not derived from the Library,
+and can be reasonably considered independent and separate works in
+themselves, then this License, and its terms, do not apply to those
+sections when you distribute them as separate works.  But when you
+distribute the same sections as part of a whole which is a work based
+on the Library, the distribution of the whole must be on the terms of
+this License, whose permissions for other licensees extend to the
+entire whole, and thus to each and every part regardless of who wrote
+it.
+
+Thus, it is not the intent of this section to claim rights or contest
+your rights to work written entirely by you; rather, the intent is to
+exercise the right to control the distribution of derivative or
+collective works based on the Library.
+
+In addition, mere aggregation of another work not based on the Library
+with the Library (or with a work based on the Library) on a volume of
+a storage or distribution medium does not bring the other work under
+the scope of this License.
+
+  3. You may opt to apply the terms of the ordinary GNU General Public
+License instead of this License to a given copy of the Library.  To do
+this, you must alter all the notices that refer to this License, so
+that they refer to the ordinary GNU General Public License, version 2,
+instead of to this License.  (If a newer version than version 2 of the
+ordinary GNU General Public License has appeared, then you can specify
+that version instead if you wish.)  Do not make any other change in
+these notices.
+
+  Once this change is made in a given copy, it is irreversible for
+that copy, so the ordinary GNU General Public License applies to all
+subsequent copies and derivative works made from that copy.
+
+  This option is useful when you wish to copy part of the code of
+the Library into a program that is not a library.
+
+  4. You may copy and distribute the Library (or a portion or
+derivative of it, under Section 2) in object code or executable form
+under the terms of Sections 1 and 2 above provided that you accompany
+it with the complete corresponding machine-readable source code, which
+must be distributed under the terms of Sections 1 and 2 above on a
+medium customarily used for software interchange.
+
+  If distribution of object code is made by offering access to copy
+from a designated place, then offering equivalent access to copy the
+source code from the same place satisfies the requirement to
+distribute the source code, even though third parties are not
+compelled to copy the source along with the object code.
+
+  5. A program that contains no derivative of any portion of the
+Library, but is designed to work with the Library by being compiled or
+linked with it, is called a "work that uses the Library".  Such a
+work, in isolation, is not a derivative work of the Library, and
+therefore falls outside the scope of this License.
+
+  However, linking a "work that uses the Library" with the Library
+creates an executable that is a derivative of the Library (because it
+contains portions of the Library), rather than a "work that uses the
+library".  The executable is therefore covered by this License.
+Section 6 states terms for distribution of such executables.
+
+  When a "work that uses the Library" uses material from a header file
+that is part of the Library, the object code for the work may be a
+derivative work of the Library even though the source code is not.
+Whether this is true is especially significant if the work can be
+linked without the Library, or if the work is itself a library.  The
+threshold for this to be true is not precisely defined by law.
+
+  If such an object file uses only numerical parameters, data
+structure layouts and accessors, and small macros and small inline
+functions (ten lines or less in length), then the use of the object
+file is unrestricted, regardless of whether it is legally a derivative
+work.  (Executables containing this object code plus portions of the
+Library will still fall under Section 6.)
+
+  Otherwise, if the work is a derivative of the Library, you may
+distribute the object code for the work under the terms of Section 6.
+Any executables containing that work also fall under Section 6,
+whether or not they are linked directly with the Library itself.
+
+  6. As an exception to the Sections above, you may also combine or
+link a "work that uses the Library" with the Library to produce a
+work containing portions of the Library, and distribute that work
+under terms of your choice, provided that the terms permit
+modification of the work for the customer's own use and reverse
+engineering for debugging such modifications.
+
+  You must give prominent notice with each copy of the work that the
+Library is used in it and that the Library and its use are covered by
+this License.  You must supply a copy of this License.  If the work
+during execution displays copyright notices, you must include the
+copyright notice for the Library among them, as well as a reference
+directing the user to the copy of this License.  Also, you must do one
+of these things:
+
+    a) Accompany the work with the complete corresponding
+    machine-readable source code for the Library including whatever
+    changes were used in the work (which must be distributed under
+    Sections 1 and 2 above); and, if the work is an executable linked
+    with the Library, with the complete machine-readable "work that
+    uses the Library", as object code and/or source code, so that the
+    user can modify the Library and then relink to produce a modified
+    executable containing the modified Library.  (It is understood
+    that the user who changes the contents of definitions files in the
+    Library will not necessarily be able to recompile the application
+    to use the modified definitions.)
+
+    b) Use a suitable shared library mechanism for linking with the
+    Library.  A suitable mechanism is one that (1) uses at run time a
+    copy of the library already present on the user's computer system,
+    rather than copying library functions into the executable, and (2)
+    will operate properly with a modified version of the library, if
+    the user installs one, as long as the modified version is
+    interface-compatible with the version that the work was made with.
+
+    c) Accompany the work with a written offer, valid for at
+    least three years, to give the same user the materials
+    specified in Subsection 6a, above, for a charge no more
+    than the cost of performing this distribution.
+
+    d) If distribution of the work is made by offering access to copy
+    from a designated place, offer equivalent access to copy the above
+    specified materials from the same place.
+
+    e) Verify that the user has already received a copy of these
+    materials or that you have already sent this user a copy.
+
+  For an executable, the required form of the "work that uses the
+Library" must include any data and utility programs needed for
+reproducing the executable from it.  However, as a special exception,
+the materials to be distributed need not include anything that is
+normally distributed (in either source or binary form) with the major
+components (compiler, kernel, and so on) of the operating system on
+which the executable runs, unless that component itself accompanies
+the executable.
+
+  It may happen that this requirement contradicts the license
+restrictions of other proprietary libraries that do not normally
+accompany the operating system.  Such a contradiction means you cannot
+use both them and the Library together in an executable that you
+distribute.
+
+  7. You may place library facilities that are a work based on the
+Library side-by-side in a single library together with other library
+facilities not covered by this License, and distribute such a combined
+library, provided that the separate distribution of the work based on
+the Library and of the other library facilities is otherwise
+permitted, and provided that you do these two things:
+
+    a) Accompany the combined library with a copy of the same work
+    based on the Library, uncombined with any other library
+    facilities.  This must be distributed under the terms of the
+    Sections above.
+
+    b) Give prominent notice with the combined library of the fact
+    that part of it is a work based on the Library, and explaining
+    where to find the accompanying uncombined form of the same work.
+
+  8. You may not copy, modify, sublicense, link with, or distribute
+the Library except as expressly provided under this License.  Any
+attempt otherwise to copy, modify, sublicense, link with, or
+distribute the Library is void, and will automatically terminate your
+rights under this License.  However, parties who have received copies,
+or rights, from you under this License will not have their licenses
+terminated so long as such parties remain in full compliance.
+
+  9. You are not required to accept this License, since you have not
+signed it.  However, nothing else grants you permission to modify or
+distribute the Library or its derivative works.  These actions are
+prohibited by law if you do not accept this License.  Therefore, by
+modifying or distributing the Library (or any work based on the
+Library), you indicate your acceptance of this License to do so, and
+all its terms and conditions for copying, distributing or modifying
+the Library or works based on it.
+
+  10. Each time you redistribute the Library (or any work based on the
+Library), the recipient automatically receives a license from the
+original licensor to copy, distribute, link with or modify the Library
+subject to these terms and conditions.  You may not impose any further
+restrictions on the recipients' exercise of the rights granted herein.
+You are not responsible for enforcing compliance by third parties with
+this License.
+
+  11. If, as a consequence of a court judgment or allegation of patent
+infringement or for any other reason (not limited to patent issues),
+conditions are imposed on you (whether by court order, agreement or
+otherwise) that contradict the conditions of this License, they do not
+excuse you from the conditions of this License.  If you cannot
+distribute so as to satisfy simultaneously your obligations under this
+License and any other pertinent obligations, then as a consequence you
+may not distribute the Library at all.  For example, if a patent
+license would not permit royalty-free redistribution of the Library by
+all those who receive copies directly or indirectly through you, then
+the only way you could satisfy both it and this License would be to
+refrain entirely from distribution of the Library.
+
+If any portion of this section is held invalid or unenforceable under any
+particular circumstance, the balance of the section is intended to apply,
+and the section as a whole is intended to apply in other circumstances.
+
+It is not the purpose of this section to induce you to infringe any
+patents or other property right claims or to contest validity of any
+such claims; this section has the sole purpose of protecting the
+integrity of the free software distribution system which is
+implemented by public license practices.  Many people have made
+generous contributions to the wide range of software distributed
+through that system in reliance on consistent application of that
+system; it is up to the author/donor to decide if he or she is willing
+to distribute software through any other system and a licensee cannot
+impose that choice.
+
+This section is intended to make thoroughly clear what is believed to
+be a consequence of the rest of this License.
+
+  12. If the distribution and/or use of the Library is restricted in
+certain countries either by patents or by copyrighted interfaces, the
+original copyright holder who places the Library under this License may add
+an explicit geographical distribution limitation excluding those countries,
+so that distribution is permitted only in or among countries not thus
+excluded.  In such case, this License incorporates the limitation as if
+written in the body of this License.
+
+  13. The Free Software Foundation may publish revised and/or new
+versions of the Lesser General Public License from time to time.
+Such new versions will be similar in spirit to the present version,
+but may differ in detail to address new problems or concerns.
+
+Each version is given a distinguishing version number.  If the Library
+specifies a version number of this License which applies to it and
+"any later version", you have the option of following the terms and
+conditions either of that version or of any later version published by
+the Free Software Foundation.  If the Library does not specify a
+license version number, you may choose any version ever published by
+the Free Software Foundation.
+
+  14. If you wish to incorporate parts of the Library into other free
+programs whose distribution conditions are incompatible with these,
+write to the author to ask for permission.  For software which is
+copyrighted by the Free Software Foundation, write to the Free
+Software Foundation; we sometimes make exceptions for this.  Our
+decision will be guided by the two goals of preserving the free status
+of all derivatives of our free software and of promoting the sharing
+and reuse of software generally.
+
+			    NO WARRANTY
+
+  15. BECAUSE THE LIBRARY IS LICENSED FREE OF CHARGE, THERE IS NO
+WARRANTY FOR THE LIBRARY, TO THE EXTENT PERMITTED BY APPLICABLE LAW.
+EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR
+OTHER PARTIES PROVIDE THE LIBRARY "AS IS" WITHOUT WARRANTY OF ANY
+KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE
+IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
+PURPOSE.  THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE
+LIBRARY IS WITH YOU.  SHOULD THE LIBRARY PROVE DEFECTIVE, YOU ASSUME
+THE COST OF ALL NECESSARY SERVICING, REPAIR OR CORRECTION.
+
+  16. IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN
+WRITING WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY
+AND/OR REDISTRIBUTE THE LIBRARY AS PERMITTED ABOVE, BE LIABLE TO YOU
+FOR DAMAGES, INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR
+CONSEQUENTIAL DAMAGES ARISING OUT OF THE USE OR INABILITY TO USE THE
+LIBRARY (INCLUDING BUT NOT LIMITED TO LOSS OF DATA OR DATA BEING
+RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU OR THIRD PARTIES OR A
+FAILURE OF THE LIBRARY TO OPERATE WITH ANY OTHER SOFTWARE), EVEN IF
+SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH
+DAMAGES.
+
+		     END OF TERMS AND CONDITIONS
+
+           How to Apply These Terms to Your New Libraries
+
+  If you develop a new library, and you want it to be of the greatest
+possible use to the public, we recommend making it free software that
+everyone can redistribute and change.  You can do so by permitting
+redistribution under these terms (or, alternatively, under the terms of the
+ordinary General Public License).
+
+  To apply these terms, attach the following notices to the library.  It is
+safest to attach them to the start of each source file to most effectively
+convey the exclusion of warranty; and each file should have at least the
+"copyright" line and a pointer to where the full notice is found.
+
+    <one line to give the library's name and a brief idea of what it does.>
+    Copyright (C) <year>  <name of author>
+
+    This library is free software; you can redistribute it and/or
+    modify it under the terms of the GNU Lesser General Public
+    License as published by the Free Software Foundation; either
+    version 2.1 of the License, or (at your option) any later version.
+
+    This library is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+    Lesser General Public License for more details.
+
+    You should have received a copy of the GNU Lesser General Public
+    License along with this library; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
+
+Also add information on how to contact you by electronic and paper mail.
+
+You should also get your employer (if you work as a programmer) or your
+school, if any, to sign a "copyright disclaimer" for the library, if
+necessary.  Here is a sample; alter the names:
+
+  Yoyodyne, Inc., hereby disclaims all copyright interest in the
+  library `Frob' (a library for tweaking knobs) written by James Random Hacker.
+
+  <signature of Ty Coon>, 1 April 1990
+  Ty Coon, President of Vice
+
+That's all there is to it!
+
+

Added: trunk/gpl.txt
===================================================================
--- trunk/gpl.txt	2006-03-03 21:29:40 UTC (rev 140)
+++ trunk/gpl.txt	2006-03-07 22:52:35 UTC (rev 141)
@@ -0,0 +1,340 @@
+		    GNU GENERAL PUBLIC LICENSE
+		       Version 2, June 1991
+
+ Copyright (C) 1989, 1991 Free Software Foundation, Inc.
+                       51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
+ Everyone is permitted to copy and distribute verbatim copies
+ of this license document, but changing it is not allowed.
+
+			    Preamble
+
+  The licenses for most software are designed to take away your
+freedom to share and change it.  By contrast, the GNU General Public
+License is intended to guarantee your freedom to share and change free
+software--to make sure the software is free for all its users.  This
+General Public License applies to most of the Free Software
+Foundation's software and to any other program whose authors commit to
+using it.  (Some other Free Software Foundation software is covered by
+the GNU Library General Public License instead.)  You can apply it to
+your programs, too.
+
+  When we speak of free software, we are referring to freedom, not
+price.  Our General Public Licenses are designed to make sure that you
+have the freedom to distribute copies of free software (and charge for
+this service if you wish), that you receive source code or can get it
+if you want it, that you can change the software or use pieces of it
+in new free programs; and that you know you can do these things.
+
+  To protect your rights, we need to make restrictions that forbid
+anyone to deny you these rights or to ask you to surrender the rights.
+These restrictions translate to certain responsibilities for you if you
+distribute copies of the software, or if you modify it.
+
+  For example, if you distribute copies of such a program, whether
+gratis or for a fee, you must give the recipients all the rights that
+you have.  You must make sure that they, too, receive or can get the
+source code.  And you must show them these terms so they know their
+rights.
+
+  We protect your rights with two steps: (1) copyright the software, and
+(2) offer you this license which gives you legal permission to copy,
+distribute and/or modify the software.
+
+  Also, for each author's protection and ours, we want to make certain
+that everyone understands that there is no warranty for this free
+software.  If the software is modified by someone else and passed on, we
+want its recipients to know that what they have is not the original, so
+that any problems introduced by others will not reflect on the original
+authors' reputations.
+
+  Finally, any free program is threatened constantly by software
+patents.  We wish to avoid the danger that redistributors of a free
+program will individually obtain patent licenses, in effect making the
+program proprietary.  To prevent this, we have made it clear that any
+patent must be licensed for everyone's free use or not licensed at all.
+
+  The precise terms and conditions for copying, distribution and
+modification follow.
+
+		    GNU GENERAL PUBLIC LICENSE
+   TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION
+
+  0. This License applies to any program or other work which contains
+a notice placed by the copyright holder saying it may be distributed
+under the terms of this General Public License.  The "Program", below,
+refers to any such program or work, and a "work based on the Program"
+means either the Program or any derivative work under copyright law:
+that is to say, a work containing the Program or a portion of it,
+either verbatim or with modifications and/or translated into another
+language.  (Hereinafter, translation is included without limitation in
+the term "modification".)  Each licensee is addressed as "you".
+
+Activities other than copying, distribution and modification are not
+covered by this License; they are outside its scope.  The act of
+running the Program is not restricted, and the output from the Program
+is covered only if its contents constitute a work based on the
+Program (independent of having been made by running the Program).
+Whether that is true depends on what the Program does.
+
+  1. You may copy and distribute verbatim copies of the Program's
+source code as you receive it, in any medium, provided that you
+conspicuously and appropriately publish on each copy an appropriate
+copyright notice and disclaimer of warranty; keep intact all the
+notices that refer to this License and to the absence of any warranty;
+and give any other recipients of the Program a copy of this License
+along with the Program.
+
+You may charge a fee for the physical act of transferring a copy, and
+you may at your option offer warranty protection in exchange for a fee.
+
+  2. You may modify your copy or copies of the Program or any portion
+of it, thus forming a work based on the Program, and copy and
+distribute such modifications or work under the terms of Section 1
+above, provided that you also meet all of these conditions:
+
+    a) You must cause the modified files to carry prominent notices
+    stating that you changed the files and the date of any change.
+
+    b) You must cause any work that you distribute or publish, that in
+    whole or in part contains or is derived from the Program or any
+    part thereof, to be licensed as a whole at no charge to all third
+    parties under the terms of this License.
+
+    c) If the modified program normally reads commands interactively
+    when run, you must cause it, when started running for such
+    interactive use in the most ordinary way, to print or display an
+    announcement including an appropriate copyright notice and a
+    notice that there is no warranty (or else, saying that you provide
+    a warranty) and that users may redistribute the program under
+    these conditions, and telling the user how to view a copy of this
+    License.  (Exception: if the Program itself is interactive but
+    does not normally print such an announcement, your work based on
+    the Program is not required to print an announcement.)
+
+These requirements apply to the modified work as a whole.  If
+identifiable sections of that work are not derived from the Program,
+and can be reasonably considered independent and separate works in
+themselves, then this License, and its terms, do not apply to those
+sections when you distribute them as separate works.  But when you
+distribute the same sections as part of a whole which is a work based
+on the Program, the distribution of the whole must be on the terms of
+this License, whose permissions for other licensees extend to the
+entire whole, and thus to each and every part regardless of who wrote it.
+
+Thus, it is not the intent of this section to claim rights or contest
+your rights to work written entirely by you; rather, the intent is to
+exercise the right to control the distribution of derivative or
+collective works based on the Program.
+
+In addition, mere aggregation of another work not based on the Program
+with the Program (or with a work based on the Program) on a volume of
+a storage or distribution medium does not bring the other work under
+the scope of this License.
+
+  3. You may copy and distribute the Program (or a work based on it,
+under Section 2) in object code or executable form under the terms of
+Sections 1 and 2 above provided that you also do one of the following:
+
+    a) Accompany it with the complete corresponding machine-readable
+    source code, which must be distributed under the terms of Sections
+    1 and 2 above on a medium customarily used for software interchange; or,
+
+    b) Accompany it with a written offer, valid for at least three
+    years, to give any third party, for a charge no more than your
+    cost of physically performing source distribution, a complete
+    machine-readable copy of the corresponding source code, to be
+    distributed under the terms of Sections 1 and 2 above on a medium
+    customarily used for software interchange; or,
+
+    c) Accompany it with the information you received as to the offer
+    to distribute corresponding source code.  (This alternative is
+    allowed only for noncommercial distribution and only if you
+    received the program in object code or executable form with such
+    an offer, in accord with Subsection b above.)
+
+The source code for a work means the preferred form of the work for
+making modifications to it.  For an executable work, complete source
+code means all the source code for all modules it contains, plus any
+associated interface definition files, plus the scripts used to
+control compilation and installation of the executable.  However, as a
+special exception, the source code distributed need not include
+anything that is normally distributed (in either source or binary
+form) with the major components (compiler, kernel, and so on) of the
+operating system on which the executable runs, unless that component
+itself accompanies the executable.
+
+If distribution of executable or object code is made by offering
+access to copy from a designated place, then offering equivalent
+access to copy the source code from the same place counts as
+distribution of the source code, even though third parties are not
+compelled to copy the source along with the object code.
+
+  4. You may not copy, modify, sublicense, or distribute the Program
+except as expressly provided under this License.  Any attempt
+otherwise to copy, modify, sublicense or distribute the Program is
+void, and will automatically terminate your rights under this License.
+However, parties who have received copies, or rights, from you under
+this License will not have their licenses terminated so long as such
+parties remain in full compliance.
+
+  5. You are not required to accept this License, since you have not
+signed it.  However, nothing else grants you permission to modify or
+distribute the Program or its derivative works.  These actions are
+prohibited by law if you do not accept this License.  Therefore, by
+modifying or distributing the Program (or any work based on the
+Program), you indicate your acceptance of this License to do so, and
+all its terms and conditions for copying, distributing or modifying
+the Program or works based on it.
+
+  6. Each time you redistribute the Program (or any work based on the
+Program), the recipient automatically receives a license from the
+original licensor to copy, distribute or modify the Program subject to
+these terms and conditions.  You may not impose any further
+restrictions on the recipients' exercise of the rights granted herein.
+You are not responsible for enforcing compliance by third parties to
+this License.
+
+  7. If, as a consequence of a court judgment or allegation of patent
+infringement or for any other reason (not limited to patent issues),
+conditions are imposed on you (whether by court order, agreement or
+otherwise) that contradict the conditions of this License, they do not
+excuse you from the conditions of this License.  If you cannot
+distribute so as to satisfy simultaneously your obligations under this
+License and any other pertinent obligations, then as a consequence you
+may not distribute the Program at all.  For example, if a patent
+license would not permit royalty-free redistribution of the Program by
+all those who receive copies directly or indirectly through you, then
+the only way you could satisfy both it and this License would be to
+refrain entirely from distribution of the Program.
+
+If any portion of this section is held invalid or unenforceable under
+any particular circumstance, the balance of the section is intended to
+apply and the section as a whole is intended to apply in other
+circumstances.
+
+It is not the purpose of this section to induce you to infringe any
+patents or other property right claims or to contest validity of any
+such claims; this section has the sole purpose of protecting the
+integrity of the free software distribution system, which is
+implemented by public license practices.  Many people have made
+generous contributions to the wide range of software distributed
+through that system in reliance on consistent application of that
+system; it is up to the author/donor to decide if he or she is willing
+to distribute software through any other system and a licensee cannot
+impose that choice.
+
+This section is intended to make thoroughly clear what is believed to
+be a consequence of the rest of this License.
+
+  8. If the distribution and/or use of the Program is restricted in
+certain countries either by patents or by copyrighted interfaces, the
+original copyright holder who places the Program under this License
+may add an explicit geographical distribution limitation excluding
+those countries, so that distribution is permitted only in or among
+countries not thus excluded.  In such case, this License incorporates
+the limitation as if written in the body of this License.
+
+  9. The Free Software Foundation may publish revised and/or new versions
+of the General Public License from time to time.  Such new versions will
+be similar in spirit to the present version, but may differ in detail to
+address new problems or concerns.
+
+Each version is given a distinguishing version number.  If the Program
+specifies a version number of this License which applies to it and "any
+later version", you have the option of following the terms and conditions
+either of that version or of any later version published by the Free
+Software Foundation.  If the Program does not specify a version number of
+this License, you may choose any version ever published by the Free Software
+Foundation.
+
+  10. If you wish to incorporate parts of the Program into other free
+programs whose distribution conditions are different, write to the author
+to ask for permission.  For software which is copyrighted by the Free
+Software Foundation, write to the Free Software Foundation; we sometimes
+make exceptions for this.  Our decision will be guided by the two goals
+of preserving the free status of all derivatives of our free software and
+of promoting the sharing and reuse of software generally.
+
+			    NO WARRANTY
+
+  11. BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY
+FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW.  EXCEPT WHEN
+OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES
+PROVIDE THE PROGRAM "AS IS" WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED
+OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
+MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  THE ENTIRE RISK AS
+TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE
+PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING,
+REPAIR OR CORRECTION.
+
+  12. IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING
+WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY AND/OR
+REDISTRIBUTE THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES,
+INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING
+OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED
+TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY
+YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER
+PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE
+POSSIBILITY OF SUCH DAMAGES.
+
+		     END OF TERMS AND CONDITIONS
+
+	    How to Apply These Terms to Your New Programs
+
+  If you develop a new program, and you want it to be of the greatest
+possible use to the public, the best way to achieve this is to make it
+free software which everyone can redistribute and change under these terms.
+
+  To do so, attach the following notices to the program.  It is safest
+to attach them to the start of each source file to most effectively
+convey the exclusion of warranty; and each file should have at least
+the "copyright" line and a pointer to where the full notice is found.
+
+    <one line to give the program's name and a brief idea of what it does.>
+    Copyright (C) <year>  <name of author>
+
+    This program is free software; you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation; either version 2 of the License, or
+    (at your option) any later version.
+
+    This program is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with this program; if not, write to the Free Software
+    Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
+
+
+Also add information on how to contact you by electronic and paper mail.
+
+If the program is interactive, make it output a short notice like this
+when it starts in an interactive mode:
+
+    Gnomovision version 69, Copyright (C) year name of author
+    Gnomovision comes with ABSOLUTELY NO WARRANTY; for details type `show w'.
+    This is free software, and you are welcome to redistribute it
+    under certain conditions; type `show c' for details.
+
+The hypothetical commands `show w' and `show c' should show the appropriate
+parts of the General Public License.  Of course, the commands you use may
+be called something other than `show w' and `show c'; they could even be
+mouse-clicks or menu items--whatever suits your program.
+
+You should also get your employer (if you work as a programmer) or your
+school, if any, to sign a "copyright disclaimer" for the program, if
+necessary.  Here is a sample; alter the names:
+
+  Yoyodyne, Inc., hereby disclaims all copyright interest in the program
+  `Gnomovision' (which makes passes at compilers) written by James Hacker.
+
+  <signature of Ty Coon>, 1 April 1989
+  Ty Coon, President of Vice
+
+This General Public License does not permit incorporating your program into
+proprietary programs.  If your program is a subroutine library, you may
+consider it more useful to permit linking proprietary applications with the
+library.  If this is what you want to do, use the GNU Library General
+Public License instead of this License.

Modified: trunk/server/event.c
===================================================================
--- trunk/server/event.c	2006-03-03 21:29:40 UTC (rev 140)
+++ trunk/server/event.c	2006-03-07 22:52:35 UTC (rev 141)
@@ -55,19 +55,16 @@
 /*  tell the client something about us */
 int event_init(struct t_process *p)
 {
-	char s[strlen(S3D_SERVER_NAME)+3];
-	s[0]=S3D_SERVER_MAJOR;
-	s[1]=S3D_SERVER_MINOR;
-	s[2]=S3D_SERVER_PATCH;
-	strcpy(s+3,S3D_SERVER_NAME);  /*  should be safe as we allocated with it's length	 */
-	prot_com_out(p,S3D_P_S_INIT, (uint8_t *)s, strlen(S3D_SERVER_NAME)+3);
+	char s[NAME_MAX+3];
+	sprintf(s,"%c%c%c%s", S3D_SERVER_MAJOR, S3D_SERVER_MINOR, S3D_SERVER_PATCH, S3D_SERVER_NAME); /* thanks award */
+	prot_com_out(p,S3D_P_S_INIT, (uint8_t *)s, strlen(S3D_SERVER_NAME)+4);
 	return(0);
 }
 /*  this lets a process quit gracefully ... */
 int event_quit(struct t_process *p)
 {
 	prot_com_out(p, S3D_P_S_QUIT, NULL,0);
-	dprintf(HIGH,"sending pid %d  QUIT signal",p->id);
+	dprintf(HIGH,"sending pid %d  QUIT signal",p->id); 
 	process_del(p->id);
 	return(0);
 }



From dotslash at berlios.de  Thu Mar  9 19:37:19 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Thu, 9 Mar 2006 19:37:19 +0100
Subject: [S3d-svn] r142 - trunk
Message-ID: <200603091837.k29IbJst019058@sheep.berlios.de>

Author: dotslash
Date: 2006-03-09 19:37:18 +0100 (Thu, 09 Mar 2006)
New Revision: 142

Modified:
   trunk/
   trunk/configure.ac
Log:
 r202 at balthasar:  dotslash | 2006-03-09 19:37:11 +0100
 - fontconfig 2.1.0



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:200
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:202

Modified: trunk/configure.ac
===================================================================
--- trunk/configure.ac	2006-03-07 22:52:35 UTC (rev 141)
+++ trunk/configure.ac	2006-03-09 18:37:18 UTC (rev 142)
@@ -87,7 +87,7 @@
 
 dnl ##################################### CLIENT #######################################
 
-PKG_CHECK_MODULES(FONTCONFIG, fontconfig >= 2.3.0, [:], [AC_MSG_ERROR([Please install fontconfig (version 2.3.0 or higher)])])
+PKG_CHECK_MODULES(FONTCONFIG, fontconfig >= 2.1.0, [:], [AC_MSG_ERROR([Please install fontconfig (version 2.1.0 or higher)])])
 PKG_CHECK_MODULES(FREETYPE, freetype2 >= 9.5.0, [:], [AC_MSG_ERROR([Please install freetype2 (version 9.5.0 or higher)])])
 
 dnl if test "x${HAVE_glut}" = "x"; then



From dotslash at berlios.de  Thu Mar  9 20:00:45 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Thu, 9 Mar 2006 20:00:45 +0100
Subject: [S3d-svn] r143 - in trunk: . server
Message-ID: <200603091900.k29J0jsD029431@sheep.berlios.de>

Author: dotslash
Date: 2006-03-09 20:00:38 +0100 (Thu, 09 Mar 2006)
New Revision: 143

Modified:
   trunk/
   trunk/server/graphics.c
Log:
 r204 at balthasar:  dotslash | 2006-03-09 20:00:23 +0100
 #define G_GLUT for GlutWireTorus



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:202
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:204

Modified: trunk/server/graphics.c
===================================================================
--- trunk/server/graphics.c	2006-03-09 18:37:18 UTC (rev 142)
+++ trunk/server/graphics.c	2006-03-09 19:00:38 UTC (rev 143)
@@ -24,7 +24,9 @@
 #include "global.h"
 #include <stdlib.h>		 /*  malloc() */
 #include <string.h>		 /*  memcpy() */
+#ifdef G_GLUT
 #include <GL/glut.h> 	 /*  glutWireTorus() -  to be removed later */ 
+#endif
 #include <GL/gl.h>		 /*  GLint */
 #ifdef G_SDL
 #include <SDL.h>	 /*  SDL_GL_SwapBuffers */
@@ -355,14 +357,17 @@
 		glLightfv(GL_LIGHT0,GL_POSITION,pos);
 		render_by_mcp();
 #ifdef DEBUG
+#ifdef G_GLUT
 		glPushMatrix();
 			glRotatef(90,1.0,0.0,0.0);	
 			glMaterialfv(GL_FRONT,GL_AMBIENT,wire_amb);
 			glMaterialfv(GL_FRONT,GL_SPECULAR,wire_spec);
 			glMaterialfv(GL_FRONT,GL_DIFFUSE,wire_diff);
+			
 			glutWireTorus(100,100,40,40);
 		glPopMatrix();
 #endif
+#endif
  	glPopMatrix();  /*  restore the cam */ 
 	glLoadIdentity();
 	glMultMatrixf(m);



From nichtsnutz at berlios.de  Thu Mar  9 21:06:42 2006
From: nichtsnutz at berlios.de (nichtsnutz at BerliOS)
Date: Thu, 9 Mar 2006 21:06:42 +0100
Subject: [S3d-svn] r144 - trunk/apps/olsrs3d
Message-ID: <200603092006.k29K6gCF030006@sheep.berlios.de>

Author: nichtsnutz
Date: 2006-03-09 21:06:37 +0100 (Thu, 09 Mar 2006)
New Revision: 144

Modified:
   trunk/apps/olsrs3d/main.c
   trunk/apps/olsrs3d/olsrs3d.h
   trunk/apps/olsrs3d/process.c
Log:
move Obj2Ip functions to process.c
change memmove call in process_main

Modified: trunk/apps/olsrs3d/main.c
===================================================================
--- trunk/apps/olsrs3d/main.c	2006-03-09 19:00:38 UTC (rev 143)
+++ trunk/apps/olsrs3d/main.c	2006-03-09 20:06:37 UTC (rev 144)
@@ -384,7 +384,7 @@
 		if ( ( olsr_con->left_etx != 0.0 ) && ( olsr_con->right_etx != 0.0  ) ) {
 
 			distance = dirt( olsr_con->left_olsr_node->pos_vec, olsr_con->right_olsr_node->pos_vec, tmp_mov_vec );
-			f = ( ( olsr_con->left_etx + olsr_con->right_etx ) / 4.0 ) / distance;
+			f = (( olsr_con->left_etx + olsr_con->right_etx ) / 4.0 ) / distance;
 			if ( f < 0.3 ) f = 0.3;
 
 			mov_add( olsr_con->left_olsr_node->mov_vec, tmp_mov_vec, 1 / f - 1 );
@@ -440,12 +440,12 @@
 
 				mov_add( tmp_mov_vec, olsr_con->left_olsr_node->mov_vec, 1.0 );
 
-				if ( ( dist( tmp_mov_vec, olsr_con->left_olsr_node->pos_vec ) > 0.75 ) || ( dist( tmp_mov_vec, null_vec ) < 2.0 ) ) {
+				/*if ( ( dist( tmp_mov_vec, olsr_con->left_olsr_node->pos_vec ) > 0.75 ) || ( dist( tmp_mov_vec, null_vec ) < 2.0 ) ) {*/
 
 				mov_add( olsr_con->left_olsr_node->pos_vec, olsr_con->left_olsr_node->mov_vec, 1.0 );
 				s3d_translate( olsr_con->left_olsr_node->obj_id, olsr_con->left_olsr_node->pos_vec[0], olsr_con->left_olsr_node->pos_vec[1], olsr_con->left_olsr_node->pos_vec[2] );
 
-			}
+			/*}*/
 
 			/* reset movement vector */
 			olsr_con->left_olsr_node->mov_vec[0] = olsr_con->left_olsr_node->mov_vec[1] = olsr_con->left_olsr_node->mov_vec[2] = 0.0;
@@ -477,12 +477,12 @@
 
 				mov_add( tmp_mov_vec, olsr_con->right_olsr_node->mov_vec, 1.0 );
 
-				if ( ( dist( tmp_mov_vec, olsr_con->right_olsr_node->pos_vec )> 0.75 ) || ( dist( tmp_mov_vec, null_vec ) < 2.0 ) ) {
+				/*if ( ( dist( tmp_mov_vec, olsr_con->right_olsr_node->pos_vec )> 0.75 ) || ( dist( tmp_mov_vec, null_vec ) < 2.0 ) ) {*/
 
 					mov_add( olsr_con->right_olsr_node->pos_vec, olsr_con->right_olsr_node->mov_vec, 1.0 );
 					s3d_translate( olsr_con->right_olsr_node->obj_id, olsr_con->right_olsr_node->pos_vec[0], olsr_con->right_olsr_node->pos_vec[1], olsr_con->right_olsr_node->pos_vec[2] );
 
-				}
+				/*}*/
 
 			/* reset movement vector */
 			olsr_con->right_olsr_node->mov_vec[0] = olsr_con->right_olsr_node->mov_vec[1] = olsr_con->right_olsr_node->mov_vec[2] = 0.0;
@@ -720,143 +720,6 @@
 	/* printf("%f %f %f\n",inf->trans_x,inf->trans_y,inf->trans_z); */
 }
 
-/***
- *
- * initialize the struct for a linked list obj2ip
- *
- ***/
-
-void lst_initialize() {
-	Obj_to_ip_head = (struct Obj_to_ip*) malloc(sizeof(struct Obj_to_ip));
-	Obj_to_ip_end = (struct Obj_to_ip*) malloc(sizeof(struct Obj_to_ip));
-	if(Obj_to_ip_head == NULL || Obj_to_ip_end == NULL)
-		out_of_mem();
-	Obj_to_ip_head->id = 0;
-	Obj_to_ip_end->id = 0;
-	Obj_to_ip_head->prev = Obj_to_ip_end->prev = Obj_to_ip_head;
-	Obj_to_ip_head->next = Obj_to_ip_end->next = Obj_to_ip_end;
-	List_ptr = Obj_to_ip_head;
-}
-
-/***
- *
- * add a link object_id to olsr_node, to get ip adress and coordinates per object_id
- *                 id => object_id, returned from s3d_clone or s3d_new_object
- *  **olsr_node => pointer to pointer of current olsr_node
- *
- ***/
-
-void lst_add(int id,struct olsr_node **olsr_node) {
-	struct Obj_to_ip *new;
-	new = (struct Obj_to_ip*) malloc(sizeof(struct Obj_to_ip));
-	if(new == NULL)
-		out_of_mem();
-	new->id = id;
-	new->olsr_node = *olsr_node;
-	move_lst_ptr(&id);
-	new->prev = List_ptr;
-	new->next = List_ptr->next;
-	List_ptr->next->prev = new;
-	List_ptr->next = new;
-	/* printf("obj2ip: add object %d between %d .. %d ip %s to list\n",new->id,new->prev->id,new->next->id,new->olsr_node->ip); */
-}
-
-/***
- *void move_lst_ptr(int *id)
- * remove element from obj2ip linked list
- * id => object_id, returned from s3d_clone or s3d_new_object
- *
- ***/
-
-void lst_del(int id) {
-	struct Obj_to_ip *del;
-	move_lst_ptr(&id);
-	if(id != List_ptr->id)
-	{
-		/* printf("obj2ip: remove id %d failed move_lst_ptr return id %d\n",id,List_ptr->next->id); */
-	} else {
-		del = List_ptr;
-		List_ptr->next->prev = List_ptr->prev;
-		List_ptr->prev->next = List_ptr->next;
-		/* printf("obj2ip: remove object %d --> %d <-- %d ip %s from list\n",List_ptr->prev->id,del->id,List_ptr->next->id,del->olsr_node->ip); */
-		free(del);
-	}
-}
-
-/***
- *
- * move the List_ptr one positon ahead the searched element
- *	*id => pointer of object_id , returned from s3d_clone or s3d_new_object
- *
- ***/
-
-void move_lst_ptr(int *id) {
-	/* printf("obj2ip: move for %d\n",*id); */
-	/* head to point at end or id lass then first element in linked list*/
-	if(Obj_to_ip_head->next == Obj_to_ip_head || *id < Obj_to_ip_head->next->id)
-		List_ptr = Obj_to_ip_head;
- 	/* id is greather then last element in linked list */
-	else if(*id > Obj_to_ip_end->prev->id)
-		List_ptr = Obj_to_ip_end->prev;
-	else {
-		/* printf("obj2ip: ok i search deeper ;-) for id=%d\n",*id); */
-		if((*id - (int) Obj_to_ip_head->next->id) <= ((int)(Obj_to_ip_end->prev->id)-*id)) {
-			List_ptr = Obj_to_ip_head;
-			/* printf("obj2ip: start at head id %d - %d <= %d - %d \n",*id,Obj_to_ip_head->next->id,Obj_to_ip_end->prev->id,*id); */
-			while(*id >= List_ptr->next->id) {
-				/* printf("obj2ip: %d > %d move to ",*id,List_ptr->id); */
-				List_ptr = List_ptr->next;
-				/* printf("%d\n",List_ptr->id); */
-			}
-		} else {
-			List_ptr = Obj_to_ip_end;
-			/* printf("obj2ip: start at end id %d - %d > %d - %d \n",*id,Obj_to_ip_head->next->id,Obj_to_ip_end->prev->id,*id);  */
-			/*  do List_ptr = List_ptr->prev; while(*id > List_ptr->prev->id); */
-			while(*id < List_ptr->prev->id) {
-				/* printf("obj2ip: %d < %d move to ",*id,List_ptr->id); */
-				List_ptr = List_ptr->prev;
-				/* printf("%d\n",List_ptr->id); */
-			}
-			List_ptr = List_ptr->prev;
-		}
-		/* printf("obj2ip: found id to insert between %d--> .. <--%d to search/delete %d--> .. <--%d\n",List_ptr->id,List_ptr->next->next->id,List_ptr->prev->id,List_ptr->next->id); */
-	}
-}
-
-/***
- *
- * search a object_id in linked list and return pointer on struct olsr_node
- *	id => object_id , returned from s3d_clone or s3d_new_object
- *
- * <example>
- *     struct olsr_node *olsr_node;
- *     olsr_node = *lst_search(oid);
- *     printf("obj2ip: search return %s\n",olsr_node->ip);
- * </example>
- *
- ***/
-
-struct olsr_node **lst_search(int id) {
-	move_lst_ptr(&id);
-	/* TODO: return NULL when no node found */
-	/* if(id != List_ptr->id) */
-		/* printf("obj2ip: search id....id not found\n"); */
-	/* else */
-		/* printf("obj2ip: search found objekt_id=%d objekt_ip=%s\n",List_ptr->id,List_ptr->olsr_node->ip); */
-	return(&List_ptr->olsr_node);
-}
-
-void lst_out() {
-	struct Obj_to_ip *ptr;
-	ptr = Obj_to_ip_head;
-	while(ptr != ptr->next) {
-		/* printf("List--------------------------\n"); */
-		printf("id-> %d\n",ptr->id);
-		ptr = ptr->next;
-	}
-	/* printf("List--------------------------\n"); */
-}
-
 int main( int argc, char *argv[] ) {
 
 	int optchar;

Modified: trunk/apps/olsrs3d/olsrs3d.h
===================================================================
--- trunk/apps/olsrs3d/olsrs3d.h	2006-03-09 19:00:38 UTC (rev 143)
+++ trunk/apps/olsrs3d/olsrs3d.h	2006-03-09 20:06:37 UTC (rev 144)
@@ -104,15 +104,17 @@
 
 extern char lbuf[MAXLINESIZE];
 /* process */
+void lst_initialize();
+void lst_add(int id,struct olsr_node **olsr_node);
+void lst_del(int id);
+struct olsr_node **lst_search(int id);
+void lst_out();
+void move_lst_ptr(int *id);
 int process_main();
 /* net */
 int net_init(char *host);
 int net_main();
 int net_quit();
-/* main obj2ip list*/
+/* main */
 void out_of_mem( void );
-void lst_add(int id,struct olsr_node **olsr_node);
-void lst_del(int id);
-void lst_out();
-void move_lst_ptr(int *id);
 struct olsr_node **lst_search(int id);

Modified: trunk/apps/olsrs3d/process.c
===================================================================
--- trunk/apps/olsrs3d/process.c	2006-03-09 19:00:38 UTC (rev 143)
+++ trunk/apps/olsrs3d/process.c	2006-03-09 20:06:37 UTC (rev 144)
@@ -220,8 +220,141 @@
 	return(0);
 }
 
+/*
+ *
+ * initialize the struct for a linked list obj2ip
+ *
+ */
 
+void lst_initialize() {
+	Obj_to_ip_head = (struct Obj_to_ip*) malloc(sizeof(struct Obj_to_ip));
+	Obj_to_ip_end = (struct Obj_to_ip*) malloc(sizeof(struct Obj_to_ip));
+	if(Obj_to_ip_head == NULL || Obj_to_ip_end == NULL)
+		out_of_mem();
+	Obj_to_ip_head->id = 0;
+	Obj_to_ip_end->id = 0;
+	Obj_to_ip_head->prev = Obj_to_ip_end->prev = Obj_to_ip_head;
+	Obj_to_ip_head->next = Obj_to_ip_end->next = Obj_to_ip_end;
+	List_ptr = Obj_to_ip_head;
+}
 
+/*
+ *
+ * add a link object_id to olsr_node, to get ip adress and coordinates per object_id
+ *                 id => object_id, returned from s3d_clone or s3d_new_object
+ *  **olsr_node => pointer to pointer of current olsr_node
+ *
+ */
+
+void lst_add(int id,struct olsr_node **olsr_node) {
+	struct Obj_to_ip *new;
+	new = (struct Obj_to_ip*) malloc(sizeof(struct Obj_to_ip));
+	if(new == NULL)
+		out_of_mem();
+	new->id = id;
+	new->olsr_node = *olsr_node;
+	move_lst_ptr(&id);
+	new->prev = List_ptr;
+	new->next = List_ptr->next;
+	List_ptr->next->prev = new;
+	List_ptr->next = new;
+	/* printf("obj2ip: add object %d between %d .. %d ip %s to list\n",new->id,new->prev->id,new->next->id,new->olsr_node->ip); */
+}
+
+/*
+ *void move_lst_ptr(int *id)
+ * remove element from obj2ip linked list
+ * id => object_id, returned from s3d_clone or s3d_new_object
+ *
+ */
+
+void lst_del(int id) {
+	struct Obj_to_ip *del;
+	move_lst_ptr(&id);
+	if(id != List_ptr->id)
+	{
+		printf("obj2ip: remove id %d failed move_lst_ptr return id %d\n",id,List_ptr->next->id);
+	} else {
+		del = List_ptr;
+		List_ptr->next->prev = List_ptr->prev;
+		List_ptr->prev->next = List_ptr->next;
+		/* printf("obj2ip: remove object %d --> %d <-- %d ip %s from list\n",List_ptr->prev->id,del->id,List_ptr->next->id,del->olsr_node->ip); */
+		free(del);
+	}
+}
+
+/*
+ *
+ * move the List_ptr one positon ahead the searched element
+ *	*id => pointer of object_id , returned from s3d_clone or s3d_new_object
+ *
+ */
+
+void move_lst_ptr(int *id) {
+	/* printf("obj2ip: move for %d\n",*id); */
+	/* head to point at end or id lass then first element in linked list*/
+	if(Obj_to_ip_head->next == Obj_to_ip_head || *id < Obj_to_ip_head->next->id)
+		List_ptr = Obj_to_ip_head;
+ 	/* id is greather then last element in linked list */
+	else if(*id > Obj_to_ip_end->prev->id)
+		List_ptr = Obj_to_ip_end->prev;
+	else {
+		/* printf("obj2ip: ok i search deeper ;-) for id=%d\n",*id); */
+		if((*id - (int) Obj_to_ip_head->next->id) <= ((int)(Obj_to_ip_end->prev->id)-*id)) {
+			List_ptr = Obj_to_ip_head;
+			/* printf("obj2ip: start at head id %d - %d <= %d - %d \n",*id,Obj_to_ip_head->next->id,Obj_to_ip_end->prev->id,*id); */
+			while(*id >= List_ptr->next->id) {
+				/* printf("obj2ip: %d > %d move to ",*id,List_ptr->id); */
+				List_ptr = List_ptr->next;
+				/* printf("%d\n",List_ptr->id); */
+			}
+		} else {
+			List_ptr = Obj_to_ip_end;
+			/* printf("obj2ip: start at end id %d - %d > %d - %d \n",*id,Obj_to_ip_head->next->id,Obj_to_ip_end->prev->id,*id);  */
+			/*  do List_ptr = List_ptr->prev; while(*id > List_ptr->prev->id); */
+			while(*id < List_ptr->prev->id) {
+				/* printf("obj2ip: %d < %d move to ",*id,List_ptr->id); */
+				List_ptr = List_ptr->prev;
+				/* printf("%d\n",List_ptr->id); */
+			}
+			List_ptr = List_ptr->prev;
+		}
+		/* printf("obj2ip: found id to insert between %d--> .. <--%d to search/delete %d--> .. <--%d\n",List_ptr->id,List_ptr->next->next->id,List_ptr->prev->id,List_ptr->next->id); */
+	}
+}
+
+/*
+ *
+ * search a object_id in linked list and return pointer on struct olsr_node
+ *	id => object_id , returned from s3d_clone or s3d_new_object
+ *
+ * <example>
+ *     struct olsr_node *olsr_node;
+ *     olsr_node = *lst_search(oid);
+ *     printf("obj2ip: search return %s\n",olsr_node->ip);
+ * </example>
+ *
+ */
+
+struct olsr_node **lst_search(int id) {
+	move_lst_ptr(&id);
+	/* TODO: return NULL when no node found */
+	/* if(id != List_ptr->id) */
+		/* printf("obj2ip: search id....id not found\n"); */
+	/* else */
+		/* printf("obj2ip: search found objekt_id=%d objekt_ip=%s\n",List_ptr->id,List_ptr->olsr_node->ip); */
+	return(&List_ptr->olsr_node);
+}
+
+void lst_out() {
+	struct Obj_to_ip *ptr;
+	ptr = Obj_to_ip_head;
+	while(ptr != ptr->next) {
+		printf("id-> %d\n",ptr->id);
+		ptr = ptr->next;
+	}
+}
+
 int process_main() {
 
 	int dn;
@@ -336,7 +469,7 @@
 
 	}
 
-	if ( last_cr_ptr != NULL ) memmove( lbuf, ++last_cr_ptr, strlen( last_cr_ptr) );
+	if ( last_cr_ptr != NULL ) memmove( lbuf, last_cr_ptr + 1, strlen( last_cr_ptr));
 
 	/* TODO: check this changes as they crash olsrs3d
 	if ( last_cr_ptr != NULL )



From dotslash at berlios.de  Thu Mar  9 23:38:54 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Thu, 9 Mar 2006 23:38:54 +0100
Subject: [S3d-svn] r145 - in trunk: . client
Message-ID: <200603092238.k29Mcs2r020548@sheep.berlios.de>

Author: dotslash
Date: 2006-03-09 23:38:53 +0100 (Thu, 09 Mar 2006)
New Revision: 145

Modified:
   trunk/
   trunk/client/3dsread.c
Log:
 r206 at balthasar:  dotslash | 2006-03-09 23:38:48 +0100
 - absolute paths fix for object search path



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:204
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:206

Modified: trunk/client/3dsread.c
===================================================================
--- trunk/client/3dsread.c	2006-03-09 20:06:37 UTC (rev 144)
+++ trunk/client/3dsread.c	2006-03-09 22:38:53 UTC (rev 145)
@@ -37,7 +37,7 @@
 	char searchpath[1024];
 	char path[1024];
 #ifndef OBJSDIR
-#define OBJSDIR 	"./:../:../../"
+#define OBJSDIR 	"./:../:../../:"
 #endif
 	
 	strncpy(searchpath,OBJSDIR,1023);



From dotslash at berlios.de  Fri Mar 10 19:36:05 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Fri, 10 Mar 2006 19:36:05 +0100
Subject: [S3d-svn] r146 - in trunk: . server
Message-ID: <200603101836.k2AIa5eS001930@sheep.berlios.de>

Author: dotslash
Date: 2006-03-10 19:36:02 +0100 (Fri, 10 Mar 2006)
New Revision: 146

Modified:
   trunk/
   trunk/ChangeLog
   trunk/INSTALL
   trunk/TODO
   trunk/server/event.c
   trunk/server/main.c
Log:
 r209 at balthasar:  dotslash | 2006-03-10 19:35:51 +0100
 - added rc functionality: use /etc/s3drc or ~/.s3drc to
   automatically fire up your mcp or anything you want.
 - sprintf stdio.h header depedency in event.c		  



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:206
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:209

Modified: trunk/ChangeLog
===================================================================
--- trunk/ChangeLog	2006-03-09 22:38:53 UTC (rev 145)
+++ trunk/ChangeLog	2006-03-10 18:36:02 UTC (rev 146)
@@ -1,3 +1,6 @@
+2006-03-10  Simon Wunderlich - <dotslash at packetmixer.de>
+	- added rc functionality: use /etc/s3drc or ~/.s3drc to
+	  automatically fire up your mcp or anything you want.
 2006-03-07  Simon Wunderlich - <dotslash at packetmixer.de>
 	- fixed -O2 problem
 2006-03-03  Simon Wunderlich - <dotslash at packetmixer.de>

Modified: trunk/INSTALL
===================================================================
--- trunk/INSTALL	2006-03-09 22:38:53 UTC (rev 145)
+++ trunk/INSTALL	2006-03-10 18:36:02 UTC (rev 146)
@@ -49,7 +49,7 @@
 after that, go
 
 $ cd server
-$ ./s3d
+$ ./s3d --no-rc
 
 fire up the server. if you're lucky, a window appears.now the s3d is listening 
 on port 6066. 
@@ -71,10 +71,16 @@
 ### 3 Installing
 
 You can use the install target to install s3d into the selected prefix. 
-Currently, you have to install s3d, otherwise the examples will not get built.
 
 $ make install
 
 Depending on the selected prefix, you may need to become superuser first.
 
+### 3.1 The RC
 
+You can automatically fire up the mcp or anything you want with s3d and 
+have it closed when s3d goes down or vice versa:
+
+just create a shellscript at position /etc/s3drc or ~/.s3drc, for example
+have it starting the mcp. Don't forget to toggle it executable (chmod 755 
+or so).

Modified: trunk/TODO
===================================================================
--- trunk/TODO	2006-03-09 22:38:53 UTC (rev 145)
+++ trunk/TODO	2006-03-10 18:36:02 UTC (rev 146)
@@ -2,5 +2,20 @@
 	shmat() return (char *) -1 or NULL?! data_ctos/data_stoc should
 	really not be 0x0
 
-general:
-	start mcp with s3d
+autotools:
+    * weird:
+	...
+	checking for cos in -lm... yes
+	./configure: line 22348: MDL_HAVE_OPENGL: command not found
+	checking for library containing glutInit... -lglut
+	...
+
+	...
+	checking for main in -lXtst... yes
+	./configure: line 23397: HAVE_PTHREAD: command not found
+	configure: creating ./config.status
+	...
+
+    * checking g77 is useless
+	* Apple todo: won't find -lX11 (for s3d_x11gate) while compiling
+	* OBJECTPATH for finding the object?

Modified: trunk/server/event.c
===================================================================
--- trunk/server/event.c	2006-03-09 22:38:53 UTC (rev 145)
+++ trunk/server/event.c	2006-03-10 18:36:02 UTC (rev 146)
@@ -24,6 +24,7 @@
 
 #include "global.h"
 #include "proto.h"
+#include <stdio.h>		/* sprintf() */
 #ifdef WIN32 
 #include <winsock2.h>
 #else

Modified: trunk/server/main.c
===================================================================
--- trunk/server/main.c	2006-03-09 22:38:53 UTC (rev 145)
+++ trunk/server/main.c	2006-03-10 18:36:02 UTC (rev 146)
@@ -37,7 +37,13 @@
 #endif
 #include <errno.h>		 /*  errno() */
 int frame_mode=0;
+int kidpid=0;
+int norc=0;
 int running;
+static char *rc=NULL;
+static char *homerc="~/.s3drc";
+static char *etcrc ="/etc/s3drc";
+char **s3drc[]={&rc,&homerc,&etcrc};
 
 static void mainloop(void);
 #ifdef SIGS
@@ -47,7 +53,55 @@
 	dprintf(HIGH,"oh my gosh there is a sigint/term signal! running away ...");
 	quit();
 }
+void sigchld_handler(int sig)
+{
+	if (kidpid!=0)
+	{
+		kidpid=0;
+	    dprintf(HIGH,"how cruel, my kid died!!");
+		quit();
+	}
+}
 #endif
+int rc_init()
+{
+	int ret,i;
+	if (signal(SIGCHLD, sigchld_handler) == SIG_ERR);
+	kidpid=fork();
+	running=1;
+	if (kidpid==-1)
+	{
+		errsf("rc_init()","*sobsob*, can't fork");
+		exit(1);
+	}
+	if (kidpid==0)
+	{
+		sleep(1); /* giving the father lots of time to set his signal handler
+					 and all his sockets up */
+		dprintf(VHIGH,"hello, i'm the kid and will start the rc file now!");
+		for (i=0;i<(sizeof(s3drc)/sizeof(char **));i++)
+		{
+			if ((*s3drc[i])!=NULL)
+			{
+				dprintf(LOW,"[RC] launching %s",*s3drc[i]);
+				ret=system(*s3drc[i]);
+				dprintf(LOW,"[RC] system() said %d",ret);
+				if (ret<128) 
+				{
+					dprintf(LOW,"[RC] system() did well, I guess.");
+					exit(0);
+				}
+			} 
+		}
+		errs("rc_init()", "no usuable rc script found.");
+		errsf("rc_init()","You don't have an rc-script? create one (~/.s3drc) or use --no-rc !");
+		exit(1);
+	} else {
+		/* father just returns */
+	}		
+	return(0);
+
+}
 /*  the mainloop, should be handling all signals */
 static void mainloop(void) 
 {
@@ -69,6 +123,8 @@
 /*  this initalizes all components.  */
 int init() 
 {
+	if (!norc)
+		rc_init();
 	if (!frame_mode)  /*  turn default frame_mode on */
 	{
 #ifdef G_GLUT
@@ -101,10 +157,19 @@
 /*  things to be cleaned up  */
 int quit()
 {
-	user_quit();
-	network_quit();
-	graphics_quit();
-	process_quit();
+	if (running!=0)
+	{
+		user_quit();
+		network_quit();
+		graphics_quit();
+		process_quit();
+		if (kidpid!=0)
+		{ /* our kid is most probably still alive. kill it!! */
+			dprintf(HIGH,"kill all the kids!!");
+			kill(kidpid,SIGTERM);
+			kidpid=0;
+		}
+	}
 	running=0;
 	dprintf(VHIGH,"byebye, s3d quitting ...");
 	exit(0);
@@ -120,6 +185,8 @@
 		{"help",0,0,'h'},
 		{"use-glut",0,0,'g'},
 		{"use-sdl",0,0,'s'},
+		{"rc",1,0,'r'},
+		{"no-rc",0,0,'n'},
 		{0,0,0,0}
 	};
 	while (-1!=(c=getopt_long(argc,argv,"?hgs",long_options,&lopt_idx)))
@@ -141,6 +208,15 @@
 					errs("process_args()","sorry, SDL is not available");
 #endif					
 					break;
+				case 'r':
+					dprintf(VHIGH,"using rc file: %s",optarg);
+					rc=optarg;
+					break;
+				case 'n':
+					dprintf(VHIGH,"Using no rc file!");
+					norc=1;
+					break;
+
 				case '?':
 				case 'h':
 					dprintf(VHIGH,"usage: %s [options]",argv[0]);



From dotslash at berlios.de  Fri Mar 10 19:44:58 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Fri, 10 Mar 2006 19:44:58 +0100
Subject: [S3d-svn] r147 - in trunk: . server
Message-ID: <200603101844.k2AIiwjv005635@sheep.berlios.de>

Author: dotslash
Date: 2006-03-10 19:44:39 +0100 (Fri, 10 Mar 2006)
New Revision: 147

Modified:
   trunk/
   trunk/server/global.h
   trunk/server/main.c
Log:
 r211 at balthasar:  dotslash | 2006-03-10 19:44:33 +0100
 - properly checking for SIGS



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:209
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:211

Modified: trunk/server/global.h
===================================================================
--- trunk/server/global.h	2006-03-10 18:36:02 UTC (rev 146)
+++ trunk/server/global.h	2006-03-10 18:44:39 UTC (rev 147)
@@ -192,6 +192,7 @@
 	FRAME_SDL
 };
 /*  main.c */
+int rc_init(void);
 int init(void);
 int quit(void);
 void one_time(void);

Modified: trunk/server/main.c
===================================================================
--- trunk/server/main.c	2006-03-10 18:36:02 UTC (rev 146)
+++ trunk/server/main.c	2006-03-10 18:44:39 UTC (rev 147)
@@ -63,8 +63,9 @@
 	}
 }
 #endif
-int rc_init()
+int rc_init(void)
 {
+#ifdef SIGS
 	int ret,i;
 	if (signal(SIGCHLD, sigchld_handler) == SIG_ERR);
 	kidpid=fork();
@@ -98,9 +99,9 @@
 		exit(1);
 	} else {
 		/* father just returns */
-	}		
+	}	
+#endif
 	return(0);
-
 }
 /*  the mainloop, should be handling all signals */
 static void mainloop(void) 
@@ -123,8 +124,12 @@
 /*  this initalizes all components.  */
 int init() 
 {
+#ifdef SIGS
 	if (!norc)
 		rc_init();
+#else
+	dprintf(VHIGH,"rc-files won't work without signals :(");
+#endif
 	if (!frame_mode)  /*  turn default frame_mode on */
 	{
 #ifdef G_GLUT



From dotslash at berlios.de  Sat Mar 11 20:02:18 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Sat, 11 Mar 2006 20:02:18 +0100
Subject: [S3d-svn] r148 - in trunk: . server
Message-ID: <200603111902.k2BJ2IpW003109@sheep.berlios.de>

Author: dotslash
Date: 2006-03-11 20:02:14 +0100 (Sat, 11 Mar 2006)
New Revision: 148

Modified:
   trunk/
   trunk/server/main.c
Log:
 r213 at balthasar:  dotslash | 2006-03-11 20:02:01 +0100
 - getopts forgot -r and -n in getopt



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:211
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:213

Modified: trunk/server/main.c
===================================================================
--- trunk/server/main.c	2006-03-10 18:44:39 UTC (rev 147)
+++ trunk/server/main.c	2006-03-11 19:02:14 UTC (rev 148)
@@ -194,7 +194,7 @@
 		{"no-rc",0,0,'n'},
 		{0,0,0,0}
 	};
-	while (-1!=(c=getopt_long(argc,argv,"?hgs",long_options,&lopt_idx)))
+	while (-1!=(c=getopt_long(argc,argv,"?hgsrn",long_options,&lopt_idx)))
 	{
 		switch (c)
 		{
@@ -203,14 +203,14 @@
 #ifdef G_GLUT
 					frame_mode=FRAME_GLUT;
 #else
-					errs("process_args()","sorry, GLUT is not available");
+					errsf("process_args()","sorry, GLUT is not available");
 #endif
 					break;
 				case 's':
 #ifdef G_SDL
 					frame_mode=FRAME_SDL;
 #else
-					errs("process_args()","sorry, SDL is not available");
+					errsf("process_args()","sorry, SDL is not available");
 #endif					
 					break;
 				case 'r':



From nichtsnutz at berlios.de  Sun Mar 12 16:37:56 2006
From: nichtsnutz at berlios.de (nichtsnutz at BerliOS)
Date: Sun, 12 Mar 2006 16:37:56 +0100
Subject: [S3d-svn] r149 - trunk/apps/olsrs3d
Message-ID: <200603121537.k2CFbuvK005273@sheep.berlios.de>

Author: nichtsnutz
Date: 2006-03-12 16:37:48 +0100 (Sun, 12 Mar 2006)
New Revision: 149

Modified:
   trunk/apps/olsrs3d/main.c
   trunk/apps/olsrs3d/process.c
Log:
play with cam, arrow up / down, strg + p
set last_seen to 100  

Modified: trunk/apps/olsrs3d/main.c
===================================================================
--- trunk/apps/olsrs3d/main.c	2006-03-11 19:02:14 UTC (rev 148)
+++ trunk/apps/olsrs3d/main.c	2006-03-12 15:37:48 UTC (rev 149)
@@ -494,15 +494,15 @@
 		s3d_pop_vertex( olsr_con->obj_id, 6 );
 		s3d_pop_polygon( olsr_con->obj_id, 2 );
 		s3d_pop_material( olsr_con->obj_id, 1 );
+		
+		s3d_push_vertex( olsr_con->obj_id, olsr_con->left_olsr_node->pos_vec[0] , olsr_con->left_olsr_node->pos_vec[1] , olsr_con->left_olsr_node->pos_vec[2] );
+		s3d_push_vertex( olsr_con->obj_id, olsr_con->left_olsr_node->pos_vec[0] + 0.2 , olsr_con->left_olsr_node->pos_vec[1] , olsr_con->left_olsr_node->pos_vec[2] );
+		s3d_push_vertex( olsr_con->obj_id, olsr_con->left_olsr_node->pos_vec[0] - 0.2 , olsr_con->left_olsr_node->pos_vec[1] , olsr_con->left_olsr_node->pos_vec[2] );
 
-		s3d_push_vertex( olsr_con->obj_id, olsr_con->left_olsr_node->pos_vec[0] + ZeroPosition[0], olsr_con->left_olsr_node->pos_vec[1] + ZeroPosition[1], olsr_con->left_olsr_node->pos_vec[2] + ZeroPosition[2] );
-		s3d_push_vertex( olsr_con->obj_id, olsr_con->left_olsr_node->pos_vec[0] + 0.2 + ZeroPosition[0], olsr_con->left_olsr_node->pos_vec[1] + ZeroPosition[1], olsr_con->left_olsr_node->pos_vec[2] + ZeroPosition[2] );
-		s3d_push_vertex( olsr_con->obj_id, olsr_con->left_olsr_node->pos_vec[0] - 0.2 + ZeroPosition[0], olsr_con->left_olsr_node->pos_vec[1] + ZeroPosition[1], olsr_con->left_olsr_node->pos_vec[2] + ZeroPosition[2] );
-
-		s3d_push_vertex( olsr_con->obj_id, olsr_con->right_olsr_node->pos_vec[0] + ZeroPosition[0], olsr_con->right_olsr_node->pos_vec[1]+ ZeroPosition[1], olsr_con->right_olsr_node->pos_vec[2] + ZeroPosition[2] );
-		s3d_push_vertex( olsr_con->obj_id, olsr_con->right_olsr_node->pos_vec[0] + ZeroPosition[0], olsr_con->right_olsr_node->pos_vec[1]+ 0.2 + ZeroPosition[1], olsr_con->right_olsr_node->pos_vec[2] + ZeroPosition[2] );
-		s3d_push_vertex( olsr_con->obj_id, olsr_con->right_olsr_node->pos_vec[0] + ZeroPosition[0], olsr_con->right_olsr_node->pos_vec[1]- 0.2 + ZeroPosition[1], olsr_con->right_olsr_node->pos_vec[2] + ZeroPosition[2] );
-
+		s3d_push_vertex( olsr_con->obj_id, olsr_con->right_olsr_node->pos_vec[0] , olsr_con->right_olsr_node->pos_vec[1] , olsr_con->right_olsr_node->pos_vec[2] );
+		s3d_push_vertex( olsr_con->obj_id, olsr_con->right_olsr_node->pos_vec[0] , olsr_con->right_olsr_node->pos_vec[1]+ 0.2 , olsr_con->right_olsr_node->pos_vec[2] );
+		s3d_push_vertex( olsr_con->obj_id, olsr_con->right_olsr_node->pos_vec[0] , olsr_con->right_olsr_node->pos_vec[1]- 0.2 , olsr_con->right_olsr_node->pos_vec[2] );
+		
 		if ( ColorSwitch ) {
 
 			/* HNA */
@@ -657,8 +657,17 @@
 				RotateSpeed--;
 			break;
 		case 16: /* strg + p */
-			s3d_translate(0,0.0,0.0,0.0);
+			s3d_translate(ZeroPoint,0.0,0.0,0.0);
+			ZeroPosition[0] = ZeroPosition[1] = ZeroPosition[2] = 0.0; 
 			break;
+		case 101: /* arrow up */
+			ZeroPosition[1]++;
+			s3d_translate(ZeroPoint,ZeroPosition[0],ZeroPosition[1],ZeroPosition[2]);
+			break;
+		case 103: /* arrow down */
+			ZeroPosition[1]--;
+			s3d_translate(ZeroPoint,ZeroPosition[0],ZeroPosition[1],ZeroPosition[2]);
+			break;
 	}
 }
 
@@ -673,17 +682,14 @@
 	int oid;
 	float distance,tmp_vector[3];
 	oid=(int)*((unsigned long *)evt->buf);
-	/*s3d_translate(ZeroPoint,0,50,40);
-	ZeroPosition[0] = 0;
-	ZeroPosition[1] = 50;
-	ZeroPosition[2] = 40;*/
 	struct olsr_node *olsr_node;
 	olsr_node = *lst_search(oid);
 	/* printf("obj2ip: search return %s\n",olsr_node->ip); */
-
-	distance = dirt(olsr_node->pos_vec,CamPosition[0],tmp_vector);
+	/*
+	distance = dirt(CamPosition[0],olsr_node->pos_vec,tmp_vector);
 	mov_add(ZeroPosition,tmp_vector,1.0);
-	s3d_translate(ZeroPoint,ZeroPosition[0],ZeroPosition[1],ZeroPosition[2]);
+	s3d_translate(ZeroPoint,ZeroPosition[0] * -1,ZeroPosition[1] * -1,ZeroPosition[2] * -1);
+	*/
 }
 
 /***

Modified: trunk/apps/olsrs3d/process.c
===================================================================
--- trunk/apps/olsrs3d/process.c	2006-03-11 19:02:14 UTC (rev 148)
+++ trunk/apps/olsrs3d/process.c	2006-03-12 15:37:48 UTC (rev 149)
@@ -153,7 +153,7 @@
 		/* we found the node */
 		if ( result == 0 ) {
 
-			(*olsr_node)->last_seen = 50;
+			(*olsr_node)->last_seen = 100;
 
 			/* former invisble (deleted) node */
 			if ( (*olsr_node)->visible == 0 ) {
@@ -198,7 +198,7 @@
 		(*olsr_node)->node_type = 0;
 		(*olsr_node)->node_type_modified = 1;
 
-		(*olsr_node)->last_seen = 50;
+		(*olsr_node)->last_seen = 100;
 		(*olsr_node)->visible = 1;
 
 		if ( Debug ) printf( "new olsr node: %s\n", (*olsr_node)->ip );



From marec at berlios.de  Mon Mar 13 17:33:40 2006
From: marec at berlios.de (marec at BerliOS)
Date: Mon, 13 Mar 2006 17:33:40 +0100
Subject: [S3d-svn] r150 - trunk/apps/olsrs3d
Message-ID: <200603131633.k2DGXexb017565@sheep.berlios.de>

Author: marec
Date: 2006-03-13 17:33:39 +0100 (Mon, 13 Mar 2006)
New Revision: 150

Modified:
   trunk/apps/olsrs3d/main.c
   trunk/apps/olsrs3d/net.c
   trunk/apps/olsrs3d/olsrs3d.h
   trunk/apps/olsrs3d/process.c
Log:
new color scheme for olsrs3d

Modified: trunk/apps/olsrs3d/main.c
===================================================================
--- trunk/apps/olsrs3d/main.c	2006-03-12 15:37:48 UTC (rev 149)
+++ trunk/apps/olsrs3d/main.c	2006-03-13 16:33:39 UTC (rev 150)
@@ -46,7 +46,7 @@
 int Olsr_node_count = 0, Last_olsr_node_count = -1;
 int Olsr_node_count_obj = -1;
 
-int Byte_count;
+int Net_read_count;
 
 int Olsr_node_obj, Olsr_node_inet_obj, Olsr_node_hna_net;
 
@@ -386,6 +386,7 @@
 			distance = dirt( olsr_con->left_olsr_node->pos_vec, olsr_con->right_olsr_node->pos_vec, tmp_mov_vec );
 			f = (( olsr_con->left_etx + olsr_con->right_etx ) / 4.0 ) / distance;
 			if ( f < 0.3 ) f = 0.3;
+// 			if ( f < 0.9 ) f = 0.9;
 
 			mov_add( olsr_con->left_olsr_node->mov_vec, tmp_mov_vec, 1 / f - 1 );
 			mov_add( olsr_con->right_olsr_node->mov_vec, tmp_mov_vec, - ( 1 / f - 1 ) );
@@ -410,7 +411,7 @@
 
 	float null_vec[3] = {0,0,0};
 	float tmp_mov_vec[3];
-	float distance, factor, etx, rgb;
+	float distance, factor, etx, rgb, rgb2;
 	struct olsr_con *olsr_con = Con_begin;
 
 	while ( olsr_con != NULL ) {
@@ -494,7 +495,7 @@
 		s3d_pop_vertex( olsr_con->obj_id, 6 );
 		s3d_pop_polygon( olsr_con->obj_id, 2 );
 		s3d_pop_material( olsr_con->obj_id, 1 );
-		
+
 		s3d_push_vertex( olsr_con->obj_id, olsr_con->left_olsr_node->pos_vec[0] , olsr_con->left_olsr_node->pos_vec[1] , olsr_con->left_olsr_node->pos_vec[2] );
 		s3d_push_vertex( olsr_con->obj_id, olsr_con->left_olsr_node->pos_vec[0] + 0.2 , olsr_con->left_olsr_node->pos_vec[1] , olsr_con->left_olsr_node->pos_vec[2] );
 		s3d_push_vertex( olsr_con->obj_id, olsr_con->left_olsr_node->pos_vec[0] - 0.2 , olsr_con->left_olsr_node->pos_vec[1] , olsr_con->left_olsr_node->pos_vec[2] );
@@ -502,7 +503,7 @@
 		s3d_push_vertex( olsr_con->obj_id, olsr_con->right_olsr_node->pos_vec[0] , olsr_con->right_olsr_node->pos_vec[1] , olsr_con->right_olsr_node->pos_vec[2] );
 		s3d_push_vertex( olsr_con->obj_id, olsr_con->right_olsr_node->pos_vec[0] , olsr_con->right_olsr_node->pos_vec[1]+ 0.2 , olsr_con->right_olsr_node->pos_vec[2] );
 		s3d_push_vertex( olsr_con->obj_id, olsr_con->right_olsr_node->pos_vec[0] , olsr_con->right_olsr_node->pos_vec[1]- 0.2 , olsr_con->right_olsr_node->pos_vec[2] );
-		
+
 		if ( ColorSwitch ) {
 
 			/* HNA */
@@ -517,28 +518,59 @@
 
 				etx = ( ( ( olsr_con->left_etx + olsr_con->right_etx ) / 2.0 ) - 10.0 ) * 10.0;
 
-				if ( ( etx >= 1.0 ) && ( etx < 2.0 ) ) {
+				/* very good link - bright blue */
+				if ( ( etx >= 1.0 ) && ( etx < 1.5 ) ) {
 
-					rgb = etx - 1.0;
 					s3d_push_material( olsr_con->obj_id,
-								rgb,1.0,0.0,
-								rgb,1.0,0.0,
-								rgb,1.0,0.0);
+							0.5,1.0,1.0,
+							0.5,1.0,1.0,
+							0.5,1.0,1.0);
 
+				/* good link - bright yellow */
+				} else if ( ( etx >= 1.5 ) && ( etx < 2.0 ) ) {
+
+					rgb = 2.0 - etx;
+					s3d_push_material( olsr_con->obj_id,
+							1.0,1.0,rgb,
+							1.0,1.0,rgb,
+							1.0,1.0,rgb);
+
+				/* not so good link - orange */
 				} else if ( ( etx >= 2.0 ) && ( etx < 3.0 ) ) {
 
-					rgb = 3.0 - etx;
+					rgb = 1.5 - ( etx / 2.0 );
 					s3d_push_material( olsr_con->obj_id,
-								1.0,rgb,0.0,
-								1.0,rgb,0.0,
-								1.0,rgb,0.0);
+							1.0,rgb,0.0,
+							1.0,rgb,0.0,
+							1.0,rgb,0.0);
 
+				/* bad link (almost dead) - brown */
+				} else if ( ( etx >= 3.0 ) && ( etx < 5.0 ) ) {
+
+					rgb = 1.75 - ( etx / 4.0 );
+					rgb2 = 1.25 - ( etx / 4.0 );
+					s3d_push_material( olsr_con->obj_id,
+							rgb,rgb2,0.0,
+							rgb,rgb2,0.0,
+							rgb,rgb2,0.0);
+
+				/* zombie link - grey */
+				} else if ( ( etx >= 5.0 ) && ( etx < 1000.0 ) ) {
+
+					rgb = 1000.0 / ( 1500.0 + etx );
+
+					s3d_push_material( olsr_con->obj_id,
+							rgb,rgb,rgb,
+							rgb,rgb,rgb,
+							rgb,rgb,rgb);
+
+				/* wtf - dark grey */
 				} else {
 
 					s3d_push_material( olsr_con->obj_id,
-								1.0,0.0,0.0,
-								1.0,0.0,0.0,
-								1.0,0.0,0.0);
+							0.6,0.6,0.6,
+							0.6,0.6,0.6,
+							0.6,0.6,0.6);
 
 				}
 
@@ -594,7 +626,7 @@
 	}
 
 	/* read data from socket */
-	Byte_count = 0;
+	Net_read_count = 0;
 	while ( ( net_result = net_main() ) != 0 ) {
 		if ( net_result == -1 ) {
 			s3d_quit();
@@ -658,7 +690,7 @@
 			break;
 		case 16: /* strg + p */
 			s3d_translate(ZeroPoint,0.0,0.0,0.0);
-			ZeroPosition[0] = ZeroPosition[1] = ZeroPosition[2] = 0.0; 
+			ZeroPosition[0] = ZeroPosition[1] = ZeroPosition[2] = 0.0;
 			break;
 		case 101: /* arrow up */
 			ZeroPosition[1]++;

Modified: trunk/apps/olsrs3d/net.c
===================================================================
--- trunk/apps/olsrs3d/net.c	2006-03-12 15:37:48 UTC (rev 149)
+++ trunk/apps/olsrs3d/net.c	2006-03-13 16:33:39 UTC (rev 150)
@@ -27,7 +27,7 @@
 
 #include <stdio.h>
 #include <stdlib.h>
-#include <unistd.h>
+#include <unistd.h>	/* usleep() */
 #include <errno.h>
 #include <string.h> 	/* strlen(), memmove(), strncpy(), strncat() */
 #include <netdb.h>
@@ -111,9 +111,10 @@
 
 	process_main();
 
-	if ( ( Byte_count += numbytes ) > 1000 ) {
+	if ( ++Net_read_count > 5 ) {
 		return(0);   /* continue mainloop */
 	} else {
+		/* usleep(5000); */
 		return(1);   /* continue reading data from socket */
 	}
 

Modified: trunk/apps/olsrs3d/olsrs3d.h
===================================================================
--- trunk/apps/olsrs3d/olsrs3d.h	2006-03-12 15:37:48 UTC (rev 149)
+++ trunk/apps/olsrs3d/olsrs3d.h	2006-03-13 16:33:39 UTC (rev 150)
@@ -96,7 +96,7 @@
 extern int Olsr_node_count;
 extern int Last_olsr_node_count;
 
-extern int Byte_count;
+extern int Net_read_count;
 
 extern int ZeroPoint;
 

Modified: trunk/apps/olsrs3d/process.c
===================================================================
--- trunk/apps/olsrs3d/process.c	2006-03-12 15:37:48 UTC (rev 149)
+++ trunk/apps/olsrs3d/process.c	2006-03-13 16:33:39 UTC (rev 150)
@@ -442,7 +442,7 @@
 							if ( Debug ) printf( "new hna network: %s\n", olsr_node2->ip );
 
 						}
-						if(olsr_node1->visible && olsr_node2->visible)
+						if ( olsr_node1->visible && olsr_node2->visible )
 							add_olsr_con( olsr_node1, olsr_node2, -1000.00 );
 
 					}
@@ -469,17 +469,8 @@
 
 	}
 
-	if ( last_cr_ptr != NULL ) memmove( lbuf, last_cr_ptr + 1, strlen( last_cr_ptr));
+	if ( last_cr_ptr != NULL ) memmove( lbuf, last_cr_ptr + 1, strlen( last_cr_ptr ) );
 
-	/* TODO: check this changes as they crash olsrs3d
-	if ( last_cr_ptr != NULL )
-	{*/
-		/* memmove( lbuf, ++last_cr_ptr, strlen( last_cr_ptr) ); */
-		/* TODO: please check this process.c:339: warning: operation on `last_cr_ptr' may be undefined, i've changed it like this: */
-		/*last_cr_ptr++;
-		memmove( lbuf, last_cr_ptr, strlen( last_cr_ptr) );
-	}*/
-
 	return(0);
 
 }



From nichtsnutz at berlios.de  Mon Mar 13 17:38:07 2006
From: nichtsnutz at berlios.de (nichtsnutz at BerliOS)
Date: Mon, 13 Mar 2006 17:38:07 +0100
Subject: [S3d-svn] r151 - trunk/apps/olsrs3d
Message-ID: <200603131638.k2DGc7ip018160@sheep.berlios.de>

Author: nichtsnutz
Date: 2006-03-13 17:38:02 +0100 (Mon, 13 Mar 2006)
New Revision: 151

Modified:
   trunk/apps/olsrs3d/main.c
   trunk/apps/olsrs3d/process.c
Log:
eleminate jumps of olsr nodes / key pg up/ pg down to demonstrate
print ip on the left when node clicked

Modified: trunk/apps/olsrs3d/main.c
===================================================================
--- trunk/apps/olsrs3d/main.c	2006-03-13 16:33:39 UTC (rev 150)
+++ trunk/apps/olsrs3d/main.c	2006-03-13 16:38:02 UTC (rev 151)
@@ -45,7 +45,7 @@
 
 int Olsr_node_count = 0, Last_olsr_node_count = -1;
 int Olsr_node_count_obj = -1;
-
+int Olsr_ip_label_obj = -1;
 int Net_read_count;
 
 int Olsr_node_obj, Olsr_node_inet_obj, Olsr_node_hna_net;
@@ -61,8 +61,8 @@
 int ColorSwitch = 0;   /* enable/disable colored olsr connections */
 int RotateSwitch = 0;
 int RotateSpeed = 2;
+float factor = 0.5;	/* factor in calc_olsr_node_mov */
 
-
 /***
  *
  * print usage info
@@ -375,8 +375,9 @@
 
 void calc_olsr_node_mov( void ) {
 
-	float f, distance;
+	float distance;
 	float tmp_mov_vec[3];
+	float f;
 	struct olsr_con *olsr_con = Con_begin;
 
 	while ( olsr_con != NULL ) {
@@ -384,8 +385,8 @@
 		if ( ( olsr_con->left_etx != 0.0 ) && ( olsr_con->right_etx != 0.0  ) ) {
 
 			distance = dirt( olsr_con->left_olsr_node->pos_vec, olsr_con->right_olsr_node->pos_vec, tmp_mov_vec );
-			f = (( olsr_con->left_etx + olsr_con->right_etx ) / 4.0 ) / distance;
-			if ( f < 0.3 ) f = 0.3;
+			f = (( olsr_con->left_etx + olsr_con->right_etx ) / 4.0) / distance;
+			if ( f < factor ) f = factor;
 // 			if ( f < 0.9 ) f = 0.9;
 
 			mov_add( olsr_con->left_olsr_node->mov_vec, tmp_mov_vec, 1 / f - 1 );
@@ -700,6 +701,16 @@
 			ZeroPosition[1]--;
 			s3d_translate(ZeroPoint,ZeroPosition[0],ZeroPosition[1],ZeroPosition[2]);
 			break;
+		case 104: /* page up / change factor in calc_olsr_node_mov */
+			if(factor < 0.9)
+				factor += 0.1;
+			printf("factor = %f\n",factor);
+			break;
+		case 105: /* page down / change factor in calc_olsr_node_mov */
+			if(factor > 0.3)
+				factor -= 0.1;
+			printf("factor = %f\n",factor);
+			break;
 	}
 }
 
@@ -713,6 +724,7 @@
 {
 	int oid;
 	float distance,tmp_vector[3];
+	char ip_str[50];
 	oid=(int)*((unsigned long *)evt->buf);
 	struct olsr_node *olsr_node;
 	olsr_node = *lst_search(oid);
@@ -722,6 +734,14 @@
 	mov_add(ZeroPosition,tmp_vector,1.0);
 	s3d_translate(ZeroPoint,ZeroPosition[0] * -1,ZeroPosition[1] * -1,ZeroPosition[2] * -1);
 	*/
+	if ( Olsr_ip_label_obj != -1 ) s3d_del_object( Olsr_ip_label_obj );
+	/*Olsr_ip_label_obj = s3d_clone(olsr_node->desc_id);*/
+	snprintf( ip_str, 50, "ip: %s", olsr_node->ip );
+	Olsr_ip_label_obj = s3d_draw_string( ip_str, NULL );
+	s3d_link( Olsr_ip_label_obj, 0 );
+	s3d_flags_on( Olsr_ip_label_obj, S3D_OF_VISIBLE );
+	s3d_scale( Olsr_ip_label_obj, 0.2 );
+	s3d_translate( Olsr_ip_label_obj, Left*3.0, -Bottom*3.0-0.6, -3.0 );
 }
 
 /***

Modified: trunk/apps/olsrs3d/process.c
===================================================================
--- trunk/apps/olsrs3d/process.c	2006-03-13 16:33:39 UTC (rev 150)
+++ trunk/apps/olsrs3d/process.c	2006-03-13 16:38:02 UTC (rev 151)
@@ -46,7 +46,6 @@
  ***/
 
 int add_olsr_con( struct olsr_node *con_from, struct olsr_node *con_to, float etx ) {
-
 	struct olsr_con **olsr_con = &Con_begin;
 	struct olsr_con *prev_olsr_con = NULL;   /* previous olsr connection */
 
@@ -452,9 +451,10 @@
 
 					olsr_node1 = get_olsr_node( &Olsr_root, con_from );
 					olsr_node2 = get_olsr_node( &Olsr_root, con_to );
-					f=10.0+strtod(etx,NULL)/10.0;
-					if ( f >= 5 ) add_olsr_con( olsr_node1, olsr_node2, f );   /* just to prevent ascii to float converting inconsistency ... */
-
+					f = strtod(etx,NULL); 
+					if ( f < 1 )
+						f = 999;
+					add_olsr_con( olsr_node1, olsr_node2, f );   /* just to prevent ascii to float converting inconsistency ... */
 				}
 
 				con_from = con_from_end = con_to = con_to_end = etx = etx_end = NULL;



From nichtsnutz at berlios.de  Mon Mar 13 17:50:52 2006
From: nichtsnutz at berlios.de (nichtsnutz at BerliOS)
Date: Mon, 13 Mar 2006 17:50:52 +0100
Subject: [S3d-svn] r152 - trunk/apps/olsrs3d
Message-ID: <200603131650.k2DGoqYg019874@sheep.berlios.de>

Author: nichtsnutz
Date: 2006-03-13 17:50:51 +0100 (Mon, 13 Mar 2006)
New Revision: 152

Modified:
   trunk/apps/olsrs3d/main.c
Log:
add comments for key events
remove printf for factor

Modified: trunk/apps/olsrs3d/main.c
===================================================================
--- trunk/apps/olsrs3d/main.c	2006-03-13 16:38:02 UTC (rev 151)
+++ trunk/apps/olsrs3d/main.c	2006-03-13 16:50:51 UTC (rev 152)
@@ -667,49 +667,47 @@
 	int key;
 	key=*((unsigned short *)event->buf);
 	switch(key) {
-		case 27: /* esc */
+		case 27: /* esc -> close olsr */
 			stop();
 			break;
 		case 15: /* strg + o */
 			lst_out(); /* output ob2ip list */
 			break;
-		case 99: /* c */
+		case 99: /* c -> color on off*/
 			if(ColorSwitch) ColorSwitch = 0;
 			else ColorSwitch = 1;
 			break;
-		case 114: /* r */
+		case 114: /* r -> rotate start/stop*/
 			if(RotateSwitch) RotateSwitch = 0;
 			else RotateSwitch = 1;
 			break;
-		case 43: /* + */
+		case 43: /* + -> rotate speed increase*/
 			if(RotateSwitch && RotateSpeed < 10)
 				RotateSpeed++;
 			break;
-		case 45: /* - */
+		case 45: /* - -> rotate speed decrease*/
 			if(RotateSwitch && RotateSpeed > 1)
 				RotateSpeed--;
 			break;
-		case 16: /* strg + p */
+		case 16: /* strg + p / reset nodes ( zeroPoint to 0,0,0 ) */
 			s3d_translate(ZeroPoint,0.0,0.0,0.0);
 			ZeroPosition[0] = ZeroPosition[1] = ZeroPosition[2] = 0.0;
 			break;
-		case 101: /* arrow up */
+		case 101: /* arrow up / move nodes up */
 			ZeroPosition[1]++;
 			s3d_translate(ZeroPoint,ZeroPosition[0],ZeroPosition[1],ZeroPosition[2]);
 			break;
-		case 103: /* arrow down */
+		case 103: /* arrow down / move nodes down */
 			ZeroPosition[1]--;
 			s3d_translate(ZeroPoint,ZeroPosition[0],ZeroPosition[1],ZeroPosition[2]);
 			break;
 		case 104: /* page up / change factor in calc_olsr_node_mov */
 			if(factor < 0.9)
 				factor += 0.1;
-			printf("factor = %f\n",factor);
 			break;
 		case 105: /* page down / change factor in calc_olsr_node_mov */
 			if(factor > 0.3)
 				factor -= 0.1;
-			printf("factor = %f\n",factor);
 			break;
 	}
 }



From marec at berlios.de  Mon Mar 13 17:54:05 2006
From: marec at berlios.de (marec at BerliOS)
Date: Mon, 13 Mar 2006 17:54:05 +0100
Subject: [S3d-svn] r153 - trunk/apps/olsrs3d
Message-ID: <200603131654.k2DGs5xv020439@sheep.berlios.de>

Author: marec
Date: 2006-03-13 17:54:00 +0100 (Mon, 13 Mar 2006)
New Revision: 153

Modified:
   trunk/apps/olsrs3d/main.c
Log:
fix color calculation bug

Modified: trunk/apps/olsrs3d/main.c
===================================================================
--- trunk/apps/olsrs3d/main.c	2006-03-13 16:50:51 UTC (rev 152)
+++ trunk/apps/olsrs3d/main.c	2006-03-13 16:54:00 UTC (rev 153)
@@ -517,7 +517,7 @@
 
 			} else {
 
-				etx = ( ( ( olsr_con->left_etx + olsr_con->right_etx ) / 2.0 ) - 10.0 ) * 10.0;
+				etx = ( olsr_con->left_etx + olsr_con->right_etx ) / 2.0;
 
 				/* very good link - bright blue */
 				if ( ( etx >= 1.0 ) && ( etx < 1.5 ) ) {
@@ -569,9 +569,9 @@
 				} else {
 
 					s3d_push_material( olsr_con->obj_id,
-							0.6,0.6,0.6,
-							0.6,0.6,0.6,
-							0.6,0.6,0.6);
+							0.3,0.3,0.3,
+							0.3,0.3,0.3,
+							0.3,0.3,0.3);
 
 				}
 



From marec at berlios.de  Mon Mar 13 18:38:43 2006
From: marec at berlios.de (marec at BerliOS)
Date: Mon, 13 Mar 2006 18:38:43 +0100
Subject: [S3d-svn] r154 - trunk/apps/olsrs3d
Message-ID: <200603131738.k2DHchbn028941@sheep.berlios.de>

Author: marec
Date: 2006-03-13 18:38:41 +0100 (Mon, 13 Mar 2006)
New Revision: 154

Modified:
   trunk/apps/olsrs3d/main.c
Log:
- replace push & pop with pep
- remove old code

Modified: trunk/apps/olsrs3d/main.c
===================================================================
--- trunk/apps/olsrs3d/main.c	2006-03-13 16:54:00 UTC (rev 153)
+++ trunk/apps/olsrs3d/main.c	2006-03-13 17:38:41 UTC (rev 154)
@@ -386,8 +386,12 @@
 
 			distance = dirt( olsr_con->left_olsr_node->pos_vec, olsr_con->right_olsr_node->pos_vec, tmp_mov_vec );
 			f = (( olsr_con->left_etx + olsr_con->right_etx ) / 4.0) / distance;
+
+			/***
+			 * drift factor - 0.0 < factor < 1.0 ( best results: 0.3 < factor < 0.9
+			 * small factor: fast and strong drift to neighbours
+			 ***/
 			if ( f < factor ) f = factor;
-// 			if ( f < 0.9 ) f = 0.9;
 
 			mov_add( olsr_con->left_olsr_node->mov_vec, tmp_mov_vec, 1 / f - 1 );
 			mov_add( olsr_con->right_olsr_node->mov_vec, tmp_mov_vec, - ( 1 / f - 1 ) );
@@ -412,7 +416,7 @@
 
 	float null_vec[3] = {0,0,0};
 	float tmp_mov_vec[3];
-	float distance, factor, etx, rgb, rgb2;
+	float distance, etx, rgb, rgb2;
 	struct olsr_con *olsr_con = Con_begin;
 
 	while ( olsr_con != NULL ) {
@@ -420,35 +424,18 @@
 		/* move left olsr node if it has not been moved yet */
 		if ( !( ( olsr_con->left_olsr_node->mov_vec[0] == 0 ) && ( olsr_con->left_olsr_node->mov_vec[1] == 0 ) && ( olsr_con->left_olsr_node->mov_vec[2] == 0 ) ) && olsr_con->left_olsr_node->visible ) {
 
-// 			if ( ( dist( olsr_con->left_olsr_node->mov_vec, olsr_con->left_olsr_node->pos_vec ) > 10.0 ) || ( dist( olsr_con->left_olsr_node->pos_vec, null_vec ) < 15.0 ) ) {
+			distance = dirt( olsr_con->left_olsr_node->pos_vec, null_vec, tmp_mov_vec );
+			mov_add( olsr_con->left_olsr_node->mov_vec, tmp_mov_vec, distance / 100 ); /* move a little bit to point zero */
+			mov_add( olsr_con->left_olsr_node->mov_vec, tmp_mov_vec, 1 ); /* move a little bit to point zero */
 
-				distance = dirt( olsr_con->left_olsr_node->pos_vec, null_vec, tmp_mov_vec );
-				mov_add( olsr_con->left_olsr_node->mov_vec, tmp_mov_vec, distance / 100 ); /* move a little bit to point zero */
-				mov_add( olsr_con->left_olsr_node->mov_vec, tmp_mov_vec, 1 ); /* move a little bit to point zero */
+			if ( ( distance = dist( olsr_con->left_olsr_node->mov_vec, null_vec ) ) > 10.0 ) {
+				mov_add( olsr_con->left_olsr_node->pos_vec, olsr_con->left_olsr_node->mov_vec, 1.0 / ( (float ) distance ) );
+			} else {
+				mov_add( olsr_con->left_olsr_node->pos_vec, olsr_con->left_olsr_node->mov_vec, 0.1 );
+			}
 
-				if ( ( distance = dist( olsr_con->left_olsr_node->mov_vec, null_vec ) ) > 10.0 ) {
-					factor = 1.0 / ( (float ) distance );
-				} else {
-					factor = 0.1;
-				}
+			s3d_translate( olsr_con->left_olsr_node->obj_id, olsr_con->left_olsr_node->pos_vec[0], olsr_con->left_olsr_node->pos_vec[1], olsr_con->left_olsr_node->pos_vec[2] );
 
-				olsr_con->left_olsr_node->mov_vec[0] *= factor;
-				olsr_con->left_olsr_node->mov_vec[1] *= factor;
-				olsr_con->left_olsr_node->mov_vec[2] *= factor;
-
-				tmp_mov_vec[0] = olsr_con->left_olsr_node->pos_vec[0];
-				tmp_mov_vec[1] = olsr_con->left_olsr_node->pos_vec[1];
-				tmp_mov_vec[2] = olsr_con->left_olsr_node->pos_vec[2];
-
-				mov_add( tmp_mov_vec, olsr_con->left_olsr_node->mov_vec, 1.0 );
-
-				/*if ( ( dist( tmp_mov_vec, olsr_con->left_olsr_node->pos_vec ) > 0.75 ) || ( dist( tmp_mov_vec, null_vec ) < 2.0 ) ) {*/
-
-				mov_add( olsr_con->left_olsr_node->pos_vec, olsr_con->left_olsr_node->mov_vec, 1.0 );
-				s3d_translate( olsr_con->left_olsr_node->obj_id, olsr_con->left_olsr_node->pos_vec[0], olsr_con->left_olsr_node->pos_vec[1], olsr_con->left_olsr_node->pos_vec[2] );
-
-			/*}*/
-
 			/* reset movement vector */
 			olsr_con->left_olsr_node->mov_vec[0] = olsr_con->left_olsr_node->mov_vec[1] = olsr_con->left_olsr_node->mov_vec[2] = 0.0;
 
@@ -457,35 +444,18 @@
 		/* move right olsr node if it has not been moved yet */
 		if ( !( ( olsr_con->right_olsr_node->mov_vec[0] == 0 ) && ( olsr_con->right_olsr_node->mov_vec[1] == 0 ) && ( olsr_con->right_olsr_node->mov_vec[2] == 0 ) ) && olsr_con->right_olsr_node->visible ) {
 
-// 			if ( ( dist( olsr_con->right_olsr_node->mov_vec, olsr_con->right_olsr_node->pos_vec )> 10.0 ) || ( dist( olsr_con->right_olsr_node->pos_vec, null_vec ) < 15.0 ) ) {
+			distance = dirt( olsr_con->right_olsr_node->pos_vec, null_vec, tmp_mov_vec );
+			mov_add( olsr_con->right_olsr_node->mov_vec, tmp_mov_vec, distance / 100 ); /* move a little bit to point zero */
+			mov_add( olsr_con->right_olsr_node->mov_vec, tmp_mov_vec, 1 ); /* move a little bit to point zero */
 
-				distance = dirt( olsr_con->right_olsr_node->pos_vec, null_vec, tmp_mov_vec );
-				mov_add( olsr_con->right_olsr_node->mov_vec, tmp_mov_vec, distance / 100 ); /* move a little bit to point zero */
-				mov_add( olsr_con->right_olsr_node->mov_vec, tmp_mov_vec, 1 ); /* move a little bit to point zero */
+			if ( ( distance = dist( olsr_con->right_olsr_node->mov_vec, null_vec ) ) > 10.0 ) {
+				mov_add( olsr_con->right_olsr_node->pos_vec, olsr_con->right_olsr_node->mov_vec, 1.0 / ( (float ) distance ) );
+			} else {
+				mov_add( olsr_con->right_olsr_node->pos_vec, olsr_con->right_olsr_node->mov_vec, 0.1 );
+			}
 
-				if ( ( distance = dist( olsr_con->right_olsr_node->mov_vec, null_vec ) ) > 10.0 ) {
-					factor = 1.0 / ( (float ) distance );
-				} else {
-					factor = 0.1;
-				}
+			s3d_translate( olsr_con->right_olsr_node->obj_id, olsr_con->right_olsr_node->pos_vec[0], olsr_con->right_olsr_node->pos_vec[1], olsr_con->right_olsr_node->pos_vec[2] );
 
-				olsr_con->right_olsr_node->mov_vec[0] *= factor;
-				olsr_con->right_olsr_node->mov_vec[1] *= factor;
-				olsr_con->right_olsr_node->mov_vec[2] *= factor;
-
-				tmp_mov_vec[0] = olsr_con->right_olsr_node->pos_vec[0];
-				tmp_mov_vec[1] = olsr_con->right_olsr_node->pos_vec[1];
-				tmp_mov_vec[2] = olsr_con->right_olsr_node->pos_vec[2];
-
-				mov_add( tmp_mov_vec, olsr_con->right_olsr_node->mov_vec, 1.0 );
-
-				/*if ( ( dist( tmp_mov_vec, olsr_con->right_olsr_node->pos_vec )> 0.75 ) || ( dist( tmp_mov_vec, null_vec ) < 2.0 ) ) {*/
-
-					mov_add( olsr_con->right_olsr_node->pos_vec, olsr_con->right_olsr_node->mov_vec, 1.0 );
-					s3d_translate( olsr_con->right_olsr_node->obj_id, olsr_con->right_olsr_node->pos_vec[0], olsr_con->right_olsr_node->pos_vec[1], olsr_con->right_olsr_node->pos_vec[2] );
-
-				/*}*/
-
 			/* reset movement vector */
 			olsr_con->right_olsr_node->mov_vec[0] = olsr_con->right_olsr_node->mov_vec[1] = olsr_con->right_olsr_node->mov_vec[2] = 0.0;
 
@@ -495,7 +465,6 @@
 		/* move connection between left and right olsr node */
 		s3d_pop_vertex( olsr_con->obj_id, 6 );
 		s3d_pop_polygon( olsr_con->obj_id, 2 );
-		s3d_pop_material( olsr_con->obj_id, 1 );
 
 		s3d_push_vertex( olsr_con->obj_id, olsr_con->left_olsr_node->pos_vec[0] , olsr_con->left_olsr_node->pos_vec[1] , olsr_con->left_olsr_node->pos_vec[2] );
 		s3d_push_vertex( olsr_con->obj_id, olsr_con->left_olsr_node->pos_vec[0] + 0.2 , olsr_con->left_olsr_node->pos_vec[1] , olsr_con->left_olsr_node->pos_vec[2] );
@@ -510,7 +479,7 @@
 			/* HNA */
 			if ( olsr_con->left_etx == -1000.00 ) {
 
-				s3d_push_material( olsr_con->obj_id,
+				s3d_pep_material( olsr_con->obj_id,
 							   0.0,0.0,1.0,
 							   0.0,0.0,1.0,
 							   0.0,0.0,1.0);
@@ -522,7 +491,7 @@
 				/* very good link - bright blue */
 				if ( ( etx >= 1.0 ) && ( etx < 1.5 ) ) {
 
-					s3d_push_material( olsr_con->obj_id,
+					s3d_pep_material( olsr_con->obj_id,
 							0.5,1.0,1.0,
 							0.5,1.0,1.0,
 							0.5,1.0,1.0);
@@ -531,7 +500,7 @@
 				} else if ( ( etx >= 1.5 ) && ( etx < 2.0 ) ) {
 
 					rgb = 2.0 - etx;
-					s3d_push_material( olsr_con->obj_id,
+					s3d_pep_material( olsr_con->obj_id,
 							1.0,1.0,rgb,
 							1.0,1.0,rgb,
 							1.0,1.0,rgb);
@@ -540,7 +509,7 @@
 				} else if ( ( etx >= 2.0 ) && ( etx < 3.0 ) ) {
 
 					rgb = 1.5 - ( etx / 2.0 );
-					s3d_push_material( olsr_con->obj_id,
+					s3d_pep_material( olsr_con->obj_id,
 							1.0,rgb,0.0,
 							1.0,rgb,0.0,
 							1.0,rgb,0.0);
@@ -550,7 +519,7 @@
 
 					rgb = 1.75 - ( etx / 4.0 );
 					rgb2 = 1.25 - ( etx / 4.0 );
-					s3d_push_material( olsr_con->obj_id,
+					s3d_pep_material( olsr_con->obj_id,
 							rgb,rgb2,0.0,
 							rgb,rgb2,0.0,
 							rgb,rgb2,0.0);
@@ -560,7 +529,7 @@
 
 					rgb = 1000.0 / ( 1500.0 + etx );
 
-					s3d_push_material( olsr_con->obj_id,
+					s3d_pep_material( olsr_con->obj_id,
 							rgb,rgb,rgb,
 							rgb,rgb,rgb,
 							rgb,rgb,rgb);
@@ -568,7 +537,7 @@
 				/* wtf - dark grey */
 				} else {
 
-					s3d_push_material( olsr_con->obj_id,
+					s3d_pep_material( olsr_con->obj_id,
 							0.3,0.3,0.3,
 							0.3,0.3,0.3,
 							0.3,0.3,0.3);
@@ -579,7 +548,7 @@
 
 		} else {
 
-			s3d_push_material( olsr_con->obj_id,
+			s3d_pep_material( olsr_con->obj_id,
 						1.0,1.0,1.0,
 						1.0,1.0,1.0,
 						1.0,1.0,1.0);
@@ -721,7 +690,7 @@
 void object_click(struct s3d_evt *evt)
 {
 	int oid;
-	float distance,tmp_vector[3];
+	/* float distance,tmp_vector[3]; */
 	char ip_str[50];
 	oid=(int)*((unsigned long *)evt->buf);
 	struct olsr_node *olsr_node;



From nichtsnutz at berlios.de  Mon Mar 13 18:47:37 2006
From: nichtsnutz at berlios.de (nichtsnutz at BerliOS)
Date: Mon, 13 Mar 2006 18:47:37 +0100
Subject: [S3d-svn] r155 - trunk/apps/olsrs3d
Message-ID: <200603131747.k2DHlb51032422@sheep.berlios.de>

Author: nichtsnutz
Date: 2006-03-13 18:47:36 +0100 (Mon, 13 Mar 2006)
New Revision: 155

Modified:
   trunk/apps/olsrs3d/main.c
Log:
fix color

Modified: trunk/apps/olsrs3d/main.c
===================================================================
--- trunk/apps/olsrs3d/main.c	2006-03-13 17:38:41 UTC (rev 154)
+++ trunk/apps/olsrs3d/main.c	2006-03-13 17:47:36 UTC (rev 155)
@@ -479,10 +479,13 @@
 			/* HNA */
 			if ( olsr_con->left_etx == -1000.00 ) {
 
-				s3d_pep_material( olsr_con->obj_id,
-							   0.0,0.0,1.0,
-							   0.0,0.0,1.0,
-							   0.0,0.0,1.0);
+				if(olsr_con->color != 1) {
+					s3d_pep_material( olsr_con->obj_id,
+								   0.0,0.0,1.0,
+								   0.0,0.0,1.0,
+								   0.0,0.0,1.0);
+					olsr_con->color = 1;
+				}
 
 			} else {
 
@@ -491,10 +494,13 @@
 				/* very good link - bright blue */
 				if ( ( etx >= 1.0 ) && ( etx < 1.5 ) ) {
 
-					s3d_pep_material( olsr_con->obj_id,
-							0.5,1.0,1.0,
-							0.5,1.0,1.0,
-							0.5,1.0,1.0);
+					if(olsr_con->color != 2) {
+						s3d_pep_material( olsr_con->obj_id,
+								0.5,1.0,1.0,
+								0.5,1.0,1.0,
+								0.5,1.0,1.0);
+						olsr_con->color = 2;
+					}
 
 				/* good link - bright yellow */
 				} else if ( ( etx >= 1.5 ) && ( etx < 2.0 ) ) {
@@ -548,10 +554,13 @@
 
 		} else {
 
-			s3d_pep_material( olsr_con->obj_id,
-						1.0,1.0,1.0,
-						1.0,1.0,1.0,
-						1.0,1.0,1.0);
+			if(olsr_con->color != 0) {
+				s3d_pep_material( olsr_con->obj_id,
+							1.0,1.0,1.0,
+							1.0,1.0,1.0,
+							1.0,1.0,1.0);
+				olsr_con->color = 0;
+			}
 
 		}
 
@@ -642,7 +651,7 @@
 		case 15: /* strg + o */
 			lst_out(); /* output ob2ip list */
 			break;
-		case 99: /* c -> color on off*/
+		case 99: /* c -> color on/off */
 			if(ColorSwitch) ColorSwitch = 0;
 			else ColorSwitch = 1;
 			break;
@@ -658,23 +667,23 @@
 			if(RotateSwitch && RotateSpeed > 1)
 				RotateSpeed--;
 			break;
-		case 16: /* strg + p / reset nodes ( zeroPoint to 0,0,0 ) */
+		case 16: /* strg + p -> reset nodes ( zeroPoint to 0,0,0 ) */
 			s3d_translate(ZeroPoint,0.0,0.0,0.0);
 			ZeroPosition[0] = ZeroPosition[1] = ZeroPosition[2] = 0.0;
 			break;
-		case 101: /* arrow up / move nodes up */
+		case 101: /* arrow up -> move nodes up */
 			ZeroPosition[1]++;
 			s3d_translate(ZeroPoint,ZeroPosition[0],ZeroPosition[1],ZeroPosition[2]);
 			break;
-		case 103: /* arrow down / move nodes down */
+		case 103: /* arrow down -> move nodes down */
 			ZeroPosition[1]--;
 			s3d_translate(ZeroPoint,ZeroPosition[0],ZeroPosition[1],ZeroPosition[2]);
 			break;
-		case 104: /* page up / change factor in calc_olsr_node_mov */
+		case 104: /* page up -> change factor in calc_olsr_node_mov */
 			if(factor < 0.9)
 				factor += 0.1;
 			break;
-		case 105: /* page down / change factor in calc_olsr_node_mov */
+		case 105: /* page down -> change factor in calc_olsr_node_mov */
 			if(factor > 0.3)
 				factor -= 0.1;
 			break;



From nichtsnutz at berlios.de  Mon Mar 13 18:48:13 2006
From: nichtsnutz at berlios.de (nichtsnutz at BerliOS)
Date: Mon, 13 Mar 2006 18:48:13 +0100
Subject: [S3d-svn] r156 - trunk/apps/olsrs3d
Message-ID: <200603131748.k2DHmDWN032598@sheep.berlios.de>

Author: nichtsnutz
Date: 2006-03-13 18:48:10 +0100 (Mon, 13 Mar 2006)
New Revision: 156

Modified:
   trunk/apps/olsrs3d/olsrs3d.h
Log:
add color attribute for con object

Modified: trunk/apps/olsrs3d/olsrs3d.h
===================================================================
--- trunk/apps/olsrs3d/olsrs3d.h	2006-03-13 17:47:36 UTC (rev 155)
+++ trunk/apps/olsrs3d/olsrs3d.h	2006-03-13 17:48:10 UTC (rev 156)
@@ -41,7 +41,7 @@
 	float left_etx;   /* etx of left olsr node */
 	float right_etx;   /* etx of right olsr node */
 	int obj_id;   /* id of connection object in s3d */
-
+	int color;
 };
 
 



From nichtsnutz at berlios.de  Mon Mar 13 18:48:59 2006
From: nichtsnutz at berlios.de (nichtsnutz at BerliOS)
Date: Mon, 13 Mar 2006 18:48:59 +0100
Subject: [S3d-svn] r157 - trunk/apps/olsrs3d
Message-ID: <200603131748.k2DHmxQc000768@sheep.berlios.de>

Author: nichtsnutz
Date: 2006-03-13 18:48:54 +0100 (Mon, 13 Mar 2006)
New Revision: 157

Modified:
   trunk/apps/olsrs3d/process.c
Log:
set start value for color attribute

Modified: trunk/apps/olsrs3d/process.c
===================================================================
--- trunk/apps/olsrs3d/process.c	2006-03-13 17:48:10 UTC (rev 156)
+++ trunk/apps/olsrs3d/process.c	2006-03-13 17:48:54 UTC (rev 157)
@@ -78,6 +78,7 @@
 
 		/* create connection object */
 		(*olsr_con)->obj_id = s3d_new_object();
+		(*olsr_con)->color = 0;
 		s3d_push_material( (*olsr_con)->obj_id,
 				  1.0,1.0,1.0,
 				  1.0,1.0,1.0,
@@ -454,7 +455,7 @@
 					f = strtod(etx,NULL); 
 					if ( f < 1 )
 						f = 999;
-					add_olsr_con( olsr_node1, olsr_node2, f );   /* just to prevent ascii to float converting inconsistency ... */
+					add_olsr_con( olsr_node1, olsr_node2, f );
 				}
 
 				con_from = con_from_end = con_to = con_to_end = etx = etx_end = NULL;



From nichtsnutz at berlios.de  Mon Mar 13 20:04:06 2006
From: nichtsnutz at berlios.de (nichtsnutz at BerliOS)
Date: Mon, 13 Mar 2006 20:04:06 +0100
Subject: [S3d-svn] r158 - trunk/apps/olsrs3d
Message-ID: <200603131904.k2DJ46sX004206@sheep.berlios.de>

Author: nichtsnutz
Date: 2006-03-13 20:04:01 +0100 (Mon, 13 Mar 2006)
New Revision: 158

Modified:
   trunk/apps/olsrs3d/main.c
   trunk/apps/olsrs3d/olsrs3d.h
Log:
optimize material handle

Modified: trunk/apps/olsrs3d/main.c
===================================================================
--- trunk/apps/olsrs3d/main.c	2006-03-13 17:48:54 UTC (rev 157)
+++ trunk/apps/olsrs3d/main.c	2006-03-13 19:04:01 UTC (rev 158)
@@ -506,48 +506,80 @@
 				} else if ( ( etx >= 1.5 ) && ( etx < 2.0 ) ) {
 
 					rgb = 2.0 - etx;
-					s3d_pep_material( olsr_con->obj_id,
-							1.0,1.0,rgb,
-							1.0,1.0,rgb,
-							1.0,1.0,rgb);
+					if( olsr_con->color != 3 || (olsr_con->color == 3 && olsr_con->rgb[2] !=  (int) rintf(rgb * 10))) {
+						s3d_pep_material( olsr_con->obj_id,
+								1.0,1.0,rgb,
+								1.0,1.0,rgb,
+								1.0,1.0,rgb);
+						olsr_con->color = 3;
+						
+						olsr_con->rgb[0] = 1;
+						olsr_con->rgb[1] = 1;
+						olsr_con->rgb[2] = (int) rintf(rgb * 10);
+					}
 
 				/* not so good link - orange */
 				} else if ( ( etx >= 2.0 ) && ( etx < 3.0 ) ) {
 
 					rgb = 1.5 - ( etx / 2.0 );
-					s3d_pep_material( olsr_con->obj_id,
-							1.0,rgb,0.0,
-							1.0,rgb,0.0,
-							1.0,rgb,0.0);
+					if( olsr_con->color != 4 || (olsr_con->color == 4 && olsr_con->rgb[1] !=  (int) rintf(rgb * 10))) {
+						s3d_pep_material( olsr_con->obj_id,
+								1.0,rgb,0.0,
+								1.0,rgb,0.0,
+								1.0,rgb,0.0);
+						olsr_con->color = 4;
+						
+						olsr_con->rgb[0] = 1;
+						olsr_con->rgb[1] = (int) rintf(rgb * 10);
+						olsr_con->rgb[2] = 0;
+					}
 
 				/* bad link (almost dead) - brown */
 				} else if ( ( etx >= 3.0 ) && ( etx < 5.0 ) ) {
 
 					rgb = 1.75 - ( etx / 4.0 );
 					rgb2 = 1.25 - ( etx / 4.0 );
-					s3d_pep_material( olsr_con->obj_id,
-							rgb,rgb2,0.0,
-							rgb,rgb2,0.0,
-							rgb,rgb2,0.0);
+					if( olsr_con->color != 5 || (olsr_con->color == 5 && olsr_con->rgb[0] !=  (int) rintf(rgb * 10)) 
+											|| (olsr_con->color == 5 && olsr_con->rgb[1] !=  (int) rintf(rgb2 * 10)) ) {
+						s3d_pep_material( olsr_con->obj_id,
+								rgb,rgb2,0.0,
+								rgb,rgb2,0.0,
+								rgb,rgb2,0.0);
+						olsr_con->color = 5;
+						
+						olsr_con->rgb[0] = (int) rintf(rgb * 10);
+						olsr_con->rgb[1] = (int) rintf(rgb2 * 10);
+						olsr_con->rgb[2] = 0;
+					}
 
 				/* zombie link - grey */
 				} else if ( ( etx >= 5.0 ) && ( etx < 1000.0 ) ) {
 
 					rgb = 1000.0 / ( 1500.0 + etx );
+					if( olsr_con->color != 6 || (olsr_con->color == 6 && olsr_con->rgb[0] !=  (int) rintf(rgb * 10)) 
+											|| (olsr_con->color == 6 && olsr_con->rgb[1] !=  (int) rintf(rgb * 10))
+											|| (olsr_con->color == 6 && olsr_con->rgb[2] !=  (int) rintf(rgb * 10)) ) {
+						s3d_pep_material( olsr_con->obj_id,
+								rgb,rgb,rgb,
+								rgb,rgb,rgb,
+								rgb,rgb,rgb);
+						olsr_con->color = 6;
+						
+						olsr_con->rgb[0] = (int) rintf(rgb * 10);
+						olsr_con->rgb[1] = (int) rintf(rgb * 10);
+						olsr_con->rgb[2] =(int)  rintf(rgb * 10);
+					}
 
-					s3d_pep_material( olsr_con->obj_id,
-							rgb,rgb,rgb,
-							rgb,rgb,rgb,
-							rgb,rgb,rgb);
-
 				/* wtf - dark grey */
 				} else {
+					if(olsr_con->color != 7) {
+						s3d_pep_material( olsr_con->obj_id,
+								0.3,0.3,0.3,
+								0.3,0.3,0.3,
+								0.3,0.3,0.3);
+						olsr_con->color = 7;
+					}
 
-					s3d_pep_material( olsr_con->obj_id,
-							0.3,0.3,0.3,
-							0.3,0.3,0.3,
-							0.3,0.3,0.3);
-
 				}
 
 			}

Modified: trunk/apps/olsrs3d/olsrs3d.h
===================================================================
--- trunk/apps/olsrs3d/olsrs3d.h	2006-03-13 17:48:54 UTC (rev 157)
+++ trunk/apps/olsrs3d/olsrs3d.h	2006-03-13 19:04:01 UTC (rev 158)
@@ -42,6 +42,7 @@
 	float right_etx;   /* etx of right olsr node */
 	int obj_id;   /* id of connection object in s3d */
 	int color;
+	int rgb[3];
 };
 
 



From dotslash at berlios.de  Tue Mar 14 13:25:02 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Tue, 14 Mar 2006 13:25:02 +0100
Subject: [S3d-svn] r159 - trunk
Message-ID: <200603141225.k2ECP28Y007898@sheep.berlios.de>

Author: dotslash
Date: 2006-03-14 13:25:00 +0100 (Tue, 14 Mar 2006)
New Revision: 159

Added:
   trunk/ROADMAP
Modified:
   trunk/
   trunk/TODO
Log:
 r226 at balthasar:  dotslash | 2006-03-14 13:24:39 +0100
 TODO :D



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:213
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:226

Added: trunk/ROADMAP
===================================================================
--- trunk/ROADMAP	2006-03-13 19:04:01 UTC (rev 158)
+++ trunk/ROADMAP	2006-03-14 12:25:00 UTC (rev 159)
@@ -0,0 +1,8 @@
+Release 0.1: (deadline: 19.03.06)
+
+* egoshooter-like movement (switchable on mcp)
+* some documentation (rc-file, api ...)
+* get everything stable :) (at least as much as possible ...)
+
+
+

Modified: trunk/TODO
===================================================================
--- trunk/TODO	2006-03-13 19:04:01 UTC (rev 158)
+++ trunk/TODO	2006-03-14 12:25:00 UTC (rev 159)
@@ -1,8 +1,21 @@
+general:
+	* use nanosleep(), not usleep()
+dot_mcp:
+	* sane paths for applications
+	* logout button for use with rc-file
 client(portability?!):
 	shmat() return (char *) -1 or NULL?! data_ctos/data_stoc should
 	really not be 0x0
+	3ds reader won't work on linux ppc, probably lots of memory leaks
+server:
+	* server: implemenet mouse movement
+	* endless loop in proccess_args() (getopts) on linux ppc
 
 autotools:
+    * checking g77 is useless
+	* Apple todo: won't find -lX11 (for s3d_x11gate) while compiling
+	* OBJECTPATH for finding the object?
+	* check for automake>1.9, to prevent weird errors
     * weird:
 	...
 	checking for cos in -lm... yes
@@ -16,6 +29,4 @@
 	configure: creating ./config.status
 	...
 
-    * checking g77 is useless
-	* Apple todo: won't find -lX11 (for s3d_x11gate) while compiling
-	* OBJECTPATH for finding the object?
+



From dotslash at berlios.de  Tue Mar 14 13:54:11 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Tue, 14 Mar 2006 13:54:11 +0100
Subject: [S3d-svn] r160 - trunk
Message-ID: <200603141254.k2ECsBH0019404@sheep.berlios.de>

Author: dotslash
Date: 2006-03-14 13:54:09 +0100 (Tue, 14 Mar 2006)
New Revision: 160

Modified:
   trunk/
   trunk/ROADMAP
   trunk/TODO
Log:
 r228 at balthasar:  dotslash | 2006-03-14 13:53:52 +0100
 - more TODO



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:226
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:228

Modified: trunk/ROADMAP
===================================================================
--- trunk/ROADMAP	2006-03-14 12:25:00 UTC (rev 159)
+++ trunk/ROADMAP	2006-03-14 12:54:09 UTC (rev 160)
@@ -3,6 +3,5 @@
 * egoshooter-like movement (switchable on mcp)
 * some documentation (rc-file, api ...)
 * get everything stable :) (at least as much as possible ...)
+* implement object path
 
-
-

Modified: trunk/TODO
===================================================================
--- trunk/TODO	2006-03-14 12:25:00 UTC (rev 159)
+++ trunk/TODO	2006-03-14 12:54:09 UTC (rev 160)
@@ -8,7 +8,8 @@
 	really not be 0x0
 	3ds reader won't work on linux ppc, probably lots of memory leaks
 server:
-	* server: implemenet mouse movement
+	* implement mouse movement
+	* implement lines
 	* endless loop in proccess_args() (getopts) on linux ppc
 
 autotools:



From ankon at berlios.de  Tue Mar 14 15:52:00 2006
From: ankon at berlios.de (ankon at berlios.de)
Date: Tue, 14 Mar 2006 15:52:00 +0100
Subject: [S3d-svn] r161 - in trunk: . client
Message-ID: <200603141452.k2EEq0sN024552@sheep.berlios.de>

Author: ankon
Date: 2006-03-14 15:51:43 +0100 (Tue, 14 Mar 2006)
New Revision: 161

Modified:
   trunk/Makefile.am
   trunk/client/Makefile.am
Log:
Reference gpl.txt, the config/*m4 files, and client/lgpl.txt as EXTRA_DIST
in their respective Makefile.ams.
The *.m4's could be the reason for some strange configure messages



Modified: trunk/Makefile.am
===================================================================
--- trunk/Makefile.am	2006-03-14 12:54:09 UTC (rev 160)
+++ trunk/Makefile.am	2006-03-14 14:51:43 UTC (rev 161)
@@ -6,3 +6,8 @@
 endif
 
 SUBDIRS=server client apps $(MAYBE_EXAMPLES) objs
+
+EXTRA_DIST=	gpl.txt \
+		config/libtool15.m4 config/mdl_have_opengl.m4 \
+		config/pkg.m4 config/pthread.m4 config/sdl.m4 \
+		config/simage.m4

Modified: trunk/client/Makefile.am
===================================================================
--- trunk/client/Makefile.am	2006-03-14 12:54:09 UTC (rev 160)
+++ trunk/client/Makefile.am	2006-03-14 14:51:43 UTC (rev 161)
@@ -11,3 +11,4 @@
 libs3d_la_CFLAGS=	@FONTCONFIG_CFLAGS@ @FREETYPE_CFLAGS@ 
 libs3d_la_LIBADD=	@FONTCONFIG_LIBS@ @FREETYPE_LIBS@ 
 
+EXTRA_DIST=		lgpl.txt



From ankon at berlios.de  Tue Mar 14 16:19:52 2006
From: ankon at berlios.de (ankon at berlios.de)
Date: Tue, 14 Mar 2006 16:19:52 +0100
Subject: [S3d-svn] r162 - trunk/apps/dot_mcp
Message-ID: <200603141519.k2EFJqs0032096@sheep.berlios.de>

Author: ankon
Date: 2006-03-14 16:19:50 +0100 (Tue, 14 Mar 2006)
New Revision: 162

Modified:
   trunk/apps/dot_mcp/Makefile.am
Log:
Install dot_mcp.h (the path may be off, but i guess it's okay for now)



Modified: trunk/apps/dot_mcp/Makefile.am
===================================================================
--- trunk/apps/dot_mcp/Makefile.am	2006-03-14 14:51:43 UTC (rev 161)
+++ trunk/apps/dot_mcp/Makefile.am	2006-03-14 15:19:50 UTC (rev 162)
@@ -1,7 +1,7 @@
 bin_PROGRAMS=	dot_mcp
 
 dot_mcpincludedir = $(pkgincludedir)/dot_mcp
-dot_mcpinclude_HEADERS =  
+dot_mcpinclude_HEADERS =  dot_mcp.h
 
 dot_mcp_SOURCES =  \
 	main.c menu.c



From ankon at berlios.de  Tue Mar 14 16:21:07 2006
From: ankon at berlios.de (ankon at berlios.de)
Date: Tue, 14 Mar 2006 16:21:07 +0100
Subject: [S3d-svn] r163 - trunk/objs
Message-ID: <200603141521.k2EFL7EU032266@sheep.berlios.de>

Author: ankon
Date: 2006-03-14 16:21:04 +0100 (Tue, 14 Mar 2006)
New Revision: 163

Modified:
   trunk/objs/Makefile.am
Log:
Welcome to automake madness, quoting from the info page:

"By default, data files are _not_ included in a distribution.  Of
course, you can use the `dist_' prefix to change this on a per-variable
basis."

Well, gues what: OF COURSE I want the .3ds to be dist'ed.

$*#&@!!



Modified: trunk/objs/Makefile.am
===================================================================
--- trunk/objs/Makefile.am	2006-03-14 15:19:50 UTC (rev 162)
+++ trunk/objs/Makefile.am	2006-03-14 15:21:04 UTC (rev 163)
@@ -1,5 +1,5 @@
 objsdir=	$(pkgdatadir)/objs
-objs_DATA = \
+dist_objs_DATA = \
 	internet.3ds \
 	katze_tail.3ds \
 	sec_p.3ds \



From ankon at berlios.de  Tue Mar 14 16:35:00 2006
From: ankon at berlios.de (ankon at berlios.de)
Date: Tue, 14 Mar 2006 16:35:00 +0100
Subject: [S3d-svn] r164 - in trunk: . Documentation
Message-ID: <200603141535.k2EFZ0sj000191@sheep.berlios.de>

Author: ankon
Date: 2006-03-14 16:34:52 +0100 (Tue, 14 Mar 2006)
New Revision: 164

Added:
   trunk/Documentation/Makefile.am
Modified:
   trunk/Makefile.am
   trunk/configure.ac
Log:
Distribute the documentation, and while there:

Require autoconf 2.5+
Create .tar.bz2 distributions
Use newer world order for AC_INIT/AM_INIT_AUTOMAKE.



Added: trunk/Documentation/Makefile.am
===================================================================
--- trunk/Documentation/Makefile.am	2006-03-14 15:21:04 UTC (rev 163)
+++ trunk/Documentation/Makefile.am	2006-03-14 15:34:52 UTC (rev 164)
@@ -0,0 +1,2 @@
+EXTRA_DIST	= s3dlib.txt
+

Modified: trunk/Makefile.am
===================================================================
--- trunk/Makefile.am	2006-03-14 15:21:04 UTC (rev 163)
+++ trunk/Makefile.am	2006-03-14 15:34:52 UTC (rev 164)
@@ -5,7 +5,7 @@
 MAYBE_EXAMPLES=
 endif
 
-SUBDIRS=server client apps $(MAYBE_EXAMPLES) objs
+SUBDIRS=server client apps $(MAYBE_EXAMPLES) objs Documentation
 
 EXTRA_DIST=	gpl.txt \
 		config/libtool15.m4 config/mdl_have_opengl.m4 \

Modified: trunk/configure.ac
===================================================================
--- trunk/configure.ac	2006-03-14 15:21:04 UTC (rev 163)
+++ trunk/configure.ac	2006-03-14 15:34:52 UTC (rev 164)
@@ -1,10 +1,12 @@
 dnl Process this file with autoconf to produce a configure script.
-AC_INIT(server/main.c)
+AC_PREREQ(2.5)
+AC_INIT([s3d], [0.1])
+AC_CONFIG_SRCDIR(server/main.c)
 
 AC_CANONICAL_HOST
 AC_CANONICAL_TARGET
 
-AM_INIT_AUTOMAKE([s3d], [0.1])
+AM_INIT_AUTOMAKE([dist-bzip2])
 
 dnl Checks for programs.
 AC_PROG_CC
@@ -164,7 +166,8 @@
 	apps/s3dfm/Makefile
 	apps/dot_mcp/Makefile
 	example/Makefile
-	objs/Makefile])
+	objs/Makefile
+	Documentation/Makefile])
 AC_OUTPUT
 
 echo "



From dotslash at berlios.de  Tue Mar 14 19:27:06 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Tue, 14 Mar 2006 19:27:06 +0100
Subject: [S3d-svn] r165 - in trunk: . Documentation
Message-ID: <200603141827.k2EIR6pi011334@sheep.berlios.de>

Author: dotslash
Date: 2006-03-14 19:27:01 +0100 (Tue, 14 Mar 2006)
New Revision: 165

Added:
   trunk/Documentation/OPEN_PROBLEMS.txt
   trunk/Documentation/for_icon_designer.txt
   trunk/Documentation/s3drc.txt
Modified:
   trunk/
   trunk/ChangeLog
   trunk/Documentation/Makefile.am
   trunk/INSTALL
   trunk/TODO
Log:
 r235 at balthasar:  dotslash | 2006-03-14 19:26:25 +0100
 - some Documentation



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:228
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:235

Modified: trunk/ChangeLog
===================================================================
--- trunk/ChangeLog	2006-03-14 15:34:52 UTC (rev 164)
+++ trunk/ChangeLog	2006-03-14 18:27:01 UTC (rev 165)
@@ -1,3 +1,5 @@
+2006-03-14  Simon Wunderlich - <dotslash at packetmixer.de>
+	- added some Documentation entries
 2006-03-10  Simon Wunderlich - <dotslash at packetmixer.de>
 	- added rc functionality: use /etc/s3drc or ~/.s3drc to
 	  automatically fire up your mcp or anything you want.

Modified: trunk/Documentation/Makefile.am
===================================================================
--- trunk/Documentation/Makefile.am	2006-03-14 15:34:52 UTC (rev 164)
+++ trunk/Documentation/Makefile.am	2006-03-14 18:27:01 UTC (rev 165)
@@ -1,2 +1,2 @@
-EXTRA_DIST	= s3dlib.txt
+EXTRA_DIST	= s3dlib.txt s3drc.txt for_icon_designer.txt OPEN_PROBLEMS.txt
 

Added: trunk/Documentation/OPEN_PROBLEMS.txt
===================================================================
--- trunk/Documentation/OPEN_PROBLEMS.txt	2006-03-14 15:34:52 UTC (rev 164)
+++ trunk/Documentation/OPEN_PROBLEMS.txt	2006-03-14 18:27:01 UTC (rev 165)
@@ -0,0 +1,20 @@
+Of course we have a lot of problems which are yet unsolved,
+and maybe you're experienced in this topic and can help out.
+We need any comment and idea, so please help us! 
+
+You can find Contact Information in the README file.
+
+
+ANTI-ALIASING WITH OPENGL?
+--------------------------
+
+Right now, rendering is not really pretty (as you can probably see),
+so we would like to have some anti-aliasing. Is there a (performant)
+way to do so?
+
+ALPHA SORTING
+-------------
+
+Alpha polygons are blended in the order as they are drawn by opengl-calls,
+not in their z-order. Is there any easy way to do so?
+

Added: trunk/Documentation/for_icon_designer.txt
===================================================================
--- trunk/Documentation/for_icon_designer.txt	2006-03-14 15:34:52 UTC (rev 164)
+++ trunk/Documentation/for_icon_designer.txt	2006-03-14 18:27:01 UTC (rev 165)
@@ -0,0 +1,12 @@
+I hope this gives some useful Information for Icon designer:
+
+- We currently only support 3ds file format.
+- All Icons coordinates should be within [-1,-1,-1], [1,1,1]
+  so we always have the same size. Its no problem
+  to scale them bigger or smaller in s3d.
+- Textures are (not yet) supported.
+- Alpha blending works somehow, but not very well (see OPEN_PROBLEMS)
+- Please keep Polygon number low ... if possible, under 50,
+  but always under 100. Icons should not bloat the User workspace.
+
+

Added: trunk/Documentation/s3drc.txt
===================================================================
--- trunk/Documentation/s3drc.txt	2006-03-14 15:34:52 UTC (rev 164)
+++ trunk/Documentation/s3drc.txt	2006-03-14 18:27:01 UTC (rev 165)
@@ -0,0 +1,20 @@
+You can automatically fire up the mcp or anything you want with s3d and 
+have it closed when s3d goes down or vice versa:
+
+just create a shellscript at position /etc/s3drc or ~/.s3drc, for example
+have it starting the mcp. Don't forget to toggle it executable (chmod 755 
+or so).
+
+When s3d starts, it will look for ~/.s3drc or /etc/s3drc (in this order),
+and will start it along with the server. E.g. when you log out off your mcp,
+the s3d server is shut down too.
+
+You can disable this behavior with s3d --no-rc
+
+For example my .s3drc looks like this:
+
+$ cat ~/.s3drc 
+#!/bin/sh
+cd ~/msrc/s3d/apps/dot_mcp/
+./dot_mcp
+

Modified: trunk/INSTALL
===================================================================
--- trunk/INSTALL	2006-03-14 15:34:52 UTC (rev 164)
+++ trunk/INSTALL	2006-03-14 18:27:01 UTC (rev 165)
@@ -76,11 +76,3 @@
 
 Depending on the selected prefix, you may need to become superuser first.
 
-### 3.1 The RC
-
-You can automatically fire up the mcp or anything you want with s3d and 
-have it closed when s3d goes down or vice versa:
-
-just create a shellscript at position /etc/s3drc or ~/.s3drc, for example
-have it starting the mcp. Don't forget to toggle it executable (chmod 755 
-or so).

Modified: trunk/TODO
===================================================================
--- trunk/TODO	2006-03-14 15:34:52 UTC (rev 164)
+++ trunk/TODO	2006-03-14 18:27:01 UTC (rev 165)
@@ -8,6 +8,7 @@
 	really not be 0x0
 	3ds reader won't work on linux ppc, probably lots of memory leaks
 server:
+	* pep_vertex
 	* implement mouse movement
 	* implement lines
 	* endless loop in proccess_args() (getopts) on linux ppc



From dotslash at berlios.de  Tue Mar 14 19:41:04 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Tue, 14 Mar 2006 19:41:04 +0100
Subject: [S3d-svn] r166 - in trunk: . Documentation
Message-ID: <200603141841.k2EIf4p1016105@sheep.berlios.de>

Author: dotslash
Date: 2006-03-14 19:41:03 +0100 (Tue, 14 Mar 2006)
New Revision: 166

Modified:
   trunk/
   trunk/Documentation/for_icon_designer.txt
Log:
 r237 at balthasar:  dotslash | 2006-03-14 19:40:44 +0100
 - icon cube.3ds



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:235
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:237

Modified: trunk/Documentation/for_icon_designer.txt
===================================================================
--- trunk/Documentation/for_icon_designer.txt	2006-03-14 18:27:01 UTC (rev 165)
+++ trunk/Documentation/for_icon_designer.txt	2006-03-14 18:41:03 UTC (rev 166)
@@ -4,6 +4,9 @@
 - All Icons coordinates should be within [-1,-1,-1], [1,1,1]
   so we always have the same size. Its no problem
   to scale them bigger or smaller in s3d.
+- middle of the icon is located at [0,0,0]
+- please see objs/cube.3ds for a size reference. this cube is exactly
+  filling the [-1,-1,-1], [1,1,1] space
 - Textures are (not yet) supported.
 - Alpha blending works somehow, but not very well (see OPEN_PROBLEMS)
 - Please keep Polygon number low ... if possible, under 50,



From dotslash at berlios.de  Tue Mar 14 20:11:40 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Tue, 14 Mar 2006 20:11:40 +0100
Subject: [S3d-svn] r167 - in trunk: . Documentation
Message-ID: <200603141911.k2EJBeER029703@sheep.berlios.de>

Author: dotslash
Date: 2006-03-14 20:11:36 +0100 (Tue, 14 Mar 2006)
New Revision: 167

Modified:
   trunk/
   trunk/Documentation/OPEN_PROBLEMS.txt
   trunk/Documentation/s3dlib.txt
Log:
 r239 at balthasar:  dotslash | 2006-03-14 20:10:43 +0100
 Documentation



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:237
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:239

Modified: trunk/Documentation/OPEN_PROBLEMS.txt
===================================================================
--- trunk/Documentation/OPEN_PROBLEMS.txt	2006-03-14 18:41:03 UTC (rev 166)
+++ trunk/Documentation/OPEN_PROBLEMS.txt	2006-03-14 19:11:36 UTC (rev 167)
@@ -18,3 +18,10 @@
 Alpha polygons are blended in the order as they are drawn by opengl-calls,
 not in their z-order. Is there any easy way to do so?
 
+DOCUMENTATION
+-------------
+
+I'd like to convert the old s3dlib.txt in some new format so we can export this 
+into man, html, latex (pdf,ps) etc ...
+Can you recommend any System? Doxygen? Docbook? I've fiddled with doxygen,
+but it slightly confused me ...

Modified: trunk/Documentation/s3dlib.txt
===================================================================
--- trunk/Documentation/s3dlib.txt	2006-03-14 18:41:03 UTC (rev 166)
+++ trunk/Documentation/s3dlib.txt	2006-03-14 19:11:36 UTC (rev 167)
@@ -3,6 +3,11 @@
 |       libs3d documentation                                                  |
  \___________________________________________________________________________/
 
+14.03.06: PLEASE NOTE
+
+- This Document is slightly outdated, I would like to create a HTML/man page for this
+  -> see OPEN_PROBLEMS
+
 this is just a plain raw text documentatio of the libs3d api. maybe i'll do 
 some docbook version later :) please beware: anything may change anytime,
 as i'm sometimes in the mood of changing deep internal things. 



From dotslash at berlios.de  Tue Mar 14 20:12:34 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Tue, 14 Mar 2006 20:12:34 +0100
Subject: [S3d-svn] r168 - in trunk: . client server
Message-ID: <200603141912.k2EJCYVA030353@sheep.berlios.de>

Author: dotslash
Date: 2006-03-14 20:12:29 +0100 (Tue, 14 Mar 2006)
New Revision: 168

Modified:
   trunk/
   trunk/client/proto_out.c
   trunk/client/s3d.h
   trunk/server/global.h
   trunk/server/object.c
   trunk/server/proto.c
   trunk/server/proto.h
Log:
 r240 at balthasar:  dotslash | 2006-03-14 20:11:00 +0100
 - pep_vertex, push/pop/pep_line(s)



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:239
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:240

Modified: trunk/client/proto_out.c
===================================================================
--- trunk/client/proto_out.c	2006-03-14 19:11:36 UTC (rev 167)
+++ trunk/client/proto_out.c	2006-03-14 19:12:29 UTC (rev 168)
@@ -228,7 +228,20 @@
 	net_send(S3D_P_C_PUSH_POLY,buf,len);
 	return(0);
 }
+int s3d_push_line(int object, int v1, int v2, int material)
+{
+	char				buf[4+3*4],*ptr;
+	int					len=4+3*4;
+	ptr=buf;
+	*((uint32_t *)ptr)=htonl(object);			ptr+=sizeof(uint32_t);		  /*  object id */
+	*((uint32_t *)ptr)=htonl(v1);				ptr+=sizeof(uint32_t);
+	*((uint32_t *)ptr)=htonl(v2);				ptr+=sizeof(uint32_t);
+	*((uint32_t *)ptr)=htonl(material);			ptr+=sizeof(uint32_t);
 
+	net_send(S3D_P_C_PUSH_LINE,buf,len);
+	return(0);
+}
+
 /*  this is the polygon array version */
 /*  assumes to have a list of polys which consists of v1,v2,v3,material */
 int s3d_push_polygons(int object, unsigned long *pbuf, unsigned short n)
@@ -253,6 +266,28 @@
 	}
 	return(0);
 }
+int s3d_push_lines(int object, unsigned long *lbuf, unsigned short n)
+{
+	char				buf[MF_LEN+4],*ptr;
+	int					f,i,len=n*4*3;
+	int					flen,stepl;
+	if (n<1)
+		return(-1);
+	stepl=((int)((MF_LEN-4)/(4*3)))*(4*3);
+	f=len/(MF_LEN-4)+1;  /*  how many fragments? */
+	for (i=0;i<f;i++)
+	{
+		ptr=buf;
+		*((uint32_t *)ptr)=htonl(object);			ptr+=sizeof(uint32_t);		  /*  object id */
+		if (len-i*stepl>stepl)
+			flen=stepl;
+		else
+			flen=(len-i*stepl);
+		memcpy(ptr,(char *)lbuf+i*stepl,flen);
+		net_send(S3D_P_C_PUSH_LINE,buf,flen+4);
+	}
+	return(0);
+}
 int s3d_push_texture(int object, unsigned short w, unsigned short h)
 {
 	char				buf[4+2*2],*ptr;
@@ -319,6 +354,16 @@
 	return(0);
 	
 }
+/*  delete n lines */
+int s3d_pop_line(int object, unsigned long n)
+{
+	uint32_t		buf[2];
+	buf[0]=htonl(object);
+	buf[1]=htonl(n);
+	net_send(S3D_P_C_DEL_LINE,(char *)buf,4*2);
+	return(0);
+	
+}
 /*  delete n polygons */
 int s3d_pop_texture(int object, unsigned long n)
 {
@@ -418,6 +463,66 @@
 	return(0);
 	
 }
+/*  replaces the last vertex. */
+int s3d_pep_vertex(int object, float x, float y, float z)
+{
+	char				buf[4+3*4],*ptr;
+	int					len=4+3*4;
+
+	ptr=buf;
+	*((uint32_t *)ptr)=htonl(object);	ptr+=sizeof(uint32_t);		  /*  object id */
+	*((float *)ptr)=x;					ptr+=sizeof(float);
+	*((float *)ptr)=y;					ptr+=sizeof(float);
+	*((float *)ptr)=z;					ptr+=sizeof(float);
+	net_send(S3D_P_C_PEP_VERTEX, buf, len);
+	return(0);
+}
+/* replaces the last line */
+int s3d_pep_line(int object, int v1, int v2, int material)
+{
+	char				buf[4+3*4],*ptr;
+	int					len=4+3*4;
+	ptr=buf;
+	*((uint32_t *)ptr)=htonl(object);			ptr+=sizeof(uint32_t);		  /*  object id */
+	*((uint32_t *)ptr)=htonl(v1);				ptr+=sizeof(uint32_t);
+	*((uint32_t *)ptr)=htonl(v2);				ptr+=sizeof(uint32_t);
+	*((uint32_t *)ptr)=htonl(material);			ptr+=sizeof(uint32_t);
+
+	net_send(S3D_P_C_PEP_LINE,buf,len);
+	return(0);
+}
+
+
+/*  replaces the last n lines. */
+int s3d_pep_lines(int object, unsigned long *lbuf,unsigned short n)
+{
+	unsigned char buf[MF_LEN+4];
+	if ((n*3*4+4)>MF_LEN) 
+	{
+		errds(MED,"s3d_pep_vertices()","too much data");
+		return(-1);  /*  impossible */
+	}
+	*((uint32_t *)buf)=htonl(object);
+	memcpy(buf+4,lbuf,3*4*n);
+	net_send(S3D_P_C_PEP_LINE, (char *)buf,n*3*4+4);
+	return(0);
+	
+}
+/*  replaces the last n vertices. */
+int s3d_pep_vertices(int object, float *vbuf,unsigned short n)
+{
+	unsigned char buf[MF_LEN+4];
+	if ((n*3*sizeof(float)+4)>MF_LEN) 
+	{
+		errds(MED,"s3d_pep_polygon_normals()","too much data");
+		return(-1);  /*  impossible */
+	}
+	*((uint32_t *)buf)=htonl(object);
+	memcpy(buf+4,vbuf,3*n*sizeof(float));
+	net_send(S3D_P_C_PEP_VERTEX,(char *)buf,n*3*sizeof(float)+4);
+	return(0);
+	
+}
 /*  peps the last polygon with some texture coords */
 int s3d_pep_polygon_tex_coord(int object, float x1, float y1, float x2, float y2, float x3, float y3)
 {

Modified: trunk/client/s3d.h
===================================================================
--- trunk/client/s3d.h	2006-03-14 19:11:36 UTC (rev 167)
+++ trunk/client/s3d.h	2006-03-14 19:12:29 UTC (rev 168)
@@ -59,15 +59,22 @@
 int s3d_load_materials_a(int object, float *mbuf, unsigned long start, unsigned short n);
 int s3d_push_polygon(int object, int v1, int v2, int v3, int material);
 int s3d_push_polygons(int object, unsigned long *pbuf, unsigned short n);
+int s3d_push_line(int object, int v1, int v2, int material);
+int s3d_push_lines(int object, unsigned long *lbuf, unsigned short n);
 int s3d_push_texture(int object, unsigned short w, unsigned short h);
 int s3d_pop_vertex(int object, unsigned long n);
 int s3d_pop_polygon(int object, unsigned long n);
 int s3d_pop_material(int object, unsigned long n);
 int s3d_pop_texture(int object, unsigned long n);
+int s3d_pop_polygon(int object, unsigned long n);
 int s3d_pep_polygon_normals(int object, float *nbuf,unsigned short n);
 int s3d_pep_polygon_tex_coord(int object, float x1, float y1, float x2, float y2, float x3, float y3);
 int s3d_pep_polygon_tex_coords(int object, float *tbuf,unsigned short n);
 int s3d_pep_material_texture(int object, unsigned long mat, unsigned long tex);
+int s3d_pep_vertex(int object, float x, float y, float z);
+int s3d_pep_vertices(int object, float *vbuf,unsigned short n);
+int s3d_pep_line(int object, int v1, int v2, int material);
+int s3d_pep_lines(int object, unsigned long *lbuf,unsigned short n);
 int s3d_load_polygon_normals(int object, float *nbuf,unsigned long start, unsigned short n);
 int s3d_load_polygon_tex_coords(int object, float *tbuf, unsigned long start, unsigned short n);
 int s3d_load_texture(int object, unsigned long tex, unsigned short xpos, unsigned short ypos, unsigned short w, unsigned short h, char *data);

Modified: trunk/server/global.h
===================================================================
--- trunk/server/global.h	2006-03-14 19:11:36 UTC (rev 167)
+++ trunk/server/global.h	2006-03-14 19:12:29 UTC (rev 168)
@@ -81,6 +81,11 @@
 	uint32_t mat;  				 /*  material index */
 	struct t_texc tc[3];		 /*  texture coords */
 };
+struct t_line
+{
+	uint32_t v[2];
+	uint32_t mat;
+};
 /*  material of surfaces, as it's usual in the OpenGL standard */
 struct t_mat
 {
@@ -128,7 +133,7 @@
 #define OF_3DPOINTER	0xB0000000
 
 #define OF_MASK			0x00FFFFFF
-		uint32_t n_vertex, n_mat, n_poly, n_tex;
+		uint32_t n_vertex, n_mat, n_poly, n_tex, n_line;
 					 /*  if OF_VIRTUAL is set, n_mat contains the pid */
 					 /*  if OF_CLONE is set, n_vertex contains the original oid */
 					 /*  I know this is dirty, but it would a waste of data if I don't do so ... */
@@ -138,6 +143,7 @@
 		struct t_vertex *p_vertex;
 		struct t_mat	*p_mat;
 		struct t_poly	*p_poly;
+		struct t_line   *p_line;
 		struct t_tex	*p_tex;
 		struct t_vertex translate,rotate;
 		float 			scale;
@@ -308,18 +314,22 @@
 int obj_push_vertex		(struct t_process *p, uint32_t oid, float *x, uint32_t n);
 int obj_push_mat		(struct t_process *p, uint32_t oid, float *x, uint32_t n);
 int obj_push_poly		(struct t_process *p, uint32_t oid, uint32_t *x, uint32_t n);
+int obj_push_line		(struct t_process *p, uint32_t oid, uint32_t *x, uint32_t n);
 int obj_push_tex		(struct t_process *p, uint32_t oid, uint16_t *x, uint32_t n);
 int obj_pep_poly_normal	(struct t_process *p, uint32_t oid, float *x, uint32_t n);
 int obj_pep_poly_texc	(struct t_process *p, uint32_t oid, float *x, uint32_t  n);
-int obj_pep_mat			(struct t_process *p, uint32_t oid,float *x, uint32_t n);
+int obj_pep_mat			(struct t_process *p, uint32_t oid, float *x, uint32_t n);
 int obj_pep_mat_tex		(struct t_process *p, uint32_t oid, uint32_t *x, uint32_t n);
+int obj_pep_vertex		(struct t_process *p, uint32_t oid, float *x, uint32_t n);
+int obj_pep_line		(struct t_process *p, uint32_t oid, uint32_t *x, uint32_t n);
 int obj_load_poly_normal(struct t_process *p, uint32_t oid, float *x, uint32_t start, uint32_t n);
 int obj_load_poly_texc	(struct t_process *p, uint32_t oid, float *x, uint32_t start, uint32_t n);
-int obj_load_mat		(struct t_process *p, uint32_t oid,float *x, uint32_t start, uint32_t n);
+int obj_load_mat		(struct t_process *p, uint32_t oid, float *x, uint32_t start, uint32_t n);
 int obj_load_tex		(struct t_process *p, uint32_t oid, uint32_t tex, uint16_t x, uint16_t y, uint16_t w, uint16_t h, uint8_t *pixbuf);
 int obj_del_vertex		(struct t_process *p, uint32_t oid, uint32_t n);
 int obj_del_mat			(struct t_process *p, uint32_t oid, uint32_t n);
 int obj_del_poly		(struct t_process *p, uint32_t oid, uint32_t n);
+int obj_del_line		(struct t_process *p, uint32_t oid, uint32_t n);
 int obj_del_tex			(struct t_process *p, uint32_t oid, uint32_t n);
 int obj_toggle_flags	(struct t_process *p, uint32_t oid, uint8_t type, uint32_t flags);
 int obj_translate		(struct t_process *p, uint32_t oid, float *transv);

Modified: trunk/server/object.c
===================================================================
--- trunk/server/object.c	2006-03-14 19:11:36 UTC (rev 167)
+++ trunk/server/object.c	2006-03-14 19:12:29 UTC (rev 168)
@@ -240,6 +240,46 @@
 	}
 	return(0);
 }
+/*  its always the same ... this time we push some lines on the stack */
+int obj_push_line(struct t_process *p, uint32_t oid, uint32_t *x, uint32_t n)
+{
+	uint32_t i,m;
+	struct t_line *p_line;
+	struct t_obj *obj;
+	uint32_t *px;
+	if (obj_valid(p,oid,obj))
+	{
+		if (obj->oflags&OF_NODATA)
+		{
+			errds(MED,"obj_push_line()","error: no data on object allowed!");
+			return(-1);
+		}
+
+		m=obj->n_line;	 /*  saving the first number of lines */
+		px=x; 				 /*  movable pointer for x, later */
+		if (NULL!=(p_line=realloc(obj->p_line,sizeof(struct t_line) * ( n + (obj->n_line)))))
+		{
+			if (obj->dplist)
+			{
+				dprintf(VLOW,"freeing display list %d to get new data",obj->dplist);
+				glDeleteLists(obj->dplist,1);
+				obj->dplist=0;
+			}
+			obj->p_line=p_line;
+			for (i=0;i<n;i++)
+			{
+				obj->p_line[m+i].v[0]=*(px++);
+				obj->p_line[m+i].v[1]=*(px++);
+				obj->p_line[m+i].mat=*(px++);
+			}
+			obj->n_line+=n;
+		}
+	} else 
+	{
+		return(-1);
+	}
+	return(0);
+}
 /* creates n new textures on the texture stack, of object oid, with (w,h)
  * given through *x */
 int obj_push_tex(struct t_process *p, uint32_t oid, uint16_t *x, uint32_t n)
@@ -408,8 +448,8 @@
 	float *px;
 	if (obj_valid(p,oid,obj))
 	{
-		m=obj->n_mat;	 /*  saving the first number of vertices */
-		if (m<n)	 /*  saving the first number of polys */
+		m=obj->n_mat;	 /*  saving the first number of materials */
+		if (m<n)	
 			n=m;  /*  when more mats than available should be pepped,  */
 				 /*  just pep the first m mats */
 		px=x; 				 /*  movable pointer for x, later */
@@ -446,6 +486,115 @@
 	}
 	return(0);
 }
+/*  overwrite n latest lines with some other lines */
+int obj_pep_line(struct t_process *p, uint32_t oid, uint32_t *x, uint32_t n)
+{
+	uint32_t i,m;
+	struct t_obj *obj;
+	uint32_t *px;
+	if (obj_valid(p,oid,obj))
+	{
+		m=obj->n_line;	 /*  saving the first number of lines */
+		if (m<n)	
+			n=m;  /*  when more lines than available should be pepped,  */
+				 /*  just pep the first m lines */
+		px=x; 				 /*  movable pointer for x, later */
+		if (obj->oflags&OF_NODATA)
+		{
+			errds(MED,"obj_pep_line()","error: no data on object allowed!");
+			return(-1);
+		}
+		if (obj->dplist)
+		{
+			dprintf(VLOW,"freeing display list %d to get new data",obj->dplist);
+			glDeleteLists(obj->dplist,1);
+			obj->dplist=0;
+		}
+		dprintf(MED,"pepping lines %d to %d",(m-n),m);
+		for (i=(m-n);i<m;i++)
+		{
+			obj->p_line[i].v[0]=*(px++);
+			obj->p_line[i].v[1]=*(px++);
+			obj->p_line[i].mat=*(px++);
+		}
+	} else 
+	{
+		return(-1);
+	}
+	return(0);
+}
+
+
+/*  overwrite n latest vertices with some other vertices */
+int obj_pep_vertex(struct t_process *p, uint32_t oid, float *x, uint32_t n)
+{
+	uint32_t i,m;
+	float r;
+	struct t_vertex *a;
+	struct t_obj *obj;
+	float *px;
+	int is_clnsrc;
+	if (obj_valid(p,oid,obj))
+	{
+		m=obj->n_vertex;	 /*  saving the first number of vertices */
+		if (m<n)	 
+			n=m;  /*  when more mats than available should be pepped,  */
+				 /*  just pep the first m mats */
+		px=x; 				 /*  movable pointer for x, later */
+		if (obj->oflags&OF_NODATA)
+		{
+			errds(MED,"obj_pep_vertices()","error: no data on object allowed!");
+			return(-1);
+		}
+		if (obj->dplist)
+		{
+			dprintf(VLOW,"freeing display list %d to get new data",obj->dplist);
+			glDeleteLists(obj->dplist,1);
+			obj->dplist=0;
+		}
+		dprintf(MED,"pepping vertices %d to %d",(m-n),m);
+		for (i=(m-n);i<m;i++)
+		{
+			obj->p_vertex[m+i].x=*(px++);
+			obj->p_vertex[m+i].y=*(px++);
+			obj->p_vertex[m+i].z=*(px++);
+			a=&obj->p_vertex[m+i];
+			r=obj->scale * sqrt(	
+					(a->x * a->x ) + 
+					(a->y * a->y ) +
+					(a->z * a->z ));
+			if (r> obj->r) obj->r=r;
+		}
+		if (p->id!=MCP)
+		{
+		/* this is doing live update which is quite okay, but we need
+		 * to check for biggest update and clonesources ... */
+			obj_check_biggest_object(p,oid);
+		}
+		if (p->object[oid]->oflags&OF_CLONE_SRC)
+		{
+			is_clnsrc=0;
+			for (i=0;i<p->n_obj;i++)
+			{
+				if (p->object[i]!=NULL)
+				{
+					if ((p->object[i]->oflags&OF_CLONE) && (p->object[i]->n_vertex==oid))
+					{ /* if it's pointing to our object ... */
+						is_clnsrc=1;
+						p->object[i]->r=obj->r*(p->object[i]->r/obj->scale); /* give it the new radius too! */
+						obj_check_biggest_object(p,i);
+					}
+				}
+			}
+			if (!is_clnsrc)
+				p->object[oid]->oflags&=~OF_CLONE_SRC;
+		}
+	} else 
+	{
+		return(-1);
+	}
+	return(0);
+}
 /*  assign textures to the last n materials */
 int obj_pep_mat_tex(struct t_process *p, uint32_t oid, uint32_t *x, uint32_t n)
 {
@@ -803,6 +952,45 @@
 		return(-1);
 	return(0);
 }
+/*  deletes the last n lines of the stack. if n>=n_line, delete all lines */
+int obj_del_line(struct t_process *p, uint32_t oid, uint32_t n)
+{
+	uint32_t m;
+	struct t_line *p_line;
+	struct t_obj *obj;
+	if (obj_valid(p,oid,obj))
+	{
+		if (obj->oflags&OF_NODATA)
+		{
+			errds(MED,"obj_del_line()","error: can't delete line in this object!");
+			return(-1);
+		}
+
+		dprintf(VLOW,"deleting %d lines of pid %d/ oid %d",n,p->id,oid);
+		m=obj->n_line;	 /*  saving the first number of line  */
+		if (n>=m) 
+		{
+			if (m>0)
+				free(obj->p_line);
+			obj->n_line=0;
+			obj->p_line=NULL;
+		}
+		else if (n>0)
+		if (NULL!=(p_line=realloc(obj->p_line,sizeof(struct t_line) * ( m - n))))
+		{
+			if (obj->dplist)
+			{
+				dprintf(VLOW,"freeing display list %d to get new data",obj->dplist);
+				glDeleteLists(obj->dplist,1);
+				obj->dplist=0;
+			}
+			obj->p_line=p_line;
+			obj->n_line-=n;
+		}
+	} else 
+		return(-1);
+	return(0);
+}
 /*  delete texture object */
 int obj_del_tex(struct t_process *p, uint32_t oid, uint32_t n)
 {
@@ -820,7 +1008,7 @@
 		}
 
 		dprintf(VLOW,"deleting %d textures of pid %d/ oid %d",n,p->id,oid);
-		m=obj->n_tex;	 /*  saving the first number of poly  */
+		m=obj->n_tex;	 /*  saving the first number of textures  */
 		if (n>=m) 
 		{
 			for (i=0;i<m;i++)

Modified: trunk/server/proto.c
===================================================================
--- trunk/server/proto.c	2006-03-14 19:11:36 UTC (rev 167)
+++ trunk/server/proto.c	2006-03-14 19:12:29 UTC (rev 168)
@@ -144,6 +144,19 @@
 					obj_push_poly(p,oid, (uint32_t *)cptr, num);
 				}
 				break;
+			case S3D_P_C_PUSH_LINE:
+				if (length>4)
+				{
+					oid=ntohl(*((uint32_t *)cptr));		cptr+=4;
+					num=(length-4)/(4*3);
+ 					dprintf(LOW,"received %d new lines for object oid...%d", num, oid); 
+					for (i=0;i<(num*3);i++)
+						*((uint32_t *)cptr+i)=
+								ntohl(*((uint32_t *)cptr+i));
+					 /*  convert index names */
+					obj_push_line(p,oid, (uint32_t *)cptr, num);
+				}
+				break;
 			case S3D_P_C_PUSH_TEX:
 				if (length>4)
 				{
@@ -184,6 +197,16 @@
 					obj_pep_mat(p,oid, (float *)cptr, num);
 				}
 				break;
+			case S3D_P_C_PEP_VERTEX:
+				if (length>4)
+				{
+					oid=ntohl(*((uint32_t *)cptr));		cptr+=4;
+					num=(length-4)/(4*3);
+ 					dprintf(LOW,"pepping %d new vertices for object oid...%d", num, oid); 
+					obj_pep_vertex(p,oid, (float  *)cptr, num);
+				}
+				break;
+
 			case S3D_P_C_PEP_MAT_TEX:
 				if (length>4)
 				{
@@ -193,6 +216,19 @@
 					obj_pep_mat_tex(p,oid, (uint32_t *)cptr, num);
 				}
 				break;
+			case S3D_P_C_PEP_LINE:
+				if (length>4)
+				{
+					oid=ntohl(*((uint32_t *)cptr));		cptr+=4;
+					num=(length-4)/(4*3);
+ 					dprintf(LOW,"pepping %d new lines for object oid...%d", num, oid); 
+					for (i=0;i<(num*3);i++)
+						*((uint32_t *)cptr+i)=
+								ntohl(*((uint32_t *)cptr+i));
+					obj_pep_line(p,oid, (uint32_t *)cptr, num);
+				}
+				break;
+
 			case S3D_P_C_LOAD_POLY_NORMAL:
 				if (length>8)
 				{
@@ -256,6 +292,16 @@
 					obj_del_poly(p,oid,num);
 				}	
 				break;
+			case S3D_P_C_DEL_LINE:
+				if (length==8)
+				{
+					oid=ntohl(*((uint32_t *)cptr));		cptr+=4;
+					num=ntohl(*((uint32_t *)cptr));		cptr+=4;
+ 					dprintf(LOW,"deleting %d lines for object oid...%d", num, oid); 
+					obj_del_line(p,oid,num);
+				}	
+				break;
+
 			case S3D_P_C_DEL_MAT:
 				if (length==8)
 				{

Modified: trunk/server/proto.h
===================================================================
--- trunk/server/proto.h	2006-03-14 19:11:36 UTC (rev 167)
+++ trunk/server/proto.h	2006-03-14 19:12:29 UTC (rev 168)
@@ -54,6 +54,9 @@
 			 /*  if 8b: */
 			 /*  4b:		oid from */
 			 /*  4b:		oid to */
+#define S3D_P_C_PUSH_LINE		7
+			 /*  4b: 		object id */
+			 /*  n*3d		from vertex, to vertex, color */
 #define S3D_P_C_PUSH_VERTEX		8
 			 /*  4b:		object id */
 			 /*  n*3f:	vertexes, each with x,y,z in float */
@@ -85,11 +88,21 @@
 			 /*  n*6f		poly texture coordinates (3* u/v for each vertex of the poly) */
 #define S3D_P_C_PEP_MAT			18
 			 /*  4b:		object id */
-			 /*  3*4f:	material elements [amb,spec,diff with r,g,b,a] */
+			 /*  3*4f:		material elements [amb,spec,diff with r,g,b,a] */
 #define S3D_P_C_PEP_MAT_TEX		19
 			 /*  4b:		object id */
 			 /*  4b:		texture index references */
+#define S3D_P_C_PEP_VERTEX		20
+			 /*  4b:		object id */
+			 /*  n*3f:	vertexes, each with x,y,z in float */
+#define S3D_P_C_PEP_LINE		21
+			 /* 4b:			object id */
+			 /* n*3u:		line information (from,to,color)*/
+#define S3D_P_C_DEL_LINE		22
+			 /*  4b:		object id */
+			 /*  4b:		number */
 
+
 #define S3D_P_C_LOAD_POLY_NORMAL	24
 			 /*  4b:		object id */
 			 /*  4b:		position */



From dotslash at berlios.de  Tue Mar 14 20:38:15 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Tue, 14 Mar 2006 20:38:15 +0100
Subject: [S3d-svn] r169 - in trunk: . example
Message-ID: <200603141938.k2EJcFT8012369@sheep.berlios.de>

Author: dotslash
Date: 2006-03-14 20:38:12 +0100 (Tue, 14 Mar 2006)
New Revision: 169

Added:
   trunk/example/linetest.c
Modified:
   trunk/
   trunk/example/Makefile.am
Log:
 r243 at balthasar:  dotslash | 2006-03-14 20:37:52 +0100
 - line test



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:240
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:243

Modified: trunk/example/Makefile.am
===================================================================
--- trunk/example/Makefile.am	2006-03-14 19:12:29 UTC (rev 168)
+++ trunk/example/Makefile.am	2006-03-14 19:38:12 UTC (rev 169)
@@ -1,6 +1,6 @@
 noinst_PROGRAMS=	3dsloader filebrowser hudtest katze \
 			radius_test s3dclock snowman \
-			strtest texturetest
+			strtest texturetest linetest
 			
 3dsloader_SOURCES=	3dsloader.c
 filebrowser_SOURCES=	filebrowser.c
@@ -11,6 +11,7 @@
 snowman_SOURCES=	snowman.c
 strtest_SOURCES=	strtest.c
 texturetest_SOURCES=	texturetest.c
+linetest_SOURCES=	linetest.c
 
 CPPFLAGS=		-I$(top_srcdir)/server -I$(top_srcdir)/client
 LIBS=			$(top_builddir)/client/libs3d.la

Added: trunk/example/linetest.c
===================================================================
--- trunk/example/linetest.c	2006-03-14 19:12:29 UTC (rev 168)
+++ trunk/example/linetest.c	2006-03-14 19:38:12 UTC (rev 169)
@@ -0,0 +1,95 @@
+/*
+ * linetest.c
+ * 
+ * Copyright (C) 2006 Simon Wunderlich <dotslash at packetmixer.de>
+ *
+ * This file is part of s3d, a 3d network display server.
+ * See http://s3d.berlios.de/ for more updates.
+ * 
+ * s3d is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation; either version 2 of the License, or
+ * (at your option) any later version.
+ * 
+ * s3d is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ * 
+ * You should have received a copy of the GNU General Public License
+ * along with s3d; if not, write to the Free Software
+ * Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
+ */
+
+
+
+#include <s3d.h>
+#include <stdio.h>  /*  NULL*/
+#include <unistd.h> /* sleep() */
+int i;
+int o;
+void stop(struct s3d_evt *evt)
+{
+	s3d_quit();
+}
+
+void mainloop()
+{
+	i=(i+1)%2;
+	if (i)
+	{
+		s3d_pep_vertex(o,1,-2,0);
+		s3d_pep_line(o,0,2,3);
+	}
+	else
+	{
+		s3d_pep_vertex(o,1,-1,0);
+		s3d_pep_line(o,0,1,0);
+
+	}
+/* 	printf("now it's %s\n",time_str); */
+	sleep(1);
+
+}
+int main (int argc, char **argv)
+{
+	i=0;
+	if (!s3d_init(&argc,&argv,"linetest"))	
+	{
+		o=s3d_new_object();
+		
+		s3d_push_material(o,
+						1,0,0,
+						1,0,0,
+						1,0,0);
+		s3d_push_material(o,
+						0,1,0,
+						0,1,0,
+						0,1,0);
+		s3d_push_material(o,
+						0,1,0,
+						0,1,0,
+						0,1,0);
+		s3d_push_material(o,
+						1,1,0,
+						1,1,0,
+						1,1,0);
+		s3d_push_vertex(o,-1,-1,0);
+		s3d_push_vertex(o,-1,1,0);
+		s3d_push_vertex(o,1,1,0);
+		s3d_push_vertex(o,1,-1,0);
+		s3d_push_line(o,2,3,1);
+		s3d_push_line(o,0,1,0);
+
+		s3d_flags_on(o,S3D_OF_VISIBLE);
+		s3d_set_callback(S3D_EVENT_OBJ_CLICK,	(s3d_cb)stop);
+		s3d_set_callback(S3D_EVENT_QUIT,		(s3d_cb)stop);
+		s3d_mainloop(mainloop);
+		 /*  wait for some object to be clicked */
+		s3d_quit();
+	}
+	return(0);
+}
+
+
+



From dotslash at berlios.de  Tue Mar 14 20:39:59 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Tue, 14 Mar 2006 20:39:59 +0100
Subject: [S3d-svn] r170 - in trunk: . server
Message-ID: <200603141939.k2EJdxe7012716@sheep.berlios.de>

Author: dotslash
Date: 2006-03-14 20:39:56 +0100 (Tue, 14 Mar 2006)
New Revision: 170

Modified:
   trunk/
   trunk/server/graphics.c
   trunk/server/object.c
Log:
 r245 at balthasar:  dotslash | 2006-03-14 20:39:16 +0100
 - line support (fixed)



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:243
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:245

Modified: trunk/server/graphics.c
===================================================================
--- trunk/server/graphics.c	2006-03-14 19:38:12 UTC (rev 169)
+++ trunk/server/graphics.c	2006-03-14 19:39:56 UTC (rev 170)
@@ -360,6 +360,7 @@
 #ifdef G_GLUT
 		glPushMatrix();
 			glRotatef(90,1.0,0.0,0.0);	
+			/* set some evilish green color */
 			glMaterialfv(GL_FRONT,GL_AMBIENT,wire_amb);
 			glMaterialfv(GL_FRONT,GL_SPECULAR,wire_spec);
 			glMaterialfv(GL_FRONT,GL_DIFFUSE,wire_diff);

Modified: trunk/server/object.c
===================================================================
--- trunk/server/object.c	2006-03-14 19:38:12 UTC (rev 169)
+++ trunk/server/object.c	2006-03-14 19:39:56 UTC (rev 170)
@@ -552,13 +552,13 @@
 			glDeleteLists(obj->dplist,1);
 			obj->dplist=0;
 		}
-		dprintf(MED,"pepping vertices %d to %d",(m-n),m);
+		dprintf(MED,"pepping vertices %d to %d",(m-n),m-1);
 		for (i=(m-n);i<m;i++)
 		{
-			obj->p_vertex[m+i].x=*(px++);
-			obj->p_vertex[m+i].y=*(px++);
-			obj->p_vertex[m+i].z=*(px++);
-			a=&obj->p_vertex[m+i];
+			obj->p_vertex[i].x=*(px++);
+			obj->p_vertex[i].y=*(px++);
+			obj->p_vertex[i].z=*(px++);
+			a=&obj->p_vertex[i];
 			r=obj->scale * sqrt(	
 					(a->x * a->x ) + 
 					(a->y * a->y ) +
@@ -1570,6 +1570,51 @@
 		}
 		if (tex!=NULL)
 			glBindTexture( GL_TEXTURE_2D, 0);  /*  switch back to standard texture */
+
+		for (pn=0;pn<obj->n_line; pn++)
+		{
+			mat= obj->p_line[pn].mat;
+			if (mat!=omat) {
+				tex=NULL;
+				if (mat< obj->n_mat) {
+					m=&obj->p_mat[mat];
+					/* dont need to care about textures ...  it's rather impossible
+					 * to get some textures on a line. at least it would look ugly ;)*/
+					matgl[0]=m->amb_r/2;		
+					matgl[1]=m->amb_g/2;		
+					matgl[2]=m->amb_b/2;
+					matgl[3]=m->amb_a;
+		 /* 			glMaterialfv(GL_FRONT_AND_BACK,GL_AMBIENT,matgl); */
+					glMaterialfv(GL_FRONT,GL_AMBIENT,matgl);
+					matgl[0]=m->diff_r/2;
+					matgl[1]=m->diff_g/2;
+					matgl[2]=m->diff_b/2;
+					matgl[3]=m->diff_a;
+		 /* 			glMaterialfv(GL_FRONT_AND_BACK,GL_DIFFUSE,matgl); */
+					glMaterialfv(GL_FRONT,GL_DIFFUSE,matgl);
+					matgl[0]=m->spec_r/2;
+					matgl[1]=m->spec_g/2;
+					matgl[2]=m->spec_b/2;
+					matgl[3]=m->spec_a;
+		 /* 			glMaterialfv(GL_FRONT_AND_BACK,GL_SPECULAR,matgl); */
+					glMaterialfv(GL_FRONT,GL_SPECULAR,matgl);
+				} else {
+					dprintf(MED,"something is wrong with line %d! material: [%d,%d]",pn, mat,obj->n_mat);
+					if (obj->dplist) glEndList();
+					glEnd();
+					glPopMatrix();
+					return(-1);
+				}
+			}
+			omat=mat;		 /*  saving old material */
+			glBegin(GL_LINES);
+			for (i=0; i<2; i++)
+				{
+					v= obj->p_line[pn].v[i];  /*  ... get the vertices ... */
+					glVertex3f(obj->p_vertex[v].x, obj->p_vertex[v].y, obj->p_vertex[v].z);  /*  ...and draw them */
+				}
+			glEnd();
+		}
 		if (obj->dplist) glEndList();
 	}
 	glPopMatrix();



From dotslash at berlios.de  Tue Mar 14 20:40:52 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Tue, 14 Mar 2006 20:40:52 +0100
Subject: [S3d-svn] r171 - trunk
Message-ID: <200603141940.k2EJequh013018@sheep.berlios.de>

Author: dotslash
Date: 2006-03-14 20:40:38 +0100 (Tue, 14 Mar 2006)
New Revision: 171

Modified:
   trunk/
   trunk/TODO
Log:
 r246 at balthasar:  dotslash | 2006-03-14 20:39:37 +0100
 - todo cleanup :D



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:245
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:246

Modified: trunk/TODO
===================================================================
--- trunk/TODO	2006-03-14 19:39:56 UTC (rev 170)
+++ trunk/TODO	2006-03-14 19:40:38 UTC (rev 171)
@@ -8,9 +8,7 @@
 	really not be 0x0
 	3ds reader won't work on linux ppc, probably lots of memory leaks
 server:
-	* pep_vertex
 	* implement mouse movement
-	* implement lines
 	* endless loop in proccess_args() (getopts) on linux ppc
 
 autotools:



From dotslash at berlios.de  Tue Mar 14 21:03:26 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Tue, 14 Mar 2006 21:03:26 +0100
Subject: [S3d-svn] r172 - in trunk: . apps/s3d_x11gate apps/s3dfm apps/s3dgps apps/s3dvt client example server
Message-ID: <200603142003.k2EK3Qko021931@sheep.berlios.de>

Author: dotslash
Date: 2006-03-14 21:03:24 +0100 (Tue, 14 Mar 2006)
New Revision: 172

Modified:
   trunk/
   trunk/apps/s3d_x11gate/s3d_x11gate.c
   trunk/apps/s3dfm/main.c
   trunk/apps/s3dgps/s3dgps.c
   trunk/apps/s3dvt/main.c
   trunk/client/object_queue.c
   trunk/client/proto_out.c
   trunk/client/shm.c
   trunk/example/3dsloader.c
   trunk/example/filebrowser.c
   trunk/example/katze.c
   trunk/example/radius_test.c
   trunk/example/s3dclock.c
   trunk/example/snowman.c
   trunk/example/texturetest.c
   trunk/server/global.h
   trunk/server/main.c
Log:
 r249 at balthasar:  dotslash | 2006-03-14 21:01:34 +0100
 - usleep() -> nanosleep()



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:246
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:249

Modified: trunk/apps/s3d_x11gate/s3d_x11gate.c
===================================================================
--- trunk/apps/s3d_x11gate/s3d_x11gate.c	2006-03-14 19:40:38 UTC (rev 171)
+++ trunk/apps/s3d_x11gate/s3d_x11gate.c	2006-03-14 20:03:24 UTC (rev 172)
@@ -25,12 +25,14 @@
 #include <s3d.h>		 /*  s3d_*() */
 #include <stdlib.h> 	 /*  getenv() */
 #include <stdio.h>		 /*  printf() */
-#include <unistd.h>		 /*  usleep() */
 #include <X11/Xlib.h>	 /*  Ximage, Display, X*() */
 #include <X11/Xutil.h>	 /*  XDestroyImage() */
 #define XK_MISCELLANY
 #include <X11/keysymdef.h>	 /* keysyms */
 #include <X11/extensions/XTest.h>	/* keyboard/mouse input via s3d */
+#include <time.h>	/* nanosleep() */
+static struct timespec t={0,100*1000*1000}; /* 100 mili seconds */
+
 int oid;
 XImage *image;
 Display *dpy=0;
@@ -120,7 +122,8 @@
 		otex_image=swap_timg;
 	}
 	XDestroyImage(image);
-	usleep(100000);
+
+	nanosleep(&t,NULL); 
 }
 void keypress(struct s3d_evt *event)
 {

Modified: trunk/apps/s3dfm/main.c
===================================================================
--- trunk/apps/s3dfm/main.c	2006-03-14 19:40:38 UTC (rev 171)
+++ trunk/apps/s3dfm/main.c	2006-03-14 20:03:24 UTC (rev 172)
@@ -24,12 +24,14 @@
 
 #include <s3d.h>
 #include <stdio.h> 	 /*  printf() */
-#include <unistd.h>  /*  usleep() */
 #include <dirent.h>  /*  dirent */
 #include <stdlib.h>	 /*  malloc() */
 #include <string.h>  /*  strlen(), strncmp(), strrchr() */
 #include <math.h>	 /*  sin(),cos() */
+#include <time.h>	/* nanosleep() */
+static struct timespec t={0,100*1000*1000}; /* 100 mili seconds */
 
+
 #define SH			0.4 /* height of the step */
 
 #define T_DUNO		0
@@ -262,7 +264,7 @@
 }
 void mainloop()
 {
-	usleep(10000);
+	nanosleep(&t,NULL); 
 }
 int main (int argc, char **argv)
 {

Modified: trunk/apps/s3dgps/s3dgps.c
===================================================================
--- trunk/apps/s3dgps/s3dgps.c	2006-03-14 19:40:38 UTC (rev 171)
+++ trunk/apps/s3dgps/s3dgps.c	2006-03-14 20:03:24 UTC (rev 172)
@@ -25,13 +25,16 @@
 #include <s3d.h>
 #include <gps.h> 	/* gps_*() */
 #include <stdio.h> 	/* printf() */
-#include <unistd.h>	/* sleep() */
 #include <errno.h>  /* errno */
 #include <stdlib.h>	/* malloc(), free() */
 #include <string.h> /* strlen() */
 #include <math.h>	/* sin(),cos(), M_PI */
 #include <simage.h> /* simage things */
 
+#include <time.h>	/* nanosleep() */
+static struct timespec t={0,33*1000*1000}; /* 30 fps */
+
+
 #define PIXELFACT	2817.947378
 #define PIXELFACTN	281794.7378
 #define BFS			1024
@@ -84,7 +87,7 @@
 	show_position(dgps);
 	frame++;
 
-	usleep(1000000/30);
+	nanosleep(&t,NULL); 
 }
 
 /* a bad 2d-calculation right now ... */

Modified: trunk/apps/s3dvt/main.c
===================================================================
--- trunk/apps/s3dvt/main.c	2006-03-14 19:40:38 UTC (rev 171)
+++ trunk/apps/s3dvt/main.c	2006-03-14 20:03:24 UTC (rev 172)
@@ -33,7 +33,10 @@
 #include <sys/ioctl.h> 	 /*  ioctl() */
 #include <pthread.h>	 /*  pthread_create() */
 #include <s3d.h>		 /*  s3d_* */
+#include <time.h>	/* nanosleep() */
+static struct timespec t={0,100*1000*1000}; /* 100 mili seconds */
 
+
 static int pid;
 static int term_mode=0;
 
@@ -405,6 +408,8 @@
 void mainloop()
 {
 	usleep(10000);
+	nanosleep(&t,NULL); 
+
 	if ((i+=2)>100)
 	{
 		if (i%2)

Modified: trunk/client/object_queue.c
===================================================================
--- trunk/client/object_queue.c	2006-03-14 19:40:38 UTC (rev 171)
+++ trunk/client/object_queue.c	2006-03-14 20:03:24 UTC (rev 172)
@@ -26,7 +26,8 @@
 #include "s3dlib.h"
 #include "proto.h"	 
 #include <stdlib.h>	 /*  malloc(),free(), realloc() */
-#include <unistd.h>	 /*  usleep() */
+#include <time.h>		 /* nanosleep() */
+
 /*  objects are requested before beeing used for having fast  */
 /*  access when needed. this also makes things more asynchronous, */
 /*  therefore faster (I hope). */
@@ -80,6 +81,7 @@
 	queue[queue_size-1]=oid;
 	return(0);
 }
+static struct timespec t={0,10*1000}; /* 10 micro seconds */
 /*  an object is requested!! give one out: */
 unsigned int _queue_want_object()
 {
@@ -104,7 +106,7 @@
 		requested++;
 	}
 	s3d_net_check();
-	usleep(10);
+	nanosleep(&t,NULL); 
 	} while(i++<TIMEOUT);
 
 	errds(LOW,"_queue_want_object()","timeout is reached. server is extremly slow/laggy or dead");	

Modified: trunk/client/proto_out.c
===================================================================
--- trunk/client/proto_out.c	2006-03-14 19:40:38 UTC (rev 171)
+++ trunk/client/proto_out.c	2006-03-14 20:03:24 UTC (rev 172)
@@ -32,7 +32,6 @@
 #include <stdlib.h>		 /*  getenv(),atoi(), malloc() */
 #ifdef WIN32
 	#define uint32_t unsigned long  /*  sohn */
-	#define usleep(x) sleep(x/1000)  /*  sohn wars */
 #else
 	#include <netdb.h>		 /*  gethostbyname()  */
 #endif

Modified: trunk/client/shm.c
===================================================================
--- trunk/client/shm.c	2006-03-14 19:40:38 UTC (rev 171)
+++ trunk/client/shm.c	2006-03-14 20:03:24 UTC (rev 172)
@@ -24,13 +24,13 @@
 
 #include "s3d.h"
 #include "s3dlib.h"
-#include <stdlib.h> /* malloc() */
+#include <stdlib.h> 	/* malloc() */
 #include <sys/types.h>
 #include <sys/ipc.h>
 #include <sys/shm.h>
 #include <netinet/in.h>	/* ntohs() */
-#include <errno.h> /* errno */
-#include <unistd.h>	/* usleep() */
+#include <errno.h> 		/* errno */
+#include <time.h>		/* nanosleep() */
 #ifdef SHM
 
 #define SHM_SIZE 		sizeof(key_t)*2  		/* space for the keys */
@@ -40,6 +40,7 @@
 static struct buf_t *data_in,*data_out;
 static int shmid_in, shmid_out;
 static int shm_idle=0;
+struct timespec t={0,1*1000}; /* 1 micro second */
 /* char ftoken[]="/tmp/.s3d_shm";*/
 
 int _shm_init(char *ftoken)
@@ -133,7 +134,7 @@
 			return(-1);
 		}
 		if (wait>10)
-			usleep(1);
+			nanosleep(&t,NULL); 
 	}
 	return(s - no_left);
 }
@@ -156,7 +157,7 @@
 			return(-1);
 		}
 		if (wait>10)
-			usleep(1);
+			nanosleep(&t,NULL); 
 	}
 	return(s - no_left);
 }

Modified: trunk/example/3dsloader.c
===================================================================
--- trunk/example/3dsloader.c	2006-03-14 19:40:38 UTC (rev 171)
+++ trunk/example/3dsloader.c	2006-03-14 20:03:24 UTC (rev 172)
@@ -25,14 +25,15 @@
 
 
 #include <s3d.h>
-#include <stdio.h>  /*  NULL */
-#include <unistd.h>  /* usleep() */
+#include <stdio.h>  /* NULL */
+#include <time.h>	/* nanosleep() */
+static struct timespec t={0,100*1000*1000}; /* 100 mili seconds */
 int i,oid;
 void mainloop()
 {
 	s3d_rotate(oid,0,i,0);
 	i++;
-	usleep(100000);
+	nanosleep(&t,NULL); 
 }
 void object_click(struct s3d_evt *evt)
 {

Modified: trunk/example/filebrowser.c
===================================================================
--- trunk/example/filebrowser.c	2006-03-14 19:40:38 UTC (rev 171)
+++ trunk/example/filebrowser.c	2006-03-14 20:03:24 UTC (rev 172)
@@ -26,11 +26,13 @@
 
 #include <s3d.h>
 #include <stdio.h> 	 /*  printf() */
-#include <unistd.h>  /*  usleep() */
 #include <dirent.h>  /*  dirent */
 #include <stdlib.h>	 /*  malloc() */
 #include <string.h>  /*  strlen(), strncmp(), strrchr() */
 #include <math.h>	 /*  sin(),cos() */
+#include <time.h>	/* nanosleep() */
+static struct timespec t={0,100*1000*1000}; /* 100 mili seconds */
+
 #define T_DUNO		0
 #define T_LOCALDIR	1
 #define T_BACKDIR	2
@@ -196,7 +198,7 @@
 }
 void mainloop()
 {
-	usleep(10000);
+	nanosleep(&t,NULL); 
 }
 int main (int argc, char **argv)
 {

Modified: trunk/example/katze.c
===================================================================
--- trunk/example/katze.c	2006-03-14 19:40:38 UTC (rev 171)
+++ trunk/example/katze.c	2006-03-14 20:03:24 UTC (rev 172)
@@ -25,8 +25,10 @@
 
 
 #include <s3d.h>
-#include <unistd.h> /* usleep()*/
 #include <math.h>	/* sin() */
+#include <time.h>	/* nanosleep() */
+static struct timespec t={0,10*1000*1000}; /* 10 mili seconds */
+
 int a;
 int rot_point,body,legfr,legbr,legfl,legbl,tail;
 
@@ -42,7 +44,7 @@
 
 	s3d_rotate(tail,0,30,110+pos);
 	s3d_rotate(rot_point,0,-a,0);
-	usleep(10000);
+	nanosleep(&t,NULL); 
 }
 int main(int argc, char **argv)
 {

Modified: trunk/example/radius_test.c
===================================================================
--- trunk/example/radius_test.c	2006-03-14 19:40:38 UTC (rev 171)
+++ trunk/example/radius_test.c	2006-03-14 20:03:24 UTC (rev 172)
@@ -23,7 +23,9 @@
 
 #include <s3d.h>
 #include <stdio.h>  /*  NULL */
-#include <unistd.h>  /* usleep() */
+#include <time.h>	/* nanosleep() */
+static struct timespec t={0,10*1000*1000}; /* 10 mili seconds */
+
 #include <math.h>	/* sin(), cos() */
 int item1, item2, item3;
 int i=0;
@@ -50,7 +52,7 @@
 	
 
 	i++;
-	usleep(100000);
+	nanosleep(&t,NULL); 
 }
 int main (int argc, char **argv)
 {

Modified: trunk/example/s3dclock.c
===================================================================
--- trunk/example/s3dclock.c	2006-03-14 19:40:38 UTC (rev 171)
+++ trunk/example/s3dclock.c	2006-03-14 20:03:24 UTC (rev 172)
@@ -24,9 +24,9 @@
 
 #include <s3d.h>
 #include <stdio.h>  /*  NULL, sprintf() */
-#include <unistd.h>  /* usleep() */
-#include <time.h>	 /*  struct tm, time_t...  */
+#include <time.h>	 /*  nanosleep(), struct tm, time_t...  */
 #include <string.h>  /*  strlen() */
+static struct timespec t={0,100*1000*1000}; /* 100 mili seconds */
 int big_p,lil_p,bg,sec_p;
 int str_oid=-1, o_str_oid;
 struct tm *mytime;
@@ -58,7 +58,7 @@
 			s3d_del_object(o_str_oid);
 	}
 /* 	printf("now it's %s\n",time_str); */
-	usleep(100000);
+	nanosleep(&t,NULL); 
 
 }
 int main (int argc, char **argv)

Modified: trunk/example/snowman.c
===================================================================
--- trunk/example/snowman.c	2006-03-14 19:40:38 UTC (rev 171)
+++ trunk/example/snowman.c	2006-03-14 20:03:24 UTC (rev 172)
@@ -22,8 +22,10 @@
  */
 
 #include <s3d.h>
-#include <unistd.h> /* usleep()*/
 #include <math.h>	/* sin() */
+#include <time.h>	/* nanosleep() */
+static struct timespec t={0,10*1000*1000}; /* 10 mili seconds */
+
 int a;
 int oid_head;
 int oid_middle;
@@ -41,7 +43,7 @@
 	s3d_translate(oid_head,		0,1.5 +2.00*pos,0);
 	s3d_translate(oid_middle,	0,0   +1.25*pos,0);
 	s3d_translate(oid_foot,		0,-2  +1.00*pos,0);
-	usleep(10000);
+	nanosleep(&t,NULL); 
 }
 int main(int argc, char **argv)
 {

Modified: trunk/example/texturetest.c
===================================================================
--- trunk/example/texturetest.c	2006-03-14 19:40:38 UTC (rev 171)
+++ trunk/example/texturetest.c	2006-03-14 20:03:24 UTC (rev 172)
@@ -24,14 +24,16 @@
 
 #include <s3d.h>
 #include <stdio.h>  /*  NULL */
-#include <unistd.h>  /* usleep() */
 #include <stdlib.h>  /* malloc(),free() */
+#include <time.h>	/* nanosleep() */
+static struct timespec t={0,10*1000*1000}; /* 10 mili seconds */
+
 int i,oid;
 void mainloop()
 {
 	i=(i+1)%360;
 	s3d_rotate(oid,0,i,0);
-	usleep(10000);
+	nanosleep(&t,NULL); 
 }
 #define MAXX	300
 #define MAXY	300

Modified: trunk/server/global.h
===================================================================
--- trunk/server/global.h	2006-03-14 19:40:38 UTC (rev 171)
+++ trunk/server/global.h	2006-03-14 20:03:24 UTC (rev 172)
@@ -27,9 +27,6 @@
 #ifdef SHM
 	#include <sys/shm.h> /* key_t */
 #endif
-#ifdef WIN32  /*  sohn wars */
-#define usleep(x)	sleep(x/1000)  /*  sohn wars */
-#endif   /*  sohn wars */
 /*  variables and defines */
 extern int frame_mode; 	 /*  GLUT, SDL, ... ? */
 extern int running;		 /*  server running flag */

Modified: trunk/server/main.c
===================================================================
--- trunk/server/main.c	2006-03-14 19:40:38 UTC (rev 171)
+++ trunk/server/main.c	2006-03-14 20:03:24 UTC (rev 172)
@@ -23,8 +23,9 @@
 
 
 #include "global.h" 		 /*  contains the prototypes of all modules */
-#include <unistd.h> 	 /*  usleep() */
-#include <stdlib.h>		 /*  exit() */
+#include <time.h>		 /* nanosleep() */
+#include <stdlib.h>		 /* exit() */
+#include <unistd.h>		 /* sleep(), fork() */
 #ifdef G_GLUT
 #include <GL/glut.h> 	 /*  glutMainLoop() */
 #endif
@@ -114,9 +115,11 @@
 
 /*  things which should be done each time in main loop go here! this is */
 /*  just for the case we use a function for the mainloop like we do for glut... */
+
+struct timespec t={0,10*1000*1000}; /* 10 mili seconds */
 void one_time() 
 {
-	usleep(10000);
+	nanosleep(&t,NULL); 
 	user_main();
 	network_main(); 
 	graphics_main();



From dotslash at berlios.de  Tue Mar 14 21:04:08 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Tue, 14 Mar 2006 21:04:08 +0100
Subject: [S3d-svn] r173 - in trunk: . apps/s3dvt
Message-ID: <200603142004.k2EK48cQ022215@sheep.berlios.de>

Author: dotslash
Date: 2006-03-14 21:04:06 +0100 (Tue, 14 Mar 2006)
New Revision: 173

Modified:
   trunk/
   trunk/apps/s3dvt/main.c
Log:
 r250 at balthasar:  dotslash | 2006-03-14 21:02:50 +0100
 - correct timing



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:249
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:250

Modified: trunk/apps/s3dvt/main.c
===================================================================
--- trunk/apps/s3dvt/main.c	2006-03-14 20:03:24 UTC (rev 172)
+++ trunk/apps/s3dvt/main.c	2006-03-14 20:04:06 UTC (rev 173)
@@ -34,7 +34,7 @@
 #include <pthread.h>	 /*  pthread_create() */
 #include <s3d.h>		 /*  s3d_* */
 #include <time.h>	/* nanosleep() */
-static struct timespec t={0,100*1000*1000}; /* 100 mili seconds */
+static struct timespec t={0,10*1000*1000}; /* 10 mili seconds */
 
 
 static int pid;



From nichtsnutz at berlios.de  Tue Mar 14 21:22:02 2006
From: nichtsnutz at berlios.de (nichtsnutz at BerliOS)
Date: Tue, 14 Mar 2006 21:22:02 +0100
Subject: [S3d-svn] r174 - trunk/apps/olsrs3d
Message-ID: <200603142022.k2EKM2xL031931@sheep.berlios.de>

Author: nichtsnutz
Date: 2006-03-14 21:21:54 +0100 (Tue, 14 Mar 2006)
New Revision: 174

Modified:
   trunk/apps/olsrs3d/main.c
   trunk/apps/olsrs3d/olsrs3d.h
Log:
fix equation of rgb value


Modified: trunk/apps/olsrs3d/main.c
===================================================================
--- trunk/apps/olsrs3d/main.c	2006-03-14 20:04:06 UTC (rev 173)
+++ trunk/apps/olsrs3d/main.c	2006-03-14 20:21:54 UTC (rev 174)
@@ -416,7 +416,7 @@
 
 	float null_vec[3] = {0,0,0};
 	float tmp_mov_vec[3];
-	float distance, etx, rgb, rgb2;
+	float distance, etx, rgb;
 	struct olsr_con *olsr_con = Con_begin;
 
 	while ( olsr_con != NULL ) {
@@ -506,68 +506,57 @@
 				} else if ( ( etx >= 1.5 ) && ( etx < 2.0 ) ) {
 
 					rgb = 2.0 - etx;
-					if( olsr_con->color != 3 || (olsr_con->color == 3 && olsr_con->rgb[2] !=  (int) rintf(rgb * 10))) {
+					if( olsr_con->color != 3 || (olsr_con->color == 3 && (int) rintf(olsr_con->rgb * 10) !=  (int) rintf(rgb * 10))) {
 						s3d_pep_material( olsr_con->obj_id,
 								1.0,1.0,rgb,
 								1.0,1.0,rgb,
 								1.0,1.0,rgb);
 						olsr_con->color = 3;
 						
-						olsr_con->rgb[0] = 1;
-						olsr_con->rgb[1] = 1;
-						olsr_con->rgb[2] = (int) rintf(rgb * 10);
+						olsr_con->rgb =  rgb;
 					}
 
 				/* not so good link - orange */
 				} else if ( ( etx >= 2.0 ) && ( etx < 3.0 ) ) {
 
 					rgb = 1.5 - ( etx / 2.0 );
-					if( olsr_con->color != 4 || (olsr_con->color == 4 && olsr_con->rgb[1] !=  (int) rintf(rgb * 10))) {
+					if( olsr_con->color != 4 || (olsr_con->color == 4 && (int) rintf(olsr_con->rgb * 10) !=  (int) rintf(rgb * 10))) {
 						s3d_pep_material( olsr_con->obj_id,
 								1.0,rgb,0.0,
 								1.0,rgb,0.0,
 								1.0,rgb,0.0);
 						olsr_con->color = 4;
 						
-						olsr_con->rgb[0] = 1;
-						olsr_con->rgb[1] = (int) rintf(rgb * 10);
-						olsr_con->rgb[2] = 0;
+						olsr_con->rgb = rgb;
 					}
 
 				/* bad link (almost dead) - brown */
 				} else if ( ( etx >= 3.0 ) && ( etx < 5.0 ) ) {
 
 					rgb = 1.75 - ( etx / 4.0 );
-					rgb2 = 1.25 - ( etx / 4.0 );
-					if( olsr_con->color != 5 || (olsr_con->color == 5 && olsr_con->rgb[0] !=  (int) rintf(rgb * 10)) 
-											|| (olsr_con->color == 5 && olsr_con->rgb[1] !=  (int) rintf(rgb2 * 10)) ) {
+					if( olsr_con->color != 5 || (olsr_con->color == 5 && (int) rintf(olsr_con->rgb * 10) !=  (int) rintf(rgb * 10)) 
+											|| (olsr_con->color == 5 && (int) rintf((olsr_con->rgb - 0.5) * 10) !=  (int) rintf((rgb - 0.5) * 10)) ) {
 						s3d_pep_material( olsr_con->obj_id,
-								rgb,rgb2,0.0,
-								rgb,rgb2,0.0,
-								rgb,rgb2,0.0);
+								rgb,rgb - 0.5,0.0,
+								rgb,rgb - 0.5,0.0,
+								rgb,rgb - 0.5,0.0);
 						olsr_con->color = 5;
 						
-						olsr_con->rgb[0] = (int) rintf(rgb * 10);
-						olsr_con->rgb[1] = (int) rintf(rgb2 * 10);
-						olsr_con->rgb[2] = 0;
+						olsr_con->rgb = rgb;
 					}
 
 				/* zombie link - grey */
 				} else if ( ( etx >= 5.0 ) && ( etx < 1000.0 ) ) {
 
 					rgb = 1000.0 / ( 1500.0 + etx );
-					if( olsr_con->color != 6 || (olsr_con->color == 6 && olsr_con->rgb[0] !=  (int) rintf(rgb * 10)) 
-											|| (olsr_con->color == 6 && olsr_con->rgb[1] !=  (int) rintf(rgb * 10))
-											|| (olsr_con->color == 6 && olsr_con->rgb[2] !=  (int) rintf(rgb * 10)) ) {
+					if( olsr_con->color != 6 || (olsr_con->color == 6 && (int) rintf(olsr_con->rgb * 10) !=  (int) rintf(rgb * 10)) ) {
 						s3d_pep_material( olsr_con->obj_id,
 								rgb,rgb,rgb,
 								rgb,rgb,rgb,
 								rgb,rgb,rgb);
 						olsr_con->color = 6;
 						
-						olsr_con->rgb[0] = (int) rintf(rgb * 10);
-						olsr_con->rgb[1] = (int) rintf(rgb * 10);
-						olsr_con->rgb[2] =(int)  rintf(rgb * 10);
+						olsr_con->rgb = rgb;
 					}
 
 				/* wtf - dark grey */

Modified: trunk/apps/olsrs3d/olsrs3d.h
===================================================================
--- trunk/apps/olsrs3d/olsrs3d.h	2006-03-14 20:04:06 UTC (rev 173)
+++ trunk/apps/olsrs3d/olsrs3d.h	2006-03-14 20:21:54 UTC (rev 174)
@@ -42,7 +42,8 @@
 	float right_etx;   /* etx of right olsr node */
 	int obj_id;   /* id of connection object in s3d */
 	int color;
-	int rgb[3];
+	float rgb;
+	
 };
 
 



From marec at berlios.de  Tue Mar 14 21:37:49 2006
From: marec at berlios.de (marec at BerliOS)
Date: Tue, 14 Mar 2006 21:37:49 +0100
Subject: [S3d-svn] r175 - trunk/apps/olsrs3d
Message-ID: <200603142037.k2EKbnuA018449@sheep.berlios.de>

Author: marec
Date: 2006-03-14 21:37:47 +0100 (Tue, 14 Mar 2006)
New Revision: 175

Modified:
   trunk/apps/olsrs3d/main.c
   trunk/apps/olsrs3d/net.c
   trunk/apps/olsrs3d/process.c
Log:
- replace usleep with nanosleep
- use push/pop line instead of polygone

Modified: trunk/apps/olsrs3d/main.c
===================================================================
--- trunk/apps/olsrs3d/main.c	2006-03-14 20:21:54 UTC (rev 174)
+++ trunk/apps/olsrs3d/main.c	2006-03-14 20:37:47 UTC (rev 175)
@@ -27,7 +27,7 @@
 
 #include <stdio.h>
 #include <s3d.h>
-#include <unistd.h>	/* sleep() */
+#include <time.h>	      /* nanosleep() */
 #include <string.h>	/* strncpy() */
 #include <math.h>		/* sqrt() */
 #include <getopt.h>	/* getopt() */
@@ -35,6 +35,8 @@
 #include "olsrs3d.h"
 #define SPEED		10.0
 
+static struct timespec sleep_time = { 0, 100 * 1000 * 1000 };   /* 100 mili seconds */
+
 int Debug = 0;
 
 char Olsr_host[256];   /* ip or hostname of olsr node with running dot_draw plugin */
@@ -464,7 +466,7 @@
 
 		/* move connection between left and right olsr node */
 		s3d_pop_vertex( olsr_con->obj_id, 6 );
-		s3d_pop_polygon( olsr_con->obj_id, 2 );
+		s3d_pop_line( olsr_con->obj_id, 2 );
 
 		s3d_push_vertex( olsr_con->obj_id, olsr_con->left_olsr_node->pos_vec[0] , olsr_con->left_olsr_node->pos_vec[1] , olsr_con->left_olsr_node->pos_vec[2] );
 		s3d_push_vertex( olsr_con->obj_id, olsr_con->left_olsr_node->pos_vec[0] + 0.2 , olsr_con->left_olsr_node->pos_vec[1] , olsr_con->left_olsr_node->pos_vec[2] );
@@ -512,7 +514,7 @@
 								1.0,1.0,rgb,
 								1.0,1.0,rgb);
 						olsr_con->color = 3;
-						
+
 						olsr_con->rgb =  rgb;
 					}
 
@@ -526,7 +528,7 @@
 								1.0,rgb,0.0,
 								1.0,rgb,0.0);
 						olsr_con->color = 4;
-						
+
 						olsr_con->rgb = rgb;
 					}
 
@@ -534,14 +536,15 @@
 				} else if ( ( etx >= 3.0 ) && ( etx < 5.0 ) ) {
 
 					rgb = 1.75 - ( etx / 4.0 );
-					if( olsr_con->color != 5 || (olsr_con->color == 5 && (int) rintf(olsr_con->rgb * 10) !=  (int) rintf(rgb * 10)) 
-											|| (olsr_con->color == 5 && (int) rintf((olsr_con->rgb - 0.5) * 10) !=  (int) rintf((rgb - 0.5) * 10)) ) {
+
+					if( olsr_con->color != 5 || (olsr_con->color == 5 && (int) rintf(olsr_con->rgb * 10) !=  (int) rintf(rgb * 10)) ) {
+
 						s3d_pep_material( olsr_con->obj_id,
 								rgb,rgb - 0.5,0.0,
 								rgb,rgb - 0.5,0.0,
 								rgb,rgb - 0.5,0.0);
 						olsr_con->color = 5;
-						
+
 						olsr_con->rgb = rgb;
 					}
 
@@ -549,13 +552,15 @@
 				} else if ( ( etx >= 5.0 ) && ( etx < 1000.0 ) ) {
 
 					rgb = 1000.0 / ( 1500.0 + etx );
+
 					if( olsr_con->color != 6 || (olsr_con->color == 6 && (int) rintf(olsr_con->rgb * 10) !=  (int) rintf(rgb * 10)) ) {
+
 						s3d_pep_material( olsr_con->obj_id,
 								rgb,rgb,rgb,
 								rgb,rgb,rgb,
 								rgb,rgb,rgb);
 						olsr_con->color = 6;
-						
+
 						olsr_con->rgb = rgb;
 					}
 
@@ -585,8 +590,8 @@
 
 		}
 
-		s3d_push_polygon( olsr_con->obj_id, 0,4,5,0 );
-		s3d_push_polygon( olsr_con->obj_id, 3,1,2,0 );
+		s3d_push_line( olsr_con->obj_id, 2,3,0 );
+		s3d_push_line( olsr_con->obj_id, 0,1,0 );
 
 		olsr_con = olsr_con->next_olsr_con;
 
@@ -638,8 +643,9 @@
 		Zp_rotate = (Zp_rotate+RotateSpeed)%360;
 		s3d_rotate(ZeroPoint,0,Zp_rotate,0);
 	}
-	usleep(100000);
-/*	sleep(1);*/
+
+	nanosleep( &sleep_time, NULL );
+
 	return;
 
 }

Modified: trunk/apps/olsrs3d/net.c
===================================================================
--- trunk/apps/olsrs3d/net.c	2006-03-14 20:21:54 UTC (rev 174)
+++ trunk/apps/olsrs3d/net.c	2006-03-14 20:37:47 UTC (rev 175)
@@ -27,7 +27,7 @@
 
 #include <stdio.h>
 #include <stdlib.h>
-#include <unistd.h>	/* usleep() */
+#include <unistd.h>	/* close() */
 #include <errno.h>
 #include <string.h> 	/* strlen(), memmove(), strncpy(), strncat() */
 #include <netdb.h>
@@ -114,7 +114,6 @@
 	if ( ++Net_read_count > 5 ) {
 		return(0);   /* continue mainloop */
 	} else {
-		/* usleep(5000); */
 		return(1);   /* continue reading data from socket */
 	}
 

Modified: trunk/apps/olsrs3d/process.c
===================================================================
--- trunk/apps/olsrs3d/process.c	2006-03-14 20:21:54 UTC (rev 174)
+++ trunk/apps/olsrs3d/process.c	2006-03-14 20:37:47 UTC (rev 175)
@@ -46,6 +46,7 @@
  ***/
 
 int add_olsr_con( struct olsr_node *con_from, struct olsr_node *con_to, float etx ) {
+
 	struct olsr_con **olsr_con = &Con_begin;
 	struct olsr_con *prev_olsr_con = NULL;   /* previous olsr connection */
 
@@ -78,6 +79,7 @@
 
 		/* create connection object */
 		(*olsr_con)->obj_id = s3d_new_object();
+
 		(*olsr_con)->color = 0;
 		s3d_push_material( (*olsr_con)->obj_id,
 				  1.0,1.0,1.0,
@@ -126,7 +128,9 @@
 		(*olsr_neigh_list)->next_olsr_neigh_list = NULL;
 
 	}
+
 	return(0);
+
 }
 
 
@@ -452,7 +456,7 @@
 
 					olsr_node1 = get_olsr_node( &Olsr_root, con_from );
 					olsr_node2 = get_olsr_node( &Olsr_root, con_to );
-					f = strtod(etx,NULL); 
+					f = strtod(etx,NULL);
 					if ( f < 1 )
 						f = 999;
 					add_olsr_con( olsr_node1, olsr_node2, f );



From dotslash at berlios.de  Tue Mar 14 21:51:40 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Tue, 14 Mar 2006 21:51:40 +0100
Subject: [S3d-svn] r176 - in trunk: . client
Message-ID: <200603142051.k2EKpeKp001628@sheep.berlios.de>

Author: dotslash
Date: 2006-03-14 21:51:39 +0100 (Tue, 14 Mar 2006)
New Revision: 176

Modified:
   trunk/
   trunk/client/s3d.h
Log:
 r253 at balthasar:  dotslash | 2006-03-14 21:51:02 +0100
 - s3d_pop_line, forgot



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:250
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:253

Modified: trunk/client/s3d.h
===================================================================
--- trunk/client/s3d.h	2006-03-14 20:37:47 UTC (rev 175)
+++ trunk/client/s3d.h	2006-03-14 20:51:39 UTC (rev 176)
@@ -67,6 +67,7 @@
 int s3d_pop_material(int object, unsigned long n);
 int s3d_pop_texture(int object, unsigned long n);
 int s3d_pop_polygon(int object, unsigned long n);
+int s3d_pop_line(int object, unsigned long n);
 int s3d_pep_polygon_normals(int object, float *nbuf,unsigned short n);
 int s3d_pep_polygon_tex_coord(int object, float x1, float y1, float x2, float y2, float x3, float y3);
 int s3d_pep_polygon_tex_coords(int object, float *tbuf,unsigned short n);



From dotslash at berlios.de  Tue Mar 14 22:19:21 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Tue, 14 Mar 2006 22:19:21 +0100
Subject: [S3d-svn] r177 - in trunk: . server
Message-ID: <200603142119.k2ELJLS6005799@sheep.berlios.de>

Author: dotslash
Date: 2006-03-14 22:19:20 +0100 (Tue, 14 Mar 2006)
New Revision: 177

Modified:
   trunk/
   trunk/server/TODO
   trunk/server/event.c
   trunk/server/graphics.c
Log:
 r257 at balthasar:  dotslash | 2006-03-14 22:19:00 +0100
 - line thickness, key codes to mcp, TODO



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:253
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:257

Modified: trunk/server/TODO
===================================================================
--- trunk/server/TODO	2006-03-14 20:51:39 UTC (rev 176)
+++ trunk/server/TODO	2006-03-14 21:19:20 UTC (rev 177)
@@ -6,8 +6,6 @@
  - culling for selection-mode - do it with line-culling, not plane-culling!
  - checking for biggest object is not cool implemented
  - checking on clone sources is not very nice too ...
- - migrate stuff from server/config.h to config.h, and provide configure options
-   for these.
 
 VLOW:
  - `grep TODO\: *.c *.h` for more ;)
@@ -16,8 +14,6 @@
 IDEAS:
  - OnMouseOver-events - with a pointer-object?!
  - how to define special keys? e.g. the GLUT way, the SDL way, the ANSI way ...
- - have a s3dinitrc which is executed right after the server got fired up ...
-   maybe a general s3d config would be nice
  - ipv6, unix socket support. 
  - put whole processes in display lists?!
 

Modified: trunk/server/event.c
===================================================================
--- trunk/server/event.c	2006-03-14 20:51:39 UTC (rev 176)
+++ trunk/server/event.c	2006-03-14 21:19:20 UTC (rev 177)
@@ -51,6 +51,7 @@
 	k=htons(key);
 	if (obj_valid(get_proc_by_pid(MCP),focus_oid,o))
 		prot_com_out(get_proc_by_pid(o->n_mat), S3D_P_S_KEY, (uint8_t *)&k, 2);
+	prot_com_out(get_proc_by_pid(MCP),S3D_P_S_KEY,(uint8_t *)&k, 2); /* mcp always gets a copy */
 	return(0);
 }
 /*  tell the client something about us */

Modified: trunk/server/graphics.c
===================================================================
--- trunk/server/graphics.c	2006-03-14 20:51:39 UTC (rev 176)
+++ trunk/server/graphics.c	2006-03-14 21:19:20 UTC (rev 177)
@@ -72,7 +72,7 @@
 	glDisable(GL_DITHER);
 	glEnable(GL_NORMALIZE);
 	glDisable(GL_AUTO_NORMAL);
-    glLineWidth(2.0);
+    glLineWidth(1.0);
 /* 	glMaterialfv(GL_FRONT_AND_BACK,GL_SHININESS,shin); */
 	glMaterialfv(GL_FRONT,GL_SHININESS,shin);
 /*	cam.translate.x=0;



From dotslash at berlios.de  Tue Mar 14 22:48:04 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Tue, 14 Mar 2006 22:48:04 +0100
Subject: [S3d-svn] r178 - in trunk: . apps/dot_mcp
Message-ID: <200603142148.k2ELm4n0009191@sheep.berlios.de>

Author: dotslash
Date: 2006-03-14 22:48:03 +0100 (Tue, 14 Mar 2006)
New Revision: 178

Modified:
   trunk/
   trunk/TODO
   trunk/apps/dot_mcp/main.c
   trunk/apps/dot_mcp/menu.c
Log:
 r259 at balthasar:  dotslash | 2006-03-14 22:47:49 +0100
 - Press F1 to use ego shooter mode (keys: w,a,s,d)



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:257
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:259

Modified: trunk/TODO
===================================================================
--- trunk/TODO	2006-03-14 21:19:20 UTC (rev 177)
+++ trunk/TODO	2006-03-14 21:48:03 UTC (rev 178)
@@ -1,5 +1,3 @@
-general:
-	* use nanosleep(), not usleep()
 dot_mcp:
 	* sane paths for applications
 	* logout button for use with rc-file

Modified: trunk/apps/dot_mcp/main.c
===================================================================
--- trunk/apps/dot_mcp/main.c	2006-03-14 21:19:20 UTC (rev 177)
+++ trunk/apps/dot_mcp/main.c	2006-03-14 21:48:03 UTC (rev 178)
@@ -30,6 +30,12 @@
 #include <stdio.h>  /*  printf() */
 #include <math.h>	/* sin(), cos() */
 #define bsize 	0.2
+struct tver
+{
+	float x,y,z;
+};
+struct tver campos, camrot;
+
 struct app {
 	unsigned int oid,oid_c;
 	float r;
@@ -41,7 +47,7 @@
 	int sphere;
 	struct app *next;
 };
-
+int ego_mode=0;
 float asp=1.0;
 struct app *apps=NULL;
 float bottom=-1.0;
@@ -322,6 +328,15 @@
 	inf=(struct s3d_obj_info *)hrmz->buf;
 	if (inf->object==0)
 	{
+		campos.x=inf->trans_x;
+		campos.y=inf->trans_y;
+		campos.z=inf->trans_z;
+		printf("campos update: %f, %f, %f\n",campos.x,campos.y,campos.z);
+		camrot.x=inf->rot_x;
+		camrot.y=inf->rot_y;
+		camrot.z=inf->rot_z;
+		printf("camrot update: %f, %f, %f\n",camrot.x,camrot.y,camrot.z);
+
 		if (asp!=inf->scale)
 		{
 			asp=inf->scale;
@@ -362,6 +377,32 @@
 	}
 	usleep(10000);
 }
+void keypress(struct s3d_evt *event)
+{
+	int key;
+	float xdif=0,ydif=0;
+	key=*((unsigned short *)event->buf);
+	switch (key)
+	{
+		case 1:  ego_mode=(ego_mode+1)%2;
+				 printf("ego mode %d\n",ego_mode);
+				 break;
+		case 'w':ydif=-1;break;
+		case 'a':xdif=-1;break;
+		case 's':ydif= 1;break;
+		case 'd':xdif= 1;break;
+		default:
+			printf("unknown/not handled key %d\n", key);
+	}
+	if (ego_mode)
+	{
+		campos.x+=ydif*sin((camrot.y*M_PI)/180);
+		campos.z+=ydif*cos((camrot.y*M_PI)/180);
+		campos.x+=xdif*cos((-camrot.y*M_PI)/180);
+		campos.z+=xdif*sin((-camrot.y*M_PI)/180);
+		s3d_translate(	0,campos.x,0,campos.z);
+	}
+}
 
 int main (int argc, char **argv)
 {
@@ -372,6 +413,7 @@
 		s3d_set_callback(S3D_EVENT_QUIT,stop);
 		s3d_set_callback(S3D_MCP_DEL_OBJECT,mcp_del_object);
 		s3d_set_callback(S3D_EVENT_OBJ_CLICK,object_click);
+		s3d_set_callback(S3D_EVENT_KEY,keypress);
 
 		if (s3d_select_font("vera"))
 		{

Modified: trunk/apps/dot_mcp/menu.c
===================================================================
--- trunk/apps/dot_mcp/menu.c	2006-03-14 21:19:20 UTC (rev 177)
+++ trunk/apps/dot_mcp/menu.c	2006-03-14 21:48:03 UTC (rev 178)
@@ -36,9 +36,10 @@
 static int go=-1;
 static int act;
 static struct menu_entry menu[]={
-		{"objs/comp.3ds","filebrowser","./filebrowser",	0,0},
 		{"objs/comp.3ds","terminal","s3dvt",				0,0},
-		{"objs/comp.3ds","clock","s3dclock",				0,0}
+		{"objs/comp.3ds","olsrs3d","olsrs3d",				0,0},
+		{"objs/comp.3ds","s3d_x11gate","s3d_x11gate",		0,0},
+		{"objs/comp.3ds","logout","LOGOUT",					0,0}, 
 };
 void menu_click(int oid)
 {
@@ -68,8 +69,14 @@
 		{
 			if ((oid==menu[i].icon_oid) || (oid==menu[i].str_oid))
 			{
+				if (0==strncmp(menu[i].path,"LOGOUT",6))
+				{
+					s3d_quit();
+					return;
+				}
 				strncpy(exec,menu[i].path,256);
 				strncat(exec,"> /dev/null 2>&1 &",256); /* ignoring output, starting in background */
+				printf("executing [%s]\n",exec);
 				system(exec);
 				return;
 			}



From dotslash at berlios.de  Tue Mar 14 23:05:31 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Tue, 14 Mar 2006 23:05:31 +0100
Subject: [S3d-svn] r179 - in trunk: . Documentation
Message-ID: <200603142205.k2EM5Vnp013453@sheep.berlios.de>

Author: dotslash
Date: 2006-03-14 23:05:30 +0100 (Tue, 14 Mar 2006)
New Revision: 179

Added:
   trunk/Documentation/movement.txt
Modified:
   trunk/
Log:
 r261 at balthasar:  dotslash | 2006-03-14 23:05:18 +0100
 - movement description



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:259
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:261

Added: trunk/Documentation/movement.txt
===================================================================
--- trunk/Documentation/movement.txt	2006-03-14 21:48:03 UTC (rev 178)
+++ trunk/Documentation/movement.txt	2006-03-14 22:05:30 UTC (rev 179)
@@ -0,0 +1,8 @@
+this is not the final version for movement, but ...
+
+- hold middle mouse button (or left+right at once if you have middle-mousebutton-emulation) and move
+  your mouse to move around the world
+- hold right mouse button and move mouse to rotate the mouse (look around)
+- left mouse button is for clicking :)
+- presse f1 to get in ego-shooter mode :D you can use w,a,s,d for movement now. f1 again to deactivate.
+  this only works with dot_mcp, the others above work out-of-the box within the server.



From dotslash at berlios.de  Tue Mar 14 23:09:00 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Tue, 14 Mar 2006 23:09:00 +0100
Subject: [S3d-svn] r180 - in trunk: . client
Message-ID: <200603142209.k2EM90sI013856@sheep.berlios.de>

Author: dotslash
Date: 2006-03-14 23:08:59 +0100 (Tue, 14 Mar 2006)
New Revision: 180

Modified:
   trunk/
   trunk/client/3dsread.c
Log:
 r264 at balthasar:  dotslash | 2006-03-14 23:08:32 +0100
 - /usr/local/share/s3d, /usr/share/s3d added to obj-path (if no OBJSDIR comes from configure)



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:261
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:264

Modified: trunk/client/3dsread.c
===================================================================
--- trunk/client/3dsread.c	2006-03-14 22:05:30 UTC (rev 179)
+++ trunk/client/3dsread.c	2006-03-14 22:08:59 UTC (rev 180)
@@ -37,7 +37,7 @@
 	char searchpath[1024];
 	char path[1024];
 #ifndef OBJSDIR
-#define OBJSDIR 	"./:../:../../:"
+#define OBJSDIR 	"./:../:../../:/usr/local/share/s3d/:/usr/share/s3d/"
 #endif
 	
 	strncpy(searchpath,OBJSDIR,1023);



From dotslash at berlios.de  Tue Mar 14 23:15:13 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Tue, 14 Mar 2006 23:15:13 +0100
Subject: [S3d-svn] r181 - in trunk: . apps/dot_mcp
Message-ID: <200603142215.k2EMFDZK014530@sheep.berlios.de>

Author: dotslash
Date: 2006-03-14 23:15:12 +0100 (Tue, 14 Mar 2006)
New Revision: 181

Modified:
   trunk/
   trunk/ChangeLog
   trunk/apps/dot_mcp/main.c
Log:
 r266 at balthasar:  dotslash | 2006-03-14 23:14:49 +0100
 - changelog, less output in dot_mcp



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:264
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:266

Modified: trunk/ChangeLog
===================================================================
--- trunk/ChangeLog	2006-03-14 22:08:59 UTC (rev 180)
+++ trunk/ChangeLog	2006-03-14 22:15:12 UTC (rev 181)
@@ -1,4 +1,6 @@
 2006-03-14  Simon Wunderlich - <dotslash at packetmixer.de>
+	- added push/pep/pop-line and pep-vertex
+	- dot_mcp now has egoshooter-mode (w,a,s,d)
 	- added some Documentation entries
 2006-03-10  Simon Wunderlich - <dotslash at packetmixer.de>
 	- added rc functionality: use /etc/s3drc or ~/.s3drc to

Modified: trunk/apps/dot_mcp/main.c
===================================================================
--- trunk/apps/dot_mcp/main.c	2006-03-14 22:08:59 UTC (rev 180)
+++ trunk/apps/dot_mcp/main.c	2006-03-14 22:15:12 UTC (rev 181)
@@ -331,11 +331,9 @@
 		campos.x=inf->trans_x;
 		campos.y=inf->trans_y;
 		campos.z=inf->trans_z;
-		printf("campos update: %f, %f, %f\n",campos.x,campos.y,campos.z);
 		camrot.x=inf->rot_x;
 		camrot.y=inf->rot_y;
 		camrot.z=inf->rot_z;
-		printf("camrot update: %f, %f, %f\n",camrot.x,camrot.y,camrot.z);
 
 		if (asp!=inf->scale)
 		{



From dotslash at berlios.de  Wed Mar 15 12:53:13 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Wed, 15 Mar 2006 12:53:13 +0100
Subject: [S3d-svn] r182 - in trunk: . Documentation
Message-ID: <200603151153.k2FBrDD8006853@sheep.berlios.de>

Author: dotslash
Date: 2006-03-15 12:53:04 +0100 (Wed, 15 Mar 2006)
New Revision: 182

Modified:
   trunk/
   trunk/Documentation/s3dlib.txt
Log:
 r268 at balthasar:  dotslash | 2006-03-15 12:52:43 +0100
 - update



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:266
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:268

Modified: trunk/Documentation/s3dlib.txt
===================================================================
--- trunk/Documentation/s3dlib.txt	2006-03-14 22:15:12 UTC (rev 181)
+++ trunk/Documentation/s3dlib.txt	2006-03-15 11:53:04 UTC (rev 182)
@@ -273,16 +273,21 @@
 
 _______________________________________________________________________________
 
-int s3d_draw_string( char *str,int len);
+int s3d_draw_string( char *str,float *len);
 
-renders the string str with the length len in truetype format with the height 1
+renders the string str with len in truetype format with the height 1, returns
+the length of the string rendered in *len (or set len=NULL to disable this)
 
 example:
 	
 	char str="hello world!";
+	float len;
 	s3d_select_font("vera");
-	s3d_draw_string(str,strlen(str));
+	s3d_draw_string(str,len);
 
+	/* not interested in the length? do that:
+	 * s3d_draw_string(str,NULL); */
+
 _______________________________________________________________________________
 
 int s3d_flags_on(int object, unsigned long flags);



From marec at berlios.de  Wed Mar 15 20:19:32 2006
From: marec at berlios.de (marec at BerliOS)
Date: Wed, 15 Mar 2006 20:19:32 +0100
Subject: [S3d-svn] r183 - trunk/apps/olsrs3d
Message-ID: <200603151919.k2FJJWh1019666@sheep.berlios.de>

Author: marec
Date: 2006-03-15 20:19:26 +0100 (Wed, 15 Mar 2006)
New Revision: 183

Added:
   trunk/apps/olsrs3d/vector.c
Modified:
   trunk/apps/olsrs3d/Makefile.am
   trunk/apps/olsrs3d/main.c
   trunk/apps/olsrs3d/olsrs3d.h
   trunk/apps/olsrs3d/process.c
Log:
- rotate node text with cam
- adding vector.c for vector operations

Modified: trunk/apps/olsrs3d/Makefile.am
===================================================================
--- trunk/apps/olsrs3d/Makefile.am	2006-03-15 11:53:04 UTC (rev 182)
+++ trunk/apps/olsrs3d/Makefile.am	2006-03-15 19:19:26 UTC (rev 183)
@@ -5,6 +5,7 @@
 	olsrs3d.h
 
 olsrs3d_SOURCES =  \
+	vector.c \
 	process.c \
 	main.c \
 	net.c

Modified: trunk/apps/olsrs3d/main.c
===================================================================
--- trunk/apps/olsrs3d/main.c	2006-03-15 11:53:04 UTC (rev 182)
+++ trunk/apps/olsrs3d/main.c	2006-03-15 19:19:26 UTC (rev 183)
@@ -184,8 +184,8 @@
 
 void handle_olsr_node( struct olsr_node *olsr_node ) {
 
-	float f, distance;
-	float tmp_mov_vec[3];
+	float distance, angle;
+	float tmp_mov_vec[3], desc_norm_vec[3] = {0,-1,0};
 	struct olsr_node *other_node;
 	struct Obj_to_ip *Obj_to_ip_curr;
 	struct olsr_neigh_list *olsr_neigh_list, *prev_olsr_neigh_list, *other_node_neigh_list, *tmp_olsr_neigh_list;
@@ -314,15 +314,21 @@
 			lst_add(olsr_node->obj_id,&olsr_node);
 
 			/* create olsr node text and attach (link) it to the node */
-			olsr_node->desc_id = s3d_draw_string( olsr_node->ip, &f );
+			olsr_node->desc_id = s3d_draw_string( olsr_node->ip, &olsr_node->desc_length );
 			s3d_link( olsr_node->desc_id, olsr_node->obj_id );
-			s3d_translate( olsr_node->desc_id, -f/2,-2,0 );
+			s3d_translate( olsr_node->desc_id, - olsr_node->desc_length / 2, -2, 0 );
 			s3d_flags_on( olsr_node->desc_id, S3D_OF_VISIBLE );
 
 			olsr_node->node_type_modified = 0;
 
 		}
 
+		vector_substract( olsr_node->pos_vec, CamPosition[0], tmp_mov_vec );
+		angle = vector_angle( desc_norm_vec, tmp_mov_vec );
+		s3d_rotate( olsr_node->desc_id, 0, angle * 180 / M_PI, 0 );
+		s3d_translate( olsr_node->desc_id, 0 ,-2, cos(angle*M_PI/180)*olsr_node->desc_length/2 );
+// 		printf( "olsr node (%s) angle: %f\n", olsr_node->ip, angle * 180 / M_PI );
+
 		/* drift away from unrelated nodes */
 		Obj_to_ip_curr = Obj_to_ip_head->next;
 		while ( Obj_to_ip_curr != Obj_to_ip_end ) {
@@ -387,7 +393,7 @@
 		if ( ( olsr_con->left_etx != 0.0 ) && ( olsr_con->right_etx != 0.0  ) ) {
 
 			distance = dirt( olsr_con->left_olsr_node->pos_vec, olsr_con->right_olsr_node->pos_vec, tmp_mov_vec );
-			f = (( olsr_con->left_etx + olsr_con->right_etx ) / 4.0) / distance;
+			f = ( ( olsr_con->left_etx + olsr_con->right_etx ) / 4.0 ) / distance;
 
 			/***
 			 * drift factor - 0.0 < factor < 1.0 ( best results: 0.3 < factor < 0.9
@@ -469,13 +475,12 @@
 		s3d_pop_line( olsr_con->obj_id, 2 );
 
 		s3d_push_vertex( olsr_con->obj_id, olsr_con->left_olsr_node->pos_vec[0] , olsr_con->left_olsr_node->pos_vec[1] , olsr_con->left_olsr_node->pos_vec[2] );
-		s3d_push_vertex( olsr_con->obj_id, olsr_con->left_olsr_node->pos_vec[0] + 0.2 , olsr_con->left_olsr_node->pos_vec[1] , olsr_con->left_olsr_node->pos_vec[2] );
-		s3d_push_vertex( olsr_con->obj_id, olsr_con->left_olsr_node->pos_vec[0] - 0.2 , olsr_con->left_olsr_node->pos_vec[1] , olsr_con->left_olsr_node->pos_vec[2] );
+		s3d_push_vertex( olsr_con->obj_id, olsr_con->left_olsr_node->pos_vec[0] , olsr_con->left_olsr_node->pos_vec[1] + 0.2 , olsr_con->left_olsr_node->pos_vec[2] );
 
 		s3d_push_vertex( olsr_con->obj_id, olsr_con->right_olsr_node->pos_vec[0] , olsr_con->right_olsr_node->pos_vec[1] , olsr_con->right_olsr_node->pos_vec[2] );
-		s3d_push_vertex( olsr_con->obj_id, olsr_con->right_olsr_node->pos_vec[0] , olsr_con->right_olsr_node->pos_vec[1]+ 0.2 , olsr_con->right_olsr_node->pos_vec[2] );
-		s3d_push_vertex( olsr_con->obj_id, olsr_con->right_olsr_node->pos_vec[0] , olsr_con->right_olsr_node->pos_vec[1]- 0.2 , olsr_con->right_olsr_node->pos_vec[2] );
+		s3d_push_vertex( olsr_con->obj_id, olsr_con->left_olsr_node->pos_vec[0] , olsr_con->left_olsr_node->pos_vec[1] - 0.2 , olsr_con->left_olsr_node->pos_vec[2] );
 
+
 		if ( ColorSwitch ) {
 
 			/* HNA */
@@ -823,6 +828,7 @@
 	/* set extern int optind = 0 for parse_args in io.c */
 	optind = 0;
 
+
 	if (!net_init(Olsr_host))
 	{
 		if (!s3d_init(&argc,&argv,"olsrs3d"))

Modified: trunk/apps/olsrs3d/olsrs3d.h
===================================================================
--- trunk/apps/olsrs3d/olsrs3d.h	2006-03-15 11:53:04 UTC (rev 182)
+++ trunk/apps/olsrs3d/olsrs3d.h	2006-03-15 19:19:26 UTC (rev 183)
@@ -43,7 +43,7 @@
 	int obj_id;   /* id of connection object in s3d */
 	int color;
 	float rgb;
-	
+
 };
 
 
@@ -70,6 +70,7 @@
 	float mov_vec[3];   /* move vector */
 	int obj_id;   /* id of node object in s3d */
 	int desc_id;   /* id of node description object in s3d */
+	float desc_length;   /* length of node description object in s3d */
 	struct olsr_neigh_list *olsr_neigh_list;   /* pointer to first neighbour */
 
 };
@@ -120,3 +121,10 @@
 /* main */
 void out_of_mem( void );
 struct olsr_node **lst_search(int id);
+
+/* vector */
+float vector_length( float vector[] );
+void vector_substract( float vector1[], float vector2[], float result_vector[] );
+float vector_dot_product( float vector1[], float vector2[] );
+float vector_angle( float vector1[], float vector2[] );
+

Modified: trunk/apps/olsrs3d/process.c
===================================================================
--- trunk/apps/olsrs3d/process.c	2006-03-15 11:53:04 UTC (rev 182)
+++ trunk/apps/olsrs3d/process.c	2006-03-15 19:19:26 UTC (rev 183)
@@ -88,8 +88,8 @@
 
 		s3d_flags_on( (*olsr_con)->obj_id, S3D_OF_VISIBLE );
 
-		s3d_push_polygon( (*olsr_con)->obj_id, 0,4,5,0 );
-		s3d_push_polygon( (*olsr_con)->obj_id, 3,1,2,0 );
+// 		s3d_push_polygon( (*olsr_con)->obj_id, 0,4,5,0 );
+// 		s3d_push_polygon( (*olsr_con)->obj_id, 3,1,2,0 );
 		s3d_link( (*olsr_con)->obj_id,  ZeroPoint );
 
 		/* add olsr node to new olsr connection in order to access the nodes from the connection list */

Added: trunk/apps/olsrs3d/vector.c
===================================================================
--- trunk/apps/olsrs3d/vector.c	2006-03-15 11:53:04 UTC (rev 182)
+++ trunk/apps/olsrs3d/vector.c	2006-03-15 19:19:26 UTC (rev 183)
@@ -0,0 +1,108 @@
+/*
+ * net.c
+ *
+ * Copyright (C) 2004-2006 Simon Wunderlich <dotslash at packetmixer.de>
+ *                         Marek Lindner <lindner_marek at yahoo.de>
+ *                         Andreas Langer <andreas_lbg at gmx.de>
+ *
+ * This file is part of olsrs3d, an olsr topology visualizer for s3d.
+ * See http://s3d.berlios.de/ for more updates.
+ *
+ * olsrs3d is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation; either version 2 of the License, or
+ * (at your option) any later version.
+ *
+ * olsrs3d is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License
+ * along with s3d; if not, write to the Free Software
+ * Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
+ */
+
+
+
+#include <stdio.h>
+#include <math.h>		/* sqrt() */
+
+
+
+
+
+/***
+ *
+ * calculate length of a vector => http://en.wikipedia.org/wiki/Vector_%28spatial%29#Length_of_a_vector
+ *
+ *   vector   =>   given vector
+ *
+ *   return length
+ *
+ ***/
+
+float vector_length( float vector[] ) {
+// printf( "length = %f\n", sqrt( vector[0] * vector[0] + vector[1] * vector[1] + vector[2] * vector[2] ) );
+	return ( sqrt( vector[0] * vector[0] + vector[1] * vector[1] + vector[2] * vector[2] ) );
+
+}
+
+
+
+/***
+ *
+ * substract vector1 from vector2 => http://en.wikipedia.org/wiki/Vector_%28spatial%29#Vector_addition_and_subtraction
+ *
+ *   vector1         =>   given vector1
+ *   vector2         =>   given vector2
+ *   result_vector   =>   save resulting vector here
+ *
+ ***/
+
+void vector_substract( float vector1[], float vector2[], float result_vector[] ) {
+
+	result_vector[0] = vector2[0] - vector1[0];
+	result_vector[1] = vector2[1] - vector1[1];
+	result_vector[2] = vector2[2] - vector1[2];
+// 	printf( "vektor2 (%f,%f,%f) - vektor1 (%f,%f,%f) = result_vektor (%f,%f,%f)\n", vector2[0], vector2[1], vector2[2], vector1[0], vector1[1], vector1[2], result_vector[0], result_vector[1], result_vector[2] );
+}
+
+
+
+/***
+ *
+ * calculate dot product of 2 vectors => http://en.wikipedia.org/wiki/Vector_%28spatial%29#Dot_product
+ *
+ *   vector1   =>   given vector1
+ *   vector2   =>   given vector2
+ *
+ *   return dot product
+ *
+ ***/
+
+float vector_dot_product( float vector1[], float vector2[] ) {
+// 	printf( "dot product = %f\n", vector1[0] * vector2[0] + vector1[1] * vector2[1] + vector1[2] * vector2[2] );
+	return ( vector1[0] * vector2[0] + vector1[1] * vector2[1] + vector1[2] * vector2[2] );
+
+}
+
+
+
+/***
+ *
+ * calculate angle between 2 vectors => http://en.wikipedia.org/wiki/Vector_%28spatial%29#Cross_product
+ *
+ *   vector1   =>   given vector1
+ *   vector2   =>   given vector2
+ *
+ *   return angle
+ *
+ ***/
+
+float vector_angle( float vector1[], float vector2[] ) {
+// 	printf( "angle = %f\n", ( vector_dot_product( vector1, vector2 ) / ( vector_length( vector1 ) * vector_length( vector2 ) ) ) );
+	return ( acos( vector_dot_product( vector1, vector2 ) / ( vector_length( vector1 ) * vector_length( vector2 ) ) ) );
+
+}
+



From ankon at berlios.de  Wed Mar 15 20:59:15 2006
From: ankon at berlios.de (ankon at berlios.de)
Date: Wed, 15 Mar 2006 20:59:15 +0100
Subject: [S3d-svn] r184 - trunk/config
Message-ID: <200603151959.k2FJxFWZ003393@sheep.berlios.de>

Author: ankon
Date: 2006-03-15 20:58:58 +0100 (Wed, 15 Mar 2006)
New Revision: 184

Modified:
   trunk/config/pthread.m4
Log:
Make the pthread check a little bit more robust, and check for a
compiler option -pthread before trying various libs.
This should not change anything on most platforms, especially since
SDL usually needs pthreads anyways and therefore SDL_CFLAGS/_LIBS will contain
correct information.
It may change a lot on FreeBSD/(alpha and others), which will create horribly broken things
if -pthread is NOT used.



Modified: trunk/config/pthread.m4
===================================================================
--- trunk/config/pthread.m4	2006-03-15 19:19:26 UTC (rev 183)
+++ trunk/config/pthread.m4	2006-03-15 19:58:58 UTC (rev 184)
@@ -6,15 +6,28 @@
 AC_DEFUN([HAVE_PTHREAD], [
 	PTHREAD_CFLAGS=""
         PTHREAD_LIBS=""
-        AC_CHECK_LIB(pthread, pthread_create, PTHREAD_LIBS="-lpthread",
-                [AC_CHECK_LIB(pthreads, pthread_create, PTHREAD_LIBS="-lpthreads",
-                    [AC_CHECK_LIB(c_r, pthread_create, PTHREAD_LIBS="-lc_r",
-                        [AC_CHECK_LIB(pthread, __pthread_attr_init_system, PTHREAD_LIBS="-lpthread",
-                                [AC_CHECK_FUNC(pthread_create)]
-                        )]
-                    )]
-                )]
-        )
+	save_CFLAGS=$CFLAGS
+	save_LDFLAGS=$LDFLAGS
+	CFLAGS="$CFLAGS -pthread"
+	LDFLAGS="$LDFLAGS -pthread"
+	AC_CHECK_FUNC(pthread_create, [
+		CFLAGS=$save_CFLAGS
+		LDFLAGS=$save_LDFLAGS
+		PTHREAD_CFLAGS="-pthread"
+		PTHREAD_LIBS="-pthread"
+	], [
+		CFLAGS=$save_CFLAGS
+		LDFLAGS=$save_LDFLAGS
+	        AC_CHECK_LIB(pthread, pthread_create, PTHREAD_LIBS="-lpthread",
+        	        [AC_CHECK_LIB(pthreads, pthread_create, PTHREAD_LIBS="-lpthreads",
+                	    [AC_CHECK_LIB(c_r, pthread_create, PTHREAD_LIBS="-lc_r",
+                        	[AC_CHECK_LIB(pthread, __pthread_attr_init_system, PTHREAD_LIBS="-lpthread",
+                                	[AC_CHECK_FUNC(pthread_create)]
+	                        )]
+        	            )]
+                	)]
+	        )
+	])
         AC_SUBST(PTHREAD_CFLAGS)
         AC_SUBST(PTHREAD_LIBS)
 ])



From ankon at berlios.de  Wed Mar 15 21:12:48 2006
From: ankon at berlios.de (ankon at berlios.de)
Date: Wed, 15 Mar 2006 21:12:48 +0100
Subject: [S3d-svn] r185 - trunk
Message-ID: <200603152012.k2FKCmwc009043@sheep.berlios.de>

Author: ankon
Date: 2006-03-15 21:12:37 +0100 (Wed, 15 Mar 2006)
New Revision: 185

Modified:
   trunk/configure.ac
Log:
Use the usual tools (big hammer, axe, spiked poles and silver bullets)
to convince autotools that we don't need, want, have, or look like
Fortran. Saves a few cycles for configure-ing :)



Modified: trunk/configure.ac
===================================================================
--- trunk/configure.ac	2006-03-15 19:58:58 UTC (rev 184)
+++ trunk/configure.ac	2006-03-15 20:12:37 UTC (rev 185)
@@ -8,6 +8,17 @@
 
 AM_INIT_AUTOMAKE([dist-bzip2])
 
+# XXXHACK: lame attempt to avoid fortran in libtool and elsewhere
+tagnames=`echo $tagnames | sed s,F77,,g | sed s,FC,,g` # for AC_PROG_LIBTOOL
+# we could skip the test here, as we don't USE F77/FC anywhere, but, the user may
+# have a reason. 
+if test x${F77} = x; then
+	F77=nonexistent
+fi
+if test x${FC} = x; then
+	FC=nonexistent
+fi
+
 dnl Checks for programs.
 AC_PROG_CC
 AC_PROG_INSTALL
@@ -16,6 +27,7 @@
 AC_PATH_X
 AC_PATH_XTRA
 AC_PROG_LIBTOOL
+
 AC_HEADER_DIRENT
 AC_HEADER_STDC
 AC_CHECK_HEADERS(fcntl.h sys/ioctl.h sys/time.h unistd.h)



From ankon at berlios.de  Wed Mar 15 21:20:03 2006
From: ankon at berlios.de (ankon at berlios.de)
Date: Wed, 15 Mar 2006 21:20:03 +0100
Subject: [S3d-svn] r186 - trunk
Message-ID: <200603152020.k2FKK3GM013560@sheep.berlios.de>

Author: ankon
Date: 2006-03-15 21:19:59 +0100 (Wed, 15 Mar 2006)
New Revision: 186

Modified:
   trunk/configure.ac
Log:
Use positive logic for checks for glut and sdl.
Looks like I'm to dense to get the concept of "!=" right. 

Found by trying to build s3d on a system w/o glut.



Modified: trunk/configure.ac
===================================================================
--- trunk/configure.ac	2006-03-15 20:12:37 UTC (rev 185)
+++ trunk/configure.ac	2006-03-15 20:19:59 UTC (rev 186)
@@ -73,9 +73,9 @@
 
 MDL_HAVE_OPENGL
 AC_SEARCH_LIBS(glutInit, glut, [
-HAVE_glut=x
+HAVE_glut="yes"
 GLUT_CFLAGS=
-GLUT_LIBS=-lglut
+GLUT_LIBS="-lglut"
 ], [
 HAVE_glut=
 GLUT_CFLAGS=
@@ -85,19 +85,19 @@
 AC_SUBST(GLUT_LIBS)
 
 SDL_VERSION=1.2.7
-AM_PATH_SDL($SDL_VERSION, [HAVE_SDL="x"], [])
-if test "x${HAVE_glut}" != "x"; then
+AM_PATH_SDL($SDL_VERSION, [HAVE_SDL="yes"], [])
+if test "x${HAVE_glut}" = "xyes"; then
 	AC_DEFINE([G_GLUT], 1, [Use GLUT])
 fi
-if test "x${HAVE_SDL}" != "x"; then
+if test "x${HAVE_SDL}" = "xyes"; then
 	AC_DEFINE([G_SDL], 1, [Use SDL])
 fi
 if test "x${HAVE_glut}${HAVE_SDL}" = "x"; then
 	AC_MSG_ERROR([No OpenGL Framework found. Try installing GLUT or SDL, or both])
 fi
 
-AM_CONDITIONAL([BUILD_SDL], test x"${HAVE_SDL}" != x)
-AM_CONDITIONAL([BUILD_GLUT], test x"${HAVE_glut}" != x)
+AM_CONDITIONAL([BUILD_SDL], test x"${HAVE_SDL}" = xyes)
+AM_CONDITIONAL([BUILD_GLUT], test x"${HAVE_glut}" = xyes)
 
 dnl ##################################### CLIENT #######################################
 



From ankon at berlios.de  Wed Mar 15 21:29:51 2006
From: ankon at berlios.de (ankon at berlios.de)
Date: Wed, 15 Mar 2006 21:29:51 +0100
Subject: [S3d-svn] r187 - trunk
Message-ID: <200603152029.k2FKTpus019906@sheep.berlios.de>

Author: ankon
Date: 2006-03-15 21:29:46 +0100 (Wed, 15 Mar 2006)
New Revision: 187

Modified:
   trunk/ChangeLog
   trunk/TODO
Log:
Update TODO (document needed autotools versions, remove fortran item)
Update ChangeLog (why isn't that automagic?)



Modified: trunk/ChangeLog
===================================================================
--- trunk/ChangeLog	2006-03-15 20:19:59 UTC (rev 186)
+++ trunk/ChangeLog	2006-03-15 20:29:46 UTC (rev 187)
@@ -1,3 +1,7 @@
+2006-03-15  Andreas Kohn - <andreas at syndrom23.de>
+	- some configure.ac changes to fix glut/sdl detection code
+	- some autoconf magic to fix pthread detection for esoteric arch's.
+	- a big hammer to prevent fortran checks
 2006-03-14  Simon Wunderlich - <dotslash at packetmixer.de>
 	- added push/pep/pop-line and pep-vertex
 	- dot_mcp now has egoshooter-mode (w,a,s,d)

Modified: trunk/TODO
===================================================================
--- trunk/TODO	2006-03-15 20:19:59 UTC (rev 186)
+++ trunk/TODO	2006-03-15 20:29:46 UTC (rev 187)
@@ -10,21 +10,10 @@
 	* endless loop in proccess_args() (getopts) on linux ppc
 
 autotools:
-    * checking g77 is useless
 	* Apple todo: won't find -lX11 (for s3d_x11gate) while compiling
 	* OBJECTPATH for finding the object?
-	* check for automake>1.9, to prevent weird errors
-    * weird:
-	...
-	checking for cos in -lm... yes
-	./configure: line 22348: MDL_HAVE_OPENGL: command not found
-	checking for library containing glutInit... -lglut
-	...
+	* We should perhaps check for the correct versions of
+	  autotools to avoid some confusion about some warnings.
+	  At the time of writing, supported are:
+	   automake 1.9, autoconf 2.59, libtool 1.5
 
-	...
-	checking for main in -lXtst... yes
-	./configure: line 23397: HAVE_PTHREAD: command not found
-	configure: creating ./config.status
-	...
-
-



From ankon at berlios.de  Wed Mar 15 21:36:38 2006
From: ankon at berlios.de (ankon at berlios.de)
Date: Wed, 15 Mar 2006 21:36:38 +0100
Subject: [S3d-svn] r188 - trunk
Message-ID: <200603152036.k2FKacVj025618@sheep.berlios.de>

Author: ankon
Date: 2006-03-15 21:36:26 +0100 (Wed, 15 Mar 2006)
New Revision: 188

Modified:
   trunk/autogen.sh
Log:
Make bash[*] happy, and use exit instead of return to end the main script.
Interesting case of a behavior in FreeBSD's /bin/sh that puzzles bash :)

[*] <d0tslash> bug again shell



Modified: trunk/autogen.sh
===================================================================
--- trunk/autogen.sh	2006-03-15 20:29:46 UTC (rev 187)
+++ trunk/autogen.sh	2006-03-15 20:36:26 UTC (rev 188)
@@ -144,7 +144,7 @@
 			;;
 		--help|-h)
 			usage -v
-			return 0
+			exit 1
 			;;
 		--quiet|-q)
 			quiet=1



From dotslash at berlios.de  Wed Mar 15 21:57:03 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Wed, 15 Mar 2006 21:57:03 +0100
Subject: [S3d-svn] r189 - in trunk: . apps/olsrs3d
Message-ID: <200603152057.k2FKv3El022396@sheep.berlios.de>

Author: dotslash
Date: 2006-03-15 21:57:01 +0100 (Wed, 15 Mar 2006)
New Revision: 189

Modified:
   trunk/
   trunk/apps/olsrs3d/main.c
   trunk/apps/olsrs3d/vector.c
Log:
 r276 at balthasar:  dotslash | 2006-03-15 21:56:46 +0100
 - spins to the cam



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:268
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:276

Modified: trunk/apps/olsrs3d/main.c
===================================================================
--- trunk/apps/olsrs3d/main.c	2006-03-15 20:36:26 UTC (rev 188)
+++ trunk/apps/olsrs3d/main.c	2006-03-15 20:57:01 UTC (rev 189)
@@ -185,7 +185,7 @@
 void handle_olsr_node( struct olsr_node *olsr_node ) {
 
 	float distance, angle;
-	float tmp_mov_vec[3], desc_norm_vec[3] = {0,-1,0};
+	float tmp_mov_vec[3], desc_norm_vec[3] = {0,0,-1};
 	struct olsr_node *other_node;
 	struct Obj_to_ip *Obj_to_ip_curr;
 	struct olsr_neigh_list *olsr_neigh_list, *prev_olsr_neigh_list, *other_node_neigh_list, *tmp_olsr_neigh_list;
@@ -324,9 +324,14 @@
 		}
 
 		vector_substract( olsr_node->pos_vec, CamPosition[0], tmp_mov_vec );
-		angle = vector_angle( desc_norm_vec, tmp_mov_vec );
-		s3d_rotate( olsr_node->desc_id, 0, angle * 180 / M_PI, 0 );
-		s3d_translate( olsr_node->desc_id, 0 ,-2, cos(angle*M_PI/180)*olsr_node->desc_length/2 );
+		tmp_mov_vec[1]=0; /* we are not interested in the y value */
+		angle = 180.0/M_PI * vector_angle( desc_norm_vec, tmp_mov_vec );
+		if (tmp_mov_vec[0]>0)
+			angle=180-angle;
+		else
+			angle=180+angle;
+		s3d_rotate( olsr_node->desc_id, 0, angle , 0 );
+		s3d_translate( olsr_node->desc_id, -cos(angle*M_PI/180)*olsr_node->desc_length/2 ,-1.5, sin(angle*M_PI/180)*olsr_node->desc_length/2 );
 // 		printf( "olsr node (%s) angle: %f\n", olsr_node->ip, angle * 180 / M_PI );
 
 		/* drift away from unrelated nodes */

Modified: trunk/apps/olsrs3d/vector.c
===================================================================
--- trunk/apps/olsrs3d/vector.c	2006-03-15 20:36:26 UTC (rev 188)
+++ trunk/apps/olsrs3d/vector.c	2006-03-15 20:57:01 UTC (rev 189)
@@ -91,7 +91,7 @@
 
 /***
  *
- * calculate angle between 2 vectors => http://en.wikipedia.org/wiki/Vector_%28spatial%29#Cross_product
+ * calculate angle between 2 vectors => http://en.wikipedia.org/wiki/Vector_%28spatial%29#Dot_product
  *
  *   vector1   =>   given vector1
  *   vector2   =>   given vector2



From dotslash at berlios.de  Wed Mar 15 21:58:19 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Wed, 15 Mar 2006 21:58:19 +0100
Subject: [S3d-svn] r190 - in trunk: . Documentation example server
Message-ID: <200603152058.k2FKwJWR023111@sheep.berlios.de>

Author: dotslash
Date: 2006-03-15 21:58:13 +0100 (Wed, 15 Mar 2006)
New Revision: 190

Modified:
   trunk/
   trunk/Documentation/s3dlib.txt
   trunk/example/texturetest.c
   trunk/server/object.c
   trunk/server/proto.c
Log:
 r280 at balthasar:  dotslash | 2006-03-15 21:57:52 +0100
 - less debug output about lines - seems to work now ;)
 - texturetest bug - used locally initialized oid -> fixed
 - doc update



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:276
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:280

Modified: trunk/Documentation/s3dlib.txt
===================================================================
--- trunk/Documentation/s3dlib.txt	2006-03-15 20:57:01 UTC (rev 189)
+++ trunk/Documentation/s3dlib.txt	2006-03-15 20:58:13 UTC (rev 190)
@@ -314,7 +314,8 @@
 
 int s3d_rotate(int object, float x, float y, float z);
 
-rotate an object around the x, y and z-axis respectively. 
+rotate an object around the x, y and z-axis respectively. x,y,z may have values
+between [0,360].
 
 _______________________________________________________________________________
 

Modified: trunk/example/texturetest.c
===================================================================
--- trunk/example/texturetest.c	2006-03-15 20:57:01 UTC (rev 189)
+++ trunk/example/texturetest.c	2006-03-15 20:58:13 UTC (rev 190)
@@ -39,7 +39,6 @@
 #define MAXY	300
 int main (int argc, char **argv)
 {
-	int oid;
 	unsigned int x,y;
 	unsigned char *data;
 						

Modified: trunk/server/object.c
===================================================================
--- trunk/server/object.c	2006-03-15 20:57:01 UTC (rev 189)
+++ trunk/server/object.c	2006-03-15 20:58:13 UTC (rev 190)
@@ -510,7 +510,7 @@
 			glDeleteLists(obj->dplist,1);
 			obj->dplist=0;
 		}
-		dprintf(MED,"pepping lines %d to %d",(m-n),m);
+		dprintf(VLOW,"pepping lines %d to %d",(m-n),m);
 		for (i=(m-n);i<m;i++)
 		{
 			obj->p_line[i].v[0]=*(px++);

Modified: trunk/server/proto.c
===================================================================
--- trunk/server/proto.c	2006-03-15 20:57:01 UTC (rev 189)
+++ trunk/server/proto.c	2006-03-15 20:58:13 UTC (rev 190)
@@ -149,7 +149,7 @@
 				{
 					oid=ntohl(*((uint32_t *)cptr));		cptr+=4;
 					num=(length-4)/(4*3);
- 					dprintf(LOW,"received %d new lines for object oid...%d", num, oid); 
+ 					dprintf(VLOW,"received %d new lines for object oid...%d", num, oid); 
 					for (i=0;i<(num*3);i++)
 						*((uint32_t *)cptr+i)=
 								ntohl(*((uint32_t *)cptr+i));
@@ -221,7 +221,7 @@
 				{
 					oid=ntohl(*((uint32_t *)cptr));		cptr+=4;
 					num=(length-4)/(4*3);
- 					dprintf(LOW,"pepping %d new lines for object oid...%d", num, oid); 
+ 					dprintf(VLOW,"pepping %d new lines for object oid...%d", num, oid); 
 					for (i=0;i<(num*3);i++)
 						*((uint32_t *)cptr+i)=
 								ntohl(*((uint32_t *)cptr+i));
@@ -297,7 +297,7 @@
 				{
 					oid=ntohl(*((uint32_t *)cptr));		cptr+=4;
 					num=ntohl(*((uint32_t *)cptr));		cptr+=4;
- 					dprintf(LOW,"deleting %d lines for object oid...%d", num, oid); 
+ 					dprintf(VLOW,"deleting %d lines for object oid...%d", num, oid); 
 					obj_del_line(p,oid,num);
 				}	
 				break;



From dotslash at berlios.de  Wed Mar 15 22:14:19 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Wed, 15 Mar 2006 22:14:19 +0100
Subject: [S3d-svn] r191 - in trunk: . client server
Message-ID: <200603152114.k2FLEJkX026398@sheep.berlios.de>

Author: dotslash
Date: 2006-03-15 22:14:18 +0100 (Wed, 15 Mar 2006)
New Revision: 191

Modified:
   trunk/
   trunk/TODO
   trunk/client/TODO
   trunk/server/TODO
Log:
 r283 at balthasar:  dotslash | 2006-03-15 22:14:09 +0100
 - TODO update



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:280
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:283

Modified: trunk/TODO
===================================================================
--- trunk/TODO	2006-03-15 20:58:13 UTC (rev 190)
+++ trunk/TODO	2006-03-15 21:14:18 UTC (rev 191)
@@ -1,17 +1,11 @@
 dot_mcp:
 	* sane paths for applications
-	* logout button for use with rc-file
-client(portability?!):
-	shmat() return (char *) -1 or NULL?! data_ctos/data_stoc should
-	really not be 0x0
-	3ds reader won't work on linux ppc, probably lots of memory leaks
-server:
-	* implement mouse movement
-	* endless loop in proccess_args() (getopts) on linux ppc
-
 autotools:
-	* Apple todo: won't find -lX11 (for s3d_x11gate) while compiling
 	* OBJECTPATH for finding the object?
+
+	* Apple todo: won't find -lX11 (for s3d_x11gate) while compiling
+	* "-Wall -pedantic" default in CFLAGS? (if possible)
+	* --enable-debug not honored when CFLAGS is set?
 	* We should perhaps check for the correct versions of
 	  autotools to avoid some confusion about some warnings.
 	  At the time of writing, supported are:

Modified: trunk/client/TODO
===================================================================
--- trunk/client/TODO	2006-03-15 20:58:13 UTC (rev 190)
+++ trunk/client/TODO	2006-03-15 21:14:18 UTC (rev 191)
@@ -1,2 +1,5 @@
 TODO:
- - .max, .x, .obj files
+- shmat() return (char *) -1 or NULL?! data_ctos/data_stoc should
+  really not be 0x0
+- 3ds reader won't work on linux ppc, probably lots of memory leaks
+- .max, .x, .obj files

Modified: trunk/server/TODO
===================================================================
--- trunk/server/TODO	2006-03-15 20:58:13 UTC (rev 190)
+++ trunk/server/TODO	2006-03-15 21:14:18 UTC (rev 191)
@@ -1,9 +1,11 @@
 HIGH:
+ - OnMouseOver-events - with a pointer-object?!
 MED:
+ - culling for selection-mode - do it with line-culling, not plane-culling!
  - stop networking grepping after some deadline to prevent DoS ...?
  - delete polygon normals when vertex got changed?!
+ - endless loop in proccess_args() (getopts) on linux ppc
 LOW:
- - culling for selection-mode - do it with line-culling, not plane-culling!
  - checking for biggest object is not cool implemented
  - checking on clone sources is not very nice too ...
 
@@ -12,7 +14,6 @@
 
  
 IDEAS:
- - OnMouseOver-events - with a pointer-object?!
  - how to define special keys? e.g. the GLUT way, the SDL way, the ANSI way ...
  - ipv6, unix socket support. 
  - put whole processes in display lists?!



From dotslash at berlios.de  Wed Mar 15 22:40:56 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Wed, 15 Mar 2006 22:40:56 +0100
Subject: [S3d-svn] r192 - in trunk: . server
Message-ID: <200603152140.k2FLeu6A029298@sheep.berlios.de>

Author: dotslash
Date: 2006-03-15 22:40:56 +0100 (Wed, 15 Mar 2006)
New Revision: 192

Modified:
   trunk/
   trunk/server/object.c
Log:
 r285 at balthasar:  dotslash | 2006-03-15 22:40:25 +0100
 [x] nimm den include raus



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:283
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:285

Modified: trunk/server/object.c
===================================================================
--- trunk/server/object.c	2006-03-15 21:14:18 UTC (rev 191)
+++ trunk/server/object.c	2006-03-15 21:40:56 UTC (rev 192)
@@ -25,7 +25,7 @@
 #include "global.h"
 #include <stdlib.h>		 /*  malloc(),realloc(),free() */
 #include <string.h>		 /*  memcpy() */
-#include <GL/glut.h> 	 /*  glutwirecube */
+#include <GL/gl.h>		 /*  gl*, GL* */
 #define _ISOC99_SOURCE
 #include <math.h>		 /*  sin(),cos() */
 



From ankon at berlios.de  Thu Mar 16 00:18:12 2006
From: ankon at berlios.de (ankon at berlios.de)
Date: Thu, 16 Mar 2006 00:18:12 +0100
Subject: [S3d-svn] r193 - trunk/client
Message-ID: <200603152318.k2FNICxu004768@sheep.berlios.de>

Author: ankon
Date: 2006-03-16 00:18:04 +0100 (Thu, 16 Mar 2006)
New Revision: 193

Modified:
   trunk/client/Makefile.am
Log:
libs3d needs -lm (uses log, tan, and more of those)



Modified: trunk/client/Makefile.am
===================================================================
--- trunk/client/Makefile.am	2006-03-15 21:40:56 UTC (rev 192)
+++ trunk/client/Makefile.am	2006-03-15 23:18:04 UTC (rev 193)
@@ -9,6 +9,6 @@
 
 libs3d_la_CPPFLAGS=	-I${top_srcdir}/server
 libs3d_la_CFLAGS=	@FONTCONFIG_CFLAGS@ @FREETYPE_CFLAGS@ 
-libs3d_la_LIBADD=	@FONTCONFIG_LIBS@ @FREETYPE_LIBS@ 
+libs3d_la_LIBADD=	@FONTCONFIG_LIBS@ @FREETYPE_LIBS@ @LIBM@
 
 EXTRA_DIST=		lgpl.txt



From marec at berlios.de  Thu Mar 16 00:41:23 2006
From: marec at berlios.de (marec at berlios.de)
Date: Thu, 16 Mar 2006 00:41:23 +0100
Subject: [S3d-svn] r194 - in trunk/objs: . martin_stern
Message-ID: <200603152341.k2FNfNxg010865@sheep.berlios.de>

Author: marec
Date: 2006-03-16 00:41:03 +0100 (Thu, 16 Mar 2006)
New Revision: 194

Added:
   trunk/objs/martin_stern/
   trunk/objs/martin_stern/Cube 300.3ds
   trunk/objs/martin_stern/Cube 300.c4d
   trunk/objs/martin_stern/Kopie von WRT 54.c4d
   trunk/objs/martin_stern/Testprojekt.c4d
   trunk/objs/martin_stern/WRT 54 und Cube 300 2.c4d
   trunk/objs/martin_stern/WRT 54 version 2.3ds
   trunk/objs/martin_stern/WRT 54 version 2.c4d
   trunk/objs/martin_stern/WRT 54.c4d
Log:
3d objects for olsrs3d

Added: trunk/objs/martin_stern/Cube 300.3ds
===================================================================
(Binary files differ)


Property changes on: trunk/objs/martin_stern/Cube 300.3ds
___________________________________________________________________
Name: svn:executable
   + *
Name: svn:mime-type
   + application/octet-stream

Added: trunk/objs/martin_stern/Cube 300.c4d
===================================================================
(Binary files differ)


Property changes on: trunk/objs/martin_stern/Cube 300.c4d
___________________________________________________________________
Name: svn:executable
   + *
Name: svn:mime-type
   + application/octet-stream

Added: trunk/objs/martin_stern/Kopie von WRT 54.c4d
===================================================================
(Binary files differ)


Property changes on: trunk/objs/martin_stern/Kopie von WRT 54.c4d
___________________________________________________________________
Name: svn:executable
   + *
Name: svn:mime-type
   + application/octet-stream

Added: trunk/objs/martin_stern/Testprojekt.c4d
===================================================================
(Binary files differ)


Property changes on: trunk/objs/martin_stern/Testprojekt.c4d
___________________________________________________________________
Name: svn:executable
   + *
Name: svn:mime-type
   + application/octet-stream

Added: trunk/objs/martin_stern/WRT 54 und Cube 300 2.c4d
===================================================================
(Binary files differ)


Property changes on: trunk/objs/martin_stern/WRT 54 und Cube 300 2.c4d
___________________________________________________________________
Name: svn:executable
   + *
Name: svn:mime-type
   + application/octet-stream

Added: trunk/objs/martin_stern/WRT 54 version 2.3ds
===================================================================
(Binary files differ)


Property changes on: trunk/objs/martin_stern/WRT 54 version 2.3ds
___________________________________________________________________
Name: svn:executable
   + *
Name: svn:mime-type
   + application/octet-stream

Added: trunk/objs/martin_stern/WRT 54 version 2.c4d
===================================================================
(Binary files differ)


Property changes on: trunk/objs/martin_stern/WRT 54 version 2.c4d
___________________________________________________________________
Name: svn:executable
   + *
Name: svn:mime-type
   + application/octet-stream

Added: trunk/objs/martin_stern/WRT 54.c4d
===================================================================
(Binary files differ)


Property changes on: trunk/objs/martin_stern/WRT 54.c4d
___________________________________________________________________
Name: svn:executable
   + *
Name: svn:mime-type
   + application/octet-stream



From dotslash at berlios.de  Thu Mar 16 01:17:13 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Thu, 16 Mar 2006 01:17:13 +0100
Subject: [S3d-svn] r195 - in trunk: . client objs/martin_stern
Message-ID: <200603160017.k2G0HDW9028317@sheep.berlios.de>

Author: dotslash
Date: 2006-03-16 01:15:43 +0100 (Thu, 16 Mar 2006)
New Revision: 195

Modified:
   trunk/
   trunk/client/TODO
   trunk/objs/martin_stern/Cube 300.3ds
   trunk/objs/martin_stern/WRT 54 version 2.3ds
Log:
 r290 at balthasar:  dotslash | 2006-03-16 01:14:40 +0100
 - size adjustment



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:285
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:290

Modified: trunk/client/TODO
===================================================================
--- trunk/client/TODO	2006-03-15 23:41:03 UTC (rev 194)
+++ trunk/client/TODO	2006-03-16 00:15:43 UTC (rev 195)
@@ -1,4 +1,5 @@
 TODO:
+- texture support for 3ds
 - shmat() return (char *) -1 or NULL?! data_ctos/data_stoc should
   really not be 0x0
 - 3ds reader won't work on linux ppc, probably lots of memory leaks

Modified: trunk/objs/martin_stern/Cube 300.3ds
===================================================================
(Binary files differ)

Modified: trunk/objs/martin_stern/WRT 54 version 2.3ds
===================================================================
(Binary files differ)



From marec at berlios.de  Thu Mar 16 21:44:16 2006
From: marec at berlios.de (marec at berlios.de)
Date: Thu, 16 Mar 2006 21:44:16 +0100
Subject: [S3d-svn] r196 - trunk/apps/olsrs3d
Message-ID: <200603162044.k2GKiGXQ005496@sheep.berlios.de>

Author: marec
Date: 2006-03-16 21:43:04 +0100 (Thu, 16 Mar 2006)
New Revision: 196

Modified:
   trunk/apps/olsrs3d/main.c
   trunk/apps/olsrs3d/vector.c
Log:
some code cleaning

Modified: trunk/apps/olsrs3d/main.c
===================================================================
--- trunk/apps/olsrs3d/main.c	2006-03-16 00:15:43 UTC (rev 195)
+++ trunk/apps/olsrs3d/main.c	2006-03-16 20:43:04 UTC (rev 196)
@@ -323,17 +323,19 @@
 
 		}
 
-		vector_substract( olsr_node->pos_vec, CamPosition[0], tmp_mov_vec );
-		tmp_mov_vec[1]=0; /* we are not interested in the y value */
-		angle = 180.0/M_PI * vector_angle( desc_norm_vec, tmp_mov_vec );
-		if (tmp_mov_vec[0]>0)
-			angle=180-angle;
-		else
-			angle=180+angle;
+
+		/* rotate node description so that they are always readable */
+		tmp_mov_vec[0] = CamPosition[0][0] - olsr_node->pos_vec[0];
+		tmp_mov_vec[1] = 0;   /* we are not interested in the y value */
+		tmp_mov_vec[2] = CamPosition[0][2] - olsr_node->pos_vec[2];
+
+		/* take care of inverse cosinus */
+		angle = ( tmp_mov_vec[0] > 0 ? 180 - ( 180.0/M_PI * vector_angle( desc_norm_vec, tmp_mov_vec ) ) : 180 + ( 180.0/M_PI * vector_angle( desc_norm_vec, tmp_mov_vec ) ) );
+
 		s3d_rotate( olsr_node->desc_id, 0, angle , 0 );
 		s3d_translate( olsr_node->desc_id, -cos(angle*M_PI/180)*olsr_node->desc_length/2 ,-1.5, sin(angle*M_PI/180)*olsr_node->desc_length/2 );
-// 		printf( "olsr node (%s) angle: %f\n", olsr_node->ip, angle * 180 / M_PI );
 
+
 		/* drift away from unrelated nodes */
 		Obj_to_ip_curr = Obj_to_ip_head->next;
 		while ( Obj_to_ip_curr != Obj_to_ip_end ) {
@@ -576,6 +578,7 @@
 
 				/* wtf - dark grey */
 				} else {
+
 					if(olsr_con->color != 7) {
 						s3d_pep_material( olsr_con->obj_id,
 								0.3,0.3,0.3,

Modified: trunk/apps/olsrs3d/vector.c
===================================================================
--- trunk/apps/olsrs3d/vector.c	2006-03-16 00:15:43 UTC (rev 195)
+++ trunk/apps/olsrs3d/vector.c	2006-03-16 20:43:04 UTC (rev 196)
@@ -1,5 +1,5 @@
 /*
- * net.c
+ * vector.c
  *
  * Copyright (C) 2004-2006 Simon Wunderlich <dotslash at packetmixer.de>
  *                         Marek Lindner <lindner_marek at yahoo.de>
@@ -43,7 +43,7 @@
  ***/
 
 float vector_length( float vector[] ) {
-// printf( "length = %f\n", sqrt( vector[0] * vector[0] + vector[1] * vector[1] + vector[2] * vector[2] ) );
+
 	return ( sqrt( vector[0] * vector[0] + vector[1] * vector[1] + vector[2] * vector[2] ) );
 
 }
@@ -65,7 +65,7 @@
 	result_vector[0] = vector2[0] - vector1[0];
 	result_vector[1] = vector2[1] - vector1[1];
 	result_vector[2] = vector2[2] - vector1[2];
-// 	printf( "vektor2 (%f,%f,%f) - vektor1 (%f,%f,%f) = result_vektor (%f,%f,%f)\n", vector2[0], vector2[1], vector2[2], vector1[0], vector1[1], vector1[2], result_vector[0], result_vector[1], result_vector[2] );
+
 }
 
 
@@ -82,7 +82,7 @@
  ***/
 
 float vector_dot_product( float vector1[], float vector2[] ) {
-// 	printf( "dot product = %f\n", vector1[0] * vector2[0] + vector1[1] * vector2[1] + vector1[2] * vector2[2] );
+
 	return ( vector1[0] * vector2[0] + vector1[1] * vector2[1] + vector1[2] * vector2[2] );
 
 }
@@ -96,12 +96,12 @@
  *   vector1   =>   given vector1
  *   vector2   =>   given vector2
  *
- *   return angle
+ *   return angle (0-180 due to acos!)
  *
  ***/
 
 float vector_angle( float vector1[], float vector2[] ) {
-// 	printf( "angle = %f\n", ( vector_dot_product( vector1, vector2 ) / ( vector_length( vector1 ) * vector_length( vector2 ) ) ) );
+
 	return ( acos( vector_dot_product( vector1, vector2 ) / ( vector_length( vector1 ) * vector_length( vector2 ) ) ) );
 
 }



From dotslash at berlios.de  Fri Mar 17 20:17:18 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Fri, 17 Mar 2006 20:17:18 +0100
Subject: [S3d-svn] r197 - trunk
Message-ID: <200603171917.k2HJHIFU001740@sheep.berlios.de>

Author: dotslash
Date: 2006-03-17 20:17:15 +0100 (Fri, 17 Mar 2006)
New Revision: 197

Modified:
   trunk/
   trunk/README
Log:
 r292 at balthasar:  dotslash | 2006-03-17 20:16:53 +0100
 - mogs ascii



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:290
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:292

Modified: trunk/README
===================================================================
--- trunk/README	2006-03-16 20:43:04 UTC (rev 196)
+++ trunk/README	2006-03-17 19:17:15 UTC (rev 197)
@@ -1,3 +1,17 @@
+
+
+             ________
+            /        \________  _______
+            \         \       \|       \
+         ____\     ___/____   /|_       \
+        /     \     \    \    \ |        \
+        \            \____\_   \|         \
+         \___________/          \    |    /
+                 s3D \__________/________/
+
+
+
+
 1.REASONS
 ---------
 



From dotslash at berlios.de  Fri Mar 17 22:12:11 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Fri, 17 Mar 2006 22:12:11 +0100
Subject: [S3d-svn] r198 - in trunk: . server
Message-ID: <200603172112.k2HLCBnY001456@sheep.berlios.de>

Author: dotslash
Date: 2006-03-17 22:12:05 +0100 (Fri, 17 Mar 2006)
New Revision: 198

Modified:
   trunk/
   trunk/server/main.c
Log:
 r295 at balthasar:  dotslash | 2006-03-17 22:11:59 +0100
 - run without rc 



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:292
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:295

Modified: trunk/server/main.c
===================================================================
--- trunk/server/main.c	2006-03-17 19:17:15 UTC (rev 197)
+++ trunk/server/main.c	2006-03-17 21:12:05 UTC (rev 198)
@@ -68,6 +68,7 @@
 {
 #ifdef SIGS
 	int ret,i;
+	struct timespec t={0,200*1000*1000}; /* 200 mili seconds */
 	if (signal(SIGCHLD, sigchld_handler) == SIG_ERR);
 	kidpid=fork();
 	running=1;
@@ -78,8 +79,8 @@
 	}
 	if (kidpid==0)
 	{
-		sleep(1); /* giving the father lots of time to set his signal handler
-					 and all his sockets up */
+		nanosleep(&t,NULL); 	/* giving the father lots of time to set his signal handler
+					 			 * and all his sockets up */
 		dprintf(VHIGH,"hello, i'm the kid and will start the rc file now!");
 		for (i=0;i<(sizeof(s3drc)/sizeof(char **));i++)
 		{
@@ -90,13 +91,21 @@
 				dprintf(LOW,"[RC] system() said %d",ret);
 				if (ret<128) 
 				{
-					dprintf(LOW,"[RC] system() did well, I guess.");
+					dprintf(LOW,"[RC] system() did well, I guess. let's die clean now.");
 					exit(0);
 				}
 			} 
 		}
 		errs("rc_init()", "no usuable rc script found.");
-		errsf("rc_init()","You don't have an rc-script? create one (~/.s3drc) or use --no-rc !");
+		if (rc==NULL)
+		{
+			errs("rc_init()","You don't have an rc-script? Think about creating one (~/.s3drc), its handy :)");
+			errs("rc_init()","Starting anyway ...");
+			while (1) sleep(1);
+		} else {
+			errs("rc_init()","no usuable rc script found.");
+			errs("rc_init()","Check your rc-script!");
+		}
 		exit(1);
 	} else {
 		/* father just returns */



From dotslash at berlios.de  Sat Mar 18 02:04:06 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Sat, 18 Mar 2006 02:04:06 +0100
Subject: [S3d-svn] r199 - in trunk: . server
Message-ID: <200603180104.k2I146Rb022807@sheep.berlios.de>

Author: dotslash
Date: 2006-03-18 02:03:44 +0100 (Sat, 18 Mar 2006)
New Revision: 199

Modified:
   trunk/
   trunk/server/TODO
   trunk/server/event.c
   trunk/server/global.h
   trunk/server/navigation.c
   trunk/server/object.c
   trunk/server/process.c
   trunk/server/user.c
   trunk/server/user_glut.c
   trunk/server/user_sdl.c
Log:
 r297 at balthasar:  dotslash | 2006-03-18 02:02:17 +0100
 - mousemovent now trackable within user programs (needs testing though)



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:295
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:297

Modified: trunk/server/TODO
===================================================================
--- trunk/server/TODO	2006-03-17 21:12:05 UTC (rev 198)
+++ trunk/server/TODO	2006-03-18 01:03:44 UTC (rev 199)
@@ -1,5 +1,4 @@
 HIGH:
- - OnMouseOver-events - with a pointer-object?!
 MED:
  - culling for selection-mode - do it with line-culling, not plane-culling!
  - stop networking grepping after some deadline to prevent DoS ...?

Modified: trunk/server/event.c
===================================================================
--- trunk/server/event.c	2006-03-17 21:12:05 UTC (rev 198)
+++ trunk/server/event.c	2006-03-18 01:03:44 UTC (rev 199)
@@ -77,11 +77,26 @@
 	struct t_obj	 *o;
 	p=get_proc_by_pid(MCP);
 	event_obj_info(p,0);
-
-	if (obj_valid(get_proc_by_pid(MCP),focus_oid,o))
+	if (obj_valid(p,focus_oid,o))
 		event_obj_info(get_proc_by_pid(o->n_mat),0);
 	return(0);
 }
+/* same for the mouse movement! */
+int event_ptr_changed()
+{
+	struct t_process *p;
+	struct t_obj	 *o;
+	p=get_proc_by_pid(MCP);
+	dprintf(MED,"event_ptr_changed()");
+	event_obj_info(p,get_pointer(p));
+	if (obj_valid(p,focus_oid,o))
+	{
+		p=get_proc_by_pid(o->n_mat); /* focused program pointer*/
+		event_obj_info(p,get_pointer(p));
+	}
+	return(0);
+}
+
 /* this should replace the mcp_rep_object() function later ... */
 int event_obj_info(struct t_process *p, uint32_t oid)
 {
@@ -114,6 +129,10 @@
 				mo.scale=(float)((float)winw)/winh; /* give aspect ratio to program */
 				strncpy(mo.name,"sys_camera0",NAME_MAX);
 				break;
+			case OF_POINTER:
+				strncpy(mo.name,"sys_pointer0",NAME_MAX);
+				break;
+
 		}
 		prot_com_out(p,S3D_P_S_OINFO,(uint8_t *)&mo,sizeof(struct t_obj_info));
 	}

Modified: trunk/server/global.h
===================================================================
--- trunk/server/global.h	2006-03-17 21:12:05 UTC (rev 198)
+++ trunk/server/global.h	2006-03-18 01:03:44 UTC (rev 199)
@@ -237,6 +237,7 @@
 int event_obj_click(struct t_process *p, uint32_t oid);
 int event_key_pressed(uint16_t key);
 int event_cam_changed(void);
+int event_ptr_changed(void);
 int event_init(struct t_process *p);
 int event_quit(struct t_process *p);
 int event_ping_in(struct t_process *p, uint32_t o);
@@ -292,7 +293,7 @@
 void navi_rot_down(void);
 void navi_pos(int xdif, int ydif);
 void navi_rot(int xdif, int ydif);
-
+void ptr_move(int x, int y);
 /*  process.c */
 struct t_process *process_add(void);
 int process_del(int id);
@@ -340,6 +341,7 @@
 void obj_size_update	(struct t_process *p, uint32_t oid);
 void obj_pos_update		(struct t_process *p, uint32_t oid);
 void obj_check_biggest_object(struct t_process *p, uint32_t oid);
+uint32_t get_pointer(struct t_process *p);
 /*  mcp.c */
 int mcp_rep_object(uint32_t mcp_oid);
 int mcp_del_object(uint32_t mcp_oid);

Modified: trunk/server/navigation.c
===================================================================
--- trunk/server/navigation.c	2006-03-17 21:12:05 UTC (rev 198)
+++ trunk/server/navigation.c	2006-03-18 01:03:44 UTC (rev 199)
@@ -23,9 +23,10 @@
 
 
 #include "global.h"
-#include <math.h>
+#include <math.h> /* atan() */
 int alphax,alphay;
 float view_x,view_y,view_z;
+extern int winw,winh;
 void navi_right()
 {
 	navi_pos(1,0);
@@ -93,3 +94,29 @@
 	if (rv[1]<0) 	rv[1]+=360;
 	obj_rotate(get_proc_by_pid(MCP),0,rv);
 }
+void ptr_move(int x, int y)
+{
+	float tv[3],rv[3],xf,yf;
+	struct t_process *p;
+	int ptr;
+	if (winw>winh)
+	{
+		xf=winw/(float)winh;
+		yf=1;
+	} else {
+		xf=1;
+		yf=winh/(float)winw;
+	}
+	tv[0]=(2.0*x/((float)winw)-1.0)*xf;
+	tv[1]=(2.0*y/((float)winh)-1.0)*yf;
+	tv[2]=1;
+	rv[0]=180/M_PI*atan(tv[1]/2); /* TODO: is this really correct? O_o */
+	rv[1]=180/M_PI*atan(tv[0]/2);
+	rv[2]=0;
+	p=get_proc_by_pid(MCP);
+	if (-1!=(ptr=get_pointer(p)))
+	{
+		obj_translate(p,ptr,tv);	
+		obj_rotate(p,ptr,rv);	
+	}
+}

Modified: trunk/server/object.c
===================================================================
--- trunk/server/object.c	2006-03-17 21:12:05 UTC (rev 198)
+++ trunk/server/object.c	2006-03-18 01:03:44 UTC (rev 199)
@@ -1326,29 +1326,58 @@
 	float v[3];
 	uint32_t i;
 	int is_lnksrc;
-	struct t_obj 		*ao;
+	struct t_obj 		*ao,*o;
 	struct t_process	*ap;
+	o=p->object[oid];
 	dprintf(VLOW,"[obj_pos_upd|pid %d] %d",p->id, oid);
-	p->object[oid]->m_uptodate=0;
+	o->m_uptodate=0;
 	obj_recalc_tmat(p,oid);
 	if (p->id!=MCP) 
 	{/*  mcp does not need that. */
 		 /*  save the matrixmode to reset it later on */
 		v[0]=v[1]=v[2]=0.0F;
-		mySetMatrix(p->object[oid]->m);
+		mySetMatrix(o->m);
 		myTransform3f(v);
 			 /*  and get it's destination point. phew */
-		p->object[oid]->or=sqrt(v[0]*v[0] + v[1]*v[1] + v[2]*v[2]);
+		o->or=sqrt(v[0]*v[0] + v[1]*v[1] + v[2]*v[2]);
 	} else 
-		if (p->object[oid]->oflags&OF_SYSTEM)
+		if (o->oflags&OF_SYSTEM) /* TODO: what will we do if $sys_object is linked to another? */
 		{ /* a system object changed position? let's update the focus'ed sys-objects */
 			if (obj_valid(p,focus_oid,ao))
 				if (NULL!=(ap=get_proc_by_pid(ao->n_mat)))
-					obj_sys_update(ap,oid);	
-			event_cam_changed();
-			dprintf(VLOW,"[obj_pos_upd|pid %d] %d event_cam_changed",p->id,oid);
+				{
+					if (OF_POINTER==(o->oflags&0xF0000000))
+					{ /* we dont have to do that much in this case ... */
+						if (obj_valid(ap,get_pointer(ap),ao)) /* we can redefine ao here -> ao = focused app's pointer*/
+						{
+							ao->rotate.x=o->rotate.x;
+							ao->rotate.y=o->rotate.y;
+							ao->rotate.z=o->rotate.z;
+							ao->translate.x=o->translate.x;
+							ao->translate.y=o->translate.y;
+							ao->translate.z=o->translate.z; /* just copy */
+						}
+						
+					} else 
+						obj_sys_update(ap,oid);	
+				}
+			switch (o->oflags&0xF0000000)
+			{
+				case OF_CAM:
+					event_cam_changed();
+					dprintf(LOW,"[obj_pos_upd|pid %d] %d event_cam_changed",p->id,oid);
+					break;
+				case OF_POINTER:
+					event_ptr_changed();
+					dprintf(LOW,"[obj_pos_upd|pid %d] %d event_ptr_changed",p->id,oid);
+					break;
+				default:
+					dprintf(LOW,"[obj_pos_upd|pid %d] %d unknown systen event",p->id,oid);
+					
+			}
+
 		}
-	if (p->object[oid]->oflags&OF_LINK_SRC)
+	if (o->oflags&OF_LINK_SRC)
 	{
 		is_lnksrc=0;
 		for (i=0;i<p->n_obj;i++)  /*  update objects which reference on us. (recursive) */
@@ -1361,7 +1390,7 @@
 				}
 		if (!is_lnksrc)	/* it's not! switch out the flag */
 		{
-			p->object[oid]->oflags&=~OF_LINK_SRC;
+			o->oflags&=~OF_LINK_SRC;
 			dprintf(VLOW,"obj_pos_update(): %d in process %d is no longer a link-source",oid,p->id);
 		}
 	}
@@ -1849,6 +1878,7 @@
 	}
 	return(-1);
 }
+
 /*  this is the "direct" freeing function, without checking for perfomance */
 int obj_free(struct t_process *p,uint32_t oid)
 {
@@ -1893,3 +1923,17 @@
 		}
 	return(0);
 }
+/* get the object of the pointer (that's 1, usually */
+uint32_t get_pointer(struct t_process *p)
+{
+	uint32_t i;
+	for (i=0;i<p->n_obj;i++)
+	{
+
+		if (OF_POINTER==(p->object[i]->oflags&0xF0000000))
+		{
+			return(i);
+		}
+	}
+	return(-1);
+}

Modified: trunk/server/process.c
===================================================================
--- trunk/server/process.c	2006-03-17 21:12:05 UTC (rev 198)
+++ trunk/server/process.c	2006-03-18 01:03:44 UTC (rev 199)
@@ -95,19 +95,38 @@
 /* adds system objects to the app, like camera, pointers etc ... */
 int process_sys_init(struct t_process *p)
 {
-	int cam;
+	int cam,ptr;
+	struct t_obj *o;
 	cam=obj_new(p);
+	ptr=obj_new(p);
 	if (p->id==MCP)
 	{   /* this is only called once within process_init, later mcp's are
 		   will be registered as "real" apps first */
 		p->object[cam]->translate.z=5;
 		p->object[cam]->oflags=OF_CAM;
+		p->object[ptr]->translate.z=1;
+		p->object[ptr]->oflags=OF_POINTER|OF_LINK;
+		p->object[ptr]->linkid=cam;
 	} else {
-		/* TODO: ... get the cam position of the mcp, somehow */
+		/* TODO: ... get the cam and ptr position of the mcp, somehow */
 		p->object[cam]->oflags=OF_CAM;
+		
+		if (obj_valid(mcp_p,get_pointer(mcp_p),o)) /* get parent pointer, copy parent */
+		{
+			p->object[ptr]->rotate.x=o->rotate.x;
+			p->object[ptr]->rotate.y=o->rotate.y;
+			p->object[ptr]->rotate.z=o->rotate.z;
+			p->object[ptr]->translate.x=o->translate.x;
+			p->object[ptr]->translate.y=o->translate.y;
+			p->object[ptr]->translate.z=o->translate.z;
+		}
+		p->object[ptr]->oflags=OF_POINTER|OF_LINK;
+		p->object[ptr]->linkid=cam;
 	}
 	dprintf(MED,"process_sys_init(): added object cam0 %d",cam);
-	obj_pos_update(get_proc_by_pid(MCP),0);
+	dprintf(MED,"process_sys_init(): added object ptr0 %d",ptr);
+	obj_pos_update(get_proc_by_pid(MCP),cam);
+	obj_pos_update(get_proc_by_pid(MCP),ptr);
 /*	obj_recalc_tmat(p,0);*/
 	event_obj_info(p,0); /* tell the new program about the thing */
 

Modified: trunk/server/user.c
===================================================================
--- trunk/server/user.c	2006-03-17 21:12:05 UTC (rev 198)
+++ trunk/server/user.c	2006-03-18 01:03:44 UTC (rev 199)
@@ -24,7 +24,6 @@
 
 #include "global.h"
 /*  this file reads user input */
-/*  this is done right now by SDL-polling */
 static int ox,oy;
 int but=-1;
 int user_init() {
@@ -117,6 +116,10 @@
 	}
 	ox=x;
 	oy=y;
+	if ((ox!=0xFFFFFF) && (oy!=0xFFFFFF))
+	{	/* mouse changed? */
+		ptr_move(x,y);
+	}
 	but=button;
 	if (state==1)  /*  mouse up */
 	{

Modified: trunk/server/user_glut.c
===================================================================
--- trunk/server/user_glut.c	2006-03-17 21:12:05 UTC (rev 198)
+++ trunk/server/user_glut.c	2006-03-18 01:03:44 UTC (rev 199)
@@ -27,8 +27,8 @@
 /*  local prototypes */
 void keyboard(unsigned char key, int x, int y);
 void special(int skey, int x, int y);
-/* void mouse(int button, int state, int x, int y); */
 void mouse_motion(int x, int y);
+void passive_mouse_motion(int x, int y);
 extern int but;
 /*  init user input things for glut */
 int user_init_glut()
@@ -38,6 +38,7 @@
 	glutSpecialFunc (special);
 	glutMouseFunc (user_mouse);
     glutMotionFunc(mouse_motion);
+	glutPassiveMotionFunc(passive_mouse_motion);
 	return(0);
 }
 
@@ -53,3 +54,7 @@
 {
 	user_mouse(but,2,x,y);
 }
+void passive_mouse_motion(int x, int y)
+{
+	user_mouse(-1,-1,x,y);
+}

Modified: trunk/server/user_sdl.c
===================================================================
--- trunk/server/user_sdl.c	2006-03-17 21:12:05 UTC (rev 198)
+++ trunk/server/user_sdl.c	2006-03-18 01:03:44 UTC (rev 199)
@@ -46,8 +46,10 @@
 			 	case SDL_BUTTON_RIGHT:
 				case SDL_BUTTON_RMASK:
 			 		user_mouse(2,2,event.motion.x,event.motion.y);break;
-				case 0:break;
-					 /*  nno button ... */
+				case 0:
+					user_mouse(-1,-1,event.motion.x,event.motion.y);
+					break;
+					 /*  no button ... */
 				default:
 					dprintf(LOW,"don't know button %d", event.button.button);
 



From dotslash at berlios.de  Sat Mar 18 14:09:25 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Sat, 18 Mar 2006 14:09:25 +0100
Subject: [S3d-svn] r200 - in trunk: . client example server
Message-ID: <200603181309.k2ID9PbW000667@sheep.berlios.de>

Author: dotslash
Date: 2006-03-18 14:09:15 +0100 (Sat, 18 Mar 2006)
New Revision: 200

Modified:
   trunk/
   trunk/client/proto_in.c
   trunk/client/s3d.h
   trunk/client/sei_construct.c
   trunk/example/Makefile.am
   trunk/server/TODO
   trunk/server/event.c
   trunk/server/global.h
   trunk/server/navigation.c
   trunk/server/object.c
   trunk/server/process.c
   trunk/server/proto.h
   trunk/server/user.c
Log:
 r299 at balthasar:  dotslash | 2006-03-18 14:08:41 +0100
 - mousemotion detection checked and debugged (see ptrtest for a demo in the examples)
 - new event S3D_EVT_MBUTTON for mouse button usage for the client!
 - minor fixes



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:297
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:299

Modified: trunk/client/proto_in.c
===================================================================
--- trunk/client/proto_in.c	2006-03-18 01:03:44 UTC (rev 199)
+++ trunk/client/proto_in.c	2006-03-18 13:09:15 UTC (rev 200)
@@ -87,6 +87,18 @@
 				dprintf(VLOW,"S3D_P_S_KEY: key %d hit!!",*((uint16_t *)s3devt->buf));
 			}
 			break;
+		case S3D_P_S_MBUTTON:
+			if (length==2)
+			{
+				if (NULL!=(s3devt=malloc(sizeof(struct s3d_evt))))
+				{
+					s3devt->event=S3D_EVENT_MBUTTON;
+					s3devt->length=2;
+					s3devt->buf=buf;
+				}
+				dprintf(VLOW,"S3D_P_S_MBUTTON: mbutton %d, state %d !!",*((uint8_t *)s3devt->buf), *(1+(uint8_t *)s3devt->buf));
+			}
+			break;
 		case S3D_P_MCP_OBJECT:
 			if (length==sizeof(struct mcp_object))
 			{
@@ -102,10 +114,7 @@
 					buf[length-1]='\0';  /*  put a null byte at the end  */
 										 /*  for the not so careful users */
 					s3devt->buf=buf;
-					dprintf(MED,"S3D_P_MCP_OBEJCT: something is happening to object %d, name %s", 
-								mo->object,
-								mo->name
-								);
+					dprintf(VLOW,"S3D_P_MCP_OBEJCT: something is happening to object %d, name %s", 	mo->object, mo->name);
 
 				}
 			} else dprintf(MED,"wrong length for S3D_P_MCP_OBJECT length %d != %d",length,sizeof(struct mcp_object));

Modified: trunk/client/s3d.h
===================================================================
--- trunk/client/s3d.h	2006-03-18 01:03:44 UTC (rev 199)
+++ trunk/client/s3d.h	2006-03-18 13:09:15 UTC (rev 200)
@@ -111,6 +111,7 @@
 int s3d_mcp_focus(int object);
 #define S3D_EVENT_OBJ_CLICK		1
 #define S3D_EVENT_KEY			2
+#define S3D_EVENT_MBUTTON		3
 #define S3D_EVENT_NEW_OBJECT	16
 #define S3D_EVENT_OBJ_INFO		17
 
@@ -143,4 +144,7 @@
 	float r;
 	char name[256]; 
 };
-
+struct s3d_but_info
+{
+	unsigned char button, state;
+};

Modified: trunk/client/sei_construct.c
===================================================================
--- trunk/client/sei_construct.c	2006-03-18 01:03:44 UTC (rev 199)
+++ trunk/client/sei_construct.c	2006-03-18 13:09:15 UTC (rev 200)
@@ -885,10 +885,10 @@
       
       else
 	{
-	  tmpseg = tr[tr[t].d0].rseg;
 	  double y0, yt;
 	  point_t tmppt;
 	  int tnext, i_d0, i_d1;
+	  tmpseg = tr[tr[t].d0].rseg;
 
 	  i_d0 = i_d1 = FALSE;
 	  if (FP_EQUAL(tr[t].lo.y, s.v0.y))

Modified: trunk/example/Makefile.am
===================================================================
--- trunk/example/Makefile.am	2006-03-18 01:03:44 UTC (rev 199)
+++ trunk/example/Makefile.am	2006-03-18 13:09:15 UTC (rev 200)
@@ -1,6 +1,6 @@
 noinst_PROGRAMS=	3dsloader filebrowser hudtest katze \
 			radius_test s3dclock snowman \
-			strtest texturetest linetest
+			strtest texturetest linetest ptrtest
 			
 3dsloader_SOURCES=	3dsloader.c
 filebrowser_SOURCES=	filebrowser.c
@@ -12,6 +12,7 @@
 strtest_SOURCES=	strtest.c
 texturetest_SOURCES=	texturetest.c
 linetest_SOURCES=	linetest.c
+ptrtest_SOURCES=	ptrtest.c
 
 CPPFLAGS=		-I$(top_srcdir)/server -I$(top_srcdir)/client
 LIBS=			$(top_builddir)/client/libs3d.la

Modified: trunk/server/TODO
===================================================================
--- trunk/server/TODO	2006-03-18 01:03:44 UTC (rev 199)
+++ trunk/server/TODO	2006-03-18 13:09:15 UTC (rev 200)
@@ -4,6 +4,7 @@
  - stop networking grepping after some deadline to prevent DoS ...?
  - delete polygon normals when vertex got changed?!
  - endless loop in proccess_args() (getopts) on linux ppc
+ - recheck atan()s for mousemotion rotate values
 LOW:
  - checking for biggest object is not cool implemented
  - checking on clone sources is not very nice too ...

Modified: trunk/server/event.c
===================================================================
--- trunk/server/event.c	2006-03-18 01:03:44 UTC (rev 199)
+++ trunk/server/event.c	2006-03-18 13:09:15 UTC (rev 200)
@@ -42,7 +42,7 @@
 	prot_com_out(p,S3D_P_S_CLICK,(uint8_t *)&moid, 4);
 	return(0);
 }
-/*  this functions sends keystrok events to the focused program. */
+/*  this functions sends keystroke events to the focused program. */
 /*  maybe mcp-keystrokes should be catched here. */
 int event_key_pressed(uint16_t key)
 {
@@ -54,6 +54,19 @@
 	prot_com_out(get_proc_by_pid(MCP),S3D_P_S_KEY,(uint8_t *)&k, 2); /* mcp always gets a copy */
 	return(0);
 }
+/* mouse button changes are sent to the client */
+int event_mbutton_clicked(uint8_t button, uint8_t state)
+{
+	struct t_obj *o;
+	uint8_t b[2];
+	b[0]=button;
+	b[1]=state;
+	dprintf(MED,"mouse button click event: %d %d",button,state);
+	if (obj_valid(get_proc_by_pid(MCP),focus_oid,o))
+		prot_com_out(get_proc_by_pid(o->n_mat), S3D_P_S_MBUTTON, (uint8_t *)&b, 2);
+	prot_com_out(get_proc_by_pid(MCP),S3D_P_S_MBUTTON,(uint8_t *)&b, 2); /* mcp always gets a copy */
+	return(0);
+}
 /*  tell the client something about us */
 int event_init(struct t_process *p)
 {
@@ -87,7 +100,6 @@
 	struct t_process *p;
 	struct t_obj	 *o;
 	p=get_proc_by_pid(MCP);
-	dprintf(MED,"event_ptr_changed()");
 	event_obj_info(p,get_pointer(p));
 	if (obj_valid(p,focus_oid,o))
 	{

Modified: trunk/server/global.h
===================================================================
--- trunk/server/global.h	2006-03-18 01:03:44 UTC (rev 199)
+++ trunk/server/global.h	2006-03-18 13:09:15 UTC (rev 200)
@@ -236,6 +236,7 @@
 int event_obj_info(struct t_process *p, uint32_t oid);
 int event_obj_click(struct t_process *p, uint32_t oid);
 int event_key_pressed(uint16_t key);
+int event_mbutton_clicked(uint8_t button, uint8_t state);
 int event_cam_changed(void);
 int event_ptr_changed(void);
 int event_init(struct t_process *p);

Modified: trunk/server/navigation.c
===================================================================
--- trunk/server/navigation.c	2006-03-18 01:03:44 UTC (rev 199)
+++ trunk/server/navigation.c	2006-03-18 13:09:15 UTC (rev 200)
@@ -108,10 +108,10 @@
 		yf=winh/(float)winw;
 	}
 	tv[0]=(2.0*x/((float)winw)-1.0)*xf;
-	tv[1]=(2.0*y/((float)winh)-1.0)*yf;
-	tv[2]=1;
-	rv[0]=180/M_PI*atan(tv[1]/2); /* TODO: is this really correct? O_o */
-	rv[1]=180/M_PI*atan(tv[0]/2);
+	tv[1]=-(2.0*y/((float)winh)-1.0)*yf;
+	tv[2]=-1;
+	rv[0]=1.5*180/M_PI*atan(tv[1]/2); /* TODO: Hm, this is not really correct ... */
+	rv[1]=1.5*180/M_PI*-atan(tv[0]/2);
 	rv[2]=0;
 	p=get_proc_by_pid(MCP);
 	if (-1!=(ptr=get_pointer(p)))

Modified: trunk/server/object.c
===================================================================
--- trunk/server/object.c	2006-03-18 01:03:44 UTC (rev 199)
+++ trunk/server/object.c	2006-03-18 13:09:15 UTC (rev 200)
@@ -1356,6 +1356,7 @@
 							ao->translate.x=o->translate.x;
 							ao->translate.y=o->translate.y;
 							ao->translate.z=o->translate.z; /* just copy */
+							obj_pos_update(ap,get_pointer(ap));
 						}
 						
 					} else 
@@ -1365,11 +1366,9 @@
 			{
 				case OF_CAM:
 					event_cam_changed();
-					dprintf(LOW,"[obj_pos_upd|pid %d] %d event_cam_changed",p->id,oid);
 					break;
 				case OF_POINTER:
 					event_ptr_changed();
-					dprintf(LOW,"[obj_pos_upd|pid %d] %d event_ptr_changed",p->id,oid);
 					break;
 				default:
 					dprintf(LOW,"[obj_pos_upd|pid %d] %d unknown systen event",p->id,oid);
@@ -1658,9 +1657,15 @@
 	{
 		if (oid_to==oid_from)
 		{
-			errds(VHIGH,"obj_link()","can't link to itself!!",oid_from,oid_to);
+			errds(VHIGH,"obj_link()","can't link to itself!!");
 			return(-1);
 		}
+		if (OF_POINTER==(o->oflags&0xF0000000))
+		{
+			errds(VHIGH,"obj_link()","may not change the link of a pointer");
+			return(-1);
+		}
+
 		while (o2->oflags&OF_LINK)
 		{
 			if (o2->linkid==oid_from)  /*  circular link!! we can't do that */
@@ -1672,7 +1677,7 @@
 		}
 		if ((o->oflags&OF_SYSTEM) && (p->id==MCP))
 		{
-			errds(VHIGH,"obj_link()","can't link system-objects in non-mcp-apps!",oid_from,oid_to);
+			errds(VHIGH,"obj_link()","can't link system-objects in non-mcp-apps!");
 			return(-1);
 		}
  		dprintf(LOW,"[link|pid %d] %d -> %d",p->id, oid_from,oid_to); 
@@ -1690,6 +1695,11 @@
 	struct t_obj *o;
 	if (obj_valid(p,oid,o))
 	{
+		if (OF_POINTER==(o->oflags&0xF0000000))
+		{
+			errds(VHIGH,"obj_link()","may not change the link of a pointer");
+			return(-1);
+		}
 		o->oflags&=~OF_LINK;
 		dprintf(VLOW,"removing link of object %d from pid %d",oid,p->id);
 		obj_pos_update(p,oid);

Modified: trunk/server/process.c
===================================================================
--- trunk/server/process.c	2006-03-18 01:03:44 UTC (rev 199)
+++ trunk/server/process.c	2006-03-18 13:09:15 UTC (rev 200)
@@ -104,7 +104,7 @@
 		   will be registered as "real" apps first */
 		p->object[cam]->translate.z=5;
 		p->object[cam]->oflags=OF_CAM;
-		p->object[ptr]->translate.z=1;
+		p->object[ptr]->translate.z=-1;
 		p->object[ptr]->oflags=OF_POINTER|OF_LINK;
 		p->object[ptr]->linkid=cam;
 	} else {

Modified: trunk/server/proto.h
===================================================================
--- trunk/server/proto.h	2006-03-18 01:03:44 UTC (rev 199)
+++ trunk/server/proto.h	2006-03-18 13:09:15 UTC (rev 200)
@@ -160,6 +160,9 @@
 			 /*  4b: oid */
 #define	S3D_P_S_KEY		4
 			 /*  2b: button */
+#define S3D_P_S_MBUTTON	5
+             /*  1b: button number */
+             /*  2b: butotn state */
 #define S3D_P_S_NEWOBJ	16
 			 /*  4b: oid */
 

Modified: trunk/server/user.c
===================================================================
--- trunk/server/user.c	2006-03-18 01:03:44 UTC (rev 199)
+++ trunk/server/user.c	2006-03-18 13:09:15 UTC (rev 200)
@@ -25,6 +25,7 @@
 #include "global.h"
 /*  this file reads user input */
 static int ox,oy;
+static int pressed;
 int but=-1;
 int user_init() {
 	switch (frame_mode)
@@ -37,6 +38,7 @@
 #endif
 		default:return(-1);
 	}
+	pressed=0;
 	ox=oy=0xFFFFFF;
 	return(0);
 }
@@ -66,66 +68,67 @@
 }
 void user_mouse(int button, int state, int x, int y) 
 {
-	if (state==0)  /*  mouse_down ... */
+	switch (state)
 	{
-		switch (button)
-		{
-			case 0:
-				graphics_pick_obj(x,y);	
-				break;
-			case 1:
-				if ((ox!=0xFFFFFF) && (oy!=0xFFFFFF))
-					navi_pos(ox-x,oy-y);
-				break;
-			case 2:
-				if ((ox!=0xFFFFFF) && (oy!=0xFFFFFF))
-					navi_rot(ox-x,oy-y);
-				break;
-			case 3:
-				navi_fwd();
-				break;
-			case 4:
-				navi_back();
-				break;
-			default:
-				dprintf(VLOW,"button is ... %d", button);
-		}
-	} 
-	 /*  mouse still down */
-	if (state==2)
-	{
-		switch (button)
-		{
-			case 1:
-				if ((ox!=0xFFFFFF) && (oy!=0xFFFFFF))
-					navi_pos(ox-x,oy-y);
-				break;
-			case 2:
-				if ((ox!=0xFFFFFF) && (oy!=0xFFFFFF))
-					navi_rot(ox-x,oy-y);
-				break;
-			case 3:
-				navi_fwd();
-				break;
-			case 4:
-				navi_back();
-				break;
-			default:
-				dprintf(VLOW,"button is ... %d", button);
-		}
+		case 0: /*  mouse_down ... */
+			switch (button)
+			{
+				case 0:
+					graphics_pick_obj(x,y);	
+					break;
+				case 1:
+					if ((ox!=0xFFFFFF) && (oy!=0xFFFFFF))
+						navi_pos(ox-x,oy-y);
+					break;
+				case 2:
+					if ((ox!=0xFFFFFF) && (oy!=0xFFFFFF))
+						navi_rot(ox-x,oy-y);
+					break;
+				case 3:
+					navi_fwd();
+					break;
+				case 4:
+					navi_back();
+					break;
+				default:
+					dprintf(VLOW,"button is ... %d", button);
+			}
+			ox=x;
+			oy=y;
+			event_mbutton_clicked(button,state);
+			break;
+		case 1:  /*  mouse up */
+			ox=oy=0xFFFFFF;
+			event_mbutton_clicked(button,state);
+	/*		dprintf(LOW,"state is: %d,button is %d",state,button);*/
+			break;
+		case 2:	 /*  mouse still down */
+			switch (button)
+			{
+				case 1:
+					if ((ox!=0xFFFFFF) && (oy!=0xFFFFFF))
+						navi_pos(ox-x,oy-y);
+					break;
+				case 2:
+					if ((ox!=0xFFFFFF) && (oy!=0xFFFFFF))
+						navi_rot(ox-x,oy-y);
+					break;
+				case 3:
+					navi_fwd();
+					break;
+				case 4:
+					navi_back();
+					break;
+				default:
+					dprintf(VLOW,"button is ... %d", button);
+			}
+			ox=x;
+			oy=y;
+			break;
 	}
-	ox=x;
-	oy=y;
-	if ((ox!=0xFFFFFF) && (oy!=0xFFFFFF))
-	{	/* mouse changed? */
-		ptr_move(x,y);
-	}
 	but=button;
-	if (state==1)  /*  mouse up */
-	{
-		ox=oy=0xFFFFFF;
-/*		dprintf(LOW,"state is: %d,button is %d",state,button);*/
-	}
+	/* mouse changed? */
+	ptr_move(x,y);
 }
 int user_quit() {
 	return(0);



From dotslash at berlios.de  Sat Mar 18 15:02:08 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Sat, 18 Mar 2006 15:02:08 +0100
Subject: [S3d-svn] r201 - in trunk: . apps/olsrs3d client server
Message-ID: <200603181402.k2IE28MF025525@sheep.berlios.de>

Author: dotslash
Date: 2006-03-18 15:02:05 +0100 (Sat, 18 Mar 2006)
New Revision: 201

Added:
   trunk/client/vector.c
Modified:
   trunk/
   trunk/apps/olsrs3d/Makefile.am
   trunk/apps/olsrs3d/main.c
   trunk/apps/olsrs3d/process.c
   trunk/apps/olsrs3d/vector.c
   trunk/client/Makefile.am
   trunk/client/s3d.h
   trunk/server/event.c
Log:
 r301 at balthasar:  dotslash | 2006-03-18 14:59:42 +0100
 - moving vector.c into client-lib
 - some -pedantic beautifying in olsrs3d ;)



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:299
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:301

Modified: trunk/apps/olsrs3d/Makefile.am
===================================================================
--- trunk/apps/olsrs3d/Makefile.am	2006-03-18 13:09:15 UTC (rev 200)
+++ trunk/apps/olsrs3d/Makefile.am	2006-03-18 14:02:05 UTC (rev 201)
@@ -5,7 +5,6 @@
 	olsrs3d.h
 
 olsrs3d_SOURCES =  \
-	vector.c \
 	process.c \
 	main.c \
 	net.c

Modified: trunk/apps/olsrs3d/main.c
===================================================================
--- trunk/apps/olsrs3d/main.c	2006-03-18 13:09:15 UTC (rev 200)
+++ trunk/apps/olsrs3d/main.c	2006-03-18 14:02:05 UTC (rev 201)
@@ -323,17 +323,16 @@
 
 		}
 
-
-		/* rotate node description so that they are always readable */
-		tmp_mov_vec[0] = CamPosition[0][0] - olsr_node->pos_vec[0];
-		tmp_mov_vec[1] = 0;   /* we are not interested in the y value */
-		tmp_mov_vec[2] = CamPosition[0][2] - olsr_node->pos_vec[2];
-
-		/* take care of inverse cosinus */
-		angle = ( tmp_mov_vec[0] > 0 ? 180 - ( 180.0/M_PI * vector_angle( desc_norm_vec, tmp_mov_vec ) ) : 180 + ( 180.0/M_PI * vector_angle( desc_norm_vec, tmp_mov_vec ) ) );
-
+		s3d_vector_substract( olsr_node->pos_vec, CamPosition[0], tmp_mov_vec );
+		tmp_mov_vec[1]=0; /* we are not interested in the y value */
+		angle = 180.0/M_PI * s3d_vector_angle( desc_norm_vec, tmp_mov_vec );
+		if (tmp_mov_vec[0]>0)
+			angle=180-angle;
+		else
+			angle=180+angle;
 		s3d_rotate( olsr_node->desc_id, 0, angle , 0 );
 		s3d_translate( olsr_node->desc_id, -cos(angle*M_PI/180)*olsr_node->desc_length/2 ,-1.5, sin(angle*M_PI/180)*olsr_node->desc_length/2 );
+/* 		printf( "olsr node (%s) angle: %f\n", olsr_node->ip, angle * 180 / M_PI );*/
 
 
 		/* drift away from unrelated nodes */

Modified: trunk/apps/olsrs3d/process.c
===================================================================
--- trunk/apps/olsrs3d/process.c	2006-03-18 13:09:15 UTC (rev 200)
+++ trunk/apps/olsrs3d/process.c	2006-03-18 14:02:05 UTC (rev 201)
@@ -49,6 +49,7 @@
 
 	struct olsr_con **olsr_con = &Con_begin;
 	struct olsr_con *prev_olsr_con = NULL;   /* previous olsr connection */
+	struct olsr_neigh_list **olsr_neigh_list;
 
 	while ( (*olsr_con) != NULL ) {
 
@@ -88,8 +89,8 @@
 
 		s3d_flags_on( (*olsr_con)->obj_id, S3D_OF_VISIBLE );
 
-// 		s3d_push_polygon( (*olsr_con)->obj_id, 0,4,5,0 );
-// 		s3d_push_polygon( (*olsr_con)->obj_id, 3,1,2,0 );
+/* 		s3d_push_polygon( (*olsr_con)->obj_id, 0,4,5,0 );
+ 		s3d_push_polygon( (*olsr_con)->obj_id, 3,1,2,0 );*/
 		s3d_link( (*olsr_con)->obj_id,  ZeroPoint );
 
 		/* add olsr node to new olsr connection in order to access the nodes from the connection list */
@@ -113,7 +114,7 @@
 		(*olsr_con)->prev_olsr_con = prev_olsr_con;
 
 		/* add new olsr connection to olsr nodes in order to access the connection from the olsr node */
-		struct olsr_neigh_list **olsr_neigh_list = &(*olsr_con)->left_olsr_node->olsr_neigh_list;
+		olsr_neigh_list = &(*olsr_con)->left_olsr_node->olsr_neigh_list;
 		while ( (*olsr_neigh_list) != NULL ) olsr_neigh_list = &(*olsr_neigh_list)->next_olsr_neigh_list;
 		(*olsr_neigh_list) = malloc( sizeof( struct olsr_neigh_list ) );
 		if ( (*olsr_neigh_list) == NULL ) out_of_mem();

Modified: trunk/apps/olsrs3d/vector.c
===================================================================

Modified: trunk/client/Makefile.am
===================================================================
--- trunk/client/Makefile.am	2006-03-18 13:09:15 UTC (rev 200)
+++ trunk/client/Makefile.am	2006-03-18 14:02:05 UTC (rev 201)
@@ -3,7 +3,7 @@
 libs3d_la_SOURCES=	3dsread.c callback.c error.c event.c fontselect.c \
 			freetype.c io.c network.c object_queue.c proto_in.c \
 			proto_out.c shm.c shm_ringbuf.c tcp.c \
-			sei_construct.c sei_misc.c sei_monotone.c sei_tri.c
+			sei_construct.c sei_misc.c sei_monotone.c sei_tri.c vector.c
 			
 pkginclude_HEADERS=	config.h s3d.h s3dlib.h sei_triangulate.h sei_interface.h
 

Modified: trunk/client/s3d.h
===================================================================
--- trunk/client/s3d.h	2006-03-18 13:09:15 UTC (rev 200)
+++ trunk/client/s3d.h	2006-03-18 14:02:05 UTC (rev 201)
@@ -21,7 +21,7 @@
  * Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
  */
 
-
+/* definitions */
 struct s3d_evt {
 	unsigned char event;
 	int length;
@@ -30,11 +30,53 @@
 };
 
 typedef void (*s3d_cb)(struct s3d_evt *);
+
+#define S3D_EVENT_OBJ_CLICK		1
+#define S3D_EVENT_KEY			2
+#define S3D_EVENT_MBUTTON		3
+#define S3D_EVENT_NEW_OBJECT	16
+#define S3D_EVENT_OBJ_INFO		17
+
+#define S3D_EVENT_QUIT			255
+
+/* TODO: don't keep _MCP_ events .. they're ugly */
+#define S3D_MCP_OBJECT			32
+#define S3D_MCP_DEL_OBJECT		33
+
+#define S3D_PORT				6066
+
+#define	S3D_OF_VISIBLE			0x00000001
+#define	S3D_OF_SELECTABLE		0x00000002
+#define S3D_OF_POINTABLE		0x00000004
+struct mcp_object 
+{
+	unsigned long object;
+	float trans_x,trans_y,trans_z;
+	float r;
+#define MCP_NEW_OBJECT	1
+	char name[256]; 
+};
+struct s3d_obj_info 
+{
+	unsigned long object;
+	unsigned long flags;
+	float trans_x,trans_y,trans_z;
+	float rot_x,rot_y,rot_z;
+	float scale;
+	float r;
+	char name[256]; 
+};
+struct s3d_but_info
+{
+	unsigned char button, state;
+};
+/* framework functions */
 void s3d_usage();
 int s3d_init(int *argc, char ***argv, char *name);
 int s3d_quit();
 int s3d_mainloop(void (*f)());
 
+/* object manipulations */
 int s3d_push_vertex(int object, float x, float y, float z);
 int s3d_push_vertices(int object, float *vbuf, unsigned short n);
 int s3d_push_material( int object, 
@@ -79,72 +121,48 @@
 int s3d_load_polygon_normals(int object, float *nbuf,unsigned long start, unsigned short n);
 int s3d_load_polygon_tex_coords(int object, float *tbuf, unsigned long start, unsigned short n);
 int s3d_load_texture(int object, unsigned long tex, unsigned short xpos, unsigned short ypos, unsigned short w, unsigned short h, char *data);
+
 int s3d_new_object();
 int s3d_del_object(unsigned long oid);
+
 int s3d_clone(unsigned long oid);
 int s3d_clone_target(unsigned long oid, unsigned long toid);
+
 int s3d_link(unsigned long oid_from, unsigned long oid_to);
 int s3d_unlink(unsigned long oid);
-int s3d_import_3ds_file(char *fname);
-int s3d_import_3ds(char *buf);
-int s3d_open_file(char *fname, char **pointer);
-int s3d_select_font(char *mask);
-int s3d_draw_string( char *str, float *xlen);
+
 int s3d_flags_on(int object, unsigned long flags);
 int s3d_flags_off(int object, unsigned long flags);
 int s3d_translate(int object, float x, float y, float z);
 int s3d_rotate(int object, float x, float y, float z);
 int s3d_scale(int object, float s);
 
+/* high-level object creating */
+int s3d_import_3ds_file(char *fname);
+int s3d_import_3ds(char *buf);
+int s3d_open_file(char *fname, char **pointer);
+int s3d_select_font(char *mask);
+int s3d_draw_string( char *str, float *xlen);
+
+/* some vector calculation helpers */
+
+float s3d_vector_length( float vector[] );
+float s3d_vector_dot_product( float vector1[], float vector2[] );
+void s3d_vector_substract( float vector1[], float vector2[], float result_vector[] );
+float s3d_vector_angle( float vector1[], float vector2[] );
+
+/* event handlers */
 void s3d_push_event(struct s3d_evt *newevt);
 struct s3d_evt *s3d_pop_event();
 struct s3d_evt *s3d_find_event(unsigned char event);
 int s3d_delete_event(struct s3d_evt *devt);
 
-
 void s3d_set_callback(unsigned char event, s3d_cb func);
 void s3d_clear_callback(unsigned char event);
 void s3d_ignore_callback(unsigned char event);
 s3d_cb s3d_get_callback(unsigned char event);
 void s3d_process_stack();
 
+/* mcp special */
 int s3d_mcp_focus(int object);
-#define S3D_EVENT_OBJ_CLICK		1
-#define S3D_EVENT_KEY			2
-#define S3D_EVENT_MBUTTON		3
-#define S3D_EVENT_NEW_OBJECT	16
-#define S3D_EVENT_OBJ_INFO		17
 
-#define S3D_EVENT_QUIT			255
-
-/* TODO: don't keep _MCP_ events .. they're ugly */
-#define S3D_MCP_OBJECT			32
-#define S3D_MCP_DEL_OBJECT		33
-
-#define S3D_PORT				6066
-
-#define	S3D_OF_VISIBLE			0x00000001
-#define	S3D_OF_SELECTABLE		0x00000002
-#define S3D_OF_POINTABLE		0x00000004
-struct mcp_object 
-{
-	unsigned long object;
-	float trans_x,trans_y,trans_z;
-	float r;
-#define MCP_NEW_OBJECT	1
-	char name[256]; 
-};
-struct s3d_obj_info 
-{
-	unsigned long object;
-	unsigned long flags;
-	float trans_x,trans_y,trans_z;
-	float rot_x,rot_y,rot_z;
-	float scale;
-	float r;
-	char name[256]; 
-};
-struct s3d_but_info
-{
-	unsigned char button, state;
-};

Added: trunk/client/vector.c
===================================================================
--- trunk/client/vector.c	2006-03-18 13:09:15 UTC (rev 200)
+++ trunk/client/vector.c	2006-03-18 14:02:05 UTC (rev 201)
@@ -0,0 +1,92 @@
+/*
+ * net.c
+ *
+ * Copyright (C) 2004-2006 Simon Wunderlich <dotslash at packetmixer.de>
+ *                         Marek Lindner <lindner_marek at yahoo.de>
+ *                         Andreas Langer <andreas_lbg at gmx.de>
+ *
+ * This file is part of olsrs3d, an olsr topology visualizer for s3d.
+ * See http://s3d.berlios.de/ for more updates.
+ *
+ * olsrs3d is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation; either version 2 of the License, or
+ * (at your option) any later version.
+ *
+ * olsrs3d is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License
+ * along with s3d; if not, write to the Free Software
+ * Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
+ */
+
+#include <math.h>		/* sqrt() */
+
+/***
+ *
+ * calculate length of a vector => http://en.wikipedia.org/wiki/Vector_%28spatial%29#Length_of_a_vector
+ *
+ *   vector   =>   given vector
+ *
+ *   return length
+ *
+ ***/
+
+float s3d_vector_length( float vector[] ) {
+	return ( sqrt( vector[0] * vector[0] + vector[1] * vector[1] + vector[2] * vector[2] ) );
+
+}
+
+
+/***
+ *
+ * substract vector1 from vector2 => http://en.wikipedia.org/wiki/Vector_%28spatial%29#Vector_addition_and_subtraction
+ *
+ *   vector1         =>   given vector1
+ *   vector2         =>   given vector2
+ *   result_vector   =>   save resulting vector here
+ *
+ ***/
+
+void s3d_vector_substract( float vector1[], float vector2[], float result_vector[] ) {
+
+	result_vector[0] = vector2[0] - vector1[0];
+	result_vector[1] = vector2[1] - vector1[1];
+	result_vector[2] = vector2[2] - vector1[2];
+}
+
+/***
+ *
+ * calculate dot product of 2 vectors => http://en.wikipedia.org/wiki/Vector_%28spatial%29#Dot_product
+ *
+ *   vector1   =>   given vector1
+ *   vector2   =>   given vector2
+ *
+ *   return dot product
+ *
+ ***/
+
+float s3d_vector_dot_product( float vector1[], float vector2[] ) {
+	return ( vector1[0] * vector2[0] + vector1[1] * vector2[1] + vector1[2] * vector2[2] );
+}
+
+/***
+ *
+ * calculate angle between 2 vectors => http://en.wikipedia.org/wiki/Vector_%28spatial%29#Dot_product
+ *
+ *   vector1   =>   given vector1
+ *   vector2   =>   given vector2
+ *
+ *   return angle
+ *
+ *   NOTE: angle is between 0 and PI, therefore not covering the whole period!
+ *
+ ***/
+
+float s3d_vector_angle( float vector1[], float vector2[] ) {
+	return ( acos( s3d_vector_dot_product( vector1, vector2 ) / ( s3d_vector_length( vector1 ) * s3d_vector_length( vector2 ) ) ) );
+
+}

Modified: trunk/server/event.c
===================================================================
--- trunk/server/event.c	2006-03-18 13:09:15 UTC (rev 200)
+++ trunk/server/event.c	2006-03-18 14:02:05 UTC (rev 201)
@@ -61,7 +61,6 @@
 	uint8_t b[2];
 	b[0]=button;
 	b[1]=state;
-	dprintf(MED,"mouse button click event: %d %d",button,state);
 	if (obj_valid(get_proc_by_pid(MCP),focus_oid,o))
 		prot_com_out(get_proc_by_pid(o->n_mat), S3D_P_S_MBUTTON, (uint8_t *)&b, 2);
 	prot_com_out(get_proc_by_pid(MCP),S3D_P_S_MBUTTON,(uint8_t *)&b, 2); /* mcp always gets a copy */



From dotslash at berlios.de  Sat Mar 18 15:13:20 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Sat, 18 Mar 2006 15:13:20 +0100
Subject: [S3d-svn] r202 - in trunk: . apps/olsrs3d
Message-ID: <200603181413.k2IEDK19000256@sheep.berlios.de>

Author: dotslash
Date: 2006-03-18 15:13:11 +0100 (Sat, 18 Mar 2006)
New Revision: 202

Removed:
   trunk/apps/olsrs3d/vector.c
Modified:
   trunk/
   trunk/apps/olsrs3d/main.c
Log:
 r304 at balthasar:  dotslash | 2006-03-18 15:12:19 +0100
 - fixing undone changes of mareks code cleanup (i should always pull 
   the latest revision before making wild changes >_>)



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:301
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:304

Modified: trunk/apps/olsrs3d/main.c
===================================================================
--- trunk/apps/olsrs3d/main.c	2006-03-18 14:02:05 UTC (rev 201)
+++ trunk/apps/olsrs3d/main.c	2006-03-18 14:13:11 UTC (rev 202)
@@ -322,17 +322,18 @@
 			olsr_node->node_type_modified = 0;
 
 		}
-
-		s3d_vector_substract( olsr_node->pos_vec, CamPosition[0], tmp_mov_vec );
-		tmp_mov_vec[1]=0; /* we are not interested in the y value */
-		angle = 180.0/M_PI * s3d_vector_angle( desc_norm_vec, tmp_mov_vec );
-		if (tmp_mov_vec[0]>0)
-			angle=180-angle;
-		else
-			angle=180+angle;
+		/* rotate node description so that they are always readable */
+		tmp_mov_vec[0] = CamPosition[0][0] - olsr_node->pos_vec[0];
+		tmp_mov_vec[1] = 0;   /* we are not interested in the y value */
+		tmp_mov_vec[2] = CamPosition[0][2] - olsr_node->pos_vec[2];
+	
+		/* take care of inverse cosinus */
+		angle = ( tmp_mov_vec[0] > 0 ? 
+					180 - ( 180.0/M_PI * vector_angle( desc_norm_vec, tmp_mov_vec ) ) : 
+					180 + ( 180.0/M_PI * vector_angle( desc_norm_vec, tmp_mov_vec ) ) );
+																		
 		s3d_rotate( olsr_node->desc_id, 0, angle , 0 );
 		s3d_translate( olsr_node->desc_id, -cos(angle*M_PI/180)*olsr_node->desc_length/2 ,-1.5, sin(angle*M_PI/180)*olsr_node->desc_length/2 );
-/* 		printf( "olsr node (%s) angle: %f\n", olsr_node->ip, angle * 180 / M_PI );*/
 
 
 		/* drift away from unrelated nodes */

Deleted: trunk/apps/olsrs3d/vector.c
===================================================================
--- trunk/apps/olsrs3d/vector.c	2006-03-18 14:02:05 UTC (rev 201)
+++ trunk/apps/olsrs3d/vector.c	2006-03-18 14:13:11 UTC (rev 202)
@@ -1,108 +0,0 @@
-/*
- * vector.c
- *
- * Copyright (C) 2004-2006 Simon Wunderlich <dotslash at packetmixer.de>
- *                         Marek Lindner <lindner_marek at yahoo.de>
- *                         Andreas Langer <andreas_lbg at gmx.de>
- *
- * This file is part of olsrs3d, an olsr topology visualizer for s3d.
- * See http://s3d.berlios.de/ for more updates.
- *
- * olsrs3d is free software; you can redistribute it and/or modify
- * it under the terms of the GNU General Public License as published by
- * the Free Software Foundation; either version 2 of the License, or
- * (at your option) any later version.
- *
- * olsrs3d is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- * GNU General Public License for more details.
- *
- * You should have received a copy of the GNU General Public License
- * along with s3d; if not, write to the Free Software
- * Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
- */
-
-
-
-#include <stdio.h>
-#include <math.h>		/* sqrt() */
-
-
-
-
-
-/***
- *
- * calculate length of a vector => http://en.wikipedia.org/wiki/Vector_%28spatial%29#Length_of_a_vector
- *
- *   vector   =>   given vector
- *
- *   return length
- *
- ***/
-
-float vector_length( float vector[] ) {
-
-	return ( sqrt( vector[0] * vector[0] + vector[1] * vector[1] + vector[2] * vector[2] ) );
-
-}
-
-
-
-/***
- *
- * substract vector1 from vector2 => http://en.wikipedia.org/wiki/Vector_%28spatial%29#Vector_addition_and_subtraction
- *
- *   vector1         =>   given vector1
- *   vector2         =>   given vector2
- *   result_vector   =>   save resulting vector here
- *
- ***/
-
-void vector_substract( float vector1[], float vector2[], float result_vector[] ) {
-
-	result_vector[0] = vector2[0] - vector1[0];
-	result_vector[1] = vector2[1] - vector1[1];
-	result_vector[2] = vector2[2] - vector1[2];
-
-}
-
-
-
-/***
- *
- * calculate dot product of 2 vectors => http://en.wikipedia.org/wiki/Vector_%28spatial%29#Dot_product
- *
- *   vector1   =>   given vector1
- *   vector2   =>   given vector2
- *
- *   return dot product
- *
- ***/
-
-float vector_dot_product( float vector1[], float vector2[] ) {
-
-	return ( vector1[0] * vector2[0] + vector1[1] * vector2[1] + vector1[2] * vector2[2] );
-
-}
-
-
-
-/***
- *
- * calculate angle between 2 vectors => http://en.wikipedia.org/wiki/Vector_%28spatial%29#Dot_product
- *
- *   vector1   =>   given vector1
- *   vector2   =>   given vector2
- *
- *   return angle (0-180 due to acos!)
- *
- ***/
-
-float vector_angle( float vector1[], float vector2[] ) {
-
-	return ( acos( vector_dot_product( vector1, vector2 ) / ( vector_length( vector1 ) * vector_length( vector2 ) ) ) );
-
-}
-



From dotslash at berlios.de  Sat Mar 18 15:15:53 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Sat, 18 Mar 2006 15:15:53 +0100
Subject: [S3d-svn] r203 - in trunk: . apps/olsrs3d
Message-ID: <200603181415.k2IEFrV3002682@sheep.berlios.de>

Author: dotslash
Date: 2006-03-18 15:15:52 +0100 (Sat, 18 Mar 2006)
New Revision: 203

Modified:
   trunk/
   trunk/apps/olsrs3d/main.c
Log:
 r306 at balthasar:  dotslash | 2006-03-18 15:15:19 +0100
 - and actually I should try compiling before commiting >_> darn



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:304
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:306

Modified: trunk/apps/olsrs3d/main.c
===================================================================
--- trunk/apps/olsrs3d/main.c	2006-03-18 14:13:11 UTC (rev 202)
+++ trunk/apps/olsrs3d/main.c	2006-03-18 14:15:52 UTC (rev 203)
@@ -329,8 +329,8 @@
 	
 		/* take care of inverse cosinus */
 		angle = ( tmp_mov_vec[0] > 0 ? 
-					180 - ( 180.0/M_PI * vector_angle( desc_norm_vec, tmp_mov_vec ) ) : 
-					180 + ( 180.0/M_PI * vector_angle( desc_norm_vec, tmp_mov_vec ) ) );
+					180 - ( 180.0/M_PI * s3d_vector_angle( desc_norm_vec, tmp_mov_vec ) ) : 
+					180 + ( 180.0/M_PI * s3d_vector_angle( desc_norm_vec, tmp_mov_vec ) ) );
 																		
 		s3d_rotate( olsr_node->desc_id, 0, angle , 0 );
 		s3d_translate( olsr_node->desc_id, -cos(angle*M_PI/180)*olsr_node->desc_length/2 ,-1.5, sin(angle*M_PI/180)*olsr_node->desc_length/2 );



From dotslash at berlios.de  Sat Mar 18 15:39:59 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Sat, 18 Mar 2006 15:39:59 +0100
Subject: [S3d-svn] r204 - in trunk: . client server
Message-ID: <200603181439.k2IEdxKk019026@sheep.berlios.de>

Author: dotslash
Date: 2006-03-18 15:39:55 +0100 (Sat, 18 Mar 2006)
New Revision: 204

Added:
   trunk/client/s3d_keysym.h
Modified:
   trunk/
   trunk/client/Makefile.am
   trunk/client/vector.c
   trunk/server/user_glut.c
Log:
 r308 at balthasar:  dotslash | 2006-03-18 15:38:43 +0100
 - using SDL keysyms for special key characters)



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:306
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:308

Modified: trunk/client/Makefile.am
===================================================================
--- trunk/client/Makefile.am	2006-03-18 14:15:52 UTC (rev 203)
+++ trunk/client/Makefile.am	2006-03-18 14:39:55 UTC (rev 204)
@@ -5,7 +5,7 @@
 			proto_out.c shm.c shm_ringbuf.c tcp.c \
 			sei_construct.c sei_misc.c sei_monotone.c sei_tri.c vector.c
 			
-pkginclude_HEADERS=	config.h s3d.h s3dlib.h sei_triangulate.h sei_interface.h
+pkginclude_HEADERS=	s3d.h s3d_keysym.h config.h s3dlib.h sei_triangulate.h sei_interface.h 
 
 libs3d_la_CPPFLAGS=	-I${top_srcdir}/server
 libs3d_la_CFLAGS=	@FONTCONFIG_CFLAGS@ @FREETYPE_CFLAGS@ 

Added: trunk/client/s3d_keysym.h
===================================================================
--- trunk/client/s3d_keysym.h	2006-03-18 14:15:52 UTC (rev 203)
+++ trunk/client/s3d_keysym.h	2006-03-18 14:39:55 UTC (rev 204)
@@ -0,0 +1,314 @@
+/*
+ * s3d_keysym.h
+ *
+ * Copyright (C) 2004-2006 Simon Wunderlich <dotslash at packetmixer.de>
+ * Copyright (C) 1997-2004 Sam Lantinga <slouken at libsdl.org>
+ *
+ * This file is part of the s3d API, the API of s3d (the 3d network display server).
+ * See http://s3d.berlios.de/ for more updates.
+ * 
+ * The s3d API is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU Lesser General Public License as published by
+ * the Free Software Foundation; either version 2.1 of the License, or
+ * (at your option) any later version.
+ * 
+ * The s3d API is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU Lesser General Public License for more details.
+ * 
+ * You should have received a copy of the GNU Lesser General Public License
+ * along with the s3d API; if not, write to the Free Software
+ * Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
+ */
+
+/* this is just a copy of SDL_keysym.sh from the SDL Simple DirectMedia Layer Package,
+ * which seems to have a pretty useful Key definition base.
+ * For more Information about SDL, check http://sdlorg*/
+
+
+/* What we really want is a mapping of every raw key on the keyboard.
+   To support international keyboards, we use the range 0xA1 - 0xFF
+   as international virtual keycodes.  We'll follow in the footsteps of X11...
+   The names of the keys
+ */
+ 
+typedef enum {
+	/* The keyboard syms have been cleverly chosen to map to ASCII */
+	S3DK_UNKNOWN		= 0,
+	S3DK_FIRST		= 0,
+	S3DK_BACKSPACE		= 8,
+	S3DK_TAB		= 9,
+	S3DK_CLEAR		= 12,
+	S3DK_RETURN		= 13,
+	S3DK_PAUSE		= 19,
+	S3DK_ESCAPE		= 27,
+	S3DK_SPACE		= 32,
+	S3DK_EXCLAIM		= 33,
+	S3DK_QUOTEDBL		= 34,
+	S3DK_HASH		= 35,
+	S3DK_DOLLAR		= 36,
+	S3DK_AMPERSAND		= 38,
+	S3DK_QUOTE		= 39,
+	S3DK_LEFTPAREN		= 40,
+	S3DK_RIGHTPAREN		= 41,
+	S3DK_ASTERISK		= 42,
+	S3DK_PLUS		= 43,
+	S3DK_COMMA		= 44,
+	S3DK_MINUS		= 45,
+	S3DK_PERIOD		= 46,
+	S3DK_SLASH		= 47,
+	S3DK_0			= 48,
+	S3DK_1			= 49,
+	S3DK_2			= 50,
+	S3DK_3			= 51,
+	S3DK_4			= 52,
+	S3DK_5			= 53,
+	S3DK_6			= 54,
+	S3DK_7			= 55,
+	S3DK_8			= 56,
+	S3DK_9			= 57,
+	S3DK_COLON		= 58,
+	S3DK_SEMICOLON		= 59,
+	S3DK_LESS		= 60,
+	S3DK_EQUALS		= 61,
+	S3DK_GREATER		= 62,
+	S3DK_QUESTION		= 63,
+	S3DK_AT			= 64,
+	/* 
+	   Skip uppercase letters
+	 */
+	S3DK_LEFTBRACKET	= 91,
+	S3DK_BACKSLASH		= 92,
+	S3DK_RIGHTBRACKET	= 93,
+	S3DK_CARET		= 94,
+	S3DK_UNDERSCORE		= 95,
+	S3DK_BACKQUOTE		= 96,
+	S3DK_a			= 97,
+	S3DK_b			= 98,
+	S3DK_c			= 99,
+	S3DK_d			= 100,
+	S3DK_e			= 101,
+	S3DK_f			= 102,
+	S3DK_g			= 103,
+	S3DK_h			= 104,
+	S3DK_i			= 105,
+	S3DK_j			= 106,
+	S3DK_k			= 107,
+	S3DK_l			= 108,
+	S3DK_m			= 109,
+	S3DK_n			= 110,
+	S3DK_o			= 111,
+	S3DK_p			= 112,
+	S3DK_q			= 113,
+	S3DK_r			= 114,
+	S3DK_s			= 115,
+	S3DK_t			= 116,
+	S3DK_u			= 117,
+	S3DK_v			= 118,
+	S3DK_w			= 119,
+	S3DK_x			= 120,
+	S3DK_y			= 121,
+	S3DK_z			= 122,
+	S3DK_DELETE		= 127,
+	/* End of ASCII mapped keysyms */
+
+	/* International keyboard syms */
+	S3DK_WORLD_0		= 160,		/* 0xA0 */
+	S3DK_WORLD_1		= 161,
+	S3DK_WORLD_2		= 162,
+	S3DK_WORLD_3		= 163,
+	S3DK_WORLD_4		= 164,
+	S3DK_WORLD_5		= 165,
+	S3DK_WORLD_6		= 166,
+	S3DK_WORLD_7		= 167,
+	S3DK_WORLD_8		= 168,
+	S3DK_WORLD_9		= 169,
+	S3DK_WORLD_10		= 170,
+	S3DK_WORLD_11		= 171,
+	S3DK_WORLD_12		= 172,
+	S3DK_WORLD_13		= 173,
+	S3DK_WORLD_14		= 174,
+	S3DK_WORLD_15		= 175,
+	S3DK_WORLD_16		= 176,
+	S3DK_WORLD_17		= 177,
+	S3DK_WORLD_18		= 178,
+	S3DK_WORLD_19		= 179,
+	S3DK_WORLD_20		= 180,
+	S3DK_WORLD_21		= 181,
+	S3DK_WORLD_22		= 182,
+	S3DK_WORLD_23		= 183,
+	S3DK_WORLD_24		= 184,
+	S3DK_WORLD_25		= 185,
+	S3DK_WORLD_26		= 186,
+	S3DK_WORLD_27		= 187,
+	S3DK_WORLD_28		= 188,
+	S3DK_WORLD_29		= 189,
+	S3DK_WORLD_30		= 190,
+	S3DK_WORLD_31		= 191,
+	S3DK_WORLD_32		= 192,
+	S3DK_WORLD_33		= 193,
+	S3DK_WORLD_34		= 194,
+	S3DK_WORLD_35		= 195,
+	S3DK_WORLD_36		= 196,
+	S3DK_WORLD_37		= 197,
+	S3DK_WORLD_38		= 198,
+	S3DK_WORLD_39		= 199,
+	S3DK_WORLD_40		= 200,
+	S3DK_WORLD_41		= 201,
+	S3DK_WORLD_42		= 202,
+	S3DK_WORLD_43		= 203,
+	S3DK_WORLD_44		= 204,
+	S3DK_WORLD_45		= 205,
+	S3DK_WORLD_46		= 206,
+	S3DK_WORLD_47		= 207,
+	S3DK_WORLD_48		= 208,
+	S3DK_WORLD_49		= 209,
+	S3DK_WORLD_50		= 210,
+	S3DK_WORLD_51		= 211,
+	S3DK_WORLD_52		= 212,
+	S3DK_WORLD_53		= 213,
+	S3DK_WORLD_54		= 214,
+	S3DK_WORLD_55		= 215,
+	S3DK_WORLD_56		= 216,
+	S3DK_WORLD_57		= 217,
+	S3DK_WORLD_58		= 218,
+	S3DK_WORLD_59		= 219,
+	S3DK_WORLD_60		= 220,
+	S3DK_WORLD_61		= 221,
+	S3DK_WORLD_62		= 222,
+	S3DK_WORLD_63		= 223,
+	S3DK_WORLD_64		= 224,
+	S3DK_WORLD_65		= 225,
+	S3DK_WORLD_66		= 226,
+	S3DK_WORLD_67		= 227,
+	S3DK_WORLD_68		= 228,
+	S3DK_WORLD_69		= 229,
+	S3DK_WORLD_70		= 230,
+	S3DK_WORLD_71		= 231,
+	S3DK_WORLD_72		= 232,
+	S3DK_WORLD_73		= 233,
+	S3DK_WORLD_74		= 234,
+	S3DK_WORLD_75		= 235,
+	S3DK_WORLD_76		= 236,
+	S3DK_WORLD_77		= 237,
+	S3DK_WORLD_78		= 238,
+	S3DK_WORLD_79		= 239,
+	S3DK_WORLD_80		= 240,
+	S3DK_WORLD_81		= 241,
+	S3DK_WORLD_82		= 242,
+	S3DK_WORLD_83		= 243,
+	S3DK_WORLD_84		= 244,
+	S3DK_WORLD_85		= 245,
+	S3DK_WORLD_86		= 246,
+	S3DK_WORLD_87		= 247,
+	S3DK_WORLD_88		= 248,
+	S3DK_WORLD_89		= 249,
+	S3DK_WORLD_90		= 250,
+	S3DK_WORLD_91		= 251,
+	S3DK_WORLD_92		= 252,
+	S3DK_WORLD_93		= 253,
+	S3DK_WORLD_94		= 254,
+	S3DK_WORLD_95		= 255,		/* 0xFF */
+
+	/* Numeric keypad */
+	S3DK_KP0		= 256,
+	S3DK_KP1		= 257,
+	S3DK_KP2		= 258,
+	S3DK_KP3		= 259,
+	S3DK_KP4		= 260,
+	S3DK_KP5		= 261,
+	S3DK_KP6		= 262,
+	S3DK_KP7		= 263,
+	S3DK_KP8		= 264,
+	S3DK_KP9		= 265,
+	S3DK_KP_PERIOD		= 266,
+	S3DK_KP_DIVIDE		= 267,
+	S3DK_KP_MULTIPLY	= 268,
+	S3DK_KP_MINUS		= 269,
+	S3DK_KP_PLUS		= 270,
+	S3DK_KP_ENTER		= 271,
+	S3DK_KP_EQUALS		= 272,
+
+	/* Arrows + Home/End pad */
+	S3DK_UP			= 273,
+	S3DK_DOWN		= 274,
+	S3DK_RIGHT		= 275,
+	S3DK_LEFT		= 276,
+	S3DK_INSERT		= 277,
+	S3DK_HOME		= 278,
+	S3DK_END		= 279,
+	S3DK_PAGEUP		= 280,
+	S3DK_PAGEDOWN		= 281,
+
+	/* Function keys */
+	S3DK_F1			= 282,
+	S3DK_F2			= 283,
+	S3DK_F3			= 284,
+	S3DK_F4			= 285,
+	S3DK_F5			= 286,
+	S3DK_F6			= 287,
+	S3DK_F7			= 288,
+	S3DK_F8			= 289,
+	S3DK_F9			= 290,
+	S3DK_F10		= 291,
+	S3DK_F11		= 292,
+	S3DK_F12		= 293,
+	S3DK_F13		= 294,
+	S3DK_F14		= 295,
+	S3DK_F15		= 296,
+
+	/* Key state modifier keys */
+	S3DK_NUMLOCK		= 300,
+	S3DK_CAPSLOCK		= 301,
+	S3DK_SCROLLOCK		= 302,
+	S3DK_RSHIFT		= 303,
+	S3DK_LSHIFT		= 304,
+	S3DK_RCTRL		= 305,
+	S3DK_LCTRL		= 306,
+	S3DK_RALT		= 307,
+	S3DK_LALT		= 308,
+	S3DK_RMETA		= 309,
+	S3DK_LMETA		= 310,
+	S3DK_LSUPER		= 311,		/* Left "Windows" key */
+	S3DK_RSUPER		= 312,		/* Right "Windows" key */
+	S3DK_MODE		= 313,		/* "Alt Gr" key */
+	S3DK_COMPOSE		= 314,		/* Multi-key compose key */
+
+	/* Miscellaneous function keys */
+	S3DK_HELP		= 315,
+	S3DK_PRINT		= 316,
+	S3DK_SYSREQ		= 317,
+	S3DK_BREAK		= 318,
+	S3DK_MENU		= 319,
+	S3DK_POWER		= 320,		/* Power Macintosh power key */
+	S3DK_EURO		= 321,		/* Some european keyboards */
+	S3DK_UNDO		= 322,		/* Atari keyboard has Undo */
+
+	/* Add any other keys here */
+
+	S3DK_LAST
+} S3DKey;
+
+/* Enumeration of valid key mods (possibly OR'd together) */
+typedef enum {
+	S3D_KMOD_NONE  = 0x0000,
+	S3D_KMOD_LSHIFT= 0x0001,
+	S3D_KMOD_RSHIFT= 0x0002,
+	S3D_KMOD_LCTRL = 0x0040,
+	S3D_KMOD_RCTRL = 0x0080,
+	S3D_KMOD_LALT  = 0x0100,
+	S3D_KMOD_RALT  = 0x0200,
+	S3D_KMOD_LMETA = 0x0400,
+	S3D_KMOD_RMETA = 0x0800,
+	S3D_KMOD_NUM   = 0x1000,
+	S3D_KMOD_CAPS  = 0x2000,
+	S3D_KMOD_MODE  = 0x4000,
+	S3D_KMOD_RESERVED = 0x8000
+} S3DMod;
+
+#define S3D_KMOD_CTRL	(KMOD_LCTRL|KMOD_RCTRL)
+#define S3D_KMOD_SHIFT	(KMOD_LSHIFT|KMOD_RSHIFT)
+#define S3D_KMOD_ALT	(KMOD_LALT|KMOD_RALT)
+#define S3D_KMOD_META	(KMOD_LMETA|KMOD_RMETA)
+

Modified: trunk/client/vector.c
===================================================================
--- trunk/client/vector.c	2006-03-18 14:15:52 UTC (rev 203)
+++ trunk/client/vector.c	2006-03-18 14:39:55 UTC (rev 204)
@@ -1,25 +1,25 @@
 /*
- * net.c
+ * vector.c
  *
  * Copyright (C) 2004-2006 Simon Wunderlich <dotslash at packetmixer.de>
  *                         Marek Lindner <lindner_marek at yahoo.de>
  *                         Andreas Langer <andreas_lbg at gmx.de>
  *
- * This file is part of olsrs3d, an olsr topology visualizer for s3d.
+ * This file is part of the s3d API, the API of s3d (the 3d network display server).
  * See http://s3d.berlios.de/ for more updates.
- *
- * olsrs3d is free software; you can redistribute it and/or modify
- * it under the terms of the GNU General Public License as published by
- * the Free Software Foundation; either version 2 of the License, or
+ * 
+ * The s3d API is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU Lesser General Public License as published by
+ * the Free Software Foundation; either version 2.1 of the License, or
  * (at your option) any later version.
- *
- * olsrs3d is distributed in the hope that it will be useful,
+ * 
+ * The s3d API is distributed in the hope that it will be useful,
  * but WITHOUT ANY WARRANTY; without even the implied warranty of
  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- * GNU General Public License for more details.
- *
- * You should have received a copy of the GNU General Public License
- * along with s3d; if not, write to the Free Software
+ * GNU Lesser General Public License for more details.
+ * 
+ * You should have received a copy of the GNU Lesser General Public License
+ * along with the s3d API; if not, write to the Free Software
  * Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
  */
 

Modified: trunk/server/user_glut.c
===================================================================
--- trunk/server/user_glut.c	2006-03-18 14:15:52 UTC (rev 203)
+++ trunk/server/user_glut.c	2006-03-18 14:39:55 UTC (rev 204)
@@ -24,6 +24,7 @@
 
 #include "global.h"
 #include <GL/glut.h> 	 /*  all the glut functions */
+#include "../client/s3d_keysym.h" /* our very own (haha) keysyms */
 /*  local prototypes */
 void keyboard(unsigned char key, int x, int y);
 void special(int skey, int x, int y);
@@ -44,7 +45,34 @@
 
 void keyboard(unsigned char key, int x, int y)
 {
-	user_key(key,0);
+	uint16_t mkey;
+	switch (key) /* handle special keys */
+	{
+		case GLUT_KEY_F1:		mkey=S3DK_F1;	break;
+		case GLUT_KEY_F2:		mkey=S3DK_F2;	break;
+		case GLUT_KEY_F3:		mkey=S3DK_F3;	break;
+		case GLUT_KEY_F4:		mkey=S3DK_F4;	break;
+		case GLUT_KEY_F5:		mkey=S3DK_F5;	break;
+		case GLUT_KEY_F6: 		mkey=S3DK_F6;	break;
+		case GLUT_KEY_F7:		mkey=S3DK_F7;	break;
+		case GLUT_KEY_F8:		mkey=S3DK_F8;	break;
+		case GLUT_KEY_F9: 		mkey=S3DK_F9;	break;
+		case GLUT_KEY_F10:		mkey=S3DK_F10;	break;
+		case GLUT_KEY_F11: 		mkey=S3DK_F11;	break;
+		case GLUT_KEY_F12: 		mkey=S3DK_F12;	break;
+		case GLUT_KEY_LEFT: 	mkey=S3DK_LEFT;	break;
+		case GLUT_KEY_RIGHT: 	mkey=S3DK_RIGHT;break;
+		case GLUT_KEY_UP: 		mkey=S3DK_UP;	break;
+		case GLUT_KEY_DOWN: 	mkey=S3DK_DOWN;	break;
+		case GLUT_KEY_PAGE_UP:	mkey=S3DK_PAGEUP;break;
+		case GLUT_KEY_PAGE_DOWN:mkey=S3DK_PAGEDOWN;break;
+		case GLUT_KEY_HOME:		mkey=S3DK_HOME;break;
+		case GLUT_KEY_END: 		mkey=S3DK_END;break;
+		case GLUT_KEY_INSERT: 	mkey=S3DK_INSERT;break;
+
+		default: mkey=key;
+	}
+	user_key(mkey,0);
 }
 void special(int skey, int x, int y)
 {



From ankon at berlios.de  Sat Mar 18 15:43:34 2006
From: ankon at berlios.de (ankon at berlios.de)
Date: Sat, 18 Mar 2006 15:43:34 +0100
Subject: [S3d-svn] r205 - trunk/example
Message-ID: <200603181443.k2IEhYDg026266@sheep.berlios.de>

Author: ankon
Date: 2006-03-18 15:43:25 +0100 (Sat, 18 Mar 2006)
New Revision: 205

Modified:
   trunk/example/Makefile.am
Log:
ptrtest is gone.
sort alphabetically.



Modified: trunk/example/Makefile.am
===================================================================
--- trunk/example/Makefile.am	2006-03-18 14:39:55 UTC (rev 204)
+++ trunk/example/Makefile.am	2006-03-18 14:43:25 UTC (rev 205)
@@ -1,18 +1,17 @@
 noinst_PROGRAMS=	3dsloader filebrowser hudtest katze \
 			radius_test s3dclock snowman \
-			strtest texturetest linetest ptrtest
+			strtest texturetest linetest
 			
 3dsloader_SOURCES=	3dsloader.c
 filebrowser_SOURCES=	filebrowser.c
 hudtest_SOURCES=	hudtest.c
 katze_SOURCES=		katze.c
+linetest_SOURCES=	linetest.c
 radius_test_SOURCES=	radius_test.c
 s3dclock_SOURCES=	s3dclock.c
 snowman_SOURCES=	snowman.c
 strtest_SOURCES=	strtest.c
 texturetest_SOURCES=	texturetest.c
-linetest_SOURCES=	linetest.c
-ptrtest_SOURCES=	ptrtest.c
 
 CPPFLAGS=		-I$(top_srcdir)/server -I$(top_srcdir)/client
 LIBS=			$(top_builddir)/client/libs3d.la



From ankon at berlios.de  Sat Mar 18 15:54:08 2006
From: ankon at berlios.de (ankon at berlios.de)
Date: Sat, 18 Mar 2006 15:54:08 +0100
Subject: [S3d-svn] r206 - trunk/client
Message-ID: <200603181454.k2IEs82q007104@sheep.berlios.de>

Author: ankon
Date: 2006-03-18 15:54:04 +0100 (Sat, 18 Mar 2006)
New Revision: 206

Modified:
   trunk/client/Makefile.am
Log:
Only install s3d.h/s3d_keysym.h.
Other headers are implementation-private.

Requested-by: d0tslash



Modified: trunk/client/Makefile.am
===================================================================
--- trunk/client/Makefile.am	2006-03-18 14:43:25 UTC (rev 205)
+++ trunk/client/Makefile.am	2006-03-18 14:54:04 UTC (rev 206)
@@ -5,7 +5,8 @@
 			proto_out.c shm.c shm_ringbuf.c tcp.c \
 			sei_construct.c sei_misc.c sei_monotone.c sei_tri.c vector.c
 			
-pkginclude_HEADERS=	s3d.h s3d_keysym.h config.h s3dlib.h sei_triangulate.h sei_interface.h 
+pkginclude_HEADERS=	s3d.h s3d_keysym.h
+noinst_HEADERS=		config.h s3dlib.h sei_triangulate.h sei_interface.h
 
 libs3d_la_CPPFLAGS=	-I${top_srcdir}/server
 libs3d_la_CFLAGS=	@FONTCONFIG_CFLAGS@ @FREETYPE_CFLAGS@ 



From dotslash at berlios.de  Sat Mar 18 15:59:35 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Sat, 18 Mar 2006 15:59:35 +0100
Subject: [S3d-svn] r207 - in trunk: . example
Message-ID: <200603181459.k2IExZ5f010754@sheep.berlios.de>

Author: dotslash
Date: 2006-03-18 15:59:33 +0100 (Sat, 18 Mar 2006)
New Revision: 207

Added:
   trunk/example/ptrtest.c
Modified:
   trunk/
   trunk/example/Makefile.am
Log:
 r312 at balthasar:  dotslash | 2006-03-18 15:57:06 +0100
 - here you are: ptrtest added 



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:308
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:312

Modified: trunk/example/Makefile.am
===================================================================
--- trunk/example/Makefile.am	2006-03-18 14:54:04 UTC (rev 206)
+++ trunk/example/Makefile.am	2006-03-18 14:59:33 UTC (rev 207)
@@ -1,5 +1,5 @@
 noinst_PROGRAMS=	3dsloader filebrowser hudtest katze \
-			radius_test s3dclock snowman \
+			ptrtest radius_test s3dclock snowman \
 			strtest texturetest linetest
 			
 3dsloader_SOURCES=	3dsloader.c
@@ -12,6 +12,7 @@
 snowman_SOURCES=	snowman.c
 strtest_SOURCES=	strtest.c
 texturetest_SOURCES=	texturetest.c
+ptrtest_SOURCES=	ptrtest.c
 
 CPPFLAGS=		-I$(top_srcdir)/server -I$(top_srcdir)/client
 LIBS=			$(top_builddir)/client/libs3d.la

Added: trunk/example/ptrtest.c
===================================================================
--- trunk/example/ptrtest.c	2006-03-18 14:54:04 UTC (rev 206)
+++ trunk/example/ptrtest.c	2006-03-18 14:59:33 UTC (rev 207)
@@ -0,0 +1,109 @@
+/*
+ * ptrtest.c
+ * 
+ * Copyright (C) 2006 Simon Wunderlich <dotslash at packetmixer.de>
+ *
+ * This file is part of s3d, a 3d network display server.
+ * See http://s3d.berlios.de/ for more updates.
+ * 
+ * s3d is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation; either version 2 of the License, or
+ * (at your option) any later version.
+ * 
+ * s3d is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ * 
+ * You should have received a copy of the GNU General Public License
+ * along with s3d; if not, write to the Free Software
+ * Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
+ */
+
+
+#include <s3d.h>
+#include <stdio.h>  /*  NULL*/
+#include <time.h>	/* nanosleep() */
+int i;
+int o;
+float bottom=-1.0;
+float left=-1.0;
+float asp=1.0;
+float len=1.0;
+int alpha=0;
+static struct timespec t={0,100*1000*1000}; /* 100 mili seconds */
+void stop(struct s3d_evt *evt)
+{
+	s3d_quit();
+}
+
+void mainloop()
+{
+	alpha=(alpha+5)%360;
+	s3d_rotate(o,alpha,0,0);
+	nanosleep(&t,NULL); 
+}
+void object_info(struct s3d_evt *hrmz)
+{
+	struct s3d_obj_info *inf;
+	inf=(struct s3d_obj_info *)hrmz->buf;
+	if (inf->object==0)
+	{
+		if (asp!=inf->scale)
+		{
+			asp=inf->scale;
+			printf("screen aspect: %f\n",asp);
+			if (asp>1.0) /* wide screen */
+			{
+				bottom=-1.0;
+				left=-asp;
+			} else {  /* high screen */
+				bottom=(-1.0/asp);
+				left=-1.0;
+			}
+		}
+	}
+	if (inf->object==1)
+	{ /* of course, a link s3d_link(o,1 would be much easier ... */
+		s3d_translate(o,(inf->trans_x)*2.0,(inf->trans_y)*2.0,-2);
+	}
+}
+void mbutton_press(struct s3d_evt *hrmz)
+{
+	struct s3d_but_info *inf;
+	char s[256];
+	inf=(struct s3d_but_info *)hrmz->buf;
+	snprintf(s,256,"button %d, state %d", inf->button,inf->state);
+	printf("button %d, state %d\n", inf->button,inf->state);
+	s3d_del_object(o);
+	o=s3d_draw_string(s,&len);
+	s3d_translate(o,0,0,-2);
+	s3d_scale(o,0.2);
+	s3d_link(o,0);			/* link to cam */
+/*	s3d_link(o,1);*/
+	s3d_flags_on(o,S3D_OF_VISIBLE);
+}
+int main (int argc, char **argv)
+{
+	i=0;
+	if (!s3d_init(&argc,&argv,"ptrtest"))	
+	{
+		s3d_set_callback(S3D_EVENT_OBJ_INFO,object_info);
+		s3d_set_callback(S3D_EVENT_MBUTTON,mbutton_press);
+		s3d_set_callback(S3D_EVENT_QUIT,stop);
+		s3d_set_callback(S3D_EVENT_OBJ_CLICK,stop);
+		s3d_select_font("vera");
+		o=s3d_draw_string("hello",&len);
+		s3d_translate(o,0,0,-2);
+		s3d_link(o,0);			/* link to cam */
+/*		s3d_link(o,1);*/
+		s3d_scale(o,0.2);
+		s3d_flags_on(o,S3D_OF_VISIBLE);
+		s3d_mainloop(mainloop);
+		 /*  wait for some object to be clicked */
+		s3d_quit();
+	}
+	return(0);
+}
+



From dotslash at berlios.de  Sat Mar 18 16:19:51 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Sat, 18 Mar 2006 16:19:51 +0100
Subject: [S3d-svn] r208 - in trunk: . apps/dot_mcp apps/olsrs3d apps/s3dvt server
Message-ID: <200603181519.k2IFJpum013207@sheep.berlios.de>

Author: dotslash
Date: 2006-03-18 16:19:50 +0100 (Sat, 18 Mar 2006)
New Revision: 208

Modified:
   trunk/
   trunk/apps/dot_mcp/main.c
   trunk/apps/olsrs3d/main.c
   trunk/apps/s3dvt/main.c
   trunk/server/object.c
   trunk/server/user.c
   trunk/server/user_glut.c
Log:
 r316 at balthasar:  dotslash | 2006-03-18 16:19:38 +0100
 - support for special keys in terminal, mcp and olsrs3d (arrows etc)



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:312
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:316

Modified: trunk/apps/dot_mcp/main.c
===================================================================
--- trunk/apps/dot_mcp/main.c	2006-03-18 14:59:33 UTC (rev 207)
+++ trunk/apps/dot_mcp/main.c	2006-03-18 15:19:50 UTC (rev 208)
@@ -22,7 +22,8 @@
  */
 
 
-#include "s3d.h"
+#include <s3d.h>
+#include <s3d_keysym.h>
 #include "dot_mcp.h"
 #include <unistd.h>  /*  sleep() */
 #include <stdlib.h>  /*  free(), malloc() */
@@ -382,7 +383,7 @@
 	key=*((unsigned short *)event->buf);
 	switch (key)
 	{
-		case 1:  ego_mode=(ego_mode+1)%2;
+		case S3DK_F1:  ego_mode=(ego_mode+1)%2;
 				 printf("ego mode %d\n",ego_mode);
 				 break;
 		case 'w':ydif=-1;break;

Modified: trunk/apps/olsrs3d/main.c
===================================================================
--- trunk/apps/olsrs3d/main.c	2006-03-18 14:59:33 UTC (rev 207)
+++ trunk/apps/olsrs3d/main.c	2006-03-18 15:19:50 UTC (rev 208)
@@ -27,6 +27,7 @@
 
 #include <stdio.h>
 #include <s3d.h>
+#include <s3d_keysym.h>
 #include <time.h>	      /* nanosleep() */
 #include <string.h>	/* strncpy() */
 #include <math.h>		/* sqrt() */
@@ -685,25 +686,25 @@
 	int key;
 	key=*((unsigned short *)event->buf);
 	switch(key) {
-		case 27: /* esc -> close olsr */
+		case S3DK_ESCAPE: /* esc -> close olsr */
 			stop();
 			break;
 		case 15: /* strg + o */
 			lst_out(); /* output ob2ip list */
 			break;
-		case 99: /* c -> color on/off */
+		case 'c': /* c -> color on/off */
 			if(ColorSwitch) ColorSwitch = 0;
 			else ColorSwitch = 1;
 			break;
-		case 114: /* r -> rotate start/stop*/
+		case 'r': /* r -> rotate start/stop*/
 			if(RotateSwitch) RotateSwitch = 0;
 			else RotateSwitch = 1;
 			break;
-		case 43: /* + -> rotate speed increase*/
+		case '+': /* + -> rotate speed increase*/
 			if(RotateSwitch && RotateSpeed < 10)
 				RotateSpeed++;
 			break;
-		case 45: /* - -> rotate speed decrease*/
+		case '-': /* - -> rotate speed decrease*/
 			if(RotateSwitch && RotateSpeed > 1)
 				RotateSpeed--;
 			break;
@@ -711,19 +712,19 @@
 			s3d_translate(ZeroPoint,0.0,0.0,0.0);
 			ZeroPosition[0] = ZeroPosition[1] = ZeroPosition[2] = 0.0;
 			break;
-		case 101: /* arrow up -> move nodes up */
+		case S3DK_UP: /* arrow up -> move nodes up */
 			ZeroPosition[1]++;
 			s3d_translate(ZeroPoint,ZeroPosition[0],ZeroPosition[1],ZeroPosition[2]);
 			break;
-		case 103: /* arrow down -> move nodes down */
+		case S3DK_DOWN: /* arrow down -> move nodes down */
 			ZeroPosition[1]--;
 			s3d_translate(ZeroPoint,ZeroPosition[0],ZeroPosition[1],ZeroPosition[2]);
 			break;
-		case 104: /* page up -> change factor in calc_olsr_node_mov */
+		case S3DK_PAGEUP: /* page up -> change factor in calc_olsr_node_mov */
 			if(factor < 0.9)
 				factor += 0.1;
 			break;
-		case 105: /* page down -> change factor in calc_olsr_node_mov */
+		case S3DK_PAGEDOWN: /* page down -> change factor in calc_olsr_node_mov */
 			if(factor > 0.3)
 				factor -= 0.1;
 			break;
@@ -741,8 +742,8 @@
 	int oid;
 	/* float distance,tmp_vector[3]; */
 	char ip_str[50];
+	struct olsr_node *olsr_node;
 	oid=(int)*((unsigned long *)evt->buf);
-	struct olsr_node *olsr_node;
 	olsr_node = *lst_search(oid);
 	/* printf("obj2ip: search return %s\n",olsr_node->ip); */
 	/*

Modified: trunk/apps/s3dvt/main.c
===================================================================
--- trunk/apps/s3dvt/main.c	2006-03-18 14:59:33 UTC (rev 207)
+++ trunk/apps/s3dvt/main.c	2006-03-18 15:19:50 UTC (rev 208)
@@ -33,6 +33,7 @@
 #include <sys/ioctl.h> 	 /*  ioctl() */
 #include <pthread.h>	 /*  pthread_create() */
 #include <s3d.h>		 /*  s3d_* */
+#include <s3d_keysym.h>	 /*  key symbols */
 #include <time.h>	/* nanosleep() */
 static struct timespec t={0,10*1000*1000}; /* 10 mili seconds */
 
@@ -399,9 +400,91 @@
 	int key;
 	key=*((unsigned short *)event->buf);
 /*	printf("received key: %d\n",key);*/
-	if (key==13) key=10;
-	if ((char)key)  /*  \0 is no good idea .. */
-		term_addchar((char)key);
+	switch (key)
+	{
+		case S3DK_F1:
+		case S3DK_F2:
+		case S3DK_F3:
+		case S3DK_F4:
+		case S3DK_F5:
+			term_addchar(0x1b);
+			term_addchar('[');
+			term_addchar('1');
+			term_addchar(key-S3DK_F1+'1');
+			break;
+		case S3DK_F6:
+		case S3DK_F7:
+		case S3DK_F8:
+			term_addchar(0x1b);
+			term_addchar('[');
+			term_addchar('1');
+			term_addchar((key-S3DK_F6)+'7');
+			break;
+		case S3DK_F9:
+		case S3DK_F10:
+			term_addchar(0x1b);
+			term_addchar('[');
+			term_addchar('2');
+			term_addchar((key-S3DK_F9)+'0');
+			break;
+		case S3DK_F11:
+		case S3DK_F12:
+			term_addchar(0x1b);
+			term_addchar('[');
+			term_addchar('2');
+			term_addchar((key-S3DK_F11)+'3');
+			break;
+		case S3DK_UP:
+			term_addchar(0x1b);
+			term_addchar('[');
+			term_addchar('A');
+			break;
+		case S3DK_DOWN:
+			term_addchar(0x1b);
+			term_addchar('[');
+			term_addchar('B');
+			break;
+		case S3DK_RIGHT:
+			term_addchar(0x1b);
+			term_addchar('[');
+			term_addchar('C');
+			break;
+		case S3DK_LEFT:
+			term_addchar(0x1b);
+			term_addchar('[');
+			term_addchar('D');
+			break;
+		case S3DK_PAGEUP:
+			term_addchar(0x1b);
+			term_addchar('[');
+			term_addchar('5');
+			term_addchar('~');
+			break;
+		case S3DK_PAGEDOWN:
+			term_addchar(0x1b);
+			term_addchar('[');
+			term_addchar('6');
+			term_addchar('~');
+			break;
+		case S3DK_HOME:
+			term_addchar(0x1b);
+			term_addchar('[');
+			term_addchar('7');
+			term_addchar('~');
+			break;
+		case S3DK_END:
+			term_addchar(0x1b);
+			term_addchar('[');
+			term_addchar('8');
+			term_addchar('~');
+			break;
+		case 13:
+			term_addchar(10);
+			break;
+		default:
+			if ((char)key)  /*  \0 is no good idea .. */
+				term_addchar((char)key);
+	}
 
 }
 int i=0;

Modified: trunk/server/object.c
===================================================================
--- trunk/server/object.c	2006-03-18 14:59:33 UTC (rev 207)
+++ trunk/server/object.c	2006-03-18 15:19:50 UTC (rev 208)
@@ -1371,7 +1371,7 @@
 					event_ptr_changed();
 					break;
 				default:
-					dprintf(LOW,"[obj_pos_upd|pid %d] %d unknown systen event",p->id,oid);
+					dprintf(LOW,"[obj_pos_upd|pid %d] %d unknown system event",p->id,oid);
 					
 			}
 

Modified: trunk/server/user.c
===================================================================
--- trunk/server/user.c	2006-03-18 14:59:33 UTC (rev 207)
+++ trunk/server/user.c	2006-03-18 15:19:50 UTC (rev 208)
@@ -60,10 +60,7 @@
 	if (state==0)  /*  down */
 	{
 		dprintf(LOW, "got key %d!!",key);
-		switch (key) {
-			default:
-				event_key_pressed(key);
-		}
+		event_key_pressed(key);
 	}
 }
 void user_mouse(int button, int state, int x, int y) 

Modified: trunk/server/user_glut.c
===================================================================
--- trunk/server/user_glut.c	2006-03-18 14:59:33 UTC (rev 207)
+++ trunk/server/user_glut.c	2006-03-18 15:19:50 UTC (rev 208)
@@ -45,8 +45,12 @@
 
 void keyboard(unsigned char key, int x, int y)
 {
-	uint16_t mkey;
-	switch (key) /* handle special keys */
+	user_key(key,0);
+}
+void special(int skey, int x, int y)
+{
+	unsigned short mkey;
+	switch (skey) /* handle special keys */
 	{
 		case GLUT_KEY_F1:		mkey=S3DK_F1;	break;
 		case GLUT_KEY_F2:		mkey=S3DK_F2;	break;
@@ -69,15 +73,11 @@
 		case GLUT_KEY_HOME:		mkey=S3DK_HOME;break;
 		case GLUT_KEY_END: 		mkey=S3DK_END;break;
 		case GLUT_KEY_INSERT: 	mkey=S3DK_INSERT;break;
-
-		default: mkey=key;
+		default: 				mkey=skey; break;
 	}
+	dprintf(MED,"special(): %d -> %d",skey,mkey);
 	user_key(mkey,0);
 }
-void special(int skey, int x, int y)
-{
-	user_key(skey,0);
-}
 void mouse_motion(int x, int y)
 {
 	user_mouse(but,2,x,y);



From marec at berlios.de  Sun Mar 19 00:25:57 2006
From: marec at berlios.de (marec at BerliOS)
Date: Sun, 19 Mar 2006 00:25:57 +0100
Subject: [S3d-svn] r209 - trunk/apps/olsrs3d
Message-ID: <200603182325.k2INPvbq029840@sheep.berlios.de>

Author: marec
Date: 2006-03-19 00:25:57 +0100 (Sun, 19 Mar 2006)
New Revision: 209

Modified:
   trunk/apps/olsrs3d/main.c
   trunk/apps/olsrs3d/olsrs3d.h
   trunk/apps/olsrs3d/process.c
Log:
- some code cleaning

Modified: trunk/apps/olsrs3d/main.c
===================================================================
--- trunk/apps/olsrs3d/main.c	2006-03-18 15:19:50 UTC (rev 208)
+++ trunk/apps/olsrs3d/main.c	2006-03-18 23:25:57 UTC (rev 209)
@@ -64,7 +64,7 @@
 int ColorSwitch = 0;   /* enable/disable colored olsr connections */
 int RotateSwitch = 0;
 int RotateSpeed = 2;
-float factor = 0.5;	/* factor in calc_olsr_node_mov */
+float Factor = 0.5;	/* Factor in calc_olsr_node_mov */
 
 /***
  *
@@ -185,7 +185,7 @@
 
 void handle_olsr_node( struct olsr_node *olsr_node ) {
 
-	float distance, angle;
+	float distance, angle, angle_rad;
 	float tmp_mov_vec[3], desc_norm_vec[3] = {0,0,-1};
 	struct olsr_node *other_node;
 	struct Obj_to_ip *Obj_to_ip_curr;
@@ -323,18 +323,26 @@
 			olsr_node->node_type_modified = 0;
 
 		}
+
+
 		/* rotate node description so that they are always readable */
 		tmp_mov_vec[0] = CamPosition[0][0] - olsr_node->pos_vec[0];
 		tmp_mov_vec[1] = 0;   /* we are not interested in the y value */
 		tmp_mov_vec[2] = CamPosition[0][2] - olsr_node->pos_vec[2];
-	
+
+		angle = s3d_vector_angle( desc_norm_vec, tmp_mov_vec );
+
 		/* take care of inverse cosinus */
-		angle = ( tmp_mov_vec[0] > 0 ? 
-					180 - ( 180.0/M_PI * s3d_vector_angle( desc_norm_vec, tmp_mov_vec ) ) : 
-					180 + ( 180.0/M_PI * s3d_vector_angle( desc_norm_vec, tmp_mov_vec ) ) );
-																		
+		if ( tmp_mov_vec[0] > 0 ) {
+			angle_rad = 90.0/M_PI - angle;
+			angle = 180 - ( 180.0/M_PI * angle );
+		} else {
+			angle_rad = 90.0/M_PI + angle;
+			angle = 180 + ( 180.0/M_PI * angle );
+		}
+
 		s3d_rotate( olsr_node->desc_id, 0, angle , 0 );
-		s3d_translate( olsr_node->desc_id, -cos(angle*M_PI/180)*olsr_node->desc_length/2 ,-1.5, sin(angle*M_PI/180)*olsr_node->desc_length/2 );
+		s3d_translate( olsr_node->desc_id, -cos(angle_rad)*olsr_node->desc_length/2 ,-1.5, sin(angle_rad)*olsr_node->desc_length/2 );
 
 
 		/* drift away from unrelated nodes */
@@ -407,7 +415,7 @@
 			 * drift factor - 0.0 < factor < 1.0 ( best results: 0.3 < factor < 0.9
 			 * small factor: fast and strong drift to neighbours
 			 ***/
-			if ( f < factor ) f = factor;
+			if ( f < Factor ) f = Factor;
 
 			mov_add( olsr_con->left_olsr_node->mov_vec, tmp_mov_vec, 1 / f - 1 );
 			mov_add( olsr_con->right_olsr_node->mov_vec, tmp_mov_vec, - ( 1 / f - 1 ) );
@@ -606,6 +614,8 @@
 
 		s3d_push_line( olsr_con->obj_id, 2,3,0 );
 		s3d_push_line( olsr_con->obj_id, 0,1,0 );
+		/*s3d_pep_line( olsr_con->obj_id, 2,3,0 );
+		s3d_pep_line( olsr_con->obj_id, 0,1,0 );*/
 
 		olsr_con = olsr_con->next_olsr_con;
 
@@ -721,12 +731,12 @@
 			s3d_translate(ZeroPoint,ZeroPosition[0],ZeroPosition[1],ZeroPosition[2]);
 			break;
 		case S3DK_PAGEUP: /* page up -> change factor in calc_olsr_node_mov */
-			if(factor < 0.9)
-				factor += 0.1;
+			if(Factor < 0.9)
+				Factor += 0.1;
 			break;
 		case S3DK_PAGEDOWN: /* page down -> change factor in calc_olsr_node_mov */
-			if(factor > 0.3)
-				factor -= 0.1;
+			if(Factor > 0.3)
+				Factor -= 0.1;
 			break;
 	}
 }

Modified: trunk/apps/olsrs3d/olsrs3d.h
===================================================================
--- trunk/apps/olsrs3d/olsrs3d.h	2006-03-18 15:19:50 UTC (rev 208)
+++ trunk/apps/olsrs3d/olsrs3d.h	2006-03-18 23:25:57 UTC (rev 209)
@@ -122,9 +122,3 @@
 void out_of_mem( void );
 struct olsr_node **lst_search(int id);
 
-/* vector */
-float vector_length( float vector[] );
-void vector_substract( float vector1[], float vector2[], float result_vector[] );
-float vector_dot_product( float vector1[], float vector2[] );
-float vector_angle( float vector1[], float vector2[] );
-

Modified: trunk/apps/olsrs3d/process.c
===================================================================
--- trunk/apps/olsrs3d/process.c	2006-03-18 15:19:50 UTC (rev 208)
+++ trunk/apps/olsrs3d/process.c	2006-03-18 23:25:57 UTC (rev 209)
@@ -87,10 +87,13 @@
 				  1.0,1.0,1.0,
 				  1.0,1.0,1.0);
 
+		/*s3d_push_line( (*olsr_con)->obj_id, 2,3,0 );
+		s3d_push_line( (*olsr_con)->obj_id, 0,1,0 );*/
+
 		s3d_flags_on( (*olsr_con)->obj_id, S3D_OF_VISIBLE );
 
-/* 		s3d_push_polygon( (*olsr_con)->obj_id, 0,4,5,0 );
- 		s3d_push_polygon( (*olsr_con)->obj_id, 3,1,2,0 );*/
+		/*s3d_push_polygon( (*olsr_con)->obj_id, 0,4,5,0 );
+		s3d_push_polygon( (*olsr_con)->obj_id, 3,1,2,0 );*/
 		s3d_link( (*olsr_con)->obj_id,  ZeroPoint );
 
 		/* add olsr node to new olsr connection in order to access the nodes from the connection list */



From mog at berlios.de  Sun Mar 19 11:15:49 2006
From: mog at berlios.de (mog at BerliOS)
Date: Sun, 19 Mar 2006 11:15:49 +0100
Subject: [S3d-svn] r210 - trunk/objs
Message-ID: <200603191015.k2JAFnP1029400@sheep.berlios.de>

Author: mog
Date: 2006-03-19 11:15:49 +0100 (Sun, 19 Mar 2006)
New Revision: 210

Added:
   trunk/objs/btn_close.3DS
Log:
close button


Added: trunk/objs/btn_close.3DS
===================================================================
(Binary files differ)


Property changes on: trunk/objs/btn_close.3DS
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream



From mog at berlios.de  Sun Mar 19 11:19:59 2006
From: mog at berlios.de (mog at BerliOS)
Date: Sun, 19 Mar 2006 11:19:59 +0100
Subject: [S3d-svn] r211 - trunk/objs
Message-ID: <200603191019.k2JAJxFs030648@sheep.berlios.de>

Author: mog
Date: 2006-03-19 11:19:59 +0100 (Sun, 19 Mar 2006)
New Revision: 211

Added:
   trunk/objs/btn_minimize.3DS
Log:
minimize button, others will follow when my system is healthy again


Added: trunk/objs/btn_minimize.3DS
===================================================================
(Binary files differ)


Property changes on: trunk/objs/btn_minimize.3DS
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream



From dotslash at berlios.de  Sun Mar 19 11:31:25 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Sun, 19 Mar 2006 11:31:25 +0100
Subject: [S3d-svn] r212 - in trunk: . objs
Message-ID: <200603191031.k2JAVPQO031835@sheep.berlios.de>

Author: dotslash
Date: 2006-03-19 11:31:25 +0100 (Sun, 19 Mar 2006)
New Revision: 212

Added:
   trunk/objs/btn_close.3ds
   trunk/objs/btn_minimize.3ds
Removed:
   trunk/objs/btn_close.3DS
   trunk/objs/btn_minimize.3DS
Modified:
   trunk/
   trunk/objs/Makefile.am
Log:
 r323 at balthasar:  dotslash | 2006-03-19 11:30:55 +0100
 - cleaning up (not really)



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:316
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:323

Modified: trunk/objs/Makefile.am
===================================================================
--- trunk/objs/Makefile.am	2006-03-19 10:19:59 UTC (rev 211)
+++ trunk/objs/Makefile.am	2006-03-19 10:31:25 UTC (rev 212)
@@ -39,5 +39,7 @@
 	star.3ds \
 	cube.3ds \
 	big_p.3ds \
-	spikeybla.3ds
+	spikeybla.3ds \
+	btn_close.3ds \
+	btn_minimize.3ds
 

Deleted: trunk/objs/btn_close.3DS
===================================================================
(Binary files differ)

Added: trunk/objs/btn_close.3ds
===================================================================
(Binary files differ)


Property changes on: trunk/objs/btn_close.3ds
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Deleted: trunk/objs/btn_minimize.3DS
===================================================================
(Binary files differ)

Added: trunk/objs/btn_minimize.3ds
===================================================================
(Binary files differ)


Property changes on: trunk/objs/btn_minimize.3ds
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream



From mog at berlios.de  Sun Mar 19 11:55:22 2006
From: mog at berlios.de (mog at BerliOS)
Date: Sun, 19 Mar 2006 11:55:22 +0100
Subject: [S3d-svn] r213 - trunk/objs
Message-ID: <200603191055.k2JAtM6o002113@sheep.berlios.de>

Author: mog
Date: 2006-03-19 11:55:15 +0100 (Sun, 19 Mar 2006)
New Revision: 213

Added:
   trunk/objs/btn_maximize.3ds
   trunk/objs/btn_rotate.3ds
Log:
rotate and maximize button


Added: trunk/objs/btn_maximize.3ds
===================================================================
(Binary files differ)


Property changes on: trunk/objs/btn_maximize.3ds
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/objs/btn_rotate.3ds
===================================================================
(Binary files differ)


Property changes on: trunk/objs/btn_rotate.3ds
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream



From marec at berlios.de  Sun Mar 19 12:34:46 2006
From: marec at berlios.de (marec at BerliOS)
Date: Sun, 19 Mar 2006 12:34:46 +0100
Subject: [S3d-svn] r214 - trunk/apps/olsrs3d
Message-ID: <200603191134.k2JBYkL5009039@sheep.berlios.de>

Author: marec
Date: 2006-03-19 12:34:43 +0100 (Sun, 19 Mar 2006)
New Revision: 214

Modified:
   trunk/apps/olsrs3d/main.c
   trunk/apps/olsrs3d/process.c
Log:
- use of s3d_pep_vertices instead of push/pop_vertex

Modified: trunk/apps/olsrs3d/main.c
===================================================================
--- trunk/apps/olsrs3d/main.c	2006-03-19 10:55:15 UTC (rev 213)
+++ trunk/apps/olsrs3d/main.c	2006-03-19 11:34:43 UTC (rev 214)
@@ -438,7 +438,7 @@
 
 void move_olsr_nodes( void ) {
 
-	float null_vec[3] = {0,0,0};
+	float null_vec[3] = {0,0,0}, vertex_buf[6];
 	float tmp_mov_vec[3];
 	float distance, etx, rgb;
 	struct olsr_con *olsr_con = Con_begin;
@@ -453,7 +453,7 @@
 			mov_add( olsr_con->left_olsr_node->mov_vec, tmp_mov_vec, 1 ); /* move a little bit to point zero */
 
 			if ( ( distance = dist( olsr_con->left_olsr_node->mov_vec, null_vec ) ) > 10.0 ) {
-				mov_add( olsr_con->left_olsr_node->pos_vec, olsr_con->left_olsr_node->mov_vec, 1.0 / ( (float ) distance ) );
+				mov_add( olsr_con->left_olsr_node->pos_vec, olsr_con->left_olsr_node->mov_vec, 1.0 / ( ( float ) distance ) );
 			} else {
 				mov_add( olsr_con->left_olsr_node->pos_vec, olsr_con->left_olsr_node->mov_vec, 0.1 );
 			}
@@ -473,7 +473,7 @@
 			mov_add( olsr_con->right_olsr_node->mov_vec, tmp_mov_vec, 1 ); /* move a little bit to point zero */
 
 			if ( ( distance = dist( olsr_con->right_olsr_node->mov_vec, null_vec ) ) > 10.0 ) {
-				mov_add( olsr_con->right_olsr_node->pos_vec, olsr_con->right_olsr_node->mov_vec, 1.0 / ( (float ) distance ) );
+				mov_add( olsr_con->right_olsr_node->pos_vec, olsr_con->right_olsr_node->mov_vec, 1.0 / ( ( float ) distance ) );
 			} else {
 				mov_add( olsr_con->right_olsr_node->pos_vec, olsr_con->right_olsr_node->mov_vec, 0.1 );
 			}
@@ -487,16 +487,16 @@
 
 
 		/* move connection between left and right olsr node */
-		s3d_pop_vertex( olsr_con->obj_id, 6 );
-		s3d_pop_line( olsr_con->obj_id, 2 );
+		vertex_buf[0] = olsr_con->left_olsr_node->pos_vec[0];
+		vertex_buf[1] = olsr_con->left_olsr_node->pos_vec[1];
+		vertex_buf[2] = olsr_con->left_olsr_node->pos_vec[2];
+		vertex_buf[3] = olsr_con->right_olsr_node->pos_vec[0];
+		vertex_buf[4] = olsr_con->right_olsr_node->pos_vec[1];
+		vertex_buf[5] = olsr_con->right_olsr_node->pos_vec[2];
 
-		s3d_push_vertex( olsr_con->obj_id, olsr_con->left_olsr_node->pos_vec[0] , olsr_con->left_olsr_node->pos_vec[1] , olsr_con->left_olsr_node->pos_vec[2] );
-		s3d_push_vertex( olsr_con->obj_id, olsr_con->left_olsr_node->pos_vec[0] , olsr_con->left_olsr_node->pos_vec[1] + 0.2 , olsr_con->left_olsr_node->pos_vec[2] );
+		s3d_pep_vertices( olsr_con->obj_id, vertex_buf, 2 );
 
-		s3d_push_vertex( olsr_con->obj_id, olsr_con->right_olsr_node->pos_vec[0] , olsr_con->right_olsr_node->pos_vec[1] , olsr_con->right_olsr_node->pos_vec[2] );
-		s3d_push_vertex( olsr_con->obj_id, olsr_con->left_olsr_node->pos_vec[0] , olsr_con->left_olsr_node->pos_vec[1] - 0.2 , olsr_con->left_olsr_node->pos_vec[2] );
 
-
 		if ( ColorSwitch ) {
 
 			/* HNA */
@@ -612,10 +612,6 @@
 
 		}
 
-		s3d_push_line( olsr_con->obj_id, 2,3,0 );
-		s3d_push_line( olsr_con->obj_id, 0,1,0 );
-		/*s3d_pep_line( olsr_con->obj_id, 2,3,0 );
-		s3d_pep_line( olsr_con->obj_id, 0,1,0 );*/
 
 		olsr_con = olsr_con->next_olsr_con;
 

Modified: trunk/apps/olsrs3d/process.c
===================================================================
--- trunk/apps/olsrs3d/process.c	2006-03-19 10:55:15 UTC (rev 213)
+++ trunk/apps/olsrs3d/process.c	2006-03-19 11:34:43 UTC (rev 214)
@@ -81,25 +81,27 @@
 		/* create connection object */
 		(*olsr_con)->obj_id = s3d_new_object();
 
+		/* add olsr node to new olsr connection in order to access the nodes from the connection list */
+		(*olsr_con)->left_olsr_node = con_from;
+		(*olsr_con)->right_olsr_node = con_to;
+
+		/* add connection color */
 		(*olsr_con)->color = 0;
 		s3d_push_material( (*olsr_con)->obj_id,
 				  1.0,1.0,1.0,
 				  1.0,1.0,1.0,
 				  1.0,1.0,1.0);
 
-		/*s3d_push_line( (*olsr_con)->obj_id, 2,3,0 );
-		s3d_push_line( (*olsr_con)->obj_id, 0,1,0 );*/
+		/* add connection endpoints */
+		s3d_push_vertex( (*olsr_con)->obj_id, (*olsr_con)->left_olsr_node->pos_vec[0], (*olsr_con)->left_olsr_node->pos_vec[1], (*olsr_con)->left_olsr_node->pos_vec[2] );
+		s3d_push_vertex( (*olsr_con)->obj_id, (*olsr_con)->right_olsr_node->pos_vec[0], (*olsr_con)->right_olsr_node->pos_vec[1], (*olsr_con)->right_olsr_node->pos_vec[2] );
 
+		s3d_push_line( (*olsr_con)->obj_id, 0,1,0 );
+
 		s3d_flags_on( (*olsr_con)->obj_id, S3D_OF_VISIBLE );
 
-		/*s3d_push_polygon( (*olsr_con)->obj_id, 0,4,5,0 );
-		s3d_push_polygon( (*olsr_con)->obj_id, 3,1,2,0 );*/
 		s3d_link( (*olsr_con)->obj_id,  ZeroPoint );
 
-		/* add olsr node to new olsr connection in order to access the nodes from the connection list */
-		(*olsr_con)->left_olsr_node = con_from;
-		(*olsr_con)->right_olsr_node = con_to;
-
 		/* HNA */
 		if ( etx == -1000.00 ) {
 



From marec at berlios.de  Sun Mar 19 13:31:49 2006
From: marec at berlios.de (marec at BerliOS)
Date: Sun, 19 Mar 2006 13:31:49 +0100
Subject: [S3d-svn] r215 - in trunk/apps/olsrs3d: . doxygen doxygen/html doxygen/latex doxygen/xml
Message-ID: <200603191231.k2JCVnra012666@sheep.berlios.de>

Author: marec
Date: 2006-03-19 13:31:45 +0100 (Sun, 19 Mar 2006)
New Revision: 215

Added:
   trunk/apps/olsrs3d/doxygen/
   trunk/apps/olsrs3d/doxygen/html/
   trunk/apps/olsrs3d/doxygen/html/annotated.html
   trunk/apps/olsrs3d/doxygen/html/classes.html
   trunk/apps/olsrs3d/doxygen/html/dir_5d167550802dbd943c0631943f884f5b.html
   trunk/apps/olsrs3d/doxygen/html/dir_9d2efe7c7f87ee6309da929964f0685b.html
   trunk/apps/olsrs3d/doxygen/html/dir_bf110b9fd34b0903efb6170e1cee5506.html
   trunk/apps/olsrs3d/doxygen/html/dirs.html
   trunk/apps/olsrs3d/doxygen/html/doxygen.css
   trunk/apps/olsrs3d/doxygen/html/doxygen.png
   trunk/apps/olsrs3d/doxygen/html/files.html
   trunk/apps/olsrs3d/doxygen/html/functions.html
   trunk/apps/olsrs3d/doxygen/html/functions_vars.html
   trunk/apps/olsrs3d/doxygen/html/globals.html
   trunk/apps/olsrs3d/doxygen/html/globals_defs.html
   trunk/apps/olsrs3d/doxygen/html/globals_func.html
   trunk/apps/olsrs3d/doxygen/html/globals_vars.html
   trunk/apps/olsrs3d/doxygen/html/hierarchy.html
   trunk/apps/olsrs3d/doxygen/html/index.html
   trunk/apps/olsrs3d/doxygen/html/main_8c-source.html
   trunk/apps/olsrs3d/doxygen/html/main_8c.html
   trunk/apps/olsrs3d/doxygen/html/net_8c-source.html
   trunk/apps/olsrs3d/doxygen/html/net_8c.html
   trunk/apps/olsrs3d/doxygen/html/olsrs3d_8h-source.html
   trunk/apps/olsrs3d/doxygen/html/olsrs3d_8h.html
   trunk/apps/olsrs3d/doxygen/html/process_8c-source.html
   trunk/apps/olsrs3d/doxygen/html/process_8c.html
   trunk/apps/olsrs3d/doxygen/html/structObj__to__ip-members.html
   trunk/apps/olsrs3d/doxygen/html/structObj__to__ip.html
   trunk/apps/olsrs3d/doxygen/html/structolsr__con-members.html
   trunk/apps/olsrs3d/doxygen/html/structolsr__con.html
   trunk/apps/olsrs3d/doxygen/html/structolsr__neigh__list-members.html
   trunk/apps/olsrs3d/doxygen/html/structolsr__neigh__list.html
   trunk/apps/olsrs3d/doxygen/html/structolsr__node-members.html
   trunk/apps/olsrs3d/doxygen/html/structolsr__node.html
   trunk/apps/olsrs3d/doxygen/html/tab_b.gif
   trunk/apps/olsrs3d/doxygen/html/tab_l.gif
   trunk/apps/olsrs3d/doxygen/html/tab_r.gif
   trunk/apps/olsrs3d/doxygen/html/tabs.css
   trunk/apps/olsrs3d/doxygen/latex/
   trunk/apps/olsrs3d/doxygen/latex/Helvetica.ttf
   trunk/apps/olsrs3d/doxygen/latex/Makefile
   trunk/apps/olsrs3d/doxygen/latex/annotated.tex
   trunk/apps/olsrs3d/doxygen/latex/dir_5d167550802dbd943c0631943f884f5b.tex
   trunk/apps/olsrs3d/doxygen/latex/dir_9d2efe7c7f87ee6309da929964f0685b.tex
   trunk/apps/olsrs3d/doxygen/latex/dir_bf110b9fd34b0903efb6170e1cee5506.tex
   trunk/apps/olsrs3d/doxygen/latex/dirs.tex
   trunk/apps/olsrs3d/doxygen/latex/doxygen.sty
   trunk/apps/olsrs3d/doxygen/latex/files.tex
   trunk/apps/olsrs3d/doxygen/latex/hierarchy.tex
   trunk/apps/olsrs3d/doxygen/latex/main_8c.tex
   trunk/apps/olsrs3d/doxygen/latex/net_8c.tex
   trunk/apps/olsrs3d/doxygen/latex/olsrs3d_8h.tex
   trunk/apps/olsrs3d/doxygen/latex/process_8c.tex
   trunk/apps/olsrs3d/doxygen/latex/refman.tex
   trunk/apps/olsrs3d/doxygen/latex/structObj__to__ip.tex
   trunk/apps/olsrs3d/doxygen/latex/structolsr__con.tex
   trunk/apps/olsrs3d/doxygen/latex/structolsr__neigh__list.tex
   trunk/apps/olsrs3d/doxygen/latex/structolsr__node.tex
   trunk/apps/olsrs3d/doxygen/xml/
   trunk/apps/olsrs3d/doxygen/xml/combine.xslt
   trunk/apps/olsrs3d/doxygen/xml/compound.xsd
   trunk/apps/olsrs3d/doxygen/xml/dir_5d167550802dbd943c0631943f884f5b.xml
   trunk/apps/olsrs3d/doxygen/xml/dir_9d2efe7c7f87ee6309da929964f0685b.xml
   trunk/apps/olsrs3d/doxygen/xml/dir_bf110b9fd34b0903efb6170e1cee5506.xml
   trunk/apps/olsrs3d/doxygen/xml/index.xml
   trunk/apps/olsrs3d/doxygen/xml/index.xsd
   trunk/apps/olsrs3d/doxygen/xml/main_8c.xml
   trunk/apps/olsrs3d/doxygen/xml/net_8c.xml
   trunk/apps/olsrs3d/doxygen/xml/olsrs3d_8h.xml
   trunk/apps/olsrs3d/doxygen/xml/process_8c.xml
   trunk/apps/olsrs3d/doxygen/xml/structObj__to__ip.xml
   trunk/apps/olsrs3d/doxygen/xml/structolsr__con.xml
   trunk/apps/olsrs3d/doxygen/xml/structolsr__neigh__list.xml
   trunk/apps/olsrs3d/doxygen/xml/structolsr__node.xml
Log:
- doxygen example

Added: trunk/apps/olsrs3d/doxygen/html/annotated.html
===================================================================
--- trunk/apps/olsrs3d/doxygen/html/annotated.html	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/html/annotated.html	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,32 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
+<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
+<title>olsrs3d: Class List</title>
+<link href="doxygen.css" rel="stylesheet" type="text/css">
+<link href="tabs.css" rel="stylesheet" type="text/css">
+</head><body>
+<!-- Generated by Doxygen 1.4.6 -->
+<div class="tabs">
+  <ul>
+    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
+    <li id="current"><a href="classes.html"><span>Classes</span></a></li>
+    <li><a href="files.html"><span>Files</span></a></li>
+    <li><a href="dirs.html"><span>Directories</span></a></li>
+  </ul></div>
+<div class="tabs">
+  <ul>
+    <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
+    <li id="current"><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
+    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
+    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
+  </ul></div>
+<h1>olsrs3d Class List</h1>Here are the classes, structs, unions and interfaces with brief descriptions:<table>
+  <tr><td class="indexkey"><a class="el" href="structObj__to__ip.html">Obj_to_ip</a></td><td class="indexvalue"></td></tr>
+  <tr><td class="indexkey"><a class="el" href="structolsr__con.html">olsr_con</a></td><td class="indexvalue"></td></tr>
+  <tr><td class="indexkey"><a class="el" href="structolsr__neigh__list.html">olsr_neigh_list</a></td><td class="indexvalue"></td></tr>
+  <tr><td class="indexkey"><a class="el" href="structolsr__node.html">olsr_node</a></td><td class="indexvalue"></td></tr>
+</table>
+<hr size="1"><address style="align: right;"><small>Generated on Sun Mar 19 13:28:20 2006 for olsrs3d by&nbsp;
+<a href="http://www.doxygen.org/index.html">
+<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6 </small></address>
+</body>
+</html>

Added: trunk/apps/olsrs3d/doxygen/html/classes.html
===================================================================
--- trunk/apps/olsrs3d/doxygen/html/classes.html	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/html/classes.html	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,30 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
+<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
+<title>olsrs3d: Alphabetical List</title>
+<link href="doxygen.css" rel="stylesheet" type="text/css">
+<link href="tabs.css" rel="stylesheet" type="text/css">
+</head><body>
+<!-- Generated by Doxygen 1.4.6 -->
+<div class="tabs">
+  <ul>
+    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
+    <li id="current"><a href="classes.html"><span>Classes</span></a></li>
+    <li><a href="files.html"><span>Files</span></a></li>
+    <li><a href="dirs.html"><span>Directories</span></a></li>
+  </ul></div>
+<div class="tabs">
+  <ul>
+    <li id="current"><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
+    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
+    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
+    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
+  </ul></div>
+<h1>olsrs3d Class Index</h1><p><div class="qindex"><a class="qindex" href="#letter_O">O</a></div><p>
+<table align="center" width="95%" border="0" cellspacing="0" cellpadding="0">
+<tr><td><a name="letter_O"></a><table border="0" cellspacing="0" cellpadding="0"><tr><td><div class="ah">&nbsp;&nbsp;O&nbsp;&nbsp;</div></td></tr></table>
+</td><td><a class="el" href="structObj__to__ip.html">Obj_to_ip</a>&nbsp;&nbsp;&nbsp;</td><td><a class="el" href="structolsr__con.html">olsr_con</a>&nbsp;&nbsp;&nbsp;</td><td><a class="el" href="structolsr__neigh__list.html">olsr_neigh_list</a>&nbsp;&nbsp;&nbsp;</td><td><a class="el" href="structolsr__node.html">olsr_node</a>&nbsp;&nbsp;&nbsp;</td></tr></table><p><div class="qindex"><a class="qindex" href="#letter_O">O</a></div><p>
+<hr size="1"><address style="align: right;"><small>Generated on Sun Mar 19 13:28:20 2006 for olsrs3d by&nbsp;
+<a href="http://www.doxygen.org/index.html">
+<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6 </small></address>
+</body>
+</html>

Added: trunk/apps/olsrs3d/doxygen/html/dir_5d167550802dbd943c0631943f884f5b.html
===================================================================
--- trunk/apps/olsrs3d/doxygen/html/dir_5d167550802dbd943c0631943f884f5b.html	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/html/dir_5d167550802dbd943c0631943f884f5b.html	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,27 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
+<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
+<title>olsrs3d: s3d/apps/ Directory Reference</title>
+<link href="doxygen.css" rel="stylesheet" type="text/css">
+<link href="tabs.css" rel="stylesheet" type="text/css">
+</head><body>
+<!-- Generated by Doxygen 1.4.6 -->
+<div class="tabs">
+  <ul>
+    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
+    <li><a href="classes.html"><span>Classes</span></a></li>
+    <li><a href="files.html"><span>Files</span></a></li>
+    <li><a href="dirs.html"><span>Directories</span></a></li>
+  </ul></div>
+<div class="nav">
+<a class="el" href="dir_9d2efe7c7f87ee6309da929964f0685b.html">s3d</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_5d167550802dbd943c0631943f884f5b.html">apps</a></div>
+<h1>apps Directory Reference</h1><table border="0" cellpadding="0" cellspacing="0">
+<tr><td></td></tr>
+<tr><td colspan="2"><br><h2>Directories</h2></td></tr>
+<tr><td class="memItemLeft" nowrap align="right" valign="top">directory &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_bf110b9fd34b0903efb6170e1cee5506.html">olsrs3d</a></td></tr>
+
+</table>
+<hr size="1"><address style="align: right;"><small>Generated on Sun Mar 19 13:28:20 2006 for olsrs3d by&nbsp;
+<a href="http://www.doxygen.org/index.html">
+<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6 </small></address>
+</body>
+</html>

Added: trunk/apps/olsrs3d/doxygen/html/dir_9d2efe7c7f87ee6309da929964f0685b.html
===================================================================
--- trunk/apps/olsrs3d/doxygen/html/dir_9d2efe7c7f87ee6309da929964f0685b.html	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/html/dir_9d2efe7c7f87ee6309da929964f0685b.html	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,27 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
+<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
+<title>olsrs3d: s3d/ Directory Reference</title>
+<link href="doxygen.css" rel="stylesheet" type="text/css">
+<link href="tabs.css" rel="stylesheet" type="text/css">
+</head><body>
+<!-- Generated by Doxygen 1.4.6 -->
+<div class="tabs">
+  <ul>
+    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
+    <li><a href="classes.html"><span>Classes</span></a></li>
+    <li><a href="files.html"><span>Files</span></a></li>
+    <li><a href="dirs.html"><span>Directories</span></a></li>
+  </ul></div>
+<div class="nav">
+<a class="el" href="dir_9d2efe7c7f87ee6309da929964f0685b.html">s3d</a></div>
+<h1>s3d Directory Reference</h1><table border="0" cellpadding="0" cellspacing="0">
+<tr><td></td></tr>
+<tr><td colspan="2"><br><h2>Directories</h2></td></tr>
+<tr><td class="memItemLeft" nowrap align="right" valign="top">directory &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_5d167550802dbd943c0631943f884f5b.html">apps</a></td></tr>
+
+</table>
+<hr size="1"><address style="align: right;"><small>Generated on Sun Mar 19 13:28:20 2006 for olsrs3d by&nbsp;
+<a href="http://www.doxygen.org/index.html">
+<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6 </small></address>
+</body>
+</html>

Added: trunk/apps/olsrs3d/doxygen/html/dir_bf110b9fd34b0903efb6170e1cee5506.html
===================================================================
--- trunk/apps/olsrs3d/doxygen/html/dir_bf110b9fd34b0903efb6170e1cee5506.html	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/html/dir_bf110b9fd34b0903efb6170e1cee5506.html	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,33 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
+<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
+<title>olsrs3d: s3d/apps/olsrs3d/ Directory Reference</title>
+<link href="doxygen.css" rel="stylesheet" type="text/css">
+<link href="tabs.css" rel="stylesheet" type="text/css">
+</head><body>
+<!-- Generated by Doxygen 1.4.6 -->
+<div class="tabs">
+  <ul>
+    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
+    <li><a href="classes.html"><span>Classes</span></a></li>
+    <li><a href="files.html"><span>Files</span></a></li>
+    <li><a href="dirs.html"><span>Directories</span></a></li>
+  </ul></div>
+<div class="nav">
+<a class="el" href="dir_9d2efe7c7f87ee6309da929964f0685b.html">s3d</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_5d167550802dbd943c0631943f884f5b.html">apps</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_bf110b9fd34b0903efb6170e1cee5506.html">olsrs3d</a></div>
+<h1>olsrs3d Directory Reference</h1><table border="0" cellpadding="0" cellspacing="0">
+<tr><td></td></tr>
+<tr><td colspan="2"><br><h2>Files</h2></td></tr>
+<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html">main.c</a> <a href="main_8c-source.html">[code]</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="net_8c.html">net.c</a> <a href="net_8c-source.html">[code]</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="olsrs3d_8h.html">olsrs3d.h</a> <a href="olsrs3d_8h-source.html">[code]</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="process_8c.html">process.c</a> <a href="process_8c-source.html">[code]</a></td></tr>
+
+</table>
+<hr size="1"><address style="align: right;"><small>Generated on Sun Mar 19 13:28:20 2006 for olsrs3d by&nbsp;
+<a href="http://www.doxygen.org/index.html">
+<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6 </small></address>
+</body>
+</html>

Added: trunk/apps/olsrs3d/doxygen/html/dirs.html
===================================================================
--- trunk/apps/olsrs3d/doxygen/html/dirs.html	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/html/dirs.html	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,28 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
+<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
+<title>olsrs3d: Directory Hierarchy</title>
+<link href="doxygen.css" rel="stylesheet" type="text/css">
+<link href="tabs.css" rel="stylesheet" type="text/css">
+</head><body>
+<!-- Generated by Doxygen 1.4.6 -->
+<div class="tabs">
+  <ul>
+    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
+    <li><a href="classes.html"><span>Classes</span></a></li>
+    <li><a href="files.html"><span>Files</span></a></li>
+    <li id="current"><a href="dirs.html"><span>Directories</span></a></li>
+  </ul></div>
+<h1>olsrs3d Directories</h1>This directory hierarchy is sorted roughly, but not completely, alphabetically:<ul>
+<li><a class="el" href="dir_9d2efe7c7f87ee6309da929964f0685b.html">s3d</a>
+<ul>
+<li><a class="el" href="dir_5d167550802dbd943c0631943f884f5b.html">apps</a>
+<ul>
+<li><a class="el" href="dir_bf110b9fd34b0903efb6170e1cee5506.html">olsrs3d</a>
+</ul>
+</ul>
+</ul>
+<hr size="1"><address style="align: right;"><small>Generated on Sun Mar 19 13:28:20 2006 for olsrs3d by&nbsp;
+<a href="http://www.doxygen.org/index.html">
+<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6 </small></address>
+</body>
+</html>

Added: trunk/apps/olsrs3d/doxygen/html/doxygen.css
===================================================================
--- trunk/apps/olsrs3d/doxygen/html/doxygen.css	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/html/doxygen.css	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,310 @@
+BODY,H1,H2,H3,H4,H5,H6,P,CENTER,TD,TH,UL,DL,DIV {
+	font-family: Geneva, Arial, Helvetica, sans-serif;
+}
+BODY,TD {
+       font-size: 90%;
+}
+H1 {
+	text-align: center;
+       font-size: 160%;
+}
+H2 {
+       font-size: 120%;
+}
+H3 {
+       font-size: 100%;
+}
+CAPTION { font-weight: bold }
+DIV.qindex {
+	width: 100%;
+	background-color: #e8eef2;
+	border: 1px solid #84b0c7;
+	text-align: center;
+	margin: 2px;
+	padding: 2px;
+	line-height: 140%;
+}
+DIV.nav {
+	width: 100%;
+	background-color: #e8eef2;
+	border: 1px solid #84b0c7;
+	text-align: center;
+	margin: 2px;
+	padding: 2px;
+	line-height: 140%;
+}
+DIV.navtab {
+       background-color: #e8eef2;
+       border: 1px solid #84b0c7;
+       text-align: center;
+       margin: 2px;
+       margin-right: 15px;
+       padding: 2px;
+}
+TD.navtab {
+       font-size: 70%;
+}
+A.qindex {
+       text-decoration: none;
+       font-weight: bold;
+       color: #1A419D;
+}
+A.qindex:visited {
+       text-decoration: none;
+       font-weight: bold;
+       color: #1A419D
+}
+A.qindex:hover {
+	text-decoration: none;
+	background-color: #ddddff;
+}
+A.qindexHL {
+	text-decoration: none;
+	font-weight: bold;
+	background-color: #6666cc;
+	color: #ffffff;
+	border: 1px double #9295C2;
+}
+A.qindexHL:hover {
+	text-decoration: none;
+	background-color: #6666cc;
+	color: #ffffff;
+}
+A.qindexHL:visited { text-decoration: none; background-color: #6666cc; color: #ffffff }
+A.el { text-decoration: none; font-weight: bold }
+A.elRef { font-weight: bold }
+A.code:link { text-decoration: none; font-weight: normal; color: #0000FF}
+A.code:visited { text-decoration: none; font-weight: normal; color: #0000FF}
+A.codeRef:link { font-weight: normal; color: #0000FF}
+A.codeRef:visited { font-weight: normal; color: #0000FF}
+A:hover { text-decoration: none; background-color: #f2f2ff }
+DL.el { margin-left: -1cm }
+.fragment {
+       font-family: Fixed, monospace;
+       font-size: 95%;
+}
+PRE.fragment {
+	border: 1px solid #CCCCCC;
+	background-color: #f5f5f5;
+	margin-top: 4px;
+	margin-bottom: 4px;
+	margin-left: 2px;
+	margin-right: 8px;
+	padding-left: 6px;
+	padding-right: 6px;
+	padding-top: 4px;
+	padding-bottom: 4px;
+}
+DIV.ah { background-color: black; font-weight: bold; color: #ffffff; margin-bottom: 3px; margin-top: 3px }
+TD.md { background-color: #F4F4FB; font-weight: bold; }
+TD.mdPrefix {
+       background-color: #F4F4FB;
+       color: #606060;
+	font-size: 80%;
+}
+TD.mdname1 { background-color: #F4F4FB; font-weight: bold; color: #602020; }
+TD.mdname { background-color: #F4F4FB; font-weight: bold; color: #602020; width: 600px; }
+DIV.groupHeader {
+       margin-left: 16px;
+       margin-top: 12px;
+       margin-bottom: 6px;
+       font-weight: bold;
+}
+DIV.groupText { margin-left: 16px; font-style: italic; font-size: 90% }
+BODY {
+	background: white;
+	color: black;
+	margin-right: 20px;
+	margin-left: 20px;
+}
+TD.indexkey {
+	background-color: #e8eef2;
+	font-weight: bold;
+	padding-right  : 10px;
+	padding-top    : 2px;
+	padding-left   : 10px;
+	padding-bottom : 2px;
+	margin-left    : 0px;
+	margin-right   : 0px;
+	margin-top     : 2px;
+	margin-bottom  : 2px;
+	border: 1px solid #CCCCCC;
+}
+TD.indexvalue {
+	background-color: #e8eef2;
+	font-style: italic;
+	padding-right  : 10px;
+	padding-top    : 2px;
+	padding-left   : 10px;
+	padding-bottom : 2px;
+	margin-left    : 0px;
+	margin-right   : 0px;
+	margin-top     : 2px;
+	margin-bottom  : 2px;
+	border: 1px solid #CCCCCC;
+}
+TR.memlist {
+   background-color: #f0f0f0; 
+}
+P.formulaDsp { text-align: center; }
+IMG.formulaDsp { }
+IMG.formulaInl { vertical-align: middle; }
+SPAN.keyword       { color: #008000 }
+SPAN.keywordtype   { color: #604020 }
+SPAN.keywordflow   { color: #e08000 }
+SPAN.comment       { color: #800000 }
+SPAN.preprocessor  { color: #806020 }
+SPAN.stringliteral { color: #002080 }
+SPAN.charliteral   { color: #008080 }
+.mdTable {
+	border: 1px solid #868686;
+	background-color: #F4F4FB;
+}
+.mdRow {
+	padding: 8px 10px;
+}
+.mdescLeft {
+       padding: 0px 8px 4px 8px;
+	font-size: 80%;
+	font-style: italic;
+	background-color: #FAFAFA;
+	border-top: 1px none #E0E0E0;
+	border-right: 1px none #E0E0E0;
+	border-bottom: 1px none #E0E0E0;
+	border-left: 1px none #E0E0E0;
+	margin: 0px;
+}
+.mdescRight {
+       padding: 0px 8px 4px 8px;
+	font-size: 80%;
+	font-style: italic;
+	background-color: #FAFAFA;
+	border-top: 1px none #E0E0E0;
+	border-right: 1px none #E0E0E0;
+	border-bottom: 1px none #E0E0E0;
+	border-left: 1px none #E0E0E0;
+	margin: 0px;
+}
+.memItemLeft {
+	padding: 1px 0px 0px 8px;
+	margin: 4px;
+	border-top-width: 1px;
+	border-right-width: 1px;
+	border-bottom-width: 1px;
+	border-left-width: 1px;
+	border-top-color: #E0E0E0;
+	border-right-color: #E0E0E0;
+	border-bottom-color: #E0E0E0;
+	border-left-color: #E0E0E0;
+	border-top-style: solid;
+	border-right-style: none;
+	border-bottom-style: none;
+	border-left-style: none;
+	background-color: #FAFAFA;
+	font-size: 80%;
+}
+.memItemRight {
+	padding: 1px 8px 0px 8px;
+	margin: 4px;
+	border-top-width: 1px;
+	border-right-width: 1px;
+	border-bottom-width: 1px;
+	border-left-width: 1px;
+	border-top-color: #E0E0E0;
+	border-right-color: #E0E0E0;
+	border-bottom-color: #E0E0E0;
+	border-left-color: #E0E0E0;
+	border-top-style: solid;
+	border-right-style: none;
+	border-bottom-style: none;
+	border-left-style: none;
+	background-color: #FAFAFA;
+	font-size: 80%;
+}
+.memTemplItemLeft {
+	padding: 1px 0px 0px 8px;
+	margin: 4px;
+	border-top-width: 1px;
+	border-right-width: 1px;
+	border-bottom-width: 1px;
+	border-left-width: 1px;
+	border-top-color: #E0E0E0;
+	border-right-color: #E0E0E0;
+	border-bottom-color: #E0E0E0;
+	border-left-color: #E0E0E0;
+	border-top-style: none;
+	border-right-style: none;
+	border-bottom-style: none;
+	border-left-style: none;
+	background-color: #FAFAFA;
+	font-size: 80%;
+}
+.memTemplItemRight {
+	padding: 1px 8px 0px 8px;
+	margin: 4px;
+	border-top-width: 1px;
+	border-right-width: 1px;
+	border-bottom-width: 1px;
+	border-left-width: 1px;
+	border-top-color: #E0E0E0;
+	border-right-color: #E0E0E0;
+	border-bottom-color: #E0E0E0;
+	border-left-color: #E0E0E0;
+	border-top-style: none;
+	border-right-style: none;
+	border-bottom-style: none;
+	border-left-style: none;
+	background-color: #FAFAFA;
+	font-size: 80%;
+}
+.memTemplParams {
+	padding: 1px 0px 0px 8px;
+	margin: 4px;
+	border-top-width: 1px;
+	border-right-width: 1px;
+	border-bottom-width: 1px;
+	border-left-width: 1px;
+	border-top-color: #E0E0E0;
+	border-right-color: #E0E0E0;
+	border-bottom-color: #E0E0E0;
+	border-left-color: #E0E0E0;
+	border-top-style: solid;
+	border-right-style: none;
+	border-bottom-style: none;
+	border-left-style: none;
+       color: #606060;
+	background-color: #FAFAFA;
+	font-size: 80%;
+}
+.search     { color: #003399;
+              font-weight: bold;
+}
+FORM.search {
+              margin-bottom: 0px;
+              margin-top: 0px;
+}
+INPUT.search { font-size: 75%;
+               color: #000080;
+               font-weight: normal;
+               background-color: #e8eef2;
+}
+TD.tiny      { font-size: 75%;
+}
+a {
+	color: #1A41A8;
+}
+a:visited {
+	color: #2A3798;
+}
+.dirtab { padding: 4px;
+          border-collapse: collapse;
+          border: 1px solid #84b0c7;
+}
+TH.dirtab { background: #e8eef2;
+            font-weight: bold;
+}
+HR { height: 1px;
+     border: none;
+     border-top: 1px solid black;
+}
+

Added: trunk/apps/olsrs3d/doxygen/html/doxygen.png
===================================================================
(Binary files differ)


Property changes on: trunk/apps/olsrs3d/doxygen/html/doxygen.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/apps/olsrs3d/doxygen/html/files.html
===================================================================
--- trunk/apps/olsrs3d/doxygen/html/files.html	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/html/files.html	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,30 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
+<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
+<title>olsrs3d: File Index</title>
+<link href="doxygen.css" rel="stylesheet" type="text/css">
+<link href="tabs.css" rel="stylesheet" type="text/css">
+</head><body>
+<!-- Generated by Doxygen 1.4.6 -->
+<div class="tabs">
+  <ul>
+    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
+    <li><a href="classes.html"><span>Classes</span></a></li>
+    <li id="current"><a href="files.html"><span>Files</span></a></li>
+    <li><a href="dirs.html"><span>Directories</span></a></li>
+  </ul></div>
+<div class="tabs">
+  <ul>
+    <li id="current"><a href="files.html"><span>File&nbsp;List</span></a></li>
+    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
+  </ul></div>
+<h1>olsrs3d File List</h1>Here is a list of all files with brief descriptions:<table>
+  <tr><td class="indexkey">s3d/apps/olsrs3d/<a class="el" href="main_8c.html">main.c</a> <a href="main_8c-source.html">[code]</a></td><td class="indexvalue"></td></tr>
+  <tr><td class="indexkey">s3d/apps/olsrs3d/<a class="el" href="net_8c.html">net.c</a> <a href="net_8c-source.html">[code]</a></td><td class="indexvalue"></td></tr>
+  <tr><td class="indexkey">s3d/apps/olsrs3d/<a class="el" href="olsrs3d_8h.html">olsrs3d.h</a> <a href="olsrs3d_8h-source.html">[code]</a></td><td class="indexvalue"></td></tr>
+  <tr><td class="indexkey">s3d/apps/olsrs3d/<a class="el" href="process_8c.html">process.c</a> <a href="process_8c-source.html">[code]</a></td><td class="indexvalue"></td></tr>
+</table>
+<hr size="1"><address style="align: right;"><small>Generated on Sun Mar 19 13:28:20 2006 for olsrs3d by&nbsp;
+<a href="http://www.doxygen.org/index.html">
+<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6 </small></address>
+</body>
+</html>

Added: trunk/apps/olsrs3d/doxygen/html/functions.html
===================================================================
--- trunk/apps/olsrs3d/doxygen/html/functions.html	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/html/functions.html	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,63 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
+<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
+<title>olsrs3d: Class Members</title>
+<link href="doxygen.css" rel="stylesheet" type="text/css">
+<link href="tabs.css" rel="stylesheet" type="text/css">
+</head><body>
+<!-- Generated by Doxygen 1.4.6 -->
+<div class="tabs">
+  <ul>
+    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
+    <li id="current"><a href="classes.html"><span>Classes</span></a></li>
+    <li><a href="files.html"><span>Files</span></a></li>
+    <li><a href="dirs.html"><span>Directories</span></a></li>
+  </ul></div>
+<div class="tabs">
+  <ul>
+    <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
+    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
+    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
+    <li id="current"><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
+  </ul></div>
+<div class="tabs">
+  <ul>
+    <li id="current"><a href="functions.html"><span>All</span></a></li>
+    <li><a href="functions_vars.html"><span>Variables</span></a></li>
+  </ul>
+</div>
+Here is a list of all class members with links to the classes they belong to:
+<p>
+<ul>
+<li>color
+: <a class="el" href="structolsr__con.html#26a11a87df79af8e59e9f5048937b0c1">olsr_con</a><li>desc_id
+: <a class="el" href="structolsr__node.html#f2e3f729be82b64001867038bbe8012a">olsr_node</a><li>desc_length
+: <a class="el" href="structolsr__node.html#c2a66c5312cf64fec10f6b8903dbd966">olsr_node</a><li>id
+: <a class="el" href="structObj__to__ip.html#23759dec76c683ac720f937fea4e4d41">Obj_to_ip</a><li>ip
+: <a class="el" href="structolsr__node.html#59690d75faff5c149faecacb4f4d2a57">olsr_node</a><li>last_seen
+: <a class="el" href="structolsr__node.html#1d492aa6f4e75cc100d7a3e2f059d615">olsr_node</a><li>left
+: <a class="el" href="structolsr__node.html#b64ee26ebfa4a3c2719de780b4cabada">olsr_node</a><li>left_etx
+: <a class="el" href="structolsr__con.html#d93efab11883355b45a0460456991362">olsr_con</a><li>left_olsr_node
+: <a class="el" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">olsr_con</a><li>mov_vec
+: <a class="el" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">olsr_node</a><li>next
+: <a class="el" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">Obj_to_ip</a><li>next_olsr_con
+: <a class="el" href="structolsr__con.html#369dfd6eec077d0a6228cd1387135e6e">olsr_con</a><li>next_olsr_neigh_list
+: <a class="el" href="structolsr__neigh__list.html#f1d533fde49e1ed2ea5299661f5c10c6">olsr_neigh_list</a><li>node_type
+: <a class="el" href="structolsr__node.html#c89186513811183436bcd79cdb6d7b4d">olsr_node</a><li>node_type_modified
+: <a class="el" href="structolsr__node.html#4517a87e4fdbdb58f678743b5684088b">olsr_node</a><li>obj_id
+: <a class="el" href="structolsr__node.html#15be0912065801026e7b4411af561788">olsr_node</a>, <a class="el" href="structolsr__con.html#fe985b6b83425cb17e801ac00001175e">olsr_con</a><li>olsr_con
+: <a class="el" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">olsr_neigh_list</a><li>olsr_neigh_list
+: <a class="el" href="structolsr__node.html#3b80ce78a06be6aba5a1f93887442764">olsr_node</a><li>olsr_node
+: <a class="el" href="structObj__to__ip.html#207d8f9a609e3e20b4cbd9a7976dcd18">Obj_to_ip</a><li>pos_vec
+: <a class="el" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">olsr_node</a><li>prev
+: <a class="el" href="structObj__to__ip.html#c41475dd4632807df16315bad4309333">Obj_to_ip</a><li>prev_olsr_con
+: <a class="el" href="structolsr__con.html#0382eebfbf31d5f217572d4907c503cb">olsr_con</a><li>rgb
+: <a class="el" href="structolsr__con.html#239f576ba1dae4303a935a296d5adb95">olsr_con</a><li>right
+: <a class="el" href="structolsr__node.html#bc6cf143d12b1e5a204ae64d40c0eb05">olsr_node</a><li>right_etx
+: <a class="el" href="structolsr__con.html#30d90c31e93a79ba37ca51b8d146693a">olsr_con</a><li>right_olsr_node
+: <a class="el" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">olsr_con</a><li>visible
+: <a class="el" href="structolsr__node.html#f19d37e4aa5263be9a1741de24686664">olsr_node</a></ul>
+<hr size="1"><address style="align: right;"><small>Generated on Sun Mar 19 13:28:20 2006 for olsrs3d by&nbsp;
+<a href="http://www.doxygen.org/index.html">
+<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6 </small></address>
+</body>
+</html>

Added: trunk/apps/olsrs3d/doxygen/html/functions_vars.html
===================================================================
--- trunk/apps/olsrs3d/doxygen/html/functions_vars.html	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/html/functions_vars.html	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,63 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
+<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
+<title>olsrs3d: Class Members - Variables</title>
+<link href="doxygen.css" rel="stylesheet" type="text/css">
+<link href="tabs.css" rel="stylesheet" type="text/css">
+</head><body>
+<!-- Generated by Doxygen 1.4.6 -->
+<div class="tabs">
+  <ul>
+    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
+    <li id="current"><a href="classes.html"><span>Classes</span></a></li>
+    <li><a href="files.html"><span>Files</span></a></li>
+    <li><a href="dirs.html"><span>Directories</span></a></li>
+  </ul></div>
+<div class="tabs">
+  <ul>
+    <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
+    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
+    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
+    <li id="current"><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
+  </ul></div>
+<div class="tabs">
+  <ul>
+    <li><a href="functions.html"><span>All</span></a></li>
+    <li id="current"><a href="functions_vars.html"><span>Variables</span></a></li>
+  </ul>
+</div>
+&nbsp;
+<p>
+<ul>
+<li>color
+: <a class="el" href="structolsr__con.html#26a11a87df79af8e59e9f5048937b0c1">olsr_con</a><li>desc_id
+: <a class="el" href="structolsr__node.html#f2e3f729be82b64001867038bbe8012a">olsr_node</a><li>desc_length
+: <a class="el" href="structolsr__node.html#c2a66c5312cf64fec10f6b8903dbd966">olsr_node</a><li>id
+: <a class="el" href="structObj__to__ip.html#23759dec76c683ac720f937fea4e4d41">Obj_to_ip</a><li>ip
+: <a class="el" href="structolsr__node.html#59690d75faff5c149faecacb4f4d2a57">olsr_node</a><li>last_seen
+: <a class="el" href="structolsr__node.html#1d492aa6f4e75cc100d7a3e2f059d615">olsr_node</a><li>left
+: <a class="el" href="structolsr__node.html#b64ee26ebfa4a3c2719de780b4cabada">olsr_node</a><li>left_etx
+: <a class="el" href="structolsr__con.html#d93efab11883355b45a0460456991362">olsr_con</a><li>left_olsr_node
+: <a class="el" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">olsr_con</a><li>mov_vec
+: <a class="el" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">olsr_node</a><li>next
+: <a class="el" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">Obj_to_ip</a><li>next_olsr_con
+: <a class="el" href="structolsr__con.html#369dfd6eec077d0a6228cd1387135e6e">olsr_con</a><li>next_olsr_neigh_list
+: <a class="el" href="structolsr__neigh__list.html#f1d533fde49e1ed2ea5299661f5c10c6">olsr_neigh_list</a><li>node_type
+: <a class="el" href="structolsr__node.html#c89186513811183436bcd79cdb6d7b4d">olsr_node</a><li>node_type_modified
+: <a class="el" href="structolsr__node.html#4517a87e4fdbdb58f678743b5684088b">olsr_node</a><li>obj_id
+: <a class="el" href="structolsr__node.html#15be0912065801026e7b4411af561788">olsr_node</a>, <a class="el" href="structolsr__con.html#fe985b6b83425cb17e801ac00001175e">olsr_con</a><li>olsr_con
+: <a class="el" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">olsr_neigh_list</a><li>olsr_neigh_list
+: <a class="el" href="structolsr__node.html#3b80ce78a06be6aba5a1f93887442764">olsr_node</a><li>olsr_node
+: <a class="el" href="structObj__to__ip.html#207d8f9a609e3e20b4cbd9a7976dcd18">Obj_to_ip</a><li>pos_vec
+: <a class="el" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">olsr_node</a><li>prev
+: <a class="el" href="structObj__to__ip.html#c41475dd4632807df16315bad4309333">Obj_to_ip</a><li>prev_olsr_con
+: <a class="el" href="structolsr__con.html#0382eebfbf31d5f217572d4907c503cb">olsr_con</a><li>rgb
+: <a class="el" href="structolsr__con.html#239f576ba1dae4303a935a296d5adb95">olsr_con</a><li>right
+: <a class="el" href="structolsr__node.html#bc6cf143d12b1e5a204ae64d40c0eb05">olsr_node</a><li>right_etx
+: <a class="el" href="structolsr__con.html#30d90c31e93a79ba37ca51b8d146693a">olsr_con</a><li>right_olsr_node
+: <a class="el" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">olsr_con</a><li>visible
+: <a class="el" href="structolsr__node.html#f19d37e4aa5263be9a1741de24686664">olsr_node</a></ul>
+<hr size="1"><address style="align: right;"><small>Generated on Sun Mar 19 13:28:20 2006 for olsrs3d by&nbsp;
+<a href="http://www.doxygen.org/index.html">
+<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6 </small></address>
+</body>
+</html>

Added: trunk/apps/olsrs3d/doxygen/html/globals.html
===================================================================
--- trunk/apps/olsrs3d/doxygen/html/globals.html	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/html/globals.html	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,150 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
+<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
+<title>olsrs3d: Class Members</title>
+<link href="doxygen.css" rel="stylesheet" type="text/css">
+<link href="tabs.css" rel="stylesheet" type="text/css">
+</head><body>
+<!-- Generated by Doxygen 1.4.6 -->
+<div class="tabs">
+  <ul>
+    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
+    <li><a href="classes.html"><span>Classes</span></a></li>
+    <li id="current"><a href="files.html"><span>Files</span></a></li>
+    <li><a href="dirs.html"><span>Directories</span></a></li>
+  </ul></div>
+<div class="tabs">
+  <ul>
+    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
+    <li id="current"><a href="globals.html"><span>File&nbsp;Members</span></a></li>
+  </ul></div>
+<div class="tabs">
+  <ul>
+    <li id="current"><a href="globals.html"><span>All</span></a></li>
+    <li><a href="globals_func.html"><span>Functions</span></a></li>
+    <li><a href="globals_vars.html"><span>Variables</span></a></li>
+    <li><a href="globals_defs.html"><span>Defines</span></a></li>
+  </ul>
+</div>
+<div class="tabs">
+  <ul>
+    <li><a href="#index_a"><span>a</span></a></li>
+    <li><a href="#index_b"><span>b</span></a></li>
+    <li><a href="#index_c"><span>c</span></a></li>
+    <li><a href="#index_d"><span>d</span></a></li>
+    <li><a href="#index_f"><span>f</span></a></li>
+    <li><a href="#index_g"><span>g</span></a></li>
+    <li><a href="#index_h"><span>h</span></a></li>
+    <li><a href="#index_k"><span>k</span></a></li>
+    <li><a href="#index_l"><span>l</span></a></li>
+    <li><a href="#index_m"><span>m</span></a></li>
+    <li><a href="#index_n"><span>n</span></a></li>
+    <li><a href="#index_o"><span>o</span></a></li>
+    <li><a href="#index_p"><span>p</span></a></li>
+    <li><a href="#index_r"><span>r</span></a></li>
+    <li><a href="#index_s"><span>s</span></a></li>
+    <li><a href="#index_z"><span>z</span></a></li>
+  </ul>
+</div>
+
+<p>
+Here is a list of all file members with links to the files they belong to:
+<p>
+<h3><a class="anchor" name="index_a">- a -</a></h3><ul>
+<li>add_olsr_con()
+: <a class="el" href="process_8c.html#4c780ee64b12fa5531a56edfb5ffcc00">process.c</a><li>Asp
+: <a class="el" href="main_8c.html#fb33da16fedfac392508c8ca439aca5d">main.c</a></ul>
+<h3><a class="anchor" name="index_b">- b -</a></h3><ul>
+<li>Bottom
+: <a class="el" href="olsrs3d_8h.html#f23a6ad2da4511ef430c4f522ae9f4cc">olsrs3d.h</a>, <a class="el" href="main_8c.html#f23a6ad2da4511ef430c4f522ae9f4cc">main.c</a><li>buf
+: <a class="el" href="net_8c.html#f39ed2161fb25f51aa61ffc038306f75">net.c</a></ul>
+<h3><a class="anchor" name="index_c">- c -</a></h3><ul>
+<li>calc_olsr_node_mov()
+: <a class="el" href="main_8c.html#668e36a25680cc3e0ac4d85a418a838a">main.c</a><li>CamPosition
+: <a class="el" href="main_8c.html#5d58294b80563f797d1a14d1d739f52b">main.c</a><li>ColorSwitch
+: <a class="el" href="main_8c.html#aaca6648d8e9266d2fbeb21a6a4f4745">main.c</a><li>Con_begin
+: <a class="el" href="olsrs3d_8h.html#0643a36891539929d987e2ee83ff81d1">olsrs3d.h</a>, <a class="el" href="main_8c.html#0643a36891539929d987e2ee83ff81d1">main.c</a></ul>
+<h3><a class="anchor" name="index_d">- d -</a></h3><ul>
+<li>Debug
+: <a class="el" href="olsrs3d_8h.html#923774364cedbc16baa0bc05e9be136c">olsrs3d.h</a>, <a class="el" href="main_8c.html#923774364cedbc16baa0bc05e9be136c">main.c</a><li>dirt()
+: <a class="el" href="main_8c.html#753e5e5d6fbcbd893bb466ce045a3316">main.c</a><li>dist()
+: <a class="el" href="main_8c.html#da3bfd6c7ec35068dbcdf966a4628f5e">main.c</a></ul>
+<h3><a class="anchor" name="index_f">- f -</a></h3><ul>
+<li>Factor
+: <a class="el" href="main_8c.html#98d8a7901c60f18d6bf9b35998147831">main.c</a></ul>
+<h3><a class="anchor" name="index_g">- g -</a></h3><ul>
+<li>get_olsr_node()
+: <a class="el" href="process_8c.html#7ba929b35f03f5921272b4e5e821ade2">process.c</a></ul>
+<h3><a class="anchor" name="index_h">- h -</a></h3><ul>
+<li>handle_olsr_node()
+: <a class="el" href="main_8c.html#de55269b71a792259ef22763327686b9">main.c</a></ul>
+<h3><a class="anchor" name="index_k">- k -</a></h3><ul>
+<li>keypress()
+: <a class="el" href="main_8c.html#2f5982986645c1e7a202d72bc5e633eb">main.c</a></ul>
+<h3><a class="anchor" name="index_l">- l -</a></h3><ul>
+<li>Last_olsr_node_count
+: <a class="el" href="olsrs3d_8h.html#58acad60c78b63554c696703227d0b7b">olsrs3d.h</a>, <a class="el" href="main_8c.html#58acad60c78b63554c696703227d0b7b">main.c</a><li>lbuf
+: <a class="el" href="process_8c.html#00f1cd38b187535569d0354f2506fb74">process.c</a>, <a class="el" href="olsrs3d_8h.html#00f1cd38b187535569d0354f2506fb74">olsrs3d.h</a><li>Left
+: <a class="el" href="olsrs3d_8h.html#6f68bad9075598ca8ede1827c6832376">olsrs3d.h</a>, <a class="el" href="main_8c.html#6f68bad9075598ca8ede1827c6832376">main.c</a><li>List_ptr
+: <a class="el" href="olsrs3d_8h.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">olsrs3d.h</a>, <a class="el" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">main.c</a><li>lst_add()
+: <a class="el" href="process_8c.html#d01a29bcb2e2daed6fcc6516c328f141">process.c</a>, <a class="el" href="olsrs3d_8h.html#d01a29bcb2e2daed6fcc6516c328f141">olsrs3d.h</a><li>lst_del()
+: <a class="el" href="process_8c.html#febf2594bdfe9ec411d0c04c9cd951b3">process.c</a>, <a class="el" href="olsrs3d_8h.html#febf2594bdfe9ec411d0c04c9cd951b3">olsrs3d.h</a><li>lst_initialize()
+: <a class="el" href="process_8c.html#edfb2ae44af543946842187ced1cd47e">process.c</a>, <a class="el" href="olsrs3d_8h.html#edfb2ae44af543946842187ced1cd47e">olsrs3d.h</a><li>lst_out()
+: <a class="el" href="process_8c.html#a015f713ca02d8b76a52175b4128d3e8">process.c</a>, <a class="el" href="olsrs3d_8h.html#a015f713ca02d8b76a52175b4128d3e8">olsrs3d.h</a><li>lst_search()
+: <a class="el" href="process_8c.html#b74d5229fcc3a39626609ac9f12510dd">process.c</a>, <a class="el" href="olsrs3d_8h.html#ef8aff26d4e096ef0880c204c13309f0">olsrs3d.h</a></ul>
+<h3><a class="anchor" name="index_m">- m -</a></h3><ul>
+<li>main()
+: <a class="el" href="main_8c.html#0ddf1224851353fc92bfbff6f499fa97">main.c</a><li>mainloop()
+: <a class="el" href="main_8c.html#896df4ffe3f986ad843e4d191cd712b3">main.c</a><li>MAXDATASIZE
+: <a class="el" href="olsrs3d_8h.html#16c16f9369be4a374a3e621f6d13bb16">olsrs3d.h</a><li>MAXLINESIZE
+: <a class="el" href="olsrs3d_8h.html#e310f74f793edeb882f0c2d8d8b50bb8">olsrs3d.h</a><li>mov_add()
+: <a class="el" href="main_8c.html#f4369a866dcd049e2642e137507e8ff1">main.c</a><li>move_lst_ptr()
+: <a class="el" href="process_8c.html#576c61914d53ad9035e74317dbb15903">process.c</a>, <a class="el" href="olsrs3d_8h.html#576c61914d53ad9035e74317dbb15903">olsrs3d.h</a><li>move_olsr_nodes()
+: <a class="el" href="main_8c.html#b8d0d8cf5ac8914802be645e15241b77">main.c</a></ul>
+<h3><a class="anchor" name="index_n">- n -</a></h3><ul>
+<li>NAMEMAX
+: <a class="el" href="olsrs3d_8h.html#f8c0c53607c56b59e883cb0894e5cde7">olsrs3d.h</a><li>net_init()
+: <a class="el" href="olsrs3d_8h.html#63c933342efd8cac7f272b92d8acab05">olsrs3d.h</a>, <a class="el" href="net_8c.html#63c933342efd8cac7f272b92d8acab05">net.c</a><li>net_main()
+: <a class="el" href="olsrs3d_8h.html#b8a768eba717722a3d860c01f69fbbc9">olsrs3d.h</a>, <a class="el" href="net_8c.html#b8a768eba717722a3d860c01f69fbbc9">net.c</a><li>net_quit()
+: <a class="el" href="olsrs3d_8h.html#98aebc7a8515c76551eb15ecd465b923">olsrs3d.h</a>, <a class="el" href="net_8c.html#98aebc7a8515c76551eb15ecd465b923">net.c</a><li>Net_read_count
+: <a class="el" href="olsrs3d_8h.html#5bcc20f84efa7bd4aafc56a629f2eff3">olsrs3d.h</a>, <a class="el" href="main_8c.html#5bcc20f84efa7bd4aafc56a629f2eff3">main.c</a><li>numbytes
+: <a class="el" href="net_8c.html#24bdd92b6cf8d141a4a27d4882c6a905">net.c</a></ul>
+<h3><a class="anchor" name="index_o">- o -</a></h3><ul>
+<li>Obj_to_ip_end
+: <a class="el" href="olsrs3d_8h.html#236217b97f5fe65457d8b22c73c5073d">olsrs3d.h</a>, <a class="el" href="main_8c.html#236217b97f5fe65457d8b22c73c5073d">main.c</a><li>Obj_to_ip_head
+: <a class="el" href="olsrs3d_8h.html#9494e9e8cbdc4eceb86cb33ff0006785">olsrs3d.h</a>, <a class="el" href="main_8c.html#9494e9e8cbdc4eceb86cb33ff0006785">main.c</a><li>object_click()
+: <a class="el" href="main_8c.html#ddbd46dad32b89cec68daa03a08f3582">main.c</a><li>object_info()
+: <a class="el" href="main_8c.html#b7f2ab10a4f7d5ef94d5205fc6147cc4">main.c</a><li>Olsr_host
+: <a class="el" href="main_8c.html#9034a20840ce47fbec531d2b4a4a9f21">main.c</a><li>Olsr_ip_label_obj
+: <a class="el" href="main_8c.html#bc4292eef79532d125b616a9e0ec8fa0">main.c</a><li>Olsr_node_count
+: <a class="el" href="olsrs3d_8h.html#86c048bc4aaab319f4d61f7c0e1f056f">olsrs3d.h</a>, <a class="el" href="main_8c.html#86c048bc4aaab319f4d61f7c0e1f056f">main.c</a><li>Olsr_node_count_obj
+: <a class="el" href="olsrs3d_8h.html#4dfd0657ff868fa02113bcd3335acff1">olsrs3d.h</a>, <a class="el" href="main_8c.html#4dfd0657ff868fa02113bcd3335acff1">main.c</a><li>Olsr_node_hna_net
+: <a class="el" href="olsrs3d_8h.html#c03c9b38147e4231238c44f4b5fbdff7">olsrs3d.h</a>, <a class="el" href="main_8c.html#c03c9b38147e4231238c44f4b5fbdff7">main.c</a><li>Olsr_node_inet_obj
+: <a class="el" href="olsrs3d_8h.html#b02228665cef19331d409b0d8a831531">olsrs3d.h</a>, <a class="el" href="main_8c.html#b02228665cef19331d409b0d8a831531">main.c</a><li>Olsr_node_obj
+: <a class="el" href="olsrs3d_8h.html#5eba8148fe9257c34665ed364b595fdb">olsrs3d.h</a>, <a class="el" href="main_8c.html#5eba8148fe9257c34665ed364b595fdb">main.c</a><li>Olsr_root
+: <a class="el" href="olsrs3d_8h.html#c5c5c6846587092d0c23b58b558e680c">olsrs3d.h</a>, <a class="el" href="main_8c.html#c5c5c6846587092d0c23b58b558e680c">main.c</a><li>out_of_mem()
+: <a class="el" href="olsrs3d_8h.html#be0835e7acb76ea987ac80769302d90a">olsrs3d.h</a>, <a class="el" href="main_8c.html#be0835e7acb76ea987ac80769302d90a">main.c</a></ul>
+<h3><a class="anchor" name="index_p">- p -</a></h3><ul>
+<li>PORT
+: <a class="el" href="net_8c.html#614217d263be1fb1a5f76e2ff7be19a2">net.c</a><li>print_usage()
+: <a class="el" href="main_8c.html#a1187b70998f73cdb598833d6afaa30a">main.c</a><li>process_main()
+: <a class="el" href="process_8c.html#6b4e9b6718b671f6330c2e501c60d3c1">process.c</a>, <a class="el" href="olsrs3d_8h.html#6b4e9b6718b671f6330c2e501c60d3c1">olsrs3d.h</a></ul>
+<h3><a class="anchor" name="index_r">- r -</a></h3><ul>
+<li>RotateSpeed
+: <a class="el" href="main_8c.html#cfe4f8990043eade6e82cab3f101b12e">main.c</a><li>RotateSwitch
+: <a class="el" href="main_8c.html#4370348160930ca94ac7a5d1a6fc5172">main.c</a></ul>
+<h3><a class="anchor" name="index_s">- s -</a></h3><ul>
+<li>sleep_time
+: <a class="el" href="main_8c.html#ea8eb9210d53cd6c1b34e6e7f80a243c">main.c</a><li>sockfd
+: <a class="el" href="net_8c.html#d2c8fb3df3a737e0685e902870a611d2">net.c</a><li>SPEED
+: <a class="el" href="main_8c.html#ac3553b3932cbfeeac4526ce7ca0336b">main.c</a><li>stop()
+: <a class="el" href="main_8c.html#8c528baf37154d347366083f0f816846">main.c</a></ul>
+<h3><a class="anchor" name="index_z">- z -</a></h3><ul>
+<li>ZeroPoint
+: <a class="el" href="olsrs3d_8h.html#e113d40abb6f4dd73e4b1253917a1942">olsrs3d.h</a>, <a class="el" href="main_8c.html#e113d40abb6f4dd73e4b1253917a1942">main.c</a><li>ZeroPosition
+: <a class="el" href="main_8c.html#4942e67624e2b40a2a949f5cc658ccce">main.c</a><li>Zp_rotate
+: <a class="el" href="main_8c.html#ea9e1c287e0c505c2075a0b936dc3404">main.c</a></ul>
+<hr size="1"><address style="align: right;"><small>Generated on Sun Mar 19 13:28:20 2006 for olsrs3d by&nbsp;
+<a href="http://www.doxygen.org/index.html">
+<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6 </small></address>
+</body>
+</html>

Added: trunk/apps/olsrs3d/doxygen/html/globals_defs.html
===================================================================
--- trunk/apps/olsrs3d/doxygen/html/globals_defs.html	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/html/globals_defs.html	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,41 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
+<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
+<title>olsrs3d: Class Members</title>
+<link href="doxygen.css" rel="stylesheet" type="text/css">
+<link href="tabs.css" rel="stylesheet" type="text/css">
+</head><body>
+<!-- Generated by Doxygen 1.4.6 -->
+<div class="tabs">
+  <ul>
+    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
+    <li><a href="classes.html"><span>Classes</span></a></li>
+    <li id="current"><a href="files.html"><span>Files</span></a></li>
+    <li><a href="dirs.html"><span>Directories</span></a></li>
+  </ul></div>
+<div class="tabs">
+  <ul>
+    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
+    <li id="current"><a href="globals.html"><span>File&nbsp;Members</span></a></li>
+  </ul></div>
+<div class="tabs">
+  <ul>
+    <li><a href="globals.html"><span>All</span></a></li>
+    <li><a href="globals_func.html"><span>Functions</span></a></li>
+    <li><a href="globals_vars.html"><span>Variables</span></a></li>
+    <li id="current"><a href="globals_defs.html"><span>Defines</span></a></li>
+  </ul>
+</div>
+&nbsp;
+<p>
+<ul>
+<li>MAXDATASIZE
+: <a class="el" href="olsrs3d_8h.html#16c16f9369be4a374a3e621f6d13bb16">olsrs3d.h</a><li>MAXLINESIZE
+: <a class="el" href="olsrs3d_8h.html#e310f74f793edeb882f0c2d8d8b50bb8">olsrs3d.h</a><li>NAMEMAX
+: <a class="el" href="olsrs3d_8h.html#f8c0c53607c56b59e883cb0894e5cde7">olsrs3d.h</a><li>PORT
+: <a class="el" href="net_8c.html#614217d263be1fb1a5f76e2ff7be19a2">net.c</a><li>SPEED
+: <a class="el" href="main_8c.html#ac3553b3932cbfeeac4526ce7ca0336b">main.c</a></ul>
+<hr size="1"><address style="align: right;"><small>Generated on Sun Mar 19 13:28:20 2006 for olsrs3d by&nbsp;
+<a href="http://www.doxygen.org/index.html">
+<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6 </small></address>
+</body>
+</html>

Added: trunk/apps/olsrs3d/doxygen/html/globals_func.html
===================================================================
--- trunk/apps/olsrs3d/doxygen/html/globals_func.html	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/html/globals_func.html	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,62 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
+<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
+<title>olsrs3d: Class Members</title>
+<link href="doxygen.css" rel="stylesheet" type="text/css">
+<link href="tabs.css" rel="stylesheet" type="text/css">
+</head><body>
+<!-- Generated by Doxygen 1.4.6 -->
+<div class="tabs">
+  <ul>
+    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
+    <li><a href="classes.html"><span>Classes</span></a></li>
+    <li id="current"><a href="files.html"><span>Files</span></a></li>
+    <li><a href="dirs.html"><span>Directories</span></a></li>
+  </ul></div>
+<div class="tabs">
+  <ul>
+    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
+    <li id="current"><a href="globals.html"><span>File&nbsp;Members</span></a></li>
+  </ul></div>
+<div class="tabs">
+  <ul>
+    <li><a href="globals.html"><span>All</span></a></li>
+    <li id="current"><a href="globals_func.html"><span>Functions</span></a></li>
+    <li><a href="globals_vars.html"><span>Variables</span></a></li>
+    <li><a href="globals_defs.html"><span>Defines</span></a></li>
+  </ul>
+</div>
+&nbsp;
+<p>
+<ul>
+<li>add_olsr_con()
+: <a class="el" href="process_8c.html#4c780ee64b12fa5531a56edfb5ffcc00">process.c</a><li>calc_olsr_node_mov()
+: <a class="el" href="main_8c.html#668e36a25680cc3e0ac4d85a418a838a">main.c</a><li>dirt()
+: <a class="el" href="main_8c.html#753e5e5d6fbcbd893bb466ce045a3316">main.c</a><li>dist()
+: <a class="el" href="main_8c.html#da3bfd6c7ec35068dbcdf966a4628f5e">main.c</a><li>get_olsr_node()
+: <a class="el" href="process_8c.html#7ba929b35f03f5921272b4e5e821ade2">process.c</a><li>handle_olsr_node()
+: <a class="el" href="main_8c.html#de55269b71a792259ef22763327686b9">main.c</a><li>keypress()
+: <a class="el" href="main_8c.html#2f5982986645c1e7a202d72bc5e633eb">main.c</a><li>lst_add()
+: <a class="el" href="process_8c.html#d01a29bcb2e2daed6fcc6516c328f141">process.c</a>, <a class="el" href="olsrs3d_8h.html#d01a29bcb2e2daed6fcc6516c328f141">olsrs3d.h</a><li>lst_del()
+: <a class="el" href="process_8c.html#febf2594bdfe9ec411d0c04c9cd951b3">process.c</a>, <a class="el" href="olsrs3d_8h.html#febf2594bdfe9ec411d0c04c9cd951b3">olsrs3d.h</a><li>lst_initialize()
+: <a class="el" href="process_8c.html#edfb2ae44af543946842187ced1cd47e">process.c</a>, <a class="el" href="olsrs3d_8h.html#edfb2ae44af543946842187ced1cd47e">olsrs3d.h</a><li>lst_out()
+: <a class="el" href="process_8c.html#a015f713ca02d8b76a52175b4128d3e8">process.c</a>, <a class="el" href="olsrs3d_8h.html#a015f713ca02d8b76a52175b4128d3e8">olsrs3d.h</a><li>lst_search()
+: <a class="el" href="process_8c.html#b74d5229fcc3a39626609ac9f12510dd">process.c</a>, <a class="el" href="olsrs3d_8h.html#ef8aff26d4e096ef0880c204c13309f0">olsrs3d.h</a><li>main()
+: <a class="el" href="main_8c.html#0ddf1224851353fc92bfbff6f499fa97">main.c</a><li>mainloop()
+: <a class="el" href="main_8c.html#896df4ffe3f986ad843e4d191cd712b3">main.c</a><li>mov_add()
+: <a class="el" href="main_8c.html#f4369a866dcd049e2642e137507e8ff1">main.c</a><li>move_lst_ptr()
+: <a class="el" href="process_8c.html#576c61914d53ad9035e74317dbb15903">process.c</a>, <a class="el" href="olsrs3d_8h.html#576c61914d53ad9035e74317dbb15903">olsrs3d.h</a><li>move_olsr_nodes()
+: <a class="el" href="main_8c.html#b8d0d8cf5ac8914802be645e15241b77">main.c</a><li>net_init()
+: <a class="el" href="olsrs3d_8h.html#63c933342efd8cac7f272b92d8acab05">olsrs3d.h</a>, <a class="el" href="net_8c.html#63c933342efd8cac7f272b92d8acab05">net.c</a><li>net_main()
+: <a class="el" href="olsrs3d_8h.html#b8a768eba717722a3d860c01f69fbbc9">olsrs3d.h</a>, <a class="el" href="net_8c.html#b8a768eba717722a3d860c01f69fbbc9">net.c</a><li>net_quit()
+: <a class="el" href="olsrs3d_8h.html#98aebc7a8515c76551eb15ecd465b923">olsrs3d.h</a>, <a class="el" href="net_8c.html#98aebc7a8515c76551eb15ecd465b923">net.c</a><li>object_click()
+: <a class="el" href="main_8c.html#ddbd46dad32b89cec68daa03a08f3582">main.c</a><li>object_info()
+: <a class="el" href="main_8c.html#b7f2ab10a4f7d5ef94d5205fc6147cc4">main.c</a><li>out_of_mem()
+: <a class="el" href="olsrs3d_8h.html#be0835e7acb76ea987ac80769302d90a">olsrs3d.h</a>, <a class="el" href="main_8c.html#be0835e7acb76ea987ac80769302d90a">main.c</a><li>print_usage()
+: <a class="el" href="main_8c.html#a1187b70998f73cdb598833d6afaa30a">main.c</a><li>process_main()
+: <a class="el" href="process_8c.html#6b4e9b6718b671f6330c2e501c60d3c1">process.c</a>, <a class="el" href="olsrs3d_8h.html#6b4e9b6718b671f6330c2e501c60d3c1">olsrs3d.h</a><li>stop()
+: <a class="el" href="main_8c.html#8c528baf37154d347366083f0f816846">main.c</a></ul>
+<hr size="1"><address style="align: right;"><small>Generated on Sun Mar 19 13:28:20 2006 for olsrs3d by&nbsp;
+<a href="http://www.doxygen.org/index.html">
+<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6 </small></address>
+</body>
+</html>

Added: trunk/apps/olsrs3d/doxygen/html/globals_vars.html
===================================================================
--- trunk/apps/olsrs3d/doxygen/html/globals_vars.html	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/html/globals_vars.html	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,104 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
+<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
+<title>olsrs3d: Class Members</title>
+<link href="doxygen.css" rel="stylesheet" type="text/css">
+<link href="tabs.css" rel="stylesheet" type="text/css">
+</head><body>
+<!-- Generated by Doxygen 1.4.6 -->
+<div class="tabs">
+  <ul>
+    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
+    <li><a href="classes.html"><span>Classes</span></a></li>
+    <li id="current"><a href="files.html"><span>Files</span></a></li>
+    <li><a href="dirs.html"><span>Directories</span></a></li>
+  </ul></div>
+<div class="tabs">
+  <ul>
+    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
+    <li id="current"><a href="globals.html"><span>File&nbsp;Members</span></a></li>
+  </ul></div>
+<div class="tabs">
+  <ul>
+    <li><a href="globals.html"><span>All</span></a></li>
+    <li><a href="globals_func.html"><span>Functions</span></a></li>
+    <li id="current"><a href="globals_vars.html"><span>Variables</span></a></li>
+    <li><a href="globals_defs.html"><span>Defines</span></a></li>
+  </ul>
+</div>
+<div class="tabs">
+  <ul>
+    <li><a href="#index_a"><span>a</span></a></li>
+    <li><a href="#index_b"><span>b</span></a></li>
+    <li><a href="#index_c"><span>c</span></a></li>
+    <li><a href="#index_d"><span>d</span></a></li>
+    <li><a href="#index_f"><span>f</span></a></li>
+    <li><a href="#index_l"><span>l</span></a></li>
+    <li><a href="#index_n"><span>n</span></a></li>
+    <li><a href="#index_o"><span>o</span></a></li>
+    <li><a href="#index_r"><span>r</span></a></li>
+    <li><a href="#index_s"><span>s</span></a></li>
+    <li><a href="#index_z"><span>z</span></a></li>
+  </ul>
+</div>
+
+<p>
+&nbsp;
+<p>
+<h3><a class="anchor" name="index_a">- a -</a></h3><ul>
+<li>Asp
+: <a class="el" href="main_8c.html#fb33da16fedfac392508c8ca439aca5d">main.c</a></ul>
+<h3><a class="anchor" name="index_b">- b -</a></h3><ul>
+<li>Bottom
+: <a class="el" href="olsrs3d_8h.html#f23a6ad2da4511ef430c4f522ae9f4cc">olsrs3d.h</a>, <a class="el" href="main_8c.html#f23a6ad2da4511ef430c4f522ae9f4cc">main.c</a><li>buf
+: <a class="el" href="net_8c.html#f39ed2161fb25f51aa61ffc038306f75">net.c</a></ul>
+<h3><a class="anchor" name="index_c">- c -</a></h3><ul>
+<li>CamPosition
+: <a class="el" href="main_8c.html#5d58294b80563f797d1a14d1d739f52b">main.c</a><li>ColorSwitch
+: <a class="el" href="main_8c.html#aaca6648d8e9266d2fbeb21a6a4f4745">main.c</a><li>Con_begin
+: <a class="el" href="olsrs3d_8h.html#0643a36891539929d987e2ee83ff81d1">olsrs3d.h</a>, <a class="el" href="main_8c.html#0643a36891539929d987e2ee83ff81d1">main.c</a></ul>
+<h3><a class="anchor" name="index_d">- d -</a></h3><ul>
+<li>Debug
+: <a class="el" href="olsrs3d_8h.html#923774364cedbc16baa0bc05e9be136c">olsrs3d.h</a>, <a class="el" href="main_8c.html#923774364cedbc16baa0bc05e9be136c">main.c</a></ul>
+<h3><a class="anchor" name="index_f">- f -</a></h3><ul>
+<li>Factor
+: <a class="el" href="main_8c.html#98d8a7901c60f18d6bf9b35998147831">main.c</a></ul>
+<h3><a class="anchor" name="index_l">- l -</a></h3><ul>
+<li>Last_olsr_node_count
+: <a class="el" href="olsrs3d_8h.html#58acad60c78b63554c696703227d0b7b">olsrs3d.h</a>, <a class="el" href="main_8c.html#58acad60c78b63554c696703227d0b7b">main.c</a><li>lbuf
+: <a class="el" href="process_8c.html#00f1cd38b187535569d0354f2506fb74">process.c</a>, <a class="el" href="olsrs3d_8h.html#00f1cd38b187535569d0354f2506fb74">olsrs3d.h</a><li>Left
+: <a class="el" href="olsrs3d_8h.html#6f68bad9075598ca8ede1827c6832376">olsrs3d.h</a>, <a class="el" href="main_8c.html#6f68bad9075598ca8ede1827c6832376">main.c</a><li>List_ptr
+: <a class="el" href="olsrs3d_8h.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">olsrs3d.h</a>, <a class="el" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">main.c</a></ul>
+<h3><a class="anchor" name="index_n">- n -</a></h3><ul>
+<li>Net_read_count
+: <a class="el" href="olsrs3d_8h.html#5bcc20f84efa7bd4aafc56a629f2eff3">olsrs3d.h</a>, <a class="el" href="main_8c.html#5bcc20f84efa7bd4aafc56a629f2eff3">main.c</a><li>numbytes
+: <a class="el" href="net_8c.html#24bdd92b6cf8d141a4a27d4882c6a905">net.c</a></ul>
+<h3><a class="anchor" name="index_o">- o -</a></h3><ul>
+<li>Obj_to_ip_end
+: <a class="el" href="olsrs3d_8h.html#236217b97f5fe65457d8b22c73c5073d">olsrs3d.h</a>, <a class="el" href="main_8c.html#236217b97f5fe65457d8b22c73c5073d">main.c</a><li>Obj_to_ip_head
+: <a class="el" href="olsrs3d_8h.html#9494e9e8cbdc4eceb86cb33ff0006785">olsrs3d.h</a>, <a class="el" href="main_8c.html#9494e9e8cbdc4eceb86cb33ff0006785">main.c</a><li>Olsr_host
+: <a class="el" href="main_8c.html#9034a20840ce47fbec531d2b4a4a9f21">main.c</a><li>Olsr_ip_label_obj
+: <a class="el" href="main_8c.html#bc4292eef79532d125b616a9e0ec8fa0">main.c</a><li>Olsr_node_count
+: <a class="el" href="olsrs3d_8h.html#86c048bc4aaab319f4d61f7c0e1f056f">olsrs3d.h</a>, <a class="el" href="main_8c.html#86c048bc4aaab319f4d61f7c0e1f056f">main.c</a><li>Olsr_node_count_obj
+: <a class="el" href="olsrs3d_8h.html#4dfd0657ff868fa02113bcd3335acff1">olsrs3d.h</a>, <a class="el" href="main_8c.html#4dfd0657ff868fa02113bcd3335acff1">main.c</a><li>Olsr_node_hna_net
+: <a class="el" href="olsrs3d_8h.html#c03c9b38147e4231238c44f4b5fbdff7">olsrs3d.h</a>, <a class="el" href="main_8c.html#c03c9b38147e4231238c44f4b5fbdff7">main.c</a><li>Olsr_node_inet_obj
+: <a class="el" href="olsrs3d_8h.html#b02228665cef19331d409b0d8a831531">olsrs3d.h</a>, <a class="el" href="main_8c.html#b02228665cef19331d409b0d8a831531">main.c</a><li>Olsr_node_obj
+: <a class="el" href="olsrs3d_8h.html#5eba8148fe9257c34665ed364b595fdb">olsrs3d.h</a>, <a class="el" href="main_8c.html#5eba8148fe9257c34665ed364b595fdb">main.c</a><li>Olsr_root
+: <a class="el" href="olsrs3d_8h.html#c5c5c6846587092d0c23b58b558e680c">olsrs3d.h</a>, <a class="el" href="main_8c.html#c5c5c6846587092d0c23b58b558e680c">main.c</a></ul>
+<h3><a class="anchor" name="index_r">- r -</a></h3><ul>
+<li>RotateSpeed
+: <a class="el" href="main_8c.html#cfe4f8990043eade6e82cab3f101b12e">main.c</a><li>RotateSwitch
+: <a class="el" href="main_8c.html#4370348160930ca94ac7a5d1a6fc5172">main.c</a></ul>
+<h3><a class="anchor" name="index_s">- s -</a></h3><ul>
+<li>sleep_time
+: <a class="el" href="main_8c.html#ea8eb9210d53cd6c1b34e6e7f80a243c">main.c</a><li>sockfd
+: <a class="el" href="net_8c.html#d2c8fb3df3a737e0685e902870a611d2">net.c</a></ul>
+<h3><a class="anchor" name="index_z">- z -</a></h3><ul>
+<li>ZeroPoint
+: <a class="el" href="olsrs3d_8h.html#e113d40abb6f4dd73e4b1253917a1942">olsrs3d.h</a>, <a class="el" href="main_8c.html#e113d40abb6f4dd73e4b1253917a1942">main.c</a><li>ZeroPosition
+: <a class="el" href="main_8c.html#4942e67624e2b40a2a949f5cc658ccce">main.c</a><li>Zp_rotate
+: <a class="el" href="main_8c.html#ea9e1c287e0c505c2075a0b936dc3404">main.c</a></ul>
+<hr size="1"><address style="align: right;"><small>Generated on Sun Mar 19 13:28:20 2006 for olsrs3d by&nbsp;
+<a href="http://www.doxygen.org/index.html">
+<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6 </small></address>
+</body>
+</html>

Added: trunk/apps/olsrs3d/doxygen/html/hierarchy.html
===================================================================
--- trunk/apps/olsrs3d/doxygen/html/hierarchy.html	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/html/hierarchy.html	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,32 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
+<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
+<title>olsrs3d: Hierarchical Index</title>
+<link href="doxygen.css" rel="stylesheet" type="text/css">
+<link href="tabs.css" rel="stylesheet" type="text/css">
+</head><body>
+<!-- Generated by Doxygen 1.4.6 -->
+<div class="tabs">
+  <ul>
+    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
+    <li id="current"><a href="classes.html"><span>Classes</span></a></li>
+    <li><a href="files.html"><span>Files</span></a></li>
+    <li><a href="dirs.html"><span>Directories</span></a></li>
+  </ul></div>
+<div class="tabs">
+  <ul>
+    <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
+    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
+    <li id="current"><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
+    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
+  </ul></div>
+<h1>olsrs3d Class Hierarchy</h1>This inheritance list is sorted roughly, but not completely, alphabetically:<ul>
+<li><a class="el" href="structObj__to__ip.html">Obj_to_ip</a>
+<li><a class="el" href="structolsr__con.html">olsr_con</a>
+<li><a class="el" href="structolsr__neigh__list.html">olsr_neigh_list</a>
+<li><a class="el" href="structolsr__node.html">olsr_node</a>
+</ul>
+<hr size="1"><address style="align: right;"><small>Generated on Sun Mar 19 13:28:20 2006 for olsrs3d by&nbsp;
+<a href="http://www.doxygen.org/index.html">
+<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6 </small></address>
+</body>
+</html>

Added: trunk/apps/olsrs3d/doxygen/html/index.html
===================================================================
--- trunk/apps/olsrs3d/doxygen/html/index.html	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/html/index.html	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,21 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
+<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
+<title>olsrs3d: Main Page</title>
+<link href="doxygen.css" rel="stylesheet" type="text/css">
+<link href="tabs.css" rel="stylesheet" type="text/css">
+</head><body>
+<!-- Generated by Doxygen 1.4.6 -->
+<div class="tabs">
+  <ul>
+    <li id="current"><a href="index.html"><span>Main&nbsp;Page</span></a></li>
+    <li><a href="classes.html"><span>Classes</span></a></li>
+    <li><a href="files.html"><span>Files</span></a></li>
+    <li><a href="dirs.html"><span>Directories</span></a></li>
+  </ul></div>
+<h1>olsrs3d Documentation</h1>
+<p>
+<h3 align="center">0.1 </h3><hr size="1"><address style="align: right;"><small>Generated on Sun Mar 19 13:28:20 2006 for olsrs3d by&nbsp;
+<a href="http://www.doxygen.org/index.html">
+<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6 </small></address>
+</body>
+</html>

Added: trunk/apps/olsrs3d/doxygen/html/main_8c-source.html
===================================================================
--- trunk/apps/olsrs3d/doxygen/html/main_8c-source.html	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/html/main_8c-source.html	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,894 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
+<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
+<title>olsrs3d: s3d/apps/olsrs3d/main.c Source File</title>
+<link href="doxygen.css" rel="stylesheet" type="text/css">
+<link href="tabs.css" rel="stylesheet" type="text/css">
+</head><body>
+<!-- Generated by Doxygen 1.4.6 -->
+<div class="tabs">
+  <ul>
+    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
+    <li><a href="classes.html"><span>Classes</span></a></li>
+    <li id="current"><a href="files.html"><span>Files</span></a></li>
+    <li><a href="dirs.html"><span>Directories</span></a></li>
+  </ul></div>
+<div class="tabs">
+  <ul>
+    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
+    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
+  </ul></div>
+<div class="nav">
+<a class="el" href="dir_9d2efe7c7f87ee6309da929964f0685b.html">s3d</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_5d167550802dbd943c0631943f884f5b.html">apps</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_bf110b9fd34b0903efb6170e1cee5506.html">olsrs3d</a></div>
+<h1>main.c</h1><a href="main_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
+<a name="l00002"></a>00002 <span class="comment"> * main.c</span>
+<a name="l00003"></a>00003 <span class="comment"> *</span>
+<a name="l00004"></a>00004 <span class="comment"> * Copyright (C) 2004-2006 Simon Wunderlich &lt;dotslash at packetmixer.de&gt;</span>
+<a name="l00005"></a>00005 <span class="comment"> *                         Marek Lindner &lt;lindner_marek at yahoo.de&gt;</span>
+<a name="l00006"></a>00006 <span class="comment"> *                         Andreas Langer &lt;andreas_lbg at gmx.de&gt;</span>
+<a name="l00007"></a>00007 <span class="comment"> *</span>
+<a name="l00008"></a>00008 <span class="comment"> * This file is part of olsrs3d, an olsr topology visualizer for s3d.</span>
+<a name="l00009"></a>00009 <span class="comment"> * See http://s3d.berlios.de/ for more updates.</span>
+<a name="l00010"></a>00010 <span class="comment"> *</span>
+<a name="l00011"></a>00011 <span class="comment"> * olsrs3d is free software; you can redistribute it and/or modify</span>
+<a name="l00012"></a>00012 <span class="comment"> * it under the terms of the GNU General Public License as published by</span>
+<a name="l00013"></a>00013 <span class="comment"> * the Free Software Foundation; either version 2 of the License, or</span>
+<a name="l00014"></a>00014 <span class="comment"> * (at your option) any later version.</span>
+<a name="l00015"></a>00015 <span class="comment"> *</span>
+<a name="l00016"></a>00016 <span class="comment"> * olsrs3d is distributed in the hope that it will be useful,</span>
+<a name="l00017"></a>00017 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
+<a name="l00018"></a>00018 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
+<a name="l00019"></a>00019 <span class="comment"> * GNU General Public License for more details.</span>
+<a name="l00020"></a>00020 <span class="comment"> *</span>
+<a name="l00021"></a>00021 <span class="comment"> * You should have received a copy of the GNU General Public License</span>
+<a name="l00022"></a>00022 <span class="comment"> * along with s3d; if not, write to the Free Software</span>
+<a name="l00023"></a>00023 <span class="comment"> * Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA</span>
+<a name="l00024"></a>00024 <span class="comment"> */</span>
+<a name="l00025"></a>00025 
+<a name="l00026"></a>00026 
+<a name="l00027"></a>00027 
+<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
+<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;s3d.h&gt;</span>
+<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;s3d_keysym.h&gt;</span>
+<a name="l00031"></a>00031 <span class="preprocessor">#include &lt;time.h&gt;</span>             <span class="comment">/* nanosleep() */</span>
+<a name="l00032"></a>00032 <span class="preprocessor">#include &lt;string.h&gt;</span>     <span class="comment">/* strncpy() */</span>
+<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;math.h&gt;</span>               <span class="comment">/* sqrt() */</span>
+<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;getopt.h&gt;</span>     <span class="comment">/* getopt() */</span>
+<a name="l00035"></a>00035 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>     <span class="comment">/* exit() */</span>
+<a name="l00036"></a>00036 <span class="preprocessor">#include "<a class="code" href="olsrs3d_8h.html">olsrs3d.h</a>"</span>
+<a name="l00037"></a><a class="code" href="main_8c.html#ac3553b3932cbfeeac4526ce7ca0336b">00037</a> <span class="preprocessor">#define SPEED           10.0</span>
+<a name="l00038"></a>00038 <span class="preprocessor"></span>
+<a name="l00039"></a><a class="code" href="main_8c.html#ea8eb9210d53cd6c1b34e6e7f80a243c">00039</a> <span class="keyword">static</span> <span class="keyword">struct </span>timespec <a class="code" href="main_8c.html#ea8eb9210d53cd6c1b34e6e7f80a243c">sleep_time</a> = { 0, 100 * 1000 * 1000 };   <span class="comment">/* 100 mili seconds */</span>
+<a name="l00040"></a>00040 
+<a name="l00041"></a><a class="code" href="olsrs3d_8h.html#923774364cedbc16baa0bc05e9be136c">00041</a> <span class="keywordtype">int</span> <a class="code" href="main_8c.html#923774364cedbc16baa0bc05e9be136c">Debug</a> = 0;
+<a name="l00042"></a>00042 
+<a name="l00043"></a><a class="code" href="main_8c.html#9034a20840ce47fbec531d2b4a4a9f21">00043</a> <span class="keywordtype">char</span> <a class="code" href="main_8c.html#9034a20840ce47fbec531d2b4a4a9f21">Olsr_host</a>[256];   <span class="comment">/* ip or hostname of olsr node with running dot_draw plugin */</span>
+<a name="l00044"></a>00044 
+<a name="l00045"></a><a class="code" href="olsrs3d_8h.html#0643a36891539929d987e2ee83ff81d1">00045</a> <span class="keyword">struct </span><a class="code" href="structolsr__con.html">olsr_con</a> *<a class="code" href="main_8c.html#0643a36891539929d987e2ee83ff81d1">Con_begin</a> = NULL;   <span class="comment">/* begin of connection list */</span>
+<a name="l00046"></a><a class="code" href="olsrs3d_8h.html#c5c5c6846587092d0c23b58b558e680c">00046</a> <span class="keyword">struct </span><a class="code" href="structolsr__node.html">olsr_node</a> *<a class="code" href="main_8c.html#c5c5c6846587092d0c23b58b558e680c">Olsr_root</a> = NULL;   <span class="comment">/* top of olsr node tree */</span>
+<a name="l00047"></a><a class="code" href="olsrs3d_8h.html#9494e9e8cbdc4eceb86cb33ff0006785">00047</a> <span class="keyword">struct </span><a class="code" href="structObj__to__ip.html">Obj_to_ip</a> *<a class="code" href="main_8c.html#9494e9e8cbdc4eceb86cb33ff0006785">Obj_to_ip_head</a>, *<a class="code" href="main_8c.html#236217b97f5fe65457d8b22c73c5073d">Obj_to_ip_end</a>, *<a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>;   <span class="comment">/* needed pointer for linked list */</span>
+<a name="l00048"></a>00048 
+<a name="l00049"></a><a class="code" href="olsrs3d_8h.html#86c048bc4aaab319f4d61f7c0e1f056f">00049</a> <span class="keywordtype">int</span> <a class="code" href="main_8c.html#86c048bc4aaab319f4d61f7c0e1f056f">Olsr_node_count</a> = 0, <a class="code" href="main_8c.html#58acad60c78b63554c696703227d0b7b">Last_olsr_node_count</a> = -1;
+<a name="l00050"></a><a class="code" href="olsrs3d_8h.html#4dfd0657ff868fa02113bcd3335acff1">00050</a> <span class="keywordtype">int</span> <a class="code" href="main_8c.html#4dfd0657ff868fa02113bcd3335acff1">Olsr_node_count_obj</a> = -1;
+<a name="l00051"></a><a class="code" href="main_8c.html#bc4292eef79532d125b616a9e0ec8fa0">00051</a> <span class="keywordtype">int</span> <a class="code" href="main_8c.html#bc4292eef79532d125b616a9e0ec8fa0">Olsr_ip_label_obj</a> = -1;
+<a name="l00052"></a><a class="code" href="olsrs3d_8h.html#5bcc20f84efa7bd4aafc56a629f2eff3">00052</a> <span class="keywordtype">int</span> <a class="code" href="main_8c.html#5bcc20f84efa7bd4aafc56a629f2eff3">Net_read_count</a>;
+<a name="l00053"></a>00053 
+<a name="l00054"></a><a class="code" href="olsrs3d_8h.html#5eba8148fe9257c34665ed364b595fdb">00054</a> <span class="keywordtype">int</span> <a class="code" href="main_8c.html#5eba8148fe9257c34665ed364b595fdb">Olsr_node_obj</a>, <a class="code" href="main_8c.html#b02228665cef19331d409b0d8a831531">Olsr_node_inet_obj</a>, <a class="code" href="main_8c.html#c03c9b38147e4231238c44f4b5fbdff7">Olsr_node_hna_net</a>;
+<a name="l00055"></a>00055 
+<a name="l00056"></a><a class="code" href="main_8c.html#fb33da16fedfac392508c8ca439aca5d">00056</a> <span class="keywordtype">float</span> <a class="code" href="main_8c.html#fb33da16fedfac392508c8ca439aca5d">Asp</a> = 1.0;
+<a name="l00057"></a><a class="code" href="olsrs3d_8h.html#f23a6ad2da4511ef430c4f522ae9f4cc">00057</a> <span class="keywordtype">float</span> <a class="code" href="main_8c.html#f23a6ad2da4511ef430c4f522ae9f4cc">Bottom</a> = -1.0;
+<a name="l00058"></a><a class="code" href="olsrs3d_8h.html#6f68bad9075598ca8ede1827c6832376">00058</a> <span class="keywordtype">float</span> <a class="code" href="main_8c.html#6f68bad9075598ca8ede1827c6832376">Left</a> = -1.0;
+<a name="l00059"></a>00059 
+<a name="l00060"></a><a class="code" href="main_8c.html#5d58294b80563f797d1a14d1d739f52b">00060</a> <span class="keywordtype">float</span> <a class="code" href="main_8c.html#5d58294b80563f797d1a14d1d739f52b">CamPosition</a>[2][3];   <span class="comment">/* CamPosition[trans|rot][x-z] */</span>
+<a name="l00061"></a><a class="code" href="main_8c.html#4942e67624e2b40a2a949f5cc658ccce">00061</a> <span class="keywordtype">float</span> <a class="code" href="main_8c.html#4942e67624e2b40a2a949f5cc658ccce">ZeroPosition</a>[3] = {0,0,0};   <span class="comment">/* current position zero position */</span>
+<a name="l00062"></a><a class="code" href="olsrs3d_8h.html#e113d40abb6f4dd73e4b1253917a1942">00062</a> <span class="keywordtype">int</span> <a class="code" href="main_8c.html#e113d40abb6f4dd73e4b1253917a1942">ZeroPoint</a>;   <span class="comment">/* object zeropoint */</span>
+<a name="l00063"></a><a class="code" href="main_8c.html#ea9e1c287e0c505c2075a0b936dc3404">00063</a> <span class="keywordtype">int</span> <a class="code" href="main_8c.html#ea9e1c287e0c505c2075a0b936dc3404">Zp_rotate</a> = 0;
+<a name="l00064"></a><a class="code" href="main_8c.html#aaca6648d8e9266d2fbeb21a6a4f4745">00064</a> <span class="keywordtype">int</span> <a class="code" href="main_8c.html#aaca6648d8e9266d2fbeb21a6a4f4745">ColorSwitch</a> = 0;   <span class="comment">/* enable/disable colored olsr connections */</span>
+<a name="l00065"></a><a class="code" href="main_8c.html#4370348160930ca94ac7a5d1a6fc5172">00065</a> <span class="keywordtype">int</span> <a class="code" href="main_8c.html#4370348160930ca94ac7a5d1a6fc5172">RotateSwitch</a> = 0;
+<a name="l00066"></a><a class="code" href="main_8c.html#cfe4f8990043eade6e82cab3f101b12e">00066</a> <span class="keywordtype">int</span> <a class="code" href="main_8c.html#cfe4f8990043eade6e82cab3f101b12e">RotateSpeed</a> = 2;
+<a name="l00067"></a><a class="code" href="main_8c.html#98d8a7901c60f18d6bf9b35998147831">00067</a> <span class="keywordtype">float</span> <a class="code" href="main_8c.html#98d8a7901c60f18d6bf9b35998147831">Factor</a> = 0.5;     <span class="comment">/* Factor in calc_olsr_node_mov */</span>
+<a name="l00068"></a>00068 
+<a name="l00069"></a>00069 <span class="comment">/***</span>
+<a name="l00070"></a>00070 <span class="comment"> *</span>
+<a name="l00071"></a>00071 <span class="comment"> * print usage info</span>
+<a name="l00072"></a>00072 <span class="comment"> *</span>
+<a name="l00073"></a>00073 <span class="comment"> ***/</span>
+<a name="l00074"></a>00074 
+<a name="l00075"></a><a class="code" href="main_8c.html#a1187b70998f73cdb598833d6afaa30a">00075</a> <span class="keywordtype">void</span> <a class="code" href="main_8c.html#a1187b70998f73cdb598833d6afaa30a">print_usage</a>( <span class="keywordtype">void</span> ) {
+<a name="l00076"></a>00076 
+<a name="l00077"></a>00077         printf( <span class="stringliteral">"Usage is olsrs3d [options] [-- [s3d options]]\n"</span> );
+<a name="l00078"></a>00078         printf( <span class="stringliteral">"olsrs3d options:\n"</span> );
+<a name="l00079"></a>00079         printf( <span class="stringliteral">"   -h\tprint this short help\n"</span> );
+<a name="l00080"></a>00080         printf( <span class="stringliteral">"   -d\tenable debug mode\n"</span> );
+<a name="l00081"></a>00081         printf( <span class="stringliteral">"   -H\tconnect to olsr node [default: localhost]\n"</span> );
+<a name="l00082"></a>00082         s3d_usage();
+<a name="l00083"></a>00083 
+<a name="l00084"></a>00084 }
+<a name="l00085"></a>00085 
+<a name="l00086"></a>00086 
+<a name="l00087"></a>00087 
+<a name="l00088"></a>00088 <span class="comment">/***</span>
+<a name="l00089"></a>00089 <span class="comment"> *</span>
+<a name="l00090"></a>00090 <span class="comment"> * print error and exit</span>
+<a name="l00091"></a>00091 <span class="comment"> *</span>
+<a name="l00092"></a>00092 <span class="comment"> ***/</span>
+<a name="l00093"></a>00093 
+<a name="l00094"></a><a class="code" href="olsrs3d_8h.html#be0835e7acb76ea987ac80769302d90a">00094</a> <span class="keywordtype">void</span> <a class="code" href="main_8c.html#be0835e7acb76ea987ac80769302d90a">out_of_mem</a>( <span class="keywordtype">void</span> ) {
+<a name="l00095"></a>00095 
+<a name="l00096"></a>00096         printf( <span class="stringliteral">"Sorry - you ran out of memory !\n"</span> );
+<a name="l00097"></a>00097         exit(8);
+<a name="l00098"></a>00098 
+<a name="l00099"></a>00099 }
+<a name="l00100"></a>00100 
+<a name="l00101"></a>00101 
+<a name="l00102"></a>00102 
+<a name="l00103"></a>00103 <span class="comment">/***</span>
+<a name="l00104"></a>00104 <span class="comment"> *</span>
+<a name="l00105"></a>00105 <span class="comment"> * calculate distance between 2 vectors =&gt; http://en.wikipedia.org/wiki/Euclidean_distance</span>
+<a name="l00106"></a>00106 <span class="comment"> *</span>
+<a name="l00107"></a>00107 <span class="comment"> *   p1   =&gt;   vector of node 1</span>
+<a name="l00108"></a>00108 <span class="comment"> *   p2   =&gt;   vector of node 2</span>
+<a name="l00109"></a>00109 <span class="comment"> *</span>
+<a name="l00110"></a>00110 <span class="comment"> *   return distance</span>
+<a name="l00111"></a>00111 <span class="comment"> *</span>
+<a name="l00112"></a>00112 <span class="comment"> ***/</span>
+<a name="l00113"></a>00113 
+<a name="l00114"></a><a class="code" href="main_8c.html#da3bfd6c7ec35068dbcdf966a4628f5e">00114</a> <span class="keywordtype">float</span> <a class="code" href="main_8c.html#da3bfd6c7ec35068dbcdf966a4628f5e">dist</a>(<span class="keywordtype">float</span> p1[], <span class="keywordtype">float</span> p2[])
+<a name="l00115"></a>00115 {
+<a name="l00116"></a>00116         <span class="keywordtype">float</span> p[3];
+<a name="l00117"></a>00117         p[0]=p1[0]-p2[0];
+<a name="l00118"></a>00118         p[1]=p1[1]-p2[1];
+<a name="l00119"></a>00119         p[2]=p1[2]-p2[2];
+<a name="l00120"></a>00120         <span class="keywordflow">return</span> (sqrt(p[0]*p[0]   +  p[1]*p[1]  +  p[2]*p[2]));
+<a name="l00121"></a>00121 
+<a name="l00122"></a>00122 }
+<a name="l00123"></a>00123 
+<a name="l00124"></a>00124 
+<a name="l00125"></a>00125 
+<a name="l00126"></a>00126 <span class="comment">/***</span>
+<a name="l00127"></a>00127 <span class="comment"> *</span>
+<a name="l00128"></a>00128 <span class="comment"> * calculate distance between 2 vectors and substract vector1 from vector2</span>
+<a name="l00129"></a>00129 <span class="comment"> *  =&gt; http://en.wikipedia.org/wiki/Vector_%28spatial%29#Vector_addition_and_subtraction</span>
+<a name="l00130"></a>00130 <span class="comment"> *</span>
+<a name="l00131"></a>00131 <span class="comment"> *   p1   =&gt;   vector of node 1</span>
+<a name="l00132"></a>00132 <span class="comment"> *   p2   =&gt;   vector of node 2</span>
+<a name="l00133"></a>00133 <span class="comment"> *</span>
+<a name="l00134"></a>00134 <span class="comment"> *   return distance</span>
+<a name="l00135"></a>00135 <span class="comment"> *</span>
+<a name="l00136"></a>00136 <span class="comment"> ***/</span>
+<a name="l00137"></a>00137 
+<a name="l00138"></a><a class="code" href="main_8c.html#753e5e5d6fbcbd893bb466ce045a3316">00138</a> <span class="keywordtype">float</span> <a class="code" href="main_8c.html#753e5e5d6fbcbd893bb466ce045a3316">dirt</a>(<span class="keywordtype">float</span> p1[], <span class="keywordtype">float</span> p2[], <span class="keywordtype">float</span> p3[])
+<a name="l00139"></a>00139 {
+<a name="l00140"></a>00140         <span class="keywordtype">float</span> d;
+<a name="l00141"></a>00141         d=<a class="code" href="main_8c.html#da3bfd6c7ec35068dbcdf966a4628f5e">dist</a>(p1,p2);
+<a name="l00142"></a>00142         <span class="keywordflow">if</span> (d!=0.0)
+<a name="l00143"></a>00143         {
+<a name="l00144"></a>00144                 p3[0]=p2[0]-p1[0];
+<a name="l00145"></a>00145                 p3[1]=p2[1]-p1[1];
+<a name="l00146"></a>00146                 p3[2]=p2[2]-p1[2];
+<a name="l00147"></a>00147         } <span class="keywordflow">else</span> {
+<a name="l00148"></a>00148                 p3[0]=p2[0]=p1[0]=0.0;
+<a name="l00149"></a>00149         }
+<a name="l00150"></a>00150         <span class="keywordflow">return</span>(d);
+<a name="l00151"></a>00151 }
+<a name="l00152"></a>00152 
+<a name="l00153"></a>00153 
+<a name="l00154"></a>00154 
+<a name="l00155"></a>00155 <span class="comment">/***</span>
+<a name="l00156"></a>00156 <span class="comment"> *</span>
+<a name="l00157"></a>00157 <span class="comment"> * calculate new movement of node by adding the product of the factor and the vector to the movement vector</span>
+<a name="l00158"></a>00158 <span class="comment"> *  =&gt; http://en.wikipedia.org/wiki/Vector_%28spatial%29#Scalar_multiplication</span>
+<a name="l00159"></a>00159 <span class="comment"> *</span>
+<a name="l00160"></a>00160 <span class="comment"> *   mov  =&gt;   current mov vector</span>
+<a name="l00161"></a>00161 <span class="comment"> *   p    =&gt;   vector of node</span>
+<a name="l00162"></a>00162 <span class="comment"> *   fac  =&gt;   factor which is</span>
+<a name="l00163"></a>00163 <span class="comment"> *</span>
+<a name="l00164"></a>00164 <span class="comment"> ***/</span>
+<a name="l00165"></a>00165 
+<a name="l00166"></a><a class="code" href="main_8c.html#f4369a866dcd049e2642e137507e8ff1">00166</a> <span class="keywordtype">void</span> <a class="code" href="main_8c.html#f4369a866dcd049e2642e137507e8ff1">mov_add</a>(<span class="keywordtype">float</span> mov[], <span class="keywordtype">float</span> p[], <span class="keywordtype">float</span> fac)
+<a name="l00167"></a>00167 {
+<a name="l00168"></a>00168 <span class="comment">/*      if (fac&gt;1000)</span>
+<a name="l00169"></a>00169 <span class="comment">                return;</span>
+<a name="l00170"></a>00170 <span class="comment">        fac=1000; */</span>
+<a name="l00171"></a>00171         mov[0]+=fac*p[0];
+<a name="l00172"></a>00172         mov[1]+=fac*p[1];
+<a name="l00173"></a>00173         mov[2]+=fac*p[2];
+<a name="l00174"></a>00174 }
+<a name="l00175"></a>00175 
+<a name="l00176"></a>00176 
+<a name="l00177"></a>00177 
+<a name="l00178"></a>00178 <span class="comment">/***</span>
+<a name="l00179"></a>00179 <span class="comment"> *</span>
+<a name="l00180"></a>00180 <span class="comment"> * check whether is a new / modified / vanished node and handle it accordingly</span>
+<a name="l00181"></a>00181 <span class="comment"> *</span>
+<a name="l00182"></a>00182 <span class="comment"> *   *olsr_node =&gt;   pointer to current olsr_node</span>
+<a name="l00183"></a>00183 <span class="comment"> *</span>
+<a name="l00184"></a>00184 <span class="comment"> ***/</span>
+<a name="l00185"></a>00185 
+<a name="l00186"></a><a class="code" href="main_8c.html#de55269b71a792259ef22763327686b9">00186</a> <span class="keywordtype">void</span> <a class="code" href="main_8c.html#de55269b71a792259ef22763327686b9">handle_olsr_node</a>( <span class="keyword">struct</span> <a class="code" href="structolsr__node.html">olsr_node</a> *<a class="code" href="structolsr__node.html">olsr_node</a> ) {
+<a name="l00187"></a>00187 
+<a name="l00188"></a>00188         <span class="keywordtype">float</span> distance, angle, angle_rad;
+<a name="l00189"></a>00189         <span class="keywordtype">float</span> tmp_mov_vec[3], desc_norm_vec[3] = {0,0,-1};
+<a name="l00190"></a>00190         <span class="keyword">struct </span>olsr_node *other_node;
+<a name="l00191"></a>00191         <span class="keyword">struct </span><a class="code" href="structObj__to__ip.html">Obj_to_ip</a> *Obj_to_ip_curr;
+<a name="l00192"></a>00192         <span class="keyword">struct </span><a class="code" href="structolsr__neigh__list.html">olsr_neigh_list</a> *<a class="code" href="structolsr__neigh__list.html">olsr_neigh_list</a>, *prev_olsr_neigh_list, *other_node_neigh_list, *tmp_olsr_neigh_list;
+<a name="l00193"></a>00193 
+<a name="l00194"></a>00194         <span class="comment">/* no more nodes left */</span>
+<a name="l00195"></a>00195         <span class="keywordflow">if</span> ( olsr_node == NULL ) <span class="keywordflow">return</span>;
+<a name="l00196"></a>00196 
+<a name="l00197"></a>00197         <span class="comment">/* olsr node vanished */</span>
+<a name="l00198"></a>00198         <span class="keywordflow">if</span> ( olsr_node-&gt;<a class="code" href="structolsr__node.html#1d492aa6f4e75cc100d7a3e2f059d615">last_seen</a> &gt; 0 ) olsr_node-&gt;<a class="code" href="structolsr__node.html#1d492aa6f4e75cc100d7a3e2f059d615">last_seen</a>--;
+<a name="l00199"></a>00199 
+<a name="l00200"></a>00200         <span class="keywordflow">if</span> ( olsr_node-&gt;<a class="code" href="structolsr__node.html#1d492aa6f4e75cc100d7a3e2f059d615">last_seen</a> == 0 &amp;&amp; olsr_node-&gt;<a class="code" href="structolsr__node.html#f19d37e4aa5263be9a1741de24686664">visible</a> ) {
+<a name="l00201"></a>00201 
+<a name="l00202"></a>00202                 <span class="keywordflow">if</span> ( <a class="code" href="main_8c.html#923774364cedbc16baa0bc05e9be136c">Debug</a> ) printf( <span class="stringliteral">"olsr node vanished: %s\n"</span>, olsr_node-&gt;<a class="code" href="structolsr__node.html#59690d75faff5c149faecacb4f4d2a57">ip</a> );
+<a name="l00203"></a>00203 
+<a name="l00204"></a>00204                 <a class="code" href="main_8c.html#86c048bc4aaab319f4d61f7c0e1f056f">Olsr_node_count</a>--;
+<a name="l00205"></a>00205 
+<a name="l00206"></a>00206                 olsr_node-&gt;<a class="code" href="structolsr__node.html#f19d37e4aa5263be9a1741de24686664">visible</a> = 0;
+<a name="l00207"></a>00207 
+<a name="l00208"></a>00208                 <span class="comment">/* delete shape */</span>
+<a name="l00209"></a>00209                 <span class="keywordflow">if</span> ( olsr_node-&gt;<a class="code" href="structolsr__node.html#15be0912065801026e7b4411af561788">obj_id</a> != -1 ) {
+<a name="l00210"></a>00210 
+<a name="l00211"></a>00211                         <span class="comment">/* remove element from ob2ip list */</span>
+<a name="l00212"></a>00212                         <a class="code" href="olsrs3d_8h.html#febf2594bdfe9ec411d0c04c9cd951b3">lst_del</a>( olsr_node-&gt;<a class="code" href="structolsr__node.html#15be0912065801026e7b4411af561788">obj_id</a> );
+<a name="l00213"></a>00213                         <span class="comment">/* remove object from s3d server */</span>
+<a name="l00214"></a>00214                         s3d_del_object( olsr_node-&gt;<a class="code" href="structolsr__node.html#15be0912065801026e7b4411af561788">obj_id</a> );
+<a name="l00215"></a>00215 
+<a name="l00216"></a>00216                         olsr_node-&gt;<a class="code" href="structolsr__node.html#15be0912065801026e7b4411af561788">obj_id</a> = -1;
+<a name="l00217"></a>00217 
+<a name="l00218"></a>00218                 }
+<a name="l00219"></a>00219 
+<a name="l00220"></a>00220                 <span class="keywordflow">if</span> ( olsr_node-&gt;<a class="code" href="structolsr__node.html#f2e3f729be82b64001867038bbe8012a">desc_id</a> != -1 ) {
+<a name="l00221"></a>00221 
+<a name="l00222"></a>00222                         s3d_del_object( olsr_node-&gt;<a class="code" href="structolsr__node.html#f2e3f729be82b64001867038bbe8012a">desc_id</a> );
+<a name="l00223"></a>00223                         olsr_node-&gt;<a class="code" href="structolsr__node.html#f2e3f729be82b64001867038bbe8012a">desc_id</a> = -1;
+<a name="l00224"></a>00224 
+<a name="l00225"></a>00225                 }
+<a name="l00226"></a>00226 
+<a name="l00227"></a>00227                 <span class="comment">/* delete olsr connections of this node */</span>
+<a name="l00228"></a>00228                 olsr_neigh_list = olsr_node-&gt;<a class="code" href="structolsr__node.html#3b80ce78a06be6aba5a1f93887442764">olsr_neigh_list</a>;
+<a name="l00229"></a>00229 
+<a name="l00230"></a>00230                 <span class="keywordflow">while</span> ( olsr_neigh_list != NULL ) {
+<a name="l00231"></a>00231 
+<a name="l00232"></a>00232                         <span class="comment">/* get connection list of 'other' node */</span>
+<a name="l00233"></a>00233                         <span class="keywordflow">if</span> ( olsr_neigh_list-&gt;<a class="code" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">olsr_con</a>-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a> == olsr_node ) {
+<a name="l00234"></a>00234                                 other_node = olsr_neigh_list-&gt;<a class="code" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">olsr_con</a>-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>;
+<a name="l00235"></a>00235                         } <span class="keywordflow">else</span> {
+<a name="l00236"></a>00236                                 other_node = olsr_neigh_list-&gt;<a class="code" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">olsr_con</a>-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>;
+<a name="l00237"></a>00237                         }
+<a name="l00238"></a>00238 
+<a name="l00239"></a>00239                         <span class="comment">/* find this connection in 'other' nodes connection list ... */</span>
+<a name="l00240"></a>00240                         prev_olsr_neigh_list = NULL;
+<a name="l00241"></a>00241                         other_node_neigh_list = other_node-&gt;<a class="code" href="structolsr__node.html#3b80ce78a06be6aba5a1f93887442764">olsr_neigh_list</a>;
+<a name="l00242"></a>00242 
+<a name="l00243"></a>00243                         <span class="keywordflow">while</span> ( other_node_neigh_list != NULL ) {
+<a name="l00244"></a>00244 
+<a name="l00245"></a>00245                                 <span class="keywordflow">if</span> ( other_node_neigh_list-&gt;<a class="code" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">olsr_con</a> == olsr_neigh_list-&gt;<a class="code" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">olsr_con</a> ) {
+<a name="l00246"></a>00246 
+<a name="l00247"></a>00247                                         <span class="comment">/* and delete it ! */</span>
+<a name="l00248"></a>00248                                         <span class="keywordflow">if</span> ( prev_olsr_neigh_list != NULL ) {
+<a name="l00249"></a>00249                                                 <span class="comment">/* is first, any or last element in the list */</span>
+<a name="l00250"></a>00250                                                 prev_olsr_neigh_list-&gt;<a class="code" href="structolsr__neigh__list.html#f1d533fde49e1ed2ea5299661f5c10c6">next_olsr_neigh_list</a> = other_node_neigh_list-&gt;<a class="code" href="structolsr__neigh__list.html#f1d533fde49e1ed2ea5299661f5c10c6">next_olsr_neigh_list</a>;
+<a name="l00251"></a>00251                                         } <span class="keywordflow">else</span> {
+<a name="l00252"></a>00252                                                 <span class="comment">/* the only element in the list */</span>
+<a name="l00253"></a>00253                                                 other_node-&gt;<a class="code" href="structolsr__node.html#3b80ce78a06be6aba5a1f93887442764">olsr_neigh_list</a> = NULL;
+<a name="l00254"></a>00254                                         }
+<a name="l00255"></a>00255 
+<a name="l00256"></a>00256                                         free( other_node_neigh_list );
+<a name="l00257"></a>00257 
+<a name="l00258"></a>00258                                         <span class="keywordflow">break</span>;
+<a name="l00259"></a>00259 
+<a name="l00260"></a>00260                                 }
+<a name="l00261"></a>00261 
+<a name="l00262"></a>00262                                 prev_olsr_neigh_list = other_node_neigh_list;
+<a name="l00263"></a>00263                                 other_node_neigh_list = other_node_neigh_list-&gt;<a class="code" href="structolsr__neigh__list.html#f1d533fde49e1ed2ea5299661f5c10c6">next_olsr_neigh_list</a>;
+<a name="l00264"></a>00264 
+<a name="l00265"></a>00265                         }
+<a name="l00266"></a>00266 
+<a name="l00267"></a>00267                         s3d_del_object( olsr_neigh_list-&gt;<a class="code" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">olsr_con</a>-&gt;<a class="code" href="structolsr__con.html#fe985b6b83425cb17e801ac00001175e">obj_id</a> );
+<a name="l00268"></a>00268 
+<a name="l00269"></a>00269                         <span class="comment">/* delete connection */</span>
+<a name="l00270"></a>00270                         <span class="keywordflow">if</span> ( olsr_neigh_list-&gt;<a class="code" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">olsr_con</a>-&gt;<a class="code" href="structolsr__con.html#0382eebfbf31d5f217572d4907c503cb">prev_olsr_con</a> != NULL ) olsr_neigh_list-&gt;<a class="code" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">olsr_con</a>-&gt;<a class="code" href="structolsr__con.html#0382eebfbf31d5f217572d4907c503cb">prev_olsr_con</a>-&gt;<a class="code" href="structolsr__con.html#369dfd6eec077d0a6228cd1387135e6e">next_olsr_con</a> = olsr_neigh_list-&gt;<a class="code" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">olsr_con</a>-&gt;<a class="code" href="structolsr__con.html#369dfd6eec077d0a6228cd1387135e6e">next_olsr_con</a>;
+<a name="l00271"></a>00271                         <span class="keywordflow">if</span> ( olsr_neigh_list-&gt;<a class="code" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">olsr_con</a>-&gt;<a class="code" href="structolsr__con.html#369dfd6eec077d0a6228cd1387135e6e">next_olsr_con</a> != NULL ) olsr_neigh_list-&gt;<a class="code" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">olsr_con</a>-&gt;<a class="code" href="structolsr__con.html#369dfd6eec077d0a6228cd1387135e6e">next_olsr_con</a>-&gt;<a class="code" href="structolsr__con.html#0382eebfbf31d5f217572d4907c503cb">prev_olsr_con</a> = olsr_neigh_list-&gt;<a class="code" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">olsr_con</a>-&gt;<a class="code" href="structolsr__con.html#0382eebfbf31d5f217572d4907c503cb">prev_olsr_con</a>;
+<a name="l00272"></a>00272 
+<a name="l00273"></a>00273                         tmp_olsr_neigh_list = olsr_neigh_list;
+<a name="l00274"></a>00274 
+<a name="l00275"></a>00275                         olsr_neigh_list = olsr_neigh_list-&gt;<a class="code" href="structolsr__neigh__list.html#f1d533fde49e1ed2ea5299661f5c10c6">next_olsr_neigh_list</a>;
+<a name="l00276"></a>00276 
+<a name="l00277"></a>00277                         free( tmp_olsr_neigh_list-&gt;<a class="code" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">olsr_con</a> );
+<a name="l00278"></a>00278                         free( tmp_olsr_neigh_list );
+<a name="l00279"></a>00279 
+<a name="l00280"></a>00280                 }
+<a name="l00281"></a>00281 
+<a name="l00282"></a>00282                 olsr_node-&gt;<a class="code" href="structolsr__node.html#3b80ce78a06be6aba5a1f93887442764">olsr_neigh_list</a> = NULL;
+<a name="l00283"></a>00283 
+<a name="l00284"></a>00284         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( olsr_node-&gt;<a class="code" href="structolsr__node.html#f19d37e4aa5263be9a1741de24686664">visible</a> ) {
+<a name="l00285"></a>00285 
+<a name="l00286"></a>00286                 <span class="comment">/* olsr node shape has been modified */</span>
+<a name="l00287"></a>00287                 <span class="keywordflow">if</span> ( olsr_node-&gt;<a class="code" href="structolsr__node.html#4517a87e4fdbdb58f678743b5684088b">node_type_modified</a> ) {
+<a name="l00288"></a>00288 
+<a name="l00289"></a>00289                         <span class="comment">/* delete old shape */</span>
+<a name="l00290"></a>00290                         <span class="keywordflow">if</span> ( olsr_node-&gt;<a class="code" href="structolsr__node.html#15be0912065801026e7b4411af561788">obj_id</a> != -1 ) {
+<a name="l00291"></a>00291                                 <span class="comment">/* remove element from ob2ip list */</span>
+<a name="l00292"></a>00292                                 <a class="code" href="olsrs3d_8h.html#febf2594bdfe9ec411d0c04c9cd951b3">lst_del</a>( olsr_node-&gt;<a class="code" href="structolsr__node.html#15be0912065801026e7b4411af561788">obj_id</a> );
+<a name="l00293"></a>00293                                 s3d_del_object( olsr_node-&gt;<a class="code" href="structolsr__node.html#15be0912065801026e7b4411af561788">obj_id</a> );
+<a name="l00294"></a>00294                         }
+<a name="l00295"></a>00295 
+<a name="l00296"></a>00296                         <span class="keywordflow">if</span> ( olsr_node-&gt;<a class="code" href="structolsr__node.html#f2e3f729be82b64001867038bbe8012a">desc_id</a> != -1 ) s3d_del_object( olsr_node-&gt;<a class="code" href="structolsr__node.html#f2e3f729be82b64001867038bbe8012a">desc_id</a> );
+<a name="l00297"></a>00297 
+<a name="l00298"></a>00298                         <span class="comment">/* create new shape */</span>
+<a name="l00299"></a>00299                         <span class="keywordflow">if</span> ( olsr_node-&gt;<a class="code" href="structolsr__node.html#c89186513811183436bcd79cdb6d7b4d">node_type</a> == 1 ) {
+<a name="l00300"></a>00300                                 <span class="comment">/* olsr node offers internet access */</span>
+<a name="l00301"></a>00301                                 olsr_node-&gt;<a class="code" href="structolsr__node.html#15be0912065801026e7b4411af561788">obj_id</a> = s3d_clone( <a class="code" href="main_8c.html#b02228665cef19331d409b0d8a831531">Olsr_node_inet_obj</a> );
+<a name="l00302"></a>00302                         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( olsr_node-&gt;<a class="code" href="structolsr__node.html#c89186513811183436bcd79cdb6d7b4d">node_type</a> == 2 ) {
+<a name="l00303"></a>00303                                 <span class="comment">/* via hna announced network */</span>
+<a name="l00304"></a>00304                                 olsr_node-&gt;<a class="code" href="structolsr__node.html#15be0912065801026e7b4411af561788">obj_id</a> = s3d_clone( <a class="code" href="main_8c.html#c03c9b38147e4231238c44f4b5fbdff7">Olsr_node_hna_net</a> );
+<a name="l00305"></a>00305                         } <span class="keywordflow">else</span> {
+<a name="l00306"></a>00306                                 <span class="comment">/* normal olsr node */</span>
+<a name="l00307"></a>00307                                 olsr_node-&gt;<a class="code" href="structolsr__node.html#15be0912065801026e7b4411af561788">obj_id</a> = s3d_clone( <a class="code" href="main_8c.html#5eba8148fe9257c34665ed364b595fdb">Olsr_node_obj</a> );
+<a name="l00308"></a>00308                         }
+<a name="l00309"></a>00309 
+<a name="l00310"></a>00310                         s3d_flags_on( olsr_node-&gt;<a class="code" href="structolsr__node.html#15be0912065801026e7b4411af561788">obj_id</a>, S3D_OF_VISIBLE|S3D_OF_SELECTABLE);
+<a name="l00311"></a>00311 
+<a name="l00312"></a>00312                         <span class="comment">/* link newly created object to ZeroPoint */</span>
+<a name="l00313"></a>00313                         s3d_link( olsr_node-&gt;<a class="code" href="structolsr__node.html#15be0912065801026e7b4411af561788">obj_id</a>, <a class="code" href="main_8c.html#e113d40abb6f4dd73e4b1253917a1942">ZeroPoint</a> );
+<a name="l00314"></a>00314                         <span class="comment">/* add object_id and olsr_node to linked list */</span>
+<a name="l00315"></a>00315                         <a class="code" href="olsrs3d_8h.html#d01a29bcb2e2daed6fcc6516c328f141">lst_add</a>(olsr_node-&gt;<a class="code" href="structolsr__node.html#15be0912065801026e7b4411af561788">obj_id</a>,&amp;olsr_node);
+<a name="l00316"></a>00316 
+<a name="l00317"></a>00317                         <span class="comment">/* create olsr node text and attach (link) it to the node */</span>
+<a name="l00318"></a>00318                         olsr_node-&gt;<a class="code" href="structolsr__node.html#f2e3f729be82b64001867038bbe8012a">desc_id</a> = s3d_draw_string( olsr_node-&gt;<a class="code" href="structolsr__node.html#59690d75faff5c149faecacb4f4d2a57">ip</a>, &amp;olsr_node-&gt;<a class="code" href="structolsr__node.html#c2a66c5312cf64fec10f6b8903dbd966">desc_length</a> );
+<a name="l00319"></a>00319                         s3d_link( olsr_node-&gt;<a class="code" href="structolsr__node.html#f2e3f729be82b64001867038bbe8012a">desc_id</a>, olsr_node-&gt;<a class="code" href="structolsr__node.html#15be0912065801026e7b4411af561788">obj_id</a> );
+<a name="l00320"></a>00320                         s3d_translate( olsr_node-&gt;<a class="code" href="structolsr__node.html#f2e3f729be82b64001867038bbe8012a">desc_id</a>, - olsr_node-&gt;<a class="code" href="structolsr__node.html#c2a66c5312cf64fec10f6b8903dbd966">desc_length</a> / 2, -2, 0 );
+<a name="l00321"></a>00321                         s3d_flags_on( olsr_node-&gt;<a class="code" href="structolsr__node.html#f2e3f729be82b64001867038bbe8012a">desc_id</a>, S3D_OF_VISIBLE );
+<a name="l00322"></a>00322 
+<a name="l00323"></a>00323                         olsr_node-&gt;<a class="code" href="structolsr__node.html#4517a87e4fdbdb58f678743b5684088b">node_type_modified</a> = 0;
+<a name="l00324"></a>00324 
+<a name="l00325"></a>00325                 }
+<a name="l00326"></a>00326 
+<a name="l00327"></a>00327 
+<a name="l00328"></a>00328                 <span class="comment">/* rotate node description so that they are always readable */</span>
+<a name="l00329"></a>00329                 tmp_mov_vec[0] = <a class="code" href="main_8c.html#5d58294b80563f797d1a14d1d739f52b">CamPosition</a>[0][0] - olsr_node-&gt;<a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>[0];
+<a name="l00330"></a>00330                 tmp_mov_vec[1] = 0;   <span class="comment">/* we are not interested in the y value */</span>
+<a name="l00331"></a>00331                 tmp_mov_vec[2] = <a class="code" href="main_8c.html#5d58294b80563f797d1a14d1d739f52b">CamPosition</a>[0][2] - olsr_node-&gt;<a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>[2];
+<a name="l00332"></a>00332 
+<a name="l00333"></a>00333                 angle = s3d_vector_angle( desc_norm_vec, tmp_mov_vec );
+<a name="l00334"></a>00334 
+<a name="l00335"></a>00335                 <span class="comment">/* take care of inverse cosinus */</span>
+<a name="l00336"></a>00336                 <span class="keywordflow">if</span> ( tmp_mov_vec[0] &gt; 0 ) {
+<a name="l00337"></a>00337                         angle_rad = 90.0/M_PI - angle;
+<a name="l00338"></a>00338                         angle = 180 - ( 180.0/M_PI * angle );
+<a name="l00339"></a>00339                 } <span class="keywordflow">else</span> {
+<a name="l00340"></a>00340                         angle_rad = 90.0/M_PI + angle;
+<a name="l00341"></a>00341                         angle = 180 + ( 180.0/M_PI * angle );
+<a name="l00342"></a>00342                 }
+<a name="l00343"></a>00343 
+<a name="l00344"></a>00344                 s3d_rotate( olsr_node-&gt;<a class="code" href="structolsr__node.html#f2e3f729be82b64001867038bbe8012a">desc_id</a>, 0, angle , 0 );
+<a name="l00345"></a>00345                 s3d_translate( olsr_node-&gt;<a class="code" href="structolsr__node.html#f2e3f729be82b64001867038bbe8012a">desc_id</a>, -cos(angle_rad)*olsr_node-&gt;<a class="code" href="structolsr__node.html#c2a66c5312cf64fec10f6b8903dbd966">desc_length</a>/2 ,-1.5, sin(angle_rad)*olsr_node-&gt;<a class="code" href="structolsr__node.html#c2a66c5312cf64fec10f6b8903dbd966">desc_length</a>/2 );
+<a name="l00346"></a>00346 
+<a name="l00347"></a>00347 
+<a name="l00348"></a>00348                 <span class="comment">/* drift away from unrelated nodes */</span>
+<a name="l00349"></a>00349                 Obj_to_ip_curr = <a class="code" href="main_8c.html#9494e9e8cbdc4eceb86cb33ff0006785">Obj_to_ip_head</a>-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a>;
+<a name="l00350"></a>00350                 <span class="keywordflow">while</span> ( Obj_to_ip_curr != <a class="code" href="main_8c.html#236217b97f5fe65457d8b22c73c5073d">Obj_to_ip_end</a> ) {
+<a name="l00351"></a>00351 
+<a name="l00352"></a>00352                         <span class="comment">/* myself ... */</span>
+<a name="l00353"></a>00353                         <span class="keywordflow">if</span> ( olsr_node != Obj_to_ip_curr-&gt;<a class="code" href="structObj__to__ip.html#207d8f9a609e3e20b4cbd9a7976dcd18">olsr_node</a> ) {
+<a name="l00354"></a>00354 
+<a name="l00355"></a>00355                                 olsr_neigh_list = olsr_node-&gt;<a class="code" href="structolsr__node.html#3b80ce78a06be6aba5a1f93887442764">olsr_neigh_list</a>;
+<a name="l00356"></a>00356                                 <span class="keywordflow">while</span> ( olsr_neigh_list != NULL ) {
+<a name="l00357"></a>00357 
+<a name="l00358"></a>00358                                         <span class="comment">/* nodes are related */</span>
+<a name="l00359"></a>00359                                         <span class="keywordflow">if</span> ( ( olsr_neigh_list-&gt;<a class="code" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">olsr_con</a>-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f19d37e4aa5263be9a1741de24686664">visible</a> == 1 ) &amp;&amp; ( olsr_neigh_list-&gt;<a class="code" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">olsr_con</a>-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f19d37e4aa5263be9a1741de24686664">visible</a> == 1 ) ) {
+<a name="l00360"></a>00360 
+<a name="l00361"></a>00361                                                 <span class="keywordflow">if</span> ( ( olsr_neigh_list-&gt;<a class="code" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">olsr_con</a>-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a> == Obj_to_ip_curr-&gt;<a class="code" href="structObj__to__ip.html#207d8f9a609e3e20b4cbd9a7976dcd18">olsr_node</a> ) || (  olsr_neigh_list-&gt;<a class="code" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">olsr_con</a>-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a> == Obj_to_ip_curr-&gt;<a class="code" href="structObj__to__ip.html#207d8f9a609e3e20b4cbd9a7976dcd18">olsr_node</a> ) ) <span class="keywordflow">break</span>;
+<a name="l00362"></a>00362 
+<a name="l00363"></a>00363                                         }
+<a name="l00364"></a>00364 
+<a name="l00365"></a>00365                                         olsr_neigh_list = olsr_neigh_list-&gt;<a class="code" href="structolsr__neigh__list.html#f1d533fde49e1ed2ea5299661f5c10c6">next_olsr_neigh_list</a>;
+<a name="l00366"></a>00366 
+<a name="l00367"></a>00367                                 }
+<a name="l00368"></a>00368 
+<a name="l00369"></a>00369                                 <span class="comment">/* nodes are not related - so drift */</span>
+<a name="l00370"></a>00370                                 <span class="keywordflow">if</span> ( olsr_neigh_list == NULL ) {
+<a name="l00371"></a>00371 
+<a name="l00372"></a>00372                                         distance = <a class="code" href="main_8c.html#753e5e5d6fbcbd893bb466ce045a3316">dirt</a>( olsr_node-&gt;<a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>, Obj_to_ip_curr-&gt;<a class="code" href="structObj__to__ip.html#207d8f9a609e3e20b4cbd9a7976dcd18">olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>, tmp_mov_vec );
+<a name="l00373"></a>00373                                         <span class="keywordflow">if</span> ( distance &lt; 0.1 ) distance = 0.1;
+<a name="l00374"></a>00374                                         <a class="code" href="main_8c.html#f4369a866dcd049e2642e137507e8ff1">mov_add</a>( olsr_node-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>, tmp_mov_vec,-100 / ( distance * distance ) );
+<a name="l00375"></a>00375                                         <a class="code" href="main_8c.html#f4369a866dcd049e2642e137507e8ff1">mov_add</a>( Obj_to_ip_curr-&gt;<a class="code" href="structObj__to__ip.html#207d8f9a609e3e20b4cbd9a7976dcd18">olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>, tmp_mov_vec, 100 / ( distance * distance ) );
+<a name="l00376"></a>00376 
+<a name="l00377"></a>00377                                 }
+<a name="l00378"></a>00378 
+<a name="l00379"></a>00379                         }
+<a name="l00380"></a>00380 
+<a name="l00381"></a>00381                         Obj_to_ip_curr = Obj_to_ip_curr-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a>;
+<a name="l00382"></a>00382 
+<a name="l00383"></a>00383                 }
+<a name="l00384"></a>00384 
+<a name="l00385"></a>00385         }
+<a name="l00386"></a>00386 
+<a name="l00387"></a>00387         <a class="code" href="main_8c.html#de55269b71a792259ef22763327686b9">handle_olsr_node</a>( olsr_node-&gt;<a class="code" href="structolsr__node.html#b64ee26ebfa4a3c2719de780b4cabada">left</a> );
+<a name="l00388"></a>00388         <a class="code" href="main_8c.html#de55269b71a792259ef22763327686b9">handle_olsr_node</a>( olsr_node-&gt;<a class="code" href="structolsr__node.html#bc6cf143d12b1e5a204ae64d40c0eb05">right</a> );
+<a name="l00389"></a>00389 
+<a name="l00390"></a>00390 }
+<a name="l00391"></a>00391 
+<a name="l00392"></a>00392 
+<a name="l00393"></a>00393 
+<a name="l00394"></a>00394 <span class="comment">/***</span>
+<a name="l00395"></a>00395 <span class="comment"> *</span>
+<a name="l00396"></a>00396 <span class="comment"> * calculate movement vector of all olsr nodes</span>
+<a name="l00397"></a>00397 <span class="comment"> *</span>
+<a name="l00398"></a>00398 <span class="comment"> ***/</span>
+<a name="l00399"></a>00399 
+<a name="l00400"></a><a class="code" href="main_8c.html#668e36a25680cc3e0ac4d85a418a838a">00400</a> <span class="keywordtype">void</span> <a class="code" href="main_8c.html#668e36a25680cc3e0ac4d85a418a838a">calc_olsr_node_mov</a>( <span class="keywordtype">void</span> ) {
+<a name="l00401"></a>00401 
+<a name="l00402"></a>00402         <span class="keywordtype">float</span> distance;
+<a name="l00403"></a>00403         <span class="keywordtype">float</span> tmp_mov_vec[3];
+<a name="l00404"></a>00404         <span class="keywordtype">float</span> f;
+<a name="l00405"></a>00405         <span class="keyword">struct </span><a class="code" href="structolsr__con.html">olsr_con</a> *<a class="code" href="structolsr__con.html">olsr_con</a> = <a class="code" href="main_8c.html#0643a36891539929d987e2ee83ff81d1">Con_begin</a>;
+<a name="l00406"></a>00406 
+<a name="l00407"></a>00407         <span class="keywordflow">while</span> ( olsr_con != NULL ) {
+<a name="l00408"></a>00408 
+<a name="l00409"></a>00409                 <span class="keywordflow">if</span> ( ( olsr_con-&gt;<a class="code" href="structolsr__con.html#d93efab11883355b45a0460456991362">left_etx</a> != 0.0 ) &amp;&amp; ( olsr_con-&gt;<a class="code" href="structolsr__con.html#30d90c31e93a79ba37ca51b8d146693a">right_etx</a> != 0.0  ) ) {
+<a name="l00410"></a>00410 
+<a name="l00411"></a>00411                         distance = <a class="code" href="main_8c.html#753e5e5d6fbcbd893bb466ce045a3316">dirt</a>( olsr_con-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>, olsr_con-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>, tmp_mov_vec );
+<a name="l00412"></a>00412                         f = ( ( olsr_con-&gt;<a class="code" href="structolsr__con.html#d93efab11883355b45a0460456991362">left_etx</a> + olsr_con-&gt;<a class="code" href="structolsr__con.html#30d90c31e93a79ba37ca51b8d146693a">right_etx</a> ) / 4.0 ) / distance;
+<a name="l00413"></a>00413 
+<a name="l00414"></a>00414                         <span class="comment">/***</span>
+<a name="l00415"></a>00415 <span class="comment">                         * drift factor - 0.0 &lt; factor &lt; 1.0 ( best results: 0.3 &lt; factor &lt; 0.9</span>
+<a name="l00416"></a>00416 <span class="comment">                         * small factor: fast and strong drift to neighbours</span>
+<a name="l00417"></a>00417 <span class="comment">                         ***/</span>
+<a name="l00418"></a>00418                         <span class="keywordflow">if</span> ( f &lt; <a class="code" href="main_8c.html#98d8a7901c60f18d6bf9b35998147831">Factor</a> ) f = <a class="code" href="main_8c.html#98d8a7901c60f18d6bf9b35998147831">Factor</a>;
+<a name="l00419"></a>00419 
+<a name="l00420"></a>00420                         <a class="code" href="main_8c.html#f4369a866dcd049e2642e137507e8ff1">mov_add</a>( olsr_con-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>, tmp_mov_vec, 1 / f - 1 );
+<a name="l00421"></a>00421                         <a class="code" href="main_8c.html#f4369a866dcd049e2642e137507e8ff1">mov_add</a>( olsr_con-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>, tmp_mov_vec, - ( 1 / f - 1 ) );
+<a name="l00422"></a>00422 
+<a name="l00423"></a>00423                 }
+<a name="l00424"></a>00424 
+<a name="l00425"></a>00425                 olsr_con = olsr_con-&gt;<a class="code" href="structolsr__con.html#369dfd6eec077d0a6228cd1387135e6e">next_olsr_con</a>;
+<a name="l00426"></a>00426 
+<a name="l00427"></a>00427         }
+<a name="l00428"></a>00428 
+<a name="l00429"></a>00429 }
+<a name="l00430"></a>00430 
+<a name="l00431"></a>00431 
+<a name="l00432"></a>00432 
+<a name="l00433"></a>00433 <span class="comment">/***</span>
+<a name="l00434"></a>00434 <span class="comment"> *</span>
+<a name="l00435"></a>00435 <span class="comment"> * move all olsr nodes and their connections</span>
+<a name="l00436"></a>00436 <span class="comment"> *</span>
+<a name="l00437"></a>00437 <span class="comment"> ***/</span>
+<a name="l00438"></a>00438 
+<a name="l00439"></a><a class="code" href="main_8c.html#b8d0d8cf5ac8914802be645e15241b77">00439</a> <span class="keywordtype">void</span> <a class="code" href="main_8c.html#b8d0d8cf5ac8914802be645e15241b77">move_olsr_nodes</a>( <span class="keywordtype">void</span> ) {
+<a name="l00440"></a>00440 
+<a name="l00441"></a>00441         <span class="keywordtype">float</span> null_vec[3] = {0,0,0}, vertex_buf[6];
+<a name="l00442"></a>00442         <span class="keywordtype">float</span> tmp_mov_vec[3];
+<a name="l00443"></a>00443         <span class="keywordtype">float</span> distance, etx, <a class="code" href="structolsr__con.html#239f576ba1dae4303a935a296d5adb95">rgb</a>;
+<a name="l00444"></a>00444         <span class="keyword">struct </span><a class="code" href="structolsr__con.html">olsr_con</a> *<a class="code" href="structolsr__con.html">olsr_con</a> = <a class="code" href="main_8c.html#0643a36891539929d987e2ee83ff81d1">Con_begin</a>;
+<a name="l00445"></a>00445 
+<a name="l00446"></a>00446         <span class="keywordflow">while</span> ( olsr_con != NULL ) {
+<a name="l00447"></a>00447 
+<a name="l00448"></a>00448                 <span class="comment">/* move left olsr node if it has not been moved yet */</span>
+<a name="l00449"></a>00449                 <span class="keywordflow">if</span> ( !( ( olsr_con-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>[0] == 0 ) &amp;&amp; ( olsr_con-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>[1] == 0 ) &amp;&amp; ( olsr_con-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>[2] == 0 ) ) &amp;&amp; olsr_con-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f19d37e4aa5263be9a1741de24686664">visible</a> ) {
+<a name="l00450"></a>00450 
+<a name="l00451"></a>00451                         distance = <a class="code" href="main_8c.html#753e5e5d6fbcbd893bb466ce045a3316">dirt</a>( olsr_con-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>, null_vec, tmp_mov_vec );
+<a name="l00452"></a>00452                         <a class="code" href="main_8c.html#f4369a866dcd049e2642e137507e8ff1">mov_add</a>( olsr_con-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>, tmp_mov_vec, distance / 100 ); <span class="comment">/* move a little bit to point zero */</span>
+<a name="l00453"></a>00453                         <a class="code" href="main_8c.html#f4369a866dcd049e2642e137507e8ff1">mov_add</a>( olsr_con-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>, tmp_mov_vec, 1 ); <span class="comment">/* move a little bit to point zero */</span>
+<a name="l00454"></a>00454 
+<a name="l00455"></a>00455                         <span class="keywordflow">if</span> ( ( distance = <a class="code" href="main_8c.html#da3bfd6c7ec35068dbcdf966a4628f5e">dist</a>( olsr_con-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>, null_vec ) ) &gt; 10.0 ) {
+<a name="l00456"></a>00456                                 <a class="code" href="main_8c.html#f4369a866dcd049e2642e137507e8ff1">mov_add</a>( olsr_con-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>, olsr_con-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>, 1.0 / ( ( <span class="keywordtype">float</span> ) distance ) );
+<a name="l00457"></a>00457                         } <span class="keywordflow">else</span> {
+<a name="l00458"></a>00458                                 <a class="code" href="main_8c.html#f4369a866dcd049e2642e137507e8ff1">mov_add</a>( olsr_con-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>, olsr_con-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>, 0.1 );
+<a name="l00459"></a>00459                         }
+<a name="l00460"></a>00460 
+<a name="l00461"></a>00461                         s3d_translate( olsr_con-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#15be0912065801026e7b4411af561788">obj_id</a>, olsr_con-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>[0], olsr_con-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>[1], olsr_con-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>[2] );
+<a name="l00462"></a>00462 
+<a name="l00463"></a>00463                         <span class="comment">/* reset movement vector */</span>
+<a name="l00464"></a>00464                         olsr_con-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>[0] = olsr_con-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>[1] = olsr_con-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>[2] = 0.0;
+<a name="l00465"></a>00465 
+<a name="l00466"></a>00466                 }
+<a name="l00467"></a>00467 
+<a name="l00468"></a>00468                 <span class="comment">/* move right olsr node if it has not been moved yet */</span>
+<a name="l00469"></a>00469                 <span class="keywordflow">if</span> ( !( ( olsr_con-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>[0] == 0 ) &amp;&amp; ( olsr_con-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>[1] == 0 ) &amp;&amp; ( olsr_con-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>[2] == 0 ) ) &amp;&amp; olsr_con-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f19d37e4aa5263be9a1741de24686664">visible</a> ) {
+<a name="l00470"></a>00470 
+<a name="l00471"></a>00471                         distance = <a class="code" href="main_8c.html#753e5e5d6fbcbd893bb466ce045a3316">dirt</a>( olsr_con-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>, null_vec, tmp_mov_vec );
+<a name="l00472"></a>00472                         <a class="code" href="main_8c.html#f4369a866dcd049e2642e137507e8ff1">mov_add</a>( olsr_con-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>, tmp_mov_vec, distance / 100 ); <span class="comment">/* move a little bit to point zero */</span>
+<a name="l00473"></a>00473                         <a class="code" href="main_8c.html#f4369a866dcd049e2642e137507e8ff1">mov_add</a>( olsr_con-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>, tmp_mov_vec, 1 ); <span class="comment">/* move a little bit to point zero */</span>
+<a name="l00474"></a>00474 
+<a name="l00475"></a>00475                         <span class="keywordflow">if</span> ( ( distance = <a class="code" href="main_8c.html#da3bfd6c7ec35068dbcdf966a4628f5e">dist</a>( olsr_con-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>, null_vec ) ) &gt; 10.0 ) {
+<a name="l00476"></a>00476                                 <a class="code" href="main_8c.html#f4369a866dcd049e2642e137507e8ff1">mov_add</a>( olsr_con-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>, olsr_con-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>, 1.0 / ( ( <span class="keywordtype">float</span> ) distance ) );
+<a name="l00477"></a>00477                         } <span class="keywordflow">else</span> {
+<a name="l00478"></a>00478                                 <a class="code" href="main_8c.html#f4369a866dcd049e2642e137507e8ff1">mov_add</a>( olsr_con-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>, olsr_con-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>, 0.1 );
+<a name="l00479"></a>00479                         }
+<a name="l00480"></a>00480 
+<a name="l00481"></a>00481                         s3d_translate( olsr_con-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#15be0912065801026e7b4411af561788">obj_id</a>, olsr_con-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>[0], olsr_con-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>[1], olsr_con-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>[2] );
+<a name="l00482"></a>00482 
+<a name="l00483"></a>00483                         <span class="comment">/* reset movement vector */</span>
+<a name="l00484"></a>00484                         olsr_con-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>[0] = olsr_con-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>[1] = olsr_con-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>[2] = 0.0;
+<a name="l00485"></a>00485 
+<a name="l00486"></a>00486                 }
+<a name="l00487"></a>00487 
+<a name="l00488"></a>00488 
+<a name="l00489"></a>00489                 <span class="comment">/* move connection between left and right olsr node */</span>
+<a name="l00490"></a>00490                 vertex_buf[0] = olsr_con-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>[0];
+<a name="l00491"></a>00491                 vertex_buf[1] = olsr_con-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>[1];
+<a name="l00492"></a>00492                 vertex_buf[2] = olsr_con-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>[2];
+<a name="l00493"></a>00493                 vertex_buf[3] = olsr_con-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>[0];
+<a name="l00494"></a>00494                 vertex_buf[4] = olsr_con-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>[1];
+<a name="l00495"></a>00495                 vertex_buf[5] = olsr_con-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>[2];
+<a name="l00496"></a>00496 
+<a name="l00497"></a>00497                 s3d_pep_vertices( olsr_con-&gt;<a class="code" href="structolsr__con.html#fe985b6b83425cb17e801ac00001175e">obj_id</a>, vertex_buf, 2 );
+<a name="l00498"></a>00498 
+<a name="l00499"></a>00499 
+<a name="l00500"></a>00500                 <span class="keywordflow">if</span> ( <a class="code" href="main_8c.html#aaca6648d8e9266d2fbeb21a6a4f4745">ColorSwitch</a> ) {
+<a name="l00501"></a>00501 
+<a name="l00502"></a>00502                         <span class="comment">/* HNA */</span>
+<a name="l00503"></a>00503                         <span class="keywordflow">if</span> ( olsr_con-&gt;<a class="code" href="structolsr__con.html#d93efab11883355b45a0460456991362">left_etx</a> == -1000.00 ) {
+<a name="l00504"></a>00504 
+<a name="l00505"></a>00505                                 <span class="keywordflow">if</span>(olsr_con-&gt;<a class="code" href="structolsr__con.html#26a11a87df79af8e59e9f5048937b0c1">color</a> != 1) {
+<a name="l00506"></a>00506                                         s3d_pep_material( olsr_con-&gt;<a class="code" href="structolsr__con.html#fe985b6b83425cb17e801ac00001175e">obj_id</a>,
+<a name="l00507"></a>00507                                                                    0.0,0.0,1.0,
+<a name="l00508"></a>00508                                                                    0.0,0.0,1.0,
+<a name="l00509"></a>00509                                                                    0.0,0.0,1.0);
+<a name="l00510"></a>00510                                         olsr_con-&gt;<a class="code" href="structolsr__con.html#26a11a87df79af8e59e9f5048937b0c1">color</a> = 1;
+<a name="l00511"></a>00511                                 }
+<a name="l00512"></a>00512 
+<a name="l00513"></a>00513                         } <span class="keywordflow">else</span> {
+<a name="l00514"></a>00514 
+<a name="l00515"></a>00515                                 etx = ( olsr_con-&gt;<a class="code" href="structolsr__con.html#d93efab11883355b45a0460456991362">left_etx</a> + olsr_con-&gt;<a class="code" href="structolsr__con.html#30d90c31e93a79ba37ca51b8d146693a">right_etx</a> ) / 2.0;
+<a name="l00516"></a>00516 
+<a name="l00517"></a>00517                                 <span class="comment">/* very good link - bright blue */</span>
+<a name="l00518"></a>00518                                 <span class="keywordflow">if</span> ( ( etx &gt;= 1.0 ) &amp;&amp; ( etx &lt; 1.5 ) ) {
+<a name="l00519"></a>00519 
+<a name="l00520"></a>00520                                         <span class="keywordflow">if</span>(olsr_con-&gt;<a class="code" href="structolsr__con.html#26a11a87df79af8e59e9f5048937b0c1">color</a> != 2) {
+<a name="l00521"></a>00521                                                 s3d_pep_material( olsr_con-&gt;<a class="code" href="structolsr__con.html#fe985b6b83425cb17e801ac00001175e">obj_id</a>,
+<a name="l00522"></a>00522                                                                 0.5,1.0,1.0,
+<a name="l00523"></a>00523                                                                 0.5,1.0,1.0,
+<a name="l00524"></a>00524                                                                 0.5,1.0,1.0);
+<a name="l00525"></a>00525                                                 olsr_con-&gt;<a class="code" href="structolsr__con.html#26a11a87df79af8e59e9f5048937b0c1">color</a> = 2;
+<a name="l00526"></a>00526                                         }
+<a name="l00527"></a>00527 
+<a name="l00528"></a>00528                                 <span class="comment">/* good link - bright yellow */</span>
+<a name="l00529"></a>00529                                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( ( etx &gt;= 1.5 ) &amp;&amp; ( etx &lt; 2.0 ) ) {
+<a name="l00530"></a>00530 
+<a name="l00531"></a>00531                                         rgb = 2.0 - etx;
+<a name="l00532"></a>00532                                         <span class="keywordflow">if</span>( olsr_con-&gt;<a class="code" href="structolsr__con.html#26a11a87df79af8e59e9f5048937b0c1">color</a> != 3 || (olsr_con-&gt;<a class="code" href="structolsr__con.html#26a11a87df79af8e59e9f5048937b0c1">color</a> == 3 &amp;&amp; (<span class="keywordtype">int</span>) rintf(olsr_con-&gt;<a class="code" href="structolsr__con.html#239f576ba1dae4303a935a296d5adb95">rgb</a> * 10) !=  (<span class="keywordtype">int</span>) rintf(rgb * 10))) {
+<a name="l00533"></a>00533                                                 s3d_pep_material( olsr_con-&gt;<a class="code" href="structolsr__con.html#fe985b6b83425cb17e801ac00001175e">obj_id</a>,
+<a name="l00534"></a>00534                                                                 1.0,1.0,rgb,
+<a name="l00535"></a>00535                                                                 1.0,1.0,rgb,
+<a name="l00536"></a>00536                                                                 1.0,1.0,rgb);
+<a name="l00537"></a>00537                                                 olsr_con-&gt;<a class="code" href="structolsr__con.html#26a11a87df79af8e59e9f5048937b0c1">color</a> = 3;
+<a name="l00538"></a>00538 
+<a name="l00539"></a>00539                                                 olsr_con-&gt;<a class="code" href="structolsr__con.html#239f576ba1dae4303a935a296d5adb95">rgb</a> =  rgb;
+<a name="l00540"></a>00540                                         }
+<a name="l00541"></a>00541 
+<a name="l00542"></a>00542                                 <span class="comment">/* not so good link - orange */</span>
+<a name="l00543"></a>00543                                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( ( etx &gt;= 2.0 ) &amp;&amp; ( etx &lt; 3.0 ) ) {
+<a name="l00544"></a>00544 
+<a name="l00545"></a>00545                                         rgb = 1.5 - ( etx / 2.0 );
+<a name="l00546"></a>00546                                         <span class="keywordflow">if</span>( olsr_con-&gt;<a class="code" href="structolsr__con.html#26a11a87df79af8e59e9f5048937b0c1">color</a> != 4 || (olsr_con-&gt;<a class="code" href="structolsr__con.html#26a11a87df79af8e59e9f5048937b0c1">color</a> == 4 &amp;&amp; (<span class="keywordtype">int</span>) rintf(olsr_con-&gt;<a class="code" href="structolsr__con.html#239f576ba1dae4303a935a296d5adb95">rgb</a> * 10) !=  (<span class="keywordtype">int</span>) rintf(rgb * 10))) {
+<a name="l00547"></a>00547                                                 s3d_pep_material( olsr_con-&gt;<a class="code" href="structolsr__con.html#fe985b6b83425cb17e801ac00001175e">obj_id</a>,
+<a name="l00548"></a>00548                                                                 1.0,rgb,0.0,
+<a name="l00549"></a>00549                                                                 1.0,rgb,0.0,
+<a name="l00550"></a>00550                                                                 1.0,rgb,0.0);
+<a name="l00551"></a>00551                                                 olsr_con-&gt;<a class="code" href="structolsr__con.html#26a11a87df79af8e59e9f5048937b0c1">color</a> = 4;
+<a name="l00552"></a>00552 
+<a name="l00553"></a>00553                                                 olsr_con-&gt;<a class="code" href="structolsr__con.html#239f576ba1dae4303a935a296d5adb95">rgb</a> = rgb;
+<a name="l00554"></a>00554                                         }
+<a name="l00555"></a>00555 
+<a name="l00556"></a>00556                                 <span class="comment">/* bad link (almost dead) - brown */</span>
+<a name="l00557"></a>00557                                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( ( etx &gt;= 3.0 ) &amp;&amp; ( etx &lt; 5.0 ) ) {
+<a name="l00558"></a>00558 
+<a name="l00559"></a>00559                                         rgb = 1.75 - ( etx / 4.0 );
+<a name="l00560"></a>00560 
+<a name="l00561"></a>00561                                         <span class="keywordflow">if</span>( olsr_con-&gt;<a class="code" href="structolsr__con.html#26a11a87df79af8e59e9f5048937b0c1">color</a> != 5 || (olsr_con-&gt;<a class="code" href="structolsr__con.html#26a11a87df79af8e59e9f5048937b0c1">color</a> == 5 &amp;&amp; (<span class="keywordtype">int</span>) rintf(olsr_con-&gt;<a class="code" href="structolsr__con.html#239f576ba1dae4303a935a296d5adb95">rgb</a> * 10) !=  (<span class="keywordtype">int</span>) rintf(rgb * 10)) ) {
+<a name="l00562"></a>00562 
+<a name="l00563"></a>00563                                                 s3d_pep_material( olsr_con-&gt;<a class="code" href="structolsr__con.html#fe985b6b83425cb17e801ac00001175e">obj_id</a>,
+<a name="l00564"></a>00564                                                                 rgb,rgb - 0.5,0.0,
+<a name="l00565"></a>00565                                                                 rgb,rgb - 0.5,0.0,
+<a name="l00566"></a>00566                                                                 rgb,rgb - 0.5,0.0);
+<a name="l00567"></a>00567                                                 olsr_con-&gt;<a class="code" href="structolsr__con.html#26a11a87df79af8e59e9f5048937b0c1">color</a> = 5;
+<a name="l00568"></a>00568 
+<a name="l00569"></a>00569                                                 olsr_con-&gt;<a class="code" href="structolsr__con.html#239f576ba1dae4303a935a296d5adb95">rgb</a> = rgb;
+<a name="l00570"></a>00570                                         }
+<a name="l00571"></a>00571 
+<a name="l00572"></a>00572                                 <span class="comment">/* zombie link - grey */</span>
+<a name="l00573"></a>00573                                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( ( etx &gt;= 5.0 ) &amp;&amp; ( etx &lt; 1000.0 ) ) {
+<a name="l00574"></a>00574 
+<a name="l00575"></a>00575                                         rgb = 1000.0 / ( 1500.0 + etx );
+<a name="l00576"></a>00576 
+<a name="l00577"></a>00577                                         <span class="keywordflow">if</span>( olsr_con-&gt;<a class="code" href="structolsr__con.html#26a11a87df79af8e59e9f5048937b0c1">color</a> != 6 || (olsr_con-&gt;<a class="code" href="structolsr__con.html#26a11a87df79af8e59e9f5048937b0c1">color</a> == 6 &amp;&amp; (<span class="keywordtype">int</span>) rintf(olsr_con-&gt;<a class="code" href="structolsr__con.html#239f576ba1dae4303a935a296d5adb95">rgb</a> * 10) !=  (<span class="keywordtype">int</span>) rintf(rgb * 10)) ) {
+<a name="l00578"></a>00578 
+<a name="l00579"></a>00579                                                 s3d_pep_material( olsr_con-&gt;<a class="code" href="structolsr__con.html#fe985b6b83425cb17e801ac00001175e">obj_id</a>,
+<a name="l00580"></a>00580                                                                 rgb,rgb,rgb,
+<a name="l00581"></a>00581                                                                 rgb,rgb,rgb,
+<a name="l00582"></a>00582                                                                 rgb,rgb,rgb);
+<a name="l00583"></a>00583                                                 olsr_con-&gt;<a class="code" href="structolsr__con.html#26a11a87df79af8e59e9f5048937b0c1">color</a> = 6;
+<a name="l00584"></a>00584 
+<a name="l00585"></a>00585                                                 olsr_con-&gt;<a class="code" href="structolsr__con.html#239f576ba1dae4303a935a296d5adb95">rgb</a> = rgb;
+<a name="l00586"></a>00586                                         }
+<a name="l00587"></a>00587 
+<a name="l00588"></a>00588                                 <span class="comment">/* wtf - dark grey */</span>
+<a name="l00589"></a>00589                                 } <span class="keywordflow">else</span> {
+<a name="l00590"></a>00590 
+<a name="l00591"></a>00591                                         <span class="keywordflow">if</span>(olsr_con-&gt;<a class="code" href="structolsr__con.html#26a11a87df79af8e59e9f5048937b0c1">color</a> != 7) {
+<a name="l00592"></a>00592                                                 s3d_pep_material( olsr_con-&gt;<a class="code" href="structolsr__con.html#fe985b6b83425cb17e801ac00001175e">obj_id</a>,
+<a name="l00593"></a>00593                                                                 0.3,0.3,0.3,
+<a name="l00594"></a>00594                                                                 0.3,0.3,0.3,
+<a name="l00595"></a>00595                                                                 0.3,0.3,0.3);
+<a name="l00596"></a>00596                                                 olsr_con-&gt;<a class="code" href="structolsr__con.html#26a11a87df79af8e59e9f5048937b0c1">color</a> = 7;
+<a name="l00597"></a>00597                                         }
+<a name="l00598"></a>00598 
+<a name="l00599"></a>00599                                 }
+<a name="l00600"></a>00600 
+<a name="l00601"></a>00601                         }
+<a name="l00602"></a>00602 
+<a name="l00603"></a>00603                 } <span class="keywordflow">else</span> {
+<a name="l00604"></a>00604 
+<a name="l00605"></a>00605                         <span class="keywordflow">if</span>(olsr_con-&gt;<a class="code" href="structolsr__con.html#26a11a87df79af8e59e9f5048937b0c1">color</a> != 0) {
+<a name="l00606"></a>00606                                 s3d_pep_material( olsr_con-&gt;<a class="code" href="structolsr__con.html#fe985b6b83425cb17e801ac00001175e">obj_id</a>,
+<a name="l00607"></a>00607                                                         1.0,1.0,1.0,
+<a name="l00608"></a>00608                                                         1.0,1.0,1.0,
+<a name="l00609"></a>00609                                                         1.0,1.0,1.0);
+<a name="l00610"></a>00610                                 olsr_con-&gt;<a class="code" href="structolsr__con.html#26a11a87df79af8e59e9f5048937b0c1">color</a> = 0;
+<a name="l00611"></a>00611                         }
+<a name="l00612"></a>00612 
+<a name="l00613"></a>00613                 }
+<a name="l00614"></a>00614 
+<a name="l00615"></a>00615 
+<a name="l00616"></a>00616                 olsr_con = olsr_con-&gt;<a class="code" href="structolsr__con.html#369dfd6eec077d0a6228cd1387135e6e">next_olsr_con</a>;
+<a name="l00617"></a>00617 
+<a name="l00618"></a>00618         }
+<a name="l00619"></a>00619 
+<a name="l00620"></a>00620 }
+<a name="l00621"></a>00621 
+<a name="l00622"></a>00622 
+<a name="l00623"></a>00623 
+<a name="l00624"></a><a class="code" href="main_8c.html#896df4ffe3f986ad843e4d191cd712b3">00624</a> <span class="keywordtype">void</span> <a class="code" href="main_8c.html#896df4ffe3f986ad843e4d191cd712b3">mainloop</a>() {
+<a name="l00625"></a>00625 
+<a name="l00626"></a>00626         <span class="keywordtype">int</span> net_result;   <span class="comment">/* result of function net_main */</span>
+<a name="l00627"></a>00627         <span class="keywordtype">char</span> nc_str[20];
+<a name="l00628"></a>00628 
+<a name="l00629"></a>00629         <span class="comment">/* calculate new movement vector */</span>
+<a name="l00630"></a>00630         <a class="code" href="main_8c.html#668e36a25680cc3e0ac4d85a418a838a">calc_olsr_node_mov</a>();
+<a name="l00631"></a>00631 
+<a name="l00632"></a>00632         <span class="comment">/* prepare nodes */</span>
+<a name="l00633"></a>00633         <a class="code" href="main_8c.html#de55269b71a792259ef22763327686b9">handle_olsr_node</a>( <a class="code" href="main_8c.html#c5c5c6846587092d0c23b58b558e680c">Olsr_root</a> );
+<a name="l00634"></a>00634 
+<a name="l00635"></a>00635         <span class="comment">/* move it */</span>
+<a name="l00636"></a>00636         <a class="code" href="main_8c.html#b8d0d8cf5ac8914802be645e15241b77">move_olsr_nodes</a>();
+<a name="l00637"></a>00637 
+<a name="l00638"></a>00638         <span class="comment">/* if we have more or less nodes now - redraw node count */</span>
+<a name="l00639"></a>00639         <span class="keywordflow">if</span> ( <a class="code" href="main_8c.html#86c048bc4aaab319f4d61f7c0e1f056f">Olsr_node_count</a> != <a class="code" href="main_8c.html#58acad60c78b63554c696703227d0b7b">Last_olsr_node_count</a> ) {
+<a name="l00640"></a>00640 
+<a name="l00641"></a>00641                 <span class="keywordflow">if</span> ( <a class="code" href="main_8c.html#4dfd0657ff868fa02113bcd3335acff1">Olsr_node_count_obj</a> != -1 ) s3d_del_object( <a class="code" href="main_8c.html#4dfd0657ff868fa02113bcd3335acff1">Olsr_node_count_obj</a> );
+<a name="l00642"></a>00642                 snprintf( nc_str, 20, <span class="stringliteral">"node count: %d"</span>, <a class="code" href="main_8c.html#86c048bc4aaab319f4d61f7c0e1f056f">Olsr_node_count</a> );
+<a name="l00643"></a>00643                 <a class="code" href="main_8c.html#4dfd0657ff868fa02113bcd3335acff1">Olsr_node_count_obj</a> = s3d_draw_string( nc_str, NULL );
+<a name="l00644"></a>00644                 s3d_link( <a class="code" href="main_8c.html#4dfd0657ff868fa02113bcd3335acff1">Olsr_node_count_obj</a>, 0 );
+<a name="l00645"></a>00645                 s3d_flags_on( <a class="code" href="main_8c.html#4dfd0657ff868fa02113bcd3335acff1">Olsr_node_count_obj</a>, S3D_OF_VISIBLE );
+<a name="l00646"></a>00646                 s3d_scale( <a class="code" href="main_8c.html#4dfd0657ff868fa02113bcd3335acff1">Olsr_node_count_obj</a>, 0.2 );
+<a name="l00647"></a>00647                 s3d_translate( <a class="code" href="main_8c.html#4dfd0657ff868fa02113bcd3335acff1">Olsr_node_count_obj</a>, <a class="code" href="main_8c.html#6f68bad9075598ca8ede1827c6832376">Left</a>*3.0, -<a class="code" href="main_8c.html#f23a6ad2da4511ef430c4f522ae9f4cc">Bottom</a>*3.0-0.2, -3.0 );
+<a name="l00648"></a>00648 
+<a name="l00649"></a>00649                 <a class="code" href="main_8c.html#58acad60c78b63554c696703227d0b7b">Last_olsr_node_count</a> = <a class="code" href="main_8c.html#86c048bc4aaab319f4d61f7c0e1f056f">Olsr_node_count</a>;
+<a name="l00650"></a>00650 
+<a name="l00651"></a>00651         }
+<a name="l00652"></a>00652 
+<a name="l00653"></a>00653         <span class="comment">/* read data from socket */</span>
+<a name="l00654"></a>00654         <a class="code" href="main_8c.html#5bcc20f84efa7bd4aafc56a629f2eff3">Net_read_count</a> = 0;
+<a name="l00655"></a>00655         <span class="keywordflow">while</span> ( ( net_result = <a class="code" href="net_8c.html#b8a768eba717722a3d860c01f69fbbc9">net_main</a>() ) != 0 ) {
+<a name="l00656"></a>00656                 <span class="keywordflow">if</span> ( net_result == -1 ) {
+<a name="l00657"></a>00657                         s3d_quit();
+<a name="l00658"></a>00658                         <span class="keywordflow">break</span>;
+<a name="l00659"></a>00659                 }
+<a name="l00660"></a>00660         }
+<a name="l00661"></a>00661 
+<a name="l00662"></a>00662         <span class="keywordflow">if</span>(<a class="code" href="main_8c.html#4370348160930ca94ac7a5d1a6fc5172">RotateSwitch</a>) {
+<a name="l00663"></a>00663                 <a class="code" href="main_8c.html#ea9e1c287e0c505c2075a0b936dc3404">Zp_rotate</a> = (<a class="code" href="main_8c.html#ea9e1c287e0c505c2075a0b936dc3404">Zp_rotate</a>+<a class="code" href="main_8c.html#cfe4f8990043eade6e82cab3f101b12e">RotateSpeed</a>)%360;
+<a name="l00664"></a>00664                 s3d_rotate(<a class="code" href="main_8c.html#e113d40abb6f4dd73e4b1253917a1942">ZeroPoint</a>,0,<a class="code" href="main_8c.html#ea9e1c287e0c505c2075a0b936dc3404">Zp_rotate</a>,0);
+<a name="l00665"></a>00665         }
+<a name="l00666"></a>00666 
+<a name="l00667"></a>00667         nanosleep( &amp;<a class="code" href="main_8c.html#ea8eb9210d53cd6c1b34e6e7f80a243c">sleep_time</a>, NULL );
+<a name="l00668"></a>00668 
+<a name="l00669"></a>00669         <span class="keywordflow">return</span>;
+<a name="l00670"></a>00670 
+<a name="l00671"></a>00671 }
+<a name="l00672"></a>00672 
+<a name="l00673"></a>00673 
+<a name="l00674"></a>00674 
+<a name="l00675"></a><a class="code" href="main_8c.html#8c528baf37154d347366083f0f816846">00675</a> <span class="keywordtype">void</span> <a class="code" href="main_8c.html#8c528baf37154d347366083f0f816846">stop</a>() {
+<a name="l00676"></a>00676 
+<a name="l00677"></a>00677         s3d_quit();
+<a name="l00678"></a>00678         <a class="code" href="net_8c.html#98aebc7a8515c76551eb15ecd465b923">net_quit</a>();
+<a name="l00679"></a>00679 
+<a name="l00680"></a>00680 }
+<a name="l00681"></a>00681 
+<a name="l00682"></a>00682 
+<a name="l00683"></a>00683 
+<a name="l00684"></a>00684 <span class="comment">/***</span>
+<a name="l00685"></a>00685 <span class="comment"> *</span>
+<a name="l00686"></a>00686 <span class="comment"> * eventhandler when key pressed</span>
+<a name="l00687"></a>00687 <span class="comment"> *</span>
+<a name="l00688"></a>00688 <span class="comment"> ***/</span>
+<a name="l00689"></a>00689 
+<a name="l00690"></a><a class="code" href="main_8c.html#2f5982986645c1e7a202d72bc5e633eb">00690</a> <span class="keywordtype">void</span> <a class="code" href="main_8c.html#2f5982986645c1e7a202d72bc5e633eb">keypress</a>(<span class="keyword">struct</span> s3d_evt *event) {
+<a name="l00691"></a>00691 
+<a name="l00692"></a>00692         <span class="keywordtype">int</span> key;
+<a name="l00693"></a>00693         key=*((<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> *)event-&gt;buf);
+<a name="l00694"></a>00694         <span class="keywordflow">switch</span>(key) {
+<a name="l00695"></a>00695                 <span class="keywordflow">case</span> S3DK_ESCAPE: <span class="comment">/* esc -&gt; close olsr */</span>
+<a name="l00696"></a>00696                         <a class="code" href="main_8c.html#8c528baf37154d347366083f0f816846">stop</a>();
+<a name="l00697"></a>00697                         <span class="keywordflow">break</span>;
+<a name="l00698"></a>00698                 <span class="keywordflow">case</span> 15: <span class="comment">/* strg + o */</span>
+<a name="l00699"></a>00699                         <a class="code" href="olsrs3d_8h.html#a015f713ca02d8b76a52175b4128d3e8">lst_out</a>(); <span class="comment">/* output ob2ip list */</span>
+<a name="l00700"></a>00700                         <span class="keywordflow">break</span>;
+<a name="l00701"></a>00701                 <span class="keywordflow">case</span> <span class="charliteral">'c'</span>: <span class="comment">/* c -&gt; color on/off */</span>
+<a name="l00702"></a>00702                         <span class="keywordflow">if</span>(<a class="code" href="main_8c.html#aaca6648d8e9266d2fbeb21a6a4f4745">ColorSwitch</a>) <a class="code" href="main_8c.html#aaca6648d8e9266d2fbeb21a6a4f4745">ColorSwitch</a> = 0;
+<a name="l00703"></a>00703                         <span class="keywordflow">else</span> <a class="code" href="main_8c.html#aaca6648d8e9266d2fbeb21a6a4f4745">ColorSwitch</a> = 1;
+<a name="l00704"></a>00704                         <span class="keywordflow">break</span>;
+<a name="l00705"></a>00705                 <span class="keywordflow">case</span> <span class="charliteral">'r'</span>: <span class="comment">/* r -&gt; rotate start/stop*/</span>
+<a name="l00706"></a>00706                         <span class="keywordflow">if</span>(<a class="code" href="main_8c.html#4370348160930ca94ac7a5d1a6fc5172">RotateSwitch</a>) <a class="code" href="main_8c.html#4370348160930ca94ac7a5d1a6fc5172">RotateSwitch</a> = 0;
+<a name="l00707"></a>00707                         <span class="keywordflow">else</span> <a class="code" href="main_8c.html#4370348160930ca94ac7a5d1a6fc5172">RotateSwitch</a> = 1;
+<a name="l00708"></a>00708                         <span class="keywordflow">break</span>;
+<a name="l00709"></a>00709                 <span class="keywordflow">case</span> <span class="charliteral">'+'</span>: <span class="comment">/* + -&gt; rotate speed increase*/</span>
+<a name="l00710"></a>00710                         <span class="keywordflow">if</span>(<a class="code" href="main_8c.html#4370348160930ca94ac7a5d1a6fc5172">RotateSwitch</a> &amp;&amp; <a class="code" href="main_8c.html#cfe4f8990043eade6e82cab3f101b12e">RotateSpeed</a> &lt; 10)
+<a name="l00711"></a>00711                                 <a class="code" href="main_8c.html#cfe4f8990043eade6e82cab3f101b12e">RotateSpeed</a>++;
+<a name="l00712"></a>00712                         <span class="keywordflow">break</span>;
+<a name="l00713"></a>00713                 <span class="keywordflow">case</span> <span class="charliteral">'-'</span>: <span class="comment">/* - -&gt; rotate speed decrease*/</span>
+<a name="l00714"></a>00714                         <span class="keywordflow">if</span>(<a class="code" href="main_8c.html#4370348160930ca94ac7a5d1a6fc5172">RotateSwitch</a> &amp;&amp; <a class="code" href="main_8c.html#cfe4f8990043eade6e82cab3f101b12e">RotateSpeed</a> &gt; 1)
+<a name="l00715"></a>00715                                 <a class="code" href="main_8c.html#cfe4f8990043eade6e82cab3f101b12e">RotateSpeed</a>--;
+<a name="l00716"></a>00716                         <span class="keywordflow">break</span>;
+<a name="l00717"></a>00717                 <span class="keywordflow">case</span> 16: <span class="comment">/* strg + p -&gt; reset nodes ( zeroPoint to 0,0,0 ) */</span>
+<a name="l00718"></a>00718                         s3d_translate(<a class="code" href="main_8c.html#e113d40abb6f4dd73e4b1253917a1942">ZeroPoint</a>,0.0,0.0,0.0);
+<a name="l00719"></a>00719                         <a class="code" href="main_8c.html#4942e67624e2b40a2a949f5cc658ccce">ZeroPosition</a>[0] = <a class="code" href="main_8c.html#4942e67624e2b40a2a949f5cc658ccce">ZeroPosition</a>[1] = <a class="code" href="main_8c.html#4942e67624e2b40a2a949f5cc658ccce">ZeroPosition</a>[2] = 0.0;
+<a name="l00720"></a>00720                         <span class="keywordflow">break</span>;
+<a name="l00721"></a>00721                 <span class="keywordflow">case</span> S3DK_UP: <span class="comment">/* arrow up -&gt; move nodes up */</span>
+<a name="l00722"></a>00722                         <a class="code" href="main_8c.html#4942e67624e2b40a2a949f5cc658ccce">ZeroPosition</a>[1]++;
+<a name="l00723"></a>00723                         s3d_translate(<a class="code" href="main_8c.html#e113d40abb6f4dd73e4b1253917a1942">ZeroPoint</a>,<a class="code" href="main_8c.html#4942e67624e2b40a2a949f5cc658ccce">ZeroPosition</a>[0],<a class="code" href="main_8c.html#4942e67624e2b40a2a949f5cc658ccce">ZeroPosition</a>[1],<a class="code" href="main_8c.html#4942e67624e2b40a2a949f5cc658ccce">ZeroPosition</a>[2]);
+<a name="l00724"></a>00724                         <span class="keywordflow">break</span>;
+<a name="l00725"></a>00725                 <span class="keywordflow">case</span> S3DK_DOWN: <span class="comment">/* arrow down -&gt; move nodes down */</span>
+<a name="l00726"></a>00726                         <a class="code" href="main_8c.html#4942e67624e2b40a2a949f5cc658ccce">ZeroPosition</a>[1]--;
+<a name="l00727"></a>00727                         s3d_translate(<a class="code" href="main_8c.html#e113d40abb6f4dd73e4b1253917a1942">ZeroPoint</a>,<a class="code" href="main_8c.html#4942e67624e2b40a2a949f5cc658ccce">ZeroPosition</a>[0],<a class="code" href="main_8c.html#4942e67624e2b40a2a949f5cc658ccce">ZeroPosition</a>[1],<a class="code" href="main_8c.html#4942e67624e2b40a2a949f5cc658ccce">ZeroPosition</a>[2]);
+<a name="l00728"></a>00728                         <span class="keywordflow">break</span>;
+<a name="l00729"></a>00729                 <span class="keywordflow">case</span> S3DK_PAGEUP: <span class="comment">/* page up -&gt; change factor in calc_olsr_node_mov */</span>
+<a name="l00730"></a>00730                         <span class="keywordflow">if</span>(<a class="code" href="main_8c.html#98d8a7901c60f18d6bf9b35998147831">Factor</a> &lt; 0.9)
+<a name="l00731"></a>00731                                 <a class="code" href="main_8c.html#98d8a7901c60f18d6bf9b35998147831">Factor</a> += 0.1;
+<a name="l00732"></a>00732                         <span class="keywordflow">break</span>;
+<a name="l00733"></a>00733                 <span class="keywordflow">case</span> S3DK_PAGEDOWN: <span class="comment">/* page down -&gt; change factor in calc_olsr_node_mov */</span>
+<a name="l00734"></a>00734                         <span class="keywordflow">if</span>(<a class="code" href="main_8c.html#98d8a7901c60f18d6bf9b35998147831">Factor</a> &gt; 0.3)
+<a name="l00735"></a>00735                                 <a class="code" href="main_8c.html#98d8a7901c60f18d6bf9b35998147831">Factor</a> -= 0.1;
+<a name="l00736"></a>00736                         <span class="keywordflow">break</span>;
+<a name="l00737"></a>00737         }
+<a name="l00738"></a>00738 }
+<a name="l00739"></a>00739 
+<a name="l00740"></a>00740 <span class="comment">/***</span>
+<a name="l00741"></a>00741 <span class="comment"> *</span>
+<a name="l00742"></a>00742 <span class="comment"> * eventhandler when object clicked</span>
+<a name="l00743"></a>00743 <span class="comment"> *</span>
+<a name="l00744"></a>00744 <span class="comment"> ***/</span>
+<a name="l00745"></a>00745 
+<a name="l00746"></a><a class="code" href="main_8c.html#ddbd46dad32b89cec68daa03a08f3582">00746</a> <span class="keywordtype">void</span> <a class="code" href="main_8c.html#ddbd46dad32b89cec68daa03a08f3582">object_click</a>(<span class="keyword">struct</span> s3d_evt *evt)
+<a name="l00747"></a>00747 {
+<a name="l00748"></a>00748         <span class="keywordtype">int</span> oid;
+<a name="l00749"></a>00749         <span class="comment">/* float distance,tmp_vector[3]; */</span>
+<a name="l00750"></a>00750         <span class="keywordtype">char</span> ip_str[50];
+<a name="l00751"></a>00751         <span class="keyword">struct </span><a class="code" href="structolsr__node.html">olsr_node</a> *<a class="code" href="structolsr__node.html">olsr_node</a>;
+<a name="l00752"></a>00752         oid=(int)*((<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> *)evt-&gt;buf);
+<a name="l00753"></a>00753         olsr_node = *<a class="code" href="olsrs3d_8h.html#ef8aff26d4e096ef0880c204c13309f0">lst_search</a>(oid);
+<a name="l00754"></a>00754         <span class="comment">/* printf("obj2ip: search return %s\n",olsr_node-&gt;ip); */</span>
+<a name="l00755"></a>00755         <span class="comment">/*</span>
+<a name="l00756"></a>00756 <span class="comment">        distance = dirt(CamPosition[0],olsr_node-&gt;pos_vec,tmp_vector);</span>
+<a name="l00757"></a>00757 <span class="comment">        mov_add(ZeroPosition,tmp_vector,1.0);</span>
+<a name="l00758"></a>00758 <span class="comment">        s3d_translate(ZeroPoint,ZeroPosition[0] * -1,ZeroPosition[1] * -1,ZeroPosition[2] * -1);</span>
+<a name="l00759"></a>00759 <span class="comment">        */</span>
+<a name="l00760"></a>00760         <span class="keywordflow">if</span> ( <a class="code" href="main_8c.html#bc4292eef79532d125b616a9e0ec8fa0">Olsr_ip_label_obj</a> != -1 ) s3d_del_object( <a class="code" href="main_8c.html#bc4292eef79532d125b616a9e0ec8fa0">Olsr_ip_label_obj</a> );
+<a name="l00761"></a>00761         <span class="comment">/*Olsr_ip_label_obj = s3d_clone(olsr_node-&gt;desc_id);*/</span>
+<a name="l00762"></a>00762         snprintf( ip_str, 50, <span class="stringliteral">"ip: %s"</span>, olsr_node-&gt;<a class="code" href="structolsr__node.html#59690d75faff5c149faecacb4f4d2a57">ip</a> );
+<a name="l00763"></a>00763         <a class="code" href="main_8c.html#bc4292eef79532d125b616a9e0ec8fa0">Olsr_ip_label_obj</a> = s3d_draw_string( ip_str, NULL );
+<a name="l00764"></a>00764         s3d_link( <a class="code" href="main_8c.html#bc4292eef79532d125b616a9e0ec8fa0">Olsr_ip_label_obj</a>, 0 );
+<a name="l00765"></a>00765         s3d_flags_on( <a class="code" href="main_8c.html#bc4292eef79532d125b616a9e0ec8fa0">Olsr_ip_label_obj</a>, S3D_OF_VISIBLE );
+<a name="l00766"></a>00766         s3d_scale( <a class="code" href="main_8c.html#bc4292eef79532d125b616a9e0ec8fa0">Olsr_ip_label_obj</a>, 0.2 );
+<a name="l00767"></a>00767         s3d_translate( <a class="code" href="main_8c.html#bc4292eef79532d125b616a9e0ec8fa0">Olsr_ip_label_obj</a>, <a class="code" href="main_8c.html#6f68bad9075598ca8ede1827c6832376">Left</a>*3.0, -<a class="code" href="main_8c.html#f23a6ad2da4511ef430c4f522ae9f4cc">Bottom</a>*3.0-0.6, -3.0 );
+<a name="l00768"></a>00768 }
+<a name="l00769"></a>00769 
+<a name="l00770"></a>00770 <span class="comment">/***</span>
+<a name="l00771"></a>00771 <span class="comment"> *</span>
+<a name="l00772"></a>00772 <span class="comment"> * eventhandler when object change by user</span>
+<a name="l00773"></a>00773 <span class="comment"> * such as Cam</span>
+<a name="l00774"></a>00774 <span class="comment"> *</span>
+<a name="l00775"></a>00775 <span class="comment"> ***/</span>
+<a name="l00776"></a>00776 
+<a name="l00777"></a><a class="code" href="main_8c.html#b7f2ab10a4f7d5ef94d5205fc6147cc4">00777</a> <span class="keywordtype">void</span> <a class="code" href="main_8c.html#b7f2ab10a4f7d5ef94d5205fc6147cc4">object_info</a>(<span class="keyword">struct</span> s3d_evt *hrmz)
+<a name="l00778"></a>00778 {
+<a name="l00779"></a>00779         <span class="keyword">struct </span>s3d_obj_info *inf;
+<a name="l00780"></a>00780         inf=(<span class="keyword">struct </span>s3d_obj_info *)hrmz-&gt;buf;
+<a name="l00781"></a>00781         if (inf-&gt;object==0)
+<a name="l00782"></a>00782         {
+<a name="l00783"></a>00783                 <a class="code" href="main_8c.html#5d58294b80563f797d1a14d1d739f52b">CamPosition</a>[0][0] = inf-&gt;trans_x;
+<a name="l00784"></a>00784                 <a class="code" href="main_8c.html#5d58294b80563f797d1a14d1d739f52b">CamPosition</a>[0][1] = inf-&gt;trans_y;
+<a name="l00785"></a>00785                 <a class="code" href="main_8c.html#5d58294b80563f797d1a14d1d739f52b">CamPosition</a>[0][2] = inf-&gt;trans_z;
+<a name="l00786"></a>00786                 <a class="code" href="main_8c.html#5d58294b80563f797d1a14d1d739f52b">CamPosition</a>[1][0] = inf-&gt;rot_x;
+<a name="l00787"></a>00787                 <a class="code" href="main_8c.html#5d58294b80563f797d1a14d1d739f52b">CamPosition</a>[1][1] = inf-&gt;rot_y;
+<a name="l00788"></a>00788                 <a class="code" href="main_8c.html#5d58294b80563f797d1a14d1d739f52b">CamPosition</a>[1][2] = inf-&gt;rot_z;
+<a name="l00789"></a>00789                 <a class="code" href="main_8c.html#fb33da16fedfac392508c8ca439aca5d">Asp</a>=inf-&gt;scale;
+<a name="l00790"></a>00790                 <span class="keywordflow">if</span> (<a class="code" href="main_8c.html#fb33da16fedfac392508c8ca439aca5d">Asp</a>&gt;1.0) <span class="comment">/* wide screen */</span>
+<a name="l00791"></a>00791                 {
+<a name="l00792"></a>00792                         <a class="code" href="main_8c.html#f23a6ad2da4511ef430c4f522ae9f4cc">Bottom</a>=-1.0;
+<a name="l00793"></a>00793                         <a class="code" href="main_8c.html#6f68bad9075598ca8ede1827c6832376">Left</a>=-<a class="code" href="main_8c.html#fb33da16fedfac392508c8ca439aca5d">Asp</a>;
+<a name="l00794"></a>00794                 } <span class="keywordflow">else</span> {  <span class="comment">/* high screen */</span>
+<a name="l00795"></a>00795                         <a class="code" href="main_8c.html#f23a6ad2da4511ef430c4f522ae9f4cc">Bottom</a>=(-1.0/<a class="code" href="main_8c.html#fb33da16fedfac392508c8ca439aca5d">Asp</a>);
+<a name="l00796"></a>00796                         <a class="code" href="main_8c.html#6f68bad9075598ca8ede1827c6832376">Left</a>=-1.0;
+<a name="l00797"></a>00797 
+<a name="l00798"></a>00798                 }
+<a name="l00799"></a>00799 
+<a name="l00800"></a>00800         }
+<a name="l00801"></a>00801         <span class="comment">/* printf("%f %f %f\n",inf-&gt;trans_x,inf-&gt;trans_y,inf-&gt;trans_z); */</span>
+<a name="l00802"></a>00802 }
+<a name="l00803"></a>00803 
+<a name="l00804"></a><a class="code" href="main_8c.html#0ddf1224851353fc92bfbff6f499fa97">00804</a> <span class="keywordtype">int</span> <a class="code" href="main_8c.html#0ddf1224851353fc92bfbff6f499fa97">main</a>( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[] ) {
+<a name="l00805"></a>00805 
+<a name="l00806"></a>00806         <span class="keywordtype">int</span> optchar;
+<a name="l00807"></a>00807         strncpy( <a class="code" href="main_8c.html#9034a20840ce47fbec531d2b4a4a9f21">Olsr_host</a>, <span class="stringliteral">"127.0.0.1"</span>, 256 );
+<a name="l00808"></a>00808         <a class="code" href="olsrs3d_8h.html#00f1cd38b187535569d0354f2506fb74">lbuf</a>[0] = <span class="charliteral">'\0'</span>;   <span class="comment">/* init lbuf */</span>
+<a name="l00809"></a>00809 
+<a name="l00810"></a>00810         <span class="keywordflow">while</span> ( ( optchar = getopt ( argc, argv, <span class="stringliteral">"dhH:"</span> ) ) != -1 ) {
+<a name="l00811"></a>00811 
+<a name="l00812"></a>00812                 <span class="keywordflow">switch</span> ( optchar ) {
+<a name="l00813"></a>00813 
+<a name="l00814"></a>00814                         <span class="keywordflow">case</span> <span class="charliteral">'d'</span>:
+<a name="l00815"></a>00815                                 <a class="code" href="main_8c.html#923774364cedbc16baa0bc05e9be136c">Debug</a> = 1;
+<a name="l00816"></a>00816                                 <span class="keywordflow">break</span>;
+<a name="l00817"></a>00817 
+<a name="l00818"></a>00818                         <span class="keywordflow">case</span> <span class="charliteral">'H'</span>:
+<a name="l00819"></a>00819                                 strncpy( <a class="code" href="main_8c.html#9034a20840ce47fbec531d2b4a4a9f21">Olsr_host</a>, optarg, 256 );
+<a name="l00820"></a>00820                                 <span class="keywordflow">break</span>;
+<a name="l00821"></a>00821 
+<a name="l00822"></a>00822                         <span class="keywordflow">case</span> <span class="charliteral">'h'</span>:
+<a name="l00823"></a>00823                         <span class="keywordflow">default</span>:
+<a name="l00824"></a>00824                                 <a class="code" href="main_8c.html#a1187b70998f73cdb598833d6afaa30a">print_usage</a>();
+<a name="l00825"></a>00825                                 <span class="keywordflow">return</span> (0);
+<a name="l00826"></a>00826 
+<a name="l00827"></a>00827                 }
+<a name="l00828"></a>00828 
+<a name="l00829"></a>00829         }
+<a name="l00830"></a>00830 
+<a name="l00831"></a>00831         <span class="keywordflow">if</span> ( <a class="code" href="main_8c.html#923774364cedbc16baa0bc05e9be136c">Debug</a> ) printf( <span class="stringliteral">"debug mode enabled ...\n"</span> );
+<a name="l00832"></a>00832 
+<a name="l00833"></a>00833         <span class="comment">/* initialize obj2ip linked list */</span>
+<a name="l00834"></a>00834         <a class="code" href="olsrs3d_8h.html#edfb2ae44af543946842187ced1cd47e">lst_initialize</a>();
+<a name="l00835"></a>00835 
+<a name="l00836"></a>00836         <span class="comment">/* delete olsrs3d options */</span>
+<a name="l00837"></a>00837         <span class="keywordflow">while</span> ( ( optind &lt; argc ) &amp;&amp; ( argv[optind][0] != <span class="charliteral">'-'</span> ) ) optind++;   <span class="comment">/* optind may point to ip addr of '-H' */</span>
+<a name="l00838"></a>00838         optind--;
+<a name="l00839"></a>00839         argv[optind] = argv[0];   <span class="comment">/* save program path */</span>
+<a name="l00840"></a>00840         argc -= optind;   <span class="comment">/* jump over olsrs3d options */</span>
+<a name="l00841"></a>00841         argv += optind;
+<a name="l00842"></a>00842 
+<a name="l00843"></a>00843         <span class="comment">/* set extern int optind = 0 for parse_args in io.c */</span>
+<a name="l00844"></a>00844         optind = 0;
+<a name="l00845"></a>00845 
+<a name="l00846"></a>00846 
+<a name="l00847"></a>00847         <span class="keywordflow">if</span> (!<a class="code" href="net_8c.html#63c933342efd8cac7f272b92d8acab05">net_init</a>(<a class="code" href="main_8c.html#9034a20840ce47fbec531d2b4a4a9f21">Olsr_host</a>))
+<a name="l00848"></a>00848         {
+<a name="l00849"></a>00849                 <span class="keywordflow">if</span> (!s3d_init(&amp;argc,&amp;argv,<span class="stringliteral">"olsrs3d"</span>))
+<a name="l00850"></a>00850                 {
+<a name="l00851"></a>00851                         s3d_set_callback(S3D_EVENT_OBJ_INFO,<a class="code" href="main_8c.html#b7f2ab10a4f7d5ef94d5205fc6147cc4">object_info</a>);
+<a name="l00852"></a>00852                         s3d_set_callback(S3D_EVENT_OBJ_CLICK,<a class="code" href="main_8c.html#ddbd46dad32b89cec68daa03a08f3582">object_click</a>);
+<a name="l00853"></a>00853                         s3d_set_callback(S3D_EVENT_KEY,<a class="code" href="main_8c.html#2f5982986645c1e7a202d72bc5e633eb">keypress</a>);
+<a name="l00854"></a>00854                         s3d_set_callback(S3D_EVENT_QUIT,<a class="code" href="main_8c.html#8c528baf37154d347366083f0f816846">stop</a>);
+<a name="l00855"></a>00855                         <span class="keywordflow">if</span> (s3d_select_font(<span class="stringliteral">"vera"</span>))
+<a name="l00856"></a>00856                                 printf(<span class="stringliteral">"font not found\n"</span>);
+<a name="l00857"></a>00857                         <a class="code" href="main_8c.html#5eba8148fe9257c34665ed364b595fdb">Olsr_node_obj</a> = s3d_import_3ds_file( <span class="stringliteral">"objs/accesspoint.3ds"</span> );
+<a name="l00858"></a>00858                         <a class="code" href="main_8c.html#b02228665cef19331d409b0d8a831531">Olsr_node_inet_obj</a> = s3d_import_3ds_file( <span class="stringliteral">"objs/accesspoint_inet.3ds"</span> );
+<a name="l00859"></a>00859                         <a class="code" href="main_8c.html#c03c9b38147e4231238c44f4b5fbdff7">Olsr_node_hna_net</a> = s3d_import_3ds_file( <span class="stringliteral">"objs/internet.3ds"</span> );
+<a name="l00860"></a>00860                         <a class="code" href="main_8c.html#e113d40abb6f4dd73e4b1253917a1942">ZeroPoint</a> = s3d_new_object();
+<a name="l00861"></a>00861                         s3d_mainloop(<a class="code" href="main_8c.html#896df4ffe3f986ad843e4d191cd712b3">mainloop</a>);
+<a name="l00862"></a>00862                         s3d_quit();
+<a name="l00863"></a>00863                         <a class="code" href="net_8c.html#98aebc7a8515c76551eb15ecd465b923">net_quit</a>();
+<a name="l00864"></a>00864                 }
+<a name="l00865"></a>00865         }
+<a name="l00866"></a>00866         <span class="keywordflow">return</span>(0);
+<a name="l00867"></a>00867 }
+<a name="l00868"></a>00868 
+</pre></div><hr size="1"><address style="align: right;"><small>Generated on Sun Mar 19 13:28:20 2006 for olsrs3d by&nbsp;
+<a href="http://www.doxygen.org/index.html">
+<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6 </small></address>
+</body>
+</html>

Added: trunk/apps/olsrs3d/doxygen/html/main_8c.html
===================================================================
--- trunk/apps/olsrs3d/doxygen/html/main_8c.html	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/html/main_8c.html	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,2100 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
+<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
+<title>olsrs3d: s3d/apps/olsrs3d/main.c File Reference</title>
+<link href="doxygen.css" rel="stylesheet" type="text/css">
+<link href="tabs.css" rel="stylesheet" type="text/css">
+</head><body>
+<!-- Generated by Doxygen 1.4.6 -->
+<div class="tabs">
+  <ul>
+    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
+    <li><a href="classes.html"><span>Classes</span></a></li>
+    <li id="current"><a href="files.html"><span>Files</span></a></li>
+    <li><a href="dirs.html"><span>Directories</span></a></li>
+  </ul></div>
+<div class="tabs">
+  <ul>
+    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
+    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
+  </ul></div>
+<div class="nav">
+<a class="el" href="dir_9d2efe7c7f87ee6309da929964f0685b.html">s3d</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_5d167550802dbd943c0631943f884f5b.html">apps</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_bf110b9fd34b0903efb6170e1cee5506.html">olsrs3d</a></div>
+<h1>main.c File Reference</h1><code>#include &lt;stdio.h&gt;</code><br>
+<code>#include &lt;s3d.h&gt;</code><br>
+<code>#include &lt;s3d_keysym.h&gt;</code><br>
+<code>#include &lt;time.h&gt;</code><br>
+<code>#include &lt;string.h&gt;</code><br>
+<code>#include &lt;math.h&gt;</code><br>
+<code>#include &lt;getopt.h&gt;</code><br>
+<code>#include &lt;stdlib.h&gt;</code><br>
+<code>#include &quot;<a class="el" href="olsrs3d_8h-source.html">olsrs3d.h</a>&quot;</code><br>
+
+<p>
+<a href="main_8c-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
+<tr><td></td></tr>
+<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
+<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#ac3553b3932cbfeeac4526ce7ca0336b">SPEED</a>&nbsp;&nbsp;&nbsp;10.0</td></tr>
+
+<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
+<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#668e36a25680cc3e0ac4d85a418a838a">calc_olsr_node_mov</a> (void)</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#753e5e5d6fbcbd893bb466ce045a3316">dirt</a> (float p1[], float p2[], float p3[])</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#da3bfd6c7ec35068dbcdf966a4628f5e">dist</a> (float p1[], float p2[])</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#de55269b71a792259ef22763327686b9">handle_olsr_node</a> (struct <a class="el" href="structolsr__node.html">olsr_node</a> *<a class="el" href="structolsr__node.html">olsr_node</a>)</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#2f5982986645c1e7a202d72bc5e633eb">keypress</a> (struct s3d_evt *event)</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#0ddf1224851353fc92bfbff6f499fa97">main</a> (int argc, char *argv[])</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#896df4ffe3f986ad843e4d191cd712b3">mainloop</a> ()</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#f4369a866dcd049e2642e137507e8ff1">mov_add</a> (float mov[], float p[], float fac)</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#b8d0d8cf5ac8914802be645e15241b77">move_olsr_nodes</a> (void)</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#ddbd46dad32b89cec68daa03a08f3582">object_click</a> (struct s3d_evt *evt)</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#b7f2ab10a4f7d5ef94d5205fc6147cc4">object_info</a> (struct s3d_evt *hrmz)</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#be0835e7acb76ea987ac80769302d90a">out_of_mem</a> (void)</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a1187b70998f73cdb598833d6afaa30a">print_usage</a> (void)</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#8c528baf37154d347366083f0f816846">stop</a> ()</td></tr>
+
+<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
+<tr><td class="memItemLeft" nowrap align="right" valign="top">float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#fb33da16fedfac392508c8ca439aca5d">Asp</a> = 1.0</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#f23a6ad2da4511ef430c4f522ae9f4cc">Bottom</a> = -1.0</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#5d58294b80563f797d1a14d1d739f52b">CamPosition</a> [2][3]</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#aaca6648d8e9266d2fbeb21a6a4f4745">ColorSwitch</a> = 0</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structolsr__con.html">olsr_con</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#0643a36891539929d987e2ee83ff81d1">Con_begin</a> = NULL</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#923774364cedbc16baa0bc05e9be136c">Debug</a> = 0</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#98d8a7901c60f18d6bf9b35998147831">Factor</a> = 0.5</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#58acad60c78b63554c696703227d0b7b">Last_olsr_node_count</a> = -1</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#6f68bad9075598ca8ede1827c6832376">Left</a> = -1.0</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structObj__to__ip.html">Obj_to_ip</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#5bcc20f84efa7bd4aafc56a629f2eff3">Net_read_count</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structObj__to__ip.html">Obj_to_ip</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#236217b97f5fe65457d8b22c73c5073d">Obj_to_ip_end</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structObj__to__ip.html">Obj_to_ip</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#9494e9e8cbdc4eceb86cb33ff0006785">Obj_to_ip_head</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#9034a20840ce47fbec531d2b4a4a9f21">Olsr_host</a> [256]</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#bc4292eef79532d125b616a9e0ec8fa0">Olsr_ip_label_obj</a> = -1</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#86c048bc4aaab319f4d61f7c0e1f056f">Olsr_node_count</a> = 0</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#4dfd0657ff868fa02113bcd3335acff1">Olsr_node_count_obj</a> = -1</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#c03c9b38147e4231238c44f4b5fbdff7">Olsr_node_hna_net</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#b02228665cef19331d409b0d8a831531">Olsr_node_inet_obj</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#5eba8148fe9257c34665ed364b595fdb">Olsr_node_obj</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structolsr__node.html">olsr_node</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#c5c5c6846587092d0c23b58b558e680c">Olsr_root</a> = NULL</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#cfe4f8990043eade6e82cab3f101b12e">RotateSpeed</a> = 2</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#4370348160930ca94ac7a5d1a6fc5172">RotateSwitch</a> = 0</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">static struct timespec&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#ea8eb9210d53cd6c1b34e6e7f80a243c">sleep_time</a> = { 0, 100 * 1000 * 1000 }</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#e113d40abb6f4dd73e4b1253917a1942">ZeroPoint</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#4942e67624e2b40a2a949f5cc658ccce">ZeroPosition</a> [3] = {0,0,0}</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#ea9e1c287e0c505c2075a0b936dc3404">Zp_rotate</a> = 0</td></tr>
+
+</table>
+<hr><h2>Define Documentation</h2>
+<a class="anchor" name="ac3553b3932cbfeeac4526ce7ca0336b"></a><!-- doxytag: member="main.c::SPEED" ref="ac3553b3932cbfeeac4526ce7ca0336b" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">#define SPEED&nbsp;&nbsp;&nbsp;10.0          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00037">37</a> of file <a class="el" href="main_8c-source.html">main.c</a>.    </td>
+  </tr>
+</table>
+<hr><h2>Function Documentation</h2>
+<a class="anchor" name="668e36a25680cc3e0ac4d85a418a838a"></a><!-- doxytag: member="main.c::calc_olsr_node_mov" ref="668e36a25680cc3e0ac4d85a418a838a" args="(void)" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">void calc_olsr_node_mov           </td>
+          <td class="md" valign="top">(&nbsp;</td>
+          <td class="md" nowrap valign="top">void&nbsp;</td>
+          <td class="mdname1" valign="top" nowrap>          </td>
+          <td class="md" valign="top">&nbsp;)&nbsp;</td>
+          <td class="md" nowrap></td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00400">400</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+References <a class="el" href="main_8c-source.html#l00045">Con_begin</a>, <a class="el" href="main_8c-source.html#l00138">dirt()</a>, <a class="el" href="main_8c-source.html#l00067">Factor</a>, <a class="el" href="olsrs3d_8h-source.html#l00041">olsr_con::left_etx</a>, <a class="el" href="olsrs3d_8h-source.html#l00039">olsr_con::left_olsr_node</a>, <a class="el" href="main_8c-source.html#l00166">mov_add()</a>, <a class="el" href="olsrs3d_8h-source.html#l00070">olsr_node::mov_vec</a>, <a class="el" href="olsrs3d_8h-source.html#l00037">olsr_con::next_olsr_con</a>, <a class="el" href="olsrs3d_8h-source.html#l00069">olsr_node::pos_vec</a>, <a class="el" href="olsrs3d_8h-source.html#l00042">olsr_con::right_etx</a>, and <a class="el" href="olsrs3d_8h-source.html#l00040">olsr_con::right_olsr_node</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00624">mainloop()</a>.<div class="fragment"><pre class="fragment"><a name="l00400"></a>00400                                 {
+<a name="l00401"></a>00401 
+<a name="l00402"></a>00402         <span class="keywordtype">float</span> distance;
+<a name="l00403"></a>00403         <span class="keywordtype">float</span> tmp_mov_vec[3];
+<a name="l00404"></a>00404         <span class="keywordtype">float</span> f;
+<a name="l00405"></a>00405         <span class="keyword">struct </span><a class="code" href="structolsr__con.html">olsr_con</a> *<a class="code" href="structolsr__con.html">olsr_con</a> = <a class="code" href="main_8c.html#0643a36891539929d987e2ee83ff81d1">Con_begin</a>;
+<a name="l00406"></a>00406 
+<a name="l00407"></a>00407         <span class="keywordflow">while</span> ( olsr_con != NULL ) {
+<a name="l00408"></a>00408 
+<a name="l00409"></a>00409                 <span class="keywordflow">if</span> ( ( olsr_con-&gt;<a class="code" href="structolsr__con.html#d93efab11883355b45a0460456991362">left_etx</a> != 0.0 ) &amp;&amp; ( olsr_con-&gt;<a class="code" href="structolsr__con.html#30d90c31e93a79ba37ca51b8d146693a">right_etx</a> != 0.0  ) ) {
+<a name="l00410"></a>00410 
+<a name="l00411"></a>00411                         distance = <a class="code" href="main_8c.html#753e5e5d6fbcbd893bb466ce045a3316">dirt</a>( olsr_con-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>, olsr_con-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>, tmp_mov_vec );
+<a name="l00412"></a>00412                         f = ( ( olsr_con-&gt;<a class="code" href="structolsr__con.html#d93efab11883355b45a0460456991362">left_etx</a> + olsr_con-&gt;<a class="code" href="structolsr__con.html#30d90c31e93a79ba37ca51b8d146693a">right_etx</a> ) / 4.0 ) / distance;
+<a name="l00413"></a>00413 
+<a name="l00414"></a>00414                         <span class="comment">/***</span>
+<a name="l00415"></a>00415 <span class="comment">                         * drift factor - 0.0 &lt; factor &lt; 1.0 ( best results: 0.3 &lt; factor &lt; 0.9</span>
+<a name="l00416"></a>00416 <span class="comment">                         * small factor: fast and strong drift to neighbours</span>
+<a name="l00417"></a>00417 <span class="comment">                         ***/</span>
+<a name="l00418"></a>00418                         <span class="keywordflow">if</span> ( f &lt; <a class="code" href="main_8c.html#98d8a7901c60f18d6bf9b35998147831">Factor</a> ) f = <a class="code" href="main_8c.html#98d8a7901c60f18d6bf9b35998147831">Factor</a>;
+<a name="l00419"></a>00419 
+<a name="l00420"></a>00420                         <a class="code" href="main_8c.html#f4369a866dcd049e2642e137507e8ff1">mov_add</a>( olsr_con-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>, tmp_mov_vec, 1 / f - 1 );
+<a name="l00421"></a>00421                         <a class="code" href="main_8c.html#f4369a866dcd049e2642e137507e8ff1">mov_add</a>( olsr_con-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>, tmp_mov_vec, - ( 1 / f - 1 ) );
+<a name="l00422"></a>00422 
+<a name="l00423"></a>00423                 }
+<a name="l00424"></a>00424 
+<a name="l00425"></a>00425                 olsr_con = olsr_con-&gt;<a class="code" href="structolsr__con.html#369dfd6eec077d0a6228cd1387135e6e">next_olsr_con</a>;
+<a name="l00426"></a>00426 
+<a name="l00427"></a>00427         }
+<a name="l00428"></a>00428 
+<a name="l00429"></a>00429 }
+</pre></div>
+<p>
+    </td>
+  </tr>
+</table>
+<a class="anchor" name="753e5e5d6fbcbd893bb466ce045a3316"></a><!-- doxytag: member="main.c::dirt" ref="753e5e5d6fbcbd893bb466ce045a3316" args="(float p1[], float p2[], float p3[])" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">float dirt           </td>
+          <td class="md" valign="top">(&nbsp;</td>
+          <td class="md" nowrap valign="top">float&nbsp;</td>
+          <td class="mdname" nowrap> <em>p1</em>[], </td>
+        </tr>
+        <tr>
+          <td class="md" nowrap align="right"></td>
+          <td class="md"></td>
+          <td class="md" nowrap>float&nbsp;</td>
+          <td class="mdname" nowrap> <em>p2</em>[], </td>
+        </tr>
+        <tr>
+          <td class="md" nowrap align="right"></td>
+          <td class="md"></td>
+          <td class="md" nowrap>float&nbsp;</td>
+          <td class="mdname" nowrap> <em>p3</em>[]</td>
+        </tr>
+        <tr>
+          <td class="md"></td>
+          <td class="md">)&nbsp;</td>
+          <td class="md" colspan="2"></td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00138">138</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+References <a class="el" href="main_8c-source.html#l00114">dist()</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00400">calc_olsr_node_mov()</a>, <a class="el" href="main_8c-source.html#l00186">handle_olsr_node()</a>, and <a class="el" href="main_8c-source.html#l00439">move_olsr_nodes()</a>.<div class="fragment"><pre class="fragment"><a name="l00139"></a>00139 {
+<a name="l00140"></a>00140         <span class="keywordtype">float</span> d;
+<a name="l00141"></a>00141         d=<a class="code" href="main_8c.html#da3bfd6c7ec35068dbcdf966a4628f5e">dist</a>(p1,p2);
+<a name="l00142"></a>00142         <span class="keywordflow">if</span> (d!=0.0)
+<a name="l00143"></a>00143         {
+<a name="l00144"></a>00144                 p3[0]=p2[0]-p1[0];
+<a name="l00145"></a>00145                 p3[1]=p2[1]-p1[1];
+<a name="l00146"></a>00146                 p3[2]=p2[2]-p1[2];
+<a name="l00147"></a>00147         } <span class="keywordflow">else</span> {
+<a name="l00148"></a>00148                 p3[0]=p2[0]=p1[0]=0.0;
+<a name="l00149"></a>00149         }
+<a name="l00150"></a>00150         <span class="keywordflow">return</span>(d);
+<a name="l00151"></a>00151 }
+</pre></div>
+<p>
+    </td>
+  </tr>
+</table>
+<a class="anchor" name="da3bfd6c7ec35068dbcdf966a4628f5e"></a><!-- doxytag: member="main.c::dist" ref="da3bfd6c7ec35068dbcdf966a4628f5e" args="(float p1[], float p2[])" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">float dist           </td>
+          <td class="md" valign="top">(&nbsp;</td>
+          <td class="md" nowrap valign="top">float&nbsp;</td>
+          <td class="mdname" nowrap> <em>p1</em>[], </td>
+        </tr>
+        <tr>
+          <td class="md" nowrap align="right"></td>
+          <td class="md"></td>
+          <td class="md" nowrap>float&nbsp;</td>
+          <td class="mdname" nowrap> <em>p2</em>[]</td>
+        </tr>
+        <tr>
+          <td class="md"></td>
+          <td class="md">)&nbsp;</td>
+          <td class="md" colspan="2"></td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00114">114</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00138">dirt()</a>, and <a class="el" href="main_8c-source.html#l00439">move_olsr_nodes()</a>.<div class="fragment"><pre class="fragment"><a name="l00115"></a>00115 {
+<a name="l00116"></a>00116         <span class="keywordtype">float</span> p[3];
+<a name="l00117"></a>00117         p[0]=p1[0]-p2[0];
+<a name="l00118"></a>00118         p[1]=p1[1]-p2[1];
+<a name="l00119"></a>00119         p[2]=p1[2]-p2[2];
+<a name="l00120"></a>00120         <span class="keywordflow">return</span> (sqrt(p[0]*p[0]   +  p[1]*p[1]  +  p[2]*p[2]));
+<a name="l00121"></a>00121 
+<a name="l00122"></a>00122 }
+</pre></div>
+<p>
+    </td>
+  </tr>
+</table>
+<a class="anchor" name="de55269b71a792259ef22763327686b9"></a><!-- doxytag: member="main.c::handle_olsr_node" ref="de55269b71a792259ef22763327686b9" args="(struct olsr_node *olsr_node)" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">void handle_olsr_node           </td>
+          <td class="md" valign="top">(&nbsp;</td>
+          <td class="md" nowrap valign="top">struct <a class="el" href="structolsr__node.html">olsr_node</a> *&nbsp;</td>
+          <td class="mdname1" valign="top" nowrap> <em>olsr_node</em>          </td>
+          <td class="md" valign="top">&nbsp;)&nbsp;</td>
+          <td class="md" nowrap></td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00186">186</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+References <a class="el" href="main_8c-source.html#l00060">CamPosition</a>, <a class="el" href="main_8c-source.html#l00041">Debug</a>, <a class="el" href="olsrs3d_8h-source.html#l00072">olsr_node::desc_id</a>, <a class="el" href="olsrs3d_8h-source.html#l00073">olsr_node::desc_length</a>, <a class="el" href="main_8c-source.html#l00138">dirt()</a>, <a class="el" href="olsrs3d_8h-source.html#l00064">olsr_node::ip</a>, <a class="el" href="olsrs3d_8h-source.html#l00067">olsr_node::last_seen</a>, <a class="el" href="olsrs3d_8h-source.html#l00062">olsr_node::left</a>, <a class="el" href="olsrs3d_8h-source.html#l00039">olsr_con::left_olsr_node</a>, <a class="el" href="process_8c-source.html#l00259">lst_add()</a>, <a class="el" href="process_8c-source.html#l00281">lst_del()</a>, <a class="el" href="main_8c-source.html#l00166">mov_add()</a>, <a class="el" href="olsrs3d_8h-source.html#l00070">olsr_node::mov_vec</a>, <a class="el" href="olsrs3d_8h-source.html#l00082">Obj_to_ip::next</a!
 >, <a class="el" href="olsrs3d_8h-source.html#l00037">olsr_con::next_olsr_con</a>, <a class="el" href="olsrs3d_8h-source.html#l00053">olsr_neigh_list::next_olsr_neigh_list</a>, <a class="el" href="olsrs3d_8h-source.html#l00065">olsr_node::node_type</a>, <a class="el" href="olsrs3d_8h-source.html#l00066">olsr_node::node_type_modified</a>, <a class="el" href="olsrs3d_8h-source.html#l00043">olsr_con::obj_id</a>, <a class="el" href="olsrs3d_8h-source.html#l00071">olsr_node::obj_id</a>, <a class="el" href="main_8c-source.html#l00047">Obj_to_ip_end</a>, <a class="el" href="main_8c-source.html#l00047">Obj_to_ip_head</a>, <a class="el" href="olsrs3d_8h-source.html#l00054">olsr_neigh_list::olsr_con</a>, <a class="el" href="olsrs3d_8h-source.html#l00074">olsr_node::olsr_neigh_list</a>, <a class="el" href="olsrs3d_8h-source.html#l00081">Obj_to_ip::olsr_node</a>, <a class="el" href="main_8c-source.html#l00049">Olsr_node_count</a>, <a class="el" href="main_8c-source.html#l00054">Olsr_no!
 de_hna_net</a>, <a class="el" href="main_8c-source.html#l00054!
 ">Olsr_n
ode_inet_obj</a>, <a class="el" href="main_8c-source.html#l00054">Olsr_node_obj</a>, <a class="el" href="olsrs3d_8h-source.html#l00069">olsr_node::pos_vec</a>, <a class="el" href="olsrs3d_8h-source.html#l00038">olsr_con::prev_olsr_con</a>, <a class="el" href="olsrs3d_8h-source.html#l00063">olsr_node::right</a>, <a class="el" href="olsrs3d_8h-source.html#l00040">olsr_con::right_olsr_node</a>, <a class="el" href="olsrs3d_8h-source.html#l00068">olsr_node::visible</a>, and <a class="el" href="main_8c-source.html#l00062">ZeroPoint</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00624">mainloop()</a>.<div class="fragment"><pre class="fragment"><a name="l00186"></a>00186                                                      {
+<a name="l00187"></a>00187 
+<a name="l00188"></a>00188         <span class="keywordtype">float</span> distance, angle, angle_rad;
+<a name="l00189"></a>00189         <span class="keywordtype">float</span> tmp_mov_vec[3], desc_norm_vec[3] = {0,0,-1};
+<a name="l00190"></a>00190         <span class="keyword">struct </span>olsr_node *other_node;
+<a name="l00191"></a>00191         <span class="keyword">struct </span><a class="code" href="structObj__to__ip.html">Obj_to_ip</a> *Obj_to_ip_curr;
+<a name="l00192"></a>00192         <span class="keyword">struct </span><a class="code" href="structolsr__neigh__list.html">olsr_neigh_list</a> *<a class="code" href="structolsr__neigh__list.html">olsr_neigh_list</a>, *prev_olsr_neigh_list, *other_node_neigh_list, *tmp_olsr_neigh_list;
+<a name="l00193"></a>00193 
+<a name="l00194"></a>00194         <span class="comment">/* no more nodes left */</span>
+<a name="l00195"></a>00195         <span class="keywordflow">if</span> ( olsr_node == NULL ) <span class="keywordflow">return</span>;
+<a name="l00196"></a>00196 
+<a name="l00197"></a>00197         <span class="comment">/* olsr node vanished */</span>
+<a name="l00198"></a>00198         <span class="keywordflow">if</span> ( olsr_node-&gt;<a class="code" href="structolsr__node.html#1d492aa6f4e75cc100d7a3e2f059d615">last_seen</a> &gt; 0 ) olsr_node-&gt;<a class="code" href="structolsr__node.html#1d492aa6f4e75cc100d7a3e2f059d615">last_seen</a>--;
+<a name="l00199"></a>00199 
+<a name="l00200"></a>00200         <span class="keywordflow">if</span> ( olsr_node-&gt;<a class="code" href="structolsr__node.html#1d492aa6f4e75cc100d7a3e2f059d615">last_seen</a> == 0 &amp;&amp; olsr_node-&gt;<a class="code" href="structolsr__node.html#f19d37e4aa5263be9a1741de24686664">visible</a> ) {
+<a name="l00201"></a>00201 
+<a name="l00202"></a>00202                 <span class="keywordflow">if</span> ( <a class="code" href="main_8c.html#923774364cedbc16baa0bc05e9be136c">Debug</a> ) printf( <span class="stringliteral">"olsr node vanished: %s\n"</span>, olsr_node-&gt;<a class="code" href="structolsr__node.html#59690d75faff5c149faecacb4f4d2a57">ip</a> );
+<a name="l00203"></a>00203 
+<a name="l00204"></a>00204                 <a class="code" href="main_8c.html#86c048bc4aaab319f4d61f7c0e1f056f">Olsr_node_count</a>--;
+<a name="l00205"></a>00205 
+<a name="l00206"></a>00206                 olsr_node-&gt;<a class="code" href="structolsr__node.html#f19d37e4aa5263be9a1741de24686664">visible</a> = 0;
+<a name="l00207"></a>00207 
+<a name="l00208"></a>00208                 <span class="comment">/* delete shape */</span>
+<a name="l00209"></a>00209                 <span class="keywordflow">if</span> ( olsr_node-&gt;<a class="code" href="structolsr__node.html#15be0912065801026e7b4411af561788">obj_id</a> != -1 ) {
+<a name="l00210"></a>00210 
+<a name="l00211"></a>00211                         <span class="comment">/* remove element from ob2ip list */</span>
+<a name="l00212"></a>00212                         <a class="code" href="olsrs3d_8h.html#febf2594bdfe9ec411d0c04c9cd951b3">lst_del</a>( olsr_node-&gt;<a class="code" href="structolsr__node.html#15be0912065801026e7b4411af561788">obj_id</a> );
+<a name="l00213"></a>00213                         <span class="comment">/* remove object from s3d server */</span>
+<a name="l00214"></a>00214                         s3d_del_object( olsr_node-&gt;<a class="code" href="structolsr__node.html#15be0912065801026e7b4411af561788">obj_id</a> );
+<a name="l00215"></a>00215 
+<a name="l00216"></a>00216                         olsr_node-&gt;<a class="code" href="structolsr__node.html#15be0912065801026e7b4411af561788">obj_id</a> = -1;
+<a name="l00217"></a>00217 
+<a name="l00218"></a>00218                 }
+<a name="l00219"></a>00219 
+<a name="l00220"></a>00220                 <span class="keywordflow">if</span> ( olsr_node-&gt;<a class="code" href="structolsr__node.html#f2e3f729be82b64001867038bbe8012a">desc_id</a> != -1 ) {
+<a name="l00221"></a>00221 
+<a name="l00222"></a>00222                         s3d_del_object( olsr_node-&gt;<a class="code" href="structolsr__node.html#f2e3f729be82b64001867038bbe8012a">desc_id</a> );
+<a name="l00223"></a>00223                         olsr_node-&gt;<a class="code" href="structolsr__node.html#f2e3f729be82b64001867038bbe8012a">desc_id</a> = -1;
+<a name="l00224"></a>00224 
+<a name="l00225"></a>00225                 }
+<a name="l00226"></a>00226 
+<a name="l00227"></a>00227                 <span class="comment">/* delete olsr connections of this node */</span>
+<a name="l00228"></a>00228                 olsr_neigh_list = olsr_node-&gt;<a class="code" href="structolsr__node.html#3b80ce78a06be6aba5a1f93887442764">olsr_neigh_list</a>;
+<a name="l00229"></a>00229 
+<a name="l00230"></a>00230                 <span class="keywordflow">while</span> ( olsr_neigh_list != NULL ) {
+<a name="l00231"></a>00231 
+<a name="l00232"></a>00232                         <span class="comment">/* get connection list of 'other' node */</span>
+<a name="l00233"></a>00233                         <span class="keywordflow">if</span> ( olsr_neigh_list-&gt;<a class="code" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">olsr_con</a>-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a> == olsr_node ) {
+<a name="l00234"></a>00234                                 other_node = olsr_neigh_list-&gt;<a class="code" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">olsr_con</a>-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>;
+<a name="l00235"></a>00235                         } <span class="keywordflow">else</span> {
+<a name="l00236"></a>00236                                 other_node = olsr_neigh_list-&gt;<a class="code" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">olsr_con</a>-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>;
+<a name="l00237"></a>00237                         }
+<a name="l00238"></a>00238 
+<a name="l00239"></a>00239                         <span class="comment">/* find this connection in 'other' nodes connection list ... */</span>
+<a name="l00240"></a>00240                         prev_olsr_neigh_list = NULL;
+<a name="l00241"></a>00241                         other_node_neigh_list = other_node-&gt;<a class="code" href="structolsr__node.html#3b80ce78a06be6aba5a1f93887442764">olsr_neigh_list</a>;
+<a name="l00242"></a>00242 
+<a name="l00243"></a>00243                         <span class="keywordflow">while</span> ( other_node_neigh_list != NULL ) {
+<a name="l00244"></a>00244 
+<a name="l00245"></a>00245                                 <span class="keywordflow">if</span> ( other_node_neigh_list-&gt;<a class="code" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">olsr_con</a> == olsr_neigh_list-&gt;<a class="code" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">olsr_con</a> ) {
+<a name="l00246"></a>00246 
+<a name="l00247"></a>00247                                         <span class="comment">/* and delete it ! */</span>
+<a name="l00248"></a>00248                                         <span class="keywordflow">if</span> ( prev_olsr_neigh_list != NULL ) {
+<a name="l00249"></a>00249                                                 <span class="comment">/* is first, any or last element in the list */</span>
+<a name="l00250"></a>00250                                                 prev_olsr_neigh_list-&gt;<a class="code" href="structolsr__neigh__list.html#f1d533fde49e1ed2ea5299661f5c10c6">next_olsr_neigh_list</a> = other_node_neigh_list-&gt;<a class="code" href="structolsr__neigh__list.html#f1d533fde49e1ed2ea5299661f5c10c6">next_olsr_neigh_list</a>;
+<a name="l00251"></a>00251                                         } <span class="keywordflow">else</span> {
+<a name="l00252"></a>00252                                                 <span class="comment">/* the only element in the list */</span>
+<a name="l00253"></a>00253                                                 other_node-&gt;<a class="code" href="structolsr__node.html#3b80ce78a06be6aba5a1f93887442764">olsr_neigh_list</a> = NULL;
+<a name="l00254"></a>00254                                         }
+<a name="l00255"></a>00255 
+<a name="l00256"></a>00256                                         free( other_node_neigh_list );
+<a name="l00257"></a>00257 
+<a name="l00258"></a>00258                                         <span class="keywordflow">break</span>;
+<a name="l00259"></a>00259 
+<a name="l00260"></a>00260                                 }
+<a name="l00261"></a>00261 
+<a name="l00262"></a>00262                                 prev_olsr_neigh_list = other_node_neigh_list;
+<a name="l00263"></a>00263                                 other_node_neigh_list = other_node_neigh_list-&gt;<a class="code" href="structolsr__neigh__list.html#f1d533fde49e1ed2ea5299661f5c10c6">next_olsr_neigh_list</a>;
+<a name="l00264"></a>00264 
+<a name="l00265"></a>00265                         }
+<a name="l00266"></a>00266 
+<a name="l00267"></a>00267                         s3d_del_object( olsr_neigh_list-&gt;<a class="code" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">olsr_con</a>-&gt;<a class="code" href="structolsr__con.html#fe985b6b83425cb17e801ac00001175e">obj_id</a> );
+<a name="l00268"></a>00268 
+<a name="l00269"></a>00269                         <span class="comment">/* delete connection */</span>
+<a name="l00270"></a>00270                         <span class="keywordflow">if</span> ( olsr_neigh_list-&gt;<a class="code" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">olsr_con</a>-&gt;<a class="code" href="structolsr__con.html#0382eebfbf31d5f217572d4907c503cb">prev_olsr_con</a> != NULL ) olsr_neigh_list-&gt;<a class="code" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">olsr_con</a>-&gt;<a class="code" href="structolsr__con.html#0382eebfbf31d5f217572d4907c503cb">prev_olsr_con</a>-&gt;<a class="code" href="structolsr__con.html#369dfd6eec077d0a6228cd1387135e6e">next_olsr_con</a> = olsr_neigh_list-&gt;<a class="code" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">olsr_con</a>-&gt;<a class="code" href="structolsr__con.html#369dfd6eec077d0a6228cd1387135e6e">next_olsr_con</a>;
+<a name="l00271"></a>00271                         <span class="keywordflow">if</span> ( olsr_neigh_list-&gt;<a class="code" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">olsr_con</a>-&gt;<a class="code" href="structolsr__con.html#369dfd6eec077d0a6228cd1387135e6e">next_olsr_con</a> != NULL ) olsr_neigh_list-&gt;<a class="code" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">olsr_con</a>-&gt;<a class="code" href="structolsr__con.html#369dfd6eec077d0a6228cd1387135e6e">next_olsr_con</a>-&gt;<a class="code" href="structolsr__con.html#0382eebfbf31d5f217572d4907c503cb">prev_olsr_con</a> = olsr_neigh_list-&gt;<a class="code" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">olsr_con</a>-&gt;<a class="code" href="structolsr__con.html#0382eebfbf31d5f217572d4907c503cb">prev_olsr_con</a>;
+<a name="l00272"></a>00272 
+<a name="l00273"></a>00273                         tmp_olsr_neigh_list = olsr_neigh_list;
+<a name="l00274"></a>00274 
+<a name="l00275"></a>00275                         olsr_neigh_list = olsr_neigh_list-&gt;<a class="code" href="structolsr__neigh__list.html#f1d533fde49e1ed2ea5299661f5c10c6">next_olsr_neigh_list</a>;
+<a name="l00276"></a>00276 
+<a name="l00277"></a>00277                         free( tmp_olsr_neigh_list-&gt;<a class="code" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">olsr_con</a> );
+<a name="l00278"></a>00278                         free( tmp_olsr_neigh_list );
+<a name="l00279"></a>00279 
+<a name="l00280"></a>00280                 }
+<a name="l00281"></a>00281 
+<a name="l00282"></a>00282                 olsr_node-&gt;<a class="code" href="structolsr__node.html#3b80ce78a06be6aba5a1f93887442764">olsr_neigh_list</a> = NULL;
+<a name="l00283"></a>00283 
+<a name="l00284"></a>00284         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( olsr_node-&gt;<a class="code" href="structolsr__node.html#f19d37e4aa5263be9a1741de24686664">visible</a> ) {
+<a name="l00285"></a>00285 
+<a name="l00286"></a>00286                 <span class="comment">/* olsr node shape has been modified */</span>
+<a name="l00287"></a>00287                 <span class="keywordflow">if</span> ( olsr_node-&gt;<a class="code" href="structolsr__node.html#4517a87e4fdbdb58f678743b5684088b">node_type_modified</a> ) {
+<a name="l00288"></a>00288 
+<a name="l00289"></a>00289                         <span class="comment">/* delete old shape */</span>
+<a name="l00290"></a>00290                         <span class="keywordflow">if</span> ( olsr_node-&gt;<a class="code" href="structolsr__node.html#15be0912065801026e7b4411af561788">obj_id</a> != -1 ) {
+<a name="l00291"></a>00291                                 <span class="comment">/* remove element from ob2ip list */</span>
+<a name="l00292"></a>00292                                 <a class="code" href="olsrs3d_8h.html#febf2594bdfe9ec411d0c04c9cd951b3">lst_del</a>( olsr_node-&gt;<a class="code" href="structolsr__node.html#15be0912065801026e7b4411af561788">obj_id</a> );
+<a name="l00293"></a>00293                                 s3d_del_object( olsr_node-&gt;<a class="code" href="structolsr__node.html#15be0912065801026e7b4411af561788">obj_id</a> );
+<a name="l00294"></a>00294                         }
+<a name="l00295"></a>00295 
+<a name="l00296"></a>00296                         <span class="keywordflow">if</span> ( olsr_node-&gt;<a class="code" href="structolsr__node.html#f2e3f729be82b64001867038bbe8012a">desc_id</a> != -1 ) s3d_del_object( olsr_node-&gt;<a class="code" href="structolsr__node.html#f2e3f729be82b64001867038bbe8012a">desc_id</a> );
+<a name="l00297"></a>00297 
+<a name="l00298"></a>00298                         <span class="comment">/* create new shape */</span>
+<a name="l00299"></a>00299                         <span class="keywordflow">if</span> ( olsr_node-&gt;<a class="code" href="structolsr__node.html#c89186513811183436bcd79cdb6d7b4d">node_type</a> == 1 ) {
+<a name="l00300"></a>00300                                 <span class="comment">/* olsr node offers internet access */</span>
+<a name="l00301"></a>00301                                 olsr_node-&gt;<a class="code" href="structolsr__node.html#15be0912065801026e7b4411af561788">obj_id</a> = s3d_clone( <a class="code" href="main_8c.html#b02228665cef19331d409b0d8a831531">Olsr_node_inet_obj</a> );
+<a name="l00302"></a>00302                         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( olsr_node-&gt;<a class="code" href="structolsr__node.html#c89186513811183436bcd79cdb6d7b4d">node_type</a> == 2 ) {
+<a name="l00303"></a>00303                                 <span class="comment">/* via hna announced network */</span>
+<a name="l00304"></a>00304                                 olsr_node-&gt;<a class="code" href="structolsr__node.html#15be0912065801026e7b4411af561788">obj_id</a> = s3d_clone( <a class="code" href="main_8c.html#c03c9b38147e4231238c44f4b5fbdff7">Olsr_node_hna_net</a> );
+<a name="l00305"></a>00305                         } <span class="keywordflow">else</span> {
+<a name="l00306"></a>00306                                 <span class="comment">/* normal olsr node */</span>
+<a name="l00307"></a>00307                                 olsr_node-&gt;<a class="code" href="structolsr__node.html#15be0912065801026e7b4411af561788">obj_id</a> = s3d_clone( <a class="code" href="main_8c.html#5eba8148fe9257c34665ed364b595fdb">Olsr_node_obj</a> );
+<a name="l00308"></a>00308                         }
+<a name="l00309"></a>00309 
+<a name="l00310"></a>00310                         s3d_flags_on( olsr_node-&gt;<a class="code" href="structolsr__node.html#15be0912065801026e7b4411af561788">obj_id</a>, S3D_OF_VISIBLE|S3D_OF_SELECTABLE);
+<a name="l00311"></a>00311 
+<a name="l00312"></a>00312                         <span class="comment">/* link newly created object to ZeroPoint */</span>
+<a name="l00313"></a>00313                         s3d_link( olsr_node-&gt;<a class="code" href="structolsr__node.html#15be0912065801026e7b4411af561788">obj_id</a>, <a class="code" href="main_8c.html#e113d40abb6f4dd73e4b1253917a1942">ZeroPoint</a> );
+<a name="l00314"></a>00314                         <span class="comment">/* add object_id and olsr_node to linked list */</span>
+<a name="l00315"></a>00315                         <a class="code" href="olsrs3d_8h.html#d01a29bcb2e2daed6fcc6516c328f141">lst_add</a>(olsr_node-&gt;<a class="code" href="structolsr__node.html#15be0912065801026e7b4411af561788">obj_id</a>,&amp;olsr_node);
+<a name="l00316"></a>00316 
+<a name="l00317"></a>00317                         <span class="comment">/* create olsr node text and attach (link) it to the node */</span>
+<a name="l00318"></a>00318                         olsr_node-&gt;<a class="code" href="structolsr__node.html#f2e3f729be82b64001867038bbe8012a">desc_id</a> = s3d_draw_string( olsr_node-&gt;<a class="code" href="structolsr__node.html#59690d75faff5c149faecacb4f4d2a57">ip</a>, &amp;olsr_node-&gt;<a class="code" href="structolsr__node.html#c2a66c5312cf64fec10f6b8903dbd966">desc_length</a> );
+<a name="l00319"></a>00319                         s3d_link( olsr_node-&gt;<a class="code" href="structolsr__node.html#f2e3f729be82b64001867038bbe8012a">desc_id</a>, olsr_node-&gt;<a class="code" href="structolsr__node.html#15be0912065801026e7b4411af561788">obj_id</a> );
+<a name="l00320"></a>00320                         s3d_translate( olsr_node-&gt;<a class="code" href="structolsr__node.html#f2e3f729be82b64001867038bbe8012a">desc_id</a>, - olsr_node-&gt;<a class="code" href="structolsr__node.html#c2a66c5312cf64fec10f6b8903dbd966">desc_length</a> / 2, -2, 0 );
+<a name="l00321"></a>00321                         s3d_flags_on( olsr_node-&gt;<a class="code" href="structolsr__node.html#f2e3f729be82b64001867038bbe8012a">desc_id</a>, S3D_OF_VISIBLE );
+<a name="l00322"></a>00322 
+<a name="l00323"></a>00323                         olsr_node-&gt;<a class="code" href="structolsr__node.html#4517a87e4fdbdb58f678743b5684088b">node_type_modified</a> = 0;
+<a name="l00324"></a>00324 
+<a name="l00325"></a>00325                 }
+<a name="l00326"></a>00326 
+<a name="l00327"></a>00327 
+<a name="l00328"></a>00328                 <span class="comment">/* rotate node description so that they are always readable */</span>
+<a name="l00329"></a>00329                 tmp_mov_vec[0] = <a class="code" href="main_8c.html#5d58294b80563f797d1a14d1d739f52b">CamPosition</a>[0][0] - olsr_node-&gt;<a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>[0];
+<a name="l00330"></a>00330                 tmp_mov_vec[1] = 0;   <span class="comment">/* we are not interested in the y value */</span>
+<a name="l00331"></a>00331                 tmp_mov_vec[2] = <a class="code" href="main_8c.html#5d58294b80563f797d1a14d1d739f52b">CamPosition</a>[0][2] - olsr_node-&gt;<a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>[2];
+<a name="l00332"></a>00332 
+<a name="l00333"></a>00333                 angle = s3d_vector_angle( desc_norm_vec, tmp_mov_vec );
+<a name="l00334"></a>00334 
+<a name="l00335"></a>00335                 <span class="comment">/* take care of inverse cosinus */</span>
+<a name="l00336"></a>00336                 <span class="keywordflow">if</span> ( tmp_mov_vec[0] &gt; 0 ) {
+<a name="l00337"></a>00337                         angle_rad = 90.0/M_PI - angle;
+<a name="l00338"></a>00338                         angle = 180 - ( 180.0/M_PI * angle );
+<a name="l00339"></a>00339                 } <span class="keywordflow">else</span> {
+<a name="l00340"></a>00340                         angle_rad = 90.0/M_PI + angle;
+<a name="l00341"></a>00341                         angle = 180 + ( 180.0/M_PI * angle );
+<a name="l00342"></a>00342                 }
+<a name="l00343"></a>00343 
+<a name="l00344"></a>00344                 s3d_rotate( olsr_node-&gt;<a class="code" href="structolsr__node.html#f2e3f729be82b64001867038bbe8012a">desc_id</a>, 0, angle , 0 );
+<a name="l00345"></a>00345                 s3d_translate( olsr_node-&gt;<a class="code" href="structolsr__node.html#f2e3f729be82b64001867038bbe8012a">desc_id</a>, -cos(angle_rad)*olsr_node-&gt;<a class="code" href="structolsr__node.html#c2a66c5312cf64fec10f6b8903dbd966">desc_length</a>/2 ,-1.5, sin(angle_rad)*olsr_node-&gt;<a class="code" href="structolsr__node.html#c2a66c5312cf64fec10f6b8903dbd966">desc_length</a>/2 );
+<a name="l00346"></a>00346 
+<a name="l00347"></a>00347 
+<a name="l00348"></a>00348                 <span class="comment">/* drift away from unrelated nodes */</span>
+<a name="l00349"></a>00349                 Obj_to_ip_curr = <a class="code" href="main_8c.html#9494e9e8cbdc4eceb86cb33ff0006785">Obj_to_ip_head</a>-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a>;
+<a name="l00350"></a>00350                 <span class="keywordflow">while</span> ( Obj_to_ip_curr != <a class="code" href="main_8c.html#236217b97f5fe65457d8b22c73c5073d">Obj_to_ip_end</a> ) {
+<a name="l00351"></a>00351 
+<a name="l00352"></a>00352                         <span class="comment">/* myself ... */</span>
+<a name="l00353"></a>00353                         <span class="keywordflow">if</span> ( olsr_node != Obj_to_ip_curr-&gt;<a class="code" href="structObj__to__ip.html#207d8f9a609e3e20b4cbd9a7976dcd18">olsr_node</a> ) {
+<a name="l00354"></a>00354 
+<a name="l00355"></a>00355                                 olsr_neigh_list = olsr_node-&gt;<a class="code" href="structolsr__node.html#3b80ce78a06be6aba5a1f93887442764">olsr_neigh_list</a>;
+<a name="l00356"></a>00356                                 <span class="keywordflow">while</span> ( olsr_neigh_list != NULL ) {
+<a name="l00357"></a>00357 
+<a name="l00358"></a>00358                                         <span class="comment">/* nodes are related */</span>
+<a name="l00359"></a>00359                                         <span class="keywordflow">if</span> ( ( olsr_neigh_list-&gt;<a class="code" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">olsr_con</a>-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f19d37e4aa5263be9a1741de24686664">visible</a> == 1 ) &amp;&amp; ( olsr_neigh_list-&gt;<a class="code" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">olsr_con</a>-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f19d37e4aa5263be9a1741de24686664">visible</a> == 1 ) ) {
+<a name="l00360"></a>00360 
+<a name="l00361"></a>00361                                                 <span class="keywordflow">if</span> ( ( olsr_neigh_list-&gt;<a class="code" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">olsr_con</a>-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a> == Obj_to_ip_curr-&gt;<a class="code" href="structObj__to__ip.html#207d8f9a609e3e20b4cbd9a7976dcd18">olsr_node</a> ) || (  olsr_neigh_list-&gt;<a class="code" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">olsr_con</a>-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a> == Obj_to_ip_curr-&gt;<a class="code" href="structObj__to__ip.html#207d8f9a609e3e20b4cbd9a7976dcd18">olsr_node</a> ) ) <span class="keywordflow">break</span>;
+<a name="l00362"></a>00362 
+<a name="l00363"></a>00363                                         }
+<a name="l00364"></a>00364 
+<a name="l00365"></a>00365                                         olsr_neigh_list = olsr_neigh_list-&gt;<a class="code" href="structolsr__neigh__list.html#f1d533fde49e1ed2ea5299661f5c10c6">next_olsr_neigh_list</a>;
+<a name="l00366"></a>00366 
+<a name="l00367"></a>00367                                 }
+<a name="l00368"></a>00368 
+<a name="l00369"></a>00369                                 <span class="comment">/* nodes are not related - so drift */</span>
+<a name="l00370"></a>00370                                 <span class="keywordflow">if</span> ( olsr_neigh_list == NULL ) {
+<a name="l00371"></a>00371 
+<a name="l00372"></a>00372                                         distance = <a class="code" href="main_8c.html#753e5e5d6fbcbd893bb466ce045a3316">dirt</a>( olsr_node-&gt;<a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>, Obj_to_ip_curr-&gt;<a class="code" href="structObj__to__ip.html#207d8f9a609e3e20b4cbd9a7976dcd18">olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>, tmp_mov_vec );
+<a name="l00373"></a>00373                                         <span class="keywordflow">if</span> ( distance &lt; 0.1 ) distance = 0.1;
+<a name="l00374"></a>00374                                         <a class="code" href="main_8c.html#f4369a866dcd049e2642e137507e8ff1">mov_add</a>( olsr_node-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>, tmp_mov_vec,-100 / ( distance * distance ) );
+<a name="l00375"></a>00375                                         <a class="code" href="main_8c.html#f4369a866dcd049e2642e137507e8ff1">mov_add</a>( Obj_to_ip_curr-&gt;<a class="code" href="structObj__to__ip.html#207d8f9a609e3e20b4cbd9a7976dcd18">olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>, tmp_mov_vec, 100 / ( distance * distance ) );
+<a name="l00376"></a>00376 
+<a name="l00377"></a>00377                                 }
+<a name="l00378"></a>00378 
+<a name="l00379"></a>00379                         }
+<a name="l00380"></a>00380 
+<a name="l00381"></a>00381                         Obj_to_ip_curr = Obj_to_ip_curr-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a>;
+<a name="l00382"></a>00382 
+<a name="l00383"></a>00383                 }
+<a name="l00384"></a>00384 
+<a name="l00385"></a>00385         }
+<a name="l00386"></a>00386 
+<a name="l00387"></a>00387         <a class="code" href="main_8c.html#de55269b71a792259ef22763327686b9">handle_olsr_node</a>( olsr_node-&gt;<a class="code" href="structolsr__node.html#b64ee26ebfa4a3c2719de780b4cabada">left</a> );
+<a name="l00388"></a>00388         <a class="code" href="main_8c.html#de55269b71a792259ef22763327686b9">handle_olsr_node</a>( olsr_node-&gt;<a class="code" href="structolsr__node.html#bc6cf143d12b1e5a204ae64d40c0eb05">right</a> );
+<a name="l00389"></a>00389 
+<a name="l00390"></a>00390 }
+</pre></div>
+<p>
+    </td>
+  </tr>
+</table>
+<a class="anchor" name="2f5982986645c1e7a202d72bc5e633eb"></a><!-- doxytag: member="main.c::keypress" ref="2f5982986645c1e7a202d72bc5e633eb" args="(struct s3d_evt *event)" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">void keypress           </td>
+          <td class="md" valign="top">(&nbsp;</td>
+          <td class="md" nowrap valign="top">struct s3d_evt *&nbsp;</td>
+          <td class="mdname1" valign="top" nowrap> <em>event</em>          </td>
+          <td class="md" valign="top">&nbsp;)&nbsp;</td>
+          <td class="md" nowrap></td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00690">690</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+References <a class="el" href="main_8c-source.html#l00064">ColorSwitch</a>, <a class="el" href="main_8c-source.html#l00067">Factor</a>, <a class="el" href="process_8c-source.html#l00359">lst_out()</a>, <a class="el" href="main_8c-source.html#l00066">RotateSpeed</a>, <a class="el" href="main_8c-source.html#l00065">RotateSwitch</a>, <a class="el" href="main_8c-source.html#l00675">stop()</a>, <a class="el" href="main_8c-source.html#l00062">ZeroPoint</a>, and <a class="el" href="main_8c-source.html#l00061">ZeroPosition</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00804">main()</a>.<div class="fragment"><pre class="fragment"><a name="l00690"></a>00690                                      {
+<a name="l00691"></a>00691 
+<a name="l00692"></a>00692         <span class="keywordtype">int</span> key;
+<a name="l00693"></a>00693         key=*((<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> *)event-&gt;buf);
+<a name="l00694"></a>00694         <span class="keywordflow">switch</span>(key) {
+<a name="l00695"></a>00695                 <span class="keywordflow">case</span> S3DK_ESCAPE: <span class="comment">/* esc -&gt; close olsr */</span>
+<a name="l00696"></a>00696                         <a class="code" href="main_8c.html#8c528baf37154d347366083f0f816846">stop</a>();
+<a name="l00697"></a>00697                         <span class="keywordflow">break</span>;
+<a name="l00698"></a>00698                 <span class="keywordflow">case</span> 15: <span class="comment">/* strg + o */</span>
+<a name="l00699"></a>00699                         <a class="code" href="olsrs3d_8h.html#a015f713ca02d8b76a52175b4128d3e8">lst_out</a>(); <span class="comment">/* output ob2ip list */</span>
+<a name="l00700"></a>00700                         <span class="keywordflow">break</span>;
+<a name="l00701"></a>00701                 <span class="keywordflow">case</span> <span class="charliteral">'c'</span>: <span class="comment">/* c -&gt; color on/off */</span>
+<a name="l00702"></a>00702                         <span class="keywordflow">if</span>(<a class="code" href="main_8c.html#aaca6648d8e9266d2fbeb21a6a4f4745">ColorSwitch</a>) <a class="code" href="main_8c.html#aaca6648d8e9266d2fbeb21a6a4f4745">ColorSwitch</a> = 0;
+<a name="l00703"></a>00703                         <span class="keywordflow">else</span> <a class="code" href="main_8c.html#aaca6648d8e9266d2fbeb21a6a4f4745">ColorSwitch</a> = 1;
+<a name="l00704"></a>00704                         <span class="keywordflow">break</span>;
+<a name="l00705"></a>00705                 <span class="keywordflow">case</span> <span class="charliteral">'r'</span>: <span class="comment">/* r -&gt; rotate start/stop*/</span>
+<a name="l00706"></a>00706                         <span class="keywordflow">if</span>(<a class="code" href="main_8c.html#4370348160930ca94ac7a5d1a6fc5172">RotateSwitch</a>) <a class="code" href="main_8c.html#4370348160930ca94ac7a5d1a6fc5172">RotateSwitch</a> = 0;
+<a name="l00707"></a>00707                         <span class="keywordflow">else</span> <a class="code" href="main_8c.html#4370348160930ca94ac7a5d1a6fc5172">RotateSwitch</a> = 1;
+<a name="l00708"></a>00708                         <span class="keywordflow">break</span>;
+<a name="l00709"></a>00709                 <span class="keywordflow">case</span> <span class="charliteral">'+'</span>: <span class="comment">/* + -&gt; rotate speed increase*/</span>
+<a name="l00710"></a>00710                         <span class="keywordflow">if</span>(<a class="code" href="main_8c.html#4370348160930ca94ac7a5d1a6fc5172">RotateSwitch</a> &amp;&amp; <a class="code" href="main_8c.html#cfe4f8990043eade6e82cab3f101b12e">RotateSpeed</a> &lt; 10)
+<a name="l00711"></a>00711                                 <a class="code" href="main_8c.html#cfe4f8990043eade6e82cab3f101b12e">RotateSpeed</a>++;
+<a name="l00712"></a>00712                         <span class="keywordflow">break</span>;
+<a name="l00713"></a>00713                 <span class="keywordflow">case</span> <span class="charliteral">'-'</span>: <span class="comment">/* - -&gt; rotate speed decrease*/</span>
+<a name="l00714"></a>00714                         <span class="keywordflow">if</span>(<a class="code" href="main_8c.html#4370348160930ca94ac7a5d1a6fc5172">RotateSwitch</a> &amp;&amp; <a class="code" href="main_8c.html#cfe4f8990043eade6e82cab3f101b12e">RotateSpeed</a> &gt; 1)
+<a name="l00715"></a>00715                                 <a class="code" href="main_8c.html#cfe4f8990043eade6e82cab3f101b12e">RotateSpeed</a>--;
+<a name="l00716"></a>00716                         <span class="keywordflow">break</span>;
+<a name="l00717"></a>00717                 <span class="keywordflow">case</span> 16: <span class="comment">/* strg + p -&gt; reset nodes ( zeroPoint to 0,0,0 ) */</span>
+<a name="l00718"></a>00718                         s3d_translate(<a class="code" href="main_8c.html#e113d40abb6f4dd73e4b1253917a1942">ZeroPoint</a>,0.0,0.0,0.0);
+<a name="l00719"></a>00719                         <a class="code" href="main_8c.html#4942e67624e2b40a2a949f5cc658ccce">ZeroPosition</a>[0] = <a class="code" href="main_8c.html#4942e67624e2b40a2a949f5cc658ccce">ZeroPosition</a>[1] = <a class="code" href="main_8c.html#4942e67624e2b40a2a949f5cc658ccce">ZeroPosition</a>[2] = 0.0;
+<a name="l00720"></a>00720                         <span class="keywordflow">break</span>;
+<a name="l00721"></a>00721                 <span class="keywordflow">case</span> S3DK_UP: <span class="comment">/* arrow up -&gt; move nodes up */</span>
+<a name="l00722"></a>00722                         <a class="code" href="main_8c.html#4942e67624e2b40a2a949f5cc658ccce">ZeroPosition</a>[1]++;
+<a name="l00723"></a>00723                         s3d_translate(<a class="code" href="main_8c.html#e113d40abb6f4dd73e4b1253917a1942">ZeroPoint</a>,<a class="code" href="main_8c.html#4942e67624e2b40a2a949f5cc658ccce">ZeroPosition</a>[0],<a class="code" href="main_8c.html#4942e67624e2b40a2a949f5cc658ccce">ZeroPosition</a>[1],<a class="code" href="main_8c.html#4942e67624e2b40a2a949f5cc658ccce">ZeroPosition</a>[2]);
+<a name="l00724"></a>00724                         <span class="keywordflow">break</span>;
+<a name="l00725"></a>00725                 <span class="keywordflow">case</span> S3DK_DOWN: <span class="comment">/* arrow down -&gt; move nodes down */</span>
+<a name="l00726"></a>00726                         <a class="code" href="main_8c.html#4942e67624e2b40a2a949f5cc658ccce">ZeroPosition</a>[1]--;
+<a name="l00727"></a>00727                         s3d_translate(<a class="code" href="main_8c.html#e113d40abb6f4dd73e4b1253917a1942">ZeroPoint</a>,<a class="code" href="main_8c.html#4942e67624e2b40a2a949f5cc658ccce">ZeroPosition</a>[0],<a class="code" href="main_8c.html#4942e67624e2b40a2a949f5cc658ccce">ZeroPosition</a>[1],<a class="code" href="main_8c.html#4942e67624e2b40a2a949f5cc658ccce">ZeroPosition</a>[2]);
+<a name="l00728"></a>00728                         <span class="keywordflow">break</span>;
+<a name="l00729"></a>00729                 <span class="keywordflow">case</span> S3DK_PAGEUP: <span class="comment">/* page up -&gt; change factor in calc_olsr_node_mov */</span>
+<a name="l00730"></a>00730                         <span class="keywordflow">if</span>(<a class="code" href="main_8c.html#98d8a7901c60f18d6bf9b35998147831">Factor</a> &lt; 0.9)
+<a name="l00731"></a>00731                                 <a class="code" href="main_8c.html#98d8a7901c60f18d6bf9b35998147831">Factor</a> += 0.1;
+<a name="l00732"></a>00732                         <span class="keywordflow">break</span>;
+<a name="l00733"></a>00733                 <span class="keywordflow">case</span> S3DK_PAGEDOWN: <span class="comment">/* page down -&gt; change factor in calc_olsr_node_mov */</span>
+<a name="l00734"></a>00734                         <span class="keywordflow">if</span>(<a class="code" href="main_8c.html#98d8a7901c60f18d6bf9b35998147831">Factor</a> &gt; 0.3)
+<a name="l00735"></a>00735                                 <a class="code" href="main_8c.html#98d8a7901c60f18d6bf9b35998147831">Factor</a> -= 0.1;
+<a name="l00736"></a>00736                         <span class="keywordflow">break</span>;
+<a name="l00737"></a>00737         }
+<a name="l00738"></a>00738 }
+</pre></div>
+<p>
+    </td>
+  </tr>
+</table>
+<a class="anchor" name="0ddf1224851353fc92bfbff6f499fa97"></a><!-- doxytag: member="main.c::main" ref="0ddf1224851353fc92bfbff6f499fa97" args="(int argc, char *argv[])" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">int main           </td>
+          <td class="md" valign="top">(&nbsp;</td>
+          <td class="md" nowrap valign="top">int&nbsp;</td>
+          <td class="mdname" nowrap> <em>argc</em>, </td>
+        </tr>
+        <tr>
+          <td class="md" nowrap align="right"></td>
+          <td class="md"></td>
+          <td class="md" nowrap>char *&nbsp;</td>
+          <td class="mdname" nowrap> <em>argv</em>[]</td>
+        </tr>
+        <tr>
+          <td class="md"></td>
+          <td class="md">)&nbsp;</td>
+          <td class="md" colspan="2"></td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00804">804</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+References <a class="el" href="main_8c-source.html#l00041">Debug</a>, <a class="el" href="main_8c-source.html#l00690">keypress()</a>, <a class="el" href="process_8c-source.html#l00034">lbuf</a>, <a class="el" href="process_8c-source.html#l00239">lst_initialize()</a>, <a class="el" href="main_8c-source.html#l00624">mainloop()</a>, <a class="el" href="net_8c-source.html#l00045">net_init()</a>, <a class="el" href="net_8c-source.html#l00122">net_quit()</a>, <a class="el" href="main_8c-source.html#l00746">object_click()</a>, <a class="el" href="main_8c-source.html#l00777">object_info()</a>, <a class="el" href="main_8c-source.html#l00043">Olsr_host</a>, <a class="el" href="main_8c-source.html#l00054">Olsr_node_hna_net</a>, <a class="el" href="main_8c-source.html#l00054">Olsr_node_inet_obj</a>, <a class="el" href="main_8c-source.html#l00054">Olsr_node_obj</a>, <a class="el" href="main_8c-source.html#l00075">print_usage()</a>, <a class="el" href="main_8c-source.html#l00675">stop()<!
 /a>, and <a class="el" href="main_8c-source.html#l00062">ZeroPoint</a>.<div class="fragment"><pre class="fragment"><a name="l00804"></a>00804                                    {
+<a name="l00805"></a>00805 
+<a name="l00806"></a>00806         <span class="keywordtype">int</span> optchar;
+<a name="l00807"></a>00807         strncpy( <a class="code" href="main_8c.html#9034a20840ce47fbec531d2b4a4a9f21">Olsr_host</a>, <span class="stringliteral">"127.0.0.1"</span>, 256 );
+<a name="l00808"></a>00808         <a class="code" href="olsrs3d_8h.html#00f1cd38b187535569d0354f2506fb74">lbuf</a>[0] = <span class="charliteral">'\0'</span>;   <span class="comment">/* init lbuf */</span>
+<a name="l00809"></a>00809 
+<a name="l00810"></a>00810         <span class="keywordflow">while</span> ( ( optchar = getopt ( argc, argv, <span class="stringliteral">"dhH:"</span> ) ) != -1 ) {
+<a name="l00811"></a>00811 
+<a name="l00812"></a>00812                 <span class="keywordflow">switch</span> ( optchar ) {
+<a name="l00813"></a>00813 
+<a name="l00814"></a>00814                         <span class="keywordflow">case</span> <span class="charliteral">'d'</span>:
+<a name="l00815"></a>00815                                 <a class="code" href="main_8c.html#923774364cedbc16baa0bc05e9be136c">Debug</a> = 1;
+<a name="l00816"></a>00816                                 <span class="keywordflow">break</span>;
+<a name="l00817"></a>00817 
+<a name="l00818"></a>00818                         <span class="keywordflow">case</span> <span class="charliteral">'H'</span>:
+<a name="l00819"></a>00819                                 strncpy( <a class="code" href="main_8c.html#9034a20840ce47fbec531d2b4a4a9f21">Olsr_host</a>, optarg, 256 );
+<a name="l00820"></a>00820                                 <span class="keywordflow">break</span>;
+<a name="l00821"></a>00821 
+<a name="l00822"></a>00822                         <span class="keywordflow">case</span> <span class="charliteral">'h'</span>:
+<a name="l00823"></a>00823                         <span class="keywordflow">default</span>:
+<a name="l00824"></a>00824                                 <a class="code" href="main_8c.html#a1187b70998f73cdb598833d6afaa30a">print_usage</a>();
+<a name="l00825"></a>00825                                 <span class="keywordflow">return</span> (0);
+<a name="l00826"></a>00826 
+<a name="l00827"></a>00827                 }
+<a name="l00828"></a>00828 
+<a name="l00829"></a>00829         }
+<a name="l00830"></a>00830 
+<a name="l00831"></a>00831         <span class="keywordflow">if</span> ( <a class="code" href="main_8c.html#923774364cedbc16baa0bc05e9be136c">Debug</a> ) printf( <span class="stringliteral">"debug mode enabled ...\n"</span> );
+<a name="l00832"></a>00832 
+<a name="l00833"></a>00833         <span class="comment">/* initialize obj2ip linked list */</span>
+<a name="l00834"></a>00834         <a class="code" href="olsrs3d_8h.html#edfb2ae44af543946842187ced1cd47e">lst_initialize</a>();
+<a name="l00835"></a>00835 
+<a name="l00836"></a>00836         <span class="comment">/* delete olsrs3d options */</span>
+<a name="l00837"></a>00837         <span class="keywordflow">while</span> ( ( optind &lt; argc ) &amp;&amp; ( argv[optind][0] != <span class="charliteral">'-'</span> ) ) optind++;   <span class="comment">/* optind may point to ip addr of '-H' */</span>
+<a name="l00838"></a>00838         optind--;
+<a name="l00839"></a>00839         argv[optind] = argv[0];   <span class="comment">/* save program path */</span>
+<a name="l00840"></a>00840         argc -= optind;   <span class="comment">/* jump over olsrs3d options */</span>
+<a name="l00841"></a>00841         argv += optind;
+<a name="l00842"></a>00842 
+<a name="l00843"></a>00843         <span class="comment">/* set extern int optind = 0 for parse_args in io.c */</span>
+<a name="l00844"></a>00844         optind = 0;
+<a name="l00845"></a>00845 
+<a name="l00846"></a>00846 
+<a name="l00847"></a>00847         <span class="keywordflow">if</span> (!<a class="code" href="net_8c.html#63c933342efd8cac7f272b92d8acab05">net_init</a>(<a class="code" href="main_8c.html#9034a20840ce47fbec531d2b4a4a9f21">Olsr_host</a>))
+<a name="l00848"></a>00848         {
+<a name="l00849"></a>00849                 <span class="keywordflow">if</span> (!s3d_init(&amp;argc,&amp;argv,<span class="stringliteral">"olsrs3d"</span>))
+<a name="l00850"></a>00850                 {
+<a name="l00851"></a>00851                         s3d_set_callback(S3D_EVENT_OBJ_INFO,<a class="code" href="main_8c.html#b7f2ab10a4f7d5ef94d5205fc6147cc4">object_info</a>);
+<a name="l00852"></a>00852                         s3d_set_callback(S3D_EVENT_OBJ_CLICK,<a class="code" href="main_8c.html#ddbd46dad32b89cec68daa03a08f3582">object_click</a>);
+<a name="l00853"></a>00853                         s3d_set_callback(S3D_EVENT_KEY,<a class="code" href="main_8c.html#2f5982986645c1e7a202d72bc5e633eb">keypress</a>);
+<a name="l00854"></a>00854                         s3d_set_callback(S3D_EVENT_QUIT,<a class="code" href="main_8c.html#8c528baf37154d347366083f0f816846">stop</a>);
+<a name="l00855"></a>00855                         <span class="keywordflow">if</span> (s3d_select_font(<span class="stringliteral">"vera"</span>))
+<a name="l00856"></a>00856                                 printf(<span class="stringliteral">"font not found\n"</span>);
+<a name="l00857"></a>00857                         <a class="code" href="main_8c.html#5eba8148fe9257c34665ed364b595fdb">Olsr_node_obj</a> = s3d_import_3ds_file( <span class="stringliteral">"objs/accesspoint.3ds"</span> );
+<a name="l00858"></a>00858                         <a class="code" href="main_8c.html#b02228665cef19331d409b0d8a831531">Olsr_node_inet_obj</a> = s3d_import_3ds_file( <span class="stringliteral">"objs/accesspoint_inet.3ds"</span> );
+<a name="l00859"></a>00859                         <a class="code" href="main_8c.html#c03c9b38147e4231238c44f4b5fbdff7">Olsr_node_hna_net</a> = s3d_import_3ds_file( <span class="stringliteral">"objs/internet.3ds"</span> );
+<a name="l00860"></a>00860                         <a class="code" href="main_8c.html#e113d40abb6f4dd73e4b1253917a1942">ZeroPoint</a> = s3d_new_object();
+<a name="l00861"></a>00861                         s3d_mainloop(<a class="code" href="main_8c.html#896df4ffe3f986ad843e4d191cd712b3">mainloop</a>);
+<a name="l00862"></a>00862                         s3d_quit();
+<a name="l00863"></a>00863                         <a class="code" href="net_8c.html#98aebc7a8515c76551eb15ecd465b923">net_quit</a>();
+<a name="l00864"></a>00864                 }
+<a name="l00865"></a>00865         }
+<a name="l00866"></a>00866         <span class="keywordflow">return</span>(0);
+<a name="l00867"></a>00867 }
+</pre></div>
+<p>
+    </td>
+  </tr>
+</table>
+<a class="anchor" name="896df4ffe3f986ad843e4d191cd712b3"></a><!-- doxytag: member="main.c::mainloop" ref="896df4ffe3f986ad843e4d191cd712b3" args="()" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">void mainloop           </td>
+          <td class="md" valign="top">(&nbsp;</td>
+          <td class="mdname1" valign="top" nowrap>          </td>
+          <td class="md" valign="top">&nbsp;)&nbsp;</td>
+          <td class="md" nowrap></td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00624">624</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+References <a class="el" href="main_8c-source.html#l00057">Bottom</a>, <a class="el" href="main_8c-source.html#l00400">calc_olsr_node_mov()</a>, <a class="el" href="main_8c-source.html#l00186">handle_olsr_node()</a>, <a class="el" href="main_8c-source.html#l00049">Last_olsr_node_count</a>, <a class="el" href="main_8c-source.html#l00058">Left</a>, <a class="el" href="main_8c-source.html#l00439">move_olsr_nodes()</a>, <a class="el" href="net_8c-source.html#l00074">net_main()</a>, <a class="el" href="main_8c-source.html#l00052">Net_read_count</a>, <a class="el" href="main_8c-source.html#l00049">Olsr_node_count</a>, <a class="el" href="main_8c-source.html#l00050">Olsr_node_count_obj</a>, <a class="el" href="main_8c-source.html#l00046">Olsr_root</a>, <a class="el" href="main_8c-source.html#l00066">RotateSpeed</a>, <a class="el" href="main_8c-source.html#l00065">RotateSwitch</a>, <a class="el" href="main_8c-source.html#l00039">sleep_time</a>, <a class="el" href="main_8c-source.ht!
 ml#l00062">ZeroPoint</a>, and <a class="el" href="main_8c-source.html#l00063">Zp_rotate</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00804">main()</a>.<div class="fragment"><pre class="fragment"><a name="l00624"></a>00624                 {
+<a name="l00625"></a>00625 
+<a name="l00626"></a>00626         <span class="keywordtype">int</span> net_result;   <span class="comment">/* result of function net_main */</span>
+<a name="l00627"></a>00627         <span class="keywordtype">char</span> nc_str[20];
+<a name="l00628"></a>00628 
+<a name="l00629"></a>00629         <span class="comment">/* calculate new movement vector */</span>
+<a name="l00630"></a>00630         <a class="code" href="main_8c.html#668e36a25680cc3e0ac4d85a418a838a">calc_olsr_node_mov</a>();
+<a name="l00631"></a>00631 
+<a name="l00632"></a>00632         <span class="comment">/* prepare nodes */</span>
+<a name="l00633"></a>00633         <a class="code" href="main_8c.html#de55269b71a792259ef22763327686b9">handle_olsr_node</a>( <a class="code" href="main_8c.html#c5c5c6846587092d0c23b58b558e680c">Olsr_root</a> );
+<a name="l00634"></a>00634 
+<a name="l00635"></a>00635         <span class="comment">/* move it */</span>
+<a name="l00636"></a>00636         <a class="code" href="main_8c.html#b8d0d8cf5ac8914802be645e15241b77">move_olsr_nodes</a>();
+<a name="l00637"></a>00637 
+<a name="l00638"></a>00638         <span class="comment">/* if we have more or less nodes now - redraw node count */</span>
+<a name="l00639"></a>00639         <span class="keywordflow">if</span> ( <a class="code" href="main_8c.html#86c048bc4aaab319f4d61f7c0e1f056f">Olsr_node_count</a> != <a class="code" href="main_8c.html#58acad60c78b63554c696703227d0b7b">Last_olsr_node_count</a> ) {
+<a name="l00640"></a>00640 
+<a name="l00641"></a>00641                 <span class="keywordflow">if</span> ( <a class="code" href="main_8c.html#4dfd0657ff868fa02113bcd3335acff1">Olsr_node_count_obj</a> != -1 ) s3d_del_object( <a class="code" href="main_8c.html#4dfd0657ff868fa02113bcd3335acff1">Olsr_node_count_obj</a> );
+<a name="l00642"></a>00642                 snprintf( nc_str, 20, <span class="stringliteral">"node count: %d"</span>, <a class="code" href="main_8c.html#86c048bc4aaab319f4d61f7c0e1f056f">Olsr_node_count</a> );
+<a name="l00643"></a>00643                 <a class="code" href="main_8c.html#4dfd0657ff868fa02113bcd3335acff1">Olsr_node_count_obj</a> = s3d_draw_string( nc_str, NULL );
+<a name="l00644"></a>00644                 s3d_link( <a class="code" href="main_8c.html#4dfd0657ff868fa02113bcd3335acff1">Olsr_node_count_obj</a>, 0 );
+<a name="l00645"></a>00645                 s3d_flags_on( <a class="code" href="main_8c.html#4dfd0657ff868fa02113bcd3335acff1">Olsr_node_count_obj</a>, S3D_OF_VISIBLE );
+<a name="l00646"></a>00646                 s3d_scale( <a class="code" href="main_8c.html#4dfd0657ff868fa02113bcd3335acff1">Olsr_node_count_obj</a>, 0.2 );
+<a name="l00647"></a>00647                 s3d_translate( <a class="code" href="main_8c.html#4dfd0657ff868fa02113bcd3335acff1">Olsr_node_count_obj</a>, <a class="code" href="main_8c.html#6f68bad9075598ca8ede1827c6832376">Left</a>*3.0, -<a class="code" href="main_8c.html#f23a6ad2da4511ef430c4f522ae9f4cc">Bottom</a>*3.0-0.2, -3.0 );
+<a name="l00648"></a>00648 
+<a name="l00649"></a>00649                 <a class="code" href="main_8c.html#58acad60c78b63554c696703227d0b7b">Last_olsr_node_count</a> = <a class="code" href="main_8c.html#86c048bc4aaab319f4d61f7c0e1f056f">Olsr_node_count</a>;
+<a name="l00650"></a>00650 
+<a name="l00651"></a>00651         }
+<a name="l00652"></a>00652 
+<a name="l00653"></a>00653         <span class="comment">/* read data from socket */</span>
+<a name="l00654"></a>00654         <a class="code" href="main_8c.html#5bcc20f84efa7bd4aafc56a629f2eff3">Net_read_count</a> = 0;
+<a name="l00655"></a>00655         <span class="keywordflow">while</span> ( ( net_result = <a class="code" href="net_8c.html#b8a768eba717722a3d860c01f69fbbc9">net_main</a>() ) != 0 ) {
+<a name="l00656"></a>00656                 <span class="keywordflow">if</span> ( net_result == -1 ) {
+<a name="l00657"></a>00657                         s3d_quit();
+<a name="l00658"></a>00658                         <span class="keywordflow">break</span>;
+<a name="l00659"></a>00659                 }
+<a name="l00660"></a>00660         }
+<a name="l00661"></a>00661 
+<a name="l00662"></a>00662         <span class="keywordflow">if</span>(<a class="code" href="main_8c.html#4370348160930ca94ac7a5d1a6fc5172">RotateSwitch</a>) {
+<a name="l00663"></a>00663                 <a class="code" href="main_8c.html#ea9e1c287e0c505c2075a0b936dc3404">Zp_rotate</a> = (<a class="code" href="main_8c.html#ea9e1c287e0c505c2075a0b936dc3404">Zp_rotate</a>+<a class="code" href="main_8c.html#cfe4f8990043eade6e82cab3f101b12e">RotateSpeed</a>)%360;
+<a name="l00664"></a>00664                 s3d_rotate(<a class="code" href="main_8c.html#e113d40abb6f4dd73e4b1253917a1942">ZeroPoint</a>,0,<a class="code" href="main_8c.html#ea9e1c287e0c505c2075a0b936dc3404">Zp_rotate</a>,0);
+<a name="l00665"></a>00665         }
+<a name="l00666"></a>00666 
+<a name="l00667"></a>00667         nanosleep( &amp;<a class="code" href="main_8c.html#ea8eb9210d53cd6c1b34e6e7f80a243c">sleep_time</a>, NULL );
+<a name="l00668"></a>00668 
+<a name="l00669"></a>00669         <span class="keywordflow">return</span>;
+<a name="l00670"></a>00670 
+<a name="l00671"></a>00671 }
+</pre></div>
+<p>
+    </td>
+  </tr>
+</table>
+<a class="anchor" name="f4369a866dcd049e2642e137507e8ff1"></a><!-- doxytag: member="main.c::mov_add" ref="f4369a866dcd049e2642e137507e8ff1" args="(float mov[], float p[], float fac)" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">void mov_add           </td>
+          <td class="md" valign="top">(&nbsp;</td>
+          <td class="md" nowrap valign="top">float&nbsp;</td>
+          <td class="mdname" nowrap> <em>mov</em>[], </td>
+        </tr>
+        <tr>
+          <td class="md" nowrap align="right"></td>
+          <td class="md"></td>
+          <td class="md" nowrap>float&nbsp;</td>
+          <td class="mdname" nowrap> <em>p</em>[], </td>
+        </tr>
+        <tr>
+          <td class="md" nowrap align="right"></td>
+          <td class="md"></td>
+          <td class="md" nowrap>float&nbsp;</td>
+          <td class="mdname" nowrap> <em>fac</em></td>
+        </tr>
+        <tr>
+          <td class="md"></td>
+          <td class="md">)&nbsp;</td>
+          <td class="md" colspan="2"></td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00166">166</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00400">calc_olsr_node_mov()</a>, <a class="el" href="main_8c-source.html#l00186">handle_olsr_node()</a>, and <a class="el" href="main_8c-source.html#l00439">move_olsr_nodes()</a>.<div class="fragment"><pre class="fragment"><a name="l00167"></a>00167 {
+<a name="l00168"></a>00168 <span class="comment">/*      if (fac&gt;1000)</span>
+<a name="l00169"></a>00169 <span class="comment">                return;</span>
+<a name="l00170"></a>00170 <span class="comment">        fac=1000; */</span>
+<a name="l00171"></a>00171         mov[0]+=fac*p[0];
+<a name="l00172"></a>00172         mov[1]+=fac*p[1];
+<a name="l00173"></a>00173         mov[2]+=fac*p[2];
+<a name="l00174"></a>00174 }
+</pre></div>
+<p>
+    </td>
+  </tr>
+</table>
+<a class="anchor" name="b8d0d8cf5ac8914802be645e15241b77"></a><!-- doxytag: member="main.c::move_olsr_nodes" ref="b8d0d8cf5ac8914802be645e15241b77" args="(void)" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">void move_olsr_nodes           </td>
+          <td class="md" valign="top">(&nbsp;</td>
+          <td class="md" nowrap valign="top">void&nbsp;</td>
+          <td class="mdname1" valign="top" nowrap>          </td>
+          <td class="md" valign="top">&nbsp;)&nbsp;</td>
+          <td class="md" nowrap></td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00439">439</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+References <a class="el" href="olsrs3d_8h-source.html#l00044">olsr_con::color</a>, <a class="el" href="main_8c-source.html#l00064">ColorSwitch</a>, <a class="el" href="main_8c-source.html#l00045">Con_begin</a>, <a class="el" href="main_8c-source.html#l00138">dirt()</a>, <a class="el" href="main_8c-source.html#l00114">dist()</a>, <a class="el" href="olsrs3d_8h-source.html#l00041">olsr_con::left_etx</a>, <a class="el" href="olsrs3d_8h-source.html#l00039">olsr_con::left_olsr_node</a>, <a class="el" href="main_8c-source.html#l00166">mov_add()</a>, <a class="el" href="olsrs3d_8h-source.html#l00070">olsr_node::mov_vec</a>, <a class="el" href="olsrs3d_8h-source.html#l00037">olsr_con::next_olsr_con</a>, <a class="el" href="olsrs3d_8h-source.html#l00043">olsr_con::obj_id</a>, <a class="el" href="olsrs3d_8h-source.html#l00071">olsr_node::obj_id</a>, <a class="el" href="olsrs3d_8h-source.html#l00069">olsr_node::pos_vec</a>, <a class="el" href="olsrs3d_8h-source.html#l00045">olsr_con::!
 rgb</a>, <a class="el" href="olsrs3d_8h-source.html#l00042">olsr_con::right_etx</a>, <a class="el" href="olsrs3d_8h-source.html#l00040">olsr_con::right_olsr_node</a>, and <a class="el" href="olsrs3d_8h-source.html#l00068">olsr_node::visible</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00624">mainloop()</a>.<div class="fragment"><pre class="fragment"><a name="l00439"></a>00439                              {
+<a name="l00440"></a>00440 
+<a name="l00441"></a>00441         <span class="keywordtype">float</span> null_vec[3] = {0,0,0}, vertex_buf[6];
+<a name="l00442"></a>00442         <span class="keywordtype">float</span> tmp_mov_vec[3];
+<a name="l00443"></a>00443         <span class="keywordtype">float</span> distance, etx, rgb;
+<a name="l00444"></a>00444         <span class="keyword">struct </span><a class="code" href="structolsr__con.html">olsr_con</a> *<a class="code" href="structolsr__con.html">olsr_con</a> = <a class="code" href="main_8c.html#0643a36891539929d987e2ee83ff81d1">Con_begin</a>;
+<a name="l00445"></a>00445 
+<a name="l00446"></a>00446         <span class="keywordflow">while</span> ( olsr_con != NULL ) {
+<a name="l00447"></a>00447 
+<a name="l00448"></a>00448                 <span class="comment">/* move left olsr node if it has not been moved yet */</span>
+<a name="l00449"></a>00449                 <span class="keywordflow">if</span> ( !( ( olsr_con-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>[0] == 0 ) &amp;&amp; ( olsr_con-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>[1] == 0 ) &amp;&amp; ( olsr_con-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>[2] == 0 ) ) &amp;&amp; olsr_con-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f19d37e4aa5263be9a1741de24686664">visible</a> ) {
+<a name="l00450"></a>00450 
+<a name="l00451"></a>00451                         distance = <a class="code" href="main_8c.html#753e5e5d6fbcbd893bb466ce045a3316">dirt</a>( olsr_con-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>, null_vec, tmp_mov_vec );
+<a name="l00452"></a>00452                         <a class="code" href="main_8c.html#f4369a866dcd049e2642e137507e8ff1">mov_add</a>( olsr_con-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>, tmp_mov_vec, distance / 100 ); <span class="comment">/* move a little bit to point zero */</span>
+<a name="l00453"></a>00453                         <a class="code" href="main_8c.html#f4369a866dcd049e2642e137507e8ff1">mov_add</a>( olsr_con-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>, tmp_mov_vec, 1 ); <span class="comment">/* move a little bit to point zero */</span>
+<a name="l00454"></a>00454 
+<a name="l00455"></a>00455                         <span class="keywordflow">if</span> ( ( distance = <a class="code" href="main_8c.html#da3bfd6c7ec35068dbcdf966a4628f5e">dist</a>( olsr_con-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>, null_vec ) ) &gt; 10.0 ) {
+<a name="l00456"></a>00456                                 <a class="code" href="main_8c.html#f4369a866dcd049e2642e137507e8ff1">mov_add</a>( olsr_con-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>, olsr_con-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>, 1.0 / ( ( <span class="keywordtype">float</span> ) distance ) );
+<a name="l00457"></a>00457                         } <span class="keywordflow">else</span> {
+<a name="l00458"></a>00458                                 <a class="code" href="main_8c.html#f4369a866dcd049e2642e137507e8ff1">mov_add</a>( olsr_con-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>, olsr_con-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>, 0.1 );
+<a name="l00459"></a>00459                         }
+<a name="l00460"></a>00460 
+<a name="l00461"></a>00461                         s3d_translate( olsr_con-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#15be0912065801026e7b4411af561788">obj_id</a>, olsr_con-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>[0], olsr_con-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>[1], olsr_con-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>[2] );
+<a name="l00462"></a>00462 
+<a name="l00463"></a>00463                         <span class="comment">/* reset movement vector */</span>
+<a name="l00464"></a>00464                         olsr_con-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>[0] = olsr_con-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>[1] = olsr_con-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>[2] = 0.0;
+<a name="l00465"></a>00465 
+<a name="l00466"></a>00466                 }
+<a name="l00467"></a>00467 
+<a name="l00468"></a>00468                 <span class="comment">/* move right olsr node if it has not been moved yet */</span>
+<a name="l00469"></a>00469                 <span class="keywordflow">if</span> ( !( ( olsr_con-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>[0] == 0 ) &amp;&amp; ( olsr_con-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>[1] == 0 ) &amp;&amp; ( olsr_con-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>[2] == 0 ) ) &amp;&amp; olsr_con-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f19d37e4aa5263be9a1741de24686664">visible</a> ) {
+<a name="l00470"></a>00470 
+<a name="l00471"></a>00471                         distance = <a class="code" href="main_8c.html#753e5e5d6fbcbd893bb466ce045a3316">dirt</a>( olsr_con-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>, null_vec, tmp_mov_vec );
+<a name="l00472"></a>00472                         <a class="code" href="main_8c.html#f4369a866dcd049e2642e137507e8ff1">mov_add</a>( olsr_con-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>, tmp_mov_vec, distance / 100 ); <span class="comment">/* move a little bit to point zero */</span>
+<a name="l00473"></a>00473                         <a class="code" href="main_8c.html#f4369a866dcd049e2642e137507e8ff1">mov_add</a>( olsr_con-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>, tmp_mov_vec, 1 ); <span class="comment">/* move a little bit to point zero */</span>
+<a name="l00474"></a>00474 
+<a name="l00475"></a>00475                         <span class="keywordflow">if</span> ( ( distance = <a class="code" href="main_8c.html#da3bfd6c7ec35068dbcdf966a4628f5e">dist</a>( olsr_con-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>, null_vec ) ) &gt; 10.0 ) {
+<a name="l00476"></a>00476                                 <a class="code" href="main_8c.html#f4369a866dcd049e2642e137507e8ff1">mov_add</a>( olsr_con-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>, olsr_con-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>, 1.0 / ( ( <span class="keywordtype">float</span> ) distance ) );
+<a name="l00477"></a>00477                         } <span class="keywordflow">else</span> {
+<a name="l00478"></a>00478                                 <a class="code" href="main_8c.html#f4369a866dcd049e2642e137507e8ff1">mov_add</a>( olsr_con-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>, olsr_con-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>, 0.1 );
+<a name="l00479"></a>00479                         }
+<a name="l00480"></a>00480 
+<a name="l00481"></a>00481                         s3d_translate( olsr_con-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#15be0912065801026e7b4411af561788">obj_id</a>, olsr_con-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>[0], olsr_con-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>[1], olsr_con-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>[2] );
+<a name="l00482"></a>00482 
+<a name="l00483"></a>00483                         <span class="comment">/* reset movement vector */</span>
+<a name="l00484"></a>00484                         olsr_con-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>[0] = olsr_con-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>[1] = olsr_con-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>[2] = 0.0;
+<a name="l00485"></a>00485 
+<a name="l00486"></a>00486                 }
+<a name="l00487"></a>00487 
+<a name="l00488"></a>00488 
+<a name="l00489"></a>00489                 <span class="comment">/* move connection between left and right olsr node */</span>
+<a name="l00490"></a>00490                 vertex_buf[0] = olsr_con-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>[0];
+<a name="l00491"></a>00491                 vertex_buf[1] = olsr_con-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>[1];
+<a name="l00492"></a>00492                 vertex_buf[2] = olsr_con-&gt;<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>[2];
+<a name="l00493"></a>00493                 vertex_buf[3] = olsr_con-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>[0];
+<a name="l00494"></a>00494                 vertex_buf[4] = olsr_con-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>[1];
+<a name="l00495"></a>00495                 vertex_buf[5] = olsr_con-&gt;<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>-&gt;<a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>[2];
+<a name="l00496"></a>00496 
+<a name="l00497"></a>00497                 s3d_pep_vertices( olsr_con-&gt;<a class="code" href="structolsr__con.html#fe985b6b83425cb17e801ac00001175e">obj_id</a>, vertex_buf, 2 );
+<a name="l00498"></a>00498 
+<a name="l00499"></a>00499 
+<a name="l00500"></a>00500                 <span class="keywordflow">if</span> ( <a class="code" href="main_8c.html#aaca6648d8e9266d2fbeb21a6a4f4745">ColorSwitch</a> ) {
+<a name="l00501"></a>00501 
+<a name="l00502"></a>00502                         <span class="comment">/* HNA */</span>
+<a name="l00503"></a>00503                         <span class="keywordflow">if</span> ( olsr_con-&gt;<a class="code" href="structolsr__con.html#d93efab11883355b45a0460456991362">left_etx</a> == -1000.00 ) {
+<a name="l00504"></a>00504 
+<a name="l00505"></a>00505                                 <span class="keywordflow">if</span>(olsr_con-&gt;<a class="code" href="structolsr__con.html#26a11a87df79af8e59e9f5048937b0c1">color</a> != 1) {
+<a name="l00506"></a>00506                                         s3d_pep_material( olsr_con-&gt;<a class="code" href="structolsr__con.html#fe985b6b83425cb17e801ac00001175e">obj_id</a>,
+<a name="l00507"></a>00507                                                                    0.0,0.0,1.0,
+<a name="l00508"></a>00508                                                                    0.0,0.0,1.0,
+<a name="l00509"></a>00509                                                                    0.0,0.0,1.0);
+<a name="l00510"></a>00510                                         olsr_con-&gt;<a class="code" href="structolsr__con.html#26a11a87df79af8e59e9f5048937b0c1">color</a> = 1;
+<a name="l00511"></a>00511                                 }
+<a name="l00512"></a>00512 
+<a name="l00513"></a>00513                         } <span class="keywordflow">else</span> {
+<a name="l00514"></a>00514 
+<a name="l00515"></a>00515                                 etx = ( olsr_con-&gt;<a class="code" href="structolsr__con.html#d93efab11883355b45a0460456991362">left_etx</a> + olsr_con-&gt;<a class="code" href="structolsr__con.html#30d90c31e93a79ba37ca51b8d146693a">right_etx</a> ) / 2.0;
+<a name="l00516"></a>00516 
+<a name="l00517"></a>00517                                 <span class="comment">/* very good link - bright blue */</span>
+<a name="l00518"></a>00518                                 <span class="keywordflow">if</span> ( ( etx &gt;= 1.0 ) &amp;&amp; ( etx &lt; 1.5 ) ) {
+<a name="l00519"></a>00519 
+<a name="l00520"></a>00520                                         <span class="keywordflow">if</span>(olsr_con-&gt;<a class="code" href="structolsr__con.html#26a11a87df79af8e59e9f5048937b0c1">color</a> != 2) {
+<a name="l00521"></a>00521                                                 s3d_pep_material( olsr_con-&gt;<a class="code" href="structolsr__con.html#fe985b6b83425cb17e801ac00001175e">obj_id</a>,
+<a name="l00522"></a>00522                                                                 0.5,1.0,1.0,
+<a name="l00523"></a>00523                                                                 0.5,1.0,1.0,
+<a name="l00524"></a>00524                                                                 0.5,1.0,1.0);
+<a name="l00525"></a>00525                                                 olsr_con-&gt;<a class="code" href="structolsr__con.html#26a11a87df79af8e59e9f5048937b0c1">color</a> = 2;
+<a name="l00526"></a>00526                                         }
+<a name="l00527"></a>00527 
+<a name="l00528"></a>00528                                 <span class="comment">/* good link - bright yellow */</span>
+<a name="l00529"></a>00529                                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( ( etx &gt;= 1.5 ) &amp;&amp; ( etx &lt; 2.0 ) ) {
+<a name="l00530"></a>00530 
+<a name="l00531"></a>00531                                         rgb = 2.0 - etx;
+<a name="l00532"></a>00532                                         <span class="keywordflow">if</span>( olsr_con-&gt;<a class="code" href="structolsr__con.html#26a11a87df79af8e59e9f5048937b0c1">color</a> != 3 || (olsr_con-&gt;<a class="code" href="structolsr__con.html#26a11a87df79af8e59e9f5048937b0c1">color</a> == 3 &amp;&amp; (<span class="keywordtype">int</span>) rintf(olsr_con-&gt;<a class="code" href="structolsr__con.html#239f576ba1dae4303a935a296d5adb95">rgb</a> * 10) !=  (<span class="keywordtype">int</span>) rintf(rgb * 10))) {
+<a name="l00533"></a>00533                                                 s3d_pep_material( olsr_con-&gt;<a class="code" href="structolsr__con.html#fe985b6b83425cb17e801ac00001175e">obj_id</a>,
+<a name="l00534"></a>00534                                                                 1.0,1.0,rgb,
+<a name="l00535"></a>00535                                                                 1.0,1.0,rgb,
+<a name="l00536"></a>00536                                                                 1.0,1.0,rgb);
+<a name="l00537"></a>00537                                                 olsr_con-&gt;<a class="code" href="structolsr__con.html#26a11a87df79af8e59e9f5048937b0c1">color</a> = 3;
+<a name="l00538"></a>00538 
+<a name="l00539"></a>00539                                                 olsr_con-&gt;<a class="code" href="structolsr__con.html#239f576ba1dae4303a935a296d5adb95">rgb</a> =  rgb;
+<a name="l00540"></a>00540                                         }
+<a name="l00541"></a>00541 
+<a name="l00542"></a>00542                                 <span class="comment">/* not so good link - orange */</span>
+<a name="l00543"></a>00543                                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( ( etx &gt;= 2.0 ) &amp;&amp; ( etx &lt; 3.0 ) ) {
+<a name="l00544"></a>00544 
+<a name="l00545"></a>00545                                         rgb = 1.5 - ( etx / 2.0 );
+<a name="l00546"></a>00546                                         <span class="keywordflow">if</span>( olsr_con-&gt;<a class="code" href="structolsr__con.html#26a11a87df79af8e59e9f5048937b0c1">color</a> != 4 || (olsr_con-&gt;<a class="code" href="structolsr__con.html#26a11a87df79af8e59e9f5048937b0c1">color</a> == 4 &amp;&amp; (<span class="keywordtype">int</span>) rintf(olsr_con-&gt;<a class="code" href="structolsr__con.html#239f576ba1dae4303a935a296d5adb95">rgb</a> * 10) !=  (<span class="keywordtype">int</span>) rintf(rgb * 10))) {
+<a name="l00547"></a>00547                                                 s3d_pep_material( olsr_con-&gt;<a class="code" href="structolsr__con.html#fe985b6b83425cb17e801ac00001175e">obj_id</a>,
+<a name="l00548"></a>00548                                                                 1.0,rgb,0.0,
+<a name="l00549"></a>00549                                                                 1.0,rgb,0.0,
+<a name="l00550"></a>00550                                                                 1.0,rgb,0.0);
+<a name="l00551"></a>00551                                                 olsr_con-&gt;<a class="code" href="structolsr__con.html#26a11a87df79af8e59e9f5048937b0c1">color</a> = 4;
+<a name="l00552"></a>00552 
+<a name="l00553"></a>00553                                                 olsr_con-&gt;<a class="code" href="structolsr__con.html#239f576ba1dae4303a935a296d5adb95">rgb</a> = rgb;
+<a name="l00554"></a>00554                                         }
+<a name="l00555"></a>00555 
+<a name="l00556"></a>00556                                 <span class="comment">/* bad link (almost dead) - brown */</span>
+<a name="l00557"></a>00557                                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( ( etx &gt;= 3.0 ) &amp;&amp; ( etx &lt; 5.0 ) ) {
+<a name="l00558"></a>00558 
+<a name="l00559"></a>00559                                         rgb = 1.75 - ( etx / 4.0 );
+<a name="l00560"></a>00560 
+<a name="l00561"></a>00561                                         <span class="keywordflow">if</span>( olsr_con-&gt;<a class="code" href="structolsr__con.html#26a11a87df79af8e59e9f5048937b0c1">color</a> != 5 || (olsr_con-&gt;<a class="code" href="structolsr__con.html#26a11a87df79af8e59e9f5048937b0c1">color</a> == 5 &amp;&amp; (<span class="keywordtype">int</span>) rintf(olsr_con-&gt;<a class="code" href="structolsr__con.html#239f576ba1dae4303a935a296d5adb95">rgb</a> * 10) !=  (<span class="keywordtype">int</span>) rintf(rgb * 10)) ) {
+<a name="l00562"></a>00562 
+<a name="l00563"></a>00563                                                 s3d_pep_material( olsr_con-&gt;<a class="code" href="structolsr__con.html#fe985b6b83425cb17e801ac00001175e">obj_id</a>,
+<a name="l00564"></a>00564                                                                 rgb,rgb - 0.5,0.0,
+<a name="l00565"></a>00565                                                                 rgb,rgb - 0.5,0.0,
+<a name="l00566"></a>00566                                                                 rgb,rgb - 0.5,0.0);
+<a name="l00567"></a>00567                                                 olsr_con-&gt;<a class="code" href="structolsr__con.html#26a11a87df79af8e59e9f5048937b0c1">color</a> = 5;
+<a name="l00568"></a>00568 
+<a name="l00569"></a>00569                                                 olsr_con-&gt;<a class="code" href="structolsr__con.html#239f576ba1dae4303a935a296d5adb95">rgb</a> = rgb;
+<a name="l00570"></a>00570                                         }
+<a name="l00571"></a>00571 
+<a name="l00572"></a>00572                                 <span class="comment">/* zombie link - grey */</span>
+<a name="l00573"></a>00573                                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( ( etx &gt;= 5.0 ) &amp;&amp; ( etx &lt; 1000.0 ) ) {
+<a name="l00574"></a>00574 
+<a name="l00575"></a>00575                                         rgb = 1000.0 / ( 1500.0 + etx );
+<a name="l00576"></a>00576 
+<a name="l00577"></a>00577                                         <span class="keywordflow">if</span>( olsr_con-&gt;<a class="code" href="structolsr__con.html#26a11a87df79af8e59e9f5048937b0c1">color</a> != 6 || (olsr_con-&gt;<a class="code" href="structolsr__con.html#26a11a87df79af8e59e9f5048937b0c1">color</a> == 6 &amp;&amp; (<span class="keywordtype">int</span>) rintf(olsr_con-&gt;<a class="code" href="structolsr__con.html#239f576ba1dae4303a935a296d5adb95">rgb</a> * 10) !=  (<span class="keywordtype">int</span>) rintf(rgb * 10)) ) {
+<a name="l00578"></a>00578 
+<a name="l00579"></a>00579                                                 s3d_pep_material( olsr_con-&gt;<a class="code" href="structolsr__con.html#fe985b6b83425cb17e801ac00001175e">obj_id</a>,
+<a name="l00580"></a>00580                                                                 rgb,rgb,rgb,
+<a name="l00581"></a>00581                                                                 rgb,rgb,rgb,
+<a name="l00582"></a>00582                                                                 rgb,rgb,rgb);
+<a name="l00583"></a>00583                                                 olsr_con-&gt;<a class="code" href="structolsr__con.html#26a11a87df79af8e59e9f5048937b0c1">color</a> = 6;
+<a name="l00584"></a>00584 
+<a name="l00585"></a>00585                                                 olsr_con-&gt;<a class="code" href="structolsr__con.html#239f576ba1dae4303a935a296d5adb95">rgb</a> = rgb;
+<a name="l00586"></a>00586                                         }
+<a name="l00587"></a>00587 
+<a name="l00588"></a>00588                                 <span class="comment">/* wtf - dark grey */</span>
+<a name="l00589"></a>00589                                 } <span class="keywordflow">else</span> {
+<a name="l00590"></a>00590 
+<a name="l00591"></a>00591                                         <span class="keywordflow">if</span>(olsr_con-&gt;<a class="code" href="structolsr__con.html#26a11a87df79af8e59e9f5048937b0c1">color</a> != 7) {
+<a name="l00592"></a>00592                                                 s3d_pep_material( olsr_con-&gt;<a class="code" href="structolsr__con.html#fe985b6b83425cb17e801ac00001175e">obj_id</a>,
+<a name="l00593"></a>00593                                                                 0.3,0.3,0.3,
+<a name="l00594"></a>00594                                                                 0.3,0.3,0.3,
+<a name="l00595"></a>00595                                                                 0.3,0.3,0.3);
+<a name="l00596"></a>00596                                                 olsr_con-&gt;<a class="code" href="structolsr__con.html#26a11a87df79af8e59e9f5048937b0c1">color</a> = 7;
+<a name="l00597"></a>00597                                         }
+<a name="l00598"></a>00598 
+<a name="l00599"></a>00599                                 }
+<a name="l00600"></a>00600 
+<a name="l00601"></a>00601                         }
+<a name="l00602"></a>00602 
+<a name="l00603"></a>00603                 } <span class="keywordflow">else</span> {
+<a name="l00604"></a>00604 
+<a name="l00605"></a>00605                         <span class="keywordflow">if</span>(olsr_con-&gt;<a class="code" href="structolsr__con.html#26a11a87df79af8e59e9f5048937b0c1">color</a> != 0) {
+<a name="l00606"></a>00606                                 s3d_pep_material( olsr_con-&gt;<a class="code" href="structolsr__con.html#fe985b6b83425cb17e801ac00001175e">obj_id</a>,
+<a name="l00607"></a>00607                                                         1.0,1.0,1.0,
+<a name="l00608"></a>00608                                                         1.0,1.0,1.0,
+<a name="l00609"></a>00609                                                         1.0,1.0,1.0);
+<a name="l00610"></a>00610                                 olsr_con-&gt;<a class="code" href="structolsr__con.html#26a11a87df79af8e59e9f5048937b0c1">color</a> = 0;
+<a name="l00611"></a>00611                         }
+<a name="l00612"></a>00612 
+<a name="l00613"></a>00613                 }
+<a name="l00614"></a>00614 
+<a name="l00615"></a>00615 
+<a name="l00616"></a>00616                 olsr_con = olsr_con-&gt;<a class="code" href="structolsr__con.html#369dfd6eec077d0a6228cd1387135e6e">next_olsr_con</a>;
+<a name="l00617"></a>00617 
+<a name="l00618"></a>00618         }
+<a name="l00619"></a>00619 
+<a name="l00620"></a>00620 }
+</pre></div>
+<p>
+    </td>
+  </tr>
+</table>
+<a class="anchor" name="ddbd46dad32b89cec68daa03a08f3582"></a><!-- doxytag: member="main.c::object_click" ref="ddbd46dad32b89cec68daa03a08f3582" args="(struct s3d_evt *evt)" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">void object_click           </td>
+          <td class="md" valign="top">(&nbsp;</td>
+          <td class="md" nowrap valign="top">struct s3d_evt *&nbsp;</td>
+          <td class="mdname1" valign="top" nowrap> <em>evt</em>          </td>
+          <td class="md" valign="top">&nbsp;)&nbsp;</td>
+          <td class="md" nowrap></td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00746">746</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+References <a class="el" href="main_8c-source.html#l00057">Bottom</a>, <a class="el" href="olsrs3d_8h-source.html#l00064">olsr_node::ip</a>, <a class="el" href="main_8c-source.html#l00058">Left</a>, <a class="el" href="process_8c-source.html#l00349">lst_search()</a>, and <a class="el" href="main_8c-source.html#l00051">Olsr_ip_label_obj</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00804">main()</a>.<div class="fragment"><pre class="fragment"><a name="l00747"></a>00747 {
+<a name="l00748"></a>00748         <span class="keywordtype">int</span> oid;
+<a name="l00749"></a>00749         <span class="comment">/* float distance,tmp_vector[3]; */</span>
+<a name="l00750"></a>00750         <span class="keywordtype">char</span> ip_str[50];
+<a name="l00751"></a>00751         <span class="keyword">struct </span><a class="code" href="structolsr__node.html">olsr_node</a> *<a class="code" href="structolsr__node.html">olsr_node</a>;
+<a name="l00752"></a>00752         oid=(int)*((<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> *)evt-&gt;buf);
+<a name="l00753"></a>00753         olsr_node = *<a class="code" href="olsrs3d_8h.html#ef8aff26d4e096ef0880c204c13309f0">lst_search</a>(oid);
+<a name="l00754"></a>00754         <span class="comment">/* printf("obj2ip: search return %s\n",olsr_node-&gt;ip); */</span>
+<a name="l00755"></a>00755         <span class="comment">/*</span>
+<a name="l00756"></a>00756 <span class="comment">        distance = dirt(CamPosition[0],olsr_node-&gt;pos_vec,tmp_vector);</span>
+<a name="l00757"></a>00757 <span class="comment">        mov_add(ZeroPosition,tmp_vector,1.0);</span>
+<a name="l00758"></a>00758 <span class="comment">        s3d_translate(ZeroPoint,ZeroPosition[0] * -1,ZeroPosition[1] * -1,ZeroPosition[2] * -1);</span>
+<a name="l00759"></a>00759 <span class="comment">        */</span>
+<a name="l00760"></a>00760         <span class="keywordflow">if</span> ( <a class="code" href="main_8c.html#bc4292eef79532d125b616a9e0ec8fa0">Olsr_ip_label_obj</a> != -1 ) s3d_del_object( <a class="code" href="main_8c.html#bc4292eef79532d125b616a9e0ec8fa0">Olsr_ip_label_obj</a> );
+<a name="l00761"></a>00761         <span class="comment">/*Olsr_ip_label_obj = s3d_clone(olsr_node-&gt;desc_id);*/</span>
+<a name="l00762"></a>00762         snprintf( ip_str, 50, <span class="stringliteral">"ip: %s"</span>, olsr_node-&gt;<a class="code" href="structolsr__node.html#59690d75faff5c149faecacb4f4d2a57">ip</a> );
+<a name="l00763"></a>00763         <a class="code" href="main_8c.html#bc4292eef79532d125b616a9e0ec8fa0">Olsr_ip_label_obj</a> = s3d_draw_string( ip_str, NULL );
+<a name="l00764"></a>00764         s3d_link( <a class="code" href="main_8c.html#bc4292eef79532d125b616a9e0ec8fa0">Olsr_ip_label_obj</a>, 0 );
+<a name="l00765"></a>00765         s3d_flags_on( <a class="code" href="main_8c.html#bc4292eef79532d125b616a9e0ec8fa0">Olsr_ip_label_obj</a>, S3D_OF_VISIBLE );
+<a name="l00766"></a>00766         s3d_scale( <a class="code" href="main_8c.html#bc4292eef79532d125b616a9e0ec8fa0">Olsr_ip_label_obj</a>, 0.2 );
+<a name="l00767"></a>00767         s3d_translate( <a class="code" href="main_8c.html#bc4292eef79532d125b616a9e0ec8fa0">Olsr_ip_label_obj</a>, <a class="code" href="main_8c.html#6f68bad9075598ca8ede1827c6832376">Left</a>*3.0, -<a class="code" href="main_8c.html#f23a6ad2da4511ef430c4f522ae9f4cc">Bottom</a>*3.0-0.6, -3.0 );
+<a name="l00768"></a>00768 }
+</pre></div>
+<p>
+    </td>
+  </tr>
+</table>
+<a class="anchor" name="b7f2ab10a4f7d5ef94d5205fc6147cc4"></a><!-- doxytag: member="main.c::object_info" ref="b7f2ab10a4f7d5ef94d5205fc6147cc4" args="(struct s3d_evt *hrmz)" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">void object_info           </td>
+          <td class="md" valign="top">(&nbsp;</td>
+          <td class="md" nowrap valign="top">struct s3d_evt *&nbsp;</td>
+          <td class="mdname1" valign="top" nowrap> <em>hrmz</em>          </td>
+          <td class="md" valign="top">&nbsp;)&nbsp;</td>
+          <td class="md" nowrap></td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00777">777</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+References <a class="el" href="main_8c-source.html#l00056">Asp</a>, <a class="el" href="main_8c-source.html#l00057">Bottom</a>, <a class="el" href="main_8c-source.html#l00060">CamPosition</a>, and <a class="el" href="main_8c-source.html#l00058">Left</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00804">main()</a>.<div class="fragment"><pre class="fragment"><a name="l00778"></a>00778 {
+<a name="l00779"></a>00779         <span class="keyword">struct </span>s3d_obj_info *inf;
+<a name="l00780"></a>00780         inf=(<span class="keyword">struct </span>s3d_obj_info *)hrmz-&gt;buf;
+<a name="l00781"></a>00781         if (inf-&gt;object==0)
+<a name="l00782"></a>00782         {
+<a name="l00783"></a>00783                 <a class="code" href="main_8c.html#5d58294b80563f797d1a14d1d739f52b">CamPosition</a>[0][0] = inf-&gt;trans_x;
+<a name="l00784"></a>00784                 <a class="code" href="main_8c.html#5d58294b80563f797d1a14d1d739f52b">CamPosition</a>[0][1] = inf-&gt;trans_y;
+<a name="l00785"></a>00785                 <a class="code" href="main_8c.html#5d58294b80563f797d1a14d1d739f52b">CamPosition</a>[0][2] = inf-&gt;trans_z;
+<a name="l00786"></a>00786                 <a class="code" href="main_8c.html#5d58294b80563f797d1a14d1d739f52b">CamPosition</a>[1][0] = inf-&gt;rot_x;
+<a name="l00787"></a>00787                 <a class="code" href="main_8c.html#5d58294b80563f797d1a14d1d739f52b">CamPosition</a>[1][1] = inf-&gt;rot_y;
+<a name="l00788"></a>00788                 <a class="code" href="main_8c.html#5d58294b80563f797d1a14d1d739f52b">CamPosition</a>[1][2] = inf-&gt;rot_z;
+<a name="l00789"></a>00789                 <a class="code" href="main_8c.html#fb33da16fedfac392508c8ca439aca5d">Asp</a>=inf-&gt;scale;
+<a name="l00790"></a>00790                 <span class="keywordflow">if</span> (<a class="code" href="main_8c.html#fb33da16fedfac392508c8ca439aca5d">Asp</a>&gt;1.0) <span class="comment">/* wide screen */</span>
+<a name="l00791"></a>00791                 {
+<a name="l00792"></a>00792                         <a class="code" href="main_8c.html#f23a6ad2da4511ef430c4f522ae9f4cc">Bottom</a>=-1.0;
+<a name="l00793"></a>00793                         <a class="code" href="main_8c.html#6f68bad9075598ca8ede1827c6832376">Left</a>=-<a class="code" href="main_8c.html#fb33da16fedfac392508c8ca439aca5d">Asp</a>;
+<a name="l00794"></a>00794                 } <span class="keywordflow">else</span> {  <span class="comment">/* high screen */</span>
+<a name="l00795"></a>00795                         <a class="code" href="main_8c.html#f23a6ad2da4511ef430c4f522ae9f4cc">Bottom</a>=(-1.0/<a class="code" href="main_8c.html#fb33da16fedfac392508c8ca439aca5d">Asp</a>);
+<a name="l00796"></a>00796                         <a class="code" href="main_8c.html#6f68bad9075598ca8ede1827c6832376">Left</a>=-1.0;
+<a name="l00797"></a>00797 
+<a name="l00798"></a>00798                 }
+<a name="l00799"></a>00799 
+<a name="l00800"></a>00800         }
+<a name="l00801"></a>00801         <span class="comment">/* printf("%f %f %f\n",inf-&gt;trans_x,inf-&gt;trans_y,inf-&gt;trans_z); */</span>
+<a name="l00802"></a>00802 }
+</pre></div>
+<p>
+    </td>
+  </tr>
+</table>
+<a class="anchor" name="be0835e7acb76ea987ac80769302d90a"></a><!-- doxytag: member="main.c::out_of_mem" ref="be0835e7acb76ea987ac80769302d90a" args="(void)" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">void out_of_mem           </td>
+          <td class="md" valign="top">(&nbsp;</td>
+          <td class="md" nowrap valign="top">void&nbsp;</td>
+          <td class="mdname1" valign="top" nowrap>          </td>
+          <td class="md" valign="top">&nbsp;)&nbsp;</td>
+          <td class="md" nowrap></td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00094">94</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+Referenced by <a class="el" href="process_8c-source.html#l00048">add_olsr_con()</a>, <a class="el" href="process_8c-source.html#l00155">get_olsr_node()</a>, <a class="el" href="process_8c-source.html#l00259">lst_add()</a>, and <a class="el" href="process_8c-source.html#l00239">lst_initialize()</a>.<div class="fragment"><pre class="fragment"><a name="l00094"></a>00094                         {
+<a name="l00095"></a>00095 
+<a name="l00096"></a>00096         printf( <span class="stringliteral">"Sorry - you ran out of memory !\n"</span> );
+<a name="l00097"></a>00097         exit(8);
+<a name="l00098"></a>00098 
+<a name="l00099"></a>00099 }
+</pre></div>
+<p>
+    </td>
+  </tr>
+</table>
+<a class="anchor" name="a1187b70998f73cdb598833d6afaa30a"></a><!-- doxytag: member="main.c::print_usage" ref="a1187b70998f73cdb598833d6afaa30a" args="(void)" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">void print_usage           </td>
+          <td class="md" valign="top">(&nbsp;</td>
+          <td class="md" nowrap valign="top">void&nbsp;</td>
+          <td class="mdname1" valign="top" nowrap>          </td>
+          <td class="md" valign="top">&nbsp;)&nbsp;</td>
+          <td class="md" nowrap></td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00075">75</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00804">main()</a>.<div class="fragment"><pre class="fragment"><a name="l00075"></a>00075                          {
+<a name="l00076"></a>00076 
+<a name="l00077"></a>00077         printf( <span class="stringliteral">"Usage is olsrs3d [options] [-- [s3d options]]\n"</span> );
+<a name="l00078"></a>00078         printf( <span class="stringliteral">"olsrs3d options:\n"</span> );
+<a name="l00079"></a>00079         printf( <span class="stringliteral">"   -h\tprint this short help\n"</span> );
+<a name="l00080"></a>00080         printf( <span class="stringliteral">"   -d\tenable debug mode\n"</span> );
+<a name="l00081"></a>00081         printf( <span class="stringliteral">"   -H\tconnect to olsr node [default: localhost]\n"</span> );
+<a name="l00082"></a>00082         s3d_usage();
+<a name="l00083"></a>00083 
+<a name="l00084"></a>00084 }
+</pre></div>
+<p>
+    </td>
+  </tr>
+</table>
+<a class="anchor" name="8c528baf37154d347366083f0f816846"></a><!-- doxytag: member="main.c::stop" ref="8c528baf37154d347366083f0f816846" args="()" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">void stop           </td>
+          <td class="md" valign="top">(&nbsp;</td>
+          <td class="mdname1" valign="top" nowrap>          </td>
+          <td class="md" valign="top">&nbsp;)&nbsp;</td>
+          <td class="md" nowrap></td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00675">675</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+References <a class="el" href="net_8c-source.html#l00122">net_quit()</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00690">keypress()</a>, and <a class="el" href="main_8c-source.html#l00804">main()</a>.<div class="fragment"><pre class="fragment"><a name="l00675"></a>00675             {
+<a name="l00676"></a>00676 
+<a name="l00677"></a>00677         s3d_quit();
+<a name="l00678"></a>00678         <a class="code" href="net_8c.html#98aebc7a8515c76551eb15ecd465b923">net_quit</a>();
+<a name="l00679"></a>00679 
+<a name="l00680"></a>00680 }
+</pre></div>
+<p>
+    </td>
+  </tr>
+</table>
+<hr><h2>Variable Documentation</h2>
+<a class="anchor" name="fb33da16fedfac392508c8ca439aca5d"></a><!-- doxytag: member="main.c::Asp" ref="fb33da16fedfac392508c8ca439aca5d" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">float <a class="el" href="main_8c.html#fb33da16fedfac392508c8ca439aca5d">Asp</a> = 1.0          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00056">56</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00777">object_info()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="f23a6ad2da4511ef430c4f522ae9f4cc"></a><!-- doxytag: member="main.c::Bottom" ref="f23a6ad2da4511ef430c4f522ae9f4cc" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">float <a class="el" href="olsrs3d_8h.html#f23a6ad2da4511ef430c4f522ae9f4cc">Bottom</a> = -1.0          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00057">57</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00624">mainloop()</a>, <a class="el" href="main_8c-source.html#l00746">object_click()</a>, and <a class="el" href="main_8c-source.html#l00777">object_info()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="5d58294b80563f797d1a14d1d739f52b"></a><!-- doxytag: member="main.c::CamPosition" ref="5d58294b80563f797d1a14d1d739f52b" args="[2][3]" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">float <a class="el" href="main_8c.html#5d58294b80563f797d1a14d1d739f52b">CamPosition</a>[2][3]          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00060">60</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00186">handle_olsr_node()</a>, and <a class="el" href="main_8c-source.html#l00777">object_info()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="aaca6648d8e9266d2fbeb21a6a4f4745"></a><!-- doxytag: member="main.c::ColorSwitch" ref="aaca6648d8e9266d2fbeb21a6a4f4745" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">int <a class="el" href="main_8c.html#aaca6648d8e9266d2fbeb21a6a4f4745">ColorSwitch</a> = 0          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00064">64</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00690">keypress()</a>, and <a class="el" href="main_8c-source.html#l00439">move_olsr_nodes()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="0643a36891539929d987e2ee83ff81d1"></a><!-- doxytag: member="main.c::Con_begin" ref="0643a36891539929d987e2ee83ff81d1" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">struct <a class="el" href="structolsr__con.html">olsr_con</a>* <a class="el" href="olsrs3d_8h.html#0643a36891539929d987e2ee83ff81d1">Con_begin</a> = NULL          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00045">45</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+Referenced by <a class="el" href="process_8c-source.html#l00048">add_olsr_con()</a>, <a class="el" href="main_8c-source.html#l00400">calc_olsr_node_mov()</a>, and <a class="el" href="main_8c-source.html#l00439">move_olsr_nodes()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="923774364cedbc16baa0bc05e9be136c"></a><!-- doxytag: member="main.c::Debug" ref="923774364cedbc16baa0bc05e9be136c" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">int <a class="el" href="olsrs3d_8h.html#923774364cedbc16baa0bc05e9be136c">Debug</a> = 0          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00041">41</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+Referenced by <a class="el" href="process_8c-source.html#l00155">get_olsr_node()</a>, <a class="el" href="main_8c-source.html#l00186">handle_olsr_node()</a>, <a class="el" href="main_8c-source.html#l00804">main()</a>, <a class="el" href="net_8c-source.html#l00074">net_main()</a>, and <a class="el" href="process_8c-source.html#l00368">process_main()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="98d8a7901c60f18d6bf9b35998147831"></a><!-- doxytag: member="main.c::Factor" ref="98d8a7901c60f18d6bf9b35998147831" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">float <a class="el" href="main_8c.html#98d8a7901c60f18d6bf9b35998147831">Factor</a> = 0.5          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00067">67</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00400">calc_olsr_node_mov()</a>, and <a class="el" href="main_8c-source.html#l00690">keypress()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="58acad60c78b63554c696703227d0b7b"></a><!-- doxytag: member="main.c::Last_olsr_node_count" ref="58acad60c78b63554c696703227d0b7b" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">int <a class="el" href="olsrs3d_8h.html#58acad60c78b63554c696703227d0b7b">Last_olsr_node_count</a> = -1          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00049">49</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00624">mainloop()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="6f68bad9075598ca8ede1827c6832376"></a><!-- doxytag: member="main.c::Left" ref="6f68bad9075598ca8ede1827c6832376" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">float <a class="el" href="olsrs3d_8h.html#6f68bad9075598ca8ede1827c6832376">Left</a> = -1.0          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00058">58</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00624">mainloop()</a>, <a class="el" href="main_8c-source.html#l00746">object_click()</a>, and <a class="el" href="main_8c-source.html#l00777">object_info()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="6a8ff2c3957f5f0ab7dcafcd72b8bd57"></a><!-- doxytag: member="main.c::List_ptr" ref="6a8ff2c3957f5f0ab7dcafcd72b8bd57" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">struct <a class="el" href="structObj__to__ip.html">Obj_to_ip</a> * <a class="el" href="olsrs3d_8h.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00047">47</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+Referenced by <a class="el" href="process_8c-source.html#l00259">lst_add()</a>, <a class="el" href="process_8c-source.html#l00281">lst_del()</a>, <a class="el" href="process_8c-source.html#l00239">lst_initialize()</a>, <a class="el" href="process_8c-source.html#l00349">lst_search()</a>, and <a class="el" href="process_8c-source.html#l00303">move_lst_ptr()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="5bcc20f84efa7bd4aafc56a629f2eff3"></a><!-- doxytag: member="main.c::Net_read_count" ref="5bcc20f84efa7bd4aafc56a629f2eff3" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">int <a class="el" href="olsrs3d_8h.html#5bcc20f84efa7bd4aafc56a629f2eff3">Net_read_count</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00052">52</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00624">mainloop()</a>, and <a class="el" href="net_8c-source.html#l00074">net_main()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="236217b97f5fe65457d8b22c73c5073d"></a><!-- doxytag: member="main.c::Obj_to_ip_end" ref="236217b97f5fe65457d8b22c73c5073d" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">struct <a class="el" href="structObj__to__ip.html">Obj_to_ip</a> * <a class="el" href="olsrs3d_8h.html#236217b97f5fe65457d8b22c73c5073d">Obj_to_ip_end</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00047">47</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00186">handle_olsr_node()</a>, <a class="el" href="process_8c-source.html#l00239">lst_initialize()</a>, and <a class="el" href="process_8c-source.html#l00303">move_lst_ptr()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="9494e9e8cbdc4eceb86cb33ff0006785"></a><!-- doxytag: member="main.c::Obj_to_ip_head" ref="9494e9e8cbdc4eceb86cb33ff0006785" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">struct <a class="el" href="structObj__to__ip.html">Obj_to_ip</a>* <a class="el" href="olsrs3d_8h.html#9494e9e8cbdc4eceb86cb33ff0006785">Obj_to_ip_head</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00047">47</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00186">handle_olsr_node()</a>, <a class="el" href="process_8c-source.html#l00239">lst_initialize()</a>, <a class="el" href="process_8c-source.html#l00359">lst_out()</a>, and <a class="el" href="process_8c-source.html#l00303">move_lst_ptr()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="9034a20840ce47fbec531d2b4a4a9f21"></a><!-- doxytag: member="main.c::Olsr_host" ref="9034a20840ce47fbec531d2b4a4a9f21" args="[256]" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">char <a class="el" href="main_8c.html#9034a20840ce47fbec531d2b4a4a9f21">Olsr_host</a>[256]          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00043">43</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00804">main()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="bc4292eef79532d125b616a9e0ec8fa0"></a><!-- doxytag: member="main.c::Olsr_ip_label_obj" ref="bc4292eef79532d125b616a9e0ec8fa0" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">int <a class="el" href="main_8c.html#bc4292eef79532d125b616a9e0ec8fa0">Olsr_ip_label_obj</a> = -1          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00051">51</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00746">object_click()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="86c048bc4aaab319f4d61f7c0e1f056f"></a><!-- doxytag: member="main.c::Olsr_node_count" ref="86c048bc4aaab319f4d61f7c0e1f056f" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">int <a class="el" href="olsrs3d_8h.html#86c048bc4aaab319f4d61f7c0e1f056f">Olsr_node_count</a> = 0          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00049">49</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+Referenced by <a class="el" href="process_8c-source.html#l00155">get_olsr_node()</a>, <a class="el" href="main_8c-source.html#l00186">handle_olsr_node()</a>, and <a class="el" href="main_8c-source.html#l00624">mainloop()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="4dfd0657ff868fa02113bcd3335acff1"></a><!-- doxytag: member="main.c::Olsr_node_count_obj" ref="4dfd0657ff868fa02113bcd3335acff1" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">int <a class="el" href="olsrs3d_8h.html#4dfd0657ff868fa02113bcd3335acff1">Olsr_node_count_obj</a> = -1          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00050">50</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00624">mainloop()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="c03c9b38147e4231238c44f4b5fbdff7"></a><!-- doxytag: member="main.c::Olsr_node_hna_net" ref="c03c9b38147e4231238c44f4b5fbdff7" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">int <a class="el" href="olsrs3d_8h.html#c03c9b38147e4231238c44f4b5fbdff7">Olsr_node_hna_net</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00054">54</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00186">handle_olsr_node()</a>, and <a class="el" href="main_8c-source.html#l00804">main()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="b02228665cef19331d409b0d8a831531"></a><!-- doxytag: member="main.c::Olsr_node_inet_obj" ref="b02228665cef19331d409b0d8a831531" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">int <a class="el" href="olsrs3d_8h.html#b02228665cef19331d409b0d8a831531">Olsr_node_inet_obj</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00054">54</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00186">handle_olsr_node()</a>, and <a class="el" href="main_8c-source.html#l00804">main()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="5eba8148fe9257c34665ed364b595fdb"></a><!-- doxytag: member="main.c::Olsr_node_obj" ref="5eba8148fe9257c34665ed364b595fdb" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">int <a class="el" href="olsrs3d_8h.html#5eba8148fe9257c34665ed364b595fdb">Olsr_node_obj</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00054">54</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00186">handle_olsr_node()</a>, and <a class="el" href="main_8c-source.html#l00804">main()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="c5c5c6846587092d0c23b58b558e680c"></a><!-- doxytag: member="main.c::Olsr_root" ref="c5c5c6846587092d0c23b58b558e680c" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">struct <a class="el" href="structolsr__node.html">olsr_node</a>* <a class="el" href="olsrs3d_8h.html#c5c5c6846587092d0c23b58b558e680c">Olsr_root</a> = NULL          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00046">46</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00624">mainloop()</a>, and <a class="el" href="process_8c-source.html#l00368">process_main()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="cfe4f8990043eade6e82cab3f101b12e"></a><!-- doxytag: member="main.c::RotateSpeed" ref="cfe4f8990043eade6e82cab3f101b12e" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">int <a class="el" href="main_8c.html#cfe4f8990043eade6e82cab3f101b12e">RotateSpeed</a> = 2          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00066">66</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00690">keypress()</a>, and <a class="el" href="main_8c-source.html#l00624">mainloop()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="4370348160930ca94ac7a5d1a6fc5172"></a><!-- doxytag: member="main.c::RotateSwitch" ref="4370348160930ca94ac7a5d1a6fc5172" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">int <a class="el" href="main_8c.html#4370348160930ca94ac7a5d1a6fc5172">RotateSwitch</a> = 0          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00065">65</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00690">keypress()</a>, and <a class="el" href="main_8c-source.html#l00624">mainloop()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="ea8eb9210d53cd6c1b34e6e7f80a243c"></a><!-- doxytag: member="main.c::sleep_time" ref="ea8eb9210d53cd6c1b34e6e7f80a243c" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">struct timespec <a class="el" href="main_8c.html#ea8eb9210d53cd6c1b34e6e7f80a243c">sleep_time</a> = { 0, 100 * 1000 * 1000 }<code> [static]</code>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00039">39</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00624">mainloop()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="e113d40abb6f4dd73e4b1253917a1942"></a><!-- doxytag: member="main.c::ZeroPoint" ref="e113d40abb6f4dd73e4b1253917a1942" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">int <a class="el" href="olsrs3d_8h.html#e113d40abb6f4dd73e4b1253917a1942">ZeroPoint</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00062">62</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+Referenced by <a class="el" href="process_8c-source.html#l00048">add_olsr_con()</a>, <a class="el" href="main_8c-source.html#l00186">handle_olsr_node()</a>, <a class="el" href="main_8c-source.html#l00690">keypress()</a>, <a class="el" href="main_8c-source.html#l00804">main()</a>, and <a class="el" href="main_8c-source.html#l00624">mainloop()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="4942e67624e2b40a2a949f5cc658ccce"></a><!-- doxytag: member="main.c::ZeroPosition" ref="4942e67624e2b40a2a949f5cc658ccce" args="[3]" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">float <a class="el" href="main_8c.html#4942e67624e2b40a2a949f5cc658ccce">ZeroPosition</a>[3] = {0,0,0}          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00061">61</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00690">keypress()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="ea9e1c287e0c505c2075a0b936dc3404"></a><!-- doxytag: member="main.c::Zp_rotate" ref="ea9e1c287e0c505c2075a0b936dc3404" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">int <a class="el" href="main_8c.html#ea9e1c287e0c505c2075a0b936dc3404">Zp_rotate</a> = 0          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00063">63</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00624">mainloop()</a>.    </td>
+  </tr>
+</table>
+<hr size="1"><address style="align: right;"><small>Generated on Sun Mar 19 13:28:20 2006 for olsrs3d by&nbsp;
+<a href="http://www.doxygen.org/index.html">
+<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6 </small></address>
+</body>
+</html>

Added: trunk/apps/olsrs3d/doxygen/html/net_8c-source.html
===================================================================
--- trunk/apps/olsrs3d/doxygen/html/net_8c-source.html	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/html/net_8c-source.html	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,155 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
+<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
+<title>olsrs3d: s3d/apps/olsrs3d/net.c Source File</title>
+<link href="doxygen.css" rel="stylesheet" type="text/css">
+<link href="tabs.css" rel="stylesheet" type="text/css">
+</head><body>
+<!-- Generated by Doxygen 1.4.6 -->
+<div class="tabs">
+  <ul>
+    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
+    <li><a href="classes.html"><span>Classes</span></a></li>
+    <li id="current"><a href="files.html"><span>Files</span></a></li>
+    <li><a href="dirs.html"><span>Directories</span></a></li>
+  </ul></div>
+<div class="tabs">
+  <ul>
+    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
+    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
+  </ul></div>
+<div class="nav">
+<a class="el" href="dir_9d2efe7c7f87ee6309da929964f0685b.html">s3d</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_5d167550802dbd943c0631943f884f5b.html">apps</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_bf110b9fd34b0903efb6170e1cee5506.html">olsrs3d</a></div>
+<h1>net.c</h1><a href="net_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
+<a name="l00002"></a>00002 <span class="comment"> * net.c</span>
+<a name="l00003"></a>00003 <span class="comment"> *</span>
+<a name="l00004"></a>00004 <span class="comment"> * Copyright (C) 2004-2006 Simon Wunderlich &lt;dotslash at packetmixer.de&gt;</span>
+<a name="l00005"></a>00005 <span class="comment"> *                         Marek Lindner &lt;lindner_marek at yahoo.de&gt;</span>
+<a name="l00006"></a>00006 <span class="comment"> *                         Andreas Langer &lt;andreas_lbg at gmx.de&gt;</span>
+<a name="l00007"></a>00007 <span class="comment"> *</span>
+<a name="l00008"></a>00008 <span class="comment"> * This file is part of olsrs3d, an olsr topology visualizer for s3d.</span>
+<a name="l00009"></a>00009 <span class="comment"> * See http://s3d.berlios.de/ for more updates.</span>
+<a name="l00010"></a>00010 <span class="comment"> *</span>
+<a name="l00011"></a>00011 <span class="comment"> * olsrs3d is free software; you can redistribute it and/or modify</span>
+<a name="l00012"></a>00012 <span class="comment"> * it under the terms of the GNU General Public License as published by</span>
+<a name="l00013"></a>00013 <span class="comment"> * the Free Software Foundation; either version 2 of the License, or</span>
+<a name="l00014"></a>00014 <span class="comment"> * (at your option) any later version.</span>
+<a name="l00015"></a>00015 <span class="comment"> *</span>
+<a name="l00016"></a>00016 <span class="comment"> * olsrs3d is distributed in the hope that it will be useful,</span>
+<a name="l00017"></a>00017 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
+<a name="l00018"></a>00018 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
+<a name="l00019"></a>00019 <span class="comment"> * GNU General Public License for more details.</span>
+<a name="l00020"></a>00020 <span class="comment"> *</span>
+<a name="l00021"></a>00021 <span class="comment"> * You should have received a copy of the GNU General Public License</span>
+<a name="l00022"></a>00022 <span class="comment"> * along with s3d; if not, write to the Free Software</span>
+<a name="l00023"></a>00023 <span class="comment"> * Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA</span>
+<a name="l00024"></a>00024 <span class="comment"> */</span>
+<a name="l00025"></a>00025 
+<a name="l00026"></a>00026 
+<a name="l00027"></a>00027 
+<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
+<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
+<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;unistd.h&gt;</span>     <span class="comment">/* close() */</span>
+<a name="l00031"></a>00031 <span class="preprocessor">#include &lt;errno.h&gt;</span>
+<a name="l00032"></a>00032 <span class="preprocessor">#include &lt;string.h&gt;</span>     <span class="comment">/* strlen(), memmove(), strncpy(), strncat() */</span>
+<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;netdb.h&gt;</span>
+<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;sys/types.h&gt;</span>
+<a name="l00035"></a>00035 <span class="preprocessor">#include &lt;netinet/in.h&gt;</span>
+<a name="l00036"></a>00036 <span class="preprocessor">#include &lt;sys/socket.h&gt;</span>
+<a name="l00037"></a>00037 <span class="preprocessor">#include &lt;fcntl.h&gt;</span>              <span class="comment">/* fnctl() */</span>
+<a name="l00038"></a>00038 <span class="preprocessor">#include "<a class="code" href="olsrs3d_8h.html">olsrs3d.h</a>"</span>
+<a name="l00039"></a>00039 
+<a name="l00040"></a><a class="code" href="net_8c.html#614217d263be1fb1a5f76e2ff7be19a2">00040</a> <span class="preprocessor">#define PORT 2004               </span><span class="comment">/* the port client will be connecting to  */</span>
+<a name="l00041"></a><a class="code" href="net_8c.html#f39ed2161fb25f51aa61ffc038306f75">00041</a> <span class="keywordtype">char</span> <a class="code" href="net_8c.html#f39ed2161fb25f51aa61ffc038306f75">buf</a>[<a class="code" href="olsrs3d_8h.html#16c16f9369be4a374a3e621f6d13bb16">MAXDATASIZE</a>];
+<a name="l00042"></a>00042 
+<a name="l00043"></a>00043 
+<a name="l00044"></a><a class="code" href="net_8c.html#d2c8fb3df3a737e0685e902870a611d2">00044</a> <span class="keywordtype">int</span> <a class="code" href="net_8c.html#d2c8fb3df3a737e0685e902870a611d2">sockfd</a>, <a class="code" href="net_8c.html#24bdd92b6cf8d141a4a27d4882c6a905">numbytes</a>;
+<a name="l00045"></a><a class="code" href="olsrs3d_8h.html#63c933342efd8cac7f272b92d8acab05">00045</a> <span class="keywordtype">int</span> <a class="code" href="net_8c.html#63c933342efd8cac7f272b92d8acab05">net_init</a>(<span class="keywordtype">char</span> *host)
+<a name="l00046"></a>00046 {
+<a name="l00047"></a>00047     <span class="keyword">struct </span>hostent *he;
+<a name="l00048"></a>00048     <span class="keyword">struct </span>sockaddr_in their_addr; <span class="comment">/* connector's address information  */</span>
+<a name="l00049"></a>00049 
+<a name="l00050"></a>00050     <span class="keywordflow">if</span> ((he=gethostbyname(host)) == NULL) {  <span class="comment">/* get the host info  */</span>
+<a name="l00051"></a>00051         herror(<span class="stringliteral">"gethostbyname"</span>);
+<a name="l00052"></a>00052         <span class="keywordflow">return</span>(1);
+<a name="l00053"></a>00053     }
+<a name="l00054"></a>00054 
+<a name="l00055"></a>00055     <span class="keywordflow">if</span> ((<a class="code" href="net_8c.html#d2c8fb3df3a737e0685e902870a611d2">sockfd</a> = socket(PF_INET, SOCK_STREAM, 0)) == -1) {
+<a name="l00056"></a>00056         perror(<span class="stringliteral">"socket"</span>);
+<a name="l00057"></a>00057         <span class="keywordflow">return</span>(1);
+<a name="l00058"></a>00058     }
+<a name="l00059"></a>00059 
+<a name="l00060"></a>00060     their_addr.sin_family = AF_INET;    <span class="comment">/* host byte order  */</span>
+<a name="l00061"></a>00061     their_addr.sin_port = htons(<a class="code" href="net_8c.html#614217d263be1fb1a5f76e2ff7be19a2">PORT</a>);  <span class="comment">/* short, network byte order  */</span>
+<a name="l00062"></a>00062     their_addr.sin_addr = *((<span class="keyword">struct </span>in_addr *)he-&gt;h_addr);
+<a name="l00063"></a>00063     memset(&amp;(their_addr.sin_zero), <span class="charliteral">'\0'</span>, 8);  <span class="comment">/* zero the rest of the struct */</span>
+<a name="l00064"></a>00064 
+<a name="l00065"></a>00065     <span class="keywordflow">if</span> (connect(<a class="code" href="net_8c.html#d2c8fb3df3a737e0685e902870a611d2">sockfd</a>, (<span class="keyword">struct</span> sockaddr *)&amp;their_addr,
+<a name="l00066"></a>00066                                           <span class="keyword">sizeof</span>(<span class="keyword">struct</span> sockaddr)) == -1) {
+<a name="l00067"></a>00067         perror(<span class="stringliteral">"connect"</span>);
+<a name="l00068"></a>00068         <span class="keywordflow">return</span>(1);
+<a name="l00069"></a>00069     }
+<a name="l00070"></a>00070         fcntl(<a class="code" href="net_8c.html#d2c8fb3df3a737e0685e902870a611d2">sockfd</a>,F_SETFL, O_NONBLOCK);
+<a name="l00071"></a>00071         <span class="keywordflow">return</span>(0);
+<a name="l00072"></a>00072 }
+<a name="l00073"></a>00073 
+<a name="l00074"></a><a class="code" href="olsrs3d_8h.html#b8a768eba717722a3d860c01f69fbbc9">00074</a> <span class="keywordtype">int</span> <a class="code" href="net_8c.html#b8a768eba717722a3d860c01f69fbbc9">net_main</a>() {
+<a name="l00075"></a>00075 
+<a name="l00076"></a>00076         <span class="keywordflow">if</span> ((<a class="code" href="net_8c.html#24bdd92b6cf8d141a4a27d4882c6a905">numbytes</a>=recv(<a class="code" href="net_8c.html#d2c8fb3df3a737e0685e902870a611d2">sockfd</a>, <a class="code" href="net_8c.html#f39ed2161fb25f51aa61ffc038306f75">buf</a>, <a class="code" href="olsrs3d_8h.html#16c16f9369be4a374a3e621f6d13bb16">MAXDATASIZE</a>-1, 0)) == -1) {
+<a name="l00077"></a>00077                 <span class="keywordflow">if</span> (errno==EAGAIN)
+<a name="l00078"></a>00078                         <span class="keywordflow">return</span>(0); <span class="comment">/* well, that's okay ... */</span>
+<a name="l00079"></a>00079                 perror(<span class="stringliteral">"recv"</span>);
+<a name="l00080"></a>00080                 <span class="keywordflow">return</span>(-1);
+<a name="l00081"></a>00081         }
+<a name="l00082"></a>00082 
+<a name="l00083"></a>00083         <span class="keywordflow">if</span> (<a class="code" href="net_8c.html#24bdd92b6cf8d141a4a27d4882c6a905">numbytes</a>==0) {
+<a name="l00084"></a>00084                 printf(<span class="stringliteral">"connection reset\n"</span>);
+<a name="l00085"></a>00085                 <span class="keywordflow">return</span>(-1);
+<a name="l00086"></a>00086         }
+<a name="l00087"></a>00087 
+<a name="l00088"></a>00088         <a class="code" href="net_8c.html#f39ed2161fb25f51aa61ffc038306f75">buf</a>[<a class="code" href="net_8c.html#24bdd92b6cf8d141a4a27d4882c6a905">numbytes</a>] = <span class="charliteral">'\0'</span>;
+<a name="l00089"></a>00089 
+<a name="l00090"></a>00090         <span class="comment">/* check for potential buffer overflow */</span>
+<a name="l00091"></a>00091         <span class="keywordflow">if</span> ( ( strlen( <a class="code" href="olsrs3d_8h.html#00f1cd38b187535569d0354f2506fb74">lbuf</a> ) + strlen( <a class="code" href="net_8c.html#f39ed2161fb25f51aa61ffc038306f75">buf</a> ) ) &lt; <a class="code" href="olsrs3d_8h.html#e310f74f793edeb882f0c2d8d8b50bb8">MAXLINESIZE</a> ) {
+<a name="l00092"></a>00092 
+<a name="l00093"></a>00093                 strncat( <a class="code" href="olsrs3d_8h.html#00f1cd38b187535569d0354f2506fb74">lbuf</a>, <a class="code" href="net_8c.html#f39ed2161fb25f51aa61ffc038306f75">buf</a>, <a class="code" href="olsrs3d_8h.html#e310f74f793edeb882f0c2d8d8b50bb8">MAXLINESIZE</a> );
+<a name="l00094"></a>00094 
+<a name="l00095"></a>00095         } <span class="keywordflow">else</span> {
+<a name="l00096"></a>00096 
+<a name="l00097"></a>00097                 <span class="comment">/* hope that carriage return is now in buf */</span>
+<a name="l00098"></a>00098                 <span class="keywordflow">if</span> ( strlen( <a class="code" href="olsrs3d_8h.html#00f1cd38b187535569d0354f2506fb74">lbuf</a> ) &lt; <a class="code" href="olsrs3d_8h.html#e310f74f793edeb882f0c2d8d8b50bb8">MAXLINESIZE</a> ) {
+<a name="l00099"></a>00099 
+<a name="l00100"></a>00100                         <span class="keywordflow">if</span> ( <a class="code" href="main_8c.html#923774364cedbc16baa0bc05e9be136c">Debug</a> ) printf( <span class="stringliteral">"WARNING: lbuf almost filled without *any* carriage return within that data !\nAppending truncated buf to lbuf to prevent buffer overflow.\n"</span> );
+<a name="l00101"></a>00101                         strncat( <a class="code" href="olsrs3d_8h.html#00f1cd38b187535569d0354f2506fb74">lbuf</a>, <a class="code" href="net_8c.html#f39ed2161fb25f51aa61ffc038306f75">buf</a>, <a class="code" href="olsrs3d_8h.html#e310f74f793edeb882f0c2d8d8b50bb8">MAXLINESIZE</a> - strlen( <a class="code" href="olsrs3d_8h.html#00f1cd38b187535569d0354f2506fb74">lbuf</a> ) );
+<a name="l00102"></a>00102 
+<a name="l00103"></a>00103                 } <span class="keywordflow">else</span> {
+<a name="l00104"></a>00104 
+<a name="l00105"></a>00105                         <span class="keywordflow">if</span> ( <a class="code" href="main_8c.html#923774364cedbc16baa0bc05e9be136c">Debug</a> ) printf( <span class="stringliteral">"ERROR: lbuf filled without *any* carriage return within that data !\nClearing lbuf to prevent buffer overflow.\n"</span> );
+<a name="l00106"></a>00106                         strncpy( <a class="code" href="olsrs3d_8h.html#00f1cd38b187535569d0354f2506fb74">lbuf</a>, <a class="code" href="net_8c.html#f39ed2161fb25f51aa61ffc038306f75">buf</a>, <a class="code" href="olsrs3d_8h.html#e310f74f793edeb882f0c2d8d8b50bb8">MAXLINESIZE</a> );
+<a name="l00107"></a>00107 
+<a name="l00108"></a>00108                 }
+<a name="l00109"></a>00109 
+<a name="l00110"></a>00110         }
+<a name="l00111"></a>00111 
+<a name="l00112"></a>00112         <a class="code" href="olsrs3d_8h.html#6b4e9b6718b671f6330c2e501c60d3c1">process_main</a>();
+<a name="l00113"></a>00113 
+<a name="l00114"></a>00114         <span class="keywordflow">if</span> ( ++<a class="code" href="main_8c.html#5bcc20f84efa7bd4aafc56a629f2eff3">Net_read_count</a> &gt; 5 ) {
+<a name="l00115"></a>00115                 <span class="keywordflow">return</span>(0);   <span class="comment">/* continue mainloop */</span>
+<a name="l00116"></a>00116         } <span class="keywordflow">else</span> {
+<a name="l00117"></a>00117                 <span class="keywordflow">return</span>(1);   <span class="comment">/* continue reading data from socket */</span>
+<a name="l00118"></a>00118         }
+<a name="l00119"></a>00119 
+<a name="l00120"></a>00120 }
+<a name="l00121"></a>00121 
+<a name="l00122"></a><a class="code" href="olsrs3d_8h.html#98aebc7a8515c76551eb15ecd465b923">00122</a> <span class="keywordtype">int</span> <a class="code" href="net_8c.html#98aebc7a8515c76551eb15ecd465b923">net_quit</a>()
+<a name="l00123"></a>00123 {
+<a name="l00124"></a>00124     close(<a class="code" href="net_8c.html#d2c8fb3df3a737e0685e902870a611d2">sockfd</a>);
+<a name="l00125"></a>00125 
+<a name="l00126"></a>00126     <span class="keywordflow">return</span> 0;
+<a name="l00127"></a>00127 }
+<a name="l00128"></a>00128 
+<a name="l00129"></a>00129 
+</pre></div><hr size="1"><address style="align: right;"><small>Generated on Sun Mar 19 13:28:20 2006 for olsrs3d by&nbsp;
+<a href="http://www.doxygen.org/index.html">
+<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6 </small></address>
+</body>
+</html>

Added: trunk/apps/olsrs3d/doxygen/html/net_8c.html
===================================================================
--- trunk/apps/olsrs3d/doxygen/html/net_8c.html	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/html/net_8c.html	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,355 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
+<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
+<title>olsrs3d: s3d/apps/olsrs3d/net.c File Reference</title>
+<link href="doxygen.css" rel="stylesheet" type="text/css">
+<link href="tabs.css" rel="stylesheet" type="text/css">
+</head><body>
+<!-- Generated by Doxygen 1.4.6 -->
+<div class="tabs">
+  <ul>
+    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
+    <li><a href="classes.html"><span>Classes</span></a></li>
+    <li id="current"><a href="files.html"><span>Files</span></a></li>
+    <li><a href="dirs.html"><span>Directories</span></a></li>
+  </ul></div>
+<div class="tabs">
+  <ul>
+    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
+    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
+  </ul></div>
+<div class="nav">
+<a class="el" href="dir_9d2efe7c7f87ee6309da929964f0685b.html">s3d</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_5d167550802dbd943c0631943f884f5b.html">apps</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_bf110b9fd34b0903efb6170e1cee5506.html">olsrs3d</a></div>
+<h1>net.c File Reference</h1><code>#include &lt;stdio.h&gt;</code><br>
+<code>#include &lt;stdlib.h&gt;</code><br>
+<code>#include &lt;unistd.h&gt;</code><br>
+<code>#include &lt;errno.h&gt;</code><br>
+<code>#include &lt;string.h&gt;</code><br>
+<code>#include &lt;netdb.h&gt;</code><br>
+<code>#include &lt;sys/types.h&gt;</code><br>
+<code>#include &lt;netinet/in.h&gt;</code><br>
+<code>#include &lt;sys/socket.h&gt;</code><br>
+<code>#include &lt;fcntl.h&gt;</code><br>
+<code>#include &quot;<a class="el" href="olsrs3d_8h-source.html">olsrs3d.h</a>&quot;</code><br>
+
+<p>
+<a href="net_8c-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
+<tr><td></td></tr>
+<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
+<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="net_8c.html#614217d263be1fb1a5f76e2ff7be19a2">PORT</a>&nbsp;&nbsp;&nbsp;2004</td></tr>
+
+<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
+<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="net_8c.html#63c933342efd8cac7f272b92d8acab05">net_init</a> (char *host)</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="net_8c.html#b8a768eba717722a3d860c01f69fbbc9">net_main</a> ()</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="net_8c.html#98aebc7a8515c76551eb15ecd465b923">net_quit</a> ()</td></tr>
+
+<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
+<tr><td class="memItemLeft" nowrap align="right" valign="top">char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="net_8c.html#f39ed2161fb25f51aa61ffc038306f75">buf</a> [MAXDATASIZE]</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="net_8c.html#24bdd92b6cf8d141a4a27d4882c6a905">numbytes</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="net_8c.html#d2c8fb3df3a737e0685e902870a611d2">sockfd</a></td></tr>
+
+</table>
+<hr><h2>Define Documentation</h2>
+<a class="anchor" name="614217d263be1fb1a5f76e2ff7be19a2"></a><!-- doxytag: member="net.c::PORT" ref="614217d263be1fb1a5f76e2ff7be19a2" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">#define PORT&nbsp;&nbsp;&nbsp;2004          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="net_8c-source.html#l00040">40</a> of file <a class="el" href="net_8c-source.html">net.c</a>.
+<p>
+Referenced by <a class="el" href="net_8c-source.html#l00045">net_init()</a>.    </td>
+  </tr>
+</table>
+<hr><h2>Function Documentation</h2>
+<a class="anchor" name="63c933342efd8cac7f272b92d8acab05"></a><!-- doxytag: member="net.c::net_init" ref="63c933342efd8cac7f272b92d8acab05" args="(char *host)" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">int net_init           </td>
+          <td class="md" valign="top">(&nbsp;</td>
+          <td class="md" nowrap valign="top">char *&nbsp;</td>
+          <td class="mdname1" valign="top" nowrap> <em>host</em>          </td>
+          <td class="md" valign="top">&nbsp;)&nbsp;</td>
+          <td class="md" nowrap></td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="net_8c-source.html#l00045">45</a> of file <a class="el" href="net_8c-source.html">net.c</a>.
+<p>
+References <a class="el" href="net_8c-source.html#l00040">PORT</a>, and <a class="el" href="net_8c-source.html#l00044">sockfd</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00804">main()</a>.<div class="fragment"><pre class="fragment"><a name="l00046"></a>00046 {
+<a name="l00047"></a>00047     <span class="keyword">struct </span>hostent *he;
+<a name="l00048"></a>00048     <span class="keyword">struct </span>sockaddr_in their_addr; <span class="comment">/* connector's address information  */</span>
+<a name="l00049"></a>00049 
+<a name="l00050"></a>00050     <span class="keywordflow">if</span> ((he=gethostbyname(host)) == NULL) {  <span class="comment">/* get the host info  */</span>
+<a name="l00051"></a>00051         herror(<span class="stringliteral">"gethostbyname"</span>);
+<a name="l00052"></a>00052         <span class="keywordflow">return</span>(1);
+<a name="l00053"></a>00053     }
+<a name="l00054"></a>00054 
+<a name="l00055"></a>00055     <span class="keywordflow">if</span> ((<a class="code" href="net_8c.html#d2c8fb3df3a737e0685e902870a611d2">sockfd</a> = socket(PF_INET, SOCK_STREAM, 0)) == -1) {
+<a name="l00056"></a>00056         perror(<span class="stringliteral">"socket"</span>);
+<a name="l00057"></a>00057         <span class="keywordflow">return</span>(1);
+<a name="l00058"></a>00058     }
+<a name="l00059"></a>00059 
+<a name="l00060"></a>00060     their_addr.sin_family = AF_INET;    <span class="comment">/* host byte order  */</span>
+<a name="l00061"></a>00061     their_addr.sin_port = htons(<a class="code" href="net_8c.html#614217d263be1fb1a5f76e2ff7be19a2">PORT</a>);  <span class="comment">/* short, network byte order  */</span>
+<a name="l00062"></a>00062     their_addr.sin_addr = *((<span class="keyword">struct </span>in_addr *)he-&gt;h_addr);
+<a name="l00063"></a>00063     memset(&amp;(their_addr.sin_zero), <span class="charliteral">'\0'</span>, 8);  <span class="comment">/* zero the rest of the struct */</span>
+<a name="l00064"></a>00064 
+<a name="l00065"></a>00065     <span class="keywordflow">if</span> (connect(<a class="code" href="net_8c.html#d2c8fb3df3a737e0685e902870a611d2">sockfd</a>, (<span class="keyword">struct</span> sockaddr *)&amp;their_addr,
+<a name="l00066"></a>00066                                           <span class="keyword">sizeof</span>(<span class="keyword">struct</span> sockaddr)) == -1) {
+<a name="l00067"></a>00067         perror(<span class="stringliteral">"connect"</span>);
+<a name="l00068"></a>00068         <span class="keywordflow">return</span>(1);
+<a name="l00069"></a>00069     }
+<a name="l00070"></a>00070         fcntl(<a class="code" href="net_8c.html#d2c8fb3df3a737e0685e902870a611d2">sockfd</a>,F_SETFL, O_NONBLOCK);
+<a name="l00071"></a>00071         <span class="keywordflow">return</span>(0);
+<a name="l00072"></a>00072 }
+</pre></div>
+<p>
+    </td>
+  </tr>
+</table>
+<a class="anchor" name="b8a768eba717722a3d860c01f69fbbc9"></a><!-- doxytag: member="net.c::net_main" ref="b8a768eba717722a3d860c01f69fbbc9" args="()" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">int net_main           </td>
+          <td class="md" valign="top">(&nbsp;</td>
+          <td class="mdname1" valign="top" nowrap>          </td>
+          <td class="md" valign="top">&nbsp;)&nbsp;</td>
+          <td class="md" nowrap></td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="net_8c-source.html#l00074">74</a> of file <a class="el" href="net_8c-source.html">net.c</a>.
+<p>
+References <a class="el" href="net_8c-source.html#l00041">buf</a>, <a class="el" href="main_8c-source.html#l00041">Debug</a>, <a class="el" href="process_8c-source.html#l00034">lbuf</a>, <a class="el" href="olsrs3d_8h-source.html#l00030">MAXDATASIZE</a>, <a class="el" href="olsrs3d_8h-source.html#l00029">MAXLINESIZE</a>, <a class="el" href="main_8c-source.html#l00052">Net_read_count</a>, <a class="el" href="net_8c-source.html#l00044">numbytes</a>, <a class="el" href="process_8c-source.html#l00368">process_main()</a>, and <a class="el" href="net_8c-source.html#l00044">sockfd</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00624">mainloop()</a>.<div class="fragment"><pre class="fragment"><a name="l00074"></a>00074                {
+<a name="l00075"></a>00075 
+<a name="l00076"></a>00076         <span class="keywordflow">if</span> ((<a class="code" href="net_8c.html#24bdd92b6cf8d141a4a27d4882c6a905">numbytes</a>=recv(<a class="code" href="net_8c.html#d2c8fb3df3a737e0685e902870a611d2">sockfd</a>, <a class="code" href="net_8c.html#f39ed2161fb25f51aa61ffc038306f75">buf</a>, <a class="code" href="olsrs3d_8h.html#16c16f9369be4a374a3e621f6d13bb16">MAXDATASIZE</a>-1, 0)) == -1) {
+<a name="l00077"></a>00077                 <span class="keywordflow">if</span> (errno==EAGAIN)
+<a name="l00078"></a>00078                         <span class="keywordflow">return</span>(0); <span class="comment">/* well, that's okay ... */</span>
+<a name="l00079"></a>00079                 perror(<span class="stringliteral">"recv"</span>);
+<a name="l00080"></a>00080                 <span class="keywordflow">return</span>(-1);
+<a name="l00081"></a>00081         }
+<a name="l00082"></a>00082 
+<a name="l00083"></a>00083         <span class="keywordflow">if</span> (<a class="code" href="net_8c.html#24bdd92b6cf8d141a4a27d4882c6a905">numbytes</a>==0) {
+<a name="l00084"></a>00084                 printf(<span class="stringliteral">"connection reset\n"</span>);
+<a name="l00085"></a>00085                 <span class="keywordflow">return</span>(-1);
+<a name="l00086"></a>00086         }
+<a name="l00087"></a>00087 
+<a name="l00088"></a>00088         <a class="code" href="net_8c.html#f39ed2161fb25f51aa61ffc038306f75">buf</a>[<a class="code" href="net_8c.html#24bdd92b6cf8d141a4a27d4882c6a905">numbytes</a>] = <span class="charliteral">'\0'</span>;
+<a name="l00089"></a>00089 
+<a name="l00090"></a>00090         <span class="comment">/* check for potential buffer overflow */</span>
+<a name="l00091"></a>00091         <span class="keywordflow">if</span> ( ( strlen( <a class="code" href="olsrs3d_8h.html#00f1cd38b187535569d0354f2506fb74">lbuf</a> ) + strlen( <a class="code" href="net_8c.html#f39ed2161fb25f51aa61ffc038306f75">buf</a> ) ) &lt; <a class="code" href="olsrs3d_8h.html#e310f74f793edeb882f0c2d8d8b50bb8">MAXLINESIZE</a> ) {
+<a name="l00092"></a>00092 
+<a name="l00093"></a>00093                 strncat( <a class="code" href="olsrs3d_8h.html#00f1cd38b187535569d0354f2506fb74">lbuf</a>, <a class="code" href="net_8c.html#f39ed2161fb25f51aa61ffc038306f75">buf</a>, <a class="code" href="olsrs3d_8h.html#e310f74f793edeb882f0c2d8d8b50bb8">MAXLINESIZE</a> );
+<a name="l00094"></a>00094 
+<a name="l00095"></a>00095         } <span class="keywordflow">else</span> {
+<a name="l00096"></a>00096 
+<a name="l00097"></a>00097                 <span class="comment">/* hope that carriage return is now in buf */</span>
+<a name="l00098"></a>00098                 <span class="keywordflow">if</span> ( strlen( <a class="code" href="olsrs3d_8h.html#00f1cd38b187535569d0354f2506fb74">lbuf</a> ) &lt; <a class="code" href="olsrs3d_8h.html#e310f74f793edeb882f0c2d8d8b50bb8">MAXLINESIZE</a> ) {
+<a name="l00099"></a>00099 
+<a name="l00100"></a>00100                         <span class="keywordflow">if</span> ( <a class="code" href="main_8c.html#923774364cedbc16baa0bc05e9be136c">Debug</a> ) printf( <span class="stringliteral">"WARNING: lbuf almost filled without *any* carriage return within that data !\nAppending truncated buf to lbuf to prevent buffer overflow.\n"</span> );
+<a name="l00101"></a>00101                         strncat( <a class="code" href="olsrs3d_8h.html#00f1cd38b187535569d0354f2506fb74">lbuf</a>, <a class="code" href="net_8c.html#f39ed2161fb25f51aa61ffc038306f75">buf</a>, <a class="code" href="olsrs3d_8h.html#e310f74f793edeb882f0c2d8d8b50bb8">MAXLINESIZE</a> - strlen( <a class="code" href="olsrs3d_8h.html#00f1cd38b187535569d0354f2506fb74">lbuf</a> ) );
+<a name="l00102"></a>00102 
+<a name="l00103"></a>00103                 } <span class="keywordflow">else</span> {
+<a name="l00104"></a>00104 
+<a name="l00105"></a>00105                         <span class="keywordflow">if</span> ( Debug ) printf( <span class="stringliteral">"ERROR: lbuf filled without *any* carriage return within that data !\nClearing lbuf to prevent buffer overflow.\n"</span> );
+<a name="l00106"></a>00106                         strncpy( <a class="code" href="olsrs3d_8h.html#00f1cd38b187535569d0354f2506fb74">lbuf</a>, <a class="code" href="net_8c.html#f39ed2161fb25f51aa61ffc038306f75">buf</a>, <a class="code" href="olsrs3d_8h.html#e310f74f793edeb882f0c2d8d8b50bb8">MAXLINESIZE</a> );
+<a name="l00107"></a>00107 
+<a name="l00108"></a>00108                 }
+<a name="l00109"></a>00109 
+<a name="l00110"></a>00110         }
+<a name="l00111"></a>00111 
+<a name="l00112"></a>00112         <a class="code" href="olsrs3d_8h.html#6b4e9b6718b671f6330c2e501c60d3c1">process_main</a>();
+<a name="l00113"></a>00113 
+<a name="l00114"></a>00114         <span class="keywordflow">if</span> ( ++<a class="code" href="main_8c.html#5bcc20f84efa7bd4aafc56a629f2eff3">Net_read_count</a> &gt; 5 ) {
+<a name="l00115"></a>00115                 <span class="keywordflow">return</span>(0);   <span class="comment">/* continue mainloop */</span>
+<a name="l00116"></a>00116         } <span class="keywordflow">else</span> {
+<a name="l00117"></a>00117                 <span class="keywordflow">return</span>(1);   <span class="comment">/* continue reading data from socket */</span>
+<a name="l00118"></a>00118         }
+<a name="l00119"></a>00119 
+<a name="l00120"></a>00120 }
+</pre></div>
+<p>
+    </td>
+  </tr>
+</table>
+<a class="anchor" name="98aebc7a8515c76551eb15ecd465b923"></a><!-- doxytag: member="net.c::net_quit" ref="98aebc7a8515c76551eb15ecd465b923" args="()" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">int net_quit           </td>
+          <td class="md" valign="top">(&nbsp;</td>
+          <td class="mdname1" valign="top" nowrap>          </td>
+          <td class="md" valign="top">&nbsp;)&nbsp;</td>
+          <td class="md" nowrap></td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="net_8c-source.html#l00122">122</a> of file <a class="el" href="net_8c-source.html">net.c</a>.
+<p>
+References <a class="el" href="net_8c-source.html#l00044">sockfd</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00804">main()</a>, and <a class="el" href="main_8c-source.html#l00675">stop()</a>.<div class="fragment"><pre class="fragment"><a name="l00123"></a>00123 {
+<a name="l00124"></a>00124     close(<a class="code" href="net_8c.html#d2c8fb3df3a737e0685e902870a611d2">sockfd</a>);
+<a name="l00125"></a>00125 
+<a name="l00126"></a>00126     <span class="keywordflow">return</span> 0;
+<a name="l00127"></a>00127 }
+</pre></div>
+<p>
+    </td>
+  </tr>
+</table>
+<hr><h2>Variable Documentation</h2>
+<a class="anchor" name="f39ed2161fb25f51aa61ffc038306f75"></a><!-- doxytag: member="net.c::buf" ref="f39ed2161fb25f51aa61ffc038306f75" args="[MAXDATASIZE]" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">char <a class="el" href="net_8c.html#f39ed2161fb25f51aa61ffc038306f75">buf</a>[MAXDATASIZE]          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="net_8c-source.html#l00041">41</a> of file <a class="el" href="net_8c-source.html">net.c</a>.
+<p>
+Referenced by <a class="el" href="net_8c-source.html#l00074">net_main()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="24bdd92b6cf8d141a4a27d4882c6a905"></a><!-- doxytag: member="net.c::numbytes" ref="24bdd92b6cf8d141a4a27d4882c6a905" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">int <a class="el" href="net_8c.html#24bdd92b6cf8d141a4a27d4882c6a905">numbytes</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="net_8c-source.html#l00044">44</a> of file <a class="el" href="net_8c-source.html">net.c</a>.
+<p>
+Referenced by <a class="el" href="net_8c-source.html#l00074">net_main()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="d2c8fb3df3a737e0685e902870a611d2"></a><!-- doxytag: member="net.c::sockfd" ref="d2c8fb3df3a737e0685e902870a611d2" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">int <a class="el" href="net_8c.html#d2c8fb3df3a737e0685e902870a611d2">sockfd</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="net_8c-source.html#l00044">44</a> of file <a class="el" href="net_8c-source.html">net.c</a>.
+<p>
+Referenced by <a class="el" href="net_8c-source.html#l00045">net_init()</a>, <a class="el" href="net_8c-source.html#l00074">net_main()</a>, and <a class="el" href="net_8c-source.html#l00122">net_quit()</a>.    </td>
+  </tr>
+</table>
+<hr size="1"><address style="align: right;"><small>Generated on Sun Mar 19 13:28:20 2006 for olsrs3d by&nbsp;
+<a href="http://www.doxygen.org/index.html">
+<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6 </small></address>
+</body>
+</html>

Added: trunk/apps/olsrs3d/doxygen/html/olsrs3d_8h-source.html
===================================================================
--- trunk/apps/olsrs3d/doxygen/html/olsrs3d_8h-source.html	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/html/olsrs3d_8h-source.html	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,150 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
+<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
+<title>olsrs3d: s3d/apps/olsrs3d/olsrs3d.h Source File</title>
+<link href="doxygen.css" rel="stylesheet" type="text/css">
+<link href="tabs.css" rel="stylesheet" type="text/css">
+</head><body>
+<!-- Generated by Doxygen 1.4.6 -->
+<div class="tabs">
+  <ul>
+    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
+    <li><a href="classes.html"><span>Classes</span></a></li>
+    <li id="current"><a href="files.html"><span>Files</span></a></li>
+    <li><a href="dirs.html"><span>Directories</span></a></li>
+  </ul></div>
+<div class="tabs">
+  <ul>
+    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
+    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
+  </ul></div>
+<div class="nav">
+<a class="el" href="dir_9d2efe7c7f87ee6309da929964f0685b.html">s3d</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_5d167550802dbd943c0631943f884f5b.html">apps</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_bf110b9fd34b0903efb6170e1cee5506.html">olsrs3d</a></div>
+<h1>olsrs3d.h</h1><a href="olsrs3d_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
+<a name="l00002"></a>00002 <span class="comment"> * olsrs3d.h</span>
+<a name="l00003"></a>00003 <span class="comment"> *</span>
+<a name="l00004"></a>00004 <span class="comment"> * Copyright (C) 2004-2006 Simon Wunderlich &lt;dotslash at packetmixer.de&gt;</span>
+<a name="l00005"></a>00005 <span class="comment"> *                         Marek Lindner &lt;lindner_marek at yahoo.de&gt;</span>
+<a name="l00006"></a>00006 <span class="comment"> *                         Andreas Langer &lt;andreas_lbg at gmx.de&gt;</span>
+<a name="l00007"></a>00007 <span class="comment"> *</span>
+<a name="l00008"></a>00008 <span class="comment"> * This file is part of olsrs3d, an olsr topology visualizer for s3d.</span>
+<a name="l00009"></a>00009 <span class="comment"> * See http://s3d.berlios.de/ for more updates.</span>
+<a name="l00010"></a>00010 <span class="comment"> *</span>
+<a name="l00011"></a>00011 <span class="comment"> * olsrs3d is free software; you can redistribute it and/or modify</span>
+<a name="l00012"></a>00012 <span class="comment"> * it under the terms of the GNU General Public License as published by</span>
+<a name="l00013"></a>00013 <span class="comment"> * the Free Software Foundation; either version 2 of the License, or</span>
+<a name="l00014"></a>00014 <span class="comment"> * (at your option) any later version.</span>
+<a name="l00015"></a>00015 <span class="comment"> *</span>
+<a name="l00016"></a>00016 <span class="comment"> * olsrs3d is distributed in the hope that it will be useful,</span>
+<a name="l00017"></a>00017 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
+<a name="l00018"></a>00018 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
+<a name="l00019"></a>00019 <span class="comment"> * GNU General Public License for more details.</span>
+<a name="l00020"></a>00020 <span class="comment"> *</span>
+<a name="l00021"></a>00021 <span class="comment"> * You should have received a copy of the GNU General Public License</span>
+<a name="l00022"></a>00022 <span class="comment"> * along with s3d; if not, write to the Free Software</span>
+<a name="l00023"></a>00023 <span class="comment"> * Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA</span>
+<a name="l00024"></a>00024 <span class="comment"> */</span>
+<a name="l00025"></a>00025 
+<a name="l00026"></a>00026 
+<a name="l00027"></a>00027 
+<a name="l00028"></a><a class="code" href="olsrs3d_8h.html#f8c0c53607c56b59e883cb0894e5cde7">00028</a> <span class="preprocessor">#define NAMEMAX         128</span>
+<a name="l00029"></a><a class="code" href="olsrs3d_8h.html#e310f74f793edeb882f0c2d8d8b50bb8">00029</a> <span class="preprocessor"></span><span class="preprocessor">#define MAXLINESIZE 1000 </span><span class="comment">/* lines in a digraph just shouldn't get that longer ... */</span>
+<a name="l00030"></a><a class="code" href="olsrs3d_8h.html#16c16f9369be4a374a3e621f6d13bb16">00030</a> <span class="preprocessor">#define MAXDATASIZE 100 </span><span class="comment">/* max number of bytes we can get at once  */</span>
+<a name="l00031"></a>00031 
+<a name="l00032"></a>00032 
+<a name="l00033"></a>00033 
+<a name="l00034"></a>00034 <span class="comment">/* linked list for the all connections */</span>
+<a name="l00035"></a><a class="code" href="structolsr__con.html">00035</a> <span class="keyword">struct </span><a class="code" href="structolsr__con.html">olsr_con</a> {
+<a name="l00036"></a>00036 
+<a name="l00037"></a><a class="code" href="structolsr__con.html#369dfd6eec077d0a6228cd1387135e6e">00037</a>         <span class="keyword">struct </span><a class="code" href="structolsr__con.html">olsr_con</a> *<a class="code" href="structolsr__con.html#369dfd6eec077d0a6228cd1387135e6e">next_olsr_con</a>;   <span class="comment">/* pointer to next connection */</span>
+<a name="l00038"></a><a class="code" href="structolsr__con.html#0382eebfbf31d5f217572d4907c503cb">00038</a>         <span class="keyword">struct </span><a class="code" href="structolsr__con.html">olsr_con</a> *<a class="code" href="structolsr__con.html#0382eebfbf31d5f217572d4907c503cb">prev_olsr_con</a>;   <span class="comment">/* pointer to previous connection */</span>
+<a name="l00039"></a><a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">00039</a>         <span class="keyword">struct </span><a class="code" href="structolsr__node.html">olsr_node</a> *<a class="code" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a>;   <span class="comment">/* pointer to left end point of the connection */</span>
+<a name="l00040"></a><a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">00040</a>         <span class="keyword">struct </span><a class="code" href="structolsr__node.html">olsr_node</a> *<a class="code" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a>;   <span class="comment">/* pointer to right end point of the connection */</span>
+<a name="l00041"></a><a class="code" href="structolsr__con.html#d93efab11883355b45a0460456991362">00041</a>         <span class="keywordtype">float</span> <a class="code" href="structolsr__con.html#d93efab11883355b45a0460456991362">left_etx</a>;   <span class="comment">/* etx of left olsr node */</span>
+<a name="l00042"></a><a class="code" href="structolsr__con.html#30d90c31e93a79ba37ca51b8d146693a">00042</a>         <span class="keywordtype">float</span> <a class="code" href="structolsr__con.html#30d90c31e93a79ba37ca51b8d146693a">right_etx</a>;   <span class="comment">/* etx of right olsr node */</span>
+<a name="l00043"></a><a class="code" href="structolsr__con.html#fe985b6b83425cb17e801ac00001175e">00043</a>         <span class="keywordtype">int</span> <a class="code" href="structolsr__con.html#fe985b6b83425cb17e801ac00001175e">obj_id</a>;   <span class="comment">/* id of connection object in s3d */</span>
+<a name="l00044"></a><a class="code" href="structolsr__con.html#26a11a87df79af8e59e9f5048937b0c1">00044</a>         <span class="keywordtype">int</span> <a class="code" href="structolsr__con.html#26a11a87df79af8e59e9f5048937b0c1">color</a>;
+<a name="l00045"></a><a class="code" href="structolsr__con.html#239f576ba1dae4303a935a296d5adb95">00045</a>         <span class="keywordtype">float</span> <a class="code" href="structolsr__con.html#239f576ba1dae4303a935a296d5adb95">rgb</a>;
+<a name="l00046"></a>00046 
+<a name="l00047"></a>00047 };
+<a name="l00048"></a>00048 
+<a name="l00049"></a>00049 
+<a name="l00050"></a>00050 <span class="comment">/* linked list for the neighbours of each olsr node */</span>
+<a name="l00051"></a><a class="code" href="structolsr__neigh__list.html">00051</a> <span class="keyword">struct </span><a class="code" href="structolsr__neigh__list.html">olsr_neigh_list</a> {
+<a name="l00052"></a>00052 
+<a name="l00053"></a><a class="code" href="structolsr__neigh__list.html#f1d533fde49e1ed2ea5299661f5c10c6">00053</a>         <span class="keyword">struct </span><a class="code" href="structolsr__neigh__list.html">olsr_neigh_list</a> *<a class="code" href="structolsr__neigh__list.html#f1d533fde49e1ed2ea5299661f5c10c6">next_olsr_neigh_list</a>;   <span class="comment">/* pointer to next neighbour */</span>
+<a name="l00054"></a><a class="code" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">00054</a>         <span class="keyword">struct </span><a class="code" href="structolsr__con.html">olsr_con</a> *<a class="code" href="structolsr__con.html">olsr_con</a>;   <span class="comment">/* pointer to the connection */</span>
+<a name="l00055"></a>00055 
+<a name="l00056"></a>00056 };
+<a name="l00057"></a>00057 
+<a name="l00058"></a>00058 
+<a name="l00059"></a>00059 <span class="comment">/* we contruct a binary tree to handle the nodes */</span>
+<a name="l00060"></a><a class="code" href="structolsr__node.html">00060</a> <span class="keyword">struct </span><a class="code" href="structolsr__node.html">olsr_node</a> {
+<a name="l00061"></a>00061 
+<a name="l00062"></a><a class="code" href="structolsr__node.html#b64ee26ebfa4a3c2719de780b4cabada">00062</a>         <span class="keyword">struct </span><a class="code" href="structolsr__node.html">olsr_node</a> *<a class="code" href="structolsr__node.html#b64ee26ebfa4a3c2719de780b4cabada">left</a>;
+<a name="l00063"></a><a class="code" href="structolsr__node.html#bc6cf143d12b1e5a204ae64d40c0eb05">00063</a>         <span class="keyword">struct </span><a class="code" href="structolsr__node.html">olsr_node</a> *<a class="code" href="structolsr__node.html#bc6cf143d12b1e5a204ae64d40c0eb05">right</a>;
+<a name="l00064"></a><a class="code" href="structolsr__node.html#59690d75faff5c149faecacb4f4d2a57">00064</a>         <span class="keywordtype">char</span> <a class="code" href="structolsr__node.html#59690d75faff5c149faecacb4f4d2a57">ip</a>[<a class="code" href="olsrs3d_8h.html#f8c0c53607c56b59e883cb0894e5cde7">NAMEMAX</a>];   <span class="comment">/* host ip */</span>
+<a name="l00065"></a><a class="code" href="structolsr__node.html#c89186513811183436bcd79cdb6d7b4d">00065</a>         <span class="keywordtype">int</span> <a class="code" href="structolsr__node.html#c89186513811183436bcd79cdb6d7b4d">node_type</a>;   <span class="comment">/* normal = 0, internet gateway = 1, via hna announced network = 2 */</span>
+<a name="l00066"></a><a class="code" href="structolsr__node.html#4517a87e4fdbdb58f678743b5684088b">00066</a>         <span class="keywordtype">int</span> <a class="code" href="structolsr__node.html#4517a87e4fdbdb58f678743b5684088b">node_type_modified</a>;   <span class="comment">/* node_type modified flag */</span>
+<a name="l00067"></a><a class="code" href="structolsr__node.html#1d492aa6f4e75cc100d7a3e2f059d615">00067</a>         <span class="keywordtype">int</span> <a class="code" href="structolsr__node.html#1d492aa6f4e75cc100d7a3e2f059d615">last_seen</a>;   <span class="comment">/* last seen counter */</span>
+<a name="l00068"></a><a class="code" href="structolsr__node.html#f19d37e4aa5263be9a1741de24686664">00068</a>         <span class="keywordtype">int</span> <a class="code" href="structolsr__node.html#f19d37e4aa5263be9a1741de24686664">visible</a>;   <span class="comment">/* is this node visible or vanished */</span>
+<a name="l00069"></a><a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">00069</a>         <span class="keywordtype">float</span> <a class="code" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a>[3];   <span class="comment">/* position vector in 3d "space" */</span>
+<a name="l00070"></a><a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">00070</a>         <span class="keywordtype">float</span> <a class="code" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a>[3];   <span class="comment">/* move vector */</span>
+<a name="l00071"></a><a class="code" href="structolsr__node.html#15be0912065801026e7b4411af561788">00071</a>         <span class="keywordtype">int</span> <a class="code" href="structolsr__node.html#15be0912065801026e7b4411af561788">obj_id</a>;   <span class="comment">/* id of node object in s3d */</span>
+<a name="l00072"></a><a class="code" href="structolsr__node.html#f2e3f729be82b64001867038bbe8012a">00072</a>         <span class="keywordtype">int</span> <a class="code" href="structolsr__node.html#f2e3f729be82b64001867038bbe8012a">desc_id</a>;   <span class="comment">/* id of node description object in s3d */</span>
+<a name="l00073"></a><a class="code" href="structolsr__node.html#c2a66c5312cf64fec10f6b8903dbd966">00073</a>         <span class="keywordtype">float</span> <a class="code" href="structolsr__node.html#c2a66c5312cf64fec10f6b8903dbd966">desc_length</a>;   <span class="comment">/* length of node description object in s3d */</span>
+<a name="l00074"></a><a class="code" href="structolsr__node.html#3b80ce78a06be6aba5a1f93887442764">00074</a>         <span class="keyword">struct </span><a class="code" href="structolsr__neigh__list.html">olsr_neigh_list</a> *<a class="code" href="structolsr__neigh__list.html">olsr_neigh_list</a>;   <span class="comment">/* pointer to first neighbour */</span>
+<a name="l00075"></a>00075 
+<a name="l00076"></a>00076 };
+<a name="l00077"></a>00077 
+<a name="l00078"></a>00078 
+<a name="l00079"></a><a class="code" href="structObj__to__ip.html">00079</a> <span class="keyword">struct </span><a class="code" href="structObj__to__ip.html">Obj_to_ip</a> {
+<a name="l00080"></a><a class="code" href="structObj__to__ip.html#23759dec76c683ac720f937fea4e4d41">00080</a>         <span class="keywordtype">int</span> <a class="code" href="structObj__to__ip.html#23759dec76c683ac720f937fea4e4d41">id</a>;
+<a name="l00081"></a><a class="code" href="structObj__to__ip.html#207d8f9a609e3e20b4cbd9a7976dcd18">00081</a>         <span class="keyword">struct </span><a class="code" href="structolsr__node.html">olsr_node</a> *<a class="code" href="structolsr__node.html">olsr_node</a>;
+<a name="l00082"></a><a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">00082</a>         <span class="keyword">struct </span><a class="code" href="structObj__to__ip.html">Obj_to_ip</a> *<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a>;
+<a name="l00083"></a><a class="code" href="structObj__to__ip.html#c41475dd4632807df16315bad4309333">00083</a>         <span class="keyword">struct </span><a class="code" href="structObj__to__ip.html">Obj_to_ip</a> *<a class="code" href="structObj__to__ip.html#c41475dd4632807df16315bad4309333">prev</a>;
+<a name="l00084"></a>00084 };
+<a name="l00085"></a>00085 
+<a name="l00086"></a>00086 
+<a name="l00087"></a>00087 
+<a name="l00088"></a>00088 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="main_8c.html#923774364cedbc16baa0bc05e9be136c">Debug</a>;
+<a name="l00089"></a>00089 
+<a name="l00090"></a>00090 <span class="keyword">extern</span> <span class="keyword">struct </span><a class="code" href="structolsr__con.html">olsr_con</a> *<a class="code" href="main_8c.html#0643a36891539929d987e2ee83ff81d1">Con_begin</a>;   <span class="comment">/* begin of connection list */</span>
+<a name="l00091"></a>00091 <span class="keyword">extern</span> <span class="keyword">struct </span><a class="code" href="structolsr__node.html">olsr_node</a> *<a class="code" href="main_8c.html#c5c5c6846587092d0c23b58b558e680c">Olsr_root</a>;   <span class="comment">/* top of olsr node tree */</span>
+<a name="l00092"></a>00092 <span class="keyword">extern</span> <span class="keyword">struct </span><a class="code" href="structObj__to__ip.html">Obj_to_ip</a> *<a class="code" href="main_8c.html#9494e9e8cbdc4eceb86cb33ff0006785">Obj_to_ip_head</a>, *<a class="code" href="main_8c.html#236217b97f5fe65457d8b22c73c5073d">Obj_to_ip_end</a>,*<a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>;   <span class="comment">/* struct list */</span>
+<a name="l00093"></a>00093 
+<a name="l00094"></a>00094 <span class="keyword">extern</span> <span class="keywordtype">int</span>      <a class="code" href="main_8c.html#5eba8148fe9257c34665ed364b595fdb">Olsr_node_obj</a>;
+<a name="l00095"></a>00095 <span class="keyword">extern</span> <span class="keywordtype">int</span>      <a class="code" href="main_8c.html#b02228665cef19331d409b0d8a831531">Olsr_node_inet_obj</a>;
+<a name="l00096"></a>00096 <span class="keyword">extern</span> <span class="keywordtype">int</span>      <a class="code" href="main_8c.html#c03c9b38147e4231238c44f4b5fbdff7">Olsr_node_hna_net</a>;
+<a name="l00097"></a>00097 
+<a name="l00098"></a>00098 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="main_8c.html#4dfd0657ff868fa02113bcd3335acff1">Olsr_node_count_obj</a>;
+<a name="l00099"></a>00099 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="main_8c.html#86c048bc4aaab319f4d61f7c0e1f056f">Olsr_node_count</a>;
+<a name="l00100"></a>00100 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="main_8c.html#58acad60c78b63554c696703227d0b7b">Last_olsr_node_count</a>;
+<a name="l00101"></a>00101 
+<a name="l00102"></a>00102 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="main_8c.html#5bcc20f84efa7bd4aafc56a629f2eff3">Net_read_count</a>;
+<a name="l00103"></a>00103 
+<a name="l00104"></a>00104 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="main_8c.html#e113d40abb6f4dd73e4b1253917a1942">ZeroPoint</a>;
+<a name="l00105"></a>00105 
+<a name="l00106"></a>00106 <span class="keyword">extern</span> <span class="keywordtype">float</span> <a class="code" href="main_8c.html#f23a6ad2da4511ef430c4f522ae9f4cc">Bottom</a>, <a class="code" href="main_8c.html#6f68bad9075598ca8ede1827c6832376">Left</a>;
+<a name="l00107"></a>00107 
+<a name="l00108"></a>00108 <span class="keyword">extern</span> <span class="keywordtype">char</span> <a class="code" href="olsrs3d_8h.html#00f1cd38b187535569d0354f2506fb74">lbuf</a>[<a class="code" href="olsrs3d_8h.html#e310f74f793edeb882f0c2d8d8b50bb8">MAXLINESIZE</a>];
+<a name="l00109"></a>00109 <span class="comment">/* process */</span>
+<a name="l00110"></a>00110 <span class="keywordtype">void</span> <a class="code" href="olsrs3d_8h.html#edfb2ae44af543946842187ced1cd47e">lst_initialize</a>();
+<a name="l00111"></a>00111 <span class="keywordtype">void</span> <a class="code" href="olsrs3d_8h.html#d01a29bcb2e2daed6fcc6516c328f141">lst_add</a>(<span class="keywordtype">int</span> <span class="keywordtype">id</span>,<span class="keyword">struct</span> <a class="code" href="structolsr__node.html">olsr_node</a> **<a class="code" href="structolsr__node.html">olsr_node</a>);
+<a name="l00112"></a>00112 <span class="keywordtype">void</span> <a class="code" href="olsrs3d_8h.html#febf2594bdfe9ec411d0c04c9cd951b3">lst_del</a>(<span class="keywordtype">int</span> <span class="keywordtype">id</span>);
+<a name="l00113"></a>00113 <span class="keyword">struct </span><a class="code" href="structolsr__node.html">olsr_node</a> **<a class="code" href="olsrs3d_8h.html#ef8aff26d4e096ef0880c204c13309f0">lst_search</a>(<span class="keywordtype">int</span> <span class="keywordtype">id</span>);
+<a name="l00114"></a>00114 <span class="keywordtype">void</span> <a class="code" href="olsrs3d_8h.html#a015f713ca02d8b76a52175b4128d3e8">lst_out</a>();
+<a name="l00115"></a>00115 <span class="keywordtype">void</span> <a class="code" href="olsrs3d_8h.html#576c61914d53ad9035e74317dbb15903">move_lst_ptr</a>(<span class="keywordtype">int</span> *<span class="keywordtype">id</span>);
+<a name="l00116"></a>00116 <span class="keywordtype">int</span> <a class="code" href="olsrs3d_8h.html#6b4e9b6718b671f6330c2e501c60d3c1">process_main</a>();
+<a name="l00117"></a>00117 <span class="comment">/* net */</span>
+<a name="l00118"></a>00118 <span class="keywordtype">int</span> <a class="code" href="net_8c.html#63c933342efd8cac7f272b92d8acab05">net_init</a>(<span class="keywordtype">char</span> *host);
+<a name="l00119"></a>00119 <span class="keywordtype">int</span> <a class="code" href="net_8c.html#b8a768eba717722a3d860c01f69fbbc9">net_main</a>();
+<a name="l00120"></a>00120 <span class="keywordtype">int</span> <a class="code" href="net_8c.html#98aebc7a8515c76551eb15ecd465b923">net_quit</a>();
+<a name="l00121"></a>00121 <span class="comment">/* main */</span>
+<a name="l00122"></a>00122 <span class="keywordtype">void</span> <a class="code" href="main_8c.html#be0835e7acb76ea987ac80769302d90a">out_of_mem</a>( <span class="keywordtype">void</span> );
+<a name="l00123"></a>00123 <span class="keyword">struct </span><a class="code" href="structolsr__node.html">olsr_node</a> **<a class="code" href="olsrs3d_8h.html#ef8aff26d4e096ef0880c204c13309f0">lst_search</a>(<span class="keywordtype">int</span> <span class="keywordtype">id</span>);
+<a name="l00124"></a>00124 
+</pre></div><hr size="1"><address style="align: right;"><small>Generated on Sun Mar 19 13:28:20 2006 for olsrs3d by&nbsp;
+<a href="http://www.doxygen.org/index.html">
+<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6 </small></address>
+</body>
+</html>

Added: trunk/apps/olsrs3d/doxygen/html/olsrs3d_8h.html
===================================================================
--- trunk/apps/olsrs3d/doxygen/html/olsrs3d_8h.html	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/html/olsrs3d_8h.html	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,1339 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
+<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
+<title>olsrs3d: s3d/apps/olsrs3d/olsrs3d.h File Reference</title>
+<link href="doxygen.css" rel="stylesheet" type="text/css">
+<link href="tabs.css" rel="stylesheet" type="text/css">
+</head><body>
+<!-- Generated by Doxygen 1.4.6 -->
+<div class="tabs">
+  <ul>
+    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
+    <li><a href="classes.html"><span>Classes</span></a></li>
+    <li id="current"><a href="files.html"><span>Files</span></a></li>
+    <li><a href="dirs.html"><span>Directories</span></a></li>
+  </ul></div>
+<div class="tabs">
+  <ul>
+    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
+    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
+  </ul></div>
+<div class="nav">
+<a class="el" href="dir_9d2efe7c7f87ee6309da929964f0685b.html">s3d</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_5d167550802dbd943c0631943f884f5b.html">apps</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_bf110b9fd34b0903efb6170e1cee5506.html">olsrs3d</a></div>
+<h1>olsrs3d.h File Reference</h1>
+<p>
+<a href="olsrs3d_8h-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
+<tr><td></td></tr>
+<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
+<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structObj__to__ip.html">Obj_to_ip</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structolsr__con.html">olsr_con</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structolsr__neigh__list.html">olsr_neigh_list</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structolsr__node.html">olsr_node</a></td></tr>
+
+<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
+<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="olsrs3d_8h.html#16c16f9369be4a374a3e621f6d13bb16">MAXDATASIZE</a>&nbsp;&nbsp;&nbsp;100</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="olsrs3d_8h.html#e310f74f793edeb882f0c2d8d8b50bb8">MAXLINESIZE</a>&nbsp;&nbsp;&nbsp;1000</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="olsrs3d_8h.html#f8c0c53607c56b59e883cb0894e5cde7">NAMEMAX</a>&nbsp;&nbsp;&nbsp;128</td></tr>
+
+<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
+<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="olsrs3d_8h.html#d01a29bcb2e2daed6fcc6516c328f141">lst_add</a> (int id, struct <a class="el" href="structolsr__node.html">olsr_node</a> **<a class="el" href="structolsr__node.html">olsr_node</a>)</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="olsrs3d_8h.html#febf2594bdfe9ec411d0c04c9cd951b3">lst_del</a> (int id)</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="olsrs3d_8h.html#edfb2ae44af543946842187ced1cd47e">lst_initialize</a> ()</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="olsrs3d_8h.html#a015f713ca02d8b76a52175b4128d3e8">lst_out</a> ()</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structolsr__node.html">olsr_node</a> **&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="olsrs3d_8h.html#ef8aff26d4e096ef0880c204c13309f0">lst_search</a> (int id)</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="olsrs3d_8h.html#576c61914d53ad9035e74317dbb15903">move_lst_ptr</a> (int *id)</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="olsrs3d_8h.html#63c933342efd8cac7f272b92d8acab05">net_init</a> (char *host)</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="olsrs3d_8h.html#b8a768eba717722a3d860c01f69fbbc9">net_main</a> ()</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="olsrs3d_8h.html#98aebc7a8515c76551eb15ecd465b923">net_quit</a> ()</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="olsrs3d_8h.html#be0835e7acb76ea987ac80769302d90a">out_of_mem</a> (void)</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="olsrs3d_8h.html#6b4e9b6718b671f6330c2e501c60d3c1">process_main</a> ()</td></tr>
+
+<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
+<tr><td class="memItemLeft" nowrap align="right" valign="top">float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="olsrs3d_8h.html#f23a6ad2da4511ef430c4f522ae9f4cc">Bottom</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structolsr__con.html">olsr_con</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="olsrs3d_8h.html#0643a36891539929d987e2ee83ff81d1">Con_begin</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="olsrs3d_8h.html#923774364cedbc16baa0bc05e9be136c">Debug</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="olsrs3d_8h.html#58acad60c78b63554c696703227d0b7b">Last_olsr_node_count</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="olsrs3d_8h.html#00f1cd38b187535569d0354f2506fb74">lbuf</a> [MAXLINESIZE]</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="olsrs3d_8h.html#6f68bad9075598ca8ede1827c6832376">Left</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structObj__to__ip.html">Obj_to_ip</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="olsrs3d_8h.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="olsrs3d_8h.html#5bcc20f84efa7bd4aafc56a629f2eff3">Net_read_count</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structObj__to__ip.html">Obj_to_ip</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="olsrs3d_8h.html#236217b97f5fe65457d8b22c73c5073d">Obj_to_ip_end</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structObj__to__ip.html">Obj_to_ip</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="olsrs3d_8h.html#9494e9e8cbdc4eceb86cb33ff0006785">Obj_to_ip_head</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="olsrs3d_8h.html#86c048bc4aaab319f4d61f7c0e1f056f">Olsr_node_count</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="olsrs3d_8h.html#4dfd0657ff868fa02113bcd3335acff1">Olsr_node_count_obj</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="olsrs3d_8h.html#c03c9b38147e4231238c44f4b5fbdff7">Olsr_node_hna_net</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="olsrs3d_8h.html#b02228665cef19331d409b0d8a831531">Olsr_node_inet_obj</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="olsrs3d_8h.html#5eba8148fe9257c34665ed364b595fdb">Olsr_node_obj</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structolsr__node.html">olsr_node</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="olsrs3d_8h.html#c5c5c6846587092d0c23b58b558e680c">Olsr_root</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="olsrs3d_8h.html#e113d40abb6f4dd73e4b1253917a1942">ZeroPoint</a></td></tr>
+
+</table>
+<hr><h2>Define Documentation</h2>
+<a class="anchor" name="16c16f9369be4a374a3e621f6d13bb16"></a><!-- doxytag: member="olsrs3d.h::MAXDATASIZE" ref="16c16f9369be4a374a3e621f6d13bb16" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">#define MAXDATASIZE&nbsp;&nbsp;&nbsp;100          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="olsrs3d_8h-source.html#l00030">30</a> of file <a class="el" href="olsrs3d_8h-source.html">olsrs3d.h</a>.
+<p>
+Referenced by <a class="el" href="net_8c-source.html#l00074">net_main()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="e310f74f793edeb882f0c2d8d8b50bb8"></a><!-- doxytag: member="olsrs3d.h::MAXLINESIZE" ref="e310f74f793edeb882f0c2d8d8b50bb8" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">#define MAXLINESIZE&nbsp;&nbsp;&nbsp;1000          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="olsrs3d_8h-source.html#l00029">29</a> of file <a class="el" href="olsrs3d_8h-source.html">olsrs3d.h</a>.
+<p>
+Referenced by <a class="el" href="net_8c-source.html#l00074">net_main()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="f8c0c53607c56b59e883cb0894e5cde7"></a><!-- doxytag: member="olsrs3d.h::NAMEMAX" ref="f8c0c53607c56b59e883cb0894e5cde7" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">#define NAMEMAX&nbsp;&nbsp;&nbsp;128          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="olsrs3d_8h-source.html#l00028">28</a> of file <a class="el" href="olsrs3d_8h-source.html">olsrs3d.h</a>.
+<p>
+Referenced by <a class="el" href="process_8c-source.html#l00048">add_olsr_con()</a>, <a class="el" href="process_8c-source.html#l00155">get_olsr_node()</a>, and <a class="el" href="process_8c-source.html#l00368">process_main()</a>.    </td>
+  </tr>
+</table>
+<hr><h2>Function Documentation</h2>
+<a class="anchor" name="d01a29bcb2e2daed6fcc6516c328f141"></a><!-- doxytag: member="olsrs3d.h::lst_add" ref="d01a29bcb2e2daed6fcc6516c328f141" args="(int id, struct olsr_node **olsr_node)" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">void lst_add           </td>
+          <td class="md" valign="top">(&nbsp;</td>
+          <td class="md" nowrap valign="top">int&nbsp;</td>
+          <td class="mdname" nowrap> <em>id</em>, </td>
+        </tr>
+        <tr>
+          <td class="md" nowrap align="right"></td>
+          <td class="md"></td>
+          <td class="md" nowrap>struct <a class="el" href="structolsr__node.html">olsr_node</a> **&nbsp;</td>
+          <td class="mdname" nowrap> <em>olsr_node</em></td>
+        </tr>
+        <tr>
+          <td class="md"></td>
+          <td class="md">)&nbsp;</td>
+          <td class="md" colspan="2"></td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="process_8c-source.html#l00259">259</a> of file <a class="el" href="process_8c-source.html">process.c</a>.
+<p>
+References <a class="el" href="main_8c-source.html#l00047">List_ptr</a>, <a class="el" href="process_8c-source.html#l00303">move_lst_ptr()</a>, <a class="el" href="olsrs3d_8h-source.html#l00082">Obj_to_ip::next</a>, <a class="el" href="olsrs3d_8h-source.html#l00081">Obj_to_ip::olsr_node</a>, <a class="el" href="main_8c-source.html#l00094">out_of_mem()</a>, and <a class="el" href="olsrs3d_8h-source.html#l00083">Obj_to_ip::prev</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00186">handle_olsr_node()</a>.<div class="fragment"><pre class="fragment"><a name="l00259"></a>00259                                                   {
+<a name="l00260"></a>00260         <span class="keyword">struct </span><a class="code" href="structObj__to__ip.html">Obj_to_ip</a> *<span class="keyword">new</span>;
+<a name="l00261"></a>00261         <span class="keyword">new</span> = (<span class="keyword">struct </span><a class="code" href="structObj__to__ip.html">Obj_to_ip</a>*) malloc(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structObj__to__ip.html">Obj_to_ip</a>));
+<a name="l00262"></a>00262         <span class="keywordflow">if</span>(<span class="keyword">new</span> == NULL)
+<a name="l00263"></a>00263                 <a class="code" href="main_8c.html#be0835e7acb76ea987ac80769302d90a">out_of_mem</a>();
+<a name="l00264"></a>00264         <span class="keyword">new</span>-&gt;id = <a class="code" href="structObj__to__ip.html#23759dec76c683ac720f937fea4e4d41">id</a>;
+<a name="l00265"></a>00265         <span class="keyword">new</span>-&gt;olsr_node = *<a class="code" href="structObj__to__ip.html#207d8f9a609e3e20b4cbd9a7976dcd18">olsr_node</a>;
+<a name="l00266"></a>00266         <a class="code" href="olsrs3d_8h.html#576c61914d53ad9035e74317dbb15903">move_lst_ptr</a>(&amp;<span class="keywordtype">id</span>);
+<a name="l00267"></a>00267         <span class="keyword">new</span>-&gt;prev = <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>;
+<a name="l00268"></a>00268         <span class="keyword">new</span>-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a> = <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a>;
+<a name="l00269"></a>00269         <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a>-&gt;<a class="code" href="structObj__to__ip.html#c41475dd4632807df16315bad4309333">prev</a> = <span class="keyword">new</span>;
+<a name="l00270"></a>00270         <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a> = <span class="keyword">new</span>;
+<a name="l00271"></a>00271         <span class="comment">/* printf("obj2ip: add object %d between %d .. %d ip %s to list\n",new-&gt;id,new-&gt;prev-&gt;id,new-&gt;next-&gt;id,new-&gt;olsr_node-&gt;ip); */</span>
+<a name="l00272"></a>00272 }
+</pre></div>
+<p>
+    </td>
+  </tr>
+</table>
+<a class="anchor" name="febf2594bdfe9ec411d0c04c9cd951b3"></a><!-- doxytag: member="olsrs3d.h::lst_del" ref="febf2594bdfe9ec411d0c04c9cd951b3" args="(int id)" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">void lst_del           </td>
+          <td class="md" valign="top">(&nbsp;</td>
+          <td class="md" nowrap valign="top">int&nbsp;</td>
+          <td class="mdname1" valign="top" nowrap> <em>id</em>          </td>
+          <td class="md" valign="top">&nbsp;)&nbsp;</td>
+          <td class="md" nowrap></td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="process_8c-source.html#l00281">281</a> of file <a class="el" href="process_8c-source.html">process.c</a>.
+<p>
+References <a class="el" href="olsrs3d_8h-source.html#l00080">Obj_to_ip::id</a>, <a class="el" href="main_8c-source.html#l00047">List_ptr</a>, <a class="el" href="process_8c-source.html#l00303">move_lst_ptr()</a>, <a class="el" href="olsrs3d_8h-source.html#l00082">Obj_to_ip::next</a>, and <a class="el" href="olsrs3d_8h-source.html#l00083">Obj_to_ip::prev</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00186">handle_olsr_node()</a>.<div class="fragment"><pre class="fragment"><a name="l00281"></a>00281                      {
+<a name="l00282"></a>00282         <span class="keyword">struct </span><a class="code" href="structObj__to__ip.html">Obj_to_ip</a> *del;
+<a name="l00283"></a>00283         <a class="code" href="olsrs3d_8h.html#576c61914d53ad9035e74317dbb15903">move_lst_ptr</a>(&amp;<span class="keywordtype">id</span>);
+<a name="l00284"></a>00284         <span class="keywordflow">if</span>(<span class="keywordtype">id</span> != <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>-&gt;<a class="code" href="structObj__to__ip.html#23759dec76c683ac720f937fea4e4d41">id</a>)
+<a name="l00285"></a>00285         {
+<a name="l00286"></a>00286                 printf(<span class="stringliteral">"obj2ip: remove id %d failed move_lst_ptr return id %d\n"</span>,<span class="keywordtype">id</span>,<a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a>-&gt;<a class="code" href="structObj__to__ip.html#23759dec76c683ac720f937fea4e4d41">id</a>);
+<a name="l00287"></a>00287         } <span class="keywordflow">else</span> {
+<a name="l00288"></a>00288                 del = <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>;
+<a name="l00289"></a>00289                 <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a>-&gt;<a class="code" href="structObj__to__ip.html#c41475dd4632807df16315bad4309333">prev</a> = <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>-&gt;<a class="code" href="structObj__to__ip.html#c41475dd4632807df16315bad4309333">prev</a>;
+<a name="l00290"></a>00290                 <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>-&gt;<a class="code" href="structObj__to__ip.html#c41475dd4632807df16315bad4309333">prev</a>-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a> = <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a>;
+<a name="l00291"></a>00291                 <span class="comment">/* printf("obj2ip: remove object %d --&gt; %d &lt;-- %d ip %s from list\n",List_ptr-&gt;prev-&gt;id,del-&gt;id,List_ptr-&gt;next-&gt;id,del-&gt;olsr_node-&gt;ip); */</span>
+<a name="l00292"></a>00292                 free(del);
+<a name="l00293"></a>00293         }
+<a name="l00294"></a>00294 }
+</pre></div>
+<p>
+    </td>
+  </tr>
+</table>
+<a class="anchor" name="edfb2ae44af543946842187ced1cd47e"></a><!-- doxytag: member="olsrs3d.h::lst_initialize" ref="edfb2ae44af543946842187ced1cd47e" args="()" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">void lst_initialize           </td>
+          <td class="md" valign="top">(&nbsp;</td>
+          <td class="mdname1" valign="top" nowrap>          </td>
+          <td class="md" valign="top">&nbsp;)&nbsp;</td>
+          <td class="md" nowrap></td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="process_8c-source.html#l00239">239</a> of file <a class="el" href="process_8c-source.html">process.c</a>.
+<p>
+References <a class="el" href="olsrs3d_8h-source.html#l00080">Obj_to_ip::id</a>, <a class="el" href="main_8c-source.html#l00047">List_ptr</a>, <a class="el" href="olsrs3d_8h-source.html#l00082">Obj_to_ip::next</a>, <a class="el" href="main_8c-source.html#l00047">Obj_to_ip_end</a>, <a class="el" href="main_8c-source.html#l00047">Obj_to_ip_head</a>, <a class="el" href="main_8c-source.html#l00094">out_of_mem()</a>, and <a class="el" href="olsrs3d_8h-source.html#l00083">Obj_to_ip::prev</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00804">main()</a>.<div class="fragment"><pre class="fragment"><a name="l00239"></a>00239                       {
+<a name="l00240"></a>00240         <a class="code" href="main_8c.html#9494e9e8cbdc4eceb86cb33ff0006785">Obj_to_ip_head</a> = (<span class="keyword">struct </span><a class="code" href="structObj__to__ip.html">Obj_to_ip</a>*) malloc(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structObj__to__ip.html">Obj_to_ip</a>));
+<a name="l00241"></a>00241         <a class="code" href="main_8c.html#236217b97f5fe65457d8b22c73c5073d">Obj_to_ip_end</a> = (<span class="keyword">struct </span>Obj_to_ip*) malloc(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> Obj_to_ip));
+<a name="l00242"></a>00242         <span class="keywordflow">if</span>(<a class="code" href="main_8c.html#9494e9e8cbdc4eceb86cb33ff0006785">Obj_to_ip_head</a> == NULL || <a class="code" href="main_8c.html#236217b97f5fe65457d8b22c73c5073d">Obj_to_ip_end</a> == NULL)
+<a name="l00243"></a>00243                 <a class="code" href="main_8c.html#be0835e7acb76ea987ac80769302d90a">out_of_mem</a>();
+<a name="l00244"></a>00244         <a class="code" href="main_8c.html#9494e9e8cbdc4eceb86cb33ff0006785">Obj_to_ip_head</a>-&gt;<a class="code" href="structObj__to__ip.html#23759dec76c683ac720f937fea4e4d41">id</a> = 0;
+<a name="l00245"></a>00245         <a class="code" href="main_8c.html#236217b97f5fe65457d8b22c73c5073d">Obj_to_ip_end</a>-&gt;<a class="code" href="structObj__to__ip.html#23759dec76c683ac720f937fea4e4d41">id</a> = 0;
+<a name="l00246"></a>00246         <a class="code" href="main_8c.html#9494e9e8cbdc4eceb86cb33ff0006785">Obj_to_ip_head</a>-&gt;<a class="code" href="structObj__to__ip.html#c41475dd4632807df16315bad4309333">prev</a> = <a class="code" href="main_8c.html#236217b97f5fe65457d8b22c73c5073d">Obj_to_ip_end</a>-&gt;<a class="code" href="structObj__to__ip.html#c41475dd4632807df16315bad4309333">prev</a> = <a class="code" href="main_8c.html#9494e9e8cbdc4eceb86cb33ff0006785">Obj_to_ip_head</a>;
+<a name="l00247"></a>00247         <a class="code" href="main_8c.html#9494e9e8cbdc4eceb86cb33ff0006785">Obj_to_ip_head</a>-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a> = <a class="code" href="main_8c.html#236217b97f5fe65457d8b22c73c5073d">Obj_to_ip_end</a>-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a> = <a class="code" href="main_8c.html#236217b97f5fe65457d8b22c73c5073d">Obj_to_ip_end</a>;
+<a name="l00248"></a>00248         <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a> = <a class="code" href="main_8c.html#9494e9e8cbdc4eceb86cb33ff0006785">Obj_to_ip_head</a>;
+<a name="l00249"></a>00249 }
+</pre></div>
+<p>
+    </td>
+  </tr>
+</table>
+<a class="anchor" name="a015f713ca02d8b76a52175b4128d3e8"></a><!-- doxytag: member="olsrs3d.h::lst_out" ref="a015f713ca02d8b76a52175b4128d3e8" args="()" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">void lst_out           </td>
+          <td class="md" valign="top">(&nbsp;</td>
+          <td class="mdname1" valign="top" nowrap>          </td>
+          <td class="md" valign="top">&nbsp;)&nbsp;</td>
+          <td class="md" nowrap></td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="process_8c-source.html#l00359">359</a> of file <a class="el" href="process_8c-source.html">process.c</a>.
+<p>
+References <a class="el" href="olsrs3d_8h-source.html#l00080">Obj_to_ip::id</a>, <a class="el" href="olsrs3d_8h-source.html#l00082">Obj_to_ip::next</a>, and <a class="el" href="main_8c-source.html#l00047">Obj_to_ip_head</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00690">keypress()</a>.<div class="fragment"><pre class="fragment"><a name="l00359"></a>00359                {
+<a name="l00360"></a>00360         <span class="keyword">struct </span><a class="code" href="structObj__to__ip.html">Obj_to_ip</a> *ptr;
+<a name="l00361"></a>00361         ptr = <a class="code" href="main_8c.html#9494e9e8cbdc4eceb86cb33ff0006785">Obj_to_ip_head</a>;
+<a name="l00362"></a>00362         <span class="keywordflow">while</span>(ptr != ptr-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a>) {
+<a name="l00363"></a>00363                 printf(<span class="stringliteral">"id-&gt; %d\n"</span>,ptr-&gt;<a class="code" href="structObj__to__ip.html#23759dec76c683ac720f937fea4e4d41">id</a>);
+<a name="l00364"></a>00364                 ptr = ptr-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a>;
+<a name="l00365"></a>00365         }
+<a name="l00366"></a>00366 }
+</pre></div>
+<p>
+    </td>
+  </tr>
+</table>
+<a class="anchor" name="ef8aff26d4e096ef0880c204c13309f0"></a><!-- doxytag: member="olsrs3d.h::lst_search" ref="ef8aff26d4e096ef0880c204c13309f0" args="(int id)" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">struct <a class="el" href="structolsr__node.html">olsr_node</a> ** lst_search           </td>
+          <td class="md" valign="top">(&nbsp;</td>
+          <td class="md" nowrap valign="top">int&nbsp;</td>
+          <td class="mdname1" valign="top" nowrap> <em>id</em>          </td>
+          <td class="md" valign="top">&nbsp;)&nbsp;</td>
+          <td class="md" nowrap></td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="process_8c-source.html#l00349">349</a> of file <a class="el" href="process_8c-source.html">process.c</a>.
+<p>
+References <a class="el" href="main_8c-source.html#l00047">List_ptr</a>, <a class="el" href="process_8c-source.html#l00303">move_lst_ptr()</a>, and <a class="el" href="olsrs3d_8h-source.html#l00081">Obj_to_ip::olsr_node</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00746">object_click()</a>.<div class="fragment"><pre class="fragment"><a name="l00349"></a>00349                                       {
+<a name="l00350"></a>00350         <a class="code" href="olsrs3d_8h.html#576c61914d53ad9035e74317dbb15903">move_lst_ptr</a>(&amp;<span class="keywordtype">id</span>);
+<a name="l00351"></a>00351         <span class="comment">/* TODO: return NULL when no node found */</span>
+<a name="l00352"></a>00352         <span class="comment">/* if(id != List_ptr-&gt;id) */</span>
+<a name="l00353"></a>00353                 <span class="comment">/* printf("obj2ip: search id....id not found\n"); */</span>
+<a name="l00354"></a>00354         <span class="comment">/* else */</span>
+<a name="l00355"></a>00355                 <span class="comment">/* printf("obj2ip: search found objekt_id=%d objekt_ip=%s\n",List_ptr-&gt;id,List_ptr-&gt;olsr_node-&gt;ip); */</span>
+<a name="l00356"></a>00356         <span class="keywordflow">return</span>(&amp;<a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>-&gt;<a class="code" href="structObj__to__ip.html#207d8f9a609e3e20b4cbd9a7976dcd18">olsr_node</a>);
+<a name="l00357"></a>00357 }
+</pre></div>
+<p>
+    </td>
+  </tr>
+</table>
+<a class="anchor" name="576c61914d53ad9035e74317dbb15903"></a><!-- doxytag: member="olsrs3d.h::move_lst_ptr" ref="576c61914d53ad9035e74317dbb15903" args="(int *id)" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">void move_lst_ptr           </td>
+          <td class="md" valign="top">(&nbsp;</td>
+          <td class="md" nowrap valign="top">int *&nbsp;</td>
+          <td class="mdname1" valign="top" nowrap> <em>id</em>          </td>
+          <td class="md" valign="top">&nbsp;)&nbsp;</td>
+          <td class="md" nowrap></td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="process_8c-source.html#l00303">303</a> of file <a class="el" href="process_8c-source.html">process.c</a>.
+<p>
+References <a class="el" href="olsrs3d_8h-source.html#l00080">Obj_to_ip::id</a>, <a class="el" href="main_8c-source.html#l00047">List_ptr</a>, <a class="el" href="olsrs3d_8h-source.html#l00082">Obj_to_ip::next</a>, <a class="el" href="main_8c-source.html#l00047">Obj_to_ip_end</a>, <a class="el" href="main_8c-source.html#l00047">Obj_to_ip_head</a>, and <a class="el" href="olsrs3d_8h-source.html#l00083">Obj_to_ip::prev</a>.
+<p>
+Referenced by <a class="el" href="process_8c-source.html#l00259">lst_add()</a>, <a class="el" href="process_8c-source.html#l00281">lst_del()</a>, and <a class="el" href="process_8c-source.html#l00349">lst_search()</a>.<div class="fragment"><pre class="fragment"><a name="l00303"></a>00303                            {
+<a name="l00304"></a>00304         <span class="comment">/* printf("obj2ip: move for %d\n",*id); */</span>
+<a name="l00305"></a>00305         <span class="comment">/* head to point at end or id lass then first element in linked list*/</span>
+<a name="l00306"></a>00306         <span class="keywordflow">if</span>(<a class="code" href="main_8c.html#9494e9e8cbdc4eceb86cb33ff0006785">Obj_to_ip_head</a>-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a> == <a class="code" href="main_8c.html#9494e9e8cbdc4eceb86cb33ff0006785">Obj_to_ip_head</a> || *id &lt; Obj_to_ip_head-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a>-&gt;<a class="code" href="structObj__to__ip.html#23759dec76c683ac720f937fea4e4d41">id</a>)
+<a name="l00307"></a>00307                 <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a> = <a class="code" href="main_8c.html#9494e9e8cbdc4eceb86cb33ff0006785">Obj_to_ip_head</a>;
+<a name="l00308"></a>00308         <span class="comment">/* id is greather then last element in linked list */</span>
+<a name="l00309"></a>00309         <span class="keywordflow">else</span> <span class="keywordflow">if</span>(*<span class="keywordtype">id</span> &gt; <a class="code" href="main_8c.html#236217b97f5fe65457d8b22c73c5073d">Obj_to_ip_end</a>-&gt;<a class="code" href="structObj__to__ip.html#c41475dd4632807df16315bad4309333">prev</a>-&gt;<a class="code" href="structObj__to__ip.html#23759dec76c683ac720f937fea4e4d41">id</a>)
+<a name="l00310"></a>00310                 <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a> = <a class="code" href="main_8c.html#236217b97f5fe65457d8b22c73c5073d">Obj_to_ip_end</a>-&gt;<a class="code" href="structObj__to__ip.html#c41475dd4632807df16315bad4309333">prev</a>;
+<a name="l00311"></a>00311         <span class="keywordflow">else</span> {
+<a name="l00312"></a>00312                 <span class="comment">/* printf("obj2ip: ok i search deeper ;-) for id=%d\n",*id); */</span>
+<a name="l00313"></a>00313                 <span class="keywordflow">if</span>((*<span class="keywordtype">id</span> - (<span class="keywordtype">int</span>) <a class="code" href="main_8c.html#9494e9e8cbdc4eceb86cb33ff0006785">Obj_to_ip_head</a>-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a>-&gt;<a class="code" href="structObj__to__ip.html#23759dec76c683ac720f937fea4e4d41">id</a>) &lt;= ((<span class="keywordtype">int</span>)(<a class="code" href="main_8c.html#236217b97f5fe65457d8b22c73c5073d">Obj_to_ip_end</a>-&gt;<a class="code" href="structObj__to__ip.html#c41475dd4632807df16315bad4309333">prev</a>-&gt;<a class="code" href="structObj__to__ip.html#23759dec76c683ac720f937fea4e4d41">id</a>)-*<span class="keywordtype">id</span>)) {
+<a name="l00314"></a>00314                         <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a> = <a class="code" href="main_8c.html#9494e9e8cbdc4eceb86cb33ff0006785">Obj_to_ip_head</a>;
+<a name="l00315"></a>00315                         <span class="comment">/* printf("obj2ip: start at head id %d - %d &lt;= %d - %d \n",*id,Obj_to_ip_head-&gt;next-&gt;id,Obj_to_ip_end-&gt;prev-&gt;id,*id); */</span>
+<a name="l00316"></a>00316                         <span class="keywordflow">while</span>(*<span class="keywordtype">id</span> &gt;= <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a>-&gt;<a class="code" href="structObj__to__ip.html#23759dec76c683ac720f937fea4e4d41">id</a>) {
+<a name="l00317"></a>00317                                 <span class="comment">/* printf("obj2ip: %d &gt; %d move to ",*id,List_ptr-&gt;id); */</span>
+<a name="l00318"></a>00318                                 <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a> = <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a>;
+<a name="l00319"></a>00319                                 <span class="comment">/* printf("%d\n",List_ptr-&gt;id); */</span>
+<a name="l00320"></a>00320                         }
+<a name="l00321"></a>00321                 } <span class="keywordflow">else</span> {
+<a name="l00322"></a>00322                         <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a> = <a class="code" href="main_8c.html#236217b97f5fe65457d8b22c73c5073d">Obj_to_ip_end</a>;
+<a name="l00323"></a>00323                         <span class="comment">/* printf("obj2ip: start at end id %d - %d &gt; %d - %d \n",*id,Obj_to_ip_head-&gt;next-&gt;id,Obj_to_ip_end-&gt;prev-&gt;id,*id);  */</span>
+<a name="l00324"></a>00324                         <span class="comment">/*  do List_ptr = List_ptr-&gt;prev; while(*id &gt; List_ptr-&gt;prev-&gt;id); */</span>
+<a name="l00325"></a>00325                         <span class="keywordflow">while</span>(*id &lt; List_ptr-&gt;<a class="code" href="structObj__to__ip.html#c41475dd4632807df16315bad4309333">prev</a>-&gt;<a class="code" href="structObj__to__ip.html#23759dec76c683ac720f937fea4e4d41">id</a>) {
+<a name="l00326"></a>00326                                 <span class="comment">/* printf("obj2ip: %d &lt; %d move to ",*id,List_ptr-&gt;id); */</span>
+<a name="l00327"></a>00327                                 <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a> = <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>-&gt;<a class="code" href="structObj__to__ip.html#c41475dd4632807df16315bad4309333">prev</a>;
+<a name="l00328"></a>00328                                 <span class="comment">/* printf("%d\n",List_ptr-&gt;id); */</span>
+<a name="l00329"></a>00329                         }
+<a name="l00330"></a>00330                         <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a> = <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>-&gt;<a class="code" href="structObj__to__ip.html#c41475dd4632807df16315bad4309333">prev</a>;
+<a name="l00331"></a>00331                 }
+<a name="l00332"></a>00332                 <span class="comment">/* printf("obj2ip: found id to insert between %d--&gt; .. &lt;--%d to search/delete %d--&gt; .. &lt;--%d\n",List_ptr-&gt;id,List_ptr-&gt;next-&gt;next-&gt;id,List_ptr-&gt;prev-&gt;id,List_ptr-&gt;next-&gt;id); */</span>
+<a name="l00333"></a>00333         }
+<a name="l00334"></a>00334 }
+</pre></div>
+<p>
+    </td>
+  </tr>
+</table>
+<a class="anchor" name="63c933342efd8cac7f272b92d8acab05"></a><!-- doxytag: member="olsrs3d.h::net_init" ref="63c933342efd8cac7f272b92d8acab05" args="(char *host)" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">int net_init           </td>
+          <td class="md" valign="top">(&nbsp;</td>
+          <td class="md" nowrap valign="top">char *&nbsp;</td>
+          <td class="mdname1" valign="top" nowrap> <em>host</em>          </td>
+          <td class="md" valign="top">&nbsp;)&nbsp;</td>
+          <td class="md" nowrap></td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="net_8c-source.html#l00045">45</a> of file <a class="el" href="net_8c-source.html">net.c</a>.
+<p>
+References <a class="el" href="net_8c-source.html#l00040">PORT</a>, and <a class="el" href="net_8c-source.html#l00044">sockfd</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00804">main()</a>.<div class="fragment"><pre class="fragment"><a name="l00046"></a>00046 {
+<a name="l00047"></a>00047     <span class="keyword">struct </span>hostent *he;
+<a name="l00048"></a>00048     <span class="keyword">struct </span>sockaddr_in their_addr; <span class="comment">/* connector's address information  */</span>
+<a name="l00049"></a>00049 
+<a name="l00050"></a>00050     <span class="keywordflow">if</span> ((he=gethostbyname(host)) == NULL) {  <span class="comment">/* get the host info  */</span>
+<a name="l00051"></a>00051         herror(<span class="stringliteral">"gethostbyname"</span>);
+<a name="l00052"></a>00052         <span class="keywordflow">return</span>(1);
+<a name="l00053"></a>00053     }
+<a name="l00054"></a>00054 
+<a name="l00055"></a>00055     <span class="keywordflow">if</span> ((<a class="code" href="net_8c.html#d2c8fb3df3a737e0685e902870a611d2">sockfd</a> = socket(PF_INET, SOCK_STREAM, 0)) == -1) {
+<a name="l00056"></a>00056         perror(<span class="stringliteral">"socket"</span>);
+<a name="l00057"></a>00057         <span class="keywordflow">return</span>(1);
+<a name="l00058"></a>00058     }
+<a name="l00059"></a>00059 
+<a name="l00060"></a>00060     their_addr.sin_family = AF_INET;    <span class="comment">/* host byte order  */</span>
+<a name="l00061"></a>00061     their_addr.sin_port = htons(<a class="code" href="net_8c.html#614217d263be1fb1a5f76e2ff7be19a2">PORT</a>);  <span class="comment">/* short, network byte order  */</span>
+<a name="l00062"></a>00062     their_addr.sin_addr = *((<span class="keyword">struct </span>in_addr *)he-&gt;h_addr);
+<a name="l00063"></a>00063     memset(&amp;(their_addr.sin_zero), <span class="charliteral">'\0'</span>, 8);  <span class="comment">/* zero the rest of the struct */</span>
+<a name="l00064"></a>00064 
+<a name="l00065"></a>00065     <span class="keywordflow">if</span> (connect(<a class="code" href="net_8c.html#d2c8fb3df3a737e0685e902870a611d2">sockfd</a>, (<span class="keyword">struct</span> sockaddr *)&amp;their_addr,
+<a name="l00066"></a>00066                                           <span class="keyword">sizeof</span>(<span class="keyword">struct</span> sockaddr)) == -1) {
+<a name="l00067"></a>00067         perror(<span class="stringliteral">"connect"</span>);
+<a name="l00068"></a>00068         <span class="keywordflow">return</span>(1);
+<a name="l00069"></a>00069     }
+<a name="l00070"></a>00070         fcntl(<a class="code" href="net_8c.html#d2c8fb3df3a737e0685e902870a611d2">sockfd</a>,F_SETFL, O_NONBLOCK);
+<a name="l00071"></a>00071         <span class="keywordflow">return</span>(0);
+<a name="l00072"></a>00072 }
+</pre></div>
+<p>
+    </td>
+  </tr>
+</table>
+<a class="anchor" name="b8a768eba717722a3d860c01f69fbbc9"></a><!-- doxytag: member="olsrs3d.h::net_main" ref="b8a768eba717722a3d860c01f69fbbc9" args="()" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">int net_main           </td>
+          <td class="md" valign="top">(&nbsp;</td>
+          <td class="mdname1" valign="top" nowrap>          </td>
+          <td class="md" valign="top">&nbsp;)&nbsp;</td>
+          <td class="md" nowrap></td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="net_8c-source.html#l00074">74</a> of file <a class="el" href="net_8c-source.html">net.c</a>.
+<p>
+References <a class="el" href="net_8c-source.html#l00041">buf</a>, <a class="el" href="main_8c-source.html#l00041">Debug</a>, <a class="el" href="process_8c-source.html#l00034">lbuf</a>, <a class="el" href="olsrs3d_8h-source.html#l00030">MAXDATASIZE</a>, <a class="el" href="olsrs3d_8h-source.html#l00029">MAXLINESIZE</a>, <a class="el" href="main_8c-source.html#l00052">Net_read_count</a>, <a class="el" href="net_8c-source.html#l00044">numbytes</a>, <a class="el" href="process_8c-source.html#l00368">process_main()</a>, and <a class="el" href="net_8c-source.html#l00044">sockfd</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00624">mainloop()</a>.<div class="fragment"><pre class="fragment"><a name="l00074"></a>00074                {
+<a name="l00075"></a>00075 
+<a name="l00076"></a>00076         <span class="keywordflow">if</span> ((<a class="code" href="net_8c.html#24bdd92b6cf8d141a4a27d4882c6a905">numbytes</a>=recv(<a class="code" href="net_8c.html#d2c8fb3df3a737e0685e902870a611d2">sockfd</a>, <a class="code" href="net_8c.html#f39ed2161fb25f51aa61ffc038306f75">buf</a>, <a class="code" href="olsrs3d_8h.html#16c16f9369be4a374a3e621f6d13bb16">MAXDATASIZE</a>-1, 0)) == -1) {
+<a name="l00077"></a>00077                 <span class="keywordflow">if</span> (errno==EAGAIN)
+<a name="l00078"></a>00078                         <span class="keywordflow">return</span>(0); <span class="comment">/* well, that's okay ... */</span>
+<a name="l00079"></a>00079                 perror(<span class="stringliteral">"recv"</span>);
+<a name="l00080"></a>00080                 <span class="keywordflow">return</span>(-1);
+<a name="l00081"></a>00081         }
+<a name="l00082"></a>00082 
+<a name="l00083"></a>00083         <span class="keywordflow">if</span> (<a class="code" href="net_8c.html#24bdd92b6cf8d141a4a27d4882c6a905">numbytes</a>==0) {
+<a name="l00084"></a>00084                 printf(<span class="stringliteral">"connection reset\n"</span>);
+<a name="l00085"></a>00085                 <span class="keywordflow">return</span>(-1);
+<a name="l00086"></a>00086         }
+<a name="l00087"></a>00087 
+<a name="l00088"></a>00088         <a class="code" href="net_8c.html#f39ed2161fb25f51aa61ffc038306f75">buf</a>[<a class="code" href="net_8c.html#24bdd92b6cf8d141a4a27d4882c6a905">numbytes</a>] = <span class="charliteral">'\0'</span>;
+<a name="l00089"></a>00089 
+<a name="l00090"></a>00090         <span class="comment">/* check for potential buffer overflow */</span>
+<a name="l00091"></a>00091         <span class="keywordflow">if</span> ( ( strlen( <a class="code" href="olsrs3d_8h.html#00f1cd38b187535569d0354f2506fb74">lbuf</a> ) + strlen( <a class="code" href="net_8c.html#f39ed2161fb25f51aa61ffc038306f75">buf</a> ) ) &lt; <a class="code" href="olsrs3d_8h.html#e310f74f793edeb882f0c2d8d8b50bb8">MAXLINESIZE</a> ) {
+<a name="l00092"></a>00092 
+<a name="l00093"></a>00093                 strncat( <a class="code" href="olsrs3d_8h.html#00f1cd38b187535569d0354f2506fb74">lbuf</a>, <a class="code" href="net_8c.html#f39ed2161fb25f51aa61ffc038306f75">buf</a>, <a class="code" href="olsrs3d_8h.html#e310f74f793edeb882f0c2d8d8b50bb8">MAXLINESIZE</a> );
+<a name="l00094"></a>00094 
+<a name="l00095"></a>00095         } <span class="keywordflow">else</span> {
+<a name="l00096"></a>00096 
+<a name="l00097"></a>00097                 <span class="comment">/* hope that carriage return is now in buf */</span>
+<a name="l00098"></a>00098                 <span class="keywordflow">if</span> ( strlen( <a class="code" href="olsrs3d_8h.html#00f1cd38b187535569d0354f2506fb74">lbuf</a> ) &lt; <a class="code" href="olsrs3d_8h.html#e310f74f793edeb882f0c2d8d8b50bb8">MAXLINESIZE</a> ) {
+<a name="l00099"></a>00099 
+<a name="l00100"></a>00100                         <span class="keywordflow">if</span> ( <a class="code" href="main_8c.html#923774364cedbc16baa0bc05e9be136c">Debug</a> ) printf( <span class="stringliteral">"WARNING: lbuf almost filled without *any* carriage return within that data !\nAppending truncated buf to lbuf to prevent buffer overflow.\n"</span> );
+<a name="l00101"></a>00101                         strncat( <a class="code" href="olsrs3d_8h.html#00f1cd38b187535569d0354f2506fb74">lbuf</a>, <a class="code" href="net_8c.html#f39ed2161fb25f51aa61ffc038306f75">buf</a>, <a class="code" href="olsrs3d_8h.html#e310f74f793edeb882f0c2d8d8b50bb8">MAXLINESIZE</a> - strlen( <a class="code" href="olsrs3d_8h.html#00f1cd38b187535569d0354f2506fb74">lbuf</a> ) );
+<a name="l00102"></a>00102 
+<a name="l00103"></a>00103                 } <span class="keywordflow">else</span> {
+<a name="l00104"></a>00104 
+<a name="l00105"></a>00105                         <span class="keywordflow">if</span> ( Debug ) printf( <span class="stringliteral">"ERROR: lbuf filled without *any* carriage return within that data !\nClearing lbuf to prevent buffer overflow.\n"</span> );
+<a name="l00106"></a>00106                         strncpy( <a class="code" href="olsrs3d_8h.html#00f1cd38b187535569d0354f2506fb74">lbuf</a>, <a class="code" href="net_8c.html#f39ed2161fb25f51aa61ffc038306f75">buf</a>, <a class="code" href="olsrs3d_8h.html#e310f74f793edeb882f0c2d8d8b50bb8">MAXLINESIZE</a> );
+<a name="l00107"></a>00107 
+<a name="l00108"></a>00108                 }
+<a name="l00109"></a>00109 
+<a name="l00110"></a>00110         }
+<a name="l00111"></a>00111 
+<a name="l00112"></a>00112         <a class="code" href="olsrs3d_8h.html#6b4e9b6718b671f6330c2e501c60d3c1">process_main</a>();
+<a name="l00113"></a>00113 
+<a name="l00114"></a>00114         <span class="keywordflow">if</span> ( ++<a class="code" href="main_8c.html#5bcc20f84efa7bd4aafc56a629f2eff3">Net_read_count</a> &gt; 5 ) {
+<a name="l00115"></a>00115                 <span class="keywordflow">return</span>(0);   <span class="comment">/* continue mainloop */</span>
+<a name="l00116"></a>00116         } <span class="keywordflow">else</span> {
+<a name="l00117"></a>00117                 <span class="keywordflow">return</span>(1);   <span class="comment">/* continue reading data from socket */</span>
+<a name="l00118"></a>00118         }
+<a name="l00119"></a>00119 
+<a name="l00120"></a>00120 }
+</pre></div>
+<p>
+    </td>
+  </tr>
+</table>
+<a class="anchor" name="98aebc7a8515c76551eb15ecd465b923"></a><!-- doxytag: member="olsrs3d.h::net_quit" ref="98aebc7a8515c76551eb15ecd465b923" args="()" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">int net_quit           </td>
+          <td class="md" valign="top">(&nbsp;</td>
+          <td class="mdname1" valign="top" nowrap>          </td>
+          <td class="md" valign="top">&nbsp;)&nbsp;</td>
+          <td class="md" nowrap></td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="net_8c-source.html#l00122">122</a> of file <a class="el" href="net_8c-source.html">net.c</a>.
+<p>
+References <a class="el" href="net_8c-source.html#l00044">sockfd</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00804">main()</a>, and <a class="el" href="main_8c-source.html#l00675">stop()</a>.<div class="fragment"><pre class="fragment"><a name="l00123"></a>00123 {
+<a name="l00124"></a>00124     close(<a class="code" href="net_8c.html#d2c8fb3df3a737e0685e902870a611d2">sockfd</a>);
+<a name="l00125"></a>00125 
+<a name="l00126"></a>00126     <span class="keywordflow">return</span> 0;
+<a name="l00127"></a>00127 }
+</pre></div>
+<p>
+    </td>
+  </tr>
+</table>
+<a class="anchor" name="be0835e7acb76ea987ac80769302d90a"></a><!-- doxytag: member="olsrs3d.h::out_of_mem" ref="be0835e7acb76ea987ac80769302d90a" args="(void)" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">void out_of_mem           </td>
+          <td class="md" valign="top">(&nbsp;</td>
+          <td class="md" nowrap valign="top">void&nbsp;</td>
+          <td class="mdname1" valign="top" nowrap>          </td>
+          <td class="md" valign="top">&nbsp;)&nbsp;</td>
+          <td class="md" nowrap></td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00094">94</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+Referenced by <a class="el" href="process_8c-source.html#l00048">add_olsr_con()</a>, <a class="el" href="process_8c-source.html#l00155">get_olsr_node()</a>, <a class="el" href="process_8c-source.html#l00259">lst_add()</a>, and <a class="el" href="process_8c-source.html#l00239">lst_initialize()</a>.<div class="fragment"><pre class="fragment"><a name="l00094"></a>00094                         {
+<a name="l00095"></a>00095 
+<a name="l00096"></a>00096         printf( <span class="stringliteral">"Sorry - you ran out of memory !\n"</span> );
+<a name="l00097"></a>00097         exit(8);
+<a name="l00098"></a>00098 
+<a name="l00099"></a>00099 }
+</pre></div>
+<p>
+    </td>
+  </tr>
+</table>
+<a class="anchor" name="6b4e9b6718b671f6330c2e501c60d3c1"></a><!-- doxytag: member="olsrs3d.h::process_main" ref="6b4e9b6718b671f6330c2e501c60d3c1" args="()" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">int process_main           </td>
+          <td class="md" valign="top">(&nbsp;</td>
+          <td class="mdname1" valign="top" nowrap>          </td>
+          <td class="md" valign="top">&nbsp;)&nbsp;</td>
+          <td class="md" nowrap></td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="process_8c-source.html#l00368">368</a> of file <a class="el" href="process_8c-source.html">process.c</a>.
+<p>
+References <a class="el" href="process_8c-source.html#l00048">add_olsr_con()</a>, <a class="el" href="main_8c-source.html#l00041">Debug</a>, <a class="el" href="process_8c-source.html#l00155">get_olsr_node()</a>, <a class="el" href="olsrs3d_8h-source.html#l00064">olsr_node::ip</a>, <a class="el" href="process_8c-source.html#l00034">lbuf</a>, <a class="el" href="olsrs3d_8h-source.html#l00028">NAMEMAX</a>, <a class="el" href="olsrs3d_8h-source.html#l00065">olsr_node::node_type</a>, <a class="el" href="olsrs3d_8h-source.html#l00066">olsr_node::node_type_modified</a>, <a class="el" href="main_8c-source.html#l00046">Olsr_root</a>, and <a class="el" href="olsrs3d_8h-source.html#l00068">olsr_node::visible</a>.
+<p>
+Referenced by <a class="el" href="net_8c-source.html#l00074">net_main()</a>.<div class="fragment"><pre class="fragment"><a name="l00368"></a>00368                    {
+<a name="l00369"></a>00369 
+<a name="l00370"></a>00370         <span class="keywordtype">int</span> dn;
+<a name="l00371"></a>00371         <span class="keywordtype">float</span> f;
+<a name="l00372"></a>00372         <span class="keywordtype">char</span> *lbuf_ptr, *last_cr_ptr, *con_from, *con_from_end, *con_to, *con_to_end, *etx, *etx_end;
+<a name="l00373"></a>00373         <span class="keyword">struct </span><a class="code" href="structolsr__node.html">olsr_node</a> *olsr_node1;   <span class="comment">/* pointer to olsr nodes */</span>
+<a name="l00374"></a>00374         <span class="keyword">struct </span><a class="code" href="structolsr__node.html">olsr_node</a> *olsr_node2;
+<a name="l00375"></a>00375 
+<a name="l00376"></a>00376         lbuf_ptr = <a class="code" href="olsrs3d_8h.html#00f1cd38b187535569d0354f2506fb74">lbuf</a>;
+<a name="l00377"></a>00377         last_cr_ptr = NULL;
+<a name="l00378"></a>00378 
+<a name="l00379"></a>00379         con_from = con_from_end = con_to = con_to_end = etx = etx_end = NULL;
+<a name="l00380"></a>00380         dn = 0;
+<a name="l00381"></a>00381 
+<a name="l00382"></a>00382         <span class="keywordflow">while</span> ( (*lbuf_ptr) != <span class="charliteral">'\0'</span> ) {
+<a name="l00383"></a>00383 
+<a name="l00384"></a>00384                 <span class="comment">/* printf( "%c",(*lbuf_ptr) ); */</span>
+<a name="l00385"></a>00385 
+<a name="l00386"></a>00386                 <span class="keywordflow">if</span> ( (*lbuf_ptr) == <span class="charliteral">'\n'</span> ) {
+<a name="l00387"></a>00387 
+<a name="l00388"></a>00388                         last_cr_ptr = lbuf_ptr;
+<a name="l00389"></a>00389                         con_from = con_from_end = con_to = con_to_end = etx = etx_end = NULL;
+<a name="l00390"></a>00390                         dn = 0;
+<a name="l00391"></a>00391 
+<a name="l00392"></a>00392                 }
+<a name="l00393"></a>00393 
+<a name="l00394"></a>00394                 <span class="keywordflow">if</span> ( (*lbuf_ptr) == <span class="charliteral">'"'</span> ) {
+<a name="l00395"></a>00395 
+<a name="l00396"></a>00396                         <span class="keywordflow">switch</span> ( dn ) {
+<a name="l00397"></a>00397 
+<a name="l00398"></a>00398                                 <span class="keywordflow">case</span> 0:
+<a name="l00399"></a>00399                                         con_from = lbuf_ptr + 1;
+<a name="l00400"></a>00400                                         <span class="keywordflow">break</span>;
+<a name="l00401"></a>00401                                 <span class="keywordflow">case</span> 1:
+<a name="l00402"></a>00402                                         con_from_end = lbuf_ptr;
+<a name="l00403"></a>00403                                         <span class="keywordflow">break</span>;
+<a name="l00404"></a>00404                                 <span class="keywordflow">case</span> 2:
+<a name="l00405"></a>00405                                         con_to = lbuf_ptr + 1;
+<a name="l00406"></a>00406                                         <span class="keywordflow">break</span>;
+<a name="l00407"></a>00407                                 <span class="keywordflow">case</span> 3:
+<a name="l00408"></a>00408                                         con_to_end = lbuf_ptr;
+<a name="l00409"></a>00409                                         <span class="keywordflow">break</span>;
+<a name="l00410"></a>00410                                 <span class="keywordflow">case</span> 4:
+<a name="l00411"></a>00411                                         etx = lbuf_ptr + 1;
+<a name="l00412"></a>00412                                         <span class="keywordflow">break</span>;
+<a name="l00413"></a>00413                                 <span class="keywordflow">case</span> 5:
+<a name="l00414"></a>00414                                         etx_end = lbuf_ptr;
+<a name="l00415"></a>00415                                         <span class="keywordflow">break</span>;
+<a name="l00416"></a>00416 
+<a name="l00417"></a>00417                         }
+<a name="l00418"></a>00418 
+<a name="l00419"></a>00419                         <span class="keywordflow">if</span> ( ++dn == 6 ) {
+<a name="l00420"></a>00420 
+<a name="l00421"></a>00421                                 <span class="comment">/* terminate strings - but not before 6 times '"' */</span>
+<a name="l00422"></a>00422                                 (*con_from_end) = (*con_to_end) = (*etx_end) = <span class="charliteral">'\0'</span>;
+<a name="l00423"></a>00423 
+<a name="l00424"></a>00424                                 <span class="comment">/* printf( "con_from: %s, con_to: %s, etx: %s\n", con_from, con_to, etx ); */</span>
+<a name="l00425"></a>00425 
+<a name="l00426"></a>00426                                 <span class="comment">/* announced network via HNA */</span>
+<a name="l00427"></a>00427                                 <span class="keywordflow">if</span> ( strncmp( etx, <span class="stringliteral">"HNA"</span>, <a class="code" href="olsrs3d_8h.html#f8c0c53607c56b59e883cb0894e5cde7">NAMEMAX</a> ) == 0 ) {
+<a name="l00428"></a>00428 
+<a name="l00429"></a>00429                                         <span class="comment">/* connection to internet */</span>
+<a name="l00430"></a>00430                                         <span class="keywordflow">if</span> ( strncmp( con_to, <span class="stringliteral">"0.0.0.0/0.0.0.0"</span>, <a class="code" href="olsrs3d_8h.html#f8c0c53607c56b59e883cb0894e5cde7">NAMEMAX</a> ) == 0 ) {
+<a name="l00431"></a>00431 
+<a name="l00432"></a>00432                                                 olsr_node1 = <a class="code" href="process_8c.html#7ba929b35f03f5921272b4e5e821ade2">get_olsr_node</a>( &amp;<a class="code" href="main_8c.html#c5c5c6846587092d0c23b58b558e680c">Olsr_root</a>, con_from );
+<a name="l00433"></a>00433 
+<a name="l00434"></a>00434                                                 <span class="keywordflow">if</span> ( olsr_node1-&gt;<a class="code" href="structolsr__node.html#c89186513811183436bcd79cdb6d7b4d">node_type</a> != 1 ) {
+<a name="l00435"></a>00435 
+<a name="l00436"></a>00436                                                         olsr_node1-&gt;<a class="code" href="structolsr__node.html#c89186513811183436bcd79cdb6d7b4d">node_type</a> = 1;
+<a name="l00437"></a>00437                                                         olsr_node1-&gt;<a class="code" href="structolsr__node.html#4517a87e4fdbdb58f678743b5684088b">node_type_modified</a> = 1;
+<a name="l00438"></a>00438                                                         <span class="keywordflow">if</span> ( <a class="code" href="main_8c.html#923774364cedbc16baa0bc05e9be136c">Debug</a> ) printf( <span class="stringliteral">"new internet: %s\n"</span>, olsr_node1-&gt;<a class="code" href="structolsr__node.html#59690d75faff5c149faecacb4f4d2a57">ip</a> );
+<a name="l00439"></a>00439 
+<a name="l00440"></a>00440                                                 }
+<a name="l00441"></a>00441 
+<a name="l00442"></a>00442                                         <span class="comment">/* normal HNA */</span>
+<a name="l00443"></a>00443                                         } <span class="keywordflow">else</span> {
+<a name="l00444"></a>00444 
+<a name="l00445"></a>00445                                                 olsr_node1 = <a class="code" href="process_8c.html#7ba929b35f03f5921272b4e5e821ade2">get_olsr_node</a>( &amp;<a class="code" href="main_8c.html#c5c5c6846587092d0c23b58b558e680c">Olsr_root</a>, con_from );
+<a name="l00446"></a>00446                                                 olsr_node2 = <a class="code" href="process_8c.html#7ba929b35f03f5921272b4e5e821ade2">get_olsr_node</a>( &amp;<a class="code" href="main_8c.html#c5c5c6846587092d0c23b58b558e680c">Olsr_root</a>, con_to );
+<a name="l00447"></a>00447 
+<a name="l00448"></a>00448                                                 <span class="keywordflow">if</span> ( olsr_node2-&gt;<a class="code" href="structolsr__node.html#c89186513811183436bcd79cdb6d7b4d">node_type</a> != 2 ) {
+<a name="l00449"></a>00449 
+<a name="l00450"></a>00450                                                         olsr_node2-&gt;<a class="code" href="structolsr__node.html#c89186513811183436bcd79cdb6d7b4d">node_type</a> = 2;
+<a name="l00451"></a>00451                                                         olsr_node2-&gt;<a class="code" href="structolsr__node.html#4517a87e4fdbdb58f678743b5684088b">node_type_modified</a> = 1;
+<a name="l00452"></a>00452                                                         <span class="keywordflow">if</span> ( <a class="code" href="main_8c.html#923774364cedbc16baa0bc05e9be136c">Debug</a> ) printf( <span class="stringliteral">"new hna network: %s\n"</span>, olsr_node2-&gt;<a class="code" href="structolsr__node.html#59690d75faff5c149faecacb4f4d2a57">ip</a> );
+<a name="l00453"></a>00453 
+<a name="l00454"></a>00454                                                 }
+<a name="l00455"></a>00455                                                 <span class="keywordflow">if</span> ( olsr_node1-&gt;<a class="code" href="structolsr__node.html#f19d37e4aa5263be9a1741de24686664">visible</a> &amp;&amp; olsr_node2-&gt;<a class="code" href="structolsr__node.html#f19d37e4aa5263be9a1741de24686664">visible</a> )
+<a name="l00456"></a>00456                                                         <a class="code" href="process_8c.html#4c780ee64b12fa5531a56edfb5ffcc00">add_olsr_con</a>( olsr_node1, olsr_node2, -1000.00 );
+<a name="l00457"></a>00457 
+<a name="l00458"></a>00458                                         }
+<a name="l00459"></a>00459 
+<a name="l00460"></a>00460                                 <span class="comment">/* normal node */</span>
+<a name="l00461"></a>00461                                 } <span class="keywordflow">else</span> {
+<a name="l00462"></a>00462 
+<a name="l00463"></a>00463                                         olsr_node1 = <a class="code" href="process_8c.html#7ba929b35f03f5921272b4e5e821ade2">get_olsr_node</a>( &amp;<a class="code" href="main_8c.html#c5c5c6846587092d0c23b58b558e680c">Olsr_root</a>, con_from );
+<a name="l00464"></a>00464                                         olsr_node2 = <a class="code" href="process_8c.html#7ba929b35f03f5921272b4e5e821ade2">get_olsr_node</a>( &amp;<a class="code" href="main_8c.html#c5c5c6846587092d0c23b58b558e680c">Olsr_root</a>, con_to );
+<a name="l00465"></a>00465                                         f = strtod(etx,NULL);
+<a name="l00466"></a>00466                                         <span class="keywordflow">if</span> ( f &lt; 1 )
+<a name="l00467"></a>00467                                                 f = 999;
+<a name="l00468"></a>00468                                         <a class="code" href="process_8c.html#4c780ee64b12fa5531a56edfb5ffcc00">add_olsr_con</a>( olsr_node1, olsr_node2, f );
+<a name="l00469"></a>00469                                 }
+<a name="l00470"></a>00470 
+<a name="l00471"></a>00471                                 con_from = con_from_end = con_to = con_to_end = etx = etx_end = NULL;
+<a name="l00472"></a>00472                                 dn = 0;
+<a name="l00473"></a>00473                                 last_cr_ptr = lbuf_ptr;
+<a name="l00474"></a>00474 
+<a name="l00475"></a>00475                         }
+<a name="l00476"></a>00476 
+<a name="l00477"></a>00477                 }
+<a name="l00478"></a>00478 
+<a name="l00479"></a>00479                 lbuf_ptr++;
+<a name="l00480"></a>00480 
+<a name="l00481"></a>00481         }
+<a name="l00482"></a>00482 
+<a name="l00483"></a>00483         <span class="keywordflow">if</span> ( last_cr_ptr != NULL ) memmove( <a class="code" href="olsrs3d_8h.html#00f1cd38b187535569d0354f2506fb74">lbuf</a>, last_cr_ptr + 1, strlen( last_cr_ptr ) );
+<a name="l00484"></a>00484 
+<a name="l00485"></a>00485         <span class="keywordflow">return</span>(0);
+<a name="l00486"></a>00486 
+<a name="l00487"></a>00487 }
+</pre></div>
+<p>
+    </td>
+  </tr>
+</table>
+<hr><h2>Variable Documentation</h2>
+<a class="anchor" name="f23a6ad2da4511ef430c4f522ae9f4cc"></a><!-- doxytag: member="olsrs3d.h::Bottom" ref="f23a6ad2da4511ef430c4f522ae9f4cc" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">float <a class="el" href="olsrs3d_8h.html#f23a6ad2da4511ef430c4f522ae9f4cc">Bottom</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00057">57</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00624">mainloop()</a>, <a class="el" href="main_8c-source.html#l00746">object_click()</a>, and <a class="el" href="main_8c-source.html#l00777">object_info()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="0643a36891539929d987e2ee83ff81d1"></a><!-- doxytag: member="olsrs3d.h::Con_begin" ref="0643a36891539929d987e2ee83ff81d1" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">struct <a class="el" href="structolsr__con.html">olsr_con</a>* <a class="el" href="olsrs3d_8h.html#0643a36891539929d987e2ee83ff81d1">Con_begin</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00045">45</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+Referenced by <a class="el" href="process_8c-source.html#l00048">add_olsr_con()</a>, <a class="el" href="main_8c-source.html#l00400">calc_olsr_node_mov()</a>, and <a class="el" href="main_8c-source.html#l00439">move_olsr_nodes()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="923774364cedbc16baa0bc05e9be136c"></a><!-- doxytag: member="olsrs3d.h::Debug" ref="923774364cedbc16baa0bc05e9be136c" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">int <a class="el" href="olsrs3d_8h.html#923774364cedbc16baa0bc05e9be136c">Debug</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00041">41</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+Referenced by <a class="el" href="process_8c-source.html#l00155">get_olsr_node()</a>, <a class="el" href="main_8c-source.html#l00186">handle_olsr_node()</a>, <a class="el" href="main_8c-source.html#l00804">main()</a>, <a class="el" href="net_8c-source.html#l00074">net_main()</a>, and <a class="el" href="process_8c-source.html#l00368">process_main()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="58acad60c78b63554c696703227d0b7b"></a><!-- doxytag: member="olsrs3d.h::Last_olsr_node_count" ref="58acad60c78b63554c696703227d0b7b" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">int <a class="el" href="olsrs3d_8h.html#58acad60c78b63554c696703227d0b7b">Last_olsr_node_count</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00049">49</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00624">mainloop()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="00f1cd38b187535569d0354f2506fb74"></a><!-- doxytag: member="olsrs3d.h::lbuf" ref="00f1cd38b187535569d0354f2506fb74" args="[MAXLINESIZE]" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">char <a class="el" href="process_8c.html#00f1cd38b187535569d0354f2506fb74">lbuf</a>[MAXLINESIZE]          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="process_8c-source.html#l00034">34</a> of file <a class="el" href="process_8c-source.html">process.c</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00804">main()</a>, <a class="el" href="net_8c-source.html#l00074">net_main()</a>, and <a class="el" href="process_8c-source.html#l00368">process_main()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="6f68bad9075598ca8ede1827c6832376"></a><!-- doxytag: member="olsrs3d.h::Left" ref="6f68bad9075598ca8ede1827c6832376" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">float <a class="el" href="olsrs3d_8h.html#6f68bad9075598ca8ede1827c6832376">Left</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00058">58</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00624">mainloop()</a>, <a class="el" href="main_8c-source.html#l00746">object_click()</a>, and <a class="el" href="main_8c-source.html#l00777">object_info()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="6a8ff2c3957f5f0ab7dcafcd72b8bd57"></a><!-- doxytag: member="olsrs3d.h::List_ptr" ref="6a8ff2c3957f5f0ab7dcafcd72b8bd57" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">struct <a class="el" href="structObj__to__ip.html">Obj_to_ip</a> * <a class="el" href="olsrs3d_8h.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00047">47</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+Referenced by <a class="el" href="process_8c-source.html#l00259">lst_add()</a>, <a class="el" href="process_8c-source.html#l00281">lst_del()</a>, <a class="el" href="process_8c-source.html#l00239">lst_initialize()</a>, <a class="el" href="process_8c-source.html#l00349">lst_search()</a>, and <a class="el" href="process_8c-source.html#l00303">move_lst_ptr()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="5bcc20f84efa7bd4aafc56a629f2eff3"></a><!-- doxytag: member="olsrs3d.h::Net_read_count" ref="5bcc20f84efa7bd4aafc56a629f2eff3" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">int <a class="el" href="olsrs3d_8h.html#5bcc20f84efa7bd4aafc56a629f2eff3">Net_read_count</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00052">52</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00624">mainloop()</a>, and <a class="el" href="net_8c-source.html#l00074">net_main()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="236217b97f5fe65457d8b22c73c5073d"></a><!-- doxytag: member="olsrs3d.h::Obj_to_ip_end" ref="236217b97f5fe65457d8b22c73c5073d" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">struct <a class="el" href="structObj__to__ip.html">Obj_to_ip</a> * <a class="el" href="olsrs3d_8h.html#236217b97f5fe65457d8b22c73c5073d">Obj_to_ip_end</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00047">47</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00186">handle_olsr_node()</a>, <a class="el" href="process_8c-source.html#l00239">lst_initialize()</a>, and <a class="el" href="process_8c-source.html#l00303">move_lst_ptr()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="9494e9e8cbdc4eceb86cb33ff0006785"></a><!-- doxytag: member="olsrs3d.h::Obj_to_ip_head" ref="9494e9e8cbdc4eceb86cb33ff0006785" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">struct <a class="el" href="structObj__to__ip.html">Obj_to_ip</a>* <a class="el" href="olsrs3d_8h.html#9494e9e8cbdc4eceb86cb33ff0006785">Obj_to_ip_head</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00047">47</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00186">handle_olsr_node()</a>, <a class="el" href="process_8c-source.html#l00239">lst_initialize()</a>, <a class="el" href="process_8c-source.html#l00359">lst_out()</a>, and <a class="el" href="process_8c-source.html#l00303">move_lst_ptr()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="86c048bc4aaab319f4d61f7c0e1f056f"></a><!-- doxytag: member="olsrs3d.h::Olsr_node_count" ref="86c048bc4aaab319f4d61f7c0e1f056f" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">int <a class="el" href="olsrs3d_8h.html#86c048bc4aaab319f4d61f7c0e1f056f">Olsr_node_count</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00049">49</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+Referenced by <a class="el" href="process_8c-source.html#l00155">get_olsr_node()</a>, <a class="el" href="main_8c-source.html#l00186">handle_olsr_node()</a>, and <a class="el" href="main_8c-source.html#l00624">mainloop()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="4dfd0657ff868fa02113bcd3335acff1"></a><!-- doxytag: member="olsrs3d.h::Olsr_node_count_obj" ref="4dfd0657ff868fa02113bcd3335acff1" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">int <a class="el" href="olsrs3d_8h.html#4dfd0657ff868fa02113bcd3335acff1">Olsr_node_count_obj</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00050">50</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00624">mainloop()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="c03c9b38147e4231238c44f4b5fbdff7"></a><!-- doxytag: member="olsrs3d.h::Olsr_node_hna_net" ref="c03c9b38147e4231238c44f4b5fbdff7" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">int <a class="el" href="olsrs3d_8h.html#c03c9b38147e4231238c44f4b5fbdff7">Olsr_node_hna_net</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00054">54</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00186">handle_olsr_node()</a>, and <a class="el" href="main_8c-source.html#l00804">main()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="b02228665cef19331d409b0d8a831531"></a><!-- doxytag: member="olsrs3d.h::Olsr_node_inet_obj" ref="b02228665cef19331d409b0d8a831531" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">int <a class="el" href="olsrs3d_8h.html#b02228665cef19331d409b0d8a831531">Olsr_node_inet_obj</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00054">54</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00186">handle_olsr_node()</a>, and <a class="el" href="main_8c-source.html#l00804">main()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="5eba8148fe9257c34665ed364b595fdb"></a><!-- doxytag: member="olsrs3d.h::Olsr_node_obj" ref="5eba8148fe9257c34665ed364b595fdb" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">int <a class="el" href="olsrs3d_8h.html#5eba8148fe9257c34665ed364b595fdb">Olsr_node_obj</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00054">54</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00186">handle_olsr_node()</a>, and <a class="el" href="main_8c-source.html#l00804">main()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="c5c5c6846587092d0c23b58b558e680c"></a><!-- doxytag: member="olsrs3d.h::Olsr_root" ref="c5c5c6846587092d0c23b58b558e680c" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">struct <a class="el" href="structolsr__node.html">olsr_node</a>* <a class="el" href="olsrs3d_8h.html#c5c5c6846587092d0c23b58b558e680c">Olsr_root</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00046">46</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00624">mainloop()</a>, and <a class="el" href="process_8c-source.html#l00368">process_main()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="e113d40abb6f4dd73e4b1253917a1942"></a><!-- doxytag: member="olsrs3d.h::ZeroPoint" ref="e113d40abb6f4dd73e4b1253917a1942" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">int <a class="el" href="olsrs3d_8h.html#e113d40abb6f4dd73e4b1253917a1942">ZeroPoint</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="main_8c-source.html#l00062">62</a> of file <a class="el" href="main_8c-source.html">main.c</a>.
+<p>
+Referenced by <a class="el" href="process_8c-source.html#l00048">add_olsr_con()</a>, <a class="el" href="main_8c-source.html#l00186">handle_olsr_node()</a>, <a class="el" href="main_8c-source.html#l00690">keypress()</a>, <a class="el" href="main_8c-source.html#l00804">main()</a>, and <a class="el" href="main_8c-source.html#l00624">mainloop()</a>.    </td>
+  </tr>
+</table>
+<hr size="1"><address style="align: right;"><small>Generated on Sun Mar 19 13:28:20 2006 for olsrs3d by&nbsp;
+<a href="http://www.doxygen.org/index.html">
+<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6 </small></address>
+</body>
+</html>

Added: trunk/apps/olsrs3d/doxygen/html/process_8c-source.html
===================================================================
--- trunk/apps/olsrs3d/doxygen/html/process_8c-source.html	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/html/process_8c-source.html	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,513 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
+<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
+<title>olsrs3d: s3d/apps/olsrs3d/process.c Source File</title>
+<link href="doxygen.css" rel="stylesheet" type="text/css">
+<link href="tabs.css" rel="stylesheet" type="text/css">
+</head><body>
+<!-- Generated by Doxygen 1.4.6 -->
+<div class="tabs">
+  <ul>
+    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
+    <li><a href="classes.html"><span>Classes</span></a></li>
+    <li id="current"><a href="files.html"><span>Files</span></a></li>
+    <li><a href="dirs.html"><span>Directories</span></a></li>
+  </ul></div>
+<div class="tabs">
+  <ul>
+    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
+    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
+  </ul></div>
+<div class="nav">
+<a class="el" href="dir_9d2efe7c7f87ee6309da929964f0685b.html">s3d</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_5d167550802dbd943c0631943f884f5b.html">apps</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_bf110b9fd34b0903efb6170e1cee5506.html">olsrs3d</a></div>
+<h1>process.c</h1><a href="process_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
+<a name="l00002"></a>00002 <span class="comment"> * process.c</span>
+<a name="l00003"></a>00003 <span class="comment"> *</span>
+<a name="l00004"></a>00004 <span class="comment"> * Copyright (C) 2004-2006 Simon Wunderlich &lt;dotslash at packetmixer.de&gt;</span>
+<a name="l00005"></a>00005 <span class="comment"> *                         Marek Lindner &lt;lindner_marek at yahoo.de&gt;</span>
+<a name="l00006"></a>00006 <span class="comment"> *                         Andreas Langer &lt;andreas_lbg at gmx.de&gt;</span>
+<a name="l00007"></a>00007 <span class="comment"> *</span>
+<a name="l00008"></a>00008 <span class="comment"> * This file is part of olsrs3d, an olsr topology visualizer for s3d.</span>
+<a name="l00009"></a>00009 <span class="comment"> * See http://s3d.berlios.de/ for more updates.</span>
+<a name="l00010"></a>00010 <span class="comment"> *</span>
+<a name="l00011"></a>00011 <span class="comment"> * olsrs3d is free software; you can redistribute it and/or modify</span>
+<a name="l00012"></a>00012 <span class="comment"> * it under the terms of the GNU General Public License as published by</span>
+<a name="l00013"></a>00013 <span class="comment"> * the Free Software Foundation; either version 2 of the License, or</span>
+<a name="l00014"></a>00014 <span class="comment"> * (at your option) any later version.</span>
+<a name="l00015"></a>00015 <span class="comment"> *</span>
+<a name="l00016"></a>00016 <span class="comment"> * olsrs3d is distributed in the hope that it will be useful,</span>
+<a name="l00017"></a>00017 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
+<a name="l00018"></a>00018 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
+<a name="l00019"></a>00019 <span class="comment"> * GNU General Public License for more details.</span>
+<a name="l00020"></a>00020 <span class="comment"> *</span>
+<a name="l00021"></a>00021 <span class="comment"> * You should have received a copy of the GNU General Public License</span>
+<a name="l00022"></a>00022 <span class="comment"> * along with s3d; if not, write to the Free Software</span>
+<a name="l00023"></a>00023 <span class="comment"> * Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA</span>
+<a name="l00024"></a>00024 <span class="comment"> */</span>
+<a name="l00025"></a>00025 
+<a name="l00026"></a>00026 
+<a name="l00027"></a>00027 
+<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;stdio.h&gt;</span>      <span class="comment">/* NULL */</span>
+<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;string.h&gt;</span>     <span class="comment">/* strlen(), memmove() */</span>
+<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>     <span class="comment">/* rand(), malloc(), realloc(), free() */</span>
+<a name="l00031"></a>00031 <span class="preprocessor">#include &lt;s3d.h&gt;</span>
+<a name="l00032"></a>00032 <span class="preprocessor">#include "<a class="code" href="olsrs3d_8h.html">olsrs3d.h</a>"</span>
+<a name="l00033"></a>00033 
+<a name="l00034"></a><a class="code" href="process_8c.html#00f1cd38b187535569d0354f2506fb74">00034</a> <span class="keywordtype">char</span> <a class="code" href="olsrs3d_8h.html#00f1cd38b187535569d0354f2506fb74">lbuf</a>[<a class="code" href="olsrs3d_8h.html#e310f74f793edeb882f0c2d8d8b50bb8">MAXLINESIZE</a>];
+<a name="l00035"></a>00035 
+<a name="l00036"></a>00036 
+<a name="l00037"></a>00037 
+<a name="l00038"></a>00038 <span class="comment">/***</span>
+<a name="l00039"></a>00039 <span class="comment"> *</span>
+<a name="l00040"></a>00040 <span class="comment"> * create new or alter connection between 2 nodes</span>
+<a name="l00041"></a>00041 <span class="comment"> *</span>
+<a name="l00042"></a>00042 <span class="comment"> *   con_from =&gt;   current node</span>
+<a name="l00043"></a>00043 <span class="comment"> *   con_to   =&gt;   node to connect to</span>
+<a name="l00044"></a>00044 <span class="comment"> *   etx      =&gt;   ETX</span>
+<a name="l00045"></a>00045 <span class="comment"> *</span>
+<a name="l00046"></a>00046 <span class="comment"> ***/</span>
+<a name="l00047"></a>00047 
+<a name="l00048"></a><a class="code" href="process_8c.html#4c780ee64b12fa5531a56edfb5ffcc00">00048</a> <span class="keywordtype">int</span> <a class="code" href="process_8c.html#4c780ee64b12fa5531a56edfb5ffcc00">add_olsr_con</a>( <span class="keyword">struct</span> <a class="code" href="structolsr__node.html">olsr_node</a> *con_from, <span class="keyword">struct</span> <a class="code" href="structolsr__node.html">olsr_node</a> *con_to, <span class="keywordtype">float</span> etx ) {
+<a name="l00049"></a>00049 
+<a name="l00050"></a>00050         <span class="keyword">struct </span><a class="code" href="structolsr__con.html">olsr_con</a> **<a class="code" href="structolsr__con.html">olsr_con</a> = &amp;<a class="code" href="main_8c.html#0643a36891539929d987e2ee83ff81d1">Con_begin</a>;
+<a name="l00051"></a>00051         <span class="keyword">struct </span>olsr_con *<a class="code" href="structolsr__con.html#0382eebfbf31d5f217572d4907c503cb">prev_olsr_con</a> = NULL;   <span class="comment">/* previous olsr connection */</span>
+<a name="l00052"></a>00052         <span class="keyword">struct </span><a class="code" href="structolsr__neigh__list.html">olsr_neigh_list</a> **<a class="code" href="structolsr__neigh__list.html">olsr_neigh_list</a>;
+<a name="l00053"></a>00053 
+<a name="l00054"></a>00054         <span class="keywordflow">while</span> ( (*<a class="code" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">olsr_con</a>) != NULL ) {
+<a name="l00055"></a>00055 
+<a name="l00056"></a>00056                 <span class="comment">/* connection already exists */</span>
+<a name="l00057"></a>00057                 <span class="keywordflow">if</span> ( ( strncmp( (*olsr_con)-&gt;left_olsr_node-&gt;ip, con_from-&gt;<a class="code" href="structolsr__node.html#59690d75faff5c149faecacb4f4d2a57">ip</a>, <a class="code" href="olsrs3d_8h.html#f8c0c53607c56b59e883cb0894e5cde7">NAMEMAX</a> ) == 0 ) &amp;&amp; ( strncmp( (*olsr_con)-&gt;right_olsr_node-&gt;ip, con_to-&gt;<a class="code" href="structolsr__node.html#59690d75faff5c149faecacb4f4d2a57">ip</a>, <a class="code" href="olsrs3d_8h.html#f8c0c53607c56b59e883cb0894e5cde7">NAMEMAX</a> ) == 0 ) ) {
+<a name="l00058"></a>00058                         (*olsr_con)-&gt;<a class="code" href="structolsr__con.html#d93efab11883355b45a0460456991362">left_etx</a> = etx;
+<a name="l00059"></a>00059                         <span class="keywordflow">break</span>;
+<a name="l00060"></a>00060 
+<a name="l00061"></a>00061                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( ( strncmp( (*olsr_con)-&gt;right_olsr_node-&gt;ip, con_from-&gt;<a class="code" href="structolsr__node.html#59690d75faff5c149faecacb4f4d2a57">ip</a>, <a class="code" href="olsrs3d_8h.html#f8c0c53607c56b59e883cb0894e5cde7">NAMEMAX</a> ) == 0 ) &amp;&amp; ( strncmp( (*olsr_con)-&gt;left_olsr_node-&gt;ip, con_to-&gt;<a class="code" href="structolsr__node.html#59690d75faff5c149faecacb4f4d2a57">ip</a>, <a class="code" href="olsrs3d_8h.html#f8c0c53607c56b59e883cb0894e5cde7">NAMEMAX</a> ) == 0 ) ) {
+<a name="l00062"></a>00062 
+<a name="l00063"></a>00063                         (*olsr_con)-&gt;right_etx = etx;
+<a name="l00064"></a>00064                         <span class="keywordflow">break</span>;
+<a name="l00065"></a>00065 
+<a name="l00066"></a>00066                 }
+<a name="l00067"></a>00067 
+<a name="l00068"></a>00068                 <span class="comment">/* save previous olsr connection for later use */</span>
+<a name="l00069"></a>00069                 prev_olsr_con = (*olsr_con);
+<a name="l00070"></a>00070 
+<a name="l00071"></a>00071                 <a class="code" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">olsr_con</a> = &amp;(*olsr_con)-&gt;<a class="code" href="structolsr__con.html#369dfd6eec077d0a6228cd1387135e6e">next_olsr_con</a>;
+<a name="l00072"></a>00072 
+<a name="l00073"></a>00073         }
+<a name="l00074"></a>00074 
+<a name="l00075"></a>00075         <span class="comment">/* new connection */</span>
+<a name="l00076"></a>00076         <span class="keywordflow">if</span> ( (*<a class="code" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">olsr_con</a>) == NULL ) {
+<a name="l00077"></a>00077 
+<a name="l00078"></a>00078                 (*olsr_con) = malloc( <span class="keyword">sizeof</span>( <span class="keyword">struct</span> <a class="code" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">olsr_con</a> ) );
+<a name="l00079"></a>00079                 <span class="keywordflow">if</span> ( (*olsr_con) == NULL ) <a class="code" href="main_8c.html#be0835e7acb76ea987ac80769302d90a">out_of_mem</a>();
+<a name="l00080"></a>00080 
+<a name="l00081"></a>00081                 <span class="comment">/* create connection object */</span>
+<a name="l00082"></a>00082                 (*olsr_con)-&gt;obj_id = s3d_new_object();
+<a name="l00083"></a>00083 
+<a name="l00084"></a>00084                 <span class="comment">/* add olsr node to new olsr connection in order to access the nodes from the connection list */</span>
+<a name="l00085"></a>00085                 (*olsr_con)-&gt;left_olsr_node = con_from;
+<a name="l00086"></a>00086                 (*olsr_con)-&gt;right_olsr_node = con_to;
+<a name="l00087"></a>00087 
+<a name="l00088"></a>00088                 <span class="comment">/* add connection color */</span>
+<a name="l00089"></a>00089                 (*olsr_con)-&gt;color = 0;
+<a name="l00090"></a>00090                 s3d_push_material( (*olsr_con)-&gt;obj_id,
+<a name="l00091"></a>00091                                   1.0,1.0,1.0,
+<a name="l00092"></a>00092                                   1.0,1.0,1.0,
+<a name="l00093"></a>00093                                   1.0,1.0,1.0);
+<a name="l00094"></a>00094 
+<a name="l00095"></a>00095                 <span class="comment">/* add connection endpoints */</span>
+<a name="l00096"></a>00096                 s3d_push_vertex( (*olsr_con)-&gt;obj_id, (*olsr_con)-&gt;left_olsr_node-&gt;pos_vec[0], (*olsr_con)-&gt;left_olsr_node-&gt;pos_vec[1], (*olsr_con)-&gt;left_olsr_node-&gt;pos_vec[2] );
+<a name="l00097"></a>00097                 s3d_push_vertex( (*olsr_con)-&gt;obj_id, (*olsr_con)-&gt;right_olsr_node-&gt;pos_vec[0], (*olsr_con)-&gt;right_olsr_node-&gt;pos_vec[1], (*olsr_con)-&gt;right_olsr_node-&gt;pos_vec[2] );
+<a name="l00098"></a>00098 
+<a name="l00099"></a>00099                 s3d_push_line( (*olsr_con)-&gt;obj_id, 0,1,0 );
+<a name="l00100"></a>00100 
+<a name="l00101"></a>00101                 s3d_flags_on( (*olsr_con)-&gt;obj_id, S3D_OF_VISIBLE );
+<a name="l00102"></a>00102 
+<a name="l00103"></a>00103                 s3d_link( (*olsr_con)-&gt;obj_id,  <a class="code" href="main_8c.html#e113d40abb6f4dd73e4b1253917a1942">ZeroPoint</a> );
+<a name="l00104"></a>00104 
+<a name="l00105"></a>00105                 <span class="comment">/* HNA */</span>
+<a name="l00106"></a>00106                 <span class="keywordflow">if</span> ( etx == -1000.00 ) {
+<a name="l00107"></a>00107 
+<a name="l00108"></a>00108                         (*olsr_con)-&gt;left_etx = etx;
+<a name="l00109"></a>00109                         (*olsr_con)-&gt;right_etx = etx;
+<a name="l00110"></a>00110 
+<a name="l00111"></a>00111                 } <span class="keywordflow">else</span> {
+<a name="l00112"></a>00112 
+<a name="l00113"></a>00113                         (*olsr_con)-&gt;left_etx = etx;
+<a name="l00114"></a>00114                         (*olsr_con)-&gt;right_etx = 0.0;
+<a name="l00115"></a>00115 
+<a name="l00116"></a>00116                 }
+<a name="l00117"></a>00117 
+<a name="l00118"></a>00118                 (*olsr_con)-&gt;next_olsr_con = NULL;
+<a name="l00119"></a>00119                 (*olsr_con)-&gt;prev_olsr_con = prev_olsr_con;
+<a name="l00120"></a>00120 
+<a name="l00121"></a>00121                 <span class="comment">/* add new olsr connection to olsr nodes in order to access the connection from the olsr node */</span>
+<a name="l00122"></a>00122                 olsr_neigh_list = &amp;(*olsr_con)-&gt;left_olsr_node-&gt;olsr_neigh_list;
+<a name="l00123"></a>00123                 <span class="keywordflow">while</span> ( (*olsr_neigh_list) != NULL ) olsr_neigh_list = &amp;(*olsr_neigh_list)-&gt;<a class="code" href="structolsr__neigh__list.html#f1d533fde49e1ed2ea5299661f5c10c6">next_olsr_neigh_list</a>;
+<a name="l00124"></a>00124                 (*olsr_neigh_list) = malloc( <span class="keyword">sizeof</span>( <span class="keyword">struct</span> olsr_neigh_list ) );
+<a name="l00125"></a>00125                 <span class="keywordflow">if</span> ( (*olsr_neigh_list) == NULL ) <a class="code" href="main_8c.html#be0835e7acb76ea987ac80769302d90a">out_of_mem</a>();
+<a name="l00126"></a>00126                 (*olsr_neigh_list)-&gt;olsr_con = (*olsr_con);
+<a name="l00127"></a>00127                 (*olsr_neigh_list)-&gt;next_olsr_neigh_list = NULL;
+<a name="l00128"></a>00128 
+<a name="l00129"></a>00129                 olsr_neigh_list = &amp;(*olsr_con)-&gt;right_olsr_node-&gt;olsr_neigh_list;
+<a name="l00130"></a>00130                 <span class="keywordflow">while</span> ( (*olsr_neigh_list) != NULL ) olsr_neigh_list = &amp;(*olsr_neigh_list)-&gt;next_olsr_neigh_list;
+<a name="l00131"></a>00131                 (*olsr_neigh_list) = malloc( <span class="keyword">sizeof</span>( <span class="keyword">struct</span> olsr_neigh_list ) );
+<a name="l00132"></a>00132                 <span class="keywordflow">if</span> ( (*olsr_neigh_list) == NULL ) <a class="code" href="main_8c.html#be0835e7acb76ea987ac80769302d90a">out_of_mem</a>();
+<a name="l00133"></a>00133                 (*olsr_neigh_list)-&gt;olsr_con = (*olsr_con);
+<a name="l00134"></a>00134                 (*olsr_neigh_list)-&gt;next_olsr_neigh_list = NULL;
+<a name="l00135"></a>00135 
+<a name="l00136"></a>00136         }
+<a name="l00137"></a>00137 
+<a name="l00138"></a>00138         <span class="keywordflow">return</span>(0);
+<a name="l00139"></a>00139 
+<a name="l00140"></a>00140 }
+<a name="l00141"></a>00141 
+<a name="l00142"></a>00142 
+<a name="l00143"></a>00143 
+<a name="l00144"></a>00144 <span class="comment">/***</span>
+<a name="l00145"></a>00145 <span class="comment"> *</span>
+<a name="l00146"></a>00146 <span class="comment"> * get pointer to olsr node or create new node if node string could not be found</span>
+<a name="l00147"></a>00147 <span class="comment"> *</span>
+<a name="l00148"></a>00148 <span class="comment"> *   **node =&gt;   pointer to current olsr_node</span>
+<a name="l00149"></a>00149 <span class="comment"> *   *ip    =&gt;   node ip</span>
+<a name="l00150"></a>00150 <span class="comment"> *</span>
+<a name="l00151"></a>00151 <span class="comment"> *   return olsr node pointer</span>
+<a name="l00152"></a>00152 <span class="comment"> *</span>
+<a name="l00153"></a>00153 <span class="comment"> ***/</span>
+<a name="l00154"></a>00154 
+<a name="l00155"></a><a class="code" href="process_8c.html#7ba929b35f03f5921272b4e5e821ade2">00155</a> <span class="keywordtype">void</span> *<a class="code" href="process_8c.html#7ba929b35f03f5921272b4e5e821ade2">get_olsr_node</a>( <span class="keyword">struct</span> <a class="code" href="structolsr__node.html">olsr_node</a> **<a class="code" href="structolsr__node.html">olsr_node</a>, <span class="keywordtype">char</span> *ip ) {
+<a name="l00156"></a>00156 
+<a name="l00157"></a>00157         <span class="keywordtype">int</span> result;   <span class="comment">/* result of strcmp */</span>
+<a name="l00158"></a>00158 
+<a name="l00159"></a>00159         <span class="keywordflow">while</span> ( (*olsr_node) != NULL ) {
+<a name="l00160"></a>00160 
+<a name="l00161"></a>00161                 result = strncmp( (*olsr_node)-&gt;ip, ip, <a class="code" href="olsrs3d_8h.html#f8c0c53607c56b59e883cb0894e5cde7">NAMEMAX</a> );
+<a name="l00162"></a>00162 
+<a name="l00163"></a>00163                 <span class="comment">/* we found the node */</span>
+<a name="l00164"></a>00164                 <span class="keywordflow">if</span> ( result == 0 ) {
+<a name="l00165"></a>00165 
+<a name="l00166"></a>00166                         (*olsr_node)-&gt;last_seen = 100;
+<a name="l00167"></a>00167 
+<a name="l00168"></a>00168                         <span class="comment">/* former invisble (deleted) node */</span>
+<a name="l00169"></a>00169                         <span class="keywordflow">if</span> ( (*olsr_node)-&gt;visible == 0 ) {
+<a name="l00170"></a>00170 
+<a name="l00171"></a>00171                                 (*olsr_node)-&gt;node_type = 0;
+<a name="l00172"></a>00172                                 (*olsr_node)-&gt;node_type_modified = 1;
+<a name="l00173"></a>00173 
+<a name="l00174"></a>00174                                 (*olsr_node)-&gt;visible = 1;
+<a name="l00175"></a>00175 
+<a name="l00176"></a>00176                                 (*olsr_node)-&gt;mov_vec[0] = (*olsr_node)-&gt;mov_vec[1] = (*olsr_node)-&gt;mov_vec[2] = 0.0;
+<a name="l00177"></a>00177 
+<a name="l00178"></a>00178                                 <span class="keywordflow">if</span> ( <a class="code" href="main_8c.html#923774364cedbc16baa0bc05e9be136c">Debug</a> ) printf( <span class="stringliteral">"new olsr node: %s\n"</span>, (*olsr_node)-&gt;ip );
+<a name="l00179"></a>00179 
+<a name="l00180"></a>00180                                 <a class="code" href="main_8c.html#86c048bc4aaab319f4d61f7c0e1f056f">Olsr_node_count</a>++;
+<a name="l00181"></a>00181 
+<a name="l00182"></a>00182                         }
+<a name="l00183"></a>00183 
+<a name="l00184"></a>00184                         <span class="keywordflow">return</span> (*olsr_node);
+<a name="l00185"></a>00185 
+<a name="l00186"></a>00186                 }
+<a name="l00187"></a>00187 
+<a name="l00188"></a>00188                 <span class="comment">/* the searched node must be in the subtree */</span>
+<a name="l00189"></a>00189                 <span class="keywordflow">if</span> ( result &lt; 0 ) {
+<a name="l00190"></a>00190                         olsr_node = &amp;(*olsr_node)-&gt;<a class="code" href="structolsr__node.html#bc6cf143d12b1e5a204ae64d40c0eb05">right</a>;
+<a name="l00191"></a>00191                 } <span class="keywordflow">else</span> {
+<a name="l00192"></a>00192                         olsr_node = &amp;(*olsr_node)-&gt;<a class="code" href="structolsr__node.html#b64ee26ebfa4a3c2719de780b4cabada">left</a>;
+<a name="l00193"></a>00193                 }
+<a name="l00194"></a>00194 
+<a name="l00195"></a>00195         }
+<a name="l00196"></a>00196 
+<a name="l00197"></a>00197         <span class="comment">/* if node is NULL we reached the end of the tree and must create a new olsr_node */</span>
+<a name="l00198"></a>00198         <span class="keywordflow">if</span> ( (*olsr_node) == NULL ) {
+<a name="l00199"></a>00199 
+<a name="l00200"></a>00200                 (*olsr_node) = malloc( <span class="keyword">sizeof</span>( <span class="keyword">struct</span> olsr_node ) );
+<a name="l00201"></a>00201                 <span class="keywordflow">if</span> ( (*olsr_node) == NULL ) <a class="code" href="main_8c.html#be0835e7acb76ea987ac80769302d90a">out_of_mem</a>();
+<a name="l00202"></a>00202 
+<a name="l00203"></a>00203                 (*olsr_node)-&gt;left = NULL;
+<a name="l00204"></a>00204                 (*olsr_node)-&gt;right = NULL;
+<a name="l00205"></a>00205 
+<a name="l00206"></a>00206                 strncpy( (*olsr_node)-&gt;ip, ip, <a class="code" href="olsrs3d_8h.html#f8c0c53607c56b59e883cb0894e5cde7">NAMEMAX</a> );
+<a name="l00207"></a>00207 
+<a name="l00208"></a>00208                 (*olsr_node)-&gt;node_type = 0;
+<a name="l00209"></a>00209                 (*olsr_node)-&gt;node_type_modified = 1;
+<a name="l00210"></a>00210 
+<a name="l00211"></a>00211                 (*olsr_node)-&gt;last_seen = 100;
+<a name="l00212"></a>00212                 (*olsr_node)-&gt;visible = 1;
+<a name="l00213"></a>00213 
+<a name="l00214"></a>00214                 <span class="keywordflow">if</span> ( <a class="code" href="main_8c.html#923774364cedbc16baa0bc05e9be136c">Debug</a> ) printf( <span class="stringliteral">"new olsr node: %s\n"</span>, (*olsr_node)-&gt;ip );
+<a name="l00215"></a>00215 
+<a name="l00216"></a>00216                 <a class="code" href="main_8c.html#86c048bc4aaab319f4d61f7c0e1f056f">Olsr_node_count</a>++;
+<a name="l00217"></a>00217 
+<a name="l00218"></a>00218                 (*olsr_node)-&gt;pos_vec[0] = ( ( float ) 2.0 * rand() ) / RAND_MAX - 1.0;
+<a name="l00219"></a>00219                 (*olsr_node)-&gt;pos_vec[1] = ( ( float ) 2.0 * rand() ) / RAND_MAX - 1.0;
+<a name="l00220"></a>00220                 (*olsr_node)-&gt;pos_vec[2] = ( ( float ) 2.0 * rand() ) / RAND_MAX - 1.0;
+<a name="l00221"></a>00221                 (*olsr_node)-&gt;mov_vec[0] = (*olsr_node)-&gt;mov_vec[1] = (*olsr_node)-&gt;mov_vec[2] = 0.0;
+<a name="l00222"></a>00222 
+<a name="l00223"></a>00223                 (*olsr_node)-&gt;obj_id = -1;
+<a name="l00224"></a>00224                 (*olsr_node)-&gt;desc_id = -1;
+<a name="l00225"></a>00225                 (*olsr_node)-&gt;olsr_neigh_list = NULL;
+<a name="l00226"></a>00226 
+<a name="l00227"></a>00227                 <span class="keywordflow">return</span> (*olsr_node);
+<a name="l00228"></a>00228 
+<a name="l00229"></a>00229         }
+<a name="l00230"></a>00230         <span class="keywordflow">return</span>(0);
+<a name="l00231"></a>00231 }
+<a name="l00232"></a>00232 
+<a name="l00233"></a>00233 <span class="comment">/*</span>
+<a name="l00234"></a>00234 <span class="comment"> *</span>
+<a name="l00235"></a>00235 <span class="comment"> * initialize the struct for a linked list obj2ip</span>
+<a name="l00236"></a>00236 <span class="comment"> *</span>
+<a name="l00237"></a>00237 <span class="comment"> */</span>
+<a name="l00238"></a>00238 
+<a name="l00239"></a><a class="code" href="process_8c.html#edfb2ae44af543946842187ced1cd47e">00239</a> <span class="keywordtype">void</span> <a class="code" href="olsrs3d_8h.html#edfb2ae44af543946842187ced1cd47e">lst_initialize</a>() {
+<a name="l00240"></a>00240         <a class="code" href="main_8c.html#9494e9e8cbdc4eceb86cb33ff0006785">Obj_to_ip_head</a> = (<span class="keyword">struct </span><a class="code" href="structObj__to__ip.html">Obj_to_ip</a>*) malloc(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structObj__to__ip.html">Obj_to_ip</a>));
+<a name="l00241"></a>00241         <a class="code" href="main_8c.html#236217b97f5fe65457d8b22c73c5073d">Obj_to_ip_end</a> = (<span class="keyword">struct </span>Obj_to_ip*) malloc(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> Obj_to_ip));
+<a name="l00242"></a>00242         <span class="keywordflow">if</span>(<a class="code" href="main_8c.html#9494e9e8cbdc4eceb86cb33ff0006785">Obj_to_ip_head</a> == NULL || <a class="code" href="main_8c.html#236217b97f5fe65457d8b22c73c5073d">Obj_to_ip_end</a> == NULL)
+<a name="l00243"></a>00243                 <a class="code" href="main_8c.html#be0835e7acb76ea987ac80769302d90a">out_of_mem</a>();
+<a name="l00244"></a>00244         <a class="code" href="main_8c.html#9494e9e8cbdc4eceb86cb33ff0006785">Obj_to_ip_head</a>-&gt;<a class="code" href="structObj__to__ip.html#23759dec76c683ac720f937fea4e4d41">id</a> = 0;
+<a name="l00245"></a>00245         <a class="code" href="main_8c.html#236217b97f5fe65457d8b22c73c5073d">Obj_to_ip_end</a>-&gt;<a class="code" href="structObj__to__ip.html#23759dec76c683ac720f937fea4e4d41">id</a> = 0;
+<a name="l00246"></a>00246         <a class="code" href="main_8c.html#9494e9e8cbdc4eceb86cb33ff0006785">Obj_to_ip_head</a>-&gt;<a class="code" href="structObj__to__ip.html#c41475dd4632807df16315bad4309333">prev</a> = <a class="code" href="main_8c.html#236217b97f5fe65457d8b22c73c5073d">Obj_to_ip_end</a>-&gt;<a class="code" href="structObj__to__ip.html#c41475dd4632807df16315bad4309333">prev</a> = <a class="code" href="main_8c.html#9494e9e8cbdc4eceb86cb33ff0006785">Obj_to_ip_head</a>;
+<a name="l00247"></a>00247         <a class="code" href="main_8c.html#9494e9e8cbdc4eceb86cb33ff0006785">Obj_to_ip_head</a>-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a> = <a class="code" href="main_8c.html#236217b97f5fe65457d8b22c73c5073d">Obj_to_ip_end</a>-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a> = <a class="code" href="main_8c.html#236217b97f5fe65457d8b22c73c5073d">Obj_to_ip_end</a>;
+<a name="l00248"></a>00248         <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a> = <a class="code" href="main_8c.html#9494e9e8cbdc4eceb86cb33ff0006785">Obj_to_ip_head</a>;
+<a name="l00249"></a>00249 }
+<a name="l00250"></a>00250 
+<a name="l00251"></a>00251 <span class="comment">/*</span>
+<a name="l00252"></a>00252 <span class="comment"> *</span>
+<a name="l00253"></a>00253 <span class="comment"> * add a link object_id to olsr_node, to get ip adress and coordinates per object_id</span>
+<a name="l00254"></a>00254 <span class="comment"> *                 id =&gt; object_id, returned from s3d_clone or s3d_new_object</span>
+<a name="l00255"></a>00255 <span class="comment"> *  **olsr_node =&gt; pointer to pointer of current olsr_node</span>
+<a name="l00256"></a>00256 <span class="comment"> *</span>
+<a name="l00257"></a>00257 <span class="comment"> */</span>
+<a name="l00258"></a>00258 
+<a name="l00259"></a><a class="code" href="process_8c.html#d01a29bcb2e2daed6fcc6516c328f141">00259</a> <span class="keywordtype">void</span> <a class="code" href="olsrs3d_8h.html#d01a29bcb2e2daed6fcc6516c328f141">lst_add</a>(<span class="keywordtype">int</span> <span class="keywordtype">id</span>,<span class="keyword">struct</span> <a class="code" href="structolsr__node.html">olsr_node</a> **<a class="code" href="structolsr__node.html">olsr_node</a>) {
+<a name="l00260"></a>00260         <span class="keyword">struct </span><a class="code" href="structObj__to__ip.html">Obj_to_ip</a> *<span class="keyword">new</span>;
+<a name="l00261"></a>00261         <span class="keyword">new</span> = (<span class="keyword">struct </span><a class="code" href="structObj__to__ip.html">Obj_to_ip</a>*) malloc(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structObj__to__ip.html">Obj_to_ip</a>));
+<a name="l00262"></a>00262         <span class="keywordflow">if</span>(<span class="keyword">new</span> == NULL)
+<a name="l00263"></a>00263                 <a class="code" href="main_8c.html#be0835e7acb76ea987ac80769302d90a">out_of_mem</a>();
+<a name="l00264"></a>00264         <span class="keyword">new</span>-&gt;id = id;
+<a name="l00265"></a>00265         <span class="keyword">new</span>-&gt;olsr_node = *<a class="code" href="structObj__to__ip.html#207d8f9a609e3e20b4cbd9a7976dcd18">olsr_node</a>;
+<a name="l00266"></a>00266         <a class="code" href="olsrs3d_8h.html#576c61914d53ad9035e74317dbb15903">move_lst_ptr</a>(&amp;<span class="keywordtype">id</span>);
+<a name="l00267"></a>00267         <span class="keyword">new</span>-&gt;prev = <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>;
+<a name="l00268"></a>00268         <span class="keyword">new</span>-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a> = <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a>;
+<a name="l00269"></a>00269         <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a>-&gt;<a class="code" href="structObj__to__ip.html#c41475dd4632807df16315bad4309333">prev</a> = <span class="keyword">new</span>;
+<a name="l00270"></a>00270         <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a> = <span class="keyword">new</span>;
+<a name="l00271"></a>00271         <span class="comment">/* printf("obj2ip: add object %d between %d .. %d ip %s to list\n",new-&gt;id,new-&gt;prev-&gt;id,new-&gt;next-&gt;id,new-&gt;olsr_node-&gt;ip); */</span>
+<a name="l00272"></a>00272 }
+<a name="l00273"></a>00273 
+<a name="l00274"></a>00274 <span class="comment">/*</span>
+<a name="l00275"></a>00275 <span class="comment"> *void move_lst_ptr(int *id)</span>
+<a name="l00276"></a>00276 <span class="comment"> * remove element from obj2ip linked list</span>
+<a name="l00277"></a>00277 <span class="comment"> * id =&gt; object_id, returned from s3d_clone or s3d_new_object</span>
+<a name="l00278"></a>00278 <span class="comment"> *</span>
+<a name="l00279"></a>00279 <span class="comment"> */</span>
+<a name="l00280"></a>00280 
+<a name="l00281"></a><a class="code" href="process_8c.html#febf2594bdfe9ec411d0c04c9cd951b3">00281</a> <span class="keywordtype">void</span> <a class="code" href="olsrs3d_8h.html#febf2594bdfe9ec411d0c04c9cd951b3">lst_del</a>(<span class="keywordtype">int</span> <span class="keywordtype">id</span>) {
+<a name="l00282"></a>00282         <span class="keyword">struct </span><a class="code" href="structObj__to__ip.html">Obj_to_ip</a> *del;
+<a name="l00283"></a>00283         <a class="code" href="olsrs3d_8h.html#576c61914d53ad9035e74317dbb15903">move_lst_ptr</a>(&amp;<span class="keywordtype">id</span>);
+<a name="l00284"></a>00284         <span class="keywordflow">if</span>(<span class="keywordtype">id</span> != <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>-&gt;<a class="code" href="structObj__to__ip.html#23759dec76c683ac720f937fea4e4d41">id</a>)
+<a name="l00285"></a>00285         {
+<a name="l00286"></a>00286                 printf(<span class="stringliteral">"obj2ip: remove id %d failed move_lst_ptr return id %d\n"</span>,<span class="keywordtype">id</span>,<a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a>-&gt;<a class="code" href="structObj__to__ip.html#23759dec76c683ac720f937fea4e4d41">id</a>);
+<a name="l00287"></a>00287         } <span class="keywordflow">else</span> {
+<a name="l00288"></a>00288                 del = <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>;
+<a name="l00289"></a>00289                 <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a>-&gt;<a class="code" href="structObj__to__ip.html#c41475dd4632807df16315bad4309333">prev</a> = <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>-&gt;<a class="code" href="structObj__to__ip.html#c41475dd4632807df16315bad4309333">prev</a>;
+<a name="l00290"></a>00290                 <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>-&gt;<a class="code" href="structObj__to__ip.html#c41475dd4632807df16315bad4309333">prev</a>-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a> = <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a>;
+<a name="l00291"></a>00291                 <span class="comment">/* printf("obj2ip: remove object %d --&gt; %d &lt;-- %d ip %s from list\n",List_ptr-&gt;prev-&gt;id,del-&gt;id,List_ptr-&gt;next-&gt;id,del-&gt;olsr_node-&gt;ip); */</span>
+<a name="l00292"></a>00292                 free(del);
+<a name="l00293"></a>00293         }
+<a name="l00294"></a>00294 }
+<a name="l00295"></a>00295 
+<a name="l00296"></a>00296 <span class="comment">/*</span>
+<a name="l00297"></a>00297 <span class="comment"> *</span>
+<a name="l00298"></a>00298 <span class="comment"> * move the List_ptr one positon ahead the searched element</span>
+<a name="l00299"></a>00299 <span class="comment"> *      *id =&gt; pointer of object_id , returned from s3d_clone or s3d_new_object</span>
+<a name="l00300"></a>00300 <span class="comment"> *</span>
+<a name="l00301"></a>00301 <span class="comment"> */</span>
+<a name="l00302"></a>00302 
+<a name="l00303"></a><a class="code" href="process_8c.html#576c61914d53ad9035e74317dbb15903">00303</a> <span class="keywordtype">void</span> <a class="code" href="olsrs3d_8h.html#576c61914d53ad9035e74317dbb15903">move_lst_ptr</a>(<span class="keywordtype">int</span> *<span class="keywordtype">id</span>) {
+<a name="l00304"></a>00304         <span class="comment">/* printf("obj2ip: move for %d\n",*id); */</span>
+<a name="l00305"></a>00305         <span class="comment">/* head to point at end or id lass then first element in linked list*/</span>
+<a name="l00306"></a>00306         <span class="keywordflow">if</span>(<a class="code" href="main_8c.html#9494e9e8cbdc4eceb86cb33ff0006785">Obj_to_ip_head</a>-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a> == <a class="code" href="main_8c.html#9494e9e8cbdc4eceb86cb33ff0006785">Obj_to_ip_head</a> || *id &lt; Obj_to_ip_head-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a>-&gt;<a class="code" href="structObj__to__ip.html#23759dec76c683ac720f937fea4e4d41">id</a>)
+<a name="l00307"></a>00307                 <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a> = <a class="code" href="main_8c.html#9494e9e8cbdc4eceb86cb33ff0006785">Obj_to_ip_head</a>;
+<a name="l00308"></a>00308         <span class="comment">/* id is greather then last element in linked list */</span>
+<a name="l00309"></a>00309         <span class="keywordflow">else</span> <span class="keywordflow">if</span>(*<span class="keywordtype">id</span> &gt; <a class="code" href="main_8c.html#236217b97f5fe65457d8b22c73c5073d">Obj_to_ip_end</a>-&gt;<a class="code" href="structObj__to__ip.html#c41475dd4632807df16315bad4309333">prev</a>-&gt;<a class="code" href="structObj__to__ip.html#23759dec76c683ac720f937fea4e4d41">id</a>)
+<a name="l00310"></a>00310                 <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a> = <a class="code" href="main_8c.html#236217b97f5fe65457d8b22c73c5073d">Obj_to_ip_end</a>-&gt;<a class="code" href="structObj__to__ip.html#c41475dd4632807df16315bad4309333">prev</a>;
+<a name="l00311"></a>00311         <span class="keywordflow">else</span> {
+<a name="l00312"></a>00312                 <span class="comment">/* printf("obj2ip: ok i search deeper ;-) for id=%d\n",*id); */</span>
+<a name="l00313"></a>00313                 <span class="keywordflow">if</span>((*<span class="keywordtype">id</span> - (<span class="keywordtype">int</span>) <a class="code" href="main_8c.html#9494e9e8cbdc4eceb86cb33ff0006785">Obj_to_ip_head</a>-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a>-&gt;<a class="code" href="structObj__to__ip.html#23759dec76c683ac720f937fea4e4d41">id</a>) &lt;= ((<span class="keywordtype">int</span>)(<a class="code" href="main_8c.html#236217b97f5fe65457d8b22c73c5073d">Obj_to_ip_end</a>-&gt;<a class="code" href="structObj__to__ip.html#c41475dd4632807df16315bad4309333">prev</a>-&gt;<a class="code" href="structObj__to__ip.html#23759dec76c683ac720f937fea4e4d41">id</a>)-*<span class="keywordtype">id</span>)) {
+<a name="l00314"></a>00314                         <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a> = <a class="code" href="main_8c.html#9494e9e8cbdc4eceb86cb33ff0006785">Obj_to_ip_head</a>;
+<a name="l00315"></a>00315                         <span class="comment">/* printf("obj2ip: start at head id %d - %d &lt;= %d - %d \n",*id,Obj_to_ip_head-&gt;next-&gt;id,Obj_to_ip_end-&gt;prev-&gt;id,*id); */</span>
+<a name="l00316"></a>00316                         <span class="keywordflow">while</span>(*<span class="keywordtype">id</span> &gt;= <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a>-&gt;<a class="code" href="structObj__to__ip.html#23759dec76c683ac720f937fea4e4d41">id</a>) {
+<a name="l00317"></a>00317                                 <span class="comment">/* printf("obj2ip: %d &gt; %d move to ",*id,List_ptr-&gt;id); */</span>
+<a name="l00318"></a>00318                                 <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a> = <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a>;
+<a name="l00319"></a>00319                                 <span class="comment">/* printf("%d\n",List_ptr-&gt;id); */</span>
+<a name="l00320"></a>00320                         }
+<a name="l00321"></a>00321                 } <span class="keywordflow">else</span> {
+<a name="l00322"></a>00322                         <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a> = <a class="code" href="main_8c.html#236217b97f5fe65457d8b22c73c5073d">Obj_to_ip_end</a>;
+<a name="l00323"></a>00323                         <span class="comment">/* printf("obj2ip: start at end id %d - %d &gt; %d - %d \n",*id,Obj_to_ip_head-&gt;next-&gt;id,Obj_to_ip_end-&gt;prev-&gt;id,*id);  */</span>
+<a name="l00324"></a>00324                         <span class="comment">/*  do List_ptr = List_ptr-&gt;prev; while(*id &gt; List_ptr-&gt;prev-&gt;id); */</span>
+<a name="l00325"></a>00325                         <span class="keywordflow">while</span>(*id &lt; List_ptr-&gt;<a class="code" href="structObj__to__ip.html#c41475dd4632807df16315bad4309333">prev</a>-&gt;<a class="code" href="structObj__to__ip.html#23759dec76c683ac720f937fea4e4d41">id</a>) {
+<a name="l00326"></a>00326                                 <span class="comment">/* printf("obj2ip: %d &lt; %d move to ",*id,List_ptr-&gt;id); */</span>
+<a name="l00327"></a>00327                                 <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a> = <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>-&gt;<a class="code" href="structObj__to__ip.html#c41475dd4632807df16315bad4309333">prev</a>;
+<a name="l00328"></a>00328                                 <span class="comment">/* printf("%d\n",List_ptr-&gt;id); */</span>
+<a name="l00329"></a>00329                         }
+<a name="l00330"></a>00330                         <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a> = <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>-&gt;<a class="code" href="structObj__to__ip.html#c41475dd4632807df16315bad4309333">prev</a>;
+<a name="l00331"></a>00331                 }
+<a name="l00332"></a>00332                 <span class="comment">/* printf("obj2ip: found id to insert between %d--&gt; .. &lt;--%d to search/delete %d--&gt; .. &lt;--%d\n",List_ptr-&gt;id,List_ptr-&gt;next-&gt;next-&gt;id,List_ptr-&gt;prev-&gt;id,List_ptr-&gt;next-&gt;id); */</span>
+<a name="l00333"></a>00333         }
+<a name="l00334"></a>00334 }
+<a name="l00335"></a>00335 
+<a name="l00336"></a>00336 <span class="comment">/*</span>
+<a name="l00337"></a>00337 <span class="comment"> *</span>
+<a name="l00338"></a>00338 <span class="comment"> * search a object_id in linked list and return pointer on struct olsr_node</span>
+<a name="l00339"></a>00339 <span class="comment"> *      id =&gt; object_id , returned from s3d_clone or s3d_new_object</span>
+<a name="l00340"></a>00340 <span class="comment"> *</span>
+<a name="l00341"></a>00341 <span class="comment"> * &lt;example&gt;</span>
+<a name="l00342"></a>00342 <span class="comment"> *     struct olsr_node *olsr_node;</span>
+<a name="l00343"></a>00343 <span class="comment"> *     olsr_node = *lst_search(oid);</span>
+<a name="l00344"></a>00344 <span class="comment"> *     printf("obj2ip: search return %s\n",olsr_node-&gt;ip);</span>
+<a name="l00345"></a>00345 <span class="comment"> * &lt;/example&gt;</span>
+<a name="l00346"></a>00346 <span class="comment"> *</span>
+<a name="l00347"></a>00347 <span class="comment"> */</span>
+<a name="l00348"></a>00348 
+<a name="l00349"></a><a class="code" href="process_8c.html#b74d5229fcc3a39626609ac9f12510dd">00349</a> <span class="keyword">struct </span><a class="code" href="structolsr__node.html">olsr_node</a> **<a class="code" href="olsrs3d_8h.html#ef8aff26d4e096ef0880c204c13309f0">lst_search</a>(<span class="keywordtype">int</span> <span class="keywordtype">id</span>) {
+<a name="l00350"></a>00350         <a class="code" href="olsrs3d_8h.html#576c61914d53ad9035e74317dbb15903">move_lst_ptr</a>(&amp;<span class="keywordtype">id</span>);
+<a name="l00351"></a>00351         <span class="comment">/* TODO: return NULL when no node found */</span>
+<a name="l00352"></a>00352         <span class="comment">/* if(id != List_ptr-&gt;id) */</span>
+<a name="l00353"></a>00353                 <span class="comment">/* printf("obj2ip: search id....id not found\n"); */</span>
+<a name="l00354"></a>00354         <span class="comment">/* else */</span>
+<a name="l00355"></a>00355                 <span class="comment">/* printf("obj2ip: search found objekt_id=%d objekt_ip=%s\n",List_ptr-&gt;id,List_ptr-&gt;olsr_node-&gt;ip); */</span>
+<a name="l00356"></a>00356         <span class="keywordflow">return</span>(&amp;<a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>-&gt;<a class="code" href="structObj__to__ip.html#207d8f9a609e3e20b4cbd9a7976dcd18">olsr_node</a>);
+<a name="l00357"></a>00357 }
+<a name="l00358"></a>00358 
+<a name="l00359"></a><a class="code" href="process_8c.html#a015f713ca02d8b76a52175b4128d3e8">00359</a> <span class="keywordtype">void</span> <a class="code" href="olsrs3d_8h.html#a015f713ca02d8b76a52175b4128d3e8">lst_out</a>() {
+<a name="l00360"></a>00360         <span class="keyword">struct </span><a class="code" href="structObj__to__ip.html">Obj_to_ip</a> *ptr;
+<a name="l00361"></a>00361         ptr = <a class="code" href="main_8c.html#9494e9e8cbdc4eceb86cb33ff0006785">Obj_to_ip_head</a>;
+<a name="l00362"></a>00362         <span class="keywordflow">while</span>(ptr != ptr-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a>) {
+<a name="l00363"></a>00363                 printf(<span class="stringliteral">"id-&gt; %d\n"</span>,ptr-&gt;<a class="code" href="structObj__to__ip.html#23759dec76c683ac720f937fea4e4d41">id</a>);
+<a name="l00364"></a>00364                 ptr = ptr-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a>;
+<a name="l00365"></a>00365         }
+<a name="l00366"></a>00366 }
+<a name="l00367"></a>00367 
+<a name="l00368"></a><a class="code" href="process_8c.html#6b4e9b6718b671f6330c2e501c60d3c1">00368</a> <span class="keywordtype">int</span> <a class="code" href="olsrs3d_8h.html#6b4e9b6718b671f6330c2e501c60d3c1">process_main</a>() {
+<a name="l00369"></a>00369 
+<a name="l00370"></a>00370         <span class="keywordtype">int</span> dn;
+<a name="l00371"></a>00371         <span class="keywordtype">float</span> f;
+<a name="l00372"></a>00372         <span class="keywordtype">char</span> *lbuf_ptr, *last_cr_ptr, *con_from, *con_from_end, *con_to, *con_to_end, *etx, *etx_end;
+<a name="l00373"></a>00373         <span class="keyword">struct </span><a class="code" href="structolsr__node.html">olsr_node</a> *olsr_node1;   <span class="comment">/* pointer to olsr nodes */</span>
+<a name="l00374"></a>00374         <span class="keyword">struct </span><a class="code" href="structolsr__node.html">olsr_node</a> *olsr_node2;
+<a name="l00375"></a>00375 
+<a name="l00376"></a>00376         lbuf_ptr = <a class="code" href="olsrs3d_8h.html#00f1cd38b187535569d0354f2506fb74">lbuf</a>;
+<a name="l00377"></a>00377         last_cr_ptr = NULL;
+<a name="l00378"></a>00378 
+<a name="l00379"></a>00379         con_from = con_from_end = con_to = con_to_end = etx = etx_end = NULL;
+<a name="l00380"></a>00380         dn = 0;
+<a name="l00381"></a>00381 
+<a name="l00382"></a>00382         <span class="keywordflow">while</span> ( (*lbuf_ptr) != <span class="charliteral">'\0'</span> ) {
+<a name="l00383"></a>00383 
+<a name="l00384"></a>00384                 <span class="comment">/* printf( "%c",(*lbuf_ptr) ); */</span>
+<a name="l00385"></a>00385 
+<a name="l00386"></a>00386                 <span class="keywordflow">if</span> ( (*lbuf_ptr) == <span class="charliteral">'\n'</span> ) {
+<a name="l00387"></a>00387 
+<a name="l00388"></a>00388                         last_cr_ptr = lbuf_ptr;
+<a name="l00389"></a>00389                         con_from = con_from_end = con_to = con_to_end = etx = etx_end = NULL;
+<a name="l00390"></a>00390                         dn = 0;
+<a name="l00391"></a>00391 
+<a name="l00392"></a>00392                 }
+<a name="l00393"></a>00393 
+<a name="l00394"></a>00394                 <span class="keywordflow">if</span> ( (*lbuf_ptr) == <span class="charliteral">'"'</span> ) {
+<a name="l00395"></a>00395 
+<a name="l00396"></a>00396                         <span class="keywordflow">switch</span> ( dn ) {
+<a name="l00397"></a>00397 
+<a name="l00398"></a>00398                                 <span class="keywordflow">case</span> 0:
+<a name="l00399"></a>00399                                         con_from = lbuf_ptr + 1;
+<a name="l00400"></a>00400                                         <span class="keywordflow">break</span>;
+<a name="l00401"></a>00401                                 <span class="keywordflow">case</span> 1:
+<a name="l00402"></a>00402                                         con_from_end = lbuf_ptr;
+<a name="l00403"></a>00403                                         <span class="keywordflow">break</span>;
+<a name="l00404"></a>00404                                 <span class="keywordflow">case</span> 2:
+<a name="l00405"></a>00405                                         con_to = lbuf_ptr + 1;
+<a name="l00406"></a>00406                                         <span class="keywordflow">break</span>;
+<a name="l00407"></a>00407                                 <span class="keywordflow">case</span> 3:
+<a name="l00408"></a>00408                                         con_to_end = lbuf_ptr;
+<a name="l00409"></a>00409                                         <span class="keywordflow">break</span>;
+<a name="l00410"></a>00410                                 <span class="keywordflow">case</span> 4:
+<a name="l00411"></a>00411                                         etx = lbuf_ptr + 1;
+<a name="l00412"></a>00412                                         <span class="keywordflow">break</span>;
+<a name="l00413"></a>00413                                 <span class="keywordflow">case</span> 5:
+<a name="l00414"></a>00414                                         etx_end = lbuf_ptr;
+<a name="l00415"></a>00415                                         <span class="keywordflow">break</span>;
+<a name="l00416"></a>00416 
+<a name="l00417"></a>00417                         }
+<a name="l00418"></a>00418 
+<a name="l00419"></a>00419                         <span class="keywordflow">if</span> ( ++dn == 6 ) {
+<a name="l00420"></a>00420 
+<a name="l00421"></a>00421                                 <span class="comment">/* terminate strings - but not before 6 times '"' */</span>
+<a name="l00422"></a>00422                                 (*con_from_end) = (*con_to_end) = (*etx_end) = <span class="charliteral">'\0'</span>;
+<a name="l00423"></a>00423 
+<a name="l00424"></a>00424                                 <span class="comment">/* printf( "con_from: %s, con_to: %s, etx: %s\n", con_from, con_to, etx ); */</span>
+<a name="l00425"></a>00425 
+<a name="l00426"></a>00426                                 <span class="comment">/* announced network via HNA */</span>
+<a name="l00427"></a>00427                                 <span class="keywordflow">if</span> ( strncmp( etx, <span class="stringliteral">"HNA"</span>, <a class="code" href="olsrs3d_8h.html#f8c0c53607c56b59e883cb0894e5cde7">NAMEMAX</a> ) == 0 ) {
+<a name="l00428"></a>00428 
+<a name="l00429"></a>00429                                         <span class="comment">/* connection to internet */</span>
+<a name="l00430"></a>00430                                         <span class="keywordflow">if</span> ( strncmp( con_to, <span class="stringliteral">"0.0.0.0/0.0.0.0"</span>, <a class="code" href="olsrs3d_8h.html#f8c0c53607c56b59e883cb0894e5cde7">NAMEMAX</a> ) == 0 ) {
+<a name="l00431"></a>00431 
+<a name="l00432"></a>00432                                                 olsr_node1 = <a class="code" href="process_8c.html#7ba929b35f03f5921272b4e5e821ade2">get_olsr_node</a>( &amp;<a class="code" href="main_8c.html#c5c5c6846587092d0c23b58b558e680c">Olsr_root</a>, con_from );
+<a name="l00433"></a>00433 
+<a name="l00434"></a>00434                                                 <span class="keywordflow">if</span> ( olsr_node1-&gt;<a class="code" href="structolsr__node.html#c89186513811183436bcd79cdb6d7b4d">node_type</a> != 1 ) {
+<a name="l00435"></a>00435 
+<a name="l00436"></a>00436                                                         olsr_node1-&gt;<a class="code" href="structolsr__node.html#c89186513811183436bcd79cdb6d7b4d">node_type</a> = 1;
+<a name="l00437"></a>00437                                                         olsr_node1-&gt;<a class="code" href="structolsr__node.html#4517a87e4fdbdb58f678743b5684088b">node_type_modified</a> = 1;
+<a name="l00438"></a>00438                                                         <span class="keywordflow">if</span> ( <a class="code" href="main_8c.html#923774364cedbc16baa0bc05e9be136c">Debug</a> ) printf( <span class="stringliteral">"new internet: %s\n"</span>, olsr_node1-&gt;<a class="code" href="structolsr__node.html#59690d75faff5c149faecacb4f4d2a57">ip</a> );
+<a name="l00439"></a>00439 
+<a name="l00440"></a>00440                                                 }
+<a name="l00441"></a>00441 
+<a name="l00442"></a>00442                                         <span class="comment">/* normal HNA */</span>
+<a name="l00443"></a>00443                                         } <span class="keywordflow">else</span> {
+<a name="l00444"></a>00444 
+<a name="l00445"></a>00445                                                 olsr_node1 = <a class="code" href="process_8c.html#7ba929b35f03f5921272b4e5e821ade2">get_olsr_node</a>( &amp;<a class="code" href="main_8c.html#c5c5c6846587092d0c23b58b558e680c">Olsr_root</a>, con_from );
+<a name="l00446"></a>00446                                                 olsr_node2 = <a class="code" href="process_8c.html#7ba929b35f03f5921272b4e5e821ade2">get_olsr_node</a>( &amp;<a class="code" href="main_8c.html#c5c5c6846587092d0c23b58b558e680c">Olsr_root</a>, con_to );
+<a name="l00447"></a>00447 
+<a name="l00448"></a>00448                                                 <span class="keywordflow">if</span> ( olsr_node2-&gt;<a class="code" href="structolsr__node.html#c89186513811183436bcd79cdb6d7b4d">node_type</a> != 2 ) {
+<a name="l00449"></a>00449 
+<a name="l00450"></a>00450                                                         olsr_node2-&gt;<a class="code" href="structolsr__node.html#c89186513811183436bcd79cdb6d7b4d">node_type</a> = 2;
+<a name="l00451"></a>00451                                                         olsr_node2-&gt;<a class="code" href="structolsr__node.html#4517a87e4fdbdb58f678743b5684088b">node_type_modified</a> = 1;
+<a name="l00452"></a>00452                                                         <span class="keywordflow">if</span> ( <a class="code" href="main_8c.html#923774364cedbc16baa0bc05e9be136c">Debug</a> ) printf( <span class="stringliteral">"new hna network: %s\n"</span>, olsr_node2-&gt;<a class="code" href="structolsr__node.html#59690d75faff5c149faecacb4f4d2a57">ip</a> );
+<a name="l00453"></a>00453 
+<a name="l00454"></a>00454                                                 }
+<a name="l00455"></a>00455                                                 <span class="keywordflow">if</span> ( olsr_node1-&gt;<a class="code" href="structolsr__node.html#f19d37e4aa5263be9a1741de24686664">visible</a> &amp;&amp; olsr_node2-&gt;<a class="code" href="structolsr__node.html#f19d37e4aa5263be9a1741de24686664">visible</a> )
+<a name="l00456"></a>00456                                                         <a class="code" href="process_8c.html#4c780ee64b12fa5531a56edfb5ffcc00">add_olsr_con</a>( olsr_node1, olsr_node2, -1000.00 );
+<a name="l00457"></a>00457 
+<a name="l00458"></a>00458                                         }
+<a name="l00459"></a>00459 
+<a name="l00460"></a>00460                                 <span class="comment">/* normal node */</span>
+<a name="l00461"></a>00461                                 } <span class="keywordflow">else</span> {
+<a name="l00462"></a>00462 
+<a name="l00463"></a>00463                                         olsr_node1 = <a class="code" href="process_8c.html#7ba929b35f03f5921272b4e5e821ade2">get_olsr_node</a>( &amp;<a class="code" href="main_8c.html#c5c5c6846587092d0c23b58b558e680c">Olsr_root</a>, con_from );
+<a name="l00464"></a>00464                                         olsr_node2 = <a class="code" href="process_8c.html#7ba929b35f03f5921272b4e5e821ade2">get_olsr_node</a>( &amp;<a class="code" href="main_8c.html#c5c5c6846587092d0c23b58b558e680c">Olsr_root</a>, con_to );
+<a name="l00465"></a>00465                                         f = strtod(etx,NULL);
+<a name="l00466"></a>00466                                         <span class="keywordflow">if</span> ( f &lt; 1 )
+<a name="l00467"></a>00467                                                 f = 999;
+<a name="l00468"></a>00468                                         <a class="code" href="process_8c.html#4c780ee64b12fa5531a56edfb5ffcc00">add_olsr_con</a>( olsr_node1, olsr_node2, f );
+<a name="l00469"></a>00469                                 }
+<a name="l00470"></a>00470 
+<a name="l00471"></a>00471                                 con_from = con_from_end = con_to = con_to_end = etx = etx_end = NULL;
+<a name="l00472"></a>00472                                 dn = 0;
+<a name="l00473"></a>00473                                 last_cr_ptr = lbuf_ptr;
+<a name="l00474"></a>00474 
+<a name="l00475"></a>00475                         }
+<a name="l00476"></a>00476 
+<a name="l00477"></a>00477                 }
+<a name="l00478"></a>00478 
+<a name="l00479"></a>00479                 lbuf_ptr++;
+<a name="l00480"></a>00480 
+<a name="l00481"></a>00481         }
+<a name="l00482"></a>00482 
+<a name="l00483"></a>00483         <span class="keywordflow">if</span> ( last_cr_ptr != NULL ) memmove( <a class="code" href="olsrs3d_8h.html#00f1cd38b187535569d0354f2506fb74">lbuf</a>, last_cr_ptr + 1, strlen( last_cr_ptr ) );
+<a name="l00484"></a>00484 
+<a name="l00485"></a>00485         <span class="keywordflow">return</span>(0);
+<a name="l00486"></a>00486 
+<a name="l00487"></a>00487 }
+</pre></div><hr size="1"><address style="align: right;"><small>Generated on Sun Mar 19 13:28:20 2006 for olsrs3d by&nbsp;
+<a href="http://www.doxygen.org/index.html">
+<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6 </small></address>
+</body>
+</html>

Added: trunk/apps/olsrs3d/doxygen/html/process_8c.html
===================================================================
--- trunk/apps/olsrs3d/doxygen/html/process_8c.html	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/html/process_8c.html	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,819 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
+<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
+<title>olsrs3d: s3d/apps/olsrs3d/process.c File Reference</title>
+<link href="doxygen.css" rel="stylesheet" type="text/css">
+<link href="tabs.css" rel="stylesheet" type="text/css">
+</head><body>
+<!-- Generated by Doxygen 1.4.6 -->
+<div class="tabs">
+  <ul>
+    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
+    <li><a href="classes.html"><span>Classes</span></a></li>
+    <li id="current"><a href="files.html"><span>Files</span></a></li>
+    <li><a href="dirs.html"><span>Directories</span></a></li>
+  </ul></div>
+<div class="tabs">
+  <ul>
+    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
+    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
+  </ul></div>
+<div class="nav">
+<a class="el" href="dir_9d2efe7c7f87ee6309da929964f0685b.html">s3d</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_5d167550802dbd943c0631943f884f5b.html">apps</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_bf110b9fd34b0903efb6170e1cee5506.html">olsrs3d</a></div>
+<h1>process.c File Reference</h1><code>#include &lt;stdio.h&gt;</code><br>
+<code>#include &lt;string.h&gt;</code><br>
+<code>#include &lt;stdlib.h&gt;</code><br>
+<code>#include &lt;s3d.h&gt;</code><br>
+<code>#include &quot;<a class="el" href="olsrs3d_8h-source.html">olsrs3d.h</a>&quot;</code><br>
+
+<p>
+<a href="process_8c-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
+<tr><td></td></tr>
+<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
+<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="process_8c.html#4c780ee64b12fa5531a56edfb5ffcc00">add_olsr_con</a> (struct <a class="el" href="structolsr__node.html">olsr_node</a> *con_from, struct <a class="el" href="structolsr__node.html">olsr_node</a> *con_to, float etx)</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="process_8c.html#7ba929b35f03f5921272b4e5e821ade2">get_olsr_node</a> (struct <a class="el" href="structolsr__node.html">olsr_node</a> **<a class="el" href="structolsr__node.html">olsr_node</a>, char *ip)</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="process_8c.html#d01a29bcb2e2daed6fcc6516c328f141">lst_add</a> (int id, struct <a class="el" href="structolsr__node.html">olsr_node</a> **<a class="el" href="structolsr__node.html">olsr_node</a>)</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="process_8c.html#febf2594bdfe9ec411d0c04c9cd951b3">lst_del</a> (int id)</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="process_8c.html#edfb2ae44af543946842187ced1cd47e">lst_initialize</a> ()</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="process_8c.html#a015f713ca02d8b76a52175b4128d3e8">lst_out</a> ()</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structolsr__node.html">olsr_node</a> **&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="process_8c.html#b74d5229fcc3a39626609ac9f12510dd">lst_search</a> (int id)</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="process_8c.html#576c61914d53ad9035e74317dbb15903">move_lst_ptr</a> (int *id)</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="process_8c.html#6b4e9b6718b671f6330c2e501c60d3c1">process_main</a> ()</td></tr>
+
+<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
+<tr><td class="memItemLeft" nowrap align="right" valign="top">char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="process_8c.html#00f1cd38b187535569d0354f2506fb74">lbuf</a> [MAXLINESIZE]</td></tr>
+
+</table>
+<hr><h2>Function Documentation</h2>
+<a class="anchor" name="4c780ee64b12fa5531a56edfb5ffcc00"></a><!-- doxytag: member="process.c::add_olsr_con" ref="4c780ee64b12fa5531a56edfb5ffcc00" args="(struct olsr_node *con_from, struct olsr_node *con_to, float etx)" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">int add_olsr_con           </td>
+          <td class="md" valign="top">(&nbsp;</td>
+          <td class="md" nowrap valign="top">struct <a class="el" href="structolsr__node.html">olsr_node</a> *&nbsp;</td>
+          <td class="mdname" nowrap> <em>con_from</em>, </td>
+        </tr>
+        <tr>
+          <td class="md" nowrap align="right"></td>
+          <td class="md"></td>
+          <td class="md" nowrap>struct <a class="el" href="structolsr__node.html">olsr_node</a> *&nbsp;</td>
+          <td class="mdname" nowrap> <em>con_to</em>, </td>
+        </tr>
+        <tr>
+          <td class="md" nowrap align="right"></td>
+          <td class="md"></td>
+          <td class="md" nowrap>float&nbsp;</td>
+          <td class="mdname" nowrap> <em>etx</em></td>
+        </tr>
+        <tr>
+          <td class="md"></td>
+          <td class="md">)&nbsp;</td>
+          <td class="md" colspan="2"></td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="process_8c-source.html#l00048">48</a> of file <a class="el" href="process_8c-source.html">process.c</a>.
+<p>
+References <a class="el" href="main_8c-source.html#l00045">Con_begin</a>, <a class="el" href="olsrs3d_8h-source.html#l00064">olsr_node::ip</a>, <a class="el" href="olsrs3d_8h-source.html#l00041">olsr_con::left_etx</a>, <a class="el" href="olsrs3d_8h-source.html#l00028">NAMEMAX</a>, <a class="el" href="olsrs3d_8h-source.html#l00037">olsr_con::next_olsr_con</a>, <a class="el" href="olsrs3d_8h-source.html#l00053">olsr_neigh_list::next_olsr_neigh_list</a>, <a class="el" href="olsrs3d_8h-source.html#l00054">olsr_neigh_list::olsr_con</a>, <a class="el" href="main_8c-source.html#l00094">out_of_mem()</a>, <a class="el" href="olsrs3d_8h-source.html#l00038">olsr_con::prev_olsr_con</a>, and <a class="el" href="main_8c-source.html#l00062">ZeroPoint</a>.
+<p>
+Referenced by <a class="el" href="process_8c-source.html#l00368">process_main()</a>.<div class="fragment"><pre class="fragment"><a name="l00048"></a>00048                                                                                     {
+<a name="l00049"></a>00049 
+<a name="l00050"></a>00050         <span class="keyword">struct </span><a class="code" href="structolsr__con.html">olsr_con</a> **<a class="code" href="structolsr__con.html">olsr_con</a> = &amp;<a class="code" href="main_8c.html#0643a36891539929d987e2ee83ff81d1">Con_begin</a>;
+<a name="l00051"></a>00051         <span class="keyword">struct </span>olsr_con *<a class="code" href="structolsr__con.html#0382eebfbf31d5f217572d4907c503cb">prev_olsr_con</a> = NULL;   <span class="comment">/* previous olsr connection */</span>
+<a name="l00052"></a>00052         <span class="keyword">struct </span><a class="code" href="structolsr__neigh__list.html">olsr_neigh_list</a> **<a class="code" href="structolsr__neigh__list.html">olsr_neigh_list</a>;
+<a name="l00053"></a>00053 
+<a name="l00054"></a>00054         <span class="keywordflow">while</span> ( (*<a class="code" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">olsr_con</a>) != NULL ) {
+<a name="l00055"></a>00055 
+<a name="l00056"></a>00056                 <span class="comment">/* connection already exists */</span>
+<a name="l00057"></a>00057                 <span class="keywordflow">if</span> ( ( strncmp( (*olsr_con)-&gt;left_olsr_node-&gt;ip, con_from-&gt;<a class="code" href="structolsr__node.html#59690d75faff5c149faecacb4f4d2a57">ip</a>, <a class="code" href="olsrs3d_8h.html#f8c0c53607c56b59e883cb0894e5cde7">NAMEMAX</a> ) == 0 ) &amp;&amp; ( strncmp( (*olsr_con)-&gt;right_olsr_node-&gt;ip, con_to-&gt;<a class="code" href="structolsr__node.html#59690d75faff5c149faecacb4f4d2a57">ip</a>, <a class="code" href="olsrs3d_8h.html#f8c0c53607c56b59e883cb0894e5cde7">NAMEMAX</a> ) == 0 ) ) {
+<a name="l00058"></a>00058                         (*olsr_con)-&gt;<a class="code" href="structolsr__con.html#d93efab11883355b45a0460456991362">left_etx</a> = etx;
+<a name="l00059"></a>00059                         <span class="keywordflow">break</span>;
+<a name="l00060"></a>00060 
+<a name="l00061"></a>00061                 } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( ( strncmp( (*olsr_con)-&gt;right_olsr_node-&gt;ip, con_from-&gt;<a class="code" href="structolsr__node.html#59690d75faff5c149faecacb4f4d2a57">ip</a>, <a class="code" href="olsrs3d_8h.html#f8c0c53607c56b59e883cb0894e5cde7">NAMEMAX</a> ) == 0 ) &amp;&amp; ( strncmp( (*olsr_con)-&gt;left_olsr_node-&gt;ip, con_to-&gt;<a class="code" href="structolsr__node.html#59690d75faff5c149faecacb4f4d2a57">ip</a>, <a class="code" href="olsrs3d_8h.html#f8c0c53607c56b59e883cb0894e5cde7">NAMEMAX</a> ) == 0 ) ) {
+<a name="l00062"></a>00062 
+<a name="l00063"></a>00063                         (*olsr_con)-&gt;right_etx = etx;
+<a name="l00064"></a>00064                         <span class="keywordflow">break</span>;
+<a name="l00065"></a>00065 
+<a name="l00066"></a>00066                 }
+<a name="l00067"></a>00067 
+<a name="l00068"></a>00068                 <span class="comment">/* save previous olsr connection for later use */</span>
+<a name="l00069"></a>00069                 prev_olsr_con = (*olsr_con);
+<a name="l00070"></a>00070 
+<a name="l00071"></a>00071                 <a class="code" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">olsr_con</a> = &amp;(*olsr_con)-&gt;<a class="code" href="structolsr__con.html#369dfd6eec077d0a6228cd1387135e6e">next_olsr_con</a>;
+<a name="l00072"></a>00072 
+<a name="l00073"></a>00073         }
+<a name="l00074"></a>00074 
+<a name="l00075"></a>00075         <span class="comment">/* new connection */</span>
+<a name="l00076"></a>00076         <span class="keywordflow">if</span> ( (*<a class="code" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">olsr_con</a>) == NULL ) {
+<a name="l00077"></a>00077 
+<a name="l00078"></a>00078                 (*olsr_con) = malloc( <span class="keyword">sizeof</span>( <span class="keyword">struct</span> <a class="code" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">olsr_con</a> ) );
+<a name="l00079"></a>00079                 <span class="keywordflow">if</span> ( (*<a class="code" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">olsr_con</a>) == NULL ) <a class="code" href="main_8c.html#be0835e7acb76ea987ac80769302d90a">out_of_mem</a>();
+<a name="l00080"></a>00080 
+<a name="l00081"></a>00081                 <span class="comment">/* create connection object */</span>
+<a name="l00082"></a>00082                 (*olsr_con)-&gt;obj_id = s3d_new_object();
+<a name="l00083"></a>00083 
+<a name="l00084"></a>00084                 <span class="comment">/* add olsr node to new olsr connection in order to access the nodes from the connection list */</span>
+<a name="l00085"></a>00085                 (*olsr_con)-&gt;left_olsr_node = con_from;
+<a name="l00086"></a>00086                 (*olsr_con)-&gt;right_olsr_node = con_to;
+<a name="l00087"></a>00087 
+<a name="l00088"></a>00088                 <span class="comment">/* add connection color */</span>
+<a name="l00089"></a>00089                 (*olsr_con)-&gt;color = 0;
+<a name="l00090"></a>00090                 s3d_push_material( (*olsr_con)-&gt;obj_id,
+<a name="l00091"></a>00091                                   1.0,1.0,1.0,
+<a name="l00092"></a>00092                                   1.0,1.0,1.0,
+<a name="l00093"></a>00093                                   1.0,1.0,1.0);
+<a name="l00094"></a>00094 
+<a name="l00095"></a>00095                 <span class="comment">/* add connection endpoints */</span>
+<a name="l00096"></a>00096                 s3d_push_vertex( (*olsr_con)-&gt;obj_id, (*olsr_con)-&gt;left_olsr_node-&gt;pos_vec[0], (*olsr_con)-&gt;left_olsr_node-&gt;pos_vec[1], (*olsr_con)-&gt;left_olsr_node-&gt;pos_vec[2] );
+<a name="l00097"></a>00097                 s3d_push_vertex( (*olsr_con)-&gt;obj_id, (*olsr_con)-&gt;right_olsr_node-&gt;pos_vec[0], (*olsr_con)-&gt;right_olsr_node-&gt;pos_vec[1], (*olsr_con)-&gt;right_olsr_node-&gt;pos_vec[2] );
+<a name="l00098"></a>00098 
+<a name="l00099"></a>00099                 s3d_push_line( (*olsr_con)-&gt;obj_id, 0,1,0 );
+<a name="l00100"></a>00100 
+<a name="l00101"></a>00101                 s3d_flags_on( (*olsr_con)-&gt;obj_id, S3D_OF_VISIBLE );
+<a name="l00102"></a>00102 
+<a name="l00103"></a>00103                 s3d_link( (*olsr_con)-&gt;obj_id,  <a class="code" href="main_8c.html#e113d40abb6f4dd73e4b1253917a1942">ZeroPoint</a> );
+<a name="l00104"></a>00104 
+<a name="l00105"></a>00105                 <span class="comment">/* HNA */</span>
+<a name="l00106"></a>00106                 <span class="keywordflow">if</span> ( etx == -1000.00 ) {
+<a name="l00107"></a>00107 
+<a name="l00108"></a>00108                         (*olsr_con)-&gt;left_etx = etx;
+<a name="l00109"></a>00109                         (*olsr_con)-&gt;right_etx = etx;
+<a name="l00110"></a>00110 
+<a name="l00111"></a>00111                 } <span class="keywordflow">else</span> {
+<a name="l00112"></a>00112 
+<a name="l00113"></a>00113                         (*olsr_con)-&gt;left_etx = etx;
+<a name="l00114"></a>00114                         (*olsr_con)-&gt;right_etx = 0.0;
+<a name="l00115"></a>00115 
+<a name="l00116"></a>00116                 }
+<a name="l00117"></a>00117 
+<a name="l00118"></a>00118                 (*olsr_con)-&gt;next_olsr_con = NULL;
+<a name="l00119"></a>00119                 (*olsr_con)-&gt;prev_olsr_con = prev_olsr_con;
+<a name="l00120"></a>00120 
+<a name="l00121"></a>00121                 <span class="comment">/* add new olsr connection to olsr nodes in order to access the connection from the olsr node */</span>
+<a name="l00122"></a>00122                 olsr_neigh_list = &amp;(*olsr_con)-&gt;left_olsr_node-&gt;olsr_neigh_list;
+<a name="l00123"></a>00123                 <span class="keywordflow">while</span> ( (*olsr_neigh_list) != NULL ) olsr_neigh_list = &amp;(*olsr_neigh_list)-&gt;<a class="code" href="structolsr__neigh__list.html#f1d533fde49e1ed2ea5299661f5c10c6">next_olsr_neigh_list</a>;
+<a name="l00124"></a>00124                 (*olsr_neigh_list) = malloc( <span class="keyword">sizeof</span>( <span class="keyword">struct</span> olsr_neigh_list ) );
+<a name="l00125"></a>00125                 <span class="keywordflow">if</span> ( (*olsr_neigh_list) == NULL ) <a class="code" href="main_8c.html#be0835e7acb76ea987ac80769302d90a">out_of_mem</a>();
+<a name="l00126"></a>00126                 (*olsr_neigh_list)-&gt;olsr_con = (*olsr_con);
+<a name="l00127"></a>00127                 (*olsr_neigh_list)-&gt;next_olsr_neigh_list = NULL;
+<a name="l00128"></a>00128 
+<a name="l00129"></a>00129                 olsr_neigh_list = &amp;(*olsr_con)-&gt;right_olsr_node-&gt;olsr_neigh_list;
+<a name="l00130"></a>00130                 <span class="keywordflow">while</span> ( (*olsr_neigh_list) != NULL ) olsr_neigh_list = &amp;(*olsr_neigh_list)-&gt;<a class="code" href="structolsr__neigh__list.html#f1d533fde49e1ed2ea5299661f5c10c6">next_olsr_neigh_list</a>;
+<a name="l00131"></a>00131                 (*olsr_neigh_list) = malloc( <span class="keyword">sizeof</span>( <span class="keyword">struct</span> olsr_neigh_list ) );
+<a name="l00132"></a>00132                 <span class="keywordflow">if</span> ( (*olsr_neigh_list) == NULL ) <a class="code" href="main_8c.html#be0835e7acb76ea987ac80769302d90a">out_of_mem</a>();
+<a name="l00133"></a>00133                 (*olsr_neigh_list)-&gt;olsr_con = (*olsr_con);
+<a name="l00134"></a>00134                 (*olsr_neigh_list)-&gt;next_olsr_neigh_list = NULL;
+<a name="l00135"></a>00135 
+<a name="l00136"></a>00136         }
+<a name="l00137"></a>00137 
+<a name="l00138"></a>00138         <span class="keywordflow">return</span>(0);
+<a name="l00139"></a>00139 
+<a name="l00140"></a>00140 }
+</pre></div>
+<p>
+    </td>
+  </tr>
+</table>
+<a class="anchor" name="7ba929b35f03f5921272b4e5e821ade2"></a><!-- doxytag: member="process.c::get_olsr_node" ref="7ba929b35f03f5921272b4e5e821ade2" args="(struct olsr_node **olsr_node, char *ip)" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">void* get_olsr_node           </td>
+          <td class="md" valign="top">(&nbsp;</td>
+          <td class="md" nowrap valign="top">struct <a class="el" href="structolsr__node.html">olsr_node</a> **&nbsp;</td>
+          <td class="mdname" nowrap> <em>olsr_node</em>, </td>
+        </tr>
+        <tr>
+          <td class="md" nowrap align="right"></td>
+          <td class="md"></td>
+          <td class="md" nowrap>char *&nbsp;</td>
+          <td class="mdname" nowrap> <em>ip</em></td>
+        </tr>
+        <tr>
+          <td class="md"></td>
+          <td class="md">)&nbsp;</td>
+          <td class="md" colspan="2"></td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="process_8c-source.html#l00155">155</a> of file <a class="el" href="process_8c-source.html">process.c</a>.
+<p>
+References <a class="el" href="main_8c-source.html#l00041">Debug</a>, <a class="el" href="olsrs3d_8h-source.html#l00062">olsr_node::left</a>, <a class="el" href="olsrs3d_8h-source.html#l00028">NAMEMAX</a>, <a class="el" href="main_8c-source.html#l00049">Olsr_node_count</a>, <a class="el" href="main_8c-source.html#l00094">out_of_mem()</a>, and <a class="el" href="olsrs3d_8h-source.html#l00063">olsr_node::right</a>.
+<p>
+Referenced by <a class="el" href="process_8c-source.html#l00368">process_main()</a>.<div class="fragment"><pre class="fragment"><a name="l00155"></a>00155                                                               {
+<a name="l00156"></a>00156 
+<a name="l00157"></a>00157         <span class="keywordtype">int</span> result;   <span class="comment">/* result of strcmp */</span>
+<a name="l00158"></a>00158 
+<a name="l00159"></a>00159         <span class="keywordflow">while</span> ( (*olsr_node) != NULL ) {
+<a name="l00160"></a>00160 
+<a name="l00161"></a>00161                 result = strncmp( (*olsr_node)-&gt;ip, ip, <a class="code" href="olsrs3d_8h.html#f8c0c53607c56b59e883cb0894e5cde7">NAMEMAX</a> );
+<a name="l00162"></a>00162 
+<a name="l00163"></a>00163                 <span class="comment">/* we found the node */</span>
+<a name="l00164"></a>00164                 <span class="keywordflow">if</span> ( result == 0 ) {
+<a name="l00165"></a>00165 
+<a name="l00166"></a>00166                         (*olsr_node)-&gt;last_seen = 100;
+<a name="l00167"></a>00167 
+<a name="l00168"></a>00168                         <span class="comment">/* former invisble (deleted) node */</span>
+<a name="l00169"></a>00169                         <span class="keywordflow">if</span> ( (*olsr_node)-&gt;visible == 0 ) {
+<a name="l00170"></a>00170 
+<a name="l00171"></a>00171                                 (*olsr_node)-&gt;node_type = 0;
+<a name="l00172"></a>00172                                 (*olsr_node)-&gt;node_type_modified = 1;
+<a name="l00173"></a>00173 
+<a name="l00174"></a>00174                                 (*olsr_node)-&gt;visible = 1;
+<a name="l00175"></a>00175 
+<a name="l00176"></a>00176                                 (*olsr_node)-&gt;mov_vec[0] = (*olsr_node)-&gt;mov_vec[1] = (*olsr_node)-&gt;mov_vec[2] = 0.0;
+<a name="l00177"></a>00177 
+<a name="l00178"></a>00178                                 <span class="keywordflow">if</span> ( <a class="code" href="main_8c.html#923774364cedbc16baa0bc05e9be136c">Debug</a> ) printf( <span class="stringliteral">"new olsr node: %s\n"</span>, (*olsr_node)-&gt;ip );
+<a name="l00179"></a>00179 
+<a name="l00180"></a>00180                                 <a class="code" href="main_8c.html#86c048bc4aaab319f4d61f7c0e1f056f">Olsr_node_count</a>++;
+<a name="l00181"></a>00181 
+<a name="l00182"></a>00182                         }
+<a name="l00183"></a>00183 
+<a name="l00184"></a>00184                         <span class="keywordflow">return</span> (*olsr_node);
+<a name="l00185"></a>00185 
+<a name="l00186"></a>00186                 }
+<a name="l00187"></a>00187 
+<a name="l00188"></a>00188                 <span class="comment">/* the searched node must be in the subtree */</span>
+<a name="l00189"></a>00189                 <span class="keywordflow">if</span> ( result &lt; 0 ) {
+<a name="l00190"></a>00190                         olsr_node = &amp;(*olsr_node)-&gt;<a class="code" href="structolsr__node.html#bc6cf143d12b1e5a204ae64d40c0eb05">right</a>;
+<a name="l00191"></a>00191                 } <span class="keywordflow">else</span> {
+<a name="l00192"></a>00192                         olsr_node = &amp;(*olsr_node)-&gt;<a class="code" href="structolsr__node.html#b64ee26ebfa4a3c2719de780b4cabada">left</a>;
+<a name="l00193"></a>00193                 }
+<a name="l00194"></a>00194 
+<a name="l00195"></a>00195         }
+<a name="l00196"></a>00196 
+<a name="l00197"></a>00197         <span class="comment">/* if node is NULL we reached the end of the tree and must create a new olsr_node */</span>
+<a name="l00198"></a>00198         <span class="keywordflow">if</span> ( (*olsr_node) == NULL ) {
+<a name="l00199"></a>00199 
+<a name="l00200"></a>00200                 (*olsr_node) = malloc( <span class="keyword">sizeof</span>( <span class="keyword">struct</span> olsr_node ) );
+<a name="l00201"></a>00201                 <span class="keywordflow">if</span> ( (*olsr_node) == NULL ) <a class="code" href="main_8c.html#be0835e7acb76ea987ac80769302d90a">out_of_mem</a>();
+<a name="l00202"></a>00202 
+<a name="l00203"></a>00203                 (*olsr_node)-&gt;left = NULL;
+<a name="l00204"></a>00204                 (*olsr_node)-&gt;right = NULL;
+<a name="l00205"></a>00205 
+<a name="l00206"></a>00206                 strncpy( (*olsr_node)-&gt;ip, ip, <a class="code" href="olsrs3d_8h.html#f8c0c53607c56b59e883cb0894e5cde7">NAMEMAX</a> );
+<a name="l00207"></a>00207 
+<a name="l00208"></a>00208                 (*olsr_node)-&gt;node_type = 0;
+<a name="l00209"></a>00209                 (*olsr_node)-&gt;node_type_modified = 1;
+<a name="l00210"></a>00210 
+<a name="l00211"></a>00211                 (*olsr_node)-&gt;last_seen = 100;
+<a name="l00212"></a>00212                 (*olsr_node)-&gt;visible = 1;
+<a name="l00213"></a>00213 
+<a name="l00214"></a>00214                 <span class="keywordflow">if</span> ( <a class="code" href="main_8c.html#923774364cedbc16baa0bc05e9be136c">Debug</a> ) printf( <span class="stringliteral">"new olsr node: %s\n"</span>, (*olsr_node)-&gt;ip );
+<a name="l00215"></a>00215 
+<a name="l00216"></a>00216                 <a class="code" href="main_8c.html#86c048bc4aaab319f4d61f7c0e1f056f">Olsr_node_count</a>++;
+<a name="l00217"></a>00217 
+<a name="l00218"></a>00218                 (*olsr_node)-&gt;pos_vec[0] = ( ( float ) 2.0 * rand() ) / RAND_MAX - 1.0;
+<a name="l00219"></a>00219                 (*olsr_node)-&gt;pos_vec[1] = ( ( float ) 2.0 * rand() ) / RAND_MAX - 1.0;
+<a name="l00220"></a>00220                 (*olsr_node)-&gt;pos_vec[2] = ( ( float ) 2.0 * rand() ) / RAND_MAX - 1.0;
+<a name="l00221"></a>00221                 (*olsr_node)-&gt;mov_vec[0] = (*olsr_node)-&gt;mov_vec[1] = (*olsr_node)-&gt;mov_vec[2] = 0.0;
+<a name="l00222"></a>00222 
+<a name="l00223"></a>00223                 (*olsr_node)-&gt;obj_id = -1;
+<a name="l00224"></a>00224                 (*olsr_node)-&gt;desc_id = -1;
+<a name="l00225"></a>00225                 (*olsr_node)-&gt;olsr_neigh_list = NULL;
+<a name="l00226"></a>00226 
+<a name="l00227"></a>00227                 <span class="keywordflow">return</span> (*olsr_node);
+<a name="l00228"></a>00228 
+<a name="l00229"></a>00229         }
+<a name="l00230"></a>00230         <span class="keywordflow">return</span>(0);
+<a name="l00231"></a>00231 }
+</pre></div>
+<p>
+    </td>
+  </tr>
+</table>
+<a class="anchor" name="d01a29bcb2e2daed6fcc6516c328f141"></a><!-- doxytag: member="process.c::lst_add" ref="d01a29bcb2e2daed6fcc6516c328f141" args="(int id, struct olsr_node **olsr_node)" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">void lst_add           </td>
+          <td class="md" valign="top">(&nbsp;</td>
+          <td class="md" nowrap valign="top">int&nbsp;</td>
+          <td class="mdname" nowrap> <em>id</em>, </td>
+        </tr>
+        <tr>
+          <td class="md" nowrap align="right"></td>
+          <td class="md"></td>
+          <td class="md" nowrap>struct <a class="el" href="structolsr__node.html">olsr_node</a> **&nbsp;</td>
+          <td class="mdname" nowrap> <em>olsr_node</em></td>
+        </tr>
+        <tr>
+          <td class="md"></td>
+          <td class="md">)&nbsp;</td>
+          <td class="md" colspan="2"></td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="process_8c-source.html#l00259">259</a> of file <a class="el" href="process_8c-source.html">process.c</a>.
+<p>
+References <a class="el" href="main_8c-source.html#l00047">List_ptr</a>, <a class="el" href="process_8c-source.html#l00303">move_lst_ptr()</a>, <a class="el" href="olsrs3d_8h-source.html#l00082">Obj_to_ip::next</a>, <a class="el" href="olsrs3d_8h-source.html#l00081">Obj_to_ip::olsr_node</a>, <a class="el" href="main_8c-source.html#l00094">out_of_mem()</a>, and <a class="el" href="olsrs3d_8h-source.html#l00083">Obj_to_ip::prev</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00186">handle_olsr_node()</a>.<div class="fragment"><pre class="fragment"><a name="l00259"></a>00259                                                   {
+<a name="l00260"></a>00260         <span class="keyword">struct </span><a class="code" href="structObj__to__ip.html">Obj_to_ip</a> *<span class="keyword">new</span>;
+<a name="l00261"></a>00261         <span class="keyword">new</span> = (<span class="keyword">struct </span><a class="code" href="structObj__to__ip.html">Obj_to_ip</a>*) malloc(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structObj__to__ip.html">Obj_to_ip</a>));
+<a name="l00262"></a>00262         <span class="keywordflow">if</span>(<span class="keyword">new</span> == NULL)
+<a name="l00263"></a>00263                 <a class="code" href="main_8c.html#be0835e7acb76ea987ac80769302d90a">out_of_mem</a>();
+<a name="l00264"></a>00264         <span class="keyword">new</span>-&gt;id = <a class="code" href="structObj__to__ip.html#23759dec76c683ac720f937fea4e4d41">id</a>;
+<a name="l00265"></a>00265         <span class="keyword">new</span>-&gt;olsr_node = *<a class="code" href="structObj__to__ip.html#207d8f9a609e3e20b4cbd9a7976dcd18">olsr_node</a>;
+<a name="l00266"></a>00266         <a class="code" href="olsrs3d_8h.html#576c61914d53ad9035e74317dbb15903">move_lst_ptr</a>(&amp;<span class="keywordtype">id</span>);
+<a name="l00267"></a>00267         <span class="keyword">new</span>-&gt;prev = <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>;
+<a name="l00268"></a>00268         <span class="keyword">new</span>-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a> = <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a>;
+<a name="l00269"></a>00269         <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a>-&gt;<a class="code" href="structObj__to__ip.html#c41475dd4632807df16315bad4309333">prev</a> = <span class="keyword">new</span>;
+<a name="l00270"></a>00270         <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a> = <span class="keyword">new</span>;
+<a name="l00271"></a>00271         <span class="comment">/* printf("obj2ip: add object %d between %d .. %d ip %s to list\n",new-&gt;id,new-&gt;prev-&gt;id,new-&gt;next-&gt;id,new-&gt;olsr_node-&gt;ip); */</span>
+<a name="l00272"></a>00272 }
+</pre></div>
+<p>
+    </td>
+  </tr>
+</table>
+<a class="anchor" name="febf2594bdfe9ec411d0c04c9cd951b3"></a><!-- doxytag: member="process.c::lst_del" ref="febf2594bdfe9ec411d0c04c9cd951b3" args="(int id)" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">void lst_del           </td>
+          <td class="md" valign="top">(&nbsp;</td>
+          <td class="md" nowrap valign="top">int&nbsp;</td>
+          <td class="mdname1" valign="top" nowrap> <em>id</em>          </td>
+          <td class="md" valign="top">&nbsp;)&nbsp;</td>
+          <td class="md" nowrap></td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="process_8c-source.html#l00281">281</a> of file <a class="el" href="process_8c-source.html">process.c</a>.
+<p>
+References <a class="el" href="olsrs3d_8h-source.html#l00080">Obj_to_ip::id</a>, <a class="el" href="main_8c-source.html#l00047">List_ptr</a>, <a class="el" href="process_8c-source.html#l00303">move_lst_ptr()</a>, <a class="el" href="olsrs3d_8h-source.html#l00082">Obj_to_ip::next</a>, and <a class="el" href="olsrs3d_8h-source.html#l00083">Obj_to_ip::prev</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00186">handle_olsr_node()</a>.<div class="fragment"><pre class="fragment"><a name="l00281"></a>00281                      {
+<a name="l00282"></a>00282         <span class="keyword">struct </span><a class="code" href="structObj__to__ip.html">Obj_to_ip</a> *del;
+<a name="l00283"></a>00283         <a class="code" href="olsrs3d_8h.html#576c61914d53ad9035e74317dbb15903">move_lst_ptr</a>(&amp;<span class="keywordtype">id</span>);
+<a name="l00284"></a>00284         <span class="keywordflow">if</span>(<span class="keywordtype">id</span> != <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>-&gt;<a class="code" href="structObj__to__ip.html#23759dec76c683ac720f937fea4e4d41">id</a>)
+<a name="l00285"></a>00285         {
+<a name="l00286"></a>00286                 printf(<span class="stringliteral">"obj2ip: remove id %d failed move_lst_ptr return id %d\n"</span>,<span class="keywordtype">id</span>,<a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a>-&gt;<a class="code" href="structObj__to__ip.html#23759dec76c683ac720f937fea4e4d41">id</a>);
+<a name="l00287"></a>00287         } <span class="keywordflow">else</span> {
+<a name="l00288"></a>00288                 del = <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>;
+<a name="l00289"></a>00289                 <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a>-&gt;<a class="code" href="structObj__to__ip.html#c41475dd4632807df16315bad4309333">prev</a> = <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>-&gt;<a class="code" href="structObj__to__ip.html#c41475dd4632807df16315bad4309333">prev</a>;
+<a name="l00290"></a>00290                 <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>-&gt;<a class="code" href="structObj__to__ip.html#c41475dd4632807df16315bad4309333">prev</a>-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a> = <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a>;
+<a name="l00291"></a>00291                 <span class="comment">/* printf("obj2ip: remove object %d --&gt; %d &lt;-- %d ip %s from list\n",List_ptr-&gt;prev-&gt;id,del-&gt;id,List_ptr-&gt;next-&gt;id,del-&gt;olsr_node-&gt;ip); */</span>
+<a name="l00292"></a>00292                 free(del);
+<a name="l00293"></a>00293         }
+<a name="l00294"></a>00294 }
+</pre></div>
+<p>
+    </td>
+  </tr>
+</table>
+<a class="anchor" name="edfb2ae44af543946842187ced1cd47e"></a><!-- doxytag: member="process.c::lst_initialize" ref="edfb2ae44af543946842187ced1cd47e" args="()" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">void lst_initialize           </td>
+          <td class="md" valign="top">(&nbsp;</td>
+          <td class="mdname1" valign="top" nowrap>          </td>
+          <td class="md" valign="top">&nbsp;)&nbsp;</td>
+          <td class="md" nowrap></td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="process_8c-source.html#l00239">239</a> of file <a class="el" href="process_8c-source.html">process.c</a>.
+<p>
+References <a class="el" href="olsrs3d_8h-source.html#l00080">Obj_to_ip::id</a>, <a class="el" href="main_8c-source.html#l00047">List_ptr</a>, <a class="el" href="olsrs3d_8h-source.html#l00082">Obj_to_ip::next</a>, <a class="el" href="main_8c-source.html#l00047">Obj_to_ip_end</a>, <a class="el" href="main_8c-source.html#l00047">Obj_to_ip_head</a>, <a class="el" href="main_8c-source.html#l00094">out_of_mem()</a>, and <a class="el" href="olsrs3d_8h-source.html#l00083">Obj_to_ip::prev</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00804">main()</a>.<div class="fragment"><pre class="fragment"><a name="l00239"></a>00239                       {
+<a name="l00240"></a>00240         <a class="code" href="main_8c.html#9494e9e8cbdc4eceb86cb33ff0006785">Obj_to_ip_head</a> = (<span class="keyword">struct </span><a class="code" href="structObj__to__ip.html">Obj_to_ip</a>*) malloc(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structObj__to__ip.html">Obj_to_ip</a>));
+<a name="l00241"></a>00241         <a class="code" href="main_8c.html#236217b97f5fe65457d8b22c73c5073d">Obj_to_ip_end</a> = (<span class="keyword">struct </span>Obj_to_ip*) malloc(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> Obj_to_ip));
+<a name="l00242"></a>00242         <span class="keywordflow">if</span>(<a class="code" href="main_8c.html#9494e9e8cbdc4eceb86cb33ff0006785">Obj_to_ip_head</a> == NULL || <a class="code" href="main_8c.html#236217b97f5fe65457d8b22c73c5073d">Obj_to_ip_end</a> == NULL)
+<a name="l00243"></a>00243                 <a class="code" href="main_8c.html#be0835e7acb76ea987ac80769302d90a">out_of_mem</a>();
+<a name="l00244"></a>00244         <a class="code" href="main_8c.html#9494e9e8cbdc4eceb86cb33ff0006785">Obj_to_ip_head</a>-&gt;<a class="code" href="structObj__to__ip.html#23759dec76c683ac720f937fea4e4d41">id</a> = 0;
+<a name="l00245"></a>00245         <a class="code" href="main_8c.html#236217b97f5fe65457d8b22c73c5073d">Obj_to_ip_end</a>-&gt;<a class="code" href="structObj__to__ip.html#23759dec76c683ac720f937fea4e4d41">id</a> = 0;
+<a name="l00246"></a>00246         <a class="code" href="main_8c.html#9494e9e8cbdc4eceb86cb33ff0006785">Obj_to_ip_head</a>-&gt;<a class="code" href="structObj__to__ip.html#c41475dd4632807df16315bad4309333">prev</a> = <a class="code" href="main_8c.html#236217b97f5fe65457d8b22c73c5073d">Obj_to_ip_end</a>-&gt;<a class="code" href="structObj__to__ip.html#c41475dd4632807df16315bad4309333">prev</a> = <a class="code" href="main_8c.html#9494e9e8cbdc4eceb86cb33ff0006785">Obj_to_ip_head</a>;
+<a name="l00247"></a>00247         <a class="code" href="main_8c.html#9494e9e8cbdc4eceb86cb33ff0006785">Obj_to_ip_head</a>-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a> = <a class="code" href="main_8c.html#236217b97f5fe65457d8b22c73c5073d">Obj_to_ip_end</a>-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a> = <a class="code" href="main_8c.html#236217b97f5fe65457d8b22c73c5073d">Obj_to_ip_end</a>;
+<a name="l00248"></a>00248         <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a> = <a class="code" href="main_8c.html#9494e9e8cbdc4eceb86cb33ff0006785">Obj_to_ip_head</a>;
+<a name="l00249"></a>00249 }
+</pre></div>
+<p>
+    </td>
+  </tr>
+</table>
+<a class="anchor" name="a015f713ca02d8b76a52175b4128d3e8"></a><!-- doxytag: member="process.c::lst_out" ref="a015f713ca02d8b76a52175b4128d3e8" args="()" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">void lst_out           </td>
+          <td class="md" valign="top">(&nbsp;</td>
+          <td class="mdname1" valign="top" nowrap>          </td>
+          <td class="md" valign="top">&nbsp;)&nbsp;</td>
+          <td class="md" nowrap></td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="process_8c-source.html#l00359">359</a> of file <a class="el" href="process_8c-source.html">process.c</a>.
+<p>
+References <a class="el" href="olsrs3d_8h-source.html#l00080">Obj_to_ip::id</a>, <a class="el" href="olsrs3d_8h-source.html#l00082">Obj_to_ip::next</a>, and <a class="el" href="main_8c-source.html#l00047">Obj_to_ip_head</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00690">keypress()</a>.<div class="fragment"><pre class="fragment"><a name="l00359"></a>00359                {
+<a name="l00360"></a>00360         <span class="keyword">struct </span><a class="code" href="structObj__to__ip.html">Obj_to_ip</a> *ptr;
+<a name="l00361"></a>00361         ptr = <a class="code" href="main_8c.html#9494e9e8cbdc4eceb86cb33ff0006785">Obj_to_ip_head</a>;
+<a name="l00362"></a>00362         <span class="keywordflow">while</span>(ptr != ptr-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a>) {
+<a name="l00363"></a>00363                 printf(<span class="stringliteral">"id-&gt; %d\n"</span>,ptr-&gt;<a class="code" href="structObj__to__ip.html#23759dec76c683ac720f937fea4e4d41">id</a>);
+<a name="l00364"></a>00364                 ptr = ptr-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a>;
+<a name="l00365"></a>00365         }
+<a name="l00366"></a>00366 }
+</pre></div>
+<p>
+    </td>
+  </tr>
+</table>
+<a class="anchor" name="b74d5229fcc3a39626609ac9f12510dd"></a><!-- doxytag: member="process.c::lst_search" ref="b74d5229fcc3a39626609ac9f12510dd" args="(int id)" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">struct <a class="el" href="structolsr__node.html">olsr_node</a>** lst_search           </td>
+          <td class="md" valign="top">(&nbsp;</td>
+          <td class="md" nowrap valign="top">int&nbsp;</td>
+          <td class="mdname1" valign="top" nowrap> <em>id</em>          </td>
+          <td class="md" valign="top">&nbsp;)&nbsp;</td>
+          <td class="md" nowrap></td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="process_8c-source.html#l00349">349</a> of file <a class="el" href="process_8c-source.html">process.c</a>.
+<p>
+References <a class="el" href="main_8c-source.html#l00047">List_ptr</a>, <a class="el" href="process_8c-source.html#l00303">move_lst_ptr()</a>, and <a class="el" href="olsrs3d_8h-source.html#l00081">Obj_to_ip::olsr_node</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00746">object_click()</a>.<div class="fragment"><pre class="fragment"><a name="l00349"></a>00349                                       {
+<a name="l00350"></a>00350         <a class="code" href="olsrs3d_8h.html#576c61914d53ad9035e74317dbb15903">move_lst_ptr</a>(&amp;<span class="keywordtype">id</span>);
+<a name="l00351"></a>00351         <span class="comment">/* TODO: return NULL when no node found */</span>
+<a name="l00352"></a>00352         <span class="comment">/* if(id != List_ptr-&gt;id) */</span>
+<a name="l00353"></a>00353                 <span class="comment">/* printf("obj2ip: search id....id not found\n"); */</span>
+<a name="l00354"></a>00354         <span class="comment">/* else */</span>
+<a name="l00355"></a>00355                 <span class="comment">/* printf("obj2ip: search found objekt_id=%d objekt_ip=%s\n",List_ptr-&gt;id,List_ptr-&gt;olsr_node-&gt;ip); */</span>
+<a name="l00356"></a>00356         <span class="keywordflow">return</span>(&amp;<a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>-&gt;<a class="code" href="structObj__to__ip.html#207d8f9a609e3e20b4cbd9a7976dcd18">olsr_node</a>);
+<a name="l00357"></a>00357 }
+</pre></div>
+<p>
+    </td>
+  </tr>
+</table>
+<a class="anchor" name="576c61914d53ad9035e74317dbb15903"></a><!-- doxytag: member="process.c::move_lst_ptr" ref="576c61914d53ad9035e74317dbb15903" args="(int *id)" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">void move_lst_ptr           </td>
+          <td class="md" valign="top">(&nbsp;</td>
+          <td class="md" nowrap valign="top">int *&nbsp;</td>
+          <td class="mdname1" valign="top" nowrap> <em>id</em>          </td>
+          <td class="md" valign="top">&nbsp;)&nbsp;</td>
+          <td class="md" nowrap></td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="process_8c-source.html#l00303">303</a> of file <a class="el" href="process_8c-source.html">process.c</a>.
+<p>
+References <a class="el" href="olsrs3d_8h-source.html#l00080">Obj_to_ip::id</a>, <a class="el" href="main_8c-source.html#l00047">List_ptr</a>, <a class="el" href="olsrs3d_8h-source.html#l00082">Obj_to_ip::next</a>, <a class="el" href="main_8c-source.html#l00047">Obj_to_ip_end</a>, <a class="el" href="main_8c-source.html#l00047">Obj_to_ip_head</a>, and <a class="el" href="olsrs3d_8h-source.html#l00083">Obj_to_ip::prev</a>.
+<p>
+Referenced by <a class="el" href="process_8c-source.html#l00259">lst_add()</a>, <a class="el" href="process_8c-source.html#l00281">lst_del()</a>, and <a class="el" href="process_8c-source.html#l00349">lst_search()</a>.<div class="fragment"><pre class="fragment"><a name="l00303"></a>00303                            {
+<a name="l00304"></a>00304         <span class="comment">/* printf("obj2ip: move for %d\n",*id); */</span>
+<a name="l00305"></a>00305         <span class="comment">/* head to point at end or id lass then first element in linked list*/</span>
+<a name="l00306"></a>00306         <span class="keywordflow">if</span>(<a class="code" href="main_8c.html#9494e9e8cbdc4eceb86cb33ff0006785">Obj_to_ip_head</a>-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a> == <a class="code" href="main_8c.html#9494e9e8cbdc4eceb86cb33ff0006785">Obj_to_ip_head</a> || *id &lt; Obj_to_ip_head-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a>-&gt;<a class="code" href="structObj__to__ip.html#23759dec76c683ac720f937fea4e4d41">id</a>)
+<a name="l00307"></a>00307                 <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a> = <a class="code" href="main_8c.html#9494e9e8cbdc4eceb86cb33ff0006785">Obj_to_ip_head</a>;
+<a name="l00308"></a>00308         <span class="comment">/* id is greather then last element in linked list */</span>
+<a name="l00309"></a>00309         <span class="keywordflow">else</span> <span class="keywordflow">if</span>(*<span class="keywordtype">id</span> &gt; <a class="code" href="main_8c.html#236217b97f5fe65457d8b22c73c5073d">Obj_to_ip_end</a>-&gt;<a class="code" href="structObj__to__ip.html#c41475dd4632807df16315bad4309333">prev</a>-&gt;<a class="code" href="structObj__to__ip.html#23759dec76c683ac720f937fea4e4d41">id</a>)
+<a name="l00310"></a>00310                 <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a> = <a class="code" href="main_8c.html#236217b97f5fe65457d8b22c73c5073d">Obj_to_ip_end</a>-&gt;<a class="code" href="structObj__to__ip.html#c41475dd4632807df16315bad4309333">prev</a>;
+<a name="l00311"></a>00311         <span class="keywordflow">else</span> {
+<a name="l00312"></a>00312                 <span class="comment">/* printf("obj2ip: ok i search deeper ;-) for id=%d\n",*id); */</span>
+<a name="l00313"></a>00313                 <span class="keywordflow">if</span>((*<span class="keywordtype">id</span> - (<span class="keywordtype">int</span>) <a class="code" href="main_8c.html#9494e9e8cbdc4eceb86cb33ff0006785">Obj_to_ip_head</a>-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a>-&gt;<a class="code" href="structObj__to__ip.html#23759dec76c683ac720f937fea4e4d41">id</a>) &lt;= ((<span class="keywordtype">int</span>)(<a class="code" href="main_8c.html#236217b97f5fe65457d8b22c73c5073d">Obj_to_ip_end</a>-&gt;<a class="code" href="structObj__to__ip.html#c41475dd4632807df16315bad4309333">prev</a>-&gt;<a class="code" href="structObj__to__ip.html#23759dec76c683ac720f937fea4e4d41">id</a>)-*<span class="keywordtype">id</span>)) {
+<a name="l00314"></a>00314                         <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a> = <a class="code" href="main_8c.html#9494e9e8cbdc4eceb86cb33ff0006785">Obj_to_ip_head</a>;
+<a name="l00315"></a>00315                         <span class="comment">/* printf("obj2ip: start at head id %d - %d &lt;= %d - %d \n",*id,Obj_to_ip_head-&gt;next-&gt;id,Obj_to_ip_end-&gt;prev-&gt;id,*id); */</span>
+<a name="l00316"></a>00316                         <span class="keywordflow">while</span>(*<span class="keywordtype">id</span> &gt;= <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a>-&gt;<a class="code" href="structObj__to__ip.html#23759dec76c683ac720f937fea4e4d41">id</a>) {
+<a name="l00317"></a>00317                                 <span class="comment">/* printf("obj2ip: %d &gt; %d move to ",*id,List_ptr-&gt;id); */</span>
+<a name="l00318"></a>00318                                 <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a> = <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>-&gt;<a class="code" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a>;
+<a name="l00319"></a>00319                                 <span class="comment">/* printf("%d\n",List_ptr-&gt;id); */</span>
+<a name="l00320"></a>00320                         }
+<a name="l00321"></a>00321                 } <span class="keywordflow">else</span> {
+<a name="l00322"></a>00322                         <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a> = <a class="code" href="main_8c.html#236217b97f5fe65457d8b22c73c5073d">Obj_to_ip_end</a>;
+<a name="l00323"></a>00323                         <span class="comment">/* printf("obj2ip: start at end id %d - %d &gt; %d - %d \n",*id,Obj_to_ip_head-&gt;next-&gt;id,Obj_to_ip_end-&gt;prev-&gt;id,*id);  */</span>
+<a name="l00324"></a>00324                         <span class="comment">/*  do List_ptr = List_ptr-&gt;prev; while(*id &gt; List_ptr-&gt;prev-&gt;id); */</span>
+<a name="l00325"></a>00325                         <span class="keywordflow">while</span>(*id &lt; List_ptr-&gt;<a class="code" href="structObj__to__ip.html#c41475dd4632807df16315bad4309333">prev</a>-&gt;<a class="code" href="structObj__to__ip.html#23759dec76c683ac720f937fea4e4d41">id</a>) {
+<a name="l00326"></a>00326                                 <span class="comment">/* printf("obj2ip: %d &lt; %d move to ",*id,List_ptr-&gt;id); */</span>
+<a name="l00327"></a>00327                                 <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a> = <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>-&gt;<a class="code" href="structObj__to__ip.html#c41475dd4632807df16315bad4309333">prev</a>;
+<a name="l00328"></a>00328                                 <span class="comment">/* printf("%d\n",List_ptr-&gt;id); */</span>
+<a name="l00329"></a>00329                         }
+<a name="l00330"></a>00330                         <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a> = <a class="code" href="main_8c.html#6a8ff2c3957f5f0ab7dcafcd72b8bd57">List_ptr</a>-&gt;<a class="code" href="structObj__to__ip.html#c41475dd4632807df16315bad4309333">prev</a>;
+<a name="l00331"></a>00331                 }
+<a name="l00332"></a>00332                 <span class="comment">/* printf("obj2ip: found id to insert between %d--&gt; .. &lt;--%d to search/delete %d--&gt; .. &lt;--%d\n",List_ptr-&gt;id,List_ptr-&gt;next-&gt;next-&gt;id,List_ptr-&gt;prev-&gt;id,List_ptr-&gt;next-&gt;id); */</span>
+<a name="l00333"></a>00333         }
+<a name="l00334"></a>00334 }
+</pre></div>
+<p>
+    </td>
+  </tr>
+</table>
+<a class="anchor" name="6b4e9b6718b671f6330c2e501c60d3c1"></a><!-- doxytag: member="process.c::process_main" ref="6b4e9b6718b671f6330c2e501c60d3c1" args="()" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">int process_main           </td>
+          <td class="md" valign="top">(&nbsp;</td>
+          <td class="mdname1" valign="top" nowrap>          </td>
+          <td class="md" valign="top">&nbsp;)&nbsp;</td>
+          <td class="md" nowrap></td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="process_8c-source.html#l00368">368</a> of file <a class="el" href="process_8c-source.html">process.c</a>.
+<p>
+References <a class="el" href="process_8c-source.html#l00048">add_olsr_con()</a>, <a class="el" href="main_8c-source.html#l00041">Debug</a>, <a class="el" href="process_8c-source.html#l00155">get_olsr_node()</a>, <a class="el" href="olsrs3d_8h-source.html#l00064">olsr_node::ip</a>, <a class="el" href="process_8c-source.html#l00034">lbuf</a>, <a class="el" href="olsrs3d_8h-source.html#l00028">NAMEMAX</a>, <a class="el" href="olsrs3d_8h-source.html#l00065">olsr_node::node_type</a>, <a class="el" href="olsrs3d_8h-source.html#l00066">olsr_node::node_type_modified</a>, <a class="el" href="main_8c-source.html#l00046">Olsr_root</a>, and <a class="el" href="olsrs3d_8h-source.html#l00068">olsr_node::visible</a>.
+<p>
+Referenced by <a class="el" href="net_8c-source.html#l00074">net_main()</a>.<div class="fragment"><pre class="fragment"><a name="l00368"></a>00368                    {
+<a name="l00369"></a>00369 
+<a name="l00370"></a>00370         <span class="keywordtype">int</span> dn;
+<a name="l00371"></a>00371         <span class="keywordtype">float</span> f;
+<a name="l00372"></a>00372         <span class="keywordtype">char</span> *lbuf_ptr, *last_cr_ptr, *con_from, *con_from_end, *con_to, *con_to_end, *etx, *etx_end;
+<a name="l00373"></a>00373         <span class="keyword">struct </span><a class="code" href="structolsr__node.html">olsr_node</a> *olsr_node1;   <span class="comment">/* pointer to olsr nodes */</span>
+<a name="l00374"></a>00374         <span class="keyword">struct </span><a class="code" href="structolsr__node.html">olsr_node</a> *olsr_node2;
+<a name="l00375"></a>00375 
+<a name="l00376"></a>00376         lbuf_ptr = <a class="code" href="olsrs3d_8h.html#00f1cd38b187535569d0354f2506fb74">lbuf</a>;
+<a name="l00377"></a>00377         last_cr_ptr = NULL;
+<a name="l00378"></a>00378 
+<a name="l00379"></a>00379         con_from = con_from_end = con_to = con_to_end = etx = etx_end = NULL;
+<a name="l00380"></a>00380         dn = 0;
+<a name="l00381"></a>00381 
+<a name="l00382"></a>00382         <span class="keywordflow">while</span> ( (*lbuf_ptr) != <span class="charliteral">'\0'</span> ) {
+<a name="l00383"></a>00383 
+<a name="l00384"></a>00384                 <span class="comment">/* printf( "%c",(*lbuf_ptr) ); */</span>
+<a name="l00385"></a>00385 
+<a name="l00386"></a>00386                 <span class="keywordflow">if</span> ( (*lbuf_ptr) == <span class="charliteral">'\n'</span> ) {
+<a name="l00387"></a>00387 
+<a name="l00388"></a>00388                         last_cr_ptr = lbuf_ptr;
+<a name="l00389"></a>00389                         con_from = con_from_end = con_to = con_to_end = etx = etx_end = NULL;
+<a name="l00390"></a>00390                         dn = 0;
+<a name="l00391"></a>00391 
+<a name="l00392"></a>00392                 }
+<a name="l00393"></a>00393 
+<a name="l00394"></a>00394                 <span class="keywordflow">if</span> ( (*lbuf_ptr) == <span class="charliteral">'"'</span> ) {
+<a name="l00395"></a>00395 
+<a name="l00396"></a>00396                         <span class="keywordflow">switch</span> ( dn ) {
+<a name="l00397"></a>00397 
+<a name="l00398"></a>00398                                 <span class="keywordflow">case</span> 0:
+<a name="l00399"></a>00399                                         con_from = lbuf_ptr + 1;
+<a name="l00400"></a>00400                                         <span class="keywordflow">break</span>;
+<a name="l00401"></a>00401                                 <span class="keywordflow">case</span> 1:
+<a name="l00402"></a>00402                                         con_from_end = lbuf_ptr;
+<a name="l00403"></a>00403                                         <span class="keywordflow">break</span>;
+<a name="l00404"></a>00404                                 <span class="keywordflow">case</span> 2:
+<a name="l00405"></a>00405                                         con_to = lbuf_ptr + 1;
+<a name="l00406"></a>00406                                         <span class="keywordflow">break</span>;
+<a name="l00407"></a>00407                                 <span class="keywordflow">case</span> 3:
+<a name="l00408"></a>00408                                         con_to_end = lbuf_ptr;
+<a name="l00409"></a>00409                                         <span class="keywordflow">break</span>;
+<a name="l00410"></a>00410                                 <span class="keywordflow">case</span> 4:
+<a name="l00411"></a>00411                                         etx = lbuf_ptr + 1;
+<a name="l00412"></a>00412                                         <span class="keywordflow">break</span>;
+<a name="l00413"></a>00413                                 <span class="keywordflow">case</span> 5:
+<a name="l00414"></a>00414                                         etx_end = lbuf_ptr;
+<a name="l00415"></a>00415                                         <span class="keywordflow">break</span>;
+<a name="l00416"></a>00416 
+<a name="l00417"></a>00417                         }
+<a name="l00418"></a>00418 
+<a name="l00419"></a>00419                         <span class="keywordflow">if</span> ( ++dn == 6 ) {
+<a name="l00420"></a>00420 
+<a name="l00421"></a>00421                                 <span class="comment">/* terminate strings - but not before 6 times '"' */</span>
+<a name="l00422"></a>00422                                 (*con_from_end) = (*con_to_end) = (*etx_end) = <span class="charliteral">'\0'</span>;
+<a name="l00423"></a>00423 
+<a name="l00424"></a>00424                                 <span class="comment">/* printf( "con_from: %s, con_to: %s, etx: %s\n", con_from, con_to, etx ); */</span>
+<a name="l00425"></a>00425 
+<a name="l00426"></a>00426                                 <span class="comment">/* announced network via HNA */</span>
+<a name="l00427"></a>00427                                 <span class="keywordflow">if</span> ( strncmp( etx, <span class="stringliteral">"HNA"</span>, <a class="code" href="olsrs3d_8h.html#f8c0c53607c56b59e883cb0894e5cde7">NAMEMAX</a> ) == 0 ) {
+<a name="l00428"></a>00428 
+<a name="l00429"></a>00429                                         <span class="comment">/* connection to internet */</span>
+<a name="l00430"></a>00430                                         <span class="keywordflow">if</span> ( strncmp( con_to, <span class="stringliteral">"0.0.0.0/0.0.0.0"</span>, <a class="code" href="olsrs3d_8h.html#f8c0c53607c56b59e883cb0894e5cde7">NAMEMAX</a> ) == 0 ) {
+<a name="l00431"></a>00431 
+<a name="l00432"></a>00432                                                 olsr_node1 = <a class="code" href="process_8c.html#7ba929b35f03f5921272b4e5e821ade2">get_olsr_node</a>( &amp;<a class="code" href="main_8c.html#c5c5c6846587092d0c23b58b558e680c">Olsr_root</a>, con_from );
+<a name="l00433"></a>00433 
+<a name="l00434"></a>00434                                                 <span class="keywordflow">if</span> ( olsr_node1-&gt;<a class="code" href="structolsr__node.html#c89186513811183436bcd79cdb6d7b4d">node_type</a> != 1 ) {
+<a name="l00435"></a>00435 
+<a name="l00436"></a>00436                                                         olsr_node1-&gt;<a class="code" href="structolsr__node.html#c89186513811183436bcd79cdb6d7b4d">node_type</a> = 1;
+<a name="l00437"></a>00437                                                         olsr_node1-&gt;<a class="code" href="structolsr__node.html#4517a87e4fdbdb58f678743b5684088b">node_type_modified</a> = 1;
+<a name="l00438"></a>00438                                                         <span class="keywordflow">if</span> ( <a class="code" href="main_8c.html#923774364cedbc16baa0bc05e9be136c">Debug</a> ) printf( <span class="stringliteral">"new internet: %s\n"</span>, olsr_node1-&gt;<a class="code" href="structolsr__node.html#59690d75faff5c149faecacb4f4d2a57">ip</a> );
+<a name="l00439"></a>00439 
+<a name="l00440"></a>00440                                                 }
+<a name="l00441"></a>00441 
+<a name="l00442"></a>00442                                         <span class="comment">/* normal HNA */</span>
+<a name="l00443"></a>00443                                         } <span class="keywordflow">else</span> {
+<a name="l00444"></a>00444 
+<a name="l00445"></a>00445                                                 olsr_node1 = <a class="code" href="process_8c.html#7ba929b35f03f5921272b4e5e821ade2">get_olsr_node</a>( &amp;<a class="code" href="main_8c.html#c5c5c6846587092d0c23b58b558e680c">Olsr_root</a>, con_from );
+<a name="l00446"></a>00446                                                 olsr_node2 = <a class="code" href="process_8c.html#7ba929b35f03f5921272b4e5e821ade2">get_olsr_node</a>( &amp;<a class="code" href="main_8c.html#c5c5c6846587092d0c23b58b558e680c">Olsr_root</a>, con_to );
+<a name="l00447"></a>00447 
+<a name="l00448"></a>00448                                                 <span class="keywordflow">if</span> ( olsr_node2-&gt;<a class="code" href="structolsr__node.html#c89186513811183436bcd79cdb6d7b4d">node_type</a> != 2 ) {
+<a name="l00449"></a>00449 
+<a name="l00450"></a>00450                                                         olsr_node2-&gt;<a class="code" href="structolsr__node.html#c89186513811183436bcd79cdb6d7b4d">node_type</a> = 2;
+<a name="l00451"></a>00451                                                         olsr_node2-&gt;<a class="code" href="structolsr__node.html#4517a87e4fdbdb58f678743b5684088b">node_type_modified</a> = 1;
+<a name="l00452"></a>00452                                                         <span class="keywordflow">if</span> ( <a class="code" href="main_8c.html#923774364cedbc16baa0bc05e9be136c">Debug</a> ) printf( <span class="stringliteral">"new hna network: %s\n"</span>, olsr_node2-&gt;<a class="code" href="structolsr__node.html#59690d75faff5c149faecacb4f4d2a57">ip</a> );
+<a name="l00453"></a>00453 
+<a name="l00454"></a>00454                                                 }
+<a name="l00455"></a>00455                                                 <span class="keywordflow">if</span> ( olsr_node1-&gt;<a class="code" href="structolsr__node.html#f19d37e4aa5263be9a1741de24686664">visible</a> &amp;&amp; olsr_node2-&gt;<a class="code" href="structolsr__node.html#f19d37e4aa5263be9a1741de24686664">visible</a> )
+<a name="l00456"></a>00456                                                         <a class="code" href="process_8c.html#4c780ee64b12fa5531a56edfb5ffcc00">add_olsr_con</a>( olsr_node1, olsr_node2, -1000.00 );
+<a name="l00457"></a>00457 
+<a name="l00458"></a>00458                                         }
+<a name="l00459"></a>00459 
+<a name="l00460"></a>00460                                 <span class="comment">/* normal node */</span>
+<a name="l00461"></a>00461                                 } <span class="keywordflow">else</span> {
+<a name="l00462"></a>00462 
+<a name="l00463"></a>00463                                         olsr_node1 = <a class="code" href="process_8c.html#7ba929b35f03f5921272b4e5e821ade2">get_olsr_node</a>( &amp;<a class="code" href="main_8c.html#c5c5c6846587092d0c23b58b558e680c">Olsr_root</a>, con_from );
+<a name="l00464"></a>00464                                         olsr_node2 = <a class="code" href="process_8c.html#7ba929b35f03f5921272b4e5e821ade2">get_olsr_node</a>( &amp;<a class="code" href="main_8c.html#c5c5c6846587092d0c23b58b558e680c">Olsr_root</a>, con_to );
+<a name="l00465"></a>00465                                         f = strtod(etx,NULL);
+<a name="l00466"></a>00466                                         <span class="keywordflow">if</span> ( f &lt; 1 )
+<a name="l00467"></a>00467                                                 f = 999;
+<a name="l00468"></a>00468                                         <a class="code" href="process_8c.html#4c780ee64b12fa5531a56edfb5ffcc00">add_olsr_con</a>( olsr_node1, olsr_node2, f );
+<a name="l00469"></a>00469                                 }
+<a name="l00470"></a>00470 
+<a name="l00471"></a>00471                                 con_from = con_from_end = con_to = con_to_end = etx = etx_end = NULL;
+<a name="l00472"></a>00472                                 dn = 0;
+<a name="l00473"></a>00473                                 last_cr_ptr = lbuf_ptr;
+<a name="l00474"></a>00474 
+<a name="l00475"></a>00475                         }
+<a name="l00476"></a>00476 
+<a name="l00477"></a>00477                 }
+<a name="l00478"></a>00478 
+<a name="l00479"></a>00479                 lbuf_ptr++;
+<a name="l00480"></a>00480 
+<a name="l00481"></a>00481         }
+<a name="l00482"></a>00482 
+<a name="l00483"></a>00483         <span class="keywordflow">if</span> ( last_cr_ptr != NULL ) memmove( <a class="code" href="olsrs3d_8h.html#00f1cd38b187535569d0354f2506fb74">lbuf</a>, last_cr_ptr + 1, strlen( last_cr_ptr ) );
+<a name="l00484"></a>00484 
+<a name="l00485"></a>00485         <span class="keywordflow">return</span>(0);
+<a name="l00486"></a>00486 
+<a name="l00487"></a>00487 }
+</pre></div>
+<p>
+    </td>
+  </tr>
+</table>
+<hr><h2>Variable Documentation</h2>
+<a class="anchor" name="00f1cd38b187535569d0354f2506fb74"></a><!-- doxytag: member="process.c::lbuf" ref="00f1cd38b187535569d0354f2506fb74" args="[MAXLINESIZE]" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">char <a class="el" href="process_8c.html#00f1cd38b187535569d0354f2506fb74">lbuf</a>[MAXLINESIZE]          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="process_8c-source.html#l00034">34</a> of file <a class="el" href="process_8c-source.html">process.c</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00804">main()</a>, <a class="el" href="net_8c-source.html#l00074">net_main()</a>, and <a class="el" href="process_8c-source.html#l00368">process_main()</a>.    </td>
+  </tr>
+</table>
+<hr size="1"><address style="align: right;"><small>Generated on Sun Mar 19 13:28:20 2006 for olsrs3d by&nbsp;
+<a href="http://www.doxygen.org/index.html">
+<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6 </small></address>
+</body>
+</html>

Added: trunk/apps/olsrs3d/doxygen/html/structObj__to__ip-members.html
===================================================================
--- trunk/apps/olsrs3d/doxygen/html/structObj__to__ip-members.html	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/html/structObj__to__ip-members.html	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,31 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
+<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
+<title>olsrs3d: Member List</title>
+<link href="doxygen.css" rel="stylesheet" type="text/css">
+<link href="tabs.css" rel="stylesheet" type="text/css">
+</head><body>
+<!-- Generated by Doxygen 1.4.6 -->
+<div class="tabs">
+  <ul>
+    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
+    <li id="current"><a href="classes.html"><span>Classes</span></a></li>
+    <li><a href="files.html"><span>Files</span></a></li>
+    <li><a href="dirs.html"><span>Directories</span></a></li>
+  </ul></div>
+<div class="tabs">
+  <ul>
+    <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
+    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
+    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
+    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
+  </ul></div>
+<h1>Obj_to_ip Member List</h1>This is the complete list of members for <a class="el" href="structObj__to__ip.html">Obj_to_ip</a>, including all inherited members.<p><table>
+  <tr class="memlist"><td><a class="el" href="structObj__to__ip.html#23759dec76c683ac720f937fea4e4d41">id</a></td><td><a class="el" href="structObj__to__ip.html">Obj_to_ip</a></td><td></td></tr>
+  <tr class="memlist"><td><a class="el" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a></td><td><a class="el" href="structObj__to__ip.html">Obj_to_ip</a></td><td></td></tr>
+  <tr class="memlist"><td><a class="el" href="structObj__to__ip.html#207d8f9a609e3e20b4cbd9a7976dcd18">olsr_node</a></td><td><a class="el" href="structObj__to__ip.html">Obj_to_ip</a></td><td></td></tr>
+  <tr class="memlist"><td><a class="el" href="structObj__to__ip.html#c41475dd4632807df16315bad4309333">prev</a></td><td><a class="el" href="structObj__to__ip.html">Obj_to_ip</a></td><td></td></tr>
+</table><hr size="1"><address style="align: right;"><small>Generated on Sun Mar 19 13:28:20 2006 for olsrs3d by&nbsp;
+<a href="http://www.doxygen.org/index.html">
+<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6 </small></address>
+</body>
+</html>

Added: trunk/apps/olsrs3d/doxygen/html/structObj__to__ip.html
===================================================================
--- trunk/apps/olsrs3d/doxygen/html/structObj__to__ip.html	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/html/structObj__to__ip.html	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,156 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
+<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
+<title>olsrs3d: Obj_to_ip Struct Reference</title>
+<link href="doxygen.css" rel="stylesheet" type="text/css">
+<link href="tabs.css" rel="stylesheet" type="text/css">
+</head><body>
+<!-- Generated by Doxygen 1.4.6 -->
+<div class="tabs">
+  <ul>
+    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
+    <li id="current"><a href="classes.html"><span>Classes</span></a></li>
+    <li><a href="files.html"><span>Files</span></a></li>
+    <li><a href="dirs.html"><span>Directories</span></a></li>
+  </ul></div>
+<div class="tabs">
+  <ul>
+    <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
+    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
+    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
+    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
+  </ul></div>
+<h1>Obj_to_ip Struct Reference</h1><!-- doxytag: class="Obj_to_ip" --><code>#include &lt;<a class="el" href="olsrs3d_8h-source.html">olsrs3d.h</a>&gt;</code>
+<p>
+<a href="structObj__to__ip-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
+<tr><td></td></tr>
+<tr><td colspan="2"><br><h2>Public Attributes</h2></td></tr>
+<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structObj__to__ip.html#23759dec76c683ac720f937fea4e4d41">id</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structObj__to__ip.html">Obj_to_ip</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">next</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structolsr__node.html">olsr_node</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structObj__to__ip.html#207d8f9a609e3e20b4cbd9a7976dcd18">olsr_node</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structObj__to__ip.html">Obj_to_ip</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structObj__to__ip.html#c41475dd4632807df16315bad4309333">prev</a></td></tr>
+
+</table>
+<hr><a name="_details"></a><h2>Detailed Description</h2>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="olsrs3d_8h-source.html#l00079">79</a> of file <a class="el" href="olsrs3d_8h-source.html">olsrs3d.h</a>.<hr><h2>Member Data Documentation</h2>
+<a class="anchor" name="23759dec76c683ac720f937fea4e4d41"></a><!-- doxytag: member="Obj_to_ip::id" ref="23759dec76c683ac720f937fea4e4d41" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">int <a class="el" href="structObj__to__ip.html#23759dec76c683ac720f937fea4e4d41">Obj_to_ip::id</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="olsrs3d_8h-source.html#l00080">80</a> of file <a class="el" href="olsrs3d_8h-source.html">olsrs3d.h</a>.
+<p>
+Referenced by <a class="el" href="process_8c-source.html#l00281">lst_del()</a>, <a class="el" href="process_8c-source.html#l00239">lst_initialize()</a>, <a class="el" href="process_8c-source.html#l00359">lst_out()</a>, and <a class="el" href="process_8c-source.html#l00303">move_lst_ptr()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="da076aa87c753db90520204360bf326a"></a><!-- doxytag: member="Obj_to_ip::next" ref="da076aa87c753db90520204360bf326a" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">struct <a class="el" href="structObj__to__ip.html">Obj_to_ip</a>* <a class="el" href="structObj__to__ip.html#da076aa87c753db90520204360bf326a">Obj_to_ip::next</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="olsrs3d_8h-source.html#l00082">82</a> of file <a class="el" href="olsrs3d_8h-source.html">olsrs3d.h</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00186">handle_olsr_node()</a>, <a class="el" href="process_8c-source.html#l00259">lst_add()</a>, <a class="el" href="process_8c-source.html#l00281">lst_del()</a>, <a class="el" href="process_8c-source.html#l00239">lst_initialize()</a>, <a class="el" href="process_8c-source.html#l00359">lst_out()</a>, and <a class="el" href="process_8c-source.html#l00303">move_lst_ptr()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="207d8f9a609e3e20b4cbd9a7976dcd18"></a><!-- doxytag: member="Obj_to_ip::olsr_node" ref="207d8f9a609e3e20b4cbd9a7976dcd18" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">struct <a class="el" href="structolsr__node.html">olsr_node</a>* <a class="el" href="structObj__to__ip.html#207d8f9a609e3e20b4cbd9a7976dcd18">Obj_to_ip::olsr_node</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="olsrs3d_8h-source.html#l00081">81</a> of file <a class="el" href="olsrs3d_8h-source.html">olsrs3d.h</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00186">handle_olsr_node()</a>, <a class="el" href="process_8c-source.html#l00259">lst_add()</a>, and <a class="el" href="process_8c-source.html#l00349">lst_search()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="c41475dd4632807df16315bad4309333"></a><!-- doxytag: member="Obj_to_ip::prev" ref="c41475dd4632807df16315bad4309333" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">struct <a class="el" href="structObj__to__ip.html">Obj_to_ip</a>* <a class="el" href="structObj__to__ip.html#c41475dd4632807df16315bad4309333">Obj_to_ip::prev</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="olsrs3d_8h-source.html#l00083">83</a> of file <a class="el" href="olsrs3d_8h-source.html">olsrs3d.h</a>.
+<p>
+Referenced by <a class="el" href="process_8c-source.html#l00259">lst_add()</a>, <a class="el" href="process_8c-source.html#l00281">lst_del()</a>, <a class="el" href="process_8c-source.html#l00239">lst_initialize()</a>, and <a class="el" href="process_8c-source.html#l00303">move_lst_ptr()</a>.    </td>
+  </tr>
+</table>
+<hr>The documentation for this struct was generated from the following file:<ul>
+<li>s3d/apps/olsrs3d/<a class="el" href="olsrs3d_8h-source.html">olsrs3d.h</a></ul>
+<hr size="1"><address style="align: right;"><small>Generated on Sun Mar 19 13:28:20 2006 for olsrs3d by&nbsp;
+<a href="http://www.doxygen.org/index.html">
+<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6 </small></address>
+</body>
+</html>

Added: trunk/apps/olsrs3d/doxygen/html/structolsr__con-members.html
===================================================================
--- trunk/apps/olsrs3d/doxygen/html/structolsr__con-members.html	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/html/structolsr__con-members.html	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,36 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
+<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
+<title>olsrs3d: Member List</title>
+<link href="doxygen.css" rel="stylesheet" type="text/css">
+<link href="tabs.css" rel="stylesheet" type="text/css">
+</head><body>
+<!-- Generated by Doxygen 1.4.6 -->
+<div class="tabs">
+  <ul>
+    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
+    <li id="current"><a href="classes.html"><span>Classes</span></a></li>
+    <li><a href="files.html"><span>Files</span></a></li>
+    <li><a href="dirs.html"><span>Directories</span></a></li>
+  </ul></div>
+<div class="tabs">
+  <ul>
+    <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
+    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
+    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
+    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
+  </ul></div>
+<h1>olsr_con Member List</h1>This is the complete list of members for <a class="el" href="structolsr__con.html">olsr_con</a>, including all inherited members.<p><table>
+  <tr class="memlist"><td><a class="el" href="structolsr__con.html#26a11a87df79af8e59e9f5048937b0c1">color</a></td><td><a class="el" href="structolsr__con.html">olsr_con</a></td><td></td></tr>
+  <tr class="memlist"><td><a class="el" href="structolsr__con.html#d93efab11883355b45a0460456991362">left_etx</a></td><td><a class="el" href="structolsr__con.html">olsr_con</a></td><td></td></tr>
+  <tr class="memlist"><td><a class="el" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a></td><td><a class="el" href="structolsr__con.html">olsr_con</a></td><td></td></tr>
+  <tr class="memlist"><td><a class="el" href="structolsr__con.html#369dfd6eec077d0a6228cd1387135e6e">next_olsr_con</a></td><td><a class="el" href="structolsr__con.html">olsr_con</a></td><td></td></tr>
+  <tr class="memlist"><td><a class="el" href="structolsr__con.html#fe985b6b83425cb17e801ac00001175e">obj_id</a></td><td><a class="el" href="structolsr__con.html">olsr_con</a></td><td></td></tr>
+  <tr class="memlist"><td><a class="el" href="structolsr__con.html#0382eebfbf31d5f217572d4907c503cb">prev_olsr_con</a></td><td><a class="el" href="structolsr__con.html">olsr_con</a></td><td></td></tr>
+  <tr class="memlist"><td><a class="el" href="structolsr__con.html#239f576ba1dae4303a935a296d5adb95">rgb</a></td><td><a class="el" href="structolsr__con.html">olsr_con</a></td><td></td></tr>
+  <tr class="memlist"><td><a class="el" href="structolsr__con.html#30d90c31e93a79ba37ca51b8d146693a">right_etx</a></td><td><a class="el" href="structolsr__con.html">olsr_con</a></td><td></td></tr>
+  <tr class="memlist"><td><a class="el" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a></td><td><a class="el" href="structolsr__con.html">olsr_con</a></td><td></td></tr>
+</table><hr size="1"><address style="align: right;"><small>Generated on Sun Mar 19 13:28:20 2006 for olsrs3d by&nbsp;
+<a href="http://www.doxygen.org/index.html">
+<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6 </small></address>
+</body>
+</html>

Added: trunk/apps/olsrs3d/doxygen/html/structolsr__con.html
===================================================================
--- trunk/apps/olsrs3d/doxygen/html/structolsr__con.html	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/html/structolsr__con.html	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,301 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
+<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
+<title>olsrs3d: olsr_con Struct Reference</title>
+<link href="doxygen.css" rel="stylesheet" type="text/css">
+<link href="tabs.css" rel="stylesheet" type="text/css">
+</head><body>
+<!-- Generated by Doxygen 1.4.6 -->
+<div class="tabs">
+  <ul>
+    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
+    <li id="current"><a href="classes.html"><span>Classes</span></a></li>
+    <li><a href="files.html"><span>Files</span></a></li>
+    <li><a href="dirs.html"><span>Directories</span></a></li>
+  </ul></div>
+<div class="tabs">
+  <ul>
+    <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
+    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
+    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
+    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
+  </ul></div>
+<h1>olsr_con Struct Reference</h1><!-- doxytag: class="olsr_con" --><code>#include &lt;<a class="el" href="olsrs3d_8h-source.html">olsrs3d.h</a>&gt;</code>
+<p>
+<a href="structolsr__con-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
+<tr><td></td></tr>
+<tr><td colspan="2"><br><h2>Public Attributes</h2></td></tr>
+<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structolsr__con.html#26a11a87df79af8e59e9f5048937b0c1">color</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structolsr__con.html#d93efab11883355b45a0460456991362">left_etx</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structolsr__node.html">olsr_node</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">left_olsr_node</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structolsr__con.html">olsr_con</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structolsr__con.html#369dfd6eec077d0a6228cd1387135e6e">next_olsr_con</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structolsr__con.html#fe985b6b83425cb17e801ac00001175e">obj_id</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structolsr__con.html">olsr_con</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structolsr__con.html#0382eebfbf31d5f217572d4907c503cb">prev_olsr_con</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structolsr__con.html#239f576ba1dae4303a935a296d5adb95">rgb</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structolsr__con.html#30d90c31e93a79ba37ca51b8d146693a">right_etx</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structolsr__node.html">olsr_node</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">right_olsr_node</a></td></tr>
+
+</table>
+<hr><a name="_details"></a><h2>Detailed Description</h2>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="olsrs3d_8h-source.html#l00035">35</a> of file <a class="el" href="olsrs3d_8h-source.html">olsrs3d.h</a>.<hr><h2>Member Data Documentation</h2>
+<a class="anchor" name="26a11a87df79af8e59e9f5048937b0c1"></a><!-- doxytag: member="olsr_con::color" ref="26a11a87df79af8e59e9f5048937b0c1" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">int <a class="el" href="structolsr__con.html#26a11a87df79af8e59e9f5048937b0c1">olsr_con::color</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="olsrs3d_8h-source.html#l00044">44</a> of file <a class="el" href="olsrs3d_8h-source.html">olsrs3d.h</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00439">move_olsr_nodes()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="d93efab11883355b45a0460456991362"></a><!-- doxytag: member="olsr_con::left_etx" ref="d93efab11883355b45a0460456991362" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">float <a class="el" href="structolsr__con.html#d93efab11883355b45a0460456991362">olsr_con::left_etx</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="olsrs3d_8h-source.html#l00041">41</a> of file <a class="el" href="olsrs3d_8h-source.html">olsrs3d.h</a>.
+<p>
+Referenced by <a class="el" href="process_8c-source.html#l00048">add_olsr_con()</a>, <a class="el" href="main_8c-source.html#l00400">calc_olsr_node_mov()</a>, and <a class="el" href="main_8c-source.html#l00439">move_olsr_nodes()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="578882f9337bb0bdad9444e85d56a088"></a><!-- doxytag: member="olsr_con::left_olsr_node" ref="578882f9337bb0bdad9444e85d56a088" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">struct <a class="el" href="structolsr__node.html">olsr_node</a>* <a class="el" href="structolsr__con.html#578882f9337bb0bdad9444e85d56a088">olsr_con::left_olsr_node</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="olsrs3d_8h-source.html#l00039">39</a> of file <a class="el" href="olsrs3d_8h-source.html">olsrs3d.h</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00400">calc_olsr_node_mov()</a>, <a class="el" href="main_8c-source.html#l00186">handle_olsr_node()</a>, and <a class="el" href="main_8c-source.html#l00439">move_olsr_nodes()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="369dfd6eec077d0a6228cd1387135e6e"></a><!-- doxytag: member="olsr_con::next_olsr_con" ref="369dfd6eec077d0a6228cd1387135e6e" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">struct <a class="el" href="structolsr__con.html">olsr_con</a>* <a class="el" href="structolsr__con.html#369dfd6eec077d0a6228cd1387135e6e">olsr_con::next_olsr_con</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="olsrs3d_8h-source.html#l00037">37</a> of file <a class="el" href="olsrs3d_8h-source.html">olsrs3d.h</a>.
+<p>
+Referenced by <a class="el" href="process_8c-source.html#l00048">add_olsr_con()</a>, <a class="el" href="main_8c-source.html#l00400">calc_olsr_node_mov()</a>, <a class="el" href="main_8c-source.html#l00186">handle_olsr_node()</a>, and <a class="el" href="main_8c-source.html#l00439">move_olsr_nodes()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="fe985b6b83425cb17e801ac00001175e"></a><!-- doxytag: member="olsr_con::obj_id" ref="fe985b6b83425cb17e801ac00001175e" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">int <a class="el" href="structolsr__con.html#fe985b6b83425cb17e801ac00001175e">olsr_con::obj_id</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="olsrs3d_8h-source.html#l00043">43</a> of file <a class="el" href="olsrs3d_8h-source.html">olsrs3d.h</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00186">handle_olsr_node()</a>, and <a class="el" href="main_8c-source.html#l00439">move_olsr_nodes()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="0382eebfbf31d5f217572d4907c503cb"></a><!-- doxytag: member="olsr_con::prev_olsr_con" ref="0382eebfbf31d5f217572d4907c503cb" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">struct <a class="el" href="structolsr__con.html">olsr_con</a>* <a class="el" href="structolsr__con.html#0382eebfbf31d5f217572d4907c503cb">olsr_con::prev_olsr_con</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="olsrs3d_8h-source.html#l00038">38</a> of file <a class="el" href="olsrs3d_8h-source.html">olsrs3d.h</a>.
+<p>
+Referenced by <a class="el" href="process_8c-source.html#l00048">add_olsr_con()</a>, and <a class="el" href="main_8c-source.html#l00186">handle_olsr_node()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="239f576ba1dae4303a935a296d5adb95"></a><!-- doxytag: member="olsr_con::rgb" ref="239f576ba1dae4303a935a296d5adb95" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">float <a class="el" href="structolsr__con.html#239f576ba1dae4303a935a296d5adb95">olsr_con::rgb</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="olsrs3d_8h-source.html#l00045">45</a> of file <a class="el" href="olsrs3d_8h-source.html">olsrs3d.h</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00439">move_olsr_nodes()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="30d90c31e93a79ba37ca51b8d146693a"></a><!-- doxytag: member="olsr_con::right_etx" ref="30d90c31e93a79ba37ca51b8d146693a" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">float <a class="el" href="structolsr__con.html#30d90c31e93a79ba37ca51b8d146693a">olsr_con::right_etx</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="olsrs3d_8h-source.html#l00042">42</a> of file <a class="el" href="olsrs3d_8h-source.html">olsrs3d.h</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00400">calc_olsr_node_mov()</a>, and <a class="el" href="main_8c-source.html#l00439">move_olsr_nodes()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="f49aca51c70a95deddf8bb715d63af31"></a><!-- doxytag: member="olsr_con::right_olsr_node" ref="f49aca51c70a95deddf8bb715d63af31" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">struct <a class="el" href="structolsr__node.html">olsr_node</a>* <a class="el" href="structolsr__con.html#f49aca51c70a95deddf8bb715d63af31">olsr_con::right_olsr_node</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="olsrs3d_8h-source.html#l00040">40</a> of file <a class="el" href="olsrs3d_8h-source.html">olsrs3d.h</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00400">calc_olsr_node_mov()</a>, <a class="el" href="main_8c-source.html#l00186">handle_olsr_node()</a>, and <a class="el" href="main_8c-source.html#l00439">move_olsr_nodes()</a>.    </td>
+  </tr>
+</table>
+<hr>The documentation for this struct was generated from the following file:<ul>
+<li>s3d/apps/olsrs3d/<a class="el" href="olsrs3d_8h-source.html">olsrs3d.h</a></ul>
+<hr size="1"><address style="align: right;"><small>Generated on Sun Mar 19 13:28:20 2006 for olsrs3d by&nbsp;
+<a href="http://www.doxygen.org/index.html">
+<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6 </small></address>
+</body>
+</html>

Added: trunk/apps/olsrs3d/doxygen/html/structolsr__neigh__list-members.html
===================================================================
--- trunk/apps/olsrs3d/doxygen/html/structolsr__neigh__list-members.html	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/html/structolsr__neigh__list-members.html	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,29 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
+<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
+<title>olsrs3d: Member List</title>
+<link href="doxygen.css" rel="stylesheet" type="text/css">
+<link href="tabs.css" rel="stylesheet" type="text/css">
+</head><body>
+<!-- Generated by Doxygen 1.4.6 -->
+<div class="tabs">
+  <ul>
+    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
+    <li id="current"><a href="classes.html"><span>Classes</span></a></li>
+    <li><a href="files.html"><span>Files</span></a></li>
+    <li><a href="dirs.html"><span>Directories</span></a></li>
+  </ul></div>
+<div class="tabs">
+  <ul>
+    <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
+    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
+    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
+    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
+  </ul></div>
+<h1>olsr_neigh_list Member List</h1>This is the complete list of members for <a class="el" href="structolsr__neigh__list.html">olsr_neigh_list</a>, including all inherited members.<p><table>
+  <tr class="memlist"><td><a class="el" href="structolsr__neigh__list.html#f1d533fde49e1ed2ea5299661f5c10c6">next_olsr_neigh_list</a></td><td><a class="el" href="structolsr__neigh__list.html">olsr_neigh_list</a></td><td></td></tr>
+  <tr class="memlist"><td><a class="el" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">olsr_con</a></td><td><a class="el" href="structolsr__neigh__list.html">olsr_neigh_list</a></td><td></td></tr>
+</table><hr size="1"><address style="align: right;"><small>Generated on Sun Mar 19 13:28:20 2006 for olsrs3d by&nbsp;
+<a href="http://www.doxygen.org/index.html">
+<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6 </small></address>
+</body>
+</html>

Added: trunk/apps/olsrs3d/doxygen/html/structolsr__neigh__list.html
===================================================================
--- trunk/apps/olsrs3d/doxygen/html/structolsr__neigh__list.html	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/html/structolsr__neigh__list.html	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,98 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
+<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
+<title>olsrs3d: olsr_neigh_list Struct Reference</title>
+<link href="doxygen.css" rel="stylesheet" type="text/css">
+<link href="tabs.css" rel="stylesheet" type="text/css">
+</head><body>
+<!-- Generated by Doxygen 1.4.6 -->
+<div class="tabs">
+  <ul>
+    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
+    <li id="current"><a href="classes.html"><span>Classes</span></a></li>
+    <li><a href="files.html"><span>Files</span></a></li>
+    <li><a href="dirs.html"><span>Directories</span></a></li>
+  </ul></div>
+<div class="tabs">
+  <ul>
+    <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
+    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
+    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
+    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
+  </ul></div>
+<h1>olsr_neigh_list Struct Reference</h1><!-- doxytag: class="olsr_neigh_list" --><code>#include &lt;<a class="el" href="olsrs3d_8h-source.html">olsrs3d.h</a>&gt;</code>
+<p>
+<a href="structolsr__neigh__list-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
+<tr><td></td></tr>
+<tr><td colspan="2"><br><h2>Public Attributes</h2></td></tr>
+<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structolsr__neigh__list.html">olsr_neigh_list</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structolsr__neigh__list.html#f1d533fde49e1ed2ea5299661f5c10c6">next_olsr_neigh_list</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structolsr__con.html">olsr_con</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">olsr_con</a></td></tr>
+
+</table>
+<hr><a name="_details"></a><h2>Detailed Description</h2>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="olsrs3d_8h-source.html#l00051">51</a> of file <a class="el" href="olsrs3d_8h-source.html">olsrs3d.h</a>.<hr><h2>Member Data Documentation</h2>
+<a class="anchor" name="f1d533fde49e1ed2ea5299661f5c10c6"></a><!-- doxytag: member="olsr_neigh_list::next_olsr_neigh_list" ref="f1d533fde49e1ed2ea5299661f5c10c6" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">struct <a class="el" href="structolsr__neigh__list.html">olsr_neigh_list</a>* <a class="el" href="structolsr__neigh__list.html#f1d533fde49e1ed2ea5299661f5c10c6">olsr_neigh_list::next_olsr_neigh_list</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="olsrs3d_8h-source.html#l00053">53</a> of file <a class="el" href="olsrs3d_8h-source.html">olsrs3d.h</a>.
+<p>
+Referenced by <a class="el" href="process_8c-source.html#l00048">add_olsr_con()</a>, and <a class="el" href="main_8c-source.html#l00186">handle_olsr_node()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="83a291941fbb40293f8e2e5c6b4d11b6"></a><!-- doxytag: member="olsr_neigh_list::olsr_con" ref="83a291941fbb40293f8e2e5c6b4d11b6" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">struct <a class="el" href="structolsr__con.html">olsr_con</a>* <a class="el" href="structolsr__neigh__list.html#83a291941fbb40293f8e2e5c6b4d11b6">olsr_neigh_list::olsr_con</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="olsrs3d_8h-source.html#l00054">54</a> of file <a class="el" href="olsrs3d_8h-source.html">olsrs3d.h</a>.
+<p>
+Referenced by <a class="el" href="process_8c-source.html#l00048">add_olsr_con()</a>, and <a class="el" href="main_8c-source.html#l00186">handle_olsr_node()</a>.    </td>
+  </tr>
+</table>
+<hr>The documentation for this struct was generated from the following file:<ul>
+<li>s3d/apps/olsrs3d/<a class="el" href="olsrs3d_8h-source.html">olsrs3d.h</a></ul>
+<hr size="1"><address style="align: right;"><small>Generated on Sun Mar 19 13:28:20 2006 for olsrs3d by&nbsp;
+<a href="http://www.doxygen.org/index.html">
+<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6 </small></address>
+</body>
+</html>

Added: trunk/apps/olsrs3d/doxygen/html/structolsr__node-members.html
===================================================================
--- trunk/apps/olsrs3d/doxygen/html/structolsr__node-members.html	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/html/structolsr__node-members.html	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,40 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
+<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
+<title>olsrs3d: Member List</title>
+<link href="doxygen.css" rel="stylesheet" type="text/css">
+<link href="tabs.css" rel="stylesheet" type="text/css">
+</head><body>
+<!-- Generated by Doxygen 1.4.6 -->
+<div class="tabs">
+  <ul>
+    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
+    <li id="current"><a href="classes.html"><span>Classes</span></a></li>
+    <li><a href="files.html"><span>Files</span></a></li>
+    <li><a href="dirs.html"><span>Directories</span></a></li>
+  </ul></div>
+<div class="tabs">
+  <ul>
+    <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
+    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
+    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
+    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
+  </ul></div>
+<h1>olsr_node Member List</h1>This is the complete list of members for <a class="el" href="structolsr__node.html">olsr_node</a>, including all inherited members.<p><table>
+  <tr class="memlist"><td><a class="el" href="structolsr__node.html#f2e3f729be82b64001867038bbe8012a">desc_id</a></td><td><a class="el" href="structolsr__node.html">olsr_node</a></td><td></td></tr>
+  <tr class="memlist"><td><a class="el" href="structolsr__node.html#c2a66c5312cf64fec10f6b8903dbd966">desc_length</a></td><td><a class="el" href="structolsr__node.html">olsr_node</a></td><td></td></tr>
+  <tr class="memlist"><td><a class="el" href="structolsr__node.html#59690d75faff5c149faecacb4f4d2a57">ip</a></td><td><a class="el" href="structolsr__node.html">olsr_node</a></td><td></td></tr>
+  <tr class="memlist"><td><a class="el" href="structolsr__node.html#1d492aa6f4e75cc100d7a3e2f059d615">last_seen</a></td><td><a class="el" href="structolsr__node.html">olsr_node</a></td><td></td></tr>
+  <tr class="memlist"><td><a class="el" href="structolsr__node.html#b64ee26ebfa4a3c2719de780b4cabada">left</a></td><td><a class="el" href="structolsr__node.html">olsr_node</a></td><td></td></tr>
+  <tr class="memlist"><td><a class="el" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a></td><td><a class="el" href="structolsr__node.html">olsr_node</a></td><td></td></tr>
+  <tr class="memlist"><td><a class="el" href="structolsr__node.html#c89186513811183436bcd79cdb6d7b4d">node_type</a></td><td><a class="el" href="structolsr__node.html">olsr_node</a></td><td></td></tr>
+  <tr class="memlist"><td><a class="el" href="structolsr__node.html#4517a87e4fdbdb58f678743b5684088b">node_type_modified</a></td><td><a class="el" href="structolsr__node.html">olsr_node</a></td><td></td></tr>
+  <tr class="memlist"><td><a class="el" href="structolsr__node.html#15be0912065801026e7b4411af561788">obj_id</a></td><td><a class="el" href="structolsr__node.html">olsr_node</a></td><td></td></tr>
+  <tr class="memlist"><td><a class="el" href="structolsr__node.html#3b80ce78a06be6aba5a1f93887442764">olsr_neigh_list</a></td><td><a class="el" href="structolsr__node.html">olsr_node</a></td><td></td></tr>
+  <tr class="memlist"><td><a class="el" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a></td><td><a class="el" href="structolsr__node.html">olsr_node</a></td><td></td></tr>
+  <tr class="memlist"><td><a class="el" href="structolsr__node.html#bc6cf143d12b1e5a204ae64d40c0eb05">right</a></td><td><a class="el" href="structolsr__node.html">olsr_node</a></td><td></td></tr>
+  <tr class="memlist"><td><a class="el" href="structolsr__node.html#f19d37e4aa5263be9a1741de24686664">visible</a></td><td><a class="el" href="structolsr__node.html">olsr_node</a></td><td></td></tr>
+</table><hr size="1"><address style="align: right;"><small>Generated on Sun Mar 19 13:28:20 2006 for olsrs3d by&nbsp;
+<a href="http://www.doxygen.org/index.html">
+<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6 </small></address>
+</body>
+</html>

Added: trunk/apps/olsrs3d/doxygen/html/structolsr__node.html
===================================================================
--- trunk/apps/olsrs3d/doxygen/html/structolsr__node.html	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/html/structolsr__node.html	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,417 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
+<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
+<title>olsrs3d: olsr_node Struct Reference</title>
+<link href="doxygen.css" rel="stylesheet" type="text/css">
+<link href="tabs.css" rel="stylesheet" type="text/css">
+</head><body>
+<!-- Generated by Doxygen 1.4.6 -->
+<div class="tabs">
+  <ul>
+    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
+    <li id="current"><a href="classes.html"><span>Classes</span></a></li>
+    <li><a href="files.html"><span>Files</span></a></li>
+    <li><a href="dirs.html"><span>Directories</span></a></li>
+  </ul></div>
+<div class="tabs">
+  <ul>
+    <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
+    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
+    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
+    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
+  </ul></div>
+<h1>olsr_node Struct Reference</h1><!-- doxytag: class="olsr_node" --><code>#include &lt;<a class="el" href="olsrs3d_8h-source.html">olsrs3d.h</a>&gt;</code>
+<p>
+<a href="structolsr__node-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
+<tr><td></td></tr>
+<tr><td colspan="2"><br><h2>Public Attributes</h2></td></tr>
+<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structolsr__node.html#f2e3f729be82b64001867038bbe8012a">desc_id</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structolsr__node.html#c2a66c5312cf64fec10f6b8903dbd966">desc_length</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structolsr__node.html#59690d75faff5c149faecacb4f4d2a57">ip</a> [NAMEMAX]</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structolsr__node.html#1d492aa6f4e75cc100d7a3e2f059d615">last_seen</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structolsr__node.html">olsr_node</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structolsr__node.html#b64ee26ebfa4a3c2719de780b4cabada">left</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">mov_vec</a> [3]</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structolsr__node.html#c89186513811183436bcd79cdb6d7b4d">node_type</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structolsr__node.html#4517a87e4fdbdb58f678743b5684088b">node_type_modified</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structolsr__node.html#15be0912065801026e7b4411af561788">obj_id</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structolsr__neigh__list.html">olsr_neigh_list</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structolsr__node.html#3b80ce78a06be6aba5a1f93887442764">olsr_neigh_list</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">pos_vec</a> [3]</td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structolsr__node.html">olsr_node</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structolsr__node.html#bc6cf143d12b1e5a204ae64d40c0eb05">right</a></td></tr>
+
+<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structolsr__node.html#f19d37e4aa5263be9a1741de24686664">visible</a></td></tr>
+
+</table>
+<hr><a name="_details"></a><h2>Detailed Description</h2>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="olsrs3d_8h-source.html#l00060">60</a> of file <a class="el" href="olsrs3d_8h-source.html">olsrs3d.h</a>.<hr><h2>Member Data Documentation</h2>
+<a class="anchor" name="f2e3f729be82b64001867038bbe8012a"></a><!-- doxytag: member="olsr_node::desc_id" ref="f2e3f729be82b64001867038bbe8012a" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">int <a class="el" href="structolsr__node.html#f2e3f729be82b64001867038bbe8012a">olsr_node::desc_id</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="olsrs3d_8h-source.html#l00072">72</a> of file <a class="el" href="olsrs3d_8h-source.html">olsrs3d.h</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00186">handle_olsr_node()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="c2a66c5312cf64fec10f6b8903dbd966"></a><!-- doxytag: member="olsr_node::desc_length" ref="c2a66c5312cf64fec10f6b8903dbd966" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">float <a class="el" href="structolsr__node.html#c2a66c5312cf64fec10f6b8903dbd966">olsr_node::desc_length</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="olsrs3d_8h-source.html#l00073">73</a> of file <a class="el" href="olsrs3d_8h-source.html">olsrs3d.h</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00186">handle_olsr_node()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="59690d75faff5c149faecacb4f4d2a57"></a><!-- doxytag: member="olsr_node::ip" ref="59690d75faff5c149faecacb4f4d2a57" args="[NAMEMAX]" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">char <a class="el" href="structolsr__node.html#59690d75faff5c149faecacb4f4d2a57">olsr_node::ip</a>[NAMEMAX]          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="olsrs3d_8h-source.html#l00064">64</a> of file <a class="el" href="olsrs3d_8h-source.html">olsrs3d.h</a>.
+<p>
+Referenced by <a class="el" href="process_8c-source.html#l00048">add_olsr_con()</a>, <a class="el" href="main_8c-source.html#l00186">handle_olsr_node()</a>, <a class="el" href="main_8c-source.html#l00746">object_click()</a>, and <a class="el" href="process_8c-source.html#l00368">process_main()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="1d492aa6f4e75cc100d7a3e2f059d615"></a><!-- doxytag: member="olsr_node::last_seen" ref="1d492aa6f4e75cc100d7a3e2f059d615" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">int <a class="el" href="structolsr__node.html#1d492aa6f4e75cc100d7a3e2f059d615">olsr_node::last_seen</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="olsrs3d_8h-source.html#l00067">67</a> of file <a class="el" href="olsrs3d_8h-source.html">olsrs3d.h</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00186">handle_olsr_node()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="b64ee26ebfa4a3c2719de780b4cabada"></a><!-- doxytag: member="olsr_node::left" ref="b64ee26ebfa4a3c2719de780b4cabada" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">struct <a class="el" href="structolsr__node.html">olsr_node</a>* <a class="el" href="structolsr__node.html#b64ee26ebfa4a3c2719de780b4cabada">olsr_node::left</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="olsrs3d_8h-source.html#l00062">62</a> of file <a class="el" href="olsrs3d_8h-source.html">olsrs3d.h</a>.
+<p>
+Referenced by <a class="el" href="process_8c-source.html#l00155">get_olsr_node()</a>, and <a class="el" href="main_8c-source.html#l00186">handle_olsr_node()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="f95ed9fca02788c5f4933ac51b4ea147"></a><!-- doxytag: member="olsr_node::mov_vec" ref="f95ed9fca02788c5f4933ac51b4ea147" args="[3]" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">float <a class="el" href="structolsr__node.html#f95ed9fca02788c5f4933ac51b4ea147">olsr_node::mov_vec</a>[3]          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="olsrs3d_8h-source.html#l00070">70</a> of file <a class="el" href="olsrs3d_8h-source.html">olsrs3d.h</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00400">calc_olsr_node_mov()</a>, <a class="el" href="main_8c-source.html#l00186">handle_olsr_node()</a>, and <a class="el" href="main_8c-source.html#l00439">move_olsr_nodes()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="c89186513811183436bcd79cdb6d7b4d"></a><!-- doxytag: member="olsr_node::node_type" ref="c89186513811183436bcd79cdb6d7b4d" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">int <a class="el" href="structolsr__node.html#c89186513811183436bcd79cdb6d7b4d">olsr_node::node_type</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="olsrs3d_8h-source.html#l00065">65</a> of file <a class="el" href="olsrs3d_8h-source.html">olsrs3d.h</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00186">handle_olsr_node()</a>, and <a class="el" href="process_8c-source.html#l00368">process_main()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="4517a87e4fdbdb58f678743b5684088b"></a><!-- doxytag: member="olsr_node::node_type_modified" ref="4517a87e4fdbdb58f678743b5684088b" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">int <a class="el" href="structolsr__node.html#4517a87e4fdbdb58f678743b5684088b">olsr_node::node_type_modified</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="olsrs3d_8h-source.html#l00066">66</a> of file <a class="el" href="olsrs3d_8h-source.html">olsrs3d.h</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00186">handle_olsr_node()</a>, and <a class="el" href="process_8c-source.html#l00368">process_main()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="15be0912065801026e7b4411af561788"></a><!-- doxytag: member="olsr_node::obj_id" ref="15be0912065801026e7b4411af561788" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">int <a class="el" href="structolsr__node.html#15be0912065801026e7b4411af561788">olsr_node::obj_id</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="olsrs3d_8h-source.html#l00071">71</a> of file <a class="el" href="olsrs3d_8h-source.html">olsrs3d.h</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00186">handle_olsr_node()</a>, and <a class="el" href="main_8c-source.html#l00439">move_olsr_nodes()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="3b80ce78a06be6aba5a1f93887442764"></a><!-- doxytag: member="olsr_node::olsr_neigh_list" ref="3b80ce78a06be6aba5a1f93887442764" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">struct <a class="el" href="structolsr__neigh__list.html">olsr_neigh_list</a>* <a class="el" href="structolsr__node.html#3b80ce78a06be6aba5a1f93887442764">olsr_node::olsr_neigh_list</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="olsrs3d_8h-source.html#l00074">74</a> of file <a class="el" href="olsrs3d_8h-source.html">olsrs3d.h</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00186">handle_olsr_node()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="91977704430de9534f7a118d1dfbeb54"></a><!-- doxytag: member="olsr_node::pos_vec" ref="91977704430de9534f7a118d1dfbeb54" args="[3]" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">float <a class="el" href="structolsr__node.html#91977704430de9534f7a118d1dfbeb54">olsr_node::pos_vec</a>[3]          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="olsrs3d_8h-source.html#l00069">69</a> of file <a class="el" href="olsrs3d_8h-source.html">olsrs3d.h</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00400">calc_olsr_node_mov()</a>, <a class="el" href="main_8c-source.html#l00186">handle_olsr_node()</a>, and <a class="el" href="main_8c-source.html#l00439">move_olsr_nodes()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="bc6cf143d12b1e5a204ae64d40c0eb05"></a><!-- doxytag: member="olsr_node::right" ref="bc6cf143d12b1e5a204ae64d40c0eb05" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">struct <a class="el" href="structolsr__node.html">olsr_node</a>* <a class="el" href="structolsr__node.html#bc6cf143d12b1e5a204ae64d40c0eb05">olsr_node::right</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="olsrs3d_8h-source.html#l00063">63</a> of file <a class="el" href="olsrs3d_8h-source.html">olsrs3d.h</a>.
+<p>
+Referenced by <a class="el" href="process_8c-source.html#l00155">get_olsr_node()</a>, and <a class="el" href="main_8c-source.html#l00186">handle_olsr_node()</a>.    </td>
+  </tr>
+</table>
+<a class="anchor" name="f19d37e4aa5263be9a1741de24686664"></a><!-- doxytag: member="olsr_node::visible" ref="f19d37e4aa5263be9a1741de24686664" args="" --><p>
+<table class="mdTable" cellpadding="2" cellspacing="0">
+  <tr>
+    <td class="mdRow">
+      <table cellpadding="0" cellspacing="0" border="0">
+        <tr>
+          <td class="md" nowrap valign="top">int <a class="el" href="structolsr__node.html#f19d37e4aa5263be9a1741de24686664">olsr_node::visible</a>          </td>
+        </tr>
+      </table>
+    </td>
+  </tr>
+</table>
+<table cellspacing="5" cellpadding="0" border="0">
+  <tr>
+    <td>
+      &nbsp;
+    </td>
+    <td>
+
+<p>
+
+<p>
+Definition at line <a class="el" href="olsrs3d_8h-source.html#l00068">68</a> of file <a class="el" href="olsrs3d_8h-source.html">olsrs3d.h</a>.
+<p>
+Referenced by <a class="el" href="main_8c-source.html#l00186">handle_olsr_node()</a>, <a class="el" href="main_8c-source.html#l00439">move_olsr_nodes()</a>, and <a class="el" href="process_8c-source.html#l00368">process_main()</a>.    </td>
+  </tr>
+</table>
+<hr>The documentation for this struct was generated from the following file:<ul>
+<li>s3d/apps/olsrs3d/<a class="el" href="olsrs3d_8h-source.html">olsrs3d.h</a></ul>
+<hr size="1"><address style="align: right;"><small>Generated on Sun Mar 19 13:28:20 2006 for olsrs3d by&nbsp;
+<a href="http://www.doxygen.org/index.html">
+<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6 </small></address>
+</body>
+</html>

Added: trunk/apps/olsrs3d/doxygen/html/tab_b.gif
===================================================================
(Binary files differ)


Property changes on: trunk/apps/olsrs3d/doxygen/html/tab_b.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/apps/olsrs3d/doxygen/html/tab_l.gif
===================================================================
(Binary files differ)


Property changes on: trunk/apps/olsrs3d/doxygen/html/tab_l.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/apps/olsrs3d/doxygen/html/tab_r.gif
===================================================================
(Binary files differ)


Property changes on: trunk/apps/olsrs3d/doxygen/html/tab_r.gif
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/apps/olsrs3d/doxygen/html/tabs.css
===================================================================
--- trunk/apps/olsrs3d/doxygen/html/tabs.css	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/html/tabs.css	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,102 @@
+/* tabs styles, based on http://www.alistapart.com/articles/slidingdoors */
+
+DIV.tabs
+{
+   float            : left;
+   width            : 100%;
+   background       : url("tab_b.gif") repeat-x bottom;
+   margin-bottom    : 4px;
+}
+
+DIV.tabs UL
+{
+   margin           : 0px;
+   padding-left     : 10px;
+   list-style       : none;
+}
+
+DIV.tabs LI, DIV.tabs FORM
+{
+   display          : inline;
+   margin           : 0px;
+   padding          : 0px;
+}
+
+DIV.tabs FORM
+{
+   float            : right;
+}
+
+DIV.tabs A
+{
+   float            : left;
+   background       : url("tab_r.gif") no-repeat right top;
+   border-bottom    : 1px solid #84B0C7;
+   font-size        : x-small;
+   font-weight      : bold;
+   text-decoration  : none;
+}
+
+DIV.tabs A:hover
+{
+   background-position: 100% -150px;
+}
+
+DIV.tabs A:link, DIV.tabs A:visited,
+DIV.tabs A:active, DIV.tabs A:hover
+{
+       color: #1A419D;
+}
+
+DIV.tabs SPAN
+{
+   float            : left;
+   display          : block;
+   background       : url("tab_l.gif") no-repeat left top;
+   padding          : 5px 9px;
+   white-space      : nowrap;
+}
+
+DIV.tabs INPUT
+{
+   float            : right;
+   display          : inline;
+   font-size        : 1em;
+}
+
+DIV.tabs TD
+{
+   font-size        : x-small;
+   font-weight      : bold;
+   text-decoration  : none;
+}
+
+
+
+/* Commented Backslash Hack hides rule from IE5-Mac \*/
+DIV.tabs SPAN {float : none;}
+/* End IE5-Mac hack */
+
+DIV.tabs A:hover SPAN
+{
+   background-position: 0% -150px;
+}
+
+DIV.tabs LI#current A
+{
+   background-position: 100% -150px;
+   border-width     : 0px;
+}
+
+DIV.tabs LI#current SPAN
+{
+   background-position: 0% -150px;
+   padding-bottom   : 6px;
+}
+
+DIV.nav
+{
+   background       : none;
+   border           : none;
+   border-bottom    : 1px solid #84B0C7;
+}

Added: trunk/apps/olsrs3d/doxygen/latex/Helvetica.ttf
===================================================================
(Binary files differ)


Property changes on: trunk/apps/olsrs3d/doxygen/latex/Helvetica.ttf
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/apps/olsrs3d/doxygen/latex/Makefile
===================================================================
--- trunk/apps/olsrs3d/doxygen/latex/Makefile	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/latex/Makefile	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,39 @@
+all: clean refman.dvi
+
+ps: refman.ps
+
+pdf: refman.pdf
+
+ps_2on1: refman_2on1.ps
+
+pdf_2on1: refman_2on1.pdf
+
+refman.ps: refman.dvi
+	dvips -o refman.ps refman.dvi
+
+refman.pdf: refman.ps
+	ps2pdf refman.ps refman.pdf
+
+refman.dvi: refman.tex doxygen.sty
+	echo "Running latex..."
+	latex refman.tex
+	echo "Running makeindex..."
+	makeindex refman.idx
+	echo "Rerunning latex...."
+	latex refman.tex
+	latex_count=5 ; \
+	while egrep -s 'Rerun (LaTeX|to get cross-references right)' refman.log && [ $$latex_count -gt 0 ] ;\
+	    do \
+	      echo "Rerunning latex...." ;\
+	      latex refman.tex ;\
+	      latex_count=`expr $$latex_count - 1` ;\
+	    done
+
+refman_2on1.ps: refman.ps
+	psnup -2 refman.ps >refman_2on1.ps
+
+refman_2on1.pdf: refman_2on1.ps
+	ps2pdf refman_2on1.ps refman_2on1.pdf
+
+clean:
+	rm -f *.ps *.dvi *.aux *.toc *.idx *.ind *.ilg *.log *.out refman.pdf

Added: trunk/apps/olsrs3d/doxygen/latex/annotated.tex
===================================================================
--- trunk/apps/olsrs3d/doxygen/latex/annotated.tex	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/latex/annotated.tex	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,7 @@
+\section{olsrs3d Class List}
+Here are the classes, structs, unions and interfaces with brief descriptions:\begin{CompactList}
+\item\contentsline{section}{{\bf Obj\_\-to\_\-ip} }{\pageref{structObj__to__ip}}{}
+\item\contentsline{section}{{\bf olsr\_\-con} }{\pageref{structolsr__con}}{}
+\item\contentsline{section}{{\bf olsr\_\-neigh\_\-list} }{\pageref{structolsr__neigh__list}}{}
+\item\contentsline{section}{{\bf olsr\_\-node} }{\pageref{structolsr__node}}{}
+\end{CompactList}

Added: trunk/apps/olsrs3d/doxygen/latex/dir_5d167550802dbd943c0631943f884f5b.tex
===================================================================
--- trunk/apps/olsrs3d/doxygen/latex/dir_5d167550802dbd943c0631943f884f5b.tex	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/latex/dir_5d167550802dbd943c0631943f884f5b.tex	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,7 @@
+\section{s3d/apps/ Directory Reference}
+\label{dir_5d167550802dbd943c0631943f884f5b}\index{s3d/apps/ Directory Reference@{s3d/apps/ Directory Reference}}
+\subsection*{Directories}
+\begin{CompactItemize}
+\item 
+directory {\bf olsrs3d}
+\end{CompactItemize}

Added: trunk/apps/olsrs3d/doxygen/latex/dir_9d2efe7c7f87ee6309da929964f0685b.tex
===================================================================
--- trunk/apps/olsrs3d/doxygen/latex/dir_9d2efe7c7f87ee6309da929964f0685b.tex	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/latex/dir_9d2efe7c7f87ee6309da929964f0685b.tex	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,7 @@
+\section{s3d/ Directory Reference}
+\label{dir_9d2efe7c7f87ee6309da929964f0685b}\index{s3d/ Directory Reference@{s3d/ Directory Reference}}
+\subsection*{Directories}
+\begin{CompactItemize}
+\item 
+directory {\bf apps}
+\end{CompactItemize}

Added: trunk/apps/olsrs3d/doxygen/latex/dir_bf110b9fd34b0903efb6170e1cee5506.tex
===================================================================
--- trunk/apps/olsrs3d/doxygen/latex/dir_bf110b9fd34b0903efb6170e1cee5506.tex	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/latex/dir_bf110b9fd34b0903efb6170e1cee5506.tex	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,13 @@
+\section{s3d/apps/olsrs3d/ Directory Reference}
+\label{dir_bf110b9fd34b0903efb6170e1cee5506}\index{s3d/apps/olsrs3d/ Directory Reference@{s3d/apps/olsrs3d/ Directory Reference}}
+\subsection*{Files}
+\begin{CompactItemize}
+\item 
+file {\bf main.c}
+\item 
+file {\bf net.c}
+\item 
+file {\bf olsrs3d.h}
+\item 
+file {\bf process.c}
+\end{CompactItemize}

Added: trunk/apps/olsrs3d/doxygen/latex/dirs.tex
===================================================================
--- trunk/apps/olsrs3d/doxygen/latex/dirs.tex	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/latex/dirs.tex	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,10 @@
+\section{olsrs3d Directories}
+This directory hierarchy is sorted roughly, but not completely, alphabetically:\begin{CompactList}
+\item \contentsline{section}{s3d}{\pageref{dir_9d2efe7c7f87ee6309da929964f0685b}}{}
+\begin{CompactList}
+\item \contentsline{section}{apps}{\pageref{dir_5d167550802dbd943c0631943f884f5b}}{}
+\begin{CompactList}
+\item \contentsline{section}{olsrs3d}{\pageref{dir_bf110b9fd34b0903efb6170e1cee5506}}{}
+\end{CompactList}
+\end{CompactList}
+\end{CompactList}

Added: trunk/apps/olsrs3d/doxygen/latex/doxygen.sty
===================================================================
--- trunk/apps/olsrs3d/doxygen/latex/doxygen.sty	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/latex/doxygen.sty	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,64 @@
+\NeedsTeXFormat{LaTeX2e}
+\ProvidesPackage{doxygen}
+\RequirePackage{calc}
+\RequirePackage{array}
+\pagestyle{fancyplain}
+\newcommand{\clearemptydoublepage}{\newpage{\pagestyle{empty}\cleardoublepage}}
+\renewcommand{\chaptermark}[1]{\markboth{#1}{}}
+\renewcommand{\sectionmark}[1]{\markright{\thesection\ #1}}
+\lhead[\fancyplain{}{\bfseries\thepage}]
+        {\fancyplain{}{\bfseries\rightmark}}
+\rhead[\fancyplain{}{\bfseries\leftmark}]
+        {\fancyplain{}{\bfseries\thepage}}
+\rfoot[\fancyplain{}{\bfseries\scriptsize Generated on Sun Mar 19 13:28:20 2006 for olsrs3d by Doxygen }]{}
+\lfoot[]{\fancyplain{}{\bfseries\scriptsize Generated on Sun Mar 19 13:28:20 2006 for olsrs3d by Doxygen }}
+\cfoot{}
+\newenvironment{CompactList}
+{\begin{list}{}{
+  \setlength{\leftmargin}{0.5cm}
+  \setlength{\itemsep}{0pt}
+  \setlength{\parsep}{0pt}
+  \setlength{\topsep}{0pt}
+  \renewcommand{\makelabel}{}}}
+{\end{list}}
+\newenvironment{CompactItemize}
+{
+  \begin{itemize}
+  \setlength{\itemsep}{-3pt}
+  \setlength{\parsep}{0pt}
+  \setlength{\topsep}{0pt}
+  \setlength{\partopsep}{0pt}
+}
+{\end{itemize}}
+\newcommand{\PBS}[1]{\let\temp=\\#1\let\\=\temp}
+\newlength{\tmplength}
+\newenvironment{TabularC}[1]
+{
+\setlength{\tmplength}
+     {\linewidth/(#1)-\tabcolsep*2-\arrayrulewidth*(#1+1)/(#1)}
+      \par\begin{tabular*}{\linewidth}
+             {*{#1}{|>{\PBS\raggedright\hspace{0pt}}p{\the\tmplength}}|}
+}
+{\end{tabular*}\par}
+\newcommand{\entrylabel}[1]{
+   {\parbox[b]{\labelwidth-4pt}{\makebox[0pt][l]{\textbf{#1}}\\}}}
+\newenvironment{Desc}
+{\begin{list}{}
+  {
+    \settowidth{\labelwidth}{40pt}
+    \setlength{\leftmargin}{\labelwidth}
+    \setlength{\parsep}{0pt}
+    \setlength{\itemsep}{-4pt}
+    \renewcommand{\makelabel}{\entrylabel}
+  }
+}
+{\end{list}}
+\newenvironment{Indent}
+  {\begin{list}{}{\setlength{\leftmargin}{0.5cm}}
+      \item[]\ignorespaces}
+  {\unskip\end{list}}
+\setlength{\parindent}{0cm}
+\setlength{\parskip}{0.2cm}
+\addtocounter{secnumdepth}{1}
+\sloppy
+\usepackage[T1]{fontenc}

Added: trunk/apps/olsrs3d/doxygen/latex/files.tex
===================================================================
--- trunk/apps/olsrs3d/doxygen/latex/files.tex	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/latex/files.tex	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,7 @@
+\section{olsrs3d File List}
+Here is a list of all files with brief descriptions:\begin{CompactList}
+\item\contentsline{section}{s3d/apps/olsrs3d/{\bf main.c} }{\pageref{main_8c}}{}
+\item\contentsline{section}{s3d/apps/olsrs3d/{\bf net.c} }{\pageref{net_8c}}{}
+\item\contentsline{section}{s3d/apps/olsrs3d/{\bf olsrs3d.h} }{\pageref{olsrs3d_8h}}{}
+\item\contentsline{section}{s3d/apps/olsrs3d/{\bf process.c} }{\pageref{process_8c}}{}
+\end{CompactList}

Added: trunk/apps/olsrs3d/doxygen/latex/hierarchy.tex
===================================================================
--- trunk/apps/olsrs3d/doxygen/latex/hierarchy.tex	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/latex/hierarchy.tex	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,7 @@
+\section{olsrs3d Class Hierarchy}
+This inheritance list is sorted roughly, but not completely, alphabetically:\begin{CompactList}
+\item \contentsline{section}{Obj\_\-to\_\-ip}{\pageref{structObj__to__ip}}{}
+\item \contentsline{section}{olsr\_\-con}{\pageref{structolsr__con}}{}
+\item \contentsline{section}{olsr\_\-neigh\_\-list}{\pageref{structolsr__neigh__list}}{}
+\item \contentsline{section}{olsr\_\-node}{\pageref{structolsr__node}}{}
+\end{CompactList}

Added: trunk/apps/olsrs3d/doxygen/latex/main_8c.tex
===================================================================
--- trunk/apps/olsrs3d/doxygen/latex/main_8c.tex	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/latex/main_8c.tex	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,1254 @@
+\section{s3d/apps/olsrs3d/main.c File Reference}
+\label{main_8c}\index{s3d/apps/olsrs3d/main.c@{s3d/apps/olsrs3d/main.c}}
+{\tt \#include $<$stdio.h$>$}\par
+{\tt \#include $<$s3d.h$>$}\par
+{\tt \#include $<$s3d\_\-keysym.h$>$}\par
+{\tt \#include $<$time.h$>$}\par
+{\tt \#include $<$string.h$>$}\par
+{\tt \#include $<$math.h$>$}\par
+{\tt \#include $<$getopt.h$>$}\par
+{\tt \#include $<$stdlib.h$>$}\par
+{\tt \#include \char`\"{}olsrs3d.h\char`\"{}}\par
+\subsection*{Defines}
+\begin{CompactItemize}
+\item 
+\#define {\bf SPEED}~10.0
+\end{CompactItemize}
+\subsection*{Functions}
+\begin{CompactItemize}
+\item 
+void {\bf calc\_\-olsr\_\-node\_\-mov} (void)
+\item 
+float {\bf dirt} (float p1[$\,$], float p2[$\,$], float p3[$\,$])
+\item 
+float {\bf dist} (float p1[$\,$], float p2[$\,$])
+\item 
+void {\bf handle\_\-olsr\_\-node} (struct {\bf olsr\_\-node} $\ast${\bf olsr\_\-node})
+\item 
+void {\bf keypress} (struct s3d\_\-evt $\ast$event)
+\item 
+int {\bf main} (int argc, char $\ast$argv[$\,$])
+\item 
+void {\bf mainloop} ()
+\item 
+void {\bf mov\_\-add} (float mov[$\,$], float p[$\,$], float fac)
+\item 
+void {\bf move\_\-olsr\_\-nodes} (void)
+\item 
+void {\bf object\_\-click} (struct s3d\_\-evt $\ast$evt)
+\item 
+void {\bf object\_\-info} (struct s3d\_\-evt $\ast$hrmz)
+\item 
+void {\bf out\_\-of\_\-mem} (void)
+\item 
+void {\bf print\_\-usage} (void)
+\item 
+void {\bf stop} ()
+\end{CompactItemize}
+\subsection*{Variables}
+\begin{CompactItemize}
+\item 
+float {\bf Asp} = 1.0
+\item 
+float {\bf Bottom} = -1.0
+\item 
+float {\bf Cam\-Position} [2][3]
+\item 
+int {\bf Color\-Switch} = 0
+\item 
+{\bf olsr\_\-con} $\ast$ {\bf Con\_\-begin} = NULL
+\item 
+int {\bf Debug} = 0
+\item 
+float {\bf Factor} = 0.5
+\item 
+int {\bf Last\_\-olsr\_\-node\_\-count} = -1
+\item 
+float {\bf Left} = -1.0
+\item 
+{\bf Obj\_\-to\_\-ip} $\ast$ {\bf List\_\-ptr}
+\item 
+int {\bf Net\_\-read\_\-count}
+\item 
+{\bf Obj\_\-to\_\-ip} $\ast$ {\bf Obj\_\-to\_\-ip\_\-end}
+\item 
+{\bf Obj\_\-to\_\-ip} $\ast$ {\bf Obj\_\-to\_\-ip\_\-head}
+\item 
+char {\bf Olsr\_\-host} [256]
+\item 
+int {\bf Olsr\_\-ip\_\-label\_\-obj} = -1
+\item 
+int {\bf Olsr\_\-node\_\-count} = 0
+\item 
+int {\bf Olsr\_\-node\_\-count\_\-obj} = -1
+\item 
+int {\bf Olsr\_\-node\_\-hna\_\-net}
+\item 
+int {\bf Olsr\_\-node\_\-inet\_\-obj}
+\item 
+int {\bf Olsr\_\-node\_\-obj}
+\item 
+{\bf olsr\_\-node} $\ast$ {\bf Olsr\_\-root} = NULL
+\item 
+int {\bf Rotate\-Speed} = 2
+\item 
+int {\bf Rotate\-Switch} = 0
+\item 
+static struct timespec {\bf sleep\_\-time} = \{ 0, 100 $\ast$ 1000 $\ast$ 1000 \}
+\item 
+int {\bf Zero\-Point}
+\item 
+float {\bf Zero\-Position} [3] = \{0,0,0\}
+\item 
+int {\bf Zp\_\-rotate} = 0
+\end{CompactItemize}
+
+
+\subsection{Define Documentation}
+\index{main.c@{main.c}!SPEED@{SPEED}}
+\index{SPEED@{SPEED}!main.c@{main.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define SPEED~10.0}\label{main_8c_ac3553b3932cbfeeac4526ce7ca0336b}
+
+
+
+
+Definition at line 37 of file main.c.
+
+\subsection{Function Documentation}
+\index{main.c@{main.c}!calc_olsr_node_mov@{calc\_\-olsr\_\-node\_\-mov}}
+\index{calc_olsr_node_mov@{calc\_\-olsr\_\-node\_\-mov}!main.c@{main.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void calc\_\-olsr\_\-node\_\-mov (void)}\label{main_8c_668e36a25680cc3e0ac4d85a418a838a}
+
+
+
+
+Definition at line 400 of file main.c.
+
+References Con\_\-begin, dirt(), Factor, olsr\_\-con::left\_\-etx, olsr\_\-con::left\_\-olsr\_\-node, mov\_\-add(), olsr\_\-node::mov\_\-vec, olsr\_\-con::next\_\-olsr\_\-con, olsr\_\-node::pos\_\-vec, olsr\_\-con::right\_\-etx, and olsr\_\-con::right\_\-olsr\_\-node.
+
+Referenced by mainloop().
+
+\footnotesize\begin{verbatim}400                                 {
+401 
+402         float distance;
+403         float tmp_mov_vec[3];
+404         float f;
+405         struct olsr_con *olsr_con = Con_begin;
+406 
+407         while ( olsr_con != NULL ) {
+408 
+409                 if ( ( olsr_con->left_etx != 0.0 ) && ( olsr_con->right_etx != 0.0  ) ) {
+410 
+411                         distance = dirt( olsr_con->left_olsr_node->pos_vec, olsr_con->right_olsr_node->pos_vec, tmp_mov_vec );
+412                         f = ( ( olsr_con->left_etx + olsr_con->right_etx ) / 4.0 ) / distance;
+413 
+414                         /***
+415                          * drift factor - 0.0 < factor < 1.0 ( best results: 0.3 < factor < 0.9
+416                          * small factor: fast and strong drift to neighbours
+417                          ***/
+418                         if ( f < Factor ) f = Factor;
+419 
+420                         mov_add( olsr_con->left_olsr_node->mov_vec, tmp_mov_vec, 1 / f - 1 );
+421                         mov_add( olsr_con->right_olsr_node->mov_vec, tmp_mov_vec, - ( 1 / f - 1 ) );
+422 
+423                 }
+424 
+425                 olsr_con = olsr_con->next_olsr_con;
+426 
+427         }
+428 
+429 }
+\end{verbatim}\normalsize 
+
+
+\index{main.c@{main.c}!dirt@{dirt}}
+\index{dirt@{dirt}!main.c@{main.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}float dirt (float {\em p1}[$\,$], float {\em p2}[$\,$], float {\em p3}[$\,$])}\label{main_8c_753e5e5d6fbcbd893bb466ce045a3316}
+
+
+
+
+Definition at line 138 of file main.c.
+
+References dist().
+
+Referenced by calc\_\-olsr\_\-node\_\-mov(), handle\_\-olsr\_\-node(), and move\_\-olsr\_\-nodes().
+
+\footnotesize\begin{verbatim}139 {
+140         float d;
+141         d=dist(p1,p2);
+142         if (d!=0.0)
+143         {
+144                 p3[0]=p2[0]-p1[0];
+145                 p3[1]=p2[1]-p1[1];
+146                 p3[2]=p2[2]-p1[2];
+147         } else {
+148                 p3[0]=p2[0]=p1[0]=0.0;
+149         }
+150         return(d);
+151 }
+\end{verbatim}\normalsize 
+
+
+\index{main.c@{main.c}!dist@{dist}}
+\index{dist@{dist}!main.c@{main.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}float dist (float {\em p1}[$\,$], float {\em p2}[$\,$])}\label{main_8c_da3bfd6c7ec35068dbcdf966a4628f5e}
+
+
+
+
+Definition at line 114 of file main.c.
+
+Referenced by dirt(), and move\_\-olsr\_\-nodes().
+
+\footnotesize\begin{verbatim}115 {
+116         float p[3];
+117         p[0]=p1[0]-p2[0];
+118         p[1]=p1[1]-p2[1];
+119         p[2]=p1[2]-p2[2];
+120         return (sqrt(p[0]*p[0]   +  p[1]*p[1]  +  p[2]*p[2]));
+121 
+122 }
+\end{verbatim}\normalsize 
+
+
+\index{main.c@{main.c}!handle_olsr_node@{handle\_\-olsr\_\-node}}
+\index{handle_olsr_node@{handle\_\-olsr\_\-node}!main.c@{main.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void handle\_\-olsr\_\-node (struct {\bf olsr\_\-node} $\ast$ {\em olsr\_\-node})}\label{main_8c_de55269b71a792259ef22763327686b9}
+
+
+
+
+Definition at line 186 of file main.c.
+
+References Cam\-Position, Debug, olsr\_\-node::desc\_\-id, olsr\_\-node::desc\_\-length, dirt(), olsr\_\-node::ip, olsr\_\-node::last\_\-seen, olsr\_\-node::left, olsr\_\-con::left\_\-olsr\_\-node, lst\_\-add(), lst\_\-del(), mov\_\-add(), olsr\_\-node::mov\_\-vec, Obj\_\-to\_\-ip::next, olsr\_\-con::next\_\-olsr\_\-con, olsr\_\-neigh\_\-list::next\_\-olsr\_\-neigh\_\-list, olsr\_\-node::node\_\-type, olsr\_\-node::node\_\-type\_\-modified, olsr\_\-con::obj\_\-id, olsr\_\-node::obj\_\-id, Obj\_\-to\_\-ip\_\-end, Obj\_\-to\_\-ip\_\-head, olsr\_\-neigh\_\-list::olsr\_\-con, olsr\_\-node::olsr\_\-neigh\_\-list, Obj\_\-to\_\-ip::olsr\_\-node, Olsr\_\-node\_\-count, Olsr\_\-node\_\-hna\_\-net, Olsr\_\-node\_\-inet\_\-obj, Olsr\_\-node\_\-obj, olsr\_\-node::pos\_\-vec, olsr\_\-con::prev\_\-olsr\_\-con, olsr\_\-node::right, olsr\_\-con::right\_\-olsr\_\-node, olsr\_\-node::visible, and Zero\-Point.
+
+Referenced by mainloop().
+
+\footnotesize\begin{verbatim}186                                                      {
+187 
+188         float distance, angle, angle_rad;
+189         float tmp_mov_vec[3], desc_norm_vec[3] = {0,0,-1};
+190         struct olsr_node *other_node;
+191         struct Obj_to_ip *Obj_to_ip_curr;
+192         struct olsr_neigh_list *olsr_neigh_list, *prev_olsr_neigh_list, *other_node_neigh_list, *tmp_olsr_neigh_list;
+193 
+194         /* no more nodes left */
+195         if ( olsr_node == NULL ) return;
+196 
+197         /* olsr node vanished */
+198         if ( olsr_node->last_seen > 0 ) olsr_node->last_seen--;
+199 
+200         if ( olsr_node->last_seen == 0 && olsr_node->visible ) {
+201 
+202                 if ( Debug ) printf( "olsr node vanished: %s\n", olsr_node->ip );
+203 
+204                 Olsr_node_count--;
+205 
+206                 olsr_node->visible = 0;
+207 
+208                 /* delete shape */
+209                 if ( olsr_node->obj_id != -1 ) {
+210 
+211                         /* remove element from ob2ip list */
+212                         lst_del( olsr_node->obj_id );
+213                         /* remove object from s3d server */
+214                         s3d_del_object( olsr_node->obj_id );
+215 
+216                         olsr_node->obj_id = -1;
+217 
+218                 }
+219 
+220                 if ( olsr_node->desc_id != -1 ) {
+221 
+222                         s3d_del_object( olsr_node->desc_id );
+223                         olsr_node->desc_id = -1;
+224 
+225                 }
+226 
+227                 /* delete olsr connections of this node */
+228                 olsr_neigh_list = olsr_node->olsr_neigh_list;
+229 
+230                 while ( olsr_neigh_list != NULL ) {
+231 
+232                         /* get connection list of 'other' node */
+233                         if ( olsr_neigh_list->olsr_con->left_olsr_node == olsr_node ) {
+234                                 other_node = olsr_neigh_list->olsr_con->right_olsr_node;
+235                         } else {
+236                                 other_node = olsr_neigh_list->olsr_con->left_olsr_node;
+237                         }
+238 
+239                         /* find this connection in 'other' nodes connection list ... */
+240                         prev_olsr_neigh_list = NULL;
+241                         other_node_neigh_list = other_node->olsr_neigh_list;
+242 
+243                         while ( other_node_neigh_list != NULL ) {
+244 
+245                                 if ( other_node_neigh_list->olsr_con == olsr_neigh_list->olsr_con ) {
+246 
+247                                         /* and delete it ! */
+248                                         if ( prev_olsr_neigh_list != NULL ) {
+249                                                 /* is first, any or last element in the list */
+250                                                 prev_olsr_neigh_list->next_olsr_neigh_list = other_node_neigh_list->next_olsr_neigh_list;
+251                                         } else {
+252                                                 /* the only element in the list */
+253                                                 other_node->olsr_neigh_list = NULL;
+254                                         }
+255 
+256                                         free( other_node_neigh_list );
+257 
+258                                         break;
+259 
+260                                 }
+261 
+262                                 prev_olsr_neigh_list = other_node_neigh_list;
+263                                 other_node_neigh_list = other_node_neigh_list->next_olsr_neigh_list;
+264 
+265                         }
+266 
+267                         s3d_del_object( olsr_neigh_list->olsr_con->obj_id );
+268 
+269                         /* delete connection */
+270                         if ( olsr_neigh_list->olsr_con->prev_olsr_con != NULL ) olsr_neigh_list->olsr_con->prev_olsr_con->next_olsr_con = olsr_neigh_list->olsr_con->next_olsr_con;
+271                         if ( olsr_neigh_list->olsr_con->next_olsr_con != NULL ) olsr_neigh_list->olsr_con->next_olsr_con->prev_olsr_con = olsr_neigh_list->olsr_con->prev_olsr_con;
+272 
+273                         tmp_olsr_neigh_list = olsr_neigh_list;
+274 
+275                         olsr_neigh_list = olsr_neigh_list->next_olsr_neigh_list;
+276 
+277                         free( tmp_olsr_neigh_list->olsr_con );
+278                         free( tmp_olsr_neigh_list );
+279 
+280                 }
+281 
+282                 olsr_node->olsr_neigh_list = NULL;
+283 
+284         } else if ( olsr_node->visible ) {
+285 
+286                 /* olsr node shape has been modified */
+287                 if ( olsr_node->node_type_modified ) {
+288 
+289                         /* delete old shape */
+290                         if ( olsr_node->obj_id != -1 ) {
+291                                 /* remove element from ob2ip list */
+292                                 lst_del( olsr_node->obj_id );
+293                                 s3d_del_object( olsr_node->obj_id );
+294                         }
+295 
+296                         if ( olsr_node->desc_id != -1 ) s3d_del_object( olsr_node->desc_id );
+297 
+298                         /* create new shape */
+299                         if ( olsr_node->node_type == 1 ) {
+300                                 /* olsr node offers internet access */
+301                                 olsr_node->obj_id = s3d_clone( Olsr_node_inet_obj );
+302                         } else if ( olsr_node->node_type == 2 ) {
+303                                 /* via hna announced network */
+304                                 olsr_node->obj_id = s3d_clone( Olsr_node_hna_net );
+305                         } else {
+306                                 /* normal olsr node */
+307                                 olsr_node->obj_id = s3d_clone( Olsr_node_obj );
+308                         }
+309 
+310                         s3d_flags_on( olsr_node->obj_id, S3D_OF_VISIBLE|S3D_OF_SELECTABLE);
+311 
+312                         /* link newly created object to ZeroPoint */
+313                         s3d_link( olsr_node->obj_id, ZeroPoint );
+314                         /* add object_id and olsr_node to linked list */
+315                         lst_add(olsr_node->obj_id,&olsr_node);
+316 
+317                         /* create olsr node text and attach (link) it to the node */
+318                         olsr_node->desc_id = s3d_draw_string( olsr_node->ip, &olsr_node->desc_length );
+319                         s3d_link( olsr_node->desc_id, olsr_node->obj_id );
+320                         s3d_translate( olsr_node->desc_id, - olsr_node->desc_length / 2, -2, 0 );
+321                         s3d_flags_on( olsr_node->desc_id, S3D_OF_VISIBLE );
+322 
+323                         olsr_node->node_type_modified = 0;
+324 
+325                 }
+326 
+327 
+328                 /* rotate node description so that they are always readable */
+329                 tmp_mov_vec[0] = CamPosition[0][0] - olsr_node->pos_vec[0];
+330                 tmp_mov_vec[1] = 0;   /* we are not interested in the y value */
+331                 tmp_mov_vec[2] = CamPosition[0][2] - olsr_node->pos_vec[2];
+332 
+333                 angle = s3d_vector_angle( desc_norm_vec, tmp_mov_vec );
+334 
+335                 /* take care of inverse cosinus */
+336                 if ( tmp_mov_vec[0] > 0 ) {
+337                         angle_rad = 90.0/M_PI - angle;
+338                         angle = 180 - ( 180.0/M_PI * angle );
+339                 } else {
+340                         angle_rad = 90.0/M_PI + angle;
+341                         angle = 180 + ( 180.0/M_PI * angle );
+342                 }
+343 
+344                 s3d_rotate( olsr_node->desc_id, 0, angle , 0 );
+345                 s3d_translate( olsr_node->desc_id, -cos(angle_rad)*olsr_node->desc_length/2 ,-1.5, sin(angle_rad)*olsr_node->desc_length/2 );
+346 
+347 
+348                 /* drift away from unrelated nodes */
+349                 Obj_to_ip_curr = Obj_to_ip_head->next;
+350                 while ( Obj_to_ip_curr != Obj_to_ip_end ) {
+351 
+352                         /* myself ... */
+353                         if ( olsr_node != Obj_to_ip_curr->olsr_node ) {
+354 
+355                                 olsr_neigh_list = olsr_node->olsr_neigh_list;
+356                                 while ( olsr_neigh_list != NULL ) {
+357 
+358                                         /* nodes are related */
+359                                         if ( ( olsr_neigh_list->olsr_con->left_olsr_node->visible == 1 ) && ( olsr_neigh_list->olsr_con->right_olsr_node->visible == 1 ) ) {
+360 
+361                                                 if ( ( olsr_neigh_list->olsr_con->left_olsr_node == Obj_to_ip_curr->olsr_node ) || (  olsr_neigh_list->olsr_con->right_olsr_node == Obj_to_ip_curr->olsr_node ) ) break;
+362 
+363                                         }
+364 
+365                                         olsr_neigh_list = olsr_neigh_list->next_olsr_neigh_list;
+366 
+367                                 }
+368 
+369                                 /* nodes are not related - so drift */
+370                                 if ( olsr_neigh_list == NULL ) {
+371 
+372                                         distance = dirt( olsr_node->pos_vec, Obj_to_ip_curr->olsr_node->pos_vec, tmp_mov_vec );
+373                                         if ( distance < 0.1 ) distance = 0.1;
+374                                         mov_add( olsr_node->mov_vec, tmp_mov_vec,-100 / ( distance * distance ) );
+375                                         mov_add( Obj_to_ip_curr->olsr_node->mov_vec, tmp_mov_vec, 100 / ( distance * distance ) );
+376 
+377                                 }
+378 
+379                         }
+380 
+381                         Obj_to_ip_curr = Obj_to_ip_curr->next;
+382 
+383                 }
+384 
+385         }
+386 
+387         handle_olsr_node( olsr_node->left );
+388         handle_olsr_node( olsr_node->right );
+389 
+390 }
+\end{verbatim}\normalsize 
+
+
+\index{main.c@{main.c}!keypress@{keypress}}
+\index{keypress@{keypress}!main.c@{main.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void keypress (struct s3d\_\-evt $\ast$ {\em event})}\label{main_8c_2f5982986645c1e7a202d72bc5e633eb}
+
+
+
+
+Definition at line 690 of file main.c.
+
+References Color\-Switch, Factor, lst\_\-out(), Rotate\-Speed, Rotate\-Switch, stop(), Zero\-Point, and Zero\-Position.
+
+Referenced by main().
+
+\footnotesize\begin{verbatim}690                                      {
+691 
+692         int key;
+693         key=*((unsigned short *)event->buf);
+694         switch(key) {
+695                 case S3DK_ESCAPE: /* esc -> close olsr */
+696                         stop();
+697                         break;
+698                 case 15: /* strg + o */
+699                         lst_out(); /* output ob2ip list */
+700                         break;
+701                 case 'c': /* c -> color on/off */
+702                         if(ColorSwitch) ColorSwitch = 0;
+703                         else ColorSwitch = 1;
+704                         break;
+705                 case 'r': /* r -> rotate start/stop*/
+706                         if(RotateSwitch) RotateSwitch = 0;
+707                         else RotateSwitch = 1;
+708                         break;
+709                 case '+': /* + -> rotate speed increase*/
+710                         if(RotateSwitch && RotateSpeed < 10)
+711                                 RotateSpeed++;
+712                         break;
+713                 case '-': /* - -> rotate speed decrease*/
+714                         if(RotateSwitch && RotateSpeed > 1)
+715                                 RotateSpeed--;
+716                         break;
+717                 case 16: /* strg + p -> reset nodes ( zeroPoint to 0,0,0 ) */
+718                         s3d_translate(ZeroPoint,0.0,0.0,0.0);
+719                         ZeroPosition[0] = ZeroPosition[1] = ZeroPosition[2] = 0.0;
+720                         break;
+721                 case S3DK_UP: /* arrow up -> move nodes up */
+722                         ZeroPosition[1]++;
+723                         s3d_translate(ZeroPoint,ZeroPosition[0],ZeroPosition[1],ZeroPosition[2]);
+724                         break;
+725                 case S3DK_DOWN: /* arrow down -> move nodes down */
+726                         ZeroPosition[1]--;
+727                         s3d_translate(ZeroPoint,ZeroPosition[0],ZeroPosition[1],ZeroPosition[2]);
+728                         break;
+729                 case S3DK_PAGEUP: /* page up -> change factor in calc_olsr_node_mov */
+730                         if(Factor < 0.9)
+731                                 Factor += 0.1;
+732                         break;
+733                 case S3DK_PAGEDOWN: /* page down -> change factor in calc_olsr_node_mov */
+734                         if(Factor > 0.3)
+735                                 Factor -= 0.1;
+736                         break;
+737         }
+738 }
+\end{verbatim}\normalsize 
+
+
+\index{main.c@{main.c}!main@{main}}
+\index{main@{main}!main.c@{main.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int main (int {\em argc}, char $\ast$ {\em argv}[$\,$])}\label{main_8c_0ddf1224851353fc92bfbff6f499fa97}
+
+
+
+
+Definition at line 804 of file main.c.
+
+References Debug, keypress(), lbuf, lst\_\-initialize(), mainloop(), net\_\-init(), net\_\-quit(), object\_\-click(), object\_\-info(), Olsr\_\-host, Olsr\_\-node\_\-hna\_\-net, Olsr\_\-node\_\-inet\_\-obj, Olsr\_\-node\_\-obj, print\_\-usage(), stop(), and Zero\-Point.
+
+\footnotesize\begin{verbatim}804                                    {
+805 
+806         int optchar;
+807         strncpy( Olsr_host, "127.0.0.1", 256 );
+808         lbuf[0] = '\0';   /* init lbuf */
+809 
+810         while ( ( optchar = getopt ( argc, argv, "dhH:" ) ) != -1 ) {
+811 
+812                 switch ( optchar ) {
+813 
+814                         case 'd':
+815                                 Debug = 1;
+816                                 break;
+817 
+818                         case 'H':
+819                                 strncpy( Olsr_host, optarg, 256 );
+820                                 break;
+821 
+822                         case 'h':
+823                         default:
+824                                 print_usage();
+825                                 return (0);
+826 
+827                 }
+828 
+829         }
+830 
+831         if ( Debug ) printf( "debug mode enabled ...\n" );
+832 
+833         /* initialize obj2ip linked list */
+834         lst_initialize();
+835 
+836         /* delete olsrs3d options */
+837         while ( ( optind < argc ) && ( argv[optind][0] != '-' ) ) optind++;   /* optind may point to ip addr of '-H' */
+838         optind--;
+839         argv[optind] = argv[0];   /* save program path */
+840         argc -= optind;   /* jump over olsrs3d options */
+841         argv += optind;
+842 
+843         /* set extern int optind = 0 for parse_args in io.c */
+844         optind = 0;
+845 
+846 
+847         if (!net_init(Olsr_host))
+848         {
+849                 if (!s3d_init(&argc,&argv,"olsrs3d"))
+850                 {
+851                         s3d_set_callback(S3D_EVENT_OBJ_INFO,object_info);
+852                         s3d_set_callback(S3D_EVENT_OBJ_CLICK,object_click);
+853                         s3d_set_callback(S3D_EVENT_KEY,keypress);
+854                         s3d_set_callback(S3D_EVENT_QUIT,stop);
+855                         if (s3d_select_font("vera"))
+856                                 printf("font not found\n");
+857                         Olsr_node_obj = s3d_import_3ds_file( "objs/accesspoint.3ds" );
+858                         Olsr_node_inet_obj = s3d_import_3ds_file( "objs/accesspoint_inet.3ds" );
+859                         Olsr_node_hna_net = s3d_import_3ds_file( "objs/internet.3ds" );
+860                         ZeroPoint = s3d_new_object();
+861                         s3d_mainloop(mainloop);
+862                         s3d_quit();
+863                         net_quit();
+864                 }
+865         }
+866         return(0);
+867 }
+\end{verbatim}\normalsize 
+
+
+\index{main.c@{main.c}!mainloop@{mainloop}}
+\index{mainloop@{mainloop}!main.c@{main.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void mainloop ()}\label{main_8c_896df4ffe3f986ad843e4d191cd712b3}
+
+
+
+
+Definition at line 624 of file main.c.
+
+References Bottom, calc\_\-olsr\_\-node\_\-mov(), handle\_\-olsr\_\-node(), Last\_\-olsr\_\-node\_\-count, Left, move\_\-olsr\_\-nodes(), net\_\-main(), Net\_\-read\_\-count, Olsr\_\-node\_\-count, Olsr\_\-node\_\-count\_\-obj, Olsr\_\-root, Rotate\-Speed, Rotate\-Switch, sleep\_\-time, Zero\-Point, and Zp\_\-rotate.
+
+Referenced by main().
+
+\footnotesize\begin{verbatim}624                 {
+625 
+626         int net_result;   /* result of function net_main */
+627         char nc_str[20];
+628 
+629         /* calculate new movement vector */
+630         calc_olsr_node_mov();
+631 
+632         /* prepare nodes */
+633         handle_olsr_node( Olsr_root );
+634 
+635         /* move it */
+636         move_olsr_nodes();
+637 
+638         /* if we have more or less nodes now - redraw node count */
+639         if ( Olsr_node_count != Last_olsr_node_count ) {
+640 
+641                 if ( Olsr_node_count_obj != -1 ) s3d_del_object( Olsr_node_count_obj );
+642                 snprintf( nc_str, 20, "node count: %d", Olsr_node_count );
+643                 Olsr_node_count_obj = s3d_draw_string( nc_str, NULL );
+644                 s3d_link( Olsr_node_count_obj, 0 );
+645                 s3d_flags_on( Olsr_node_count_obj, S3D_OF_VISIBLE );
+646                 s3d_scale( Olsr_node_count_obj, 0.2 );
+647                 s3d_translate( Olsr_node_count_obj, Left*3.0, -Bottom*3.0-0.2, -3.0 );
+648 
+649                 Last_olsr_node_count = Olsr_node_count;
+650 
+651         }
+652 
+653         /* read data from socket */
+654         Net_read_count = 0;
+655         while ( ( net_result = net_main() ) != 0 ) {
+656                 if ( net_result == -1 ) {
+657                         s3d_quit();
+658                         break;
+659                 }
+660         }
+661 
+662         if(RotateSwitch) {
+663                 Zp_rotate = (Zp_rotate+RotateSpeed)%360;
+664                 s3d_rotate(ZeroPoint,0,Zp_rotate,0);
+665         }
+666 
+667         nanosleep( &sleep_time, NULL );
+668 
+669         return;
+670 
+671 }
+\end{verbatim}\normalsize 
+
+
+\index{main.c@{main.c}!mov_add@{mov\_\-add}}
+\index{mov_add@{mov\_\-add}!main.c@{main.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void mov\_\-add (float {\em mov}[$\,$], float {\em p}[$\,$], float {\em fac})}\label{main_8c_f4369a866dcd049e2642e137507e8ff1}
+
+
+
+
+Definition at line 166 of file main.c.
+
+Referenced by calc\_\-olsr\_\-node\_\-mov(), handle\_\-olsr\_\-node(), and move\_\-olsr\_\-nodes().
+
+\footnotesize\begin{verbatim}167 {
+168 /*      if (fac>1000)
+169                 return;
+170         fac=1000; */
+171         mov[0]+=fac*p[0];
+172         mov[1]+=fac*p[1];
+173         mov[2]+=fac*p[2];
+174 }
+\end{verbatim}\normalsize 
+
+
+\index{main.c@{main.c}!move_olsr_nodes@{move\_\-olsr\_\-nodes}}
+\index{move_olsr_nodes@{move\_\-olsr\_\-nodes}!main.c@{main.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void move\_\-olsr\_\-nodes (void)}\label{main_8c_b8d0d8cf5ac8914802be645e15241b77}
+
+
+
+
+Definition at line 439 of file main.c.
+
+References olsr\_\-con::color, Color\-Switch, Con\_\-begin, dirt(), dist(), olsr\_\-con::left\_\-etx, olsr\_\-con::left\_\-olsr\_\-node, mov\_\-add(), olsr\_\-node::mov\_\-vec, olsr\_\-con::next\_\-olsr\_\-con, olsr\_\-con::obj\_\-id, olsr\_\-node::obj\_\-id, olsr\_\-node::pos\_\-vec, olsr\_\-con::rgb, olsr\_\-con::right\_\-etx, olsr\_\-con::right\_\-olsr\_\-node, and olsr\_\-node::visible.
+
+Referenced by mainloop().
+
+\footnotesize\begin{verbatim}439                              {
+440 
+441         float null_vec[3] = {0,0,0}, vertex_buf[6];
+442         float tmp_mov_vec[3];
+443         float distance, etx, rgb;
+444         struct olsr_con *olsr_con = Con_begin;
+445 
+446         while ( olsr_con != NULL ) {
+447 
+448                 /* move left olsr node if it has not been moved yet */
+449                 if ( !( ( olsr_con->left_olsr_node->mov_vec[0] == 0 ) && ( olsr_con->left_olsr_node->mov_vec[1] == 0 ) && ( olsr_con->left_olsr_node->mov_vec[2] == 0 ) ) && olsr_con->left_olsr_node->visible ) {
+450 
+451                         distance = dirt( olsr_con->left_olsr_node->pos_vec, null_vec, tmp_mov_vec );
+452                         mov_add( olsr_con->left_olsr_node->mov_vec, tmp_mov_vec, distance / 100 ); /* move a little bit to point zero */
+453                         mov_add( olsr_con->left_olsr_node->mov_vec, tmp_mov_vec, 1 ); /* move a little bit to point zero */
+454 
+455                         if ( ( distance = dist( olsr_con->left_olsr_node->mov_vec, null_vec ) ) > 10.0 ) {
+456                                 mov_add( olsr_con->left_olsr_node->pos_vec, olsr_con->left_olsr_node->mov_vec, 1.0 / ( ( float ) distance ) );
+457                         } else {
+458                                 mov_add( olsr_con->left_olsr_node->pos_vec, olsr_con->left_olsr_node->mov_vec, 0.1 );
+459                         }
+460 
+461                         s3d_translate( olsr_con->left_olsr_node->obj_id, olsr_con->left_olsr_node->pos_vec[0], olsr_con->left_olsr_node->pos_vec[1], olsr_con->left_olsr_node->pos_vec[2] );
+462 
+463                         /* reset movement vector */
+464                         olsr_con->left_olsr_node->mov_vec[0] = olsr_con->left_olsr_node->mov_vec[1] = olsr_con->left_olsr_node->mov_vec[2] = 0.0;
+465 
+466                 }
+467 
+468                 /* move right olsr node if it has not been moved yet */
+469                 if ( !( ( olsr_con->right_olsr_node->mov_vec[0] == 0 ) && ( olsr_con->right_olsr_node->mov_vec[1] == 0 ) && ( olsr_con->right_olsr_node->mov_vec[2] == 0 ) ) && olsr_con->right_olsr_node->visible ) {
+470 
+471                         distance = dirt( olsr_con->right_olsr_node->pos_vec, null_vec, tmp_mov_vec );
+472                         mov_add( olsr_con->right_olsr_node->mov_vec, tmp_mov_vec, distance / 100 ); /* move a little bit to point zero */
+473                         mov_add( olsr_con->right_olsr_node->mov_vec, tmp_mov_vec, 1 ); /* move a little bit to point zero */
+474 
+475                         if ( ( distance = dist( olsr_con->right_olsr_node->mov_vec, null_vec ) ) > 10.0 ) {
+476                                 mov_add( olsr_con->right_olsr_node->pos_vec, olsr_con->right_olsr_node->mov_vec, 1.0 / ( ( float ) distance ) );
+477                         } else {
+478                                 mov_add( olsr_con->right_olsr_node->pos_vec, olsr_con->right_olsr_node->mov_vec, 0.1 );
+479                         }
+480 
+481                         s3d_translate( olsr_con->right_olsr_node->obj_id, olsr_con->right_olsr_node->pos_vec[0], olsr_con->right_olsr_node->pos_vec[1], olsr_con->right_olsr_node->pos_vec[2] );
+482 
+483                         /* reset movement vector */
+484                         olsr_con->right_olsr_node->mov_vec[0] = olsr_con->right_olsr_node->mov_vec[1] = olsr_con->right_olsr_node->mov_vec[2] = 0.0;
+485 
+486                 }
+487 
+488 
+489                 /* move connection between left and right olsr node */
+490                 vertex_buf[0] = olsr_con->left_olsr_node->pos_vec[0];
+491                 vertex_buf[1] = olsr_con->left_olsr_node->pos_vec[1];
+492                 vertex_buf[2] = olsr_con->left_olsr_node->pos_vec[2];
+493                 vertex_buf[3] = olsr_con->right_olsr_node->pos_vec[0];
+494                 vertex_buf[4] = olsr_con->right_olsr_node->pos_vec[1];
+495                 vertex_buf[5] = olsr_con->right_olsr_node->pos_vec[2];
+496 
+497                 s3d_pep_vertices( olsr_con->obj_id, vertex_buf, 2 );
+498 
+499 
+500                 if ( ColorSwitch ) {
+501 
+502                         /* HNA */
+503                         if ( olsr_con->left_etx == -1000.00 ) {
+504 
+505                                 if(olsr_con->color != 1) {
+506                                         s3d_pep_material( olsr_con->obj_id,
+507                                                                    0.0,0.0,1.0,
+508                                                                    0.0,0.0,1.0,
+509                                                                    0.0,0.0,1.0);
+510                                         olsr_con->color = 1;
+511                                 }
+512 
+513                         } else {
+514 
+515                                 etx = ( olsr_con->left_etx + olsr_con->right_etx ) / 2.0;
+516 
+517                                 /* very good link - bright blue */
+518                                 if ( ( etx >= 1.0 ) && ( etx < 1.5 ) ) {
+519 
+520                                         if(olsr_con->color != 2) {
+521                                                 s3d_pep_material( olsr_con->obj_id,
+522                                                                 0.5,1.0,1.0,
+523                                                                 0.5,1.0,1.0,
+524                                                                 0.5,1.0,1.0);
+525                                                 olsr_con->color = 2;
+526                                         }
+527 
+528                                 /* good link - bright yellow */
+529                                 } else if ( ( etx >= 1.5 ) && ( etx < 2.0 ) ) {
+530 
+531                                         rgb = 2.0 - etx;
+532                                         if( olsr_con->color != 3 || (olsr_con->color == 3 && (int) rintf(olsr_con->rgb * 10) !=  (int) rintf(rgb * 10))) {
+533                                                 s3d_pep_material( olsr_con->obj_id,
+534                                                                 1.0,1.0,rgb,
+535                                                                 1.0,1.0,rgb,
+536                                                                 1.0,1.0,rgb);
+537                                                 olsr_con->color = 3;
+538 
+539                                                 olsr_con->rgb =  rgb;
+540                                         }
+541 
+542                                 /* not so good link - orange */
+543                                 } else if ( ( etx >= 2.0 ) && ( etx < 3.0 ) ) {
+544 
+545                                         rgb = 1.5 - ( etx / 2.0 );
+546                                         if( olsr_con->color != 4 || (olsr_con->color == 4 && (int) rintf(olsr_con->rgb * 10) !=  (int) rintf(rgb * 10))) {
+547                                                 s3d_pep_material( olsr_con->obj_id,
+548                                                                 1.0,rgb,0.0,
+549                                                                 1.0,rgb,0.0,
+550                                                                 1.0,rgb,0.0);
+551                                                 olsr_con->color = 4;
+552 
+553                                                 olsr_con->rgb = rgb;
+554                                         }
+555 
+556                                 /* bad link (almost dead) - brown */
+557                                 } else if ( ( etx >= 3.0 ) && ( etx < 5.0 ) ) {
+558 
+559                                         rgb = 1.75 - ( etx / 4.0 );
+560 
+561                                         if( olsr_con->color != 5 || (olsr_con->color == 5 && (int) rintf(olsr_con->rgb * 10) !=  (int) rintf(rgb * 10)) ) {
+562 
+563                                                 s3d_pep_material( olsr_con->obj_id,
+564                                                                 rgb,rgb - 0.5,0.0,
+565                                                                 rgb,rgb - 0.5,0.0,
+566                                                                 rgb,rgb - 0.5,0.0);
+567                                                 olsr_con->color = 5;
+568 
+569                                                 olsr_con->rgb = rgb;
+570                                         }
+571 
+572                                 /* zombie link - grey */
+573                                 } else if ( ( etx >= 5.0 ) && ( etx < 1000.0 ) ) {
+574 
+575                                         rgb = 1000.0 / ( 1500.0 + etx );
+576 
+577                                         if( olsr_con->color != 6 || (olsr_con->color == 6 && (int) rintf(olsr_con->rgb * 10) !=  (int) rintf(rgb * 10)) ) {
+578 
+579                                                 s3d_pep_material( olsr_con->obj_id,
+580                                                                 rgb,rgb,rgb,
+581                                                                 rgb,rgb,rgb,
+582                                                                 rgb,rgb,rgb);
+583                                                 olsr_con->color = 6;
+584 
+585                                                 olsr_con->rgb = rgb;
+586                                         }
+587 
+588                                 /* wtf - dark grey */
+589                                 } else {
+590 
+591                                         if(olsr_con->color != 7) {
+592                                                 s3d_pep_material( olsr_con->obj_id,
+593                                                                 0.3,0.3,0.3,
+594                                                                 0.3,0.3,0.3,
+595                                                                 0.3,0.3,0.3);
+596                                                 olsr_con->color = 7;
+597                                         }
+598 
+599                                 }
+600 
+601                         }
+602 
+603                 } else {
+604 
+605                         if(olsr_con->color != 0) {
+606                                 s3d_pep_material( olsr_con->obj_id,
+607                                                         1.0,1.0,1.0,
+608                                                         1.0,1.0,1.0,
+609                                                         1.0,1.0,1.0);
+610                                 olsr_con->color = 0;
+611                         }
+612 
+613                 }
+614 
+615 
+616                 olsr_con = olsr_con->next_olsr_con;
+617 
+618         }
+619 
+620 }
+\end{verbatim}\normalsize 
+
+
+\index{main.c@{main.c}!object_click@{object\_\-click}}
+\index{object_click@{object\_\-click}!main.c@{main.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void object\_\-click (struct s3d\_\-evt $\ast$ {\em evt})}\label{main_8c_ddbd46dad32b89cec68daa03a08f3582}
+
+
+
+
+Definition at line 746 of file main.c.
+
+References Bottom, olsr\_\-node::ip, Left, lst\_\-search(), and Olsr\_\-ip\_\-label\_\-obj.
+
+Referenced by main().
+
+\footnotesize\begin{verbatim}747 {
+748         int oid;
+749         /* float distance,tmp_vector[3]; */
+750         char ip_str[50];
+751         struct olsr_node *olsr_node;
+752         oid=(int)*((unsigned long *)evt->buf);
+753         olsr_node = *lst_search(oid);
+754         /* printf("obj2ip: search return %s\n",olsr_node->ip); */
+755         /*
+756         distance = dirt(CamPosition[0],olsr_node->pos_vec,tmp_vector);
+757         mov_add(ZeroPosition,tmp_vector,1.0);
+758         s3d_translate(ZeroPoint,ZeroPosition[0] * -1,ZeroPosition[1] * -1,ZeroPosition[2] * -1);
+759         */
+760         if ( Olsr_ip_label_obj != -1 ) s3d_del_object( Olsr_ip_label_obj );
+761         /*Olsr_ip_label_obj = s3d_clone(olsr_node->desc_id);*/
+762         snprintf( ip_str, 50, "ip: %s", olsr_node->ip );
+763         Olsr_ip_label_obj = s3d_draw_string( ip_str, NULL );
+764         s3d_link( Olsr_ip_label_obj, 0 );
+765         s3d_flags_on( Olsr_ip_label_obj, S3D_OF_VISIBLE );
+766         s3d_scale( Olsr_ip_label_obj, 0.2 );
+767         s3d_translate( Olsr_ip_label_obj, Left*3.0, -Bottom*3.0-0.6, -3.0 );
+768 }
+\end{verbatim}\normalsize 
+
+
+\index{main.c@{main.c}!object_info@{object\_\-info}}
+\index{object_info@{object\_\-info}!main.c@{main.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void object\_\-info (struct s3d\_\-evt $\ast$ {\em hrmz})}\label{main_8c_b7f2ab10a4f7d5ef94d5205fc6147cc4}
+
+
+
+
+Definition at line 777 of file main.c.
+
+References Asp, Bottom, Cam\-Position, and Left.
+
+Referenced by main().
+
+\footnotesize\begin{verbatim}778 {
+779         struct s3d_obj_info *inf;
+780         inf=(struct s3d_obj_info *)hrmz->buf;
+781         if (inf->object==0)
+782         {
+783                 CamPosition[0][0] = inf->trans_x;
+784                 CamPosition[0][1] = inf->trans_y;
+785                 CamPosition[0][2] = inf->trans_z;
+786                 CamPosition[1][0] = inf->rot_x;
+787                 CamPosition[1][1] = inf->rot_y;
+788                 CamPosition[1][2] = inf->rot_z;
+789                 Asp=inf->scale;
+790                 if (Asp>1.0) /* wide screen */
+791                 {
+792                         Bottom=-1.0;
+793                         Left=-Asp;
+794                 } else {  /* high screen */
+795                         Bottom=(-1.0/Asp);
+796                         Left=-1.0;
+797 
+798                 }
+799 
+800         }
+801         /* printf("%f %f %f\n",inf->trans_x,inf->trans_y,inf->trans_z); */
+802 }
+\end{verbatim}\normalsize 
+
+
+\index{main.c@{main.c}!out_of_mem@{out\_\-of\_\-mem}}
+\index{out_of_mem@{out\_\-of\_\-mem}!main.c@{main.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void out\_\-of\_\-mem (void)}\label{main_8c_be0835e7acb76ea987ac80769302d90a}
+
+
+
+
+Definition at line 94 of file main.c.
+
+Referenced by add\_\-olsr\_\-con(), get\_\-olsr\_\-node(), lst\_\-add(), and lst\_\-initialize().
+
+\footnotesize\begin{verbatim}94                         {
+95 
+96         printf( "Sorry - you ran out of memory !\n" );
+97         exit(8);
+98 
+99 }
+\end{verbatim}\normalsize 
+
+
+\index{main.c@{main.c}!print_usage@{print\_\-usage}}
+\index{print_usage@{print\_\-usage}!main.c@{main.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void print\_\-usage (void)}\label{main_8c_a1187b70998f73cdb598833d6afaa30a}
+
+
+
+
+Definition at line 75 of file main.c.
+
+Referenced by main().
+
+\footnotesize\begin{verbatim}75                          {
+76 
+77         printf( "Usage is olsrs3d [options] [-- [s3d options]]\n" );
+78         printf( "olsrs3d options:\n" );
+79         printf( "   -h\tprint this short help\n" );
+80         printf( "   -d\tenable debug mode\n" );
+81         printf( "   -H\tconnect to olsr node [default: localhost]\n" );
+82         s3d_usage();
+83 
+84 }
+\end{verbatim}\normalsize 
+
+
+\index{main.c@{main.c}!stop@{stop}}
+\index{stop@{stop}!main.c@{main.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void stop ()}\label{main_8c_8c528baf37154d347366083f0f816846}
+
+
+
+
+Definition at line 675 of file main.c.
+
+References net\_\-quit().
+
+Referenced by keypress(), and main().
+
+\footnotesize\begin{verbatim}675             {
+676 
+677         s3d_quit();
+678         net_quit();
+679 
+680 }
+\end{verbatim}\normalsize 
+
+
+
+
+\subsection{Variable Documentation}
+\index{main.c@{main.c}!Asp@{Asp}}
+\index{Asp@{Asp}!main.c@{main.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}float {\bf Asp} = 1.0}\label{main_8c_fb33da16fedfac392508c8ca439aca5d}
+
+
+
+
+Definition at line 56 of file main.c.
+
+Referenced by object\_\-info().\index{main.c@{main.c}!Bottom@{Bottom}}
+\index{Bottom@{Bottom}!main.c@{main.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}float {\bf Bottom} = -1.0}\label{main_8c_f23a6ad2da4511ef430c4f522ae9f4cc}
+
+
+
+
+Definition at line 57 of file main.c.
+
+Referenced by mainloop(), object\_\-click(), and object\_\-info().\index{main.c@{main.c}!CamPosition@{CamPosition}}
+\index{CamPosition@{CamPosition}!main.c@{main.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}float {\bf Cam\-Position}[2][3]}\label{main_8c_5d58294b80563f797d1a14d1d739f52b}
+
+
+
+
+Definition at line 60 of file main.c.
+
+Referenced by handle\_\-olsr\_\-node(), and object\_\-info().\index{main.c@{main.c}!ColorSwitch@{ColorSwitch}}
+\index{ColorSwitch@{ColorSwitch}!main.c@{main.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int {\bf Color\-Switch} = 0}\label{main_8c_aaca6648d8e9266d2fbeb21a6a4f4745}
+
+
+
+
+Definition at line 64 of file main.c.
+
+Referenced by keypress(), and move\_\-olsr\_\-nodes().\index{main.c@{main.c}!Con_begin@{Con\_\-begin}}
+\index{Con_begin@{Con\_\-begin}!main.c@{main.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}struct {\bf olsr\_\-con}$\ast$ {\bf Con\_\-begin} = NULL}\label{main_8c_0643a36891539929d987e2ee83ff81d1}
+
+
+
+
+Definition at line 45 of file main.c.
+
+Referenced by add\_\-olsr\_\-con(), calc\_\-olsr\_\-node\_\-mov(), and move\_\-olsr\_\-nodes().\index{main.c@{main.c}!Debug@{Debug}}
+\index{Debug@{Debug}!main.c@{main.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int {\bf Debug} = 0}\label{main_8c_923774364cedbc16baa0bc05e9be136c}
+
+
+
+
+Definition at line 41 of file main.c.
+
+Referenced by get\_\-olsr\_\-node(), handle\_\-olsr\_\-node(), main(), net\_\-main(), and process\_\-main().\index{main.c@{main.c}!Factor@{Factor}}
+\index{Factor@{Factor}!main.c@{main.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}float {\bf Factor} = 0.5}\label{main_8c_98d8a7901c60f18d6bf9b35998147831}
+
+
+
+
+Definition at line 67 of file main.c.
+
+Referenced by calc\_\-olsr\_\-node\_\-mov(), and keypress().\index{main.c@{main.c}!Last_olsr_node_count@{Last\_\-olsr\_\-node\_\-count}}
+\index{Last_olsr_node_count@{Last\_\-olsr\_\-node\_\-count}!main.c@{main.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int {\bf Last\_\-olsr\_\-node\_\-count} = -1}\label{main_8c_58acad60c78b63554c696703227d0b7b}
+
+
+
+
+Definition at line 49 of file main.c.
+
+Referenced by mainloop().\index{main.c@{main.c}!Left@{Left}}
+\index{Left@{Left}!main.c@{main.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}float {\bf Left} = -1.0}\label{main_8c_6f68bad9075598ca8ede1827c6832376}
+
+
+
+
+Definition at line 58 of file main.c.
+
+Referenced by mainloop(), object\_\-click(), and object\_\-info().\index{main.c@{main.c}!List_ptr@{List\_\-ptr}}
+\index{List_ptr@{List\_\-ptr}!main.c@{main.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}struct {\bf Obj\_\-to\_\-ip} $\ast$ {\bf List\_\-ptr}}\label{main_8c_6a8ff2c3957f5f0ab7dcafcd72b8bd57}
+
+
+
+
+Definition at line 47 of file main.c.
+
+Referenced by lst\_\-add(), lst\_\-del(), lst\_\-initialize(), lst\_\-search(), and move\_\-lst\_\-ptr().\index{main.c@{main.c}!Net_read_count@{Net\_\-read\_\-count}}
+\index{Net_read_count@{Net\_\-read\_\-count}!main.c@{main.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int {\bf Net\_\-read\_\-count}}\label{main_8c_5bcc20f84efa7bd4aafc56a629f2eff3}
+
+
+
+
+Definition at line 52 of file main.c.
+
+Referenced by mainloop(), and net\_\-main().\index{main.c@{main.c}!Obj_to_ip_end@{Obj\_\-to\_\-ip\_\-end}}
+\index{Obj_to_ip_end@{Obj\_\-to\_\-ip\_\-end}!main.c@{main.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}struct {\bf Obj\_\-to\_\-ip} $\ast$ {\bf Obj\_\-to\_\-ip\_\-end}}\label{main_8c_236217b97f5fe65457d8b22c73c5073d}
+
+
+
+
+Definition at line 47 of file main.c.
+
+Referenced by handle\_\-olsr\_\-node(), lst\_\-initialize(), and move\_\-lst\_\-ptr().\index{main.c@{main.c}!Obj_to_ip_head@{Obj\_\-to\_\-ip\_\-head}}
+\index{Obj_to_ip_head@{Obj\_\-to\_\-ip\_\-head}!main.c@{main.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}struct {\bf Obj\_\-to\_\-ip}$\ast$ {\bf Obj\_\-to\_\-ip\_\-head}}\label{main_8c_9494e9e8cbdc4eceb86cb33ff0006785}
+
+
+
+
+Definition at line 47 of file main.c.
+
+Referenced by handle\_\-olsr\_\-node(), lst\_\-initialize(), lst\_\-out(), and move\_\-lst\_\-ptr().\index{main.c@{main.c}!Olsr_host@{Olsr\_\-host}}
+\index{Olsr_host@{Olsr\_\-host}!main.c@{main.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}char {\bf Olsr\_\-host}[256]}\label{main_8c_9034a20840ce47fbec531d2b4a4a9f21}
+
+
+
+
+Definition at line 43 of file main.c.
+
+Referenced by main().\index{main.c@{main.c}!Olsr_ip_label_obj@{Olsr\_\-ip\_\-label\_\-obj}}
+\index{Olsr_ip_label_obj@{Olsr\_\-ip\_\-label\_\-obj}!main.c@{main.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int {\bf Olsr\_\-ip\_\-label\_\-obj} = -1}\label{main_8c_bc4292eef79532d125b616a9e0ec8fa0}
+
+
+
+
+Definition at line 51 of file main.c.
+
+Referenced by object\_\-click().\index{main.c@{main.c}!Olsr_node_count@{Olsr\_\-node\_\-count}}
+\index{Olsr_node_count@{Olsr\_\-node\_\-count}!main.c@{main.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int {\bf Olsr\_\-node\_\-count} = 0}\label{main_8c_86c048bc4aaab319f4d61f7c0e1f056f}
+
+
+
+
+Definition at line 49 of file main.c.
+
+Referenced by get\_\-olsr\_\-node(), handle\_\-olsr\_\-node(), and mainloop().\index{main.c@{main.c}!Olsr_node_count_obj@{Olsr\_\-node\_\-count\_\-obj}}
+\index{Olsr_node_count_obj@{Olsr\_\-node\_\-count\_\-obj}!main.c@{main.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int {\bf Olsr\_\-node\_\-count\_\-obj} = -1}\label{main_8c_4dfd0657ff868fa02113bcd3335acff1}
+
+
+
+
+Definition at line 50 of file main.c.
+
+Referenced by mainloop().\index{main.c@{main.c}!Olsr_node_hna_net@{Olsr\_\-node\_\-hna\_\-net}}
+\index{Olsr_node_hna_net@{Olsr\_\-node\_\-hna\_\-net}!main.c@{main.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int {\bf Olsr\_\-node\_\-hna\_\-net}}\label{main_8c_c03c9b38147e4231238c44f4b5fbdff7}
+
+
+
+
+Definition at line 54 of file main.c.
+
+Referenced by handle\_\-olsr\_\-node(), and main().\index{main.c@{main.c}!Olsr_node_inet_obj@{Olsr\_\-node\_\-inet\_\-obj}}
+\index{Olsr_node_inet_obj@{Olsr\_\-node\_\-inet\_\-obj}!main.c@{main.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int {\bf Olsr\_\-node\_\-inet\_\-obj}}\label{main_8c_b02228665cef19331d409b0d8a831531}
+
+
+
+
+Definition at line 54 of file main.c.
+
+Referenced by handle\_\-olsr\_\-node(), and main().\index{main.c@{main.c}!Olsr_node_obj@{Olsr\_\-node\_\-obj}}
+\index{Olsr_node_obj@{Olsr\_\-node\_\-obj}!main.c@{main.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int {\bf Olsr\_\-node\_\-obj}}\label{main_8c_5eba8148fe9257c34665ed364b595fdb}
+
+
+
+
+Definition at line 54 of file main.c.
+
+Referenced by handle\_\-olsr\_\-node(), and main().\index{main.c@{main.c}!Olsr_root@{Olsr\_\-root}}
+\index{Olsr_root@{Olsr\_\-root}!main.c@{main.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}struct {\bf olsr\_\-node}$\ast$ {\bf Olsr\_\-root} = NULL}\label{main_8c_c5c5c6846587092d0c23b58b558e680c}
+
+
+
+
+Definition at line 46 of file main.c.
+
+Referenced by mainloop(), and process\_\-main().\index{main.c@{main.c}!RotateSpeed@{RotateSpeed}}
+\index{RotateSpeed@{RotateSpeed}!main.c@{main.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int {\bf Rotate\-Speed} = 2}\label{main_8c_cfe4f8990043eade6e82cab3f101b12e}
+
+
+
+
+Definition at line 66 of file main.c.
+
+Referenced by keypress(), and mainloop().\index{main.c@{main.c}!RotateSwitch@{RotateSwitch}}
+\index{RotateSwitch@{RotateSwitch}!main.c@{main.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int {\bf Rotate\-Switch} = 0}\label{main_8c_4370348160930ca94ac7a5d1a6fc5172}
+
+
+
+
+Definition at line 65 of file main.c.
+
+Referenced by keypress(), and mainloop().\index{main.c@{main.c}!sleep_time@{sleep\_\-time}}
+\index{sleep_time@{sleep\_\-time}!main.c@{main.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}struct timespec {\bf sleep\_\-time} = \{ 0, 100 $\ast$ 1000 $\ast$ 1000 \}\hspace{0.3cm}{\tt  [static]}}\label{main_8c_ea8eb9210d53cd6c1b34e6e7f80a243c}
+
+
+
+
+Definition at line 39 of file main.c.
+
+Referenced by mainloop().\index{main.c@{main.c}!ZeroPoint@{ZeroPoint}}
+\index{ZeroPoint@{ZeroPoint}!main.c@{main.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int {\bf Zero\-Point}}\label{main_8c_e113d40abb6f4dd73e4b1253917a1942}
+
+
+
+
+Definition at line 62 of file main.c.
+
+Referenced by add\_\-olsr\_\-con(), handle\_\-olsr\_\-node(), keypress(), main(), and mainloop().\index{main.c@{main.c}!ZeroPosition@{ZeroPosition}}
+\index{ZeroPosition@{ZeroPosition}!main.c@{main.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}float {\bf Zero\-Position}[3] = \{0,0,0\}}\label{main_8c_4942e67624e2b40a2a949f5cc658ccce}
+
+
+
+
+Definition at line 61 of file main.c.
+
+Referenced by keypress().\index{main.c@{main.c}!Zp_rotate@{Zp\_\-rotate}}
+\index{Zp_rotate@{Zp\_\-rotate}!main.c@{main.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int {\bf Zp\_\-rotate} = 0}\label{main_8c_ea9e1c287e0c505c2075a0b936dc3404}
+
+
+
+
+Definition at line 63 of file main.c.
+
+Referenced by mainloop().
\ No newline at end of file

Added: trunk/apps/olsrs3d/doxygen/latex/net_8c.tex
===================================================================
--- trunk/apps/olsrs3d/doxygen/latex/net_8c.tex	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/latex/net_8c.tex	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,209 @@
+\section{s3d/apps/olsrs3d/net.c File Reference}
+\label{net_8c}\index{s3d/apps/olsrs3d/net.c@{s3d/apps/olsrs3d/net.c}}
+{\tt \#include $<$stdio.h$>$}\par
+{\tt \#include $<$stdlib.h$>$}\par
+{\tt \#include $<$unistd.h$>$}\par
+{\tt \#include $<$errno.h$>$}\par
+{\tt \#include $<$string.h$>$}\par
+{\tt \#include $<$netdb.h$>$}\par
+{\tt \#include $<$sys/types.h$>$}\par
+{\tt \#include $<$netinet/in.h$>$}\par
+{\tt \#include $<$sys/socket.h$>$}\par
+{\tt \#include $<$fcntl.h$>$}\par
+{\tt \#include \char`\"{}olsrs3d.h\char`\"{}}\par
+\subsection*{Defines}
+\begin{CompactItemize}
+\item 
+\#define {\bf PORT}~2004
+\end{CompactItemize}
+\subsection*{Functions}
+\begin{CompactItemize}
+\item 
+int {\bf net\_\-init} (char $\ast$host)
+\item 
+int {\bf net\_\-main} ()
+\item 
+int {\bf net\_\-quit} ()
+\end{CompactItemize}
+\subsection*{Variables}
+\begin{CompactItemize}
+\item 
+char {\bf buf} [MAXDATASIZE]
+\item 
+int {\bf numbytes}
+\item 
+int {\bf sockfd}
+\end{CompactItemize}
+
+
+\subsection{Define Documentation}
+\index{net.c@{net.c}!PORT@{PORT}}
+\index{PORT@{PORT}!net.c@{net.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define PORT~2004}\label{net_8c_614217d263be1fb1a5f76e2ff7be19a2}
+
+
+
+
+Definition at line 40 of file net.c.
+
+Referenced by net\_\-init().
+
+\subsection{Function Documentation}
+\index{net.c@{net.c}!net_init@{net\_\-init}}
+\index{net_init@{net\_\-init}!net.c@{net.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int net\_\-init (char $\ast$ {\em host})}\label{net_8c_63c933342efd8cac7f272b92d8acab05}
+
+
+
+
+Definition at line 45 of file net.c.
+
+References PORT, and sockfd.
+
+Referenced by main().
+
+\footnotesize\begin{verbatim}46 {
+47     struct hostent *he;
+48     struct sockaddr_in their_addr; /* connector's address information  */
+49 
+50     if ((he=gethostbyname(host)) == NULL) {  /* get the host info  */
+51         herror("gethostbyname");
+52         return(1);
+53     }
+54 
+55     if ((sockfd = socket(PF_INET, SOCK_STREAM, 0)) == -1) {
+56         perror("socket");
+57         return(1);
+58     }
+59 
+60     their_addr.sin_family = AF_INET;    /* host byte order  */
+61     their_addr.sin_port = htons(PORT);  /* short, network byte order  */
+62     their_addr.sin_addr = *((struct in_addr *)he->h_addr);
+63     memset(&(their_addr.sin_zero), '\0', 8);  /* zero the rest of the struct */
+64 
+65     if (connect(sockfd, (struct sockaddr *)&their_addr,
+66                                           sizeof(struct sockaddr)) == -1) {
+67         perror("connect");
+68         return(1);
+69     }
+70         fcntl(sockfd,F_SETFL, O_NONBLOCK);
+71         return(0);
+72 }
+\end{verbatim}\normalsize 
+
+
+\index{net.c@{net.c}!net_main@{net\_\-main}}
+\index{net_main@{net\_\-main}!net.c@{net.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int net\_\-main ()}\label{net_8c_b8a768eba717722a3d860c01f69fbbc9}
+
+
+
+
+Definition at line 74 of file net.c.
+
+References buf, Debug, lbuf, MAXDATASIZE, MAXLINESIZE, Net\_\-read\_\-count, numbytes, process\_\-main(), and sockfd.
+
+Referenced by mainloop().
+
+\footnotesize\begin{verbatim}74                {
+75 
+76         if ((numbytes=recv(sockfd, buf, MAXDATASIZE-1, 0)) == -1) {
+77                 if (errno==EAGAIN)
+78                         return(0); /* well, that's okay ... */
+79                 perror("recv");
+80                 return(-1);
+81         }
+82 
+83         if (numbytes==0) {
+84                 printf("connection reset\n");
+85                 return(-1);
+86         }
+87 
+88         buf[numbytes] = '\0';
+89 
+90         /* check for potential buffer overflow */
+91         if ( ( strlen( lbuf ) + strlen( buf ) ) < MAXLINESIZE ) {
+92 
+93                 strncat( lbuf, buf, MAXLINESIZE );
+94 
+95         } else {
+96 
+97                 /* hope that carriage return is now in buf */
+98                 if ( strlen( lbuf ) < MAXLINESIZE ) {
+99 
+100                         if ( Debug ) printf( "WARNING: lbuf almost filled without *any* carriage return within that data !\nAppending truncated buf to lbuf to prevent buffer overflow.\n" );
+101                         strncat( lbuf, buf, MAXLINESIZE - strlen( lbuf ) );
+102 
+103                 } else {
+104 
+105                         if ( Debug ) printf( "ERROR: lbuf filled without *any* carriage return within that data !\nClearing lbuf to prevent buffer overflow.\n" );
+106                         strncpy( lbuf, buf, MAXLINESIZE );
+107 
+108                 }
+109 
+110         }
+111 
+112         process_main();
+113 
+114         if ( ++Net_read_count > 5 ) {
+115                 return(0);   /* continue mainloop */
+116         } else {
+117                 return(1);   /* continue reading data from socket */
+118         }
+119 
+120 }
+\end{verbatim}\normalsize 
+
+
+\index{net.c@{net.c}!net_quit@{net\_\-quit}}
+\index{net_quit@{net\_\-quit}!net.c@{net.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int net\_\-quit ()}\label{net_8c_98aebc7a8515c76551eb15ecd465b923}
+
+
+
+
+Definition at line 122 of file net.c.
+
+References sockfd.
+
+Referenced by main(), and stop().
+
+\footnotesize\begin{verbatim}123 {
+124     close(sockfd);
+125 
+126     return 0;
+127 }
+\end{verbatim}\normalsize 
+
+
+
+
+\subsection{Variable Documentation}
+\index{net.c@{net.c}!buf@{buf}}
+\index{buf@{buf}!net.c@{net.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}char {\bf buf}[MAXDATASIZE]}\label{net_8c_f39ed2161fb25f51aa61ffc038306f75}
+
+
+
+
+Definition at line 41 of file net.c.
+
+Referenced by net\_\-main().\index{net.c@{net.c}!numbytes@{numbytes}}
+\index{numbytes@{numbytes}!net.c@{net.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int {\bf numbytes}}\label{net_8c_24bdd92b6cf8d141a4a27d4882c6a905}
+
+
+
+
+Definition at line 44 of file net.c.
+
+Referenced by net\_\-main().\index{net.c@{net.c}!sockfd@{sockfd}}
+\index{sockfd@{sockfd}!net.c@{net.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int {\bf sockfd}}\label{net_8c_d2c8fb3df3a737e0685e902870a611d2}
+
+
+
+
+Definition at line 44 of file net.c.
+
+Referenced by net\_\-init(), net\_\-main(), and net\_\-quit().
\ No newline at end of file

Added: trunk/apps/olsrs3d/doxygen/latex/olsrs3d_8h.tex
===================================================================
--- trunk/apps/olsrs3d/doxygen/latex/olsrs3d_8h.tex	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/latex/olsrs3d_8h.tex	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,741 @@
+\section{s3d/apps/olsrs3d/olsrs3d.h File Reference}
+\label{olsrs3d_8h}\index{s3d/apps/olsrs3d/olsrs3d.h@{s3d/apps/olsrs3d/olsrs3d.h}}
+\subsection*{Classes}
+\begin{CompactItemize}
+\item 
+struct {\bf Obj\_\-to\_\-ip}
+\item 
+struct {\bf olsr\_\-con}
+\item 
+struct {\bf olsr\_\-neigh\_\-list}
+\item 
+struct {\bf olsr\_\-node}
+\end{CompactItemize}
+\subsection*{Defines}
+\begin{CompactItemize}
+\item 
+\#define {\bf MAXDATASIZE}~100
+\item 
+\#define {\bf MAXLINESIZE}~1000
+\item 
+\#define {\bf NAMEMAX}~128
+\end{CompactItemize}
+\subsection*{Functions}
+\begin{CompactItemize}
+\item 
+void {\bf lst\_\-add} (int id, struct {\bf olsr\_\-node} $\ast$$\ast${\bf olsr\_\-node})
+\item 
+void {\bf lst\_\-del} (int id)
+\item 
+void {\bf lst\_\-initialize} ()
+\item 
+void {\bf lst\_\-out} ()
+\item 
+{\bf olsr\_\-node} $\ast$$\ast$ {\bf lst\_\-search} (int id)
+\item 
+void {\bf move\_\-lst\_\-ptr} (int $\ast$id)
+\item 
+int {\bf net\_\-init} (char $\ast$host)
+\item 
+int {\bf net\_\-main} ()
+\item 
+int {\bf net\_\-quit} ()
+\item 
+void {\bf out\_\-of\_\-mem} (void)
+\item 
+int {\bf process\_\-main} ()
+\end{CompactItemize}
+\subsection*{Variables}
+\begin{CompactItemize}
+\item 
+float {\bf Bottom}
+\item 
+{\bf olsr\_\-con} $\ast$ {\bf Con\_\-begin}
+\item 
+int {\bf Debug}
+\item 
+int {\bf Last\_\-olsr\_\-node\_\-count}
+\item 
+char {\bf lbuf} [MAXLINESIZE]
+\item 
+float {\bf Left}
+\item 
+{\bf Obj\_\-to\_\-ip} $\ast$ {\bf List\_\-ptr}
+\item 
+int {\bf Net\_\-read\_\-count}
+\item 
+{\bf Obj\_\-to\_\-ip} $\ast$ {\bf Obj\_\-to\_\-ip\_\-end}
+\item 
+{\bf Obj\_\-to\_\-ip} $\ast$ {\bf Obj\_\-to\_\-ip\_\-head}
+\item 
+int {\bf Olsr\_\-node\_\-count}
+\item 
+int {\bf Olsr\_\-node\_\-count\_\-obj}
+\item 
+int {\bf Olsr\_\-node\_\-hna\_\-net}
+\item 
+int {\bf Olsr\_\-node\_\-inet\_\-obj}
+\item 
+int {\bf Olsr\_\-node\_\-obj}
+\item 
+{\bf olsr\_\-node} $\ast$ {\bf Olsr\_\-root}
+\item 
+int {\bf Zero\-Point}
+\end{CompactItemize}
+
+
+\subsection{Define Documentation}
+\index{olsrs3d.h@{olsrs3d.h}!MAXDATASIZE@{MAXDATASIZE}}
+\index{MAXDATASIZE@{MAXDATASIZE}!olsrs3d.h@{olsrs3d.h}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define MAXDATASIZE~100}\label{olsrs3d_8h_16c16f9369be4a374a3e621f6d13bb16}
+
+
+
+
+Definition at line 30 of file olsrs3d.h.
+
+Referenced by net\_\-main().\index{olsrs3d.h@{olsrs3d.h}!MAXLINESIZE@{MAXLINESIZE}}
+\index{MAXLINESIZE@{MAXLINESIZE}!olsrs3d.h@{olsrs3d.h}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define MAXLINESIZE~1000}\label{olsrs3d_8h_e310f74f793edeb882f0c2d8d8b50bb8}
+
+
+
+
+Definition at line 29 of file olsrs3d.h.
+
+Referenced by net\_\-main().\index{olsrs3d.h@{olsrs3d.h}!NAMEMAX@{NAMEMAX}}
+\index{NAMEMAX@{NAMEMAX}!olsrs3d.h@{olsrs3d.h}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}\#define NAMEMAX~128}\label{olsrs3d_8h_f8c0c53607c56b59e883cb0894e5cde7}
+
+
+
+
+Definition at line 28 of file olsrs3d.h.
+
+Referenced by add\_\-olsr\_\-con(), get\_\-olsr\_\-node(), and process\_\-main().
+
+\subsection{Function Documentation}
+\index{olsrs3d.h@{olsrs3d.h}!lst_add@{lst\_\-add}}
+\index{lst_add@{lst\_\-add}!olsrs3d.h@{olsrs3d.h}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void lst\_\-add (int {\em id}, struct {\bf olsr\_\-node} $\ast$$\ast$ {\em olsr\_\-node})}\label{olsrs3d_8h_d01a29bcb2e2daed6fcc6516c328f141}
+
+
+
+
+Definition at line 259 of file process.c.
+
+References List\_\-ptr, move\_\-lst\_\-ptr(), Obj\_\-to\_\-ip::next, Obj\_\-to\_\-ip::olsr\_\-node, out\_\-of\_\-mem(), and Obj\_\-to\_\-ip::prev.
+
+Referenced by handle\_\-olsr\_\-node().
+
+\footnotesize\begin{verbatim}259                                                   {
+260         struct Obj_to_ip *new;
+261         new = (struct Obj_to_ip*) malloc(sizeof(struct Obj_to_ip));
+262         if(new == NULL)
+263                 out_of_mem();
+264         new->id = id;
+265         new->olsr_node = *olsr_node;
+266         move_lst_ptr(&id);
+267         new->prev = List_ptr;
+268         new->next = List_ptr->next;
+269         List_ptr->next->prev = new;
+270         List_ptr->next = new;
+271         /* printf("obj2ip: add object %d between %d .. %d ip %s to list\n",new->id,new->prev->id,new->next->id,new->olsr_node->ip); */
+272 }
+\end{verbatim}\normalsize 
+
+
+\index{olsrs3d.h@{olsrs3d.h}!lst_del@{lst\_\-del}}
+\index{lst_del@{lst\_\-del}!olsrs3d.h@{olsrs3d.h}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void lst\_\-del (int {\em id})}\label{olsrs3d_8h_febf2594bdfe9ec411d0c04c9cd951b3}
+
+
+
+
+Definition at line 281 of file process.c.
+
+References Obj\_\-to\_\-ip::id, List\_\-ptr, move\_\-lst\_\-ptr(), Obj\_\-to\_\-ip::next, and Obj\_\-to\_\-ip::prev.
+
+Referenced by handle\_\-olsr\_\-node().
+
+\footnotesize\begin{verbatim}281                      {
+282         struct Obj_to_ip *del;
+283         move_lst_ptr(&id);
+284         if(id != List_ptr->id)
+285         {
+286                 printf("obj2ip: remove id %d failed move_lst_ptr return id %d\n",id,List_ptr->next->id);
+287         } else {
+288                 del = List_ptr;
+289                 List_ptr->next->prev = List_ptr->prev;
+290                 List_ptr->prev->next = List_ptr->next;
+291                 /* printf("obj2ip: remove object %d --> %d <-- %d ip %s from list\n",List_ptr->prev->id,del->id,List_ptr->next->id,del->olsr_node->ip); */
+292                 free(del);
+293         }
+294 }
+\end{verbatim}\normalsize 
+
+
+\index{olsrs3d.h@{olsrs3d.h}!lst_initialize@{lst\_\-initialize}}
+\index{lst_initialize@{lst\_\-initialize}!olsrs3d.h@{olsrs3d.h}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void lst\_\-initialize ()}\label{olsrs3d_8h_edfb2ae44af543946842187ced1cd47e}
+
+
+
+
+Definition at line 239 of file process.c.
+
+References Obj\_\-to\_\-ip::id, List\_\-ptr, Obj\_\-to\_\-ip::next, Obj\_\-to\_\-ip\_\-end, Obj\_\-to\_\-ip\_\-head, out\_\-of\_\-mem(), and Obj\_\-to\_\-ip::prev.
+
+Referenced by main().
+
+\footnotesize\begin{verbatim}239                       {
+240         Obj_to_ip_head = (struct Obj_to_ip*) malloc(sizeof(struct Obj_to_ip));
+241         Obj_to_ip_end = (struct Obj_to_ip*) malloc(sizeof(struct Obj_to_ip));
+242         if(Obj_to_ip_head == NULL || Obj_to_ip_end == NULL)
+243                 out_of_mem();
+244         Obj_to_ip_head->id = 0;
+245         Obj_to_ip_end->id = 0;
+246         Obj_to_ip_head->prev = Obj_to_ip_end->prev = Obj_to_ip_head;
+247         Obj_to_ip_head->next = Obj_to_ip_end->next = Obj_to_ip_end;
+248         List_ptr = Obj_to_ip_head;
+249 }
+\end{verbatim}\normalsize 
+
+
+\index{olsrs3d.h@{olsrs3d.h}!lst_out@{lst\_\-out}}
+\index{lst_out@{lst\_\-out}!olsrs3d.h@{olsrs3d.h}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void lst\_\-out ()}\label{olsrs3d_8h_a015f713ca02d8b76a52175b4128d3e8}
+
+
+
+
+Definition at line 359 of file process.c.
+
+References Obj\_\-to\_\-ip::id, Obj\_\-to\_\-ip::next, and Obj\_\-to\_\-ip\_\-head.
+
+Referenced by keypress().
+
+\footnotesize\begin{verbatim}359                {
+360         struct Obj_to_ip *ptr;
+361         ptr = Obj_to_ip_head;
+362         while(ptr != ptr->next) {
+363                 printf("id-> %d\n",ptr->id);
+364                 ptr = ptr->next;
+365         }
+366 }
+\end{verbatim}\normalsize 
+
+
+\index{olsrs3d.h@{olsrs3d.h}!lst_search@{lst\_\-search}}
+\index{lst_search@{lst\_\-search}!olsrs3d.h@{olsrs3d.h}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}struct {\bf olsr\_\-node} $\ast$$\ast$ lst\_\-search (int {\em id})}\label{olsrs3d_8h_ef8aff26d4e096ef0880c204c13309f0}
+
+
+
+
+Definition at line 349 of file process.c.
+
+References List\_\-ptr, move\_\-lst\_\-ptr(), and Obj\_\-to\_\-ip::olsr\_\-node.
+
+Referenced by object\_\-click().
+
+\footnotesize\begin{verbatim}349                                       {
+350         move_lst_ptr(&id);
+351         /* TODO: return NULL when no node found */
+352         /* if(id != List_ptr->id) */
+353                 /* printf("obj2ip: search id....id not found\n"); */
+354         /* else */
+355                 /* printf("obj2ip: search found objekt_id=%d objekt_ip=%s\n",List_ptr->id,List_ptr->olsr_node->ip); */
+356         return(&List_ptr->olsr_node);
+357 }
+\end{verbatim}\normalsize 
+
+
+\index{olsrs3d.h@{olsrs3d.h}!move_lst_ptr@{move\_\-lst\_\-ptr}}
+\index{move_lst_ptr@{move\_\-lst\_\-ptr}!olsrs3d.h@{olsrs3d.h}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void move\_\-lst\_\-ptr (int $\ast$ {\em id})}\label{olsrs3d_8h_576c61914d53ad9035e74317dbb15903}
+
+
+
+
+Definition at line 303 of file process.c.
+
+References Obj\_\-to\_\-ip::id, List\_\-ptr, Obj\_\-to\_\-ip::next, Obj\_\-to\_\-ip\_\-end, Obj\_\-to\_\-ip\_\-head, and Obj\_\-to\_\-ip::prev.
+
+Referenced by lst\_\-add(), lst\_\-del(), and lst\_\-search().
+
+\footnotesize\begin{verbatim}303                            {
+304         /* printf("obj2ip: move for %d\n",*id); */
+305         /* head to point at end or id lass then first element in linked list*/
+306         if(Obj_to_ip_head->next == Obj_to_ip_head || *id < Obj_to_ip_head->next->id)
+307                 List_ptr = Obj_to_ip_head;
+308         /* id is greather then last element in linked list */
+309         else if(*id > Obj_to_ip_end->prev->id)
+310                 List_ptr = Obj_to_ip_end->prev;
+311         else {
+312                 /* printf("obj2ip: ok i search deeper ;-) for id=%d\n",*id); */
+313                 if((*id - (int) Obj_to_ip_head->next->id) <= ((int)(Obj_to_ip_end->prev->id)-*id)) {
+314                         List_ptr = Obj_to_ip_head;
+315                         /* printf("obj2ip: start at head id %d - %d <= %d - %d \n",*id,Obj_to_ip_head->next->id,Obj_to_ip_end->prev->id,*id); */
+316                         while(*id >= List_ptr->next->id) {
+317                                 /* printf("obj2ip: %d > %d move to ",*id,List_ptr->id); */
+318                                 List_ptr = List_ptr->next;
+319                                 /* printf("%d\n",List_ptr->id); */
+320                         }
+321                 } else {
+322                         List_ptr = Obj_to_ip_end;
+323                         /* printf("obj2ip: start at end id %d - %d > %d - %d \n",*id,Obj_to_ip_head->next->id,Obj_to_ip_end->prev->id,*id);  */
+324                         /*  do List_ptr = List_ptr->prev; while(*id > List_ptr->prev->id); */
+325                         while(*id < List_ptr->prev->id) {
+326                                 /* printf("obj2ip: %d < %d move to ",*id,List_ptr->id); */
+327                                 List_ptr = List_ptr->prev;
+328                                 /* printf("%d\n",List_ptr->id); */
+329                         }
+330                         List_ptr = List_ptr->prev;
+331                 }
+332                 /* printf("obj2ip: found id to insert between %d--> .. <--%d to search/delete %d--> .. <--%d\n",List_ptr->id,List_ptr->next->next->id,List_ptr->prev->id,List_ptr->next->id); */
+333         }
+334 }
+\end{verbatim}\normalsize 
+
+
+\index{olsrs3d.h@{olsrs3d.h}!net_init@{net\_\-init}}
+\index{net_init@{net\_\-init}!olsrs3d.h@{olsrs3d.h}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int net\_\-init (char $\ast$ {\em host})}\label{olsrs3d_8h_63c933342efd8cac7f272b92d8acab05}
+
+
+
+
+Definition at line 45 of file net.c.
+
+References PORT, and sockfd.
+
+Referenced by main().
+
+\footnotesize\begin{verbatim}46 {
+47     struct hostent *he;
+48     struct sockaddr_in their_addr; /* connector's address information  */
+49 
+50     if ((he=gethostbyname(host)) == NULL) {  /* get the host info  */
+51         herror("gethostbyname");
+52         return(1);
+53     }
+54 
+55     if ((sockfd = socket(PF_INET, SOCK_STREAM, 0)) == -1) {
+56         perror("socket");
+57         return(1);
+58     }
+59 
+60     their_addr.sin_family = AF_INET;    /* host byte order  */
+61     their_addr.sin_port = htons(PORT);  /* short, network byte order  */
+62     their_addr.sin_addr = *((struct in_addr *)he->h_addr);
+63     memset(&(their_addr.sin_zero), '\0', 8);  /* zero the rest of the struct */
+64 
+65     if (connect(sockfd, (struct sockaddr *)&their_addr,
+66                                           sizeof(struct sockaddr)) == -1) {
+67         perror("connect");
+68         return(1);
+69     }
+70         fcntl(sockfd,F_SETFL, O_NONBLOCK);
+71         return(0);
+72 }
+\end{verbatim}\normalsize 
+
+
+\index{olsrs3d.h@{olsrs3d.h}!net_main@{net\_\-main}}
+\index{net_main@{net\_\-main}!olsrs3d.h@{olsrs3d.h}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int net\_\-main ()}\label{olsrs3d_8h_b8a768eba717722a3d860c01f69fbbc9}
+
+
+
+
+Definition at line 74 of file net.c.
+
+References buf, Debug, lbuf, MAXDATASIZE, MAXLINESIZE, Net\_\-read\_\-count, numbytes, process\_\-main(), and sockfd.
+
+Referenced by mainloop().
+
+\footnotesize\begin{verbatim}74                {
+75 
+76         if ((numbytes=recv(sockfd, buf, MAXDATASIZE-1, 0)) == -1) {
+77                 if (errno==EAGAIN)
+78                         return(0); /* well, that's okay ... */
+79                 perror("recv");
+80                 return(-1);
+81         }
+82 
+83         if (numbytes==0) {
+84                 printf("connection reset\n");
+85                 return(-1);
+86         }
+87 
+88         buf[numbytes] = '\0';
+89 
+90         /* check for potential buffer overflow */
+91         if ( ( strlen( lbuf ) + strlen( buf ) ) < MAXLINESIZE ) {
+92 
+93                 strncat( lbuf, buf, MAXLINESIZE );
+94 
+95         } else {
+96 
+97                 /* hope that carriage return is now in buf */
+98                 if ( strlen( lbuf ) < MAXLINESIZE ) {
+99 
+100                         if ( Debug ) printf( "WARNING: lbuf almost filled without *any* carriage return within that data !\nAppending truncated buf to lbuf to prevent buffer overflow.\n" );
+101                         strncat( lbuf, buf, MAXLINESIZE - strlen( lbuf ) );
+102 
+103                 } else {
+104 
+105                         if ( Debug ) printf( "ERROR: lbuf filled without *any* carriage return within that data !\nClearing lbuf to prevent buffer overflow.\n" );
+106                         strncpy( lbuf, buf, MAXLINESIZE );
+107 
+108                 }
+109 
+110         }
+111 
+112         process_main();
+113 
+114         if ( ++Net_read_count > 5 ) {
+115                 return(0);   /* continue mainloop */
+116         } else {
+117                 return(1);   /* continue reading data from socket */
+118         }
+119 
+120 }
+\end{verbatim}\normalsize 
+
+
+\index{olsrs3d.h@{olsrs3d.h}!net_quit@{net\_\-quit}}
+\index{net_quit@{net\_\-quit}!olsrs3d.h@{olsrs3d.h}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int net\_\-quit ()}\label{olsrs3d_8h_98aebc7a8515c76551eb15ecd465b923}
+
+
+
+
+Definition at line 122 of file net.c.
+
+References sockfd.
+
+Referenced by main(), and stop().
+
+\footnotesize\begin{verbatim}123 {
+124     close(sockfd);
+125 
+126     return 0;
+127 }
+\end{verbatim}\normalsize 
+
+
+\index{olsrs3d.h@{olsrs3d.h}!out_of_mem@{out\_\-of\_\-mem}}
+\index{out_of_mem@{out\_\-of\_\-mem}!olsrs3d.h@{olsrs3d.h}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void out\_\-of\_\-mem (void)}\label{olsrs3d_8h_be0835e7acb76ea987ac80769302d90a}
+
+
+
+
+Definition at line 94 of file main.c.
+
+Referenced by add\_\-olsr\_\-con(), get\_\-olsr\_\-node(), lst\_\-add(), and lst\_\-initialize().
+
+\footnotesize\begin{verbatim}94                         {
+95 
+96         printf( "Sorry - you ran out of memory !\n" );
+97         exit(8);
+98 
+99 }
+\end{verbatim}\normalsize 
+
+
+\index{olsrs3d.h@{olsrs3d.h}!process_main@{process\_\-main}}
+\index{process_main@{process\_\-main}!olsrs3d.h@{olsrs3d.h}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int process\_\-main ()}\label{olsrs3d_8h_6b4e9b6718b671f6330c2e501c60d3c1}
+
+
+
+
+Definition at line 368 of file process.c.
+
+References add\_\-olsr\_\-con(), Debug, get\_\-olsr\_\-node(), olsr\_\-node::ip, lbuf, NAMEMAX, olsr\_\-node::node\_\-type, olsr\_\-node::node\_\-type\_\-modified, Olsr\_\-root, and olsr\_\-node::visible.
+
+Referenced by net\_\-main().
+
+\footnotesize\begin{verbatim}368                    {
+369 
+370         int dn;
+371         float f;
+372         char *lbuf_ptr, *last_cr_ptr, *con_from, *con_from_end, *con_to, *con_to_end, *etx, *etx_end;
+373         struct olsr_node *olsr_node1;   /* pointer to olsr nodes */
+374         struct olsr_node *olsr_node2;
+375 
+376         lbuf_ptr = lbuf;
+377         last_cr_ptr = NULL;
+378 
+379         con_from = con_from_end = con_to = con_to_end = etx = etx_end = NULL;
+380         dn = 0;
+381 
+382         while ( (*lbuf_ptr) != '\0' ) {
+383 
+384                 /* printf( "%c",(*lbuf_ptr) ); */
+385 
+386                 if ( (*lbuf_ptr) == '\n' ) {
+387 
+388                         last_cr_ptr = lbuf_ptr;
+389                         con_from = con_from_end = con_to = con_to_end = etx = etx_end = NULL;
+390                         dn = 0;
+391 
+392                 }
+393 
+394                 if ( (*lbuf_ptr) == '"' ) {
+395 
+396                         switch ( dn ) {
+397 
+398                                 case 0:
+399                                         con_from = lbuf_ptr + 1;
+400                                         break;
+401                                 case 1:
+402                                         con_from_end = lbuf_ptr;
+403                                         break;
+404                                 case 2:
+405                                         con_to = lbuf_ptr + 1;
+406                                         break;
+407                                 case 3:
+408                                         con_to_end = lbuf_ptr;
+409                                         break;
+410                                 case 4:
+411                                         etx = lbuf_ptr + 1;
+412                                         break;
+413                                 case 5:
+414                                         etx_end = lbuf_ptr;
+415                                         break;
+416 
+417                         }
+418 
+419                         if ( ++dn == 6 ) {
+420 
+421                                 /* terminate strings - but not before 6 times '"' */
+422                                 (*con_from_end) = (*con_to_end) = (*etx_end) = '\0';
+423 
+424                                 /* printf( "con_from: %s, con_to: %s, etx: %s\n", con_from, con_to, etx ); */
+425 
+426                                 /* announced network via HNA */
+427                                 if ( strncmp( etx, "HNA", NAMEMAX ) == 0 ) {
+428 
+429                                         /* connection to internet */
+430                                         if ( strncmp( con_to, "0.0.0.0/0.0.0.0", NAMEMAX ) == 0 ) {
+431 
+432                                                 olsr_node1 = get_olsr_node( &Olsr_root, con_from );
+433 
+434                                                 if ( olsr_node1->node_type != 1 ) {
+435 
+436                                                         olsr_node1->node_type = 1;
+437                                                         olsr_node1->node_type_modified = 1;
+438                                                         if ( Debug ) printf( "new internet: %s\n", olsr_node1->ip );
+439 
+440                                                 }
+441 
+442                                         /* normal HNA */
+443                                         } else {
+444 
+445                                                 olsr_node1 = get_olsr_node( &Olsr_root, con_from );
+446                                                 olsr_node2 = get_olsr_node( &Olsr_root, con_to );
+447 
+448                                                 if ( olsr_node2->node_type != 2 ) {
+449 
+450                                                         olsr_node2->node_type = 2;
+451                                                         olsr_node2->node_type_modified = 1;
+452                                                         if ( Debug ) printf( "new hna network: %s\n", olsr_node2->ip );
+453 
+454                                                 }
+455                                                 if ( olsr_node1->visible && olsr_node2->visible )
+456                                                         add_olsr_con( olsr_node1, olsr_node2, -1000.00 );
+457 
+458                                         }
+459 
+460                                 /* normal node */
+461                                 } else {
+462 
+463                                         olsr_node1 = get_olsr_node( &Olsr_root, con_from );
+464                                         olsr_node2 = get_olsr_node( &Olsr_root, con_to );
+465                                         f = strtod(etx,NULL);
+466                                         if ( f < 1 )
+467                                                 f = 999;
+468                                         add_olsr_con( olsr_node1, olsr_node2, f );
+469                                 }
+470 
+471                                 con_from = con_from_end = con_to = con_to_end = etx = etx_end = NULL;
+472                                 dn = 0;
+473                                 last_cr_ptr = lbuf_ptr;
+474 
+475                         }
+476 
+477                 }
+478 
+479                 lbuf_ptr++;
+480 
+481         }
+482 
+483         if ( last_cr_ptr != NULL ) memmove( lbuf, last_cr_ptr + 1, strlen( last_cr_ptr ) );
+484 
+485         return(0);
+486 
+487 }
+\end{verbatim}\normalsize 
+
+
+
+
+\subsection{Variable Documentation}
+\index{olsrs3d.h@{olsrs3d.h}!Bottom@{Bottom}}
+\index{Bottom@{Bottom}!olsrs3d.h@{olsrs3d.h}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}float {\bf Bottom}}\label{olsrs3d_8h_f23a6ad2da4511ef430c4f522ae9f4cc}
+
+
+
+
+Definition at line 57 of file main.c.
+
+Referenced by mainloop(), object\_\-click(), and object\_\-info().\index{olsrs3d.h@{olsrs3d.h}!Con_begin@{Con\_\-begin}}
+\index{Con_begin@{Con\_\-begin}!olsrs3d.h@{olsrs3d.h}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}struct {\bf olsr\_\-con}$\ast$ {\bf Con\_\-begin}}\label{olsrs3d_8h_0643a36891539929d987e2ee83ff81d1}
+
+
+
+
+Definition at line 45 of file main.c.
+
+Referenced by add\_\-olsr\_\-con(), calc\_\-olsr\_\-node\_\-mov(), and move\_\-olsr\_\-nodes().\index{olsrs3d.h@{olsrs3d.h}!Debug@{Debug}}
+\index{Debug@{Debug}!olsrs3d.h@{olsrs3d.h}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int {\bf Debug}}\label{olsrs3d_8h_923774364cedbc16baa0bc05e9be136c}
+
+
+
+
+Definition at line 41 of file main.c.
+
+Referenced by get\_\-olsr\_\-node(), handle\_\-olsr\_\-node(), main(), net\_\-main(), and process\_\-main().\index{olsrs3d.h@{olsrs3d.h}!Last_olsr_node_count@{Last\_\-olsr\_\-node\_\-count}}
+\index{Last_olsr_node_count@{Last\_\-olsr\_\-node\_\-count}!olsrs3d.h@{olsrs3d.h}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int {\bf Last\_\-olsr\_\-node\_\-count}}\label{olsrs3d_8h_58acad60c78b63554c696703227d0b7b}
+
+
+
+
+Definition at line 49 of file main.c.
+
+Referenced by mainloop().\index{olsrs3d.h@{olsrs3d.h}!lbuf@{lbuf}}
+\index{lbuf@{lbuf}!olsrs3d.h@{olsrs3d.h}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}char {\bf lbuf}[MAXLINESIZE]}\label{olsrs3d_8h_00f1cd38b187535569d0354f2506fb74}
+
+
+
+
+Definition at line 34 of file process.c.
+
+Referenced by main(), net\_\-main(), and process\_\-main().\index{olsrs3d.h@{olsrs3d.h}!Left@{Left}}
+\index{Left@{Left}!olsrs3d.h@{olsrs3d.h}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}float {\bf Left}}\label{olsrs3d_8h_6f68bad9075598ca8ede1827c6832376}
+
+
+
+
+Definition at line 58 of file main.c.
+
+Referenced by mainloop(), object\_\-click(), and object\_\-info().\index{olsrs3d.h@{olsrs3d.h}!List_ptr@{List\_\-ptr}}
+\index{List_ptr@{List\_\-ptr}!olsrs3d.h@{olsrs3d.h}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}struct {\bf Obj\_\-to\_\-ip} $\ast$ {\bf List\_\-ptr}}\label{olsrs3d_8h_6a8ff2c3957f5f0ab7dcafcd72b8bd57}
+
+
+
+
+Definition at line 47 of file main.c.
+
+Referenced by lst\_\-add(), lst\_\-del(), lst\_\-initialize(), lst\_\-search(), and move\_\-lst\_\-ptr().\index{olsrs3d.h@{olsrs3d.h}!Net_read_count@{Net\_\-read\_\-count}}
+\index{Net_read_count@{Net\_\-read\_\-count}!olsrs3d.h@{olsrs3d.h}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int {\bf Net\_\-read\_\-count}}\label{olsrs3d_8h_5bcc20f84efa7bd4aafc56a629f2eff3}
+
+
+
+
+Definition at line 52 of file main.c.
+
+Referenced by mainloop(), and net\_\-main().\index{olsrs3d.h@{olsrs3d.h}!Obj_to_ip_end@{Obj\_\-to\_\-ip\_\-end}}
+\index{Obj_to_ip_end@{Obj\_\-to\_\-ip\_\-end}!olsrs3d.h@{olsrs3d.h}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}struct {\bf Obj\_\-to\_\-ip} $\ast$ {\bf Obj\_\-to\_\-ip\_\-end}}\label{olsrs3d_8h_236217b97f5fe65457d8b22c73c5073d}
+
+
+
+
+Definition at line 47 of file main.c.
+
+Referenced by handle\_\-olsr\_\-node(), lst\_\-initialize(), and move\_\-lst\_\-ptr().\index{olsrs3d.h@{olsrs3d.h}!Obj_to_ip_head@{Obj\_\-to\_\-ip\_\-head}}
+\index{Obj_to_ip_head@{Obj\_\-to\_\-ip\_\-head}!olsrs3d.h@{olsrs3d.h}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}struct {\bf Obj\_\-to\_\-ip}$\ast$ {\bf Obj\_\-to\_\-ip\_\-head}}\label{olsrs3d_8h_9494e9e8cbdc4eceb86cb33ff0006785}
+
+
+
+
+Definition at line 47 of file main.c.
+
+Referenced by handle\_\-olsr\_\-node(), lst\_\-initialize(), lst\_\-out(), and move\_\-lst\_\-ptr().\index{olsrs3d.h@{olsrs3d.h}!Olsr_node_count@{Olsr\_\-node\_\-count}}
+\index{Olsr_node_count@{Olsr\_\-node\_\-count}!olsrs3d.h@{olsrs3d.h}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int {\bf Olsr\_\-node\_\-count}}\label{olsrs3d_8h_86c048bc4aaab319f4d61f7c0e1f056f}
+
+
+
+
+Definition at line 49 of file main.c.
+
+Referenced by get\_\-olsr\_\-node(), handle\_\-olsr\_\-node(), and mainloop().\index{olsrs3d.h@{olsrs3d.h}!Olsr_node_count_obj@{Olsr\_\-node\_\-count\_\-obj}}
+\index{Olsr_node_count_obj@{Olsr\_\-node\_\-count\_\-obj}!olsrs3d.h@{olsrs3d.h}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int {\bf Olsr\_\-node\_\-count\_\-obj}}\label{olsrs3d_8h_4dfd0657ff868fa02113bcd3335acff1}
+
+
+
+
+Definition at line 50 of file main.c.
+
+Referenced by mainloop().\index{olsrs3d.h@{olsrs3d.h}!Olsr_node_hna_net@{Olsr\_\-node\_\-hna\_\-net}}
+\index{Olsr_node_hna_net@{Olsr\_\-node\_\-hna\_\-net}!olsrs3d.h@{olsrs3d.h}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int {\bf Olsr\_\-node\_\-hna\_\-net}}\label{olsrs3d_8h_c03c9b38147e4231238c44f4b5fbdff7}
+
+
+
+
+Definition at line 54 of file main.c.
+
+Referenced by handle\_\-olsr\_\-node(), and main().\index{olsrs3d.h@{olsrs3d.h}!Olsr_node_inet_obj@{Olsr\_\-node\_\-inet\_\-obj}}
+\index{Olsr_node_inet_obj@{Olsr\_\-node\_\-inet\_\-obj}!olsrs3d.h@{olsrs3d.h}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int {\bf Olsr\_\-node\_\-inet\_\-obj}}\label{olsrs3d_8h_b02228665cef19331d409b0d8a831531}
+
+
+
+
+Definition at line 54 of file main.c.
+
+Referenced by handle\_\-olsr\_\-node(), and main().\index{olsrs3d.h@{olsrs3d.h}!Olsr_node_obj@{Olsr\_\-node\_\-obj}}
+\index{Olsr_node_obj@{Olsr\_\-node\_\-obj}!olsrs3d.h@{olsrs3d.h}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int {\bf Olsr\_\-node\_\-obj}}\label{olsrs3d_8h_5eba8148fe9257c34665ed364b595fdb}
+
+
+
+
+Definition at line 54 of file main.c.
+
+Referenced by handle\_\-olsr\_\-node(), and main().\index{olsrs3d.h@{olsrs3d.h}!Olsr_root@{Olsr\_\-root}}
+\index{Olsr_root@{Olsr\_\-root}!olsrs3d.h@{olsrs3d.h}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}struct {\bf olsr\_\-node}$\ast$ {\bf Olsr\_\-root}}\label{olsrs3d_8h_c5c5c6846587092d0c23b58b558e680c}
+
+
+
+
+Definition at line 46 of file main.c.
+
+Referenced by mainloop(), and process\_\-main().\index{olsrs3d.h@{olsrs3d.h}!ZeroPoint@{ZeroPoint}}
+\index{ZeroPoint@{ZeroPoint}!olsrs3d.h@{olsrs3d.h}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int {\bf Zero\-Point}}\label{olsrs3d_8h_e113d40abb6f4dd73e4b1253917a1942}
+
+
+
+
+Definition at line 62 of file main.c.
+
+Referenced by add\_\-olsr\_\-con(), handle\_\-olsr\_\-node(), keypress(), main(), and mainloop().
\ No newline at end of file

Added: trunk/apps/olsrs3d/doxygen/latex/process_8c.tex
===================================================================
--- trunk/apps/olsrs3d/doxygen/latex/process_8c.tex	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/latex/process_8c.tex	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,571 @@
+\section{s3d/apps/olsrs3d/process.c File Reference}
+\label{process_8c}\index{s3d/apps/olsrs3d/process.c@{s3d/apps/olsrs3d/process.c}}
+{\tt \#include $<$stdio.h$>$}\par
+{\tt \#include $<$string.h$>$}\par
+{\tt \#include $<$stdlib.h$>$}\par
+{\tt \#include $<$s3d.h$>$}\par
+{\tt \#include \char`\"{}olsrs3d.h\char`\"{}}\par
+\subsection*{Functions}
+\begin{CompactItemize}
+\item 
+int {\bf add\_\-olsr\_\-con} (struct {\bf olsr\_\-node} $\ast$con\_\-from, struct {\bf olsr\_\-node} $\ast$con\_\-to, float etx)
+\item 
+void $\ast$ {\bf get\_\-olsr\_\-node} (struct {\bf olsr\_\-node} $\ast$$\ast${\bf olsr\_\-node}, char $\ast$ip)
+\item 
+void {\bf lst\_\-add} (int id, struct {\bf olsr\_\-node} $\ast$$\ast${\bf olsr\_\-node})
+\item 
+void {\bf lst\_\-del} (int id)
+\item 
+void {\bf lst\_\-initialize} ()
+\item 
+void {\bf lst\_\-out} ()
+\item 
+{\bf olsr\_\-node} $\ast$$\ast$ {\bf lst\_\-search} (int id)
+\item 
+void {\bf move\_\-lst\_\-ptr} (int $\ast$id)
+\item 
+int {\bf process\_\-main} ()
+\end{CompactItemize}
+\subsection*{Variables}
+\begin{CompactItemize}
+\item 
+char {\bf lbuf} [MAXLINESIZE]
+\end{CompactItemize}
+
+
+\subsection{Function Documentation}
+\index{process.c@{process.c}!add_olsr_con@{add\_\-olsr\_\-con}}
+\index{add_olsr_con@{add\_\-olsr\_\-con}!process.c@{process.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int add\_\-olsr\_\-con (struct {\bf olsr\_\-node} $\ast$ {\em con\_\-from}, struct {\bf olsr\_\-node} $\ast$ {\em con\_\-to}, float {\em etx})}\label{process_8c_4c780ee64b12fa5531a56edfb5ffcc00}
+
+
+
+
+Definition at line 48 of file process.c.
+
+References Con\_\-begin, olsr\_\-node::ip, olsr\_\-con::left\_\-etx, NAMEMAX, olsr\_\-con::next\_\-olsr\_\-con, olsr\_\-neigh\_\-list::next\_\-olsr\_\-neigh\_\-list, olsr\_\-neigh\_\-list::olsr\_\-con, out\_\-of\_\-mem(), olsr\_\-con::prev\_\-olsr\_\-con, and Zero\-Point.
+
+Referenced by process\_\-main().
+
+\footnotesize\begin{verbatim}48                                                                                     {
+49 
+50         struct olsr_con **olsr_con = &Con_begin;
+51         struct olsr_con *prev_olsr_con = NULL;   /* previous olsr connection */
+52         struct olsr_neigh_list **olsr_neigh_list;
+53 
+54         while ( (*olsr_con) != NULL ) {
+55 
+56                 /* connection already exists */
+57                 if ( ( strncmp( (*olsr_con)->left_olsr_node->ip, con_from->ip, NAMEMAX ) == 0 ) && ( strncmp( (*olsr_con)->right_olsr_node->ip, con_to->ip, NAMEMAX ) == 0 ) ) {
+58                         (*olsr_con)->left_etx = etx;
+59                         break;
+60 
+61                 } else if ( ( strncmp( (*olsr_con)->right_olsr_node->ip, con_from->ip, NAMEMAX ) == 0 ) && ( strncmp( (*olsr_con)->left_olsr_node->ip, con_to->ip, NAMEMAX ) == 0 ) ) {
+62 
+63                         (*olsr_con)->right_etx = etx;
+64                         break;
+65 
+66                 }
+67 
+68                 /* save previous olsr connection for later use */
+69                 prev_olsr_con = (*olsr_con);
+70 
+71                 olsr_con = &(*olsr_con)->next_olsr_con;
+72 
+73         }
+74 
+75         /* new connection */
+76         if ( (*olsr_con) == NULL ) {
+77 
+78                 (*olsr_con) = malloc( sizeof( struct olsr_con ) );
+79                 if ( (*olsr_con) == NULL ) out_of_mem();
+80 
+81                 /* create connection object */
+82                 (*olsr_con)->obj_id = s3d_new_object();
+83 
+84                 /* add olsr node to new olsr connection in order to access the nodes from the connection list */
+85                 (*olsr_con)->left_olsr_node = con_from;
+86                 (*olsr_con)->right_olsr_node = con_to;
+87 
+88                 /* add connection color */
+89                 (*olsr_con)->color = 0;
+90                 s3d_push_material( (*olsr_con)->obj_id,
+91                                   1.0,1.0,1.0,
+92                                   1.0,1.0,1.0,
+93                                   1.0,1.0,1.0);
+94 
+95                 /* add connection endpoints */
+96                 s3d_push_vertex( (*olsr_con)->obj_id, (*olsr_con)->left_olsr_node->pos_vec[0], (*olsr_con)->left_olsr_node->pos_vec[1], (*olsr_con)->left_olsr_node->pos_vec[2] );
+97                 s3d_push_vertex( (*olsr_con)->obj_id, (*olsr_con)->right_olsr_node->pos_vec[0], (*olsr_con)->right_olsr_node->pos_vec[1], (*olsr_con)->right_olsr_node->pos_vec[2] );
+98 
+99                 s3d_push_line( (*olsr_con)->obj_id, 0,1,0 );
+100 
+101                 s3d_flags_on( (*olsr_con)->obj_id, S3D_OF_VISIBLE );
+102 
+103                 s3d_link( (*olsr_con)->obj_id,  ZeroPoint );
+104 
+105                 /* HNA */
+106                 if ( etx == -1000.00 ) {
+107 
+108                         (*olsr_con)->left_etx = etx;
+109                         (*olsr_con)->right_etx = etx;
+110 
+111                 } else {
+112 
+113                         (*olsr_con)->left_etx = etx;
+114                         (*olsr_con)->right_etx = 0.0;
+115 
+116                 }
+117 
+118                 (*olsr_con)->next_olsr_con = NULL;
+119                 (*olsr_con)->prev_olsr_con = prev_olsr_con;
+120 
+121                 /* add new olsr connection to olsr nodes in order to access the connection from the olsr node */
+122                 olsr_neigh_list = &(*olsr_con)->left_olsr_node->olsr_neigh_list;
+123                 while ( (*olsr_neigh_list) != NULL ) olsr_neigh_list = &(*olsr_neigh_list)->next_olsr_neigh_list;
+124                 (*olsr_neigh_list) = malloc( sizeof( struct olsr_neigh_list ) );
+125                 if ( (*olsr_neigh_list) == NULL ) out_of_mem();
+126                 (*olsr_neigh_list)->olsr_con = (*olsr_con);
+127                 (*olsr_neigh_list)->next_olsr_neigh_list = NULL;
+128 
+129                 olsr_neigh_list = &(*olsr_con)->right_olsr_node->olsr_neigh_list;
+130                 while ( (*olsr_neigh_list) != NULL ) olsr_neigh_list = &(*olsr_neigh_list)->next_olsr_neigh_list;
+131                 (*olsr_neigh_list) = malloc( sizeof( struct olsr_neigh_list ) );
+132                 if ( (*olsr_neigh_list) == NULL ) out_of_mem();
+133                 (*olsr_neigh_list)->olsr_con = (*olsr_con);
+134                 (*olsr_neigh_list)->next_olsr_neigh_list = NULL;
+135 
+136         }
+137 
+138         return(0);
+139 
+140 }
+\end{verbatim}\normalsize 
+
+
+\index{process.c@{process.c}!get_olsr_node@{get\_\-olsr\_\-node}}
+\index{get_olsr_node@{get\_\-olsr\_\-node}!process.c@{process.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void$\ast$ get\_\-olsr\_\-node (struct {\bf olsr\_\-node} $\ast$$\ast$ {\em olsr\_\-node}, char $\ast$ {\em ip})}\label{process_8c_7ba929b35f03f5921272b4e5e821ade2}
+
+
+
+
+Definition at line 155 of file process.c.
+
+References Debug, olsr\_\-node::left, NAMEMAX, Olsr\_\-node\_\-count, out\_\-of\_\-mem(), and olsr\_\-node::right.
+
+Referenced by process\_\-main().
+
+\footnotesize\begin{verbatim}155                                                               {
+156 
+157         int result;   /* result of strcmp */
+158 
+159         while ( (*olsr_node) != NULL ) {
+160 
+161                 result = strncmp( (*olsr_node)->ip, ip, NAMEMAX );
+162 
+163                 /* we found the node */
+164                 if ( result == 0 ) {
+165 
+166                         (*olsr_node)->last_seen = 100;
+167 
+168                         /* former invisble (deleted) node */
+169                         if ( (*olsr_node)->visible == 0 ) {
+170 
+171                                 (*olsr_node)->node_type = 0;
+172                                 (*olsr_node)->node_type_modified = 1;
+173 
+174                                 (*olsr_node)->visible = 1;
+175 
+176                                 (*olsr_node)->mov_vec[0] = (*olsr_node)->mov_vec[1] = (*olsr_node)->mov_vec[2] = 0.0;
+177 
+178                                 if ( Debug ) printf( "new olsr node: %s\n", (*olsr_node)->ip );
+179 
+180                                 Olsr_node_count++;
+181 
+182                         }
+183 
+184                         return (*olsr_node);
+185 
+186                 }
+187 
+188                 /* the searched node must be in the subtree */
+189                 if ( result < 0 ) {
+190                         olsr_node = &(*olsr_node)->right;
+191                 } else {
+192                         olsr_node = &(*olsr_node)->left;
+193                 }
+194 
+195         }
+196 
+197         /* if node is NULL we reached the end of the tree and must create a new olsr_node */
+198         if ( (*olsr_node) == NULL ) {
+199 
+200                 (*olsr_node) = malloc( sizeof( struct olsr_node ) );
+201                 if ( (*olsr_node) == NULL ) out_of_mem();
+202 
+203                 (*olsr_node)->left = NULL;
+204                 (*olsr_node)->right = NULL;
+205 
+206                 strncpy( (*olsr_node)->ip, ip, NAMEMAX );
+207 
+208                 (*olsr_node)->node_type = 0;
+209                 (*olsr_node)->node_type_modified = 1;
+210 
+211                 (*olsr_node)->last_seen = 100;
+212                 (*olsr_node)->visible = 1;
+213 
+214                 if ( Debug ) printf( "new olsr node: %s\n", (*olsr_node)->ip );
+215 
+216                 Olsr_node_count++;
+217 
+218                 (*olsr_node)->pos_vec[0] = ( ( float ) 2.0 * rand() ) / RAND_MAX - 1.0;
+219                 (*olsr_node)->pos_vec[1] = ( ( float ) 2.0 * rand() ) / RAND_MAX - 1.0;
+220                 (*olsr_node)->pos_vec[2] = ( ( float ) 2.0 * rand() ) / RAND_MAX - 1.0;
+221                 (*olsr_node)->mov_vec[0] = (*olsr_node)->mov_vec[1] = (*olsr_node)->mov_vec[2] = 0.0;
+222 
+223                 (*olsr_node)->obj_id = -1;
+224                 (*olsr_node)->desc_id = -1;
+225                 (*olsr_node)->olsr_neigh_list = NULL;
+226 
+227                 return (*olsr_node);
+228 
+229         }
+230         return(0);
+231 }
+\end{verbatim}\normalsize 
+
+
+\index{process.c@{process.c}!lst_add@{lst\_\-add}}
+\index{lst_add@{lst\_\-add}!process.c@{process.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void lst\_\-add (int {\em id}, struct {\bf olsr\_\-node} $\ast$$\ast$ {\em olsr\_\-node})}\label{process_8c_d01a29bcb2e2daed6fcc6516c328f141}
+
+
+
+
+Definition at line 259 of file process.c.
+
+References List\_\-ptr, move\_\-lst\_\-ptr(), Obj\_\-to\_\-ip::next, Obj\_\-to\_\-ip::olsr\_\-node, out\_\-of\_\-mem(), and Obj\_\-to\_\-ip::prev.
+
+Referenced by handle\_\-olsr\_\-node().
+
+\footnotesize\begin{verbatim}259                                                   {
+260         struct Obj_to_ip *new;
+261         new = (struct Obj_to_ip*) malloc(sizeof(struct Obj_to_ip));
+262         if(new == NULL)
+263                 out_of_mem();
+264         new->id = id;
+265         new->olsr_node = *olsr_node;
+266         move_lst_ptr(&id);
+267         new->prev = List_ptr;
+268         new->next = List_ptr->next;
+269         List_ptr->next->prev = new;
+270         List_ptr->next = new;
+271         /* printf("obj2ip: add object %d between %d .. %d ip %s to list\n",new->id,new->prev->id,new->next->id,new->olsr_node->ip); */
+272 }
+\end{verbatim}\normalsize 
+
+
+\index{process.c@{process.c}!lst_del@{lst\_\-del}}
+\index{lst_del@{lst\_\-del}!process.c@{process.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void lst\_\-del (int {\em id})}\label{process_8c_febf2594bdfe9ec411d0c04c9cd951b3}
+
+
+
+
+Definition at line 281 of file process.c.
+
+References Obj\_\-to\_\-ip::id, List\_\-ptr, move\_\-lst\_\-ptr(), Obj\_\-to\_\-ip::next, and Obj\_\-to\_\-ip::prev.
+
+Referenced by handle\_\-olsr\_\-node().
+
+\footnotesize\begin{verbatim}281                      {
+282         struct Obj_to_ip *del;
+283         move_lst_ptr(&id);
+284         if(id != List_ptr->id)
+285         {
+286                 printf("obj2ip: remove id %d failed move_lst_ptr return id %d\n",id,List_ptr->next->id);
+287         } else {
+288                 del = List_ptr;
+289                 List_ptr->next->prev = List_ptr->prev;
+290                 List_ptr->prev->next = List_ptr->next;
+291                 /* printf("obj2ip: remove object %d --> %d <-- %d ip %s from list\n",List_ptr->prev->id,del->id,List_ptr->next->id,del->olsr_node->ip); */
+292                 free(del);
+293         }
+294 }
+\end{verbatim}\normalsize 
+
+
+\index{process.c@{process.c}!lst_initialize@{lst\_\-initialize}}
+\index{lst_initialize@{lst\_\-initialize}!process.c@{process.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void lst\_\-initialize ()}\label{process_8c_edfb2ae44af543946842187ced1cd47e}
+
+
+
+
+Definition at line 239 of file process.c.
+
+References Obj\_\-to\_\-ip::id, List\_\-ptr, Obj\_\-to\_\-ip::next, Obj\_\-to\_\-ip\_\-end, Obj\_\-to\_\-ip\_\-head, out\_\-of\_\-mem(), and Obj\_\-to\_\-ip::prev.
+
+Referenced by main().
+
+\footnotesize\begin{verbatim}239                       {
+240         Obj_to_ip_head = (struct Obj_to_ip*) malloc(sizeof(struct Obj_to_ip));
+241         Obj_to_ip_end = (struct Obj_to_ip*) malloc(sizeof(struct Obj_to_ip));
+242         if(Obj_to_ip_head == NULL || Obj_to_ip_end == NULL)
+243                 out_of_mem();
+244         Obj_to_ip_head->id = 0;
+245         Obj_to_ip_end->id = 0;
+246         Obj_to_ip_head->prev = Obj_to_ip_end->prev = Obj_to_ip_head;
+247         Obj_to_ip_head->next = Obj_to_ip_end->next = Obj_to_ip_end;
+248         List_ptr = Obj_to_ip_head;
+249 }
+\end{verbatim}\normalsize 
+
+
+\index{process.c@{process.c}!lst_out@{lst\_\-out}}
+\index{lst_out@{lst\_\-out}!process.c@{process.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void lst\_\-out ()}\label{process_8c_a015f713ca02d8b76a52175b4128d3e8}
+
+
+
+
+Definition at line 359 of file process.c.
+
+References Obj\_\-to\_\-ip::id, Obj\_\-to\_\-ip::next, and Obj\_\-to\_\-ip\_\-head.
+
+Referenced by keypress().
+
+\footnotesize\begin{verbatim}359                {
+360         struct Obj_to_ip *ptr;
+361         ptr = Obj_to_ip_head;
+362         while(ptr != ptr->next) {
+363                 printf("id-> %d\n",ptr->id);
+364                 ptr = ptr->next;
+365         }
+366 }
+\end{verbatim}\normalsize 
+
+
+\index{process.c@{process.c}!lst_search@{lst\_\-search}}
+\index{lst_search@{lst\_\-search}!process.c@{process.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}struct {\bf olsr\_\-node}$\ast$$\ast$ lst\_\-search (int {\em id})}\label{process_8c_b74d5229fcc3a39626609ac9f12510dd}
+
+
+
+
+Definition at line 349 of file process.c.
+
+References List\_\-ptr, move\_\-lst\_\-ptr(), and Obj\_\-to\_\-ip::olsr\_\-node.
+
+Referenced by object\_\-click().
+
+\footnotesize\begin{verbatim}349                                       {
+350         move_lst_ptr(&id);
+351         /* TODO: return NULL when no node found */
+352         /* if(id != List_ptr->id) */
+353                 /* printf("obj2ip: search id....id not found\n"); */
+354         /* else */
+355                 /* printf("obj2ip: search found objekt_id=%d objekt_ip=%s\n",List_ptr->id,List_ptr->olsr_node->ip); */
+356         return(&List_ptr->olsr_node);
+357 }
+\end{verbatim}\normalsize 
+
+
+\index{process.c@{process.c}!move_lst_ptr@{move\_\-lst\_\-ptr}}
+\index{move_lst_ptr@{move\_\-lst\_\-ptr}!process.c@{process.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void move\_\-lst\_\-ptr (int $\ast$ {\em id})}\label{process_8c_576c61914d53ad9035e74317dbb15903}
+
+
+
+
+Definition at line 303 of file process.c.
+
+References Obj\_\-to\_\-ip::id, List\_\-ptr, Obj\_\-to\_\-ip::next, Obj\_\-to\_\-ip\_\-end, Obj\_\-to\_\-ip\_\-head, and Obj\_\-to\_\-ip::prev.
+
+Referenced by lst\_\-add(), lst\_\-del(), and lst\_\-search().
+
+\footnotesize\begin{verbatim}303                            {
+304         /* printf("obj2ip: move for %d\n",*id); */
+305         /* head to point at end or id lass then first element in linked list*/
+306         if(Obj_to_ip_head->next == Obj_to_ip_head || *id < Obj_to_ip_head->next->id)
+307                 List_ptr = Obj_to_ip_head;
+308         /* id is greather then last element in linked list */
+309         else if(*id > Obj_to_ip_end->prev->id)
+310                 List_ptr = Obj_to_ip_end->prev;
+311         else {
+312                 /* printf("obj2ip: ok i search deeper ;-) for id=%d\n",*id); */
+313                 if((*id - (int) Obj_to_ip_head->next->id) <= ((int)(Obj_to_ip_end->prev->id)-*id)) {
+314                         List_ptr = Obj_to_ip_head;
+315                         /* printf("obj2ip: start at head id %d - %d <= %d - %d \n",*id,Obj_to_ip_head->next->id,Obj_to_ip_end->prev->id,*id); */
+316                         while(*id >= List_ptr->next->id) {
+317                                 /* printf("obj2ip: %d > %d move to ",*id,List_ptr->id); */
+318                                 List_ptr = List_ptr->next;
+319                                 /* printf("%d\n",List_ptr->id); */
+320                         }
+321                 } else {
+322                         List_ptr = Obj_to_ip_end;
+323                         /* printf("obj2ip: start at end id %d - %d > %d - %d \n",*id,Obj_to_ip_head->next->id,Obj_to_ip_end->prev->id,*id);  */
+324                         /*  do List_ptr = List_ptr->prev; while(*id > List_ptr->prev->id); */
+325                         while(*id < List_ptr->prev->id) {
+326                                 /* printf("obj2ip: %d < %d move to ",*id,List_ptr->id); */
+327                                 List_ptr = List_ptr->prev;
+328                                 /* printf("%d\n",List_ptr->id); */
+329                         }
+330                         List_ptr = List_ptr->prev;
+331                 }
+332                 /* printf("obj2ip: found id to insert between %d--> .. <--%d to search/delete %d--> .. <--%d\n",List_ptr->id,List_ptr->next->next->id,List_ptr->prev->id,List_ptr->next->id); */
+333         }
+334 }
+\end{verbatim}\normalsize 
+
+
+\index{process.c@{process.c}!process_main@{process\_\-main}}
+\index{process_main@{process\_\-main}!process.c@{process.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int process\_\-main ()}\label{process_8c_6b4e9b6718b671f6330c2e501c60d3c1}
+
+
+
+
+Definition at line 368 of file process.c.
+
+References add\_\-olsr\_\-con(), Debug, get\_\-olsr\_\-node(), olsr\_\-node::ip, lbuf, NAMEMAX, olsr\_\-node::node\_\-type, olsr\_\-node::node\_\-type\_\-modified, Olsr\_\-root, and olsr\_\-node::visible.
+
+Referenced by net\_\-main().
+
+\footnotesize\begin{verbatim}368                    {
+369 
+370         int dn;
+371         float f;
+372         char *lbuf_ptr, *last_cr_ptr, *con_from, *con_from_end, *con_to, *con_to_end, *etx, *etx_end;
+373         struct olsr_node *olsr_node1;   /* pointer to olsr nodes */
+374         struct olsr_node *olsr_node2;
+375 
+376         lbuf_ptr = lbuf;
+377         last_cr_ptr = NULL;
+378 
+379         con_from = con_from_end = con_to = con_to_end = etx = etx_end = NULL;
+380         dn = 0;
+381 
+382         while ( (*lbuf_ptr) != '\0' ) {
+383 
+384                 /* printf( "%c",(*lbuf_ptr) ); */
+385 
+386                 if ( (*lbuf_ptr) == '\n' ) {
+387 
+388                         last_cr_ptr = lbuf_ptr;
+389                         con_from = con_from_end = con_to = con_to_end = etx = etx_end = NULL;
+390                         dn = 0;
+391 
+392                 }
+393 
+394                 if ( (*lbuf_ptr) == '"' ) {
+395 
+396                         switch ( dn ) {
+397 
+398                                 case 0:
+399                                         con_from = lbuf_ptr + 1;
+400                                         break;
+401                                 case 1:
+402                                         con_from_end = lbuf_ptr;
+403                                         break;
+404                                 case 2:
+405                                         con_to = lbuf_ptr + 1;
+406                                         break;
+407                                 case 3:
+408                                         con_to_end = lbuf_ptr;
+409                                         break;
+410                                 case 4:
+411                                         etx = lbuf_ptr + 1;
+412                                         break;
+413                                 case 5:
+414                                         etx_end = lbuf_ptr;
+415                                         break;
+416 
+417                         }
+418 
+419                         if ( ++dn == 6 ) {
+420 
+421                                 /* terminate strings - but not before 6 times '"' */
+422                                 (*con_from_end) = (*con_to_end) = (*etx_end) = '\0';
+423 
+424                                 /* printf( "con_from: %s, con_to: %s, etx: %s\n", con_from, con_to, etx ); */
+425 
+426                                 /* announced network via HNA */
+427                                 if ( strncmp( etx, "HNA", NAMEMAX ) == 0 ) {
+428 
+429                                         /* connection to internet */
+430                                         if ( strncmp( con_to, "0.0.0.0/0.0.0.0", NAMEMAX ) == 0 ) {
+431 
+432                                                 olsr_node1 = get_olsr_node( &Olsr_root, con_from );
+433 
+434                                                 if ( olsr_node1->node_type != 1 ) {
+435 
+436                                                         olsr_node1->node_type = 1;
+437                                                         olsr_node1->node_type_modified = 1;
+438                                                         if ( Debug ) printf( "new internet: %s\n", olsr_node1->ip );
+439 
+440                                                 }
+441 
+442                                         /* normal HNA */
+443                                         } else {
+444 
+445                                                 olsr_node1 = get_olsr_node( &Olsr_root, con_from );
+446                                                 olsr_node2 = get_olsr_node( &Olsr_root, con_to );
+447 
+448                                                 if ( olsr_node2->node_type != 2 ) {
+449 
+450                                                         olsr_node2->node_type = 2;
+451                                                         olsr_node2->node_type_modified = 1;
+452                                                         if ( Debug ) printf( "new hna network: %s\n", olsr_node2->ip );
+453 
+454                                                 }
+455                                                 if ( olsr_node1->visible && olsr_node2->visible )
+456                                                         add_olsr_con( olsr_node1, olsr_node2, -1000.00 );
+457 
+458                                         }
+459 
+460                                 /* normal node */
+461                                 } else {
+462 
+463                                         olsr_node1 = get_olsr_node( &Olsr_root, con_from );
+464                                         olsr_node2 = get_olsr_node( &Olsr_root, con_to );
+465                                         f = strtod(etx,NULL);
+466                                         if ( f < 1 )
+467                                                 f = 999;
+468                                         add_olsr_con( olsr_node1, olsr_node2, f );
+469                                 }
+470 
+471                                 con_from = con_from_end = con_to = con_to_end = etx = etx_end = NULL;
+472                                 dn = 0;
+473                                 last_cr_ptr = lbuf_ptr;
+474 
+475                         }
+476 
+477                 }
+478 
+479                 lbuf_ptr++;
+480 
+481         }
+482 
+483         if ( last_cr_ptr != NULL ) memmove( lbuf, last_cr_ptr + 1, strlen( last_cr_ptr ) );
+484 
+485         return(0);
+486 
+487 }
+\end{verbatim}\normalsize 
+
+
+
+
+\subsection{Variable Documentation}
+\index{process.c@{process.c}!lbuf@{lbuf}}
+\index{lbuf@{lbuf}!process.c@{process.c}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}char {\bf lbuf}[MAXLINESIZE]}\label{process_8c_00f1cd38b187535569d0354f2506fb74}
+
+
+
+
+Definition at line 34 of file process.c.
+
+Referenced by main(), net\_\-main(), and process\_\-main().
\ No newline at end of file

Added: trunk/apps/olsrs3d/doxygen/latex/refman.tex
===================================================================
--- trunk/apps/olsrs3d/doxygen/latex/refman.tex	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/latex/refman.tex	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,53 @@
+\documentclass[a4paper]{book}
+\usepackage{a4wide}
+\usepackage{makeidx}
+\usepackage{fancyhdr}
+\usepackage{graphicx}
+\usepackage{multicol}
+\usepackage{float}
+\usepackage{textcomp}
+\usepackage{alltt}
+\usepackage{doxygen}
+\makeindex
+\setcounter{tocdepth}{1}
+\renewcommand{\footrulewidth}{0.4pt}
+\begin{document}
+\begin{titlepage}
+\vspace*{7cm}
+\begin{center}
+{\Large olsrs3d Reference Manual\\[1ex]\large 0.1 }\\
+\vspace*{1cm}
+{\large Generated by Doxygen 1.4.6}\\
+\vspace*{0.5cm}
+{\small Sun Mar 19 13:28:20 2006}\\
+\end{center}
+\end{titlepage}
+\clearemptydoublepage
+\pagenumbering{roman}
+\tableofcontents
+\clearemptydoublepage
+\pagenumbering{arabic}
+\chapter{olsrs3d Directory Hierarchy}
+\input{dirs}
+\chapter{olsrs3d Hierarchical Index}
+\input{hierarchy}
+\chapter{olsrs3d Class Index}
+\input{annotated}
+\chapter{olsrs3d File Index}
+\input{files}
+\chapter{olsrs3d Directory Documentation}
+\input{dir_5d167550802dbd943c0631943f884f5b}
+\include{dir_bf110b9fd34b0903efb6170e1cee5506}
+\include{dir_9d2efe7c7f87ee6309da929964f0685b}
+\chapter{olsrs3d Class Documentation}
+\input{structObj__to__ip}
+\include{structolsr__con}
+\include{structolsr__neigh__list}
+\include{structolsr__node}
+\chapter{olsrs3d File Documentation}
+\input{main_8c}
+\include{net_8c}
+\include{olsrs3d_8h}
+\include{process_8c}
+\printindex
+\end{document}

Added: trunk/apps/olsrs3d/doxygen/latex/structObj__to__ip.tex
===================================================================
--- trunk/apps/olsrs3d/doxygen/latex/structObj__to__ip.tex	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/latex/structObj__to__ip.tex	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,66 @@
+\section{Obj\_\-to\_\-ip Struct Reference}
+\label{structObj__to__ip}\index{Obj_to_ip@{Obj\_\-to\_\-ip}}
+{\tt \#include $<$olsrs3d.h$>$}
+
+\subsection*{Public Attributes}
+\begin{CompactItemize}
+\item 
+int {\bf id}
+\item 
+{\bf Obj\_\-to\_\-ip} $\ast$ {\bf next}
+\item 
+{\bf olsr\_\-node} $\ast$ {\bf olsr\_\-node}
+\item 
+{\bf Obj\_\-to\_\-ip} $\ast$ {\bf prev}
+\end{CompactItemize}
+
+
+\subsection{Detailed Description}
+
+
+
+
+Definition at line 79 of file olsrs3d.h.
+
+\subsection{Member Data Documentation}
+\index{Obj_to_ip@{Obj\_\-to\_\-ip}!id@{id}}
+\index{id@{id}!Obj_to_ip@{Obj\_\-to\_\-ip}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int {\bf Obj\_\-to\_\-ip::id}}\label{structObj__to__ip_23759dec76c683ac720f937fea4e4d41}
+
+
+
+
+Definition at line 80 of file olsrs3d.h.
+
+Referenced by lst\_\-del(), lst\_\-initialize(), lst\_\-out(), and move\_\-lst\_\-ptr().\index{Obj_to_ip@{Obj\_\-to\_\-ip}!next@{next}}
+\index{next@{next}!Obj_to_ip@{Obj\_\-to\_\-ip}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}struct {\bf Obj\_\-to\_\-ip}$\ast$ {\bf Obj\_\-to\_\-ip::next}}\label{structObj__to__ip_da076aa87c753db90520204360bf326a}
+
+
+
+
+Definition at line 82 of file olsrs3d.h.
+
+Referenced by handle\_\-olsr\_\-node(), lst\_\-add(), lst\_\-del(), lst\_\-initialize(), lst\_\-out(), and move\_\-lst\_\-ptr().\index{Obj_to_ip@{Obj\_\-to\_\-ip}!olsr_node@{olsr\_\-node}}
+\index{olsr_node@{olsr\_\-node}!Obj_to_ip@{Obj\_\-to\_\-ip}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}struct {\bf olsr\_\-node}$\ast$ {\bf Obj\_\-to\_\-ip::olsr\_\-node}}\label{structObj__to__ip_207d8f9a609e3e20b4cbd9a7976dcd18}
+
+
+
+
+Definition at line 81 of file olsrs3d.h.
+
+Referenced by handle\_\-olsr\_\-node(), lst\_\-add(), and lst\_\-search().\index{Obj_to_ip@{Obj\_\-to\_\-ip}!prev@{prev}}
+\index{prev@{prev}!Obj_to_ip@{Obj\_\-to\_\-ip}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}struct {\bf Obj\_\-to\_\-ip}$\ast$ {\bf Obj\_\-to\_\-ip::prev}}\label{structObj__to__ip_c41475dd4632807df16315bad4309333}
+
+
+
+
+Definition at line 83 of file olsrs3d.h.
+
+Referenced by lst\_\-add(), lst\_\-del(), lst\_\-initialize(), and move\_\-lst\_\-ptr().
+
+The documentation for this struct was generated from the following file:\begin{CompactItemize}
+\item 
+s3d/apps/olsrs3d/{\bf olsrs3d.h}\end{CompactItemize}

Added: trunk/apps/olsrs3d/doxygen/latex/structolsr__con.tex
===================================================================
--- trunk/apps/olsrs3d/doxygen/latex/structolsr__con.tex	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/latex/structolsr__con.tex	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,121 @@
+\section{olsr\_\-con Struct Reference}
+\label{structolsr__con}\index{olsr_con@{olsr\_\-con}}
+{\tt \#include $<$olsrs3d.h$>$}
+
+\subsection*{Public Attributes}
+\begin{CompactItemize}
+\item 
+int {\bf color}
+\item 
+float {\bf left\_\-etx}
+\item 
+{\bf olsr\_\-node} $\ast$ {\bf left\_\-olsr\_\-node}
+\item 
+{\bf olsr\_\-con} $\ast$ {\bf next\_\-olsr\_\-con}
+\item 
+int {\bf obj\_\-id}
+\item 
+{\bf olsr\_\-con} $\ast$ {\bf prev\_\-olsr\_\-con}
+\item 
+float {\bf rgb}
+\item 
+float {\bf right\_\-etx}
+\item 
+{\bf olsr\_\-node} $\ast$ {\bf right\_\-olsr\_\-node}
+\end{CompactItemize}
+
+
+\subsection{Detailed Description}
+
+
+
+
+Definition at line 35 of file olsrs3d.h.
+
+\subsection{Member Data Documentation}
+\index{olsr_con@{olsr\_\-con}!color@{color}}
+\index{color@{color}!olsr_con@{olsr\_\-con}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int {\bf olsr\_\-con::color}}\label{structolsr__con_26a11a87df79af8e59e9f5048937b0c1}
+
+
+
+
+Definition at line 44 of file olsrs3d.h.
+
+Referenced by move\_\-olsr\_\-nodes().\index{olsr_con@{olsr\_\-con}!left_etx@{left\_\-etx}}
+\index{left_etx@{left\_\-etx}!olsr_con@{olsr\_\-con}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}float {\bf olsr\_\-con::left\_\-etx}}\label{structolsr__con_d93efab11883355b45a0460456991362}
+
+
+
+
+Definition at line 41 of file olsrs3d.h.
+
+Referenced by add\_\-olsr\_\-con(), calc\_\-olsr\_\-node\_\-mov(), and move\_\-olsr\_\-nodes().\index{olsr_con@{olsr\_\-con}!left_olsr_node@{left\_\-olsr\_\-node}}
+\index{left_olsr_node@{left\_\-olsr\_\-node}!olsr_con@{olsr\_\-con}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}struct {\bf olsr\_\-node}$\ast$ {\bf olsr\_\-con::left\_\-olsr\_\-node}}\label{structolsr__con_578882f9337bb0bdad9444e85d56a088}
+
+
+
+
+Definition at line 39 of file olsrs3d.h.
+
+Referenced by calc\_\-olsr\_\-node\_\-mov(), handle\_\-olsr\_\-node(), and move\_\-olsr\_\-nodes().\index{olsr_con@{olsr\_\-con}!next_olsr_con@{next\_\-olsr\_\-con}}
+\index{next_olsr_con@{next\_\-olsr\_\-con}!olsr_con@{olsr\_\-con}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}struct {\bf olsr\_\-con}$\ast$ {\bf olsr\_\-con::next\_\-olsr\_\-con}}\label{structolsr__con_369dfd6eec077d0a6228cd1387135e6e}
+
+
+
+
+Definition at line 37 of file olsrs3d.h.
+
+Referenced by add\_\-olsr\_\-con(), calc\_\-olsr\_\-node\_\-mov(), handle\_\-olsr\_\-node(), and move\_\-olsr\_\-nodes().\index{olsr_con@{olsr\_\-con}!obj_id@{obj\_\-id}}
+\index{obj_id@{obj\_\-id}!olsr_con@{olsr\_\-con}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int {\bf olsr\_\-con::obj\_\-id}}\label{structolsr__con_fe985b6b83425cb17e801ac00001175e}
+
+
+
+
+Definition at line 43 of file olsrs3d.h.
+
+Referenced by handle\_\-olsr\_\-node(), and move\_\-olsr\_\-nodes().\index{olsr_con@{olsr\_\-con}!prev_olsr_con@{prev\_\-olsr\_\-con}}
+\index{prev_olsr_con@{prev\_\-olsr\_\-con}!olsr_con@{olsr\_\-con}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}struct {\bf olsr\_\-con}$\ast$ {\bf olsr\_\-con::prev\_\-olsr\_\-con}}\label{structolsr__con_0382eebfbf31d5f217572d4907c503cb}
+
+
+
+
+Definition at line 38 of file olsrs3d.h.
+
+Referenced by add\_\-olsr\_\-con(), and handle\_\-olsr\_\-node().\index{olsr_con@{olsr\_\-con}!rgb@{rgb}}
+\index{rgb@{rgb}!olsr_con@{olsr\_\-con}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}float {\bf olsr\_\-con::rgb}}\label{structolsr__con_239f576ba1dae4303a935a296d5adb95}
+
+
+
+
+Definition at line 45 of file olsrs3d.h.
+
+Referenced by move\_\-olsr\_\-nodes().\index{olsr_con@{olsr\_\-con}!right_etx@{right\_\-etx}}
+\index{right_etx@{right\_\-etx}!olsr_con@{olsr\_\-con}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}float {\bf olsr\_\-con::right\_\-etx}}\label{structolsr__con_30d90c31e93a79ba37ca51b8d146693a}
+
+
+
+
+Definition at line 42 of file olsrs3d.h.
+
+Referenced by calc\_\-olsr\_\-node\_\-mov(), and move\_\-olsr\_\-nodes().\index{olsr_con@{olsr\_\-con}!right_olsr_node@{right\_\-olsr\_\-node}}
+\index{right_olsr_node@{right\_\-olsr\_\-node}!olsr_con@{olsr\_\-con}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}struct {\bf olsr\_\-node}$\ast$ {\bf olsr\_\-con::right\_\-olsr\_\-node}}\label{structolsr__con_f49aca51c70a95deddf8bb715d63af31}
+
+
+
+
+Definition at line 40 of file olsrs3d.h.
+
+Referenced by calc\_\-olsr\_\-node\_\-mov(), handle\_\-olsr\_\-node(), and move\_\-olsr\_\-nodes().
+
+The documentation for this struct was generated from the following file:\begin{CompactItemize}
+\item 
+s3d/apps/olsrs3d/{\bf olsrs3d.h}\end{CompactItemize}

Added: trunk/apps/olsrs3d/doxygen/latex/structolsr__neigh__list.tex
===================================================================
--- trunk/apps/olsrs3d/doxygen/latex/structolsr__neigh__list.tex	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/latex/structolsr__neigh__list.tex	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,44 @@
+\section{olsr\_\-neigh\_\-list Struct Reference}
+\label{structolsr__neigh__list}\index{olsr_neigh_list@{olsr\_\-neigh\_\-list}}
+{\tt \#include $<$olsrs3d.h$>$}
+
+\subsection*{Public Attributes}
+\begin{CompactItemize}
+\item 
+{\bf olsr\_\-neigh\_\-list} $\ast$ {\bf next\_\-olsr\_\-neigh\_\-list}
+\item 
+{\bf olsr\_\-con} $\ast$ {\bf olsr\_\-con}
+\end{CompactItemize}
+
+
+\subsection{Detailed Description}
+
+
+
+
+Definition at line 51 of file olsrs3d.h.
+
+\subsection{Member Data Documentation}
+\index{olsr_neigh_list@{olsr\_\-neigh\_\-list}!next_olsr_neigh_list@{next\_\-olsr\_\-neigh\_\-list}}
+\index{next_olsr_neigh_list@{next\_\-olsr\_\-neigh\_\-list}!olsr_neigh_list@{olsr\_\-neigh\_\-list}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}struct {\bf olsr\_\-neigh\_\-list}$\ast$ {\bf olsr\_\-neigh\_\-list::next\_\-olsr\_\-neigh\_\-list}}\label{structolsr__neigh__list_f1d533fde49e1ed2ea5299661f5c10c6}
+
+
+
+
+Definition at line 53 of file olsrs3d.h.
+
+Referenced by add\_\-olsr\_\-con(), and handle\_\-olsr\_\-node().\index{olsr_neigh_list@{olsr\_\-neigh\_\-list}!olsr_con@{olsr\_\-con}}
+\index{olsr_con@{olsr\_\-con}!olsr_neigh_list@{olsr\_\-neigh\_\-list}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}struct {\bf olsr\_\-con}$\ast$ {\bf olsr\_\-neigh\_\-list::olsr\_\-con}}\label{structolsr__neigh__list_83a291941fbb40293f8e2e5c6b4d11b6}
+
+
+
+
+Definition at line 54 of file olsrs3d.h.
+
+Referenced by add\_\-olsr\_\-con(), and handle\_\-olsr\_\-node().
+
+The documentation for this struct was generated from the following file:\begin{CompactItemize}
+\item 
+s3d/apps/olsrs3d/{\bf olsrs3d.h}\end{CompactItemize}

Added: trunk/apps/olsrs3d/doxygen/latex/structolsr__node.tex
===================================================================
--- trunk/apps/olsrs3d/doxygen/latex/structolsr__node.tex	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/latex/structolsr__node.tex	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,165 @@
+\section{olsr\_\-node Struct Reference}
+\label{structolsr__node}\index{olsr_node@{olsr\_\-node}}
+{\tt \#include $<$olsrs3d.h$>$}
+
+\subsection*{Public Attributes}
+\begin{CompactItemize}
+\item 
+int {\bf desc\_\-id}
+\item 
+float {\bf desc\_\-length}
+\item 
+char {\bf ip} [NAMEMAX]
+\item 
+int {\bf last\_\-seen}
+\item 
+{\bf olsr\_\-node} $\ast$ {\bf left}
+\item 
+float {\bf mov\_\-vec} [3]
+\item 
+int {\bf node\_\-type}
+\item 
+int {\bf node\_\-type\_\-modified}
+\item 
+int {\bf obj\_\-id}
+\item 
+{\bf olsr\_\-neigh\_\-list} $\ast$ {\bf olsr\_\-neigh\_\-list}
+\item 
+float {\bf pos\_\-vec} [3]
+\item 
+{\bf olsr\_\-node} $\ast$ {\bf right}
+\item 
+int {\bf visible}
+\end{CompactItemize}
+
+
+\subsection{Detailed Description}
+
+
+
+
+Definition at line 60 of file olsrs3d.h.
+
+\subsection{Member Data Documentation}
+\index{olsr_node@{olsr\_\-node}!desc_id@{desc\_\-id}}
+\index{desc_id@{desc\_\-id}!olsr_node@{olsr\_\-node}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int {\bf olsr\_\-node::desc\_\-id}}\label{structolsr__node_f2e3f729be82b64001867038bbe8012a}
+
+
+
+
+Definition at line 72 of file olsrs3d.h.
+
+Referenced by handle\_\-olsr\_\-node().\index{olsr_node@{olsr\_\-node}!desc_length@{desc\_\-length}}
+\index{desc_length@{desc\_\-length}!olsr_node@{olsr\_\-node}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}float {\bf olsr\_\-node::desc\_\-length}}\label{structolsr__node_c2a66c5312cf64fec10f6b8903dbd966}
+
+
+
+
+Definition at line 73 of file olsrs3d.h.
+
+Referenced by handle\_\-olsr\_\-node().\index{olsr_node@{olsr\_\-node}!ip@{ip}}
+\index{ip@{ip}!olsr_node@{olsr\_\-node}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}char {\bf olsr\_\-node::ip}[NAMEMAX]}\label{structolsr__node_59690d75faff5c149faecacb4f4d2a57}
+
+
+
+
+Definition at line 64 of file olsrs3d.h.
+
+Referenced by add\_\-olsr\_\-con(), handle\_\-olsr\_\-node(), object\_\-click(), and process\_\-main().\index{olsr_node@{olsr\_\-node}!last_seen@{last\_\-seen}}
+\index{last_seen@{last\_\-seen}!olsr_node@{olsr\_\-node}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int {\bf olsr\_\-node::last\_\-seen}}\label{structolsr__node_1d492aa6f4e75cc100d7a3e2f059d615}
+
+
+
+
+Definition at line 67 of file olsrs3d.h.
+
+Referenced by handle\_\-olsr\_\-node().\index{olsr_node@{olsr\_\-node}!left@{left}}
+\index{left@{left}!olsr_node@{olsr\_\-node}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}struct {\bf olsr\_\-node}$\ast$ {\bf olsr\_\-node::left}}\label{structolsr__node_b64ee26ebfa4a3c2719de780b4cabada}
+
+
+
+
+Definition at line 62 of file olsrs3d.h.
+
+Referenced by get\_\-olsr\_\-node(), and handle\_\-olsr\_\-node().\index{olsr_node@{olsr\_\-node}!mov_vec@{mov\_\-vec}}
+\index{mov_vec@{mov\_\-vec}!olsr_node@{olsr\_\-node}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}float {\bf olsr\_\-node::mov\_\-vec}[3]}\label{structolsr__node_f95ed9fca02788c5f4933ac51b4ea147}
+
+
+
+
+Definition at line 70 of file olsrs3d.h.
+
+Referenced by calc\_\-olsr\_\-node\_\-mov(), handle\_\-olsr\_\-node(), and move\_\-olsr\_\-nodes().\index{olsr_node@{olsr\_\-node}!node_type@{node\_\-type}}
+\index{node_type@{node\_\-type}!olsr_node@{olsr\_\-node}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int {\bf olsr\_\-node::node\_\-type}}\label{structolsr__node_c89186513811183436bcd79cdb6d7b4d}
+
+
+
+
+Definition at line 65 of file olsrs3d.h.
+
+Referenced by handle\_\-olsr\_\-node(), and process\_\-main().\index{olsr_node@{olsr\_\-node}!node_type_modified@{node\_\-type\_\-modified}}
+\index{node_type_modified@{node\_\-type\_\-modified}!olsr_node@{olsr\_\-node}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int {\bf olsr\_\-node::node\_\-type\_\-modified}}\label{structolsr__node_4517a87e4fdbdb58f678743b5684088b}
+
+
+
+
+Definition at line 66 of file olsrs3d.h.
+
+Referenced by handle\_\-olsr\_\-node(), and process\_\-main().\index{olsr_node@{olsr\_\-node}!obj_id@{obj\_\-id}}
+\index{obj_id@{obj\_\-id}!olsr_node@{olsr\_\-node}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int {\bf olsr\_\-node::obj\_\-id}}\label{structolsr__node_15be0912065801026e7b4411af561788}
+
+
+
+
+Definition at line 71 of file olsrs3d.h.
+
+Referenced by handle\_\-olsr\_\-node(), and move\_\-olsr\_\-nodes().\index{olsr_node@{olsr\_\-node}!olsr_neigh_list@{olsr\_\-neigh\_\-list}}
+\index{olsr_neigh_list@{olsr\_\-neigh\_\-list}!olsr_node@{olsr\_\-node}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}struct {\bf olsr\_\-neigh\_\-list}$\ast$ {\bf olsr\_\-node::olsr\_\-neigh\_\-list}}\label{structolsr__node_3b80ce78a06be6aba5a1f93887442764}
+
+
+
+
+Definition at line 74 of file olsrs3d.h.
+
+Referenced by handle\_\-olsr\_\-node().\index{olsr_node@{olsr\_\-node}!pos_vec@{pos\_\-vec}}
+\index{pos_vec@{pos\_\-vec}!olsr_node@{olsr\_\-node}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}float {\bf olsr\_\-node::pos\_\-vec}[3]}\label{structolsr__node_91977704430de9534f7a118d1dfbeb54}
+
+
+
+
+Definition at line 69 of file olsrs3d.h.
+
+Referenced by calc\_\-olsr\_\-node\_\-mov(), handle\_\-olsr\_\-node(), and move\_\-olsr\_\-nodes().\index{olsr_node@{olsr\_\-node}!right@{right}}
+\index{right@{right}!olsr_node@{olsr\_\-node}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}struct {\bf olsr\_\-node}$\ast$ {\bf olsr\_\-node::right}}\label{structolsr__node_bc6cf143d12b1e5a204ae64d40c0eb05}
+
+
+
+
+Definition at line 63 of file olsrs3d.h.
+
+Referenced by get\_\-olsr\_\-node(), and handle\_\-olsr\_\-node().\index{olsr_node@{olsr\_\-node}!visible@{visible}}
+\index{visible@{visible}!olsr_node@{olsr\_\-node}}
+\subsubsection{\setlength{\rightskip}{0pt plus 5cm}int {\bf olsr\_\-node::visible}}\label{structolsr__node_f19d37e4aa5263be9a1741de24686664}
+
+
+
+
+Definition at line 68 of file olsrs3d.h.
+
+Referenced by handle\_\-olsr\_\-node(), move\_\-olsr\_\-nodes(), and process\_\-main().
+
+The documentation for this struct was generated from the following file:\begin{CompactItemize}
+\item 
+s3d/apps/olsrs3d/{\bf olsrs3d.h}\end{CompactItemize}

Added: trunk/apps/olsrs3d/doxygen/xml/combine.xslt
===================================================================
--- trunk/apps/olsrs3d/doxygen/xml/combine.xslt	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/xml/combine.xslt	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,15 @@
+<!-- XSLT script to combine the generated output into a single file. 
+     If you have xsltproc you could use:
+     xsltproc combine.xslt index.xml >all.xml
+-->
+<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
+  <xsl:output method="xml" version="1.0" indent="yes" standalone="yes" />
+  <xsl:template match="/">
+    <doxygen version="{doxygenindex/@version}">
+      <!-- Load all doxgen generated xml files -->
+      <xsl:for-each select="doxygenindex/compound">
+        <xsl:copy-of select="document( concat( @refid, '.xml' ) )/doxygen/*" />
+      </xsl:for-each>
+    </doxygen>
+  </xsl:template>
+</xsl:stylesheet>

Added: trunk/apps/olsrs3d/doxygen/xml/compound.xsd
===================================================================
--- trunk/apps/olsrs3d/doxygen/xml/compound.xsd	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/xml/compound.xsd	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,781 @@
+<?xml version='1.0' encoding='utf-8' ?>
+<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema">
+  <xsd:element name="doxygen" type="DoxygenType"/>
+
+  <!-- Complex types -->
+
+  <xsd:complexType name="DoxygenType">
+    <xsd:sequence maxOccurs="unbounded">
+      <xsd:element name="compounddef" type="compounddefType" minOccurs="0" />
+    </xsd:sequence>
+    <xsd:attribute name="version" type="DoxVersionNumber" use="required" />
+  </xsd:complexType>
+
+  <xsd:complexType name="compounddefType">
+    <xsd:sequence>
+      <xsd:element name="compoundname" type="xsd:string"/>
+      <xsd:element name="title" type="xsd:string" minOccurs="0" />
+      <xsd:element name="basecompoundref" type="compoundRefType" minOccurs="0" maxOccurs="unbounded" />
+      <xsd:element name="derivedcompoundref" type="compoundRefType" minOccurs="0" maxOccurs="unbounded" />
+      <xsd:element name="includes" type="incType" minOccurs="0" maxOccurs="unbounded" />
+      <xsd:element name="includedby" type="incType" minOccurs="0" maxOccurs="unbounded" />
+      <xsd:element name="incdepgraph" type="graphType" minOccurs="0" />
+      <xsd:element name="invincdepgraph" type="graphType" minOccurs="0" />
+      <xsd:element name="innerdir" type="refType" minOccurs="0" maxOccurs="unbounded" />
+      <xsd:element name="innerfile" type="refType" minOccurs="0" maxOccurs="unbounded" />
+      <xsd:element name="innerclass" type="refType" minOccurs="0" maxOccurs="unbounded" />
+      <xsd:element name="innernamespace" type="refType" minOccurs="0" maxOccurs="unbounded" />
+      <xsd:element name="innerpage" type="refType" minOccurs="0" maxOccurs="unbounded" />
+      <xsd:element name="innergroup" type="refType" minOccurs="0" maxOccurs="unbounded" />
+      <xsd:element name="templateparamlist" type="templateparamlistType" minOccurs="0" />
+      <xsd:element name="sectiondef" type="sectiondefType" minOccurs="0" maxOccurs="unbounded" />
+      <xsd:element name="briefdescription" type="descriptionType" minOccurs="0" />
+      <xsd:element name="detaileddescription" type="descriptionType" minOccurs="0" />
+      <xsd:element name="inheritancegraph" type="graphType" minOccurs="0" />
+      <xsd:element name="collaborationgraph" type="graphType" minOccurs="0" />
+      <xsd:element name="programlisting" type="listingType" minOccurs="0" />
+      <xsd:element name="location" type="locationType" minOccurs="0" />
+      <xsd:element name="listofallmembers" type="listofallmembersType" minOccurs="0" />
+    </xsd:sequence>
+    <xsd:attribute name="id" type="xsd:string" />
+    <xsd:attribute name="kind" type="DoxCompoundKind" />
+    <xsd:attribute name="prot" type="DoxProtectionKind" />
+  </xsd:complexType>
+
+  <xsd:complexType name="listofallmembersType">
+    <xsd:sequence>
+      <xsd:element name="member" type="memberRefType" minOccurs="0" maxOccurs="unbounded" />
+    </xsd:sequence>
+  </xsd:complexType>
+
+  <xsd:complexType name="memberRefType">
+    <xsd:sequence>
+      <xsd:element name="scope" />
+      <xsd:element name="name" />
+    </xsd:sequence>
+    <xsd:attribute name="refid" type="xsd:string" />
+    <xsd:attribute name="prot" type="DoxProtectionKind" />
+    <xsd:attribute name="virt" type="DoxVirtualKind" />
+    <xsd:attribute name="ambiguityscope" type="xsd:string" />
+  </xsd:complexType>
+
+  <xsd:complexType name="compoundRefType" mixed="true">
+    <xsd:simpleContent>
+      <xsd:extension base="xsd:string">
+        <xsd:attribute name="refid" type="xsd:string" use="optional" />
+        <xsd:attribute name="prot" type="DoxProtectionKind" />
+        <xsd:attribute name="virt" type="DoxVirtualKind" />
+      </xsd:extension>
+    </xsd:simpleContent>
+  </xsd:complexType>
+
+  <xsd:complexType name="reimplementType" mixed="true">
+    <xsd:simpleContent>
+      <xsd:extension base="xsd:string">
+        <xsd:attribute name="refid" type="xsd:string" />
+      </xsd:extension>
+    </xsd:simpleContent>
+  </xsd:complexType>
+
+  <xsd:complexType name="incType" mixed="true">
+    <xsd:simpleContent>
+      <xsd:extension base="xsd:string">
+        <xsd:attribute name="refid" type="xsd:string" />
+        <xsd:attribute name="local" type="DoxBool" />
+      </xsd:extension>
+    </xsd:simpleContent>
+  </xsd:complexType>
+
+  <xsd:complexType name="refType" mixed="true">
+    <xsd:simpleContent>
+      <xsd:extension base="xsd:string">
+        <xsd:attribute name="refid" type="xsd:string" />
+      </xsd:extension>
+    </xsd:simpleContent>
+  </xsd:complexType>
+
+  <xsd:complexType name="refTextType" mixed="true">
+    <xsd:simpleContent>
+      <xsd:extension base="xsd:string">
+       <xsd:attribute name="refid" type="xsd:string" />
+       <xsd:attribute name="kindref" type="DoxRefKind" />
+       <xsd:attribute name="external" type="xsd:string" />
+      </xsd:extension>
+    </xsd:simpleContent>
+  </xsd:complexType>
+
+  <xsd:complexType name="sectiondefType">
+    <xsd:sequence>
+      <xsd:element name="header" type="xsd:string" minOccurs="0" />
+      <xsd:element name="description" type="descriptionType" minOccurs="0" />
+      <xsd:element name="memberdef" type="memberdefType" maxOccurs="unbounded" />
+    </xsd:sequence>
+    <xsd:attribute name="kind" type="DoxSectionKind" />
+  </xsd:complexType>
+
+  <xsd:complexType name="memberdefType">
+    <xsd:sequence>
+      <xsd:element name="templateparamlist" type="templateparamlistType" minOccurs="0" />
+      <xsd:element name="type" type="linkedTextType" minOccurs="0" />
+      <xsd:element name="definition" minOccurs="0" />
+      <xsd:element name="argsstring" minOccurs="0" />
+      <xsd:element name="name" />
+      <xsd:element name="read" minOccurs="0" />
+      <xsd:element name="write" minOccurs="0" />
+      <xsd:element name="bitfield" minOccurs="0" />
+      <xsd:element name="reimplements" type="reimplementType" minOccurs="0" maxOccurs="unbounded" />
+      <xsd:element name="reimplementedby" type="reimplementType" minOccurs="0" maxOccurs="unbounded" />
+      <xsd:element name="param" type="paramType" minOccurs="0" maxOccurs="unbounded" />
+      <xsd:element name="enumvalue" type="enumvalueType" minOccurs="0" maxOccurs="unbounded" />
+      <xsd:element name="initializer" type="linkedTextType" minOccurs="0" />
+      <xsd:element name="exceptions" type="linkedTextType" minOccurs="0" />
+      <xsd:element name="briefdescription" type="descriptionType" minOccurs="0" />
+      <xsd:element name="detaileddescription" type="descriptionType" minOccurs="0" />
+      <xsd:element name="inbodydescription" type="descriptionType" minOccurs="0" />
+      <xsd:element name="location" type="locationType" />
+      <xsd:element name="references" type="referenceType" minOccurs="0" maxOccurs="unbounded" />
+      <xsd:element name="referencedby" type="referenceType" minOccurs="0" maxOccurs="unbounded" />
+    </xsd:sequence>
+    <xsd:attribute name="kind" type="DoxMemberKind" />
+    <xsd:attribute name="id" type="xsd:string" />
+    <xsd:attribute name="prot" type="DoxProtectionKind" />
+    <xsd:attribute name="static" type="DoxBool" />
+    <xsd:attribute name="const" type="DoxBool" />
+    <xsd:attribute name="explicit" type="DoxBool" />
+    <xsd:attribute name="inline" type="DoxBool" />
+    <xsd:attribute name="virt" type="DoxVirtualKind" />
+    <xsd:attribute name="volatile" type="DoxBool" />
+    <xsd:attribute name="mutable" type="DoxBool" />
+    <xsd:attribute name="readable" type="DoxBool" use="optional"/>
+    <xsd:attribute name="writable" type="DoxBool" use="optional"/>
+  </xsd:complexType>
+
+  <xsd:complexType name="descriptionType" mixed="true">
+    <xsd:sequence>
+      <xsd:element name="title" type="xsd:string" minOccurs="0"/>	    
+      <xsd:element name="para" type="docParaType" minOccurs="0" maxOccurs="unbounded" />
+      <xsd:element name="sect1" type="docSect1Type" minOccurs="0" maxOccurs="unbounded" />
+      <xsd:element name="internal" type="docInternalType" minOccurs="0" />
+    </xsd:sequence>
+  </xsd:complexType>
+
+  <xsd:complexType name="enumvalueType" mixed="true">
+    <xsd:sequence>
+      <xsd:element name="name" />
+      <xsd:element name="initializer" type="linkedTextType" minOccurs="0" />
+      <xsd:element name="briefdescription" type="descriptionType" minOccurs="0" />
+      <xsd:element name="detaileddescription" type="descriptionType" minOccurs="0" />
+    </xsd:sequence>
+    <xsd:attribute name="id" type="xsd:string" />
+    <xsd:attribute name="prot" type="DoxProtectionKind" />
+  </xsd:complexType>
+
+  <xsd:complexType name="templateparamlistType">
+    <xsd:sequence>
+      <xsd:element name="param" type="paramType" minOccurs="0" maxOccurs="unbounded" />
+    </xsd:sequence>
+  </xsd:complexType>
+
+  <xsd:complexType name="paramType">
+    <xsd:sequence>
+      <xsd:element name="type" type="linkedTextType" minOccurs="0" />
+      <xsd:element name="declname" minOccurs="0" />
+      <xsd:element name="defname" minOccurs="0" />
+      <xsd:element name="array" minOccurs="0" />
+      <xsd:element name="defval" type="linkedTextType" minOccurs="0" />
+      <xsd:element name="briefdescription" type="descriptionType" minOccurs="0" />
+    </xsd:sequence>
+  </xsd:complexType>
+
+  <xsd:complexType name="linkedTextType" mixed="true">
+    <xsd:sequence>
+    <xsd:element name="ref" type="refTextType" minOccurs="0" maxOccurs="unbounded" />
+    </xsd:sequence>
+  </xsd:complexType>
+
+  <xsd:complexType name="graphType">
+    <xsd:sequence>
+      <xsd:element name="node" type="nodeType" maxOccurs="unbounded" />
+    </xsd:sequence>
+  </xsd:complexType>
+
+  <xsd:complexType name="nodeType">
+    <xsd:sequence>
+      <xsd:element name="label" />
+      <xsd:element name="link" type="linkType" minOccurs="0" />
+      <xsd:element name="childnode" type="childnodeType" minOccurs="0" maxOccurs="unbounded" />
+    </xsd:sequence>
+    <xsd:attribute name="id" type="xsd:string" />
+  </xsd:complexType>
+
+  <xsd:complexType name="childnodeType">
+    <xsd:sequence>
+      <xsd:element name="edgelabel" minOccurs="0" maxOccurs="unbounded"/>
+    </xsd:sequence>
+    <xsd:attribute name="refid" type="xsd:string" />
+    <xsd:attribute name="relation" type="DoxGraphRelation" />
+  </xsd:complexType>
+
+  <xsd:complexType name="linkType">
+    <xsd:attribute name="refid" type="xsd:string" />
+    <xsd:attribute name="external" type="xsd:string" use="optional"/>
+  </xsd:complexType>
+
+  <xsd:complexType name="listingType">
+    <xsd:sequence>
+      <xsd:element name="codeline" type="codelineType" minOccurs="0" maxOccurs="unbounded" />
+    </xsd:sequence>
+  </xsd:complexType>
+
+  <xsd:complexType name="codelineType">
+    <xsd:sequence>
+      <xsd:element name="highlight" type="highlightType" minOccurs="0" maxOccurs="unbounded" />
+    </xsd:sequence>
+    <xsd:attribute name="lineno" type="xsd:integer" />
+    <xsd:attribute name="refid" type="xsd:string" />
+    <xsd:attribute name="refkind" type="DoxRefKind" />
+    <xsd:attribute name="external" type="DoxBool" />
+  </xsd:complexType>
+
+  <xsd:complexType name="highlightType" mixed="true">
+    <xsd:choice minOccurs="0" maxOccurs="unbounded">
+      <xsd:element name="sp" />
+      <xsd:element name="ref" type="refTextType" />
+    </xsd:choice>
+    <xsd:attribute name="class" type="DoxHighlightClass" />
+  </xsd:complexType>
+
+  <xsd:complexType name="referenceType" mixed="true">
+    <xsd:attribute name="refid" type="xsd:string" />
+    <xsd:attribute name="compoundref" type="xsd:string" use="optional" />
+    <xsd:attribute name="startline" type="xsd:integer" />
+    <xsd:attribute name="endline" type="xsd:integer" />
+  </xsd:complexType>
+
+  <xsd:complexType name="locationType">
+    <xsd:attribute name="file" type="xsd:string" />
+    <xsd:attribute name="line" type="xsd:integer" />
+    <xsd:attribute name="bodyfile" type="xsd:string" />
+    <xsd:attribute name="bodystart" type="xsd:integer" />
+    <xsd:attribute name="bodyend" type="xsd:integer" />
+  </xsd:complexType>
+
+  <xsd:complexType name="docSect1Type" mixed="true">
+    <xsd:sequence>
+      <xsd:element name="title" type="xsd:string" />	    
+      <xsd:element name="para" type="docParaType" minOccurs="0" maxOccurs="unbounded" />
+      <xsd:element name="sect2" type="docSect2Type" minOccurs="0" maxOccurs="unbounded" />
+      <xsd:element name="internal" type="docInternalS1Type" minOccurs="0" />
+    </xsd:sequence>
+    <xsd:attribute name="id" type="xsd:string" />
+  </xsd:complexType>
+
+  <xsd:complexType name="docSect2Type" mixed="true">
+    <xsd:sequence>
+      <xsd:element name="title" type="xsd:string" />	    
+      <xsd:element name="para" type="docParaType" minOccurs="0" maxOccurs="unbounded" />
+      <xsd:element name="sect3" type="docSect3Type" minOccurs="0" maxOccurs="unbounded" />
+      <xsd:element name="internal" type="docInternalS2Type" minOccurs="0" />
+    </xsd:sequence>
+    <xsd:attribute name="id" type="xsd:string" />
+  </xsd:complexType>
+
+  <xsd:complexType name="docSect3Type" mixed="true">
+    <xsd:sequence>
+      <xsd:element name="title" type="xsd:string" />	    
+      <xsd:element name="para" type="docParaType" minOccurs="0" maxOccurs="unbounded" />
+      <xsd:element name="sect4" type="docSect4Type" minOccurs="0" maxOccurs="unbounded" />
+      <xsd:element name="internal" type="docInternalS3Type" minOccurs="0" />
+    </xsd:sequence>
+    <xsd:attribute name="id" type="xsd:string" />
+  </xsd:complexType>
+
+  <xsd:complexType name="docSect4Type" mixed="true">
+    <xsd:sequence>
+      <xsd:element name="title" type="xsd:string" />	    
+      <xsd:element name="para" type="docParaType" minOccurs="0" maxOccurs="unbounded" />
+      <xsd:element name="internal" type="docInternalS4Type" minOccurs="0" />
+    </xsd:sequence>
+    <xsd:attribute name="id" type="xsd:string" />
+  </xsd:complexType>
+
+  <xsd:complexType name="docInternalType" mixed="true">
+    <xsd:sequence>
+      <xsd:element name="para"  type="docParaType"  minOccurs="0" maxOccurs="unbounded" />
+      <xsd:element name="sect1" type="docSect1Type" minOccurs="0" maxOccurs="unbounded" />
+    </xsd:sequence>
+  </xsd:complexType>
+
+  <xsd:complexType name="docInternalS1Type" mixed="true">
+    <xsd:sequence>
+      <xsd:element name="para"  type="docParaType"  minOccurs="0" maxOccurs="unbounded" />
+      <xsd:element name="sect2" type="docSect2Type" minOccurs="0" maxOccurs="unbounded" />
+    </xsd:sequence>
+  </xsd:complexType>
+
+  <xsd:complexType name="docInternalS2Type" mixed="true">
+    <xsd:sequence>
+      <xsd:element name="para"  type="docParaType"  minOccurs="0" maxOccurs="unbounded" />
+      <xsd:element name="sect3" type="docSect3Type" minOccurs="0" maxOccurs="unbounded" />
+    </xsd:sequence>
+  </xsd:complexType>
+
+  <xsd:complexType name="docInternalS3Type" mixed="true">
+    <xsd:sequence>
+      <xsd:element name="para"  type="docParaType"  minOccurs="0" maxOccurs="unbounded" />
+      <xsd:element name="sect3" type="docSect4Type" minOccurs="0" maxOccurs="unbounded" />
+    </xsd:sequence>
+  </xsd:complexType>
+
+  <xsd:complexType name="docInternalS4Type" mixed="true">
+    <xsd:sequence>
+      <xsd:element name="para"  type="docParaType"  minOccurs="0" maxOccurs="unbounded" />
+    </xsd:sequence>
+  </xsd:complexType>
+ 
+  <xsd:group name="docTitleCmdGroup">
+    <xsd:choice>
+      <xsd:element name="ulink" type="docURLLink" />
+      <xsd:element name="bold" type="docMarkupType" />
+      <xsd:element name="emphasis" type="docMarkupType" />
+      <xsd:element name="computeroutput" type="docMarkupType" />
+      <xsd:element name="subscript" type="docMarkupType" />
+      <xsd:element name="superscript" type="docMarkupType" />
+      <xsd:element name="center" type="docMarkupType" />
+      <xsd:element name="small" type="docMarkupType" />
+      <xsd:element name="htmlonly" type="xsd:string" />
+      <xsd:element name="latexonly" type="xsd:string" />
+      <xsd:element name="dot" type="xsd:string" />
+      <xsd:element name="anchor" type="docAnchorType" />
+      <xsd:element name="formula" type="docFormulaType" />
+      <xsd:element name="ref" type="docRefTextType" />
+      <xsd:element name="copy" type="docEmptyType" />
+      <xsd:element name="trademark" type="docEmptyType" />
+      <xsd:element name="registered" type="docEmptyType" />
+      <xsd:element name="lsquo" type="docEmptyType" />
+      <xsd:element name="rsquo" type="docEmptyType" />
+      <xsd:element name="ldquo" type="docEmptyType" />
+      <xsd:element name="rdquo" type="docEmptyType" />
+      <xsd:element name="ndash" type="docEmptyType" />
+      <xsd:element name="mdash" type="docEmptyType" />
+      <xsd:element name="umlaut" type="docCharType" />
+      <xsd:element name="acute" type="docCharType" />
+      <xsd:element name="grave" type="docCharType" />
+      <xsd:element name="circ" type="docCharType" />
+      <xsd:element name="slash" type="docCharType" />
+      <xsd:element name="tilde" type="docCharType" />
+      <xsd:element name="cedil" type="docCharType" />
+      <xsd:element name="ring" type="docCharType" />
+      <xsd:element name="szlig" type="docEmptyType" />
+      <xsd:element name="nonbreakablespace" type="docEmptyType" />
+    </xsd:choice>
+  </xsd:group>
+
+  <xsd:complexType name="docTitleType" mixed="true">
+    <xsd:group ref="docTitleCmdGroup" minOccurs="0" maxOccurs="unbounded" />
+  </xsd:complexType>
+
+  <xsd:group name="docCmdGroup">
+    <xsd:choice>
+      <xsd:group ref="docTitleCmdGroup"/>
+      <xsd:element name="linebreak" type="docEmptyType" />
+      <xsd:element name="hruler" type="docEmptyType" />
+      <xsd:element name="preformatted" type="docMarkupType" />
+      <xsd:element name="programlisting" type="listingType" />
+      <xsd:element name="verbatim" type="xsd:string" />
+      <xsd:element name="indexentry" type="docIndexEntryType" />
+      <xsd:element name="orderedlist" type="docListType" />
+      <xsd:element name="itemizedlist" type="docListType" />
+      <xsd:element name="simplesect" type="docSimpleSectType" />
+      <xsd:element name="title" type="docTitleType" />
+      <xsd:element name="variablelist" type="docVariableListType" />
+      <xsd:element name="table" type="docTableType" />
+      <xsd:element name="heading" type="docHeadingType" />
+      <xsd:element name="image" type="docImageType" />
+      <xsd:element name="dotfile" type="docDotFileType" />
+      <xsd:element name="toclist" type="docTocListType" />
+      <xsd:element name="language" type="docLanguageType" />
+      <xsd:element name="parameterlist" type="docParamListType" />
+      <xsd:element name="xrefsect" type="docXRefSectType" />
+      <xsd:element name="copydoc" type="docCopyType" />
+    </xsd:choice>
+  </xsd:group>
+
+  <xsd:complexType name="docParaType" mixed="true">
+    <xsd:group ref="docCmdGroup" minOccurs="0" maxOccurs="unbounded" />
+  </xsd:complexType>
+
+  <xsd:complexType name="docMarkupType" mixed="true">
+    <xsd:group ref="docCmdGroup" minOccurs="0" maxOccurs="unbounded" />
+  </xsd:complexType>
+
+  <xsd:complexType name="docURLLink" mixed="true">
+    <xsd:group ref="docTitleCmdGroup" minOccurs="0" maxOccurs="unbounded" />
+    <xsd:attribute name="url" type="xsd:string" />
+  </xsd:complexType>
+
+  <xsd:complexType name="docAnchorType" mixed="true">
+    <xsd:attribute name="id" type="xsd:string" />
+  </xsd:complexType>
+
+  <xsd:complexType name="docFormulaType" mixed="true">
+    <xsd:attribute name="id" type="xsd:string" />
+  </xsd:complexType>
+
+  <xsd:complexType name="docIndexEntryType">
+    <xsd:sequence>
+      <xsd:element name="primaryie" type="xsd:string" />
+      <xsd:element name="secondaryie" type="xsd:string" />
+    </xsd:sequence>
+  </xsd:complexType>
+
+  <xsd:complexType name="docListType">
+    <xsd:sequence>
+      <xsd:element name="listitem" type="docListItemType" maxOccurs="unbounded" />
+    </xsd:sequence>
+  </xsd:complexType>
+
+  <xsd:complexType name="docListItemType">
+    <xsd:sequence>
+      <xsd:element name="para" type="docParaType" minOccurs="0" maxOccurs="unbounded" />
+    </xsd:sequence>
+  </xsd:complexType>
+
+  <xsd:complexType name="docSimpleSectType">
+    <xsd:sequence>
+      <xsd:element name="title" type="docTitleType" minOccurs="0" />
+      <xsd:element name="para" type="docParaType" minOccurs="0" maxOccurs="unbounded" />
+    </xsd:sequence>
+    <xsd:attribute name="kind" type="DoxSimpleSectKind" />
+  </xsd:complexType>
+
+  <xsd:complexType name="docVarListEntryType">
+    <xsd:sequence>
+      <xsd:element name="term" type="docTitleType" />
+    </xsd:sequence>
+  </xsd:complexType>
+
+  <xsd:group name="docVariableListGroup">
+    <xsd:sequence>
+      <xsd:element name="varlistentry" type="docVarListEntryType" />
+      <xsd:element name="listitem" type="docListItemType" />
+    </xsd:sequence>
+  </xsd:group>
+
+  <xsd:complexType name="docVariableListType">
+    <xsd:sequence>
+      <xsd:group ref="docVariableListGroup" maxOccurs="unbounded" />
+    </xsd:sequence>
+  </xsd:complexType>
+
+  <xsd:complexType name="docRefTextType" mixed="true">
+    <xsd:group ref="docTitleCmdGroup" minOccurs="0" maxOccurs="unbounded" />
+    <xsd:attribute name="refid" type="xsd:string" />
+    <xsd:attribute name="kindref" type="DoxRefKind" />
+    <xsd:attribute name="external" type="xsd:string" />
+  </xsd:complexType>
+
+  <xsd:complexType name="docTableType">
+    <xsd:sequence>
+      <xsd:element name="row" type="docRowType" minOccurs="0" maxOccurs="unbounded" />
+      <xsd:element name="caption" type="docCaptionType" minOccurs="0" />
+    </xsd:sequence>
+    <xsd:attribute name="rows" type="xsd:integer" />
+    <xsd:attribute name="cols" type="xsd:integer" />
+  </xsd:complexType>
+
+  <xsd:complexType name="docRowType">
+    <xsd:sequence>
+      <xsd:element name="entry" type="docEntryType" minOccurs="0" maxOccurs="unbounded" />
+    </xsd:sequence>
+  </xsd:complexType>
+
+  <xsd:complexType name="docEntryType">
+    <xsd:sequence>
+      <xsd:element name="para" type="docParaType" minOccurs="0" maxOccurs="unbounded" />
+    </xsd:sequence>
+    <xsd:attribute name="thead" type="DoxBool" />
+  </xsd:complexType>
+
+  <xsd:complexType name="docCaptionType" mixed="true">
+    <xsd:group ref="docTitleCmdGroup" minOccurs="0" maxOccurs="unbounded" />
+  </xsd:complexType>
+
+  <xsd:complexType name="docHeadingType" mixed="true">
+    <xsd:group ref="docTitleCmdGroup" minOccurs="0" maxOccurs="unbounded" />
+    <xsd:attribute name="level" type="xsd:integer" /> <!-- todo: range 1-6 -->
+  </xsd:complexType>
+
+  <xsd:complexType name="docImageType" mixed="true">
+    <xsd:group ref="docTitleCmdGroup" minOccurs="0" maxOccurs="unbounded" />
+    <xsd:attribute name="type" type="DoxImageKind" /> 
+    <xsd:attribute name="name" type="xsd:string" /> 
+    <xsd:attribute name="width" type="xsd:string" /> 
+    <xsd:attribute name="height" type="xsd:string" /> 
+  </xsd:complexType>
+
+  <xsd:complexType name="docDotFileType" mixed="true">
+    <xsd:group ref="docTitleCmdGroup" minOccurs="0" maxOccurs="unbounded" />
+    <xsd:attribute name="name" type="xsd:string" /> 
+  </xsd:complexType>
+
+  <xsd:complexType name="docTocItemType" mixed="true">
+    <xsd:group ref="docTitleCmdGroup" minOccurs="0" maxOccurs="unbounded" />
+    <xsd:attribute name="id" type="xsd:string" /> 
+  </xsd:complexType>
+
+  <xsd:complexType name="docTocListType">
+    <xsd:sequence>
+      <xsd:element name="tocitem" type="docTocItemType" minOccurs="0" maxOccurs="unbounded" />
+    </xsd:sequence>
+  </xsd:complexType>
+
+  <xsd:complexType name="docLanguageType">
+    <xsd:sequence>
+      <xsd:element name="para" type="docParaType" minOccurs="0" maxOccurs="unbounded" />
+    </xsd:sequence>
+    <xsd:attribute name="langid" type="xsd:string" /> 
+  </xsd:complexType>
+
+  <xsd:complexType name="docParamListType">
+    <xsd:sequence>
+      <xsd:element name="parameteritem" type="docParamListItem" minOccurs="0" maxOccurs="unbounded" />
+    </xsd:sequence>
+    <xsd:attribute name="kind" type="DoxParamListKind" /> 
+  </xsd:complexType>
+
+  <xsd:complexType name="docParamListItem">
+    <xsd:sequence>
+      <xsd:element name="parameternamelist" type="docParamNameList" minOccurs="0" maxOccurs="unbounded" />
+      <xsd:element name="parameterdescription" type="descriptionType" />
+    </xsd:sequence>
+  </xsd:complexType>
+
+  <xsd:complexType name="docParamNameList">
+    <xsd:sequence>
+      <xsd:element name="parametername" type="docParamName" minOccurs="0" maxOccurs="unbounded" />
+    </xsd:sequence>
+  </xsd:complexType>
+
+  <xsd:complexType name="docParamName" mixed="true">
+    <xsd:sequence>
+      <xsd:element name="ref" type="refTextType" minOccurs="0" maxOccurs="1" />
+    </xsd:sequence>
+    <xsd:attribute name="direction" type="DoxParamDir" use="optional" />
+  </xsd:complexType>
+
+  <xsd:complexType name="docXRefSectType">
+    <xsd:sequence>
+      <xsd:element name="xreftitle" type="xsd:string" minOccurs="0" maxOccurs="unbounded" />
+      <xsd:element name="xrefdescription" type="descriptionType" />
+    </xsd:sequence>
+    <xsd:attribute name="id" type="xsd:string" /> 
+  </xsd:complexType>
+
+  <xsd:complexType name="docCopyType">
+    <xsd:sequence>
+      <xsd:element name="para" type="docParaType" minOccurs="0" maxOccurs="unbounded" />
+      <xsd:element name="sect1" type="docSect1Type" minOccurs="0" maxOccurs="unbounded" />
+      <xsd:element name="internal" type="docInternalType" minOccurs="0" />
+    </xsd:sequence>
+    <xsd:attribute name="link" type="xsd:string" /> 
+  </xsd:complexType>
+
+  <xsd:complexType name="docCharType">
+    <xsd:attribute name="char" type="DoxCharRange"/> 
+  </xsd:complexType>
+
+  <xsd:complexType name="docEmptyType"/>
+
+  <!-- Simple types -->
+
+  <xsd:simpleType name="DoxBool">
+    <xsd:restriction base="xsd:string">
+      <xsd:enumeration value="yes" />
+      <xsd:enumeration value="no" />
+    </xsd:restriction>
+  </xsd:simpleType>
+
+  <xsd:simpleType name="DoxGraphRelation">
+    <xsd:restriction base="xsd:string">
+      <xsd:enumeration value="include" />
+      <xsd:enumeration value="usage" />
+      <xsd:enumeration value="template-instance" />
+      <xsd:enumeration value="public-inheritance" />
+      <xsd:enumeration value="protected-inheritance" />
+      <xsd:enumeration value="private-inheritance" />
+    </xsd:restriction>
+  </xsd:simpleType>
+
+  <xsd:simpleType name="DoxRefKind">
+    <xsd:restriction base="xsd:string">
+      <xsd:enumeration value="compound" />
+      <xsd:enumeration value="member" />
+    </xsd:restriction>
+  </xsd:simpleType>
+
+  <xsd:simpleType name="DoxMemberKind">
+    <xsd:restriction base="xsd:string">
+      <xsd:enumeration value="define" />
+      <xsd:enumeration value="property" />
+      <xsd:enumeration value="event" />
+      <xsd:enumeration value="variable" />
+      <xsd:enumeration value="typedef" />
+      <xsd:enumeration value="enum" />
+      <xsd:enumeration value="function" />
+      <xsd:enumeration value="signal" />
+      <xsd:enumeration value="prototype" />
+      <xsd:enumeration value="friend" />
+      <xsd:enumeration value="dcop" />
+      <xsd:enumeration value="slot" />
+    </xsd:restriction>
+  </xsd:simpleType>
+
+  <xsd:simpleType name="DoxProtectionKind">
+    <xsd:restriction base="xsd:string">
+      <xsd:enumeration value="public" />
+      <xsd:enumeration value="protected" />
+      <xsd:enumeration value="private" />
+      <xsd:enumeration value="package" />
+    </xsd:restriction>
+  </xsd:simpleType>
+
+  <xsd:simpleType name="DoxVirtualKind">
+    <xsd:restriction base="xsd:string">
+      <xsd:enumeration value="non-virtual" />
+      <xsd:enumeration value="virtual" />
+      <xsd:enumeration value="pure-virtual" />
+    </xsd:restriction>
+  </xsd:simpleType>
+
+  <xsd:simpleType name="DoxCompoundKind">
+    <xsd:restriction base="xsd:string">
+      <xsd:enumeration value="class" />
+      <xsd:enumeration value="struct" />
+      <xsd:enumeration value="union" />
+      <xsd:enumeration value="interface" />
+      <xsd:enumeration value="protocol" />
+      <xsd:enumeration value="category" />
+      <xsd:enumeration value="exception" />
+      <xsd:enumeration value="file" />
+      <xsd:enumeration value="namespace" />
+      <xsd:enumeration value="group" />
+      <xsd:enumeration value="page" />
+      <xsd:enumeration value="example" />
+      <xsd:enumeration value="dir" />
+    </xsd:restriction>
+  </xsd:simpleType>
+
+  <xsd:simpleType name="DoxSectionKind">
+    <xsd:restriction base="xsd:string">
+      <xsd:enumeration value="user-defined" />
+      <xsd:enumeration value="public-type" />
+      <xsd:enumeration value="public-func" />
+      <xsd:enumeration value="public-attrib" />
+      <xsd:enumeration value="public-slot" />
+      <xsd:enumeration value="signal" />
+      <xsd:enumeration value="dcop-func" />
+      <xsd:enumeration value="property" />
+      <xsd:enumeration value="event" />
+      <xsd:enumeration value="public-static-func" />
+      <xsd:enumeration value="public-static-attrib" />
+      <xsd:enumeration value="protected-type" />
+      <xsd:enumeration value="protected-func" />
+      <xsd:enumeration value="protected-attrib" />
+      <xsd:enumeration value="protected-slot" />
+      <xsd:enumeration value="protected-static-func" />
+      <xsd:enumeration value="protected-static-attrib" />
+      <xsd:enumeration value="package-type" />
+      <xsd:enumeration value="package-func" />
+      <xsd:enumeration value="package-attrib" />
+      <xsd:enumeration value="package-static-func" />
+      <xsd:enumeration value="package-static-attrib" />
+      <xsd:enumeration value="private-type" />
+      <xsd:enumeration value="private-func" />
+      <xsd:enumeration value="private-attrib" />
+      <xsd:enumeration value="private-slot" />
+      <xsd:enumeration value="private-static-func" />
+      <xsd:enumeration value="private-static-attrib" />
+      <xsd:enumeration value="friend" />
+      <xsd:enumeration value="related" />
+      <xsd:enumeration value="define" />
+      <xsd:enumeration value="prototype" />
+      <xsd:enumeration value="typedef" />
+      <xsd:enumeration value="enum" />
+      <xsd:enumeration value="func" />
+      <xsd:enumeration value="var" />
+    </xsd:restriction>
+  </xsd:simpleType>
+
+  <xsd:simpleType name="DoxHighlightClass">
+    <xsd:restriction base="xsd:string">
+      <xsd:enumeration value="comment" />
+      <xsd:enumeration value="normal" />
+      <xsd:enumeration value="preprocessor" />
+      <xsd:enumeration value="keyword" />
+      <xsd:enumeration value="keywordtype" />
+      <xsd:enumeration value="keywordflow" />
+      <xsd:enumeration value="stringliteral" />
+      <xsd:enumeration value="charliteral" />
+    </xsd:restriction>
+  </xsd:simpleType>
+
+  <xsd:simpleType name="DoxSimpleSectKind">
+    <xsd:restriction base="xsd:string">
+      <xsd:enumeration value="see" />
+      <xsd:enumeration value="return" />
+      <xsd:enumeration value="author" />
+      <xsd:enumeration value="authors" />
+      <xsd:enumeration value="version" />
+      <xsd:enumeration value="since" />
+      <xsd:enumeration value="date" />
+      <xsd:enumeration value="note" />
+      <xsd:enumeration value="warning" />
+      <xsd:enumeration value="pre" />
+      <xsd:enumeration value="post" />
+      <xsd:enumeration value="invariant" />
+      <xsd:enumeration value="remark" />
+      <xsd:enumeration value="attention" />
+      <xsd:enumeration value="par" />
+      <xsd:enumeration value="rcs" />
+    </xsd:restriction>
+  </xsd:simpleType>
+
+  <xsd:simpleType name="DoxVersionNumber">
+    <xsd:restriction base="xsd:string">
+      <xsd:pattern value="\d+\.\d+.*" />
+    </xsd:restriction>
+  </xsd:simpleType>
+
+  <xsd:simpleType name="DoxImageKind">
+    <xsd:restriction base="xsd:string">
+      <xsd:enumeration value="html" />
+      <xsd:enumeration value="latex" />
+      <xsd:enumeration value="rtf" />
+    </xsd:restriction>
+  </xsd:simpleType>
+
+  <xsd:simpleType name="DoxParamListKind">
+    <xsd:restriction base="xsd:string">
+      <xsd:enumeration value="param" />
+      <xsd:enumeration value="retval" />
+      <xsd:enumeration value="exception" />
+    </xsd:restriction>
+  </xsd:simpleType>
+
+  <xsd:simpleType name="DoxCharRange">
+    <xsd:restriction base="xsd:string">
+      <xsd:pattern value="[aeiouncAEIOUNC]" />
+    </xsd:restriction>
+  </xsd:simpleType>
+
+  <xsd:simpleType name="DoxParamDir">
+    <xsd:restriction base="xsd:string">
+      <xsd:enumeration value="in"/>
+      <xsd:enumeration value="out"/>
+      <xsd:enumeration value="inout"/>
+    </xsd:restriction>
+  </xsd:simpleType>
+
+</xsd:schema>
+

Added: trunk/apps/olsrs3d/doxygen/xml/dir_5d167550802dbd943c0631943f884f5b.xml
===================================================================
--- trunk/apps/olsrs3d/doxygen/xml/dir_5d167550802dbd943c0631943f884f5b.xml	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/xml/dir_5d167550802dbd943c0631943f884f5b.xml	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,12 @@
+<?xml version='1.0' encoding='iso-8859-1' standalone='no'?>
+<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.4.6">
+  <compounddef id="dir_5d167550802dbd943c0631943f884f5b" kind="dir">
+    <compoundname>s3d/apps/</compoundname>
+    <innerdir refid="dir_bf110b9fd34b0903efb6170e1cee5506">s3d/apps/olsrs3d/</innerdir>
+    <briefdescription>
+    </briefdescription>
+    <detaileddescription>
+    </detaileddescription>
+    <location file="/home/bigm/s3d/apps/"/>
+  </compounddef>
+</doxygen>

Added: trunk/apps/olsrs3d/doxygen/xml/dir_9d2efe7c7f87ee6309da929964f0685b.xml
===================================================================
--- trunk/apps/olsrs3d/doxygen/xml/dir_9d2efe7c7f87ee6309da929964f0685b.xml	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/xml/dir_9d2efe7c7f87ee6309da929964f0685b.xml	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,12 @@
+<?xml version='1.0' encoding='iso-8859-1' standalone='no'?>
+<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.4.6">
+  <compounddef id="dir_9d2efe7c7f87ee6309da929964f0685b" kind="dir">
+    <compoundname>s3d/</compoundname>
+    <innerdir refid="dir_5d167550802dbd943c0631943f884f5b">s3d/apps/</innerdir>
+    <briefdescription>
+    </briefdescription>
+    <detaileddescription>
+    </detaileddescription>
+    <location file="/home/bigm/s3d/"/>
+  </compounddef>
+</doxygen>

Added: trunk/apps/olsrs3d/doxygen/xml/dir_bf110b9fd34b0903efb6170e1cee5506.xml
===================================================================
--- trunk/apps/olsrs3d/doxygen/xml/dir_bf110b9fd34b0903efb6170e1cee5506.xml	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/xml/dir_bf110b9fd34b0903efb6170e1cee5506.xml	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,15 @@
+<?xml version='1.0' encoding='iso-8859-1' standalone='no'?>
+<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.4.6">
+  <compounddef id="dir_bf110b9fd34b0903efb6170e1cee5506" kind="dir">
+    <compoundname>s3d/apps/olsrs3d/</compoundname>
+    <innerfile refid="main_8c">main.c</innerfile>
+    <innerfile refid="net_8c">net.c</innerfile>
+    <innerfile refid="olsrs3d_8h">olsrs3d.h</innerfile>
+    <innerfile refid="process_8c">process.c</innerfile>
+    <briefdescription>
+    </briefdescription>
+    <detaileddescription>
+    </detaileddescription>
+    <location file="/home/bigm/s3d/apps/olsrs3d/"/>
+  </compounddef>
+</doxygen>

Added: trunk/apps/olsrs3d/doxygen/xml/index.xml
===================================================================
--- trunk/apps/olsrs3d/doxygen/xml/index.xml	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/xml/index.xml	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,143 @@
+<?xml version='1.0' encoding='iso-8859-1' standalone='no'?>
+<doxygenindex xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="index.xsd" version="1.4.6">
+  <compound refid="structObj__to__ip" kind="struct"><name>Obj_to_ip</name>
+    <member refid="structObj__to__ip_123759dec76c683ac720f937fea4e4d41" kind="variable"><name>id</name></member>
+    <member refid="structObj__to__ip_1da076aa87c753db90520204360bf326a" kind="variable"><name>next</name></member>
+    <member refid="structObj__to__ip_1207d8f9a609e3e20b4cbd9a7976dcd18" kind="variable"><name>olsr_node</name></member>
+    <member refid="structObj__to__ip_1c41475dd4632807df16315bad4309333" kind="variable"><name>prev</name></member>
+  </compound>
+  <compound refid="structolsr__con" kind="struct"><name>olsr_con</name>
+    <member refid="structolsr__con_126a11a87df79af8e59e9f5048937b0c1" kind="variable"><name>color</name></member>
+    <member refid="structolsr__con_1d93efab11883355b45a0460456991362" kind="variable"><name>left_etx</name></member>
+    <member refid="structolsr__con_1578882f9337bb0bdad9444e85d56a088" kind="variable"><name>left_olsr_node</name></member>
+    <member refid="structolsr__con_1369dfd6eec077d0a6228cd1387135e6e" kind="variable"><name>next_olsr_con</name></member>
+    <member refid="structolsr__con_1fe985b6b83425cb17e801ac00001175e" kind="variable"><name>obj_id</name></member>
+    <member refid="structolsr__con_10382eebfbf31d5f217572d4907c503cb" kind="variable"><name>prev_olsr_con</name></member>
+    <member refid="structolsr__con_1239f576ba1dae4303a935a296d5adb95" kind="variable"><name>rgb</name></member>
+    <member refid="structolsr__con_130d90c31e93a79ba37ca51b8d146693a" kind="variable"><name>right_etx</name></member>
+    <member refid="structolsr__con_1f49aca51c70a95deddf8bb715d63af31" kind="variable"><name>right_olsr_node</name></member>
+  </compound>
+  <compound refid="structolsr__neigh__list" kind="struct"><name>olsr_neigh_list</name>
+    <member refid="structolsr__neigh__list_1f1d533fde49e1ed2ea5299661f5c10c6" kind="variable"><name>next_olsr_neigh_list</name></member>
+    <member refid="structolsr__neigh__list_183a291941fbb40293f8e2e5c6b4d11b6" kind="variable"><name>olsr_con</name></member>
+  </compound>
+  <compound refid="structolsr__node" kind="struct"><name>olsr_node</name>
+    <member refid="structolsr__node_1f2e3f729be82b64001867038bbe8012a" kind="variable"><name>desc_id</name></member>
+    <member refid="structolsr__node_1c2a66c5312cf64fec10f6b8903dbd966" kind="variable"><name>desc_length</name></member>
+    <member refid="structolsr__node_159690d75faff5c149faecacb4f4d2a57" kind="variable"><name>ip</name></member>
+    <member refid="structolsr__node_11d492aa6f4e75cc100d7a3e2f059d615" kind="variable"><name>last_seen</name></member>
+    <member refid="structolsr__node_1b64ee26ebfa4a3c2719de780b4cabada" kind="variable"><name>left</name></member>
+    <member refid="structolsr__node_1f95ed9fca02788c5f4933ac51b4ea147" kind="variable"><name>mov_vec</name></member>
+    <member refid="structolsr__node_1c89186513811183436bcd79cdb6d7b4d" kind="variable"><name>node_type</name></member>
+    <member refid="structolsr__node_14517a87e4fdbdb58f678743b5684088b" kind="variable"><name>node_type_modified</name></member>
+    <member refid="structolsr__node_115be0912065801026e7b4411af561788" kind="variable"><name>obj_id</name></member>
+    <member refid="structolsr__node_13b80ce78a06be6aba5a1f93887442764" kind="variable"><name>olsr_neigh_list</name></member>
+    <member refid="structolsr__node_191977704430de9534f7a118d1dfbeb54" kind="variable"><name>pos_vec</name></member>
+    <member refid="structolsr__node_1bc6cf143d12b1e5a204ae64d40c0eb05" kind="variable"><name>right</name></member>
+    <member refid="structolsr__node_1f19d37e4aa5263be9a1741de24686664" kind="variable"><name>visible</name></member>
+  </compound>
+  <compound refid="main_8c" kind="file"><name>main.c</name>
+    <member refid="main_8c_1ac3553b3932cbfeeac4526ce7ca0336b" kind="define"><name>SPEED</name></member>
+    <member refid="main_8c_1668e36a25680cc3e0ac4d85a418a838a" kind="function"><name>calc_olsr_node_mov</name></member>
+    <member refid="main_8c_1753e5e5d6fbcbd893bb466ce045a3316" kind="function"><name>dirt</name></member>
+    <member refid="main_8c_1da3bfd6c7ec35068dbcdf966a4628f5e" kind="function"><name>dist</name></member>
+    <member refid="main_8c_1de55269b71a792259ef22763327686b9" kind="function"><name>handle_olsr_node</name></member>
+    <member refid="main_8c_12f5982986645c1e7a202d72bc5e633eb" kind="function"><name>keypress</name></member>
+    <member refid="main_8c_10ddf1224851353fc92bfbff6f499fa97" kind="function"><name>main</name></member>
+    <member refid="main_8c_1896df4ffe3f986ad843e4d191cd712b3" kind="function"><name>mainloop</name></member>
+    <member refid="main_8c_1f4369a866dcd049e2642e137507e8ff1" kind="function"><name>mov_add</name></member>
+    <member refid="main_8c_1b8d0d8cf5ac8914802be645e15241b77" kind="function"><name>move_olsr_nodes</name></member>
+    <member refid="main_8c_1ddbd46dad32b89cec68daa03a08f3582" kind="function"><name>object_click</name></member>
+    <member refid="main_8c_1b7f2ab10a4f7d5ef94d5205fc6147cc4" kind="function"><name>object_info</name></member>
+    <member refid="main_8c_1be0835e7acb76ea987ac80769302d90a" kind="function"><name>out_of_mem</name></member>
+    <member refid="main_8c_1a1187b70998f73cdb598833d6afaa30a" kind="function"><name>print_usage</name></member>
+    <member refid="main_8c_18c528baf37154d347366083f0f816846" kind="function"><name>stop</name></member>
+    <member refid="main_8c_1fb33da16fedfac392508c8ca439aca5d" kind="variable"><name>Asp</name></member>
+    <member refid="main_8c_1f23a6ad2da4511ef430c4f522ae9f4cc" kind="variable"><name>Bottom</name></member>
+    <member refid="main_8c_15d58294b80563f797d1a14d1d739f52b" kind="variable"><name>CamPosition</name></member>
+    <member refid="main_8c_1aaca6648d8e9266d2fbeb21a6a4f4745" kind="variable"><name>ColorSwitch</name></member>
+    <member refid="main_8c_10643a36891539929d987e2ee83ff81d1" kind="variable"><name>Con_begin</name></member>
+    <member refid="main_8c_1923774364cedbc16baa0bc05e9be136c" kind="variable"><name>Debug</name></member>
+    <member refid="main_8c_198d8a7901c60f18d6bf9b35998147831" kind="variable"><name>Factor</name></member>
+    <member refid="main_8c_158acad60c78b63554c696703227d0b7b" kind="variable"><name>Last_olsr_node_count</name></member>
+    <member refid="main_8c_16f68bad9075598ca8ede1827c6832376" kind="variable"><name>Left</name></member>
+    <member refid="main_8c_16a8ff2c3957f5f0ab7dcafcd72b8bd57" kind="variable"><name>List_ptr</name></member>
+    <member refid="main_8c_15bcc20f84efa7bd4aafc56a629f2eff3" kind="variable"><name>Net_read_count</name></member>
+    <member refid="main_8c_1236217b97f5fe65457d8b22c73c5073d" kind="variable"><name>Obj_to_ip_end</name></member>
+    <member refid="main_8c_19494e9e8cbdc4eceb86cb33ff0006785" kind="variable"><name>Obj_to_ip_head</name></member>
+    <member refid="main_8c_19034a20840ce47fbec531d2b4a4a9f21" kind="variable"><name>Olsr_host</name></member>
+    <member refid="main_8c_1bc4292eef79532d125b616a9e0ec8fa0" kind="variable"><name>Olsr_ip_label_obj</name></member>
+    <member refid="main_8c_186c048bc4aaab319f4d61f7c0e1f056f" kind="variable"><name>Olsr_node_count</name></member>
+    <member refid="main_8c_14dfd0657ff868fa02113bcd3335acff1" kind="variable"><name>Olsr_node_count_obj</name></member>
+    <member refid="main_8c_1c03c9b38147e4231238c44f4b5fbdff7" kind="variable"><name>Olsr_node_hna_net</name></member>
+    <member refid="main_8c_1b02228665cef19331d409b0d8a831531" kind="variable"><name>Olsr_node_inet_obj</name></member>
+    <member refid="main_8c_15eba8148fe9257c34665ed364b595fdb" kind="variable"><name>Olsr_node_obj</name></member>
+    <member refid="main_8c_1c5c5c6846587092d0c23b58b558e680c" kind="variable"><name>Olsr_root</name></member>
+    <member refid="main_8c_1cfe4f8990043eade6e82cab3f101b12e" kind="variable"><name>RotateSpeed</name></member>
+    <member refid="main_8c_14370348160930ca94ac7a5d1a6fc5172" kind="variable"><name>RotateSwitch</name></member>
+    <member refid="main_8c_1ea8eb9210d53cd6c1b34e6e7f80a243c" kind="variable"><name>sleep_time</name></member>
+    <member refid="main_8c_1e113d40abb6f4dd73e4b1253917a1942" kind="variable"><name>ZeroPoint</name></member>
+    <member refid="main_8c_14942e67624e2b40a2a949f5cc658ccce" kind="variable"><name>ZeroPosition</name></member>
+    <member refid="main_8c_1ea9e1c287e0c505c2075a0b936dc3404" kind="variable"><name>Zp_rotate</name></member>
+  </compound>
+  <compound refid="net_8c" kind="file"><name>net.c</name>
+    <member refid="net_8c_1614217d263be1fb1a5f76e2ff7be19a2" kind="define"><name>PORT</name></member>
+    <member refid="net_8c_163c933342efd8cac7f272b92d8acab05" kind="function"><name>net_init</name></member>
+    <member refid="net_8c_1b8a768eba717722a3d860c01f69fbbc9" kind="function"><name>net_main</name></member>
+    <member refid="net_8c_198aebc7a8515c76551eb15ecd465b923" kind="function"><name>net_quit</name></member>
+    <member refid="net_8c_1f39ed2161fb25f51aa61ffc038306f75" kind="variable"><name>buf</name></member>
+    <member refid="net_8c_124bdd92b6cf8d141a4a27d4882c6a905" kind="variable"><name>numbytes</name></member>
+    <member refid="net_8c_1d2c8fb3df3a737e0685e902870a611d2" kind="variable"><name>sockfd</name></member>
+  </compound>
+  <compound refid="olsrs3d_8h" kind="file"><name>olsrs3d.h</name>
+    <member refid="olsrs3d_8h_116c16f9369be4a374a3e621f6d13bb16" kind="define"><name>MAXDATASIZE</name></member>
+    <member refid="olsrs3d_8h_1e310f74f793edeb882f0c2d8d8b50bb8" kind="define"><name>MAXLINESIZE</name></member>
+    <member refid="olsrs3d_8h_1f8c0c53607c56b59e883cb0894e5cde7" kind="define"><name>NAMEMAX</name></member>
+    <member refid="olsrs3d_8h_1d01a29bcb2e2daed6fcc6516c328f141" kind="function"><name>lst_add</name></member>
+    <member refid="olsrs3d_8h_1febf2594bdfe9ec411d0c04c9cd951b3" kind="function"><name>lst_del</name></member>
+    <member refid="olsrs3d_8h_1edfb2ae44af543946842187ced1cd47e" kind="function"><name>lst_initialize</name></member>
+    <member refid="olsrs3d_8h_1a015f713ca02d8b76a52175b4128d3e8" kind="function"><name>lst_out</name></member>
+    <member refid="olsrs3d_8h_1ef8aff26d4e096ef0880c204c13309f0" kind="function"><name>lst_search</name></member>
+    <member refid="olsrs3d_8h_1576c61914d53ad9035e74317dbb15903" kind="function"><name>move_lst_ptr</name></member>
+    <member refid="olsrs3d_8h_163c933342efd8cac7f272b92d8acab05" kind="function"><name>net_init</name></member>
+    <member refid="olsrs3d_8h_1b8a768eba717722a3d860c01f69fbbc9" kind="function"><name>net_main</name></member>
+    <member refid="olsrs3d_8h_198aebc7a8515c76551eb15ecd465b923" kind="function"><name>net_quit</name></member>
+    <member refid="olsrs3d_8h_1be0835e7acb76ea987ac80769302d90a" kind="function"><name>out_of_mem</name></member>
+    <member refid="olsrs3d_8h_16b4e9b6718b671f6330c2e501c60d3c1" kind="function"><name>process_main</name></member>
+    <member refid="olsrs3d_8h_1f23a6ad2da4511ef430c4f522ae9f4cc" kind="variable"><name>Bottom</name></member>
+    <member refid="olsrs3d_8h_10643a36891539929d987e2ee83ff81d1" kind="variable"><name>Con_begin</name></member>
+    <member refid="olsrs3d_8h_1923774364cedbc16baa0bc05e9be136c" kind="variable"><name>Debug</name></member>
+    <member refid="olsrs3d_8h_158acad60c78b63554c696703227d0b7b" kind="variable"><name>Last_olsr_node_count</name></member>
+    <member refid="olsrs3d_8h_100f1cd38b187535569d0354f2506fb74" kind="variable"><name>lbuf</name></member>
+    <member refid="olsrs3d_8h_16f68bad9075598ca8ede1827c6832376" kind="variable"><name>Left</name></member>
+    <member refid="olsrs3d_8h_16a8ff2c3957f5f0ab7dcafcd72b8bd57" kind="variable"><name>List_ptr</name></member>
+    <member refid="olsrs3d_8h_15bcc20f84efa7bd4aafc56a629f2eff3" kind="variable"><name>Net_read_count</name></member>
+    <member refid="olsrs3d_8h_1236217b97f5fe65457d8b22c73c5073d" kind="variable"><name>Obj_to_ip_end</name></member>
+    <member refid="olsrs3d_8h_19494e9e8cbdc4eceb86cb33ff0006785" kind="variable"><name>Obj_to_ip_head</name></member>
+    <member refid="olsrs3d_8h_186c048bc4aaab319f4d61f7c0e1f056f" kind="variable"><name>Olsr_node_count</name></member>
+    <member refid="olsrs3d_8h_14dfd0657ff868fa02113bcd3335acff1" kind="variable"><name>Olsr_node_count_obj</name></member>
+    <member refid="olsrs3d_8h_1c03c9b38147e4231238c44f4b5fbdff7" kind="variable"><name>Olsr_node_hna_net</name></member>
+    <member refid="olsrs3d_8h_1b02228665cef19331d409b0d8a831531" kind="variable"><name>Olsr_node_inet_obj</name></member>
+    <member refid="olsrs3d_8h_15eba8148fe9257c34665ed364b595fdb" kind="variable"><name>Olsr_node_obj</name></member>
+    <member refid="olsrs3d_8h_1c5c5c6846587092d0c23b58b558e680c" kind="variable"><name>Olsr_root</name></member>
+    <member refid="olsrs3d_8h_1e113d40abb6f4dd73e4b1253917a1942" kind="variable"><name>ZeroPoint</name></member>
+  </compound>
+  <compound refid="process_8c" kind="file"><name>process.c</name>
+    <member refid="process_8c_14c780ee64b12fa5531a56edfb5ffcc00" kind="function"><name>add_olsr_con</name></member>
+    <member refid="process_8c_17ba929b35f03f5921272b4e5e821ade2" kind="function"><name>get_olsr_node</name></member>
+    <member refid="process_8c_1d01a29bcb2e2daed6fcc6516c328f141" kind="function"><name>lst_add</name></member>
+    <member refid="process_8c_1febf2594bdfe9ec411d0c04c9cd951b3" kind="function"><name>lst_del</name></member>
+    <member refid="process_8c_1edfb2ae44af543946842187ced1cd47e" kind="function"><name>lst_initialize</name></member>
+    <member refid="process_8c_1a015f713ca02d8b76a52175b4128d3e8" kind="function"><name>lst_out</name></member>
+    <member refid="process_8c_1b74d5229fcc3a39626609ac9f12510dd" kind="function"><name>lst_search</name></member>
+    <member refid="process_8c_1576c61914d53ad9035e74317dbb15903" kind="function"><name>move_lst_ptr</name></member>
+    <member refid="process_8c_16b4e9b6718b671f6330c2e501c60d3c1" kind="function"><name>process_main</name></member>
+    <member refid="process_8c_100f1cd38b187535569d0354f2506fb74" kind="variable"><name>lbuf</name></member>
+  </compound>
+  <compound refid="dir_5d167550802dbd943c0631943f884f5b" kind="dir"><name>s3d/apps/</name>
+  </compound>
+  <compound refid="dir_bf110b9fd34b0903efb6170e1cee5506" kind="dir"><name>s3d/apps/olsrs3d/</name>
+  </compound>
+  <compound refid="dir_9d2efe7c7f87ee6309da929964f0685b" kind="dir"><name>s3d/</name>
+  </compound>
+</doxygenindex>

Added: trunk/apps/olsrs3d/doxygen/xml/index.xsd
===================================================================
--- trunk/apps/olsrs3d/doxygen/xml/index.xsd	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/xml/index.xsd	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,66 @@
+<?xml version='1.0' encoding='utf-8' ?>
+<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema">
+  <xsd:element name="doxygenindex" type="DoxygenType"/>
+
+  <xsd:complexType name="DoxygenType">
+    <xsd:sequence>
+      <xsd:element name="compound" type="CompoundType" minOccurs="0" maxOccurs="unbounded"/>
+    </xsd:sequence>
+    <xsd:attribute name="version" type="xsd:string" use="required"/>
+  </xsd:complexType>
+
+  <xsd:complexType name="CompoundType">
+    <xsd:sequence>
+      <xsd:element name="name" type="xsd:string"/>
+      <xsd:element name="member" type="MemberType" minOccurs="0" maxOccurs="unbounded"/>
+    </xsd:sequence>
+    <xsd:attribute name="refid" type="xsd:string" use="required"/>
+    <xsd:attribute name="kind" type="CompoundKind" use="required"/>
+  </xsd:complexType>
+
+  <xsd:complexType name="MemberType">
+    <xsd:sequence>
+      <xsd:element name="name" type="xsd:string"/>
+    </xsd:sequence>
+    <xsd:attribute name="refid" type="xsd:string" use="required"/>
+    <xsd:attribute name="kind" type="MemberKind" use="required"/>
+  </xsd:complexType>
+  
+  <xsd:simpleType name="CompoundKind">
+    <xsd:restriction base="xsd:string">
+      <xsd:enumeration value="class"/>
+      <xsd:enumeration value="struct"/>
+      <xsd:enumeration value="union"/>
+      <xsd:enumeration value="interface"/>
+      <xsd:enumeration value="protocol"/>
+      <xsd:enumeration value="category"/>
+      <xsd:enumeration value="exception"/>
+      <xsd:enumeration value="file"/>
+      <xsd:enumeration value="namespace"/>
+      <xsd:enumeration value="group"/>
+      <xsd:enumeration value="page"/>
+      <xsd:enumeration value="example"/>
+      <xsd:enumeration value="dir"/>
+    </xsd:restriction>
+  </xsd:simpleType>
+
+  <xsd:simpleType name="MemberKind">
+    <xsd:restriction base="xsd:string">
+      <xsd:enumeration value="define"/>
+      <xsd:enumeration value="property"/>
+      <xsd:enumeration value="event"/>
+      <xsd:enumeration value="variable"/>
+      <xsd:enumeration value="typedef"/>
+      <xsd:enumeration value="enum"/>
+      <xsd:enumeration value="enumvalue"/>
+      <xsd:enumeration value="function"/>
+      <xsd:enumeration value="signal"/>
+      <xsd:enumeration value="prototype"/>
+      <xsd:enumeration value="friend"/>
+      <xsd:enumeration value="dcop"/>
+      <xsd:enumeration value="slot"/>
+    </xsd:restriction>
+  </xsd:simpleType>
+
+</xsd:schema>
+

Added: trunk/apps/olsrs3d/doxygen/xml/main_8c.xml
===================================================================
--- trunk/apps/olsrs3d/doxygen/xml/main_8c.xml	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/xml/main_8c.xml	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,1783 @@
+<?xml version='1.0' encoding='iso-8859-1' standalone='no'?>
+<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.4.6">
+  <compounddef id="main_8c" kind="file">
+    <compoundname>main.c</compoundname>
+    <includes local="no">stdio.h</includes>
+    <includes local="no">s3d.h</includes>
+    <includes local="no">s3d_keysym.h</includes>
+    <includes local="no">time.h</includes>
+    <includes local="no">string.h</includes>
+    <includes local="no">math.h</includes>
+    <includes local="no">getopt.h</includes>
+    <includes local="no">stdlib.h</includes>
+    <includes refid="olsrs3d_8h" local="yes">olsrs3d.h</includes>
+    <incdepgraph>
+      <node id="8">
+        <label>stdlib.h</label>
+      </node>
+      <node id="9">
+        <label>olsrs3d.h</label>
+        <link refid="olsrs3d_8h"/>
+      </node>
+      <node id="5">
+        <label>string.h</label>
+      </node>
+      <node id="0">
+        <label>s3d/apps/olsrs3d/main.c</label>
+        <link refid="main.c"/>
+        <childnode refid="1" relation="include">
+        </childnode>
+        <childnode refid="2" relation="include">
+        </childnode>
+        <childnode refid="3" relation="include">
+        </childnode>
+        <childnode refid="4" relation="include">
+        </childnode>
+        <childnode refid="5" relation="include">
+        </childnode>
+        <childnode refid="6" relation="include">
+        </childnode>
+        <childnode refid="7" relation="include">
+        </childnode>
+        <childnode refid="8" relation="include">
+        </childnode>
+        <childnode refid="9" relation="include">
+        </childnode>
+      </node>
+      <node id="2">
+        <label>s3d.h</label>
+      </node>
+      <node id="4">
+        <label>time.h</label>
+      </node>
+      <node id="6">
+        <label>math.h</label>
+      </node>
+      <node id="7">
+        <label>getopt.h</label>
+      </node>
+      <node id="3">
+        <label>s3d_keysym.h</label>
+      </node>
+      <node id="1">
+        <label>stdio.h</label>
+      </node>
+    </incdepgraph>
+      <sectiondef kind="define">
+      <memberdef kind="define" id="main_8c_1ac3553b3932cbfeeac4526ce7ca0336b" prot="public" static="no">
+        <name>SPEED</name>
+        <initializer>10.0</initializer>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/main.c" line="37" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="37" bodyend="-1"/>
+      </memberdef>
+      </sectiondef>
+      <sectiondef kind="func">
+      <memberdef kind="function" id="main_8c_1668e36a25680cc3e0ac4d85a418a838a" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
+        <type>void</type>
+        <definition>void calc_olsr_node_mov</definition>
+        <argsstring>(void)</argsstring>
+        <name>calc_olsr_node_mov</name>
+        <param>
+          <type>void</type>
+        </param>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/main.c" line="400" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="400" bodyend="429"/>
+        <references refid="main_8c_10643a36891539929d987e2ee83ff81d1" compoundref="main_8c" startline="45">Con_begin</references>
+        <references refid="main_8c_1753e5e5d6fbcbd893bb466ce045a3316" compoundref="main_8c" startline="138" endline="151">dirt</references>
+        <references refid="main_8c_198d8a7901c60f18d6bf9b35998147831" compoundref="main_8c" startline="67">Factor</references>
+        <references refid="structolsr__con_1d93efab11883355b45a0460456991362" compoundref="olsrs3d_8h" startline="41">olsr_con::left_etx</references>
+        <references refid="structolsr__con_1578882f9337bb0bdad9444e85d56a088" compoundref="olsrs3d_8h" startline="39">olsr_con::left_olsr_node</references>
+        <references refid="main_8c_1f4369a866dcd049e2642e137507e8ff1" compoundref="main_8c" startline="166" endline="174">mov_add</references>
+        <references refid="structolsr__node_1f95ed9fca02788c5f4933ac51b4ea147" compoundref="olsrs3d_8h" startline="70">olsr_node::mov_vec</references>
+        <references refid="structolsr__con_1369dfd6eec077d0a6228cd1387135e6e" compoundref="olsrs3d_8h" startline="37">olsr_con::next_olsr_con</references>
+        <references refid="structolsr__node_191977704430de9534f7a118d1dfbeb54" compoundref="olsrs3d_8h" startline="69">olsr_node::pos_vec</references>
+        <references refid="structolsr__con_130d90c31e93a79ba37ca51b8d146693a" compoundref="olsrs3d_8h" startline="42">olsr_con::right_etx</references>
+        <references refid="structolsr__con_1f49aca51c70a95deddf8bb715d63af31" compoundref="olsrs3d_8h" startline="40">olsr_con::right_olsr_node</references>
+        <referencedby refid="main_8c_1896df4ffe3f986ad843e4d191cd712b3" compoundref="main_8c" startline="624" endline="671">mainloop</referencedby>
+      </memberdef>
+      <memberdef kind="function" id="main_8c_1753e5e5d6fbcbd893bb466ce045a3316" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
+        <type>float</type>
+        <definition>float dirt</definition>
+        <argsstring>(float p1[], float p2[], float p3[])</argsstring>
+        <name>dirt</name>
+        <param>
+          <type>float</type>
+          <declname>p1</declname>
+          <array>[]</array>
+        </param>
+        <param>
+          <type>float</type>
+          <declname>p2</declname>
+          <array>[]</array>
+        </param>
+        <param>
+          <type>float</type>
+          <declname>p3</declname>
+          <array>[]</array>
+        </param>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/main.c" line="139" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="138" bodyend="151"/>
+        <references refid="main_8c_1da3bfd6c7ec35068dbcdf966a4628f5e" compoundref="main_8c" startline="114" endline="122">dist</references>
+        <referencedby refid="main_8c_1668e36a25680cc3e0ac4d85a418a838a" compoundref="main_8c" startline="400" endline="429">calc_olsr_node_mov</referencedby>
+        <referencedby refid="main_8c_1de55269b71a792259ef22763327686b9" compoundref="main_8c" startline="186" endline="390">handle_olsr_node</referencedby>
+        <referencedby refid="main_8c_1b8d0d8cf5ac8914802be645e15241b77" compoundref="main_8c" startline="439" endline="620">move_olsr_nodes</referencedby>
+      </memberdef>
+      <memberdef kind="function" id="main_8c_1da3bfd6c7ec35068dbcdf966a4628f5e" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
+        <type>float</type>
+        <definition>float dist</definition>
+        <argsstring>(float p1[], float p2[])</argsstring>
+        <name>dist</name>
+        <param>
+          <type>float</type>
+          <declname>p1</declname>
+          <array>[]</array>
+        </param>
+        <param>
+          <type>float</type>
+          <declname>p2</declname>
+          <array>[]</array>
+        </param>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/main.c" line="115" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="114" bodyend="122"/>
+        <referencedby refid="main_8c_1753e5e5d6fbcbd893bb466ce045a3316" compoundref="main_8c" startline="138" endline="151">dirt</referencedby>
+        <referencedby refid="main_8c_1b8d0d8cf5ac8914802be645e15241b77" compoundref="main_8c" startline="439" endline="620">move_olsr_nodes</referencedby>
+      </memberdef>
+      <memberdef kind="function" id="main_8c_1de55269b71a792259ef22763327686b9" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
+        <type>void</type>
+        <definition>void handle_olsr_node</definition>
+        <argsstring>(struct olsr_node *olsr_node)</argsstring>
+        <name>handle_olsr_node</name>
+        <param>
+          <type>struct <ref refid="structolsr__node" kindref="compound">olsr_node</ref> *</type>
+          <declname>olsr_node</declname>
+        </param>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/main.c" line="186" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="186" bodyend="390"/>
+        <references refid="main_8c_15d58294b80563f797d1a14d1d739f52b" compoundref="main_8c" startline="60">CamPosition</references>
+        <references refid="main_8c_1923774364cedbc16baa0bc05e9be136c" compoundref="main_8c" startline="41">Debug</references>
+        <references refid="structolsr__node_1f2e3f729be82b64001867038bbe8012a" compoundref="olsrs3d_8h" startline="72">olsr_node::desc_id</references>
+        <references refid="structolsr__node_1c2a66c5312cf64fec10f6b8903dbd966" compoundref="olsrs3d_8h" startline="73">olsr_node::desc_length</references>
+        <references refid="main_8c_1753e5e5d6fbcbd893bb466ce045a3316" compoundref="main_8c" startline="138" endline="151">dirt</references>
+        <references refid="structolsr__node_159690d75faff5c149faecacb4f4d2a57" compoundref="olsrs3d_8h" startline="64">olsr_node::ip</references>
+        <references refid="structolsr__node_11d492aa6f4e75cc100d7a3e2f059d615" compoundref="olsrs3d_8h" startline="67">olsr_node::last_seen</references>
+        <references refid="structolsr__node_1b64ee26ebfa4a3c2719de780b4cabada" compoundref="olsrs3d_8h" startline="62">olsr_node::left</references>
+        <references refid="structolsr__con_1578882f9337bb0bdad9444e85d56a088" compoundref="olsrs3d_8h" startline="39">olsr_con::left_olsr_node</references>
+        <references refid="olsrs3d_8h_1d01a29bcb2e2daed6fcc6516c328f141" compoundref="process_8c" startline="259" endline="272">lst_add</references>
+        <references refid="olsrs3d_8h_1febf2594bdfe9ec411d0c04c9cd951b3" compoundref="process_8c" startline="281" endline="294">lst_del</references>
+        <references refid="main_8c_1f4369a866dcd049e2642e137507e8ff1" compoundref="main_8c" startline="166" endline="174">mov_add</references>
+        <references refid="structolsr__node_1f95ed9fca02788c5f4933ac51b4ea147" compoundref="olsrs3d_8h" startline="70">olsr_node::mov_vec</references>
+        <references refid="structObj__to__ip_1da076aa87c753db90520204360bf326a" compoundref="olsrs3d_8h" startline="82">Obj_to_ip::next</references>
+        <references refid="structolsr__con_1369dfd6eec077d0a6228cd1387135e6e" compoundref="olsrs3d_8h" startline="37">olsr_con::next_olsr_con</references>
+        <references refid="structolsr__neigh__list_1f1d533fde49e1ed2ea5299661f5c10c6" compoundref="olsrs3d_8h" startline="53">olsr_neigh_list::next_olsr_neigh_list</references>
+        <references refid="structolsr__node_1c89186513811183436bcd79cdb6d7b4d" compoundref="olsrs3d_8h" startline="65">olsr_node::node_type</references>
+        <references refid="structolsr__node_14517a87e4fdbdb58f678743b5684088b" compoundref="olsrs3d_8h" startline="66">olsr_node::node_type_modified</references>
+        <references refid="structolsr__con_1fe985b6b83425cb17e801ac00001175e" compoundref="olsrs3d_8h" startline="43">olsr_con::obj_id</references>
+        <references refid="structolsr__node_115be0912065801026e7b4411af561788" compoundref="olsrs3d_8h" startline="71">olsr_node::obj_id</references>
+        <references refid="main_8c_1236217b97f5fe65457d8b22c73c5073d" compoundref="main_8c" startline="47">Obj_to_ip_end</references>
+        <references refid="main_8c_19494e9e8cbdc4eceb86cb33ff0006785" compoundref="main_8c" startline="47">Obj_to_ip_head</references>
+        <references refid="structolsr__neigh__list_183a291941fbb40293f8e2e5c6b4d11b6" compoundref="olsrs3d_8h" startline="54">olsr_neigh_list::olsr_con</references>
+        <references refid="structolsr__node_13b80ce78a06be6aba5a1f93887442764" compoundref="olsrs3d_8h" startline="74">olsr_node::olsr_neigh_list</references>
+        <references refid="structObj__to__ip_1207d8f9a609e3e20b4cbd9a7976dcd18" compoundref="olsrs3d_8h" startline="81">Obj_to_ip::olsr_node</references>
+        <references refid="main_8c_186c048bc4aaab319f4d61f7c0e1f056f" compoundref="main_8c" startline="49">Olsr_node_count</references>
+        <references refid="main_8c_1c03c9b38147e4231238c44f4b5fbdff7" compoundref="main_8c" startline="54">Olsr_node_hna_net</references>
+        <references refid="main_8c_1b02228665cef19331d409b0d8a831531" compoundref="main_8c" startline="54">Olsr_node_inet_obj</references>
+        <references refid="main_8c_15eba8148fe9257c34665ed364b595fdb" compoundref="main_8c" startline="54">Olsr_node_obj</references>
+        <references refid="structolsr__node_191977704430de9534f7a118d1dfbeb54" compoundref="olsrs3d_8h" startline="69">olsr_node::pos_vec</references>
+        <references refid="structolsr__con_10382eebfbf31d5f217572d4907c503cb" compoundref="olsrs3d_8h" startline="38">olsr_con::prev_olsr_con</references>
+        <references refid="structolsr__node_1bc6cf143d12b1e5a204ae64d40c0eb05" compoundref="olsrs3d_8h" startline="63">olsr_node::right</references>
+        <references refid="structolsr__con_1f49aca51c70a95deddf8bb715d63af31" compoundref="olsrs3d_8h" startline="40">olsr_con::right_olsr_node</references>
+        <references refid="structolsr__node_1f19d37e4aa5263be9a1741de24686664" compoundref="olsrs3d_8h" startline="68">olsr_node::visible</references>
+        <references refid="main_8c_1e113d40abb6f4dd73e4b1253917a1942" compoundref="main_8c" startline="62">ZeroPoint</references>
+        <referencedby refid="main_8c_1896df4ffe3f986ad843e4d191cd712b3" compoundref="main_8c" startline="624" endline="671">mainloop</referencedby>
+      </memberdef>
+      <memberdef kind="function" id="main_8c_12f5982986645c1e7a202d72bc5e633eb" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
+        <type>void</type>
+        <definition>void keypress</definition>
+        <argsstring>(struct s3d_evt *event)</argsstring>
+        <name>keypress</name>
+        <param>
+          <type>struct s3d_evt *</type>
+          <declname>event</declname>
+        </param>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/main.c" line="690" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="690" bodyend="738"/>
+        <references refid="main_8c_1aaca6648d8e9266d2fbeb21a6a4f4745" compoundref="main_8c" startline="64">ColorSwitch</references>
+        <references refid="main_8c_198d8a7901c60f18d6bf9b35998147831" compoundref="main_8c" startline="67">Factor</references>
+        <references refid="olsrs3d_8h_1a015f713ca02d8b76a52175b4128d3e8" compoundref="process_8c" startline="359" endline="366">lst_out</references>
+        <references refid="main_8c_1cfe4f8990043eade6e82cab3f101b12e" compoundref="main_8c" startline="66">RotateSpeed</references>
+        <references refid="main_8c_14370348160930ca94ac7a5d1a6fc5172" compoundref="main_8c" startline="65">RotateSwitch</references>
+        <references refid="main_8c_18c528baf37154d347366083f0f816846" compoundref="main_8c" startline="675" endline="680">stop</references>
+        <references refid="main_8c_1e113d40abb6f4dd73e4b1253917a1942" compoundref="main_8c" startline="62">ZeroPoint</references>
+        <references refid="main_8c_14942e67624e2b40a2a949f5cc658ccce" compoundref="main_8c" startline="61">ZeroPosition</references>
+        <referencedby refid="main_8c_10ddf1224851353fc92bfbff6f499fa97" compoundref="main_8c" startline="804" endline="867">main</referencedby>
+      </memberdef>
+      <memberdef kind="function" id="main_8c_10ddf1224851353fc92bfbff6f499fa97" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
+        <type>int</type>
+        <definition>int main</definition>
+        <argsstring>(int argc, char *argv[])</argsstring>
+        <name>main</name>
+        <param>
+          <type>int</type>
+          <declname>argc</declname>
+        </param>
+        <param>
+          <type>char *</type>
+          <declname>argv</declname>
+          <array>[]</array>
+        </param>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/main.c" line="804" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="804" bodyend="867"/>
+        <references refid="main_8c_1923774364cedbc16baa0bc05e9be136c" compoundref="main_8c" startline="41">Debug</references>
+        <references refid="main_8c_12f5982986645c1e7a202d72bc5e633eb" compoundref="main_8c" startline="690" endline="738">keypress</references>
+        <references refid="olsrs3d_8h_100f1cd38b187535569d0354f2506fb74" compoundref="process_8c" startline="34">lbuf</references>
+        <references refid="olsrs3d_8h_1edfb2ae44af543946842187ced1cd47e" compoundref="process_8c" startline="239" endline="249">lst_initialize</references>
+        <references refid="main_8c_1896df4ffe3f986ad843e4d191cd712b3" compoundref="main_8c" startline="624" endline="671">mainloop</references>
+        <references refid="net_8c_163c933342efd8cac7f272b92d8acab05" compoundref="net_8c" startline="45" endline="72">net_init</references>
+        <references refid="net_8c_198aebc7a8515c76551eb15ecd465b923" compoundref="net_8c" startline="122" endline="127">net_quit</references>
+        <references refid="main_8c_1ddbd46dad32b89cec68daa03a08f3582" compoundref="main_8c" startline="746" endline="768">object_click</references>
+        <references refid="main_8c_1b7f2ab10a4f7d5ef94d5205fc6147cc4" compoundref="main_8c" startline="777" endline="802">object_info</references>
+        <references refid="main_8c_19034a20840ce47fbec531d2b4a4a9f21" compoundref="main_8c" startline="43">Olsr_host</references>
+        <references refid="main_8c_1c03c9b38147e4231238c44f4b5fbdff7" compoundref="main_8c" startline="54">Olsr_node_hna_net</references>
+        <references refid="main_8c_1b02228665cef19331d409b0d8a831531" compoundref="main_8c" startline="54">Olsr_node_inet_obj</references>
+        <references refid="main_8c_15eba8148fe9257c34665ed364b595fdb" compoundref="main_8c" startline="54">Olsr_node_obj</references>
+        <references refid="main_8c_1a1187b70998f73cdb598833d6afaa30a" compoundref="main_8c" startline="75" endline="84">print_usage</references>
+        <references refid="main_8c_18c528baf37154d347366083f0f816846" compoundref="main_8c" startline="675" endline="680">stop</references>
+        <references refid="main_8c_1e113d40abb6f4dd73e4b1253917a1942" compoundref="main_8c" startline="62">ZeroPoint</references>
+      </memberdef>
+      <memberdef kind="function" id="main_8c_1896df4ffe3f986ad843e4d191cd712b3" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
+        <type>void</type>
+        <definition>void mainloop</definition>
+        <argsstring>()</argsstring>
+        <name>mainloop</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/main.c" line="624" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="624" bodyend="671"/>
+        <references refid="main_8c_1f23a6ad2da4511ef430c4f522ae9f4cc" compoundref="main_8c" startline="57">Bottom</references>
+        <references refid="main_8c_1668e36a25680cc3e0ac4d85a418a838a" compoundref="main_8c" startline="400" endline="429">calc_olsr_node_mov</references>
+        <references refid="main_8c_1de55269b71a792259ef22763327686b9" compoundref="main_8c" startline="186" endline="390">handle_olsr_node</references>
+        <references refid="main_8c_158acad60c78b63554c696703227d0b7b" compoundref="main_8c" startline="49">Last_olsr_node_count</references>
+        <references refid="main_8c_16f68bad9075598ca8ede1827c6832376" compoundref="main_8c" startline="58">Left</references>
+        <references refid="main_8c_1b8d0d8cf5ac8914802be645e15241b77" compoundref="main_8c" startline="439" endline="620">move_olsr_nodes</references>
+        <references refid="net_8c_1b8a768eba717722a3d860c01f69fbbc9" compoundref="net_8c" startline="74" endline="120">net_main</references>
+        <references refid="main_8c_15bcc20f84efa7bd4aafc56a629f2eff3" compoundref="main_8c" startline="52">Net_read_count</references>
+        <references refid="main_8c_186c048bc4aaab319f4d61f7c0e1f056f" compoundref="main_8c" startline="49">Olsr_node_count</references>
+        <references refid="main_8c_14dfd0657ff868fa02113bcd3335acff1" compoundref="main_8c" startline="50">Olsr_node_count_obj</references>
+        <references refid="main_8c_1c5c5c6846587092d0c23b58b558e680c" compoundref="main_8c" startline="46">Olsr_root</references>
+        <references refid="main_8c_1cfe4f8990043eade6e82cab3f101b12e" compoundref="main_8c" startline="66">RotateSpeed</references>
+        <references refid="main_8c_14370348160930ca94ac7a5d1a6fc5172" compoundref="main_8c" startline="65">RotateSwitch</references>
+        <references refid="main_8c_1ea8eb9210d53cd6c1b34e6e7f80a243c" compoundref="main_8c" startline="39">sleep_time</references>
+        <references refid="main_8c_1e113d40abb6f4dd73e4b1253917a1942" compoundref="main_8c" startline="62">ZeroPoint</references>
+        <references refid="main_8c_1ea9e1c287e0c505c2075a0b936dc3404" compoundref="main_8c" startline="63">Zp_rotate</references>
+        <referencedby refid="main_8c_10ddf1224851353fc92bfbff6f499fa97" compoundref="main_8c" startline="804" endline="867">main</referencedby>
+      </memberdef>
+      <memberdef kind="function" id="main_8c_1f4369a866dcd049e2642e137507e8ff1" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
+        <type>void</type>
+        <definition>void mov_add</definition>
+        <argsstring>(float mov[], float p[], float fac)</argsstring>
+        <name>mov_add</name>
+        <param>
+          <type>float</type>
+          <declname>mov</declname>
+          <array>[]</array>
+        </param>
+        <param>
+          <type>float</type>
+          <declname>p</declname>
+          <array>[]</array>
+        </param>
+        <param>
+          <type>float</type>
+          <declname>fac</declname>
+        </param>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/main.c" line="167" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="166" bodyend="174"/>
+        <referencedby refid="main_8c_1668e36a25680cc3e0ac4d85a418a838a" compoundref="main_8c" startline="400" endline="429">calc_olsr_node_mov</referencedby>
+        <referencedby refid="main_8c_1de55269b71a792259ef22763327686b9" compoundref="main_8c" startline="186" endline="390">handle_olsr_node</referencedby>
+        <referencedby refid="main_8c_1b8d0d8cf5ac8914802be645e15241b77" compoundref="main_8c" startline="439" endline="620">move_olsr_nodes</referencedby>
+      </memberdef>
+      <memberdef kind="function" id="main_8c_1b8d0d8cf5ac8914802be645e15241b77" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
+        <type>void</type>
+        <definition>void move_olsr_nodes</definition>
+        <argsstring>(void)</argsstring>
+        <name>move_olsr_nodes</name>
+        <param>
+          <type>void</type>
+        </param>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/main.c" line="439" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="439" bodyend="620"/>
+        <references refid="structolsr__con_126a11a87df79af8e59e9f5048937b0c1" compoundref="olsrs3d_8h" startline="44">olsr_con::color</references>
+        <references refid="main_8c_1aaca6648d8e9266d2fbeb21a6a4f4745" compoundref="main_8c" startline="64">ColorSwitch</references>
+        <references refid="main_8c_10643a36891539929d987e2ee83ff81d1" compoundref="main_8c" startline="45">Con_begin</references>
+        <references refid="main_8c_1753e5e5d6fbcbd893bb466ce045a3316" compoundref="main_8c" startline="138" endline="151">dirt</references>
+        <references refid="main_8c_1da3bfd6c7ec35068dbcdf966a4628f5e" compoundref="main_8c" startline="114" endline="122">dist</references>
+        <references refid="structolsr__con_1d93efab11883355b45a0460456991362" compoundref="olsrs3d_8h" startline="41">olsr_con::left_etx</references>
+        <references refid="structolsr__con_1578882f9337bb0bdad9444e85d56a088" compoundref="olsrs3d_8h" startline="39">olsr_con::left_olsr_node</references>
+        <references refid="main_8c_1f4369a866dcd049e2642e137507e8ff1" compoundref="main_8c" startline="166" endline="174">mov_add</references>
+        <references refid="structolsr__node_1f95ed9fca02788c5f4933ac51b4ea147" compoundref="olsrs3d_8h" startline="70">olsr_node::mov_vec</references>
+        <references refid="structolsr__con_1369dfd6eec077d0a6228cd1387135e6e" compoundref="olsrs3d_8h" startline="37">olsr_con::next_olsr_con</references>
+        <references refid="structolsr__con_1fe985b6b83425cb17e801ac00001175e" compoundref="olsrs3d_8h" startline="43">olsr_con::obj_id</references>
+        <references refid="structolsr__node_115be0912065801026e7b4411af561788" compoundref="olsrs3d_8h" startline="71">olsr_node::obj_id</references>
+        <references refid="structolsr__node_191977704430de9534f7a118d1dfbeb54" compoundref="olsrs3d_8h" startline="69">olsr_node::pos_vec</references>
+        <references refid="structolsr__con_1239f576ba1dae4303a935a296d5adb95" compoundref="olsrs3d_8h" startline="45">olsr_con::rgb</references>
+        <references refid="structolsr__con_130d90c31e93a79ba37ca51b8d146693a" compoundref="olsrs3d_8h" startline="42">olsr_con::right_etx</references>
+        <references refid="structolsr__con_1f49aca51c70a95deddf8bb715d63af31" compoundref="olsrs3d_8h" startline="40">olsr_con::right_olsr_node</references>
+        <references refid="structolsr__node_1f19d37e4aa5263be9a1741de24686664" compoundref="olsrs3d_8h" startline="68">olsr_node::visible</references>
+        <referencedby refid="main_8c_1896df4ffe3f986ad843e4d191cd712b3" compoundref="main_8c" startline="624" endline="671">mainloop</referencedby>
+      </memberdef>
+      <memberdef kind="function" id="main_8c_1ddbd46dad32b89cec68daa03a08f3582" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
+        <type>void</type>
+        <definition>void object_click</definition>
+        <argsstring>(struct s3d_evt *evt)</argsstring>
+        <name>object_click</name>
+        <param>
+          <type>struct s3d_evt *</type>
+          <declname>evt</declname>
+        </param>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/main.c" line="747" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="746" bodyend="768"/>
+        <references refid="main_8c_1f23a6ad2da4511ef430c4f522ae9f4cc" compoundref="main_8c" startline="57">Bottom</references>
+        <references refid="structolsr__node_159690d75faff5c149faecacb4f4d2a57" compoundref="olsrs3d_8h" startline="64">olsr_node::ip</references>
+        <references refid="main_8c_16f68bad9075598ca8ede1827c6832376" compoundref="main_8c" startline="58">Left</references>
+        <references refid="olsrs3d_8h_1ef8aff26d4e096ef0880c204c13309f0" compoundref="process_8c" startline="349" endline="357">lst_search</references>
+        <references refid="main_8c_1bc4292eef79532d125b616a9e0ec8fa0" compoundref="main_8c" startline="51">Olsr_ip_label_obj</references>
+        <referencedby refid="main_8c_10ddf1224851353fc92bfbff6f499fa97" compoundref="main_8c" startline="804" endline="867">main</referencedby>
+      </memberdef>
+      <memberdef kind="function" id="main_8c_1b7f2ab10a4f7d5ef94d5205fc6147cc4" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
+        <type>void</type>
+        <definition>void object_info</definition>
+        <argsstring>(struct s3d_evt *hrmz)</argsstring>
+        <name>object_info</name>
+        <param>
+          <type>struct s3d_evt *</type>
+          <declname>hrmz</declname>
+        </param>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/main.c" line="778" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="777" bodyend="802"/>
+        <references refid="main_8c_1fb33da16fedfac392508c8ca439aca5d" compoundref="main_8c" startline="56">Asp</references>
+        <references refid="main_8c_1f23a6ad2da4511ef430c4f522ae9f4cc" compoundref="main_8c" startline="57">Bottom</references>
+        <references refid="main_8c_15d58294b80563f797d1a14d1d739f52b" compoundref="main_8c" startline="60">CamPosition</references>
+        <references refid="main_8c_16f68bad9075598ca8ede1827c6832376" compoundref="main_8c" startline="58">Left</references>
+        <referencedby refid="main_8c_10ddf1224851353fc92bfbff6f499fa97" compoundref="main_8c" startline="804" endline="867">main</referencedby>
+      </memberdef>
+      <memberdef kind="function" id="main_8c_1be0835e7acb76ea987ac80769302d90a" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
+        <type>void</type>
+        <definition>void out_of_mem</definition>
+        <argsstring>(void)</argsstring>
+        <name>out_of_mem</name>
+        <param>
+          <type>void</type>
+        </param>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/main.c" line="94" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="94" bodyend="99"/>
+        <referencedby refid="process_8c_14c780ee64b12fa5531a56edfb5ffcc00" compoundref="process_8c" startline="48" endline="140">add_olsr_con</referencedby>
+        <referencedby refid="process_8c_17ba929b35f03f5921272b4e5e821ade2" compoundref="process_8c" startline="155" endline="231">get_olsr_node</referencedby>
+        <referencedby refid="process_8c_1d01a29bcb2e2daed6fcc6516c328f141" compoundref="process_8c" startline="259" endline="272">lst_add</referencedby>
+        <referencedby refid="process_8c_1edfb2ae44af543946842187ced1cd47e" compoundref="process_8c" startline="239" endline="249">lst_initialize</referencedby>
+      </memberdef>
+      <memberdef kind="function" id="main_8c_1a1187b70998f73cdb598833d6afaa30a" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
+        <type>void</type>
+        <definition>void print_usage</definition>
+        <argsstring>(void)</argsstring>
+        <name>print_usage</name>
+        <param>
+          <type>void</type>
+        </param>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/main.c" line="75" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="75" bodyend="84"/>
+        <referencedby refid="main_8c_10ddf1224851353fc92bfbff6f499fa97" compoundref="main_8c" startline="804" endline="867">main</referencedby>
+      </memberdef>
+      <memberdef kind="function" id="main_8c_18c528baf37154d347366083f0f816846" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
+        <type>void</type>
+        <definition>void stop</definition>
+        <argsstring>()</argsstring>
+        <name>stop</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/main.c" line="675" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="675" bodyend="680"/>
+        <references refid="net_8c_198aebc7a8515c76551eb15ecd465b923" compoundref="net_8c" startline="122" endline="127">net_quit</references>
+        <referencedby refid="main_8c_12f5982986645c1e7a202d72bc5e633eb" compoundref="main_8c" startline="690" endline="738">keypress</referencedby>
+        <referencedby refid="main_8c_10ddf1224851353fc92bfbff6f499fa97" compoundref="main_8c" startline="804" endline="867">main</referencedby>
+      </memberdef>
+      </sectiondef>
+      <sectiondef kind="var">
+      <memberdef kind="variable" id="main_8c_1fb33da16fedfac392508c8ca439aca5d" prot="public" static="no" mutable="no">
+        <type>float</type>
+        <definition>float Asp</definition>
+        <argsstring></argsstring>
+        <name>Asp</name>
+        <initializer> 1.0</initializer>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/main.c" line="56" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="56" bodyend="-1"/>
+        <referencedby refid="main_8c_1b7f2ab10a4f7d5ef94d5205fc6147cc4" compoundref="main_8c" startline="777" endline="802">object_info</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="main_8c_1f23a6ad2da4511ef430c4f522ae9f4cc" prot="public" static="no" mutable="no">
+        <type>float</type>
+        <definition>float Bottom</definition>
+        <argsstring></argsstring>
+        <name>Bottom</name>
+        <initializer> -1.0</initializer>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/main.c" line="57" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="57" bodyend="-1"/>
+        <referencedby refid="main_8c_1896df4ffe3f986ad843e4d191cd712b3" compoundref="main_8c" startline="624" endline="671">mainloop</referencedby>
+        <referencedby refid="main_8c_1ddbd46dad32b89cec68daa03a08f3582" compoundref="main_8c" startline="746" endline="768">object_click</referencedby>
+        <referencedby refid="main_8c_1b7f2ab10a4f7d5ef94d5205fc6147cc4" compoundref="main_8c" startline="777" endline="802">object_info</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="main_8c_15d58294b80563f797d1a14d1d739f52b" prot="public" static="no" mutable="no">
+        <type>float</type>
+        <definition>float CamPosition[2][3]</definition>
+        <argsstring>[2][3]</argsstring>
+        <name>CamPosition</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/main.c" line="60" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="60" bodyend="-1"/>
+        <referencedby refid="main_8c_1de55269b71a792259ef22763327686b9" compoundref="main_8c" startline="186" endline="390">handle_olsr_node</referencedby>
+        <referencedby refid="main_8c_1b7f2ab10a4f7d5ef94d5205fc6147cc4" compoundref="main_8c" startline="777" endline="802">object_info</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="main_8c_1aaca6648d8e9266d2fbeb21a6a4f4745" prot="public" static="no" mutable="no">
+        <type>int</type>
+        <definition>int ColorSwitch</definition>
+        <argsstring></argsstring>
+        <name>ColorSwitch</name>
+        <initializer> 0</initializer>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/main.c" line="64" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="64" bodyend="-1"/>
+        <referencedby refid="main_8c_12f5982986645c1e7a202d72bc5e633eb" compoundref="main_8c" startline="690" endline="738">keypress</referencedby>
+        <referencedby refid="main_8c_1b8d0d8cf5ac8914802be645e15241b77" compoundref="main_8c" startline="439" endline="620">move_olsr_nodes</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="main_8c_10643a36891539929d987e2ee83ff81d1" prot="public" static="no" mutable="no">
+        <type><ref refid="structolsr__con" kindref="compound">olsr_con</ref> *</type>
+        <definition>struct olsr_con* Con_begin</definition>
+        <argsstring></argsstring>
+        <name>Con_begin</name>
+        <initializer> NULL</initializer>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/main.c" line="45" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="45" bodyend="-1"/>
+        <referencedby refid="process_8c_14c780ee64b12fa5531a56edfb5ffcc00" compoundref="process_8c" startline="48" endline="140">add_olsr_con</referencedby>
+        <referencedby refid="main_8c_1668e36a25680cc3e0ac4d85a418a838a" compoundref="main_8c" startline="400" endline="429">calc_olsr_node_mov</referencedby>
+        <referencedby refid="main_8c_1b8d0d8cf5ac8914802be645e15241b77" compoundref="main_8c" startline="439" endline="620">move_olsr_nodes</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="main_8c_1923774364cedbc16baa0bc05e9be136c" prot="public" static="no" mutable="no">
+        <type>int</type>
+        <definition>int Debug</definition>
+        <argsstring></argsstring>
+        <name>Debug</name>
+        <initializer> 0</initializer>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/main.c" line="41" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="41" bodyend="-1"/>
+        <referencedby refid="process_8c_17ba929b35f03f5921272b4e5e821ade2" compoundref="process_8c" startline="155" endline="231">get_olsr_node</referencedby>
+        <referencedby refid="main_8c_1de55269b71a792259ef22763327686b9" compoundref="main_8c" startline="186" endline="390">handle_olsr_node</referencedby>
+        <referencedby refid="main_8c_10ddf1224851353fc92bfbff6f499fa97" compoundref="main_8c" startline="804" endline="867">main</referencedby>
+        <referencedby refid="olsrs3d_8h_1b8a768eba717722a3d860c01f69fbbc9" compoundref="net_8c" startline="74" endline="120">net_main</referencedby>
+        <referencedby refid="process_8c_16b4e9b6718b671f6330c2e501c60d3c1" compoundref="process_8c" startline="368" endline="487">process_main</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="main_8c_198d8a7901c60f18d6bf9b35998147831" prot="public" static="no" mutable="no">
+        <type>float</type>
+        <definition>float Factor</definition>
+        <argsstring></argsstring>
+        <name>Factor</name>
+        <initializer> 0.5</initializer>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/main.c" line="67" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="67" bodyend="-1"/>
+        <referencedby refid="main_8c_1668e36a25680cc3e0ac4d85a418a838a" compoundref="main_8c" startline="400" endline="429">calc_olsr_node_mov</referencedby>
+        <referencedby refid="main_8c_12f5982986645c1e7a202d72bc5e633eb" compoundref="main_8c" startline="690" endline="738">keypress</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="main_8c_158acad60c78b63554c696703227d0b7b" prot="public" static="no" mutable="no">
+        <type>int</type>
+        <definition>int Last_olsr_node_count</definition>
+        <argsstring></argsstring>
+        <name>Last_olsr_node_count</name>
+        <initializer> -1</initializer>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/main.c" line="49" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="49" bodyend="-1"/>
+        <referencedby refid="main_8c_1896df4ffe3f986ad843e4d191cd712b3" compoundref="main_8c" startline="624" endline="671">mainloop</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="main_8c_16f68bad9075598ca8ede1827c6832376" prot="public" static="no" mutable="no">
+        <type>float</type>
+        <definition>float Left</definition>
+        <argsstring></argsstring>
+        <name>Left</name>
+        <initializer> -1.0</initializer>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/main.c" line="58" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="58" bodyend="-1"/>
+        <referencedby refid="main_8c_1896df4ffe3f986ad843e4d191cd712b3" compoundref="main_8c" startline="624" endline="671">mainloop</referencedby>
+        <referencedby refid="main_8c_1ddbd46dad32b89cec68daa03a08f3582" compoundref="main_8c" startline="746" endline="768">object_click</referencedby>
+        <referencedby refid="main_8c_1b7f2ab10a4f7d5ef94d5205fc6147cc4" compoundref="main_8c" startline="777" endline="802">object_info</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="main_8c_16a8ff2c3957f5f0ab7dcafcd72b8bd57" prot="public" static="no" mutable="no">
+        <type><ref refid="structObj__to__ip" kindref="compound">Obj_to_ip</ref> *</type>
+        <definition>struct Obj_to_ip * List_ptr</definition>
+        <argsstring></argsstring>
+        <name>List_ptr</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/main.c" line="47" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="47" bodyend="-1"/>
+        <referencedby refid="process_8c_1d01a29bcb2e2daed6fcc6516c328f141" compoundref="process_8c" startline="259" endline="272">lst_add</referencedby>
+        <referencedby refid="process_8c_1febf2594bdfe9ec411d0c04c9cd951b3" compoundref="process_8c" startline="281" endline="294">lst_del</referencedby>
+        <referencedby refid="process_8c_1edfb2ae44af543946842187ced1cd47e" compoundref="process_8c" startline="239" endline="249">lst_initialize</referencedby>
+        <referencedby refid="process_8c_1b74d5229fcc3a39626609ac9f12510dd" compoundref="process_8c" startline="349" endline="357">lst_search</referencedby>
+        <referencedby refid="process_8c_1576c61914d53ad9035e74317dbb15903" compoundref="process_8c" startline="303" endline="334">move_lst_ptr</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="main_8c_15bcc20f84efa7bd4aafc56a629f2eff3" prot="public" static="no" mutable="no">
+        <type>int</type>
+        <definition>int Net_read_count</definition>
+        <argsstring></argsstring>
+        <name>Net_read_count</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/main.c" line="52" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="52" bodyend="-1"/>
+        <referencedby refid="main_8c_1896df4ffe3f986ad843e4d191cd712b3" compoundref="main_8c" startline="624" endline="671">mainloop</referencedby>
+        <referencedby refid="olsrs3d_8h_1b8a768eba717722a3d860c01f69fbbc9" compoundref="net_8c" startline="74" endline="120">net_main</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="main_8c_1236217b97f5fe65457d8b22c73c5073d" prot="public" static="no" mutable="no">
+        <type><ref refid="structObj__to__ip" kindref="compound">Obj_to_ip</ref> *</type>
+        <definition>struct Obj_to_ip * Obj_to_ip_end</definition>
+        <argsstring></argsstring>
+        <name>Obj_to_ip_end</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/main.c" line="47" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="47" bodyend="-1"/>
+        <referencedby refid="main_8c_1de55269b71a792259ef22763327686b9" compoundref="main_8c" startline="186" endline="390">handle_olsr_node</referencedby>
+        <referencedby refid="process_8c_1edfb2ae44af543946842187ced1cd47e" compoundref="process_8c" startline="239" endline="249">lst_initialize</referencedby>
+        <referencedby refid="process_8c_1576c61914d53ad9035e74317dbb15903" compoundref="process_8c" startline="303" endline="334">move_lst_ptr</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="main_8c_19494e9e8cbdc4eceb86cb33ff0006785" prot="public" static="no" mutable="no">
+        <type><ref refid="structObj__to__ip" kindref="compound">Obj_to_ip</ref> *</type>
+        <definition>struct Obj_to_ip* Obj_to_ip_head</definition>
+        <argsstring></argsstring>
+        <name>Obj_to_ip_head</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/main.c" line="47" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="47" bodyend="-1"/>
+        <referencedby refid="main_8c_1de55269b71a792259ef22763327686b9" compoundref="main_8c" startline="186" endline="390">handle_olsr_node</referencedby>
+        <referencedby refid="process_8c_1edfb2ae44af543946842187ced1cd47e" compoundref="process_8c" startline="239" endline="249">lst_initialize</referencedby>
+        <referencedby refid="process_8c_1a015f713ca02d8b76a52175b4128d3e8" compoundref="process_8c" startline="359" endline="366">lst_out</referencedby>
+        <referencedby refid="process_8c_1576c61914d53ad9035e74317dbb15903" compoundref="process_8c" startline="303" endline="334">move_lst_ptr</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="main_8c_19034a20840ce47fbec531d2b4a4a9f21" prot="public" static="no" mutable="no">
+        <type>char</type>
+        <definition>char Olsr_host[256]</definition>
+        <argsstring>[256]</argsstring>
+        <name>Olsr_host</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/main.c" line="43" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="43" bodyend="-1"/>
+        <referencedby refid="main_8c_10ddf1224851353fc92bfbff6f499fa97" compoundref="main_8c" startline="804" endline="867">main</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="main_8c_1bc4292eef79532d125b616a9e0ec8fa0" prot="public" static="no" mutable="no">
+        <type>int</type>
+        <definition>int Olsr_ip_label_obj</definition>
+        <argsstring></argsstring>
+        <name>Olsr_ip_label_obj</name>
+        <initializer> -1</initializer>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/main.c" line="51" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="51" bodyend="-1"/>
+        <referencedby refid="main_8c_1ddbd46dad32b89cec68daa03a08f3582" compoundref="main_8c" startline="746" endline="768">object_click</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="main_8c_186c048bc4aaab319f4d61f7c0e1f056f" prot="public" static="no" mutable="no">
+        <type>int</type>
+        <definition>int Olsr_node_count</definition>
+        <argsstring></argsstring>
+        <name>Olsr_node_count</name>
+        <initializer> 0</initializer>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/main.c" line="49" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="49" bodyend="-1"/>
+        <referencedby refid="process_8c_17ba929b35f03f5921272b4e5e821ade2" compoundref="process_8c" startline="155" endline="231">get_olsr_node</referencedby>
+        <referencedby refid="main_8c_1de55269b71a792259ef22763327686b9" compoundref="main_8c" startline="186" endline="390">handle_olsr_node</referencedby>
+        <referencedby refid="main_8c_1896df4ffe3f986ad843e4d191cd712b3" compoundref="main_8c" startline="624" endline="671">mainloop</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="main_8c_14dfd0657ff868fa02113bcd3335acff1" prot="public" static="no" mutable="no">
+        <type>int</type>
+        <definition>int Olsr_node_count_obj</definition>
+        <argsstring></argsstring>
+        <name>Olsr_node_count_obj</name>
+        <initializer> -1</initializer>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/main.c" line="50" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="50" bodyend="-1"/>
+        <referencedby refid="main_8c_1896df4ffe3f986ad843e4d191cd712b3" compoundref="main_8c" startline="624" endline="671">mainloop</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="main_8c_1c03c9b38147e4231238c44f4b5fbdff7" prot="public" static="no" mutable="no">
+        <type>int</type>
+        <definition>int Olsr_node_hna_net</definition>
+        <argsstring></argsstring>
+        <name>Olsr_node_hna_net</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/main.c" line="54" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="54" bodyend="-1"/>
+        <referencedby refid="main_8c_1de55269b71a792259ef22763327686b9" compoundref="main_8c" startline="186" endline="390">handle_olsr_node</referencedby>
+        <referencedby refid="main_8c_10ddf1224851353fc92bfbff6f499fa97" compoundref="main_8c" startline="804" endline="867">main</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="main_8c_1b02228665cef19331d409b0d8a831531" prot="public" static="no" mutable="no">
+        <type>int</type>
+        <definition>int Olsr_node_inet_obj</definition>
+        <argsstring></argsstring>
+        <name>Olsr_node_inet_obj</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/main.c" line="54" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="54" bodyend="-1"/>
+        <referencedby refid="main_8c_1de55269b71a792259ef22763327686b9" compoundref="main_8c" startline="186" endline="390">handle_olsr_node</referencedby>
+        <referencedby refid="main_8c_10ddf1224851353fc92bfbff6f499fa97" compoundref="main_8c" startline="804" endline="867">main</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="main_8c_15eba8148fe9257c34665ed364b595fdb" prot="public" static="no" mutable="no">
+        <type>int</type>
+        <definition>int Olsr_node_obj</definition>
+        <argsstring></argsstring>
+        <name>Olsr_node_obj</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/main.c" line="54" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="54" bodyend="-1"/>
+        <referencedby refid="main_8c_1de55269b71a792259ef22763327686b9" compoundref="main_8c" startline="186" endline="390">handle_olsr_node</referencedby>
+        <referencedby refid="main_8c_10ddf1224851353fc92bfbff6f499fa97" compoundref="main_8c" startline="804" endline="867">main</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="main_8c_1c5c5c6846587092d0c23b58b558e680c" prot="public" static="no" mutable="no">
+        <type><ref refid="structolsr__node" kindref="compound">olsr_node</ref> *</type>
+        <definition>struct olsr_node* Olsr_root</definition>
+        <argsstring></argsstring>
+        <name>Olsr_root</name>
+        <initializer> NULL</initializer>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/main.c" line="46" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="46" bodyend="-1"/>
+        <referencedby refid="main_8c_1896df4ffe3f986ad843e4d191cd712b3" compoundref="main_8c" startline="624" endline="671">mainloop</referencedby>
+        <referencedby refid="process_8c_16b4e9b6718b671f6330c2e501c60d3c1" compoundref="process_8c" startline="368" endline="487">process_main</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="main_8c_1cfe4f8990043eade6e82cab3f101b12e" prot="public" static="no" mutable="no">
+        <type>int</type>
+        <definition>int RotateSpeed</definition>
+        <argsstring></argsstring>
+        <name>RotateSpeed</name>
+        <initializer> 2</initializer>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/main.c" line="66" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="66" bodyend="-1"/>
+        <referencedby refid="main_8c_12f5982986645c1e7a202d72bc5e633eb" compoundref="main_8c" startline="690" endline="738">keypress</referencedby>
+        <referencedby refid="main_8c_1896df4ffe3f986ad843e4d191cd712b3" compoundref="main_8c" startline="624" endline="671">mainloop</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="main_8c_14370348160930ca94ac7a5d1a6fc5172" prot="public" static="no" mutable="no">
+        <type>int</type>
+        <definition>int RotateSwitch</definition>
+        <argsstring></argsstring>
+        <name>RotateSwitch</name>
+        <initializer> 0</initializer>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/main.c" line="65" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="65" bodyend="-1"/>
+        <referencedby refid="main_8c_12f5982986645c1e7a202d72bc5e633eb" compoundref="main_8c" startline="690" endline="738">keypress</referencedby>
+        <referencedby refid="main_8c_1896df4ffe3f986ad843e4d191cd712b3" compoundref="main_8c" startline="624" endline="671">mainloop</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="main_8c_1ea8eb9210d53cd6c1b34e6e7f80a243c" prot="public" static="yes" mutable="no">
+        <type>struct timespec</type>
+        <definition>struct timespec sleep_time</definition>
+        <argsstring></argsstring>
+        <name>sleep_time</name>
+        <initializer> { 0, 100 * 1000 * 1000 }</initializer>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/main.c" line="39" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="39" bodyend="-1"/>
+        <referencedby refid="main_8c_1896df4ffe3f986ad843e4d191cd712b3" compoundref="main_8c" startline="624" endline="671">mainloop</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="main_8c_1e113d40abb6f4dd73e4b1253917a1942" prot="public" static="no" mutable="no">
+        <type>int</type>
+        <definition>int ZeroPoint</definition>
+        <argsstring></argsstring>
+        <name>ZeroPoint</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/main.c" line="62" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="62" bodyend="-1"/>
+        <referencedby refid="process_8c_14c780ee64b12fa5531a56edfb5ffcc00" compoundref="process_8c" startline="48" endline="140">add_olsr_con</referencedby>
+        <referencedby refid="main_8c_1de55269b71a792259ef22763327686b9" compoundref="main_8c" startline="186" endline="390">handle_olsr_node</referencedby>
+        <referencedby refid="main_8c_12f5982986645c1e7a202d72bc5e633eb" compoundref="main_8c" startline="690" endline="738">keypress</referencedby>
+        <referencedby refid="main_8c_10ddf1224851353fc92bfbff6f499fa97" compoundref="main_8c" startline="804" endline="867">main</referencedby>
+        <referencedby refid="main_8c_1896df4ffe3f986ad843e4d191cd712b3" compoundref="main_8c" startline="624" endline="671">mainloop</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="main_8c_14942e67624e2b40a2a949f5cc658ccce" prot="public" static="no" mutable="no">
+        <type>float</type>
+        <definition>float ZeroPosition[3]</definition>
+        <argsstring>[3]</argsstring>
+        <name>ZeroPosition</name>
+        <initializer> {0,0,0}</initializer>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/main.c" line="61" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="61" bodyend="-1"/>
+        <referencedby refid="main_8c_12f5982986645c1e7a202d72bc5e633eb" compoundref="main_8c" startline="690" endline="738">keypress</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="main_8c_1ea9e1c287e0c505c2075a0b936dc3404" prot="public" static="no" mutable="no">
+        <type>int</type>
+        <definition>int Zp_rotate</definition>
+        <argsstring></argsstring>
+        <name>Zp_rotate</name>
+        <initializer> 0</initializer>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/main.c" line="63" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="63" bodyend="-1"/>
+        <referencedby refid="main_8c_1896df4ffe3f986ad843e4d191cd712b3" compoundref="main_8c" startline="624" endline="671">mainloop</referencedby>
+      </memberdef>
+      </sectiondef>
+    <briefdescription>
+    </briefdescription>
+    <detaileddescription>
+    </detaileddescription>
+    <programlisting>
+<codeline lineno="1"><highlight class="comment">/*</highlight></codeline>
+<codeline lineno="2"><highlight class="comment"><sp/>*<sp/>main.c</highlight></codeline>
+<codeline lineno="3"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="4"><highlight class="comment"><sp/>*<sp/>Copyright<sp/>(C)<sp/>2004-2006<sp/>Simon<sp/>Wunderlich<sp/>&lt;dotslash at packetmixer.de&gt;</highlight></codeline>
+<codeline lineno="5"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Marek<sp/>Lindner<sp/>&lt;lindner_marek at yahoo.de&gt;</highlight></codeline>
+<codeline lineno="6"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Andreas<sp/>Langer<sp/>&lt;andreas_lbg at gmx.de&gt;</highlight></codeline>
+<codeline lineno="7"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="8"><highlight class="comment"><sp/>*<sp/>This<sp/>file<sp/>is<sp/>part<sp/>of<sp/>olsrs3d,<sp/>an<sp/>olsr<sp/>topology<sp/>visualizer<sp/>for<sp/>s3d.</highlight></codeline>
+<codeline lineno="9"><highlight class="comment"><sp/>*<sp/>See<sp/>http://s3d.berlios.de/<sp/>for<sp/>more<sp/>updates.</highlight></codeline>
+<codeline lineno="10"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="11"><highlight class="comment"><sp/>*<sp/>olsrs3d<sp/>is<sp/>free<sp/>software;<sp/>you<sp/>can<sp/>redistribute<sp/>it<sp/>and/or<sp/>modify</highlight></codeline>
+<codeline lineno="12"><highlight class="comment"><sp/>*<sp/>it<sp/>under<sp/>the<sp/>terms<sp/>of<sp/>the<sp/>GNU<sp/>General<sp/>Public<sp/>License<sp/>as<sp/>published<sp/>by</highlight></codeline>
+<codeline lineno="13"><highlight class="comment"><sp/>*<sp/>the<sp/>Free<sp/>Software<sp/>Foundation;<sp/>either<sp/>version<sp/>2<sp/>of<sp/>the<sp/>License,<sp/>or</highlight></codeline>
+<codeline lineno="14"><highlight class="comment"><sp/>*<sp/>(at<sp/>your<sp/>option)<sp/>any<sp/>later<sp/>version.</highlight></codeline>
+<codeline lineno="15"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="16"><highlight class="comment"><sp/>*<sp/>olsrs3d<sp/>is<sp/>distributed<sp/>in<sp/>the<sp/>hope<sp/>that<sp/>it<sp/>will<sp/>be<sp/>useful,</highlight></codeline>
+<codeline lineno="17"><highlight class="comment"><sp/>*<sp/>but<sp/>WITHOUT<sp/>ANY<sp/>WARRANTY;<sp/>without<sp/>even<sp/>the<sp/>implied<sp/>warranty<sp/>of</highlight></codeline>
+<codeline lineno="18"><highlight class="comment"><sp/>*<sp/>MERCHANTABILITY<sp/>or<sp/>FITNESS<sp/>FOR<sp/>A<sp/>PARTICULAR<sp/>PURPOSE.<sp/><sp/>See<sp/>the</highlight></codeline>
+<codeline lineno="19"><highlight class="comment"><sp/>*<sp/>GNU<sp/>General<sp/>Public<sp/>License<sp/>for<sp/>more<sp/>details.</highlight></codeline>
+<codeline lineno="20"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="21"><highlight class="comment"><sp/>*<sp/>You<sp/>should<sp/>have<sp/>received<sp/>a<sp/>copy<sp/>of<sp/>the<sp/>GNU<sp/>General<sp/>Public<sp/>License</highlight></codeline>
+<codeline lineno="22"><highlight class="comment"><sp/>*<sp/>along<sp/>with<sp/>s3d;<sp/>if<sp/>not,<sp/>write<sp/>to<sp/>the<sp/>Free<sp/>Software</highlight></codeline>
+<codeline lineno="23"><highlight class="comment"><sp/>*<sp/>Foundation,<sp/>Inc.,<sp/>51<sp/>Franklin<sp/>St,<sp/>Fifth<sp/>Floor,<sp/>Boston,<sp/>MA<sp/><sp/>02110-1301<sp/><sp/>USA</highlight></codeline>
+<codeline lineno="24"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="25"><highlight class="normal"></highlight></codeline>
+<codeline lineno="26"><highlight class="normal"></highlight></codeline>
+<codeline lineno="27"><highlight class="normal"></highlight></codeline>
+<codeline lineno="28"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;stdio.h&gt;</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="29"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;s3d.h&gt;</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="30"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;s3d_keysym.h&gt;</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="31"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;time.h&gt;</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>nanosleep()<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="32"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;string.h&gt;</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>strncpy()<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="33"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;math.h&gt;</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>sqrt()<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="34"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;getopt.h&gt;</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>getopt()<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="35"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;stdlib.h&gt;</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>exit()<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="36"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="olsrs3d_8h" kindref="compound">olsrs3d.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="37" refid="main_8c_1ac3553b3932cbfeeac4526ce7ca0336b" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>SPEED<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>10.0</highlight></codeline>
+<codeline lineno="38"><highlight class="preprocessor"></highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="39" refid="main_8c_1ea8eb9210d53cd6c1b34e6e7f80a243c" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal">timespec<sp/><ref refid="main_8c_1ea8eb9210d53cd6c1b34e6e7f80a243c" kindref="member">sleep_time</ref><sp/>=<sp/>{<sp/>0,<sp/>100<sp/>*<sp/>1000<sp/>*<sp/>1000<sp/>};<sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>100<sp/>mili<sp/>seconds<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="40"><highlight class="normal"></highlight></codeline>
+<codeline lineno="41" refid="olsrs3d_8h_1923774364cedbc16baa0bc05e9be136c" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="main_8c_1923774364cedbc16baa0bc05e9be136c" kindref="member">Debug</ref><sp/>=<sp/>0;</highlight></codeline>
+<codeline lineno="42"><highlight class="normal"></highlight></codeline>
+<codeline lineno="43" refid="main_8c_19034a20840ce47fbec531d2b4a4a9f21" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="main_8c_19034a20840ce47fbec531d2b4a4a9f21" kindref="member">Olsr_host</ref>[256];<sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>ip<sp/>or<sp/>hostname<sp/>of<sp/>olsr<sp/>node<sp/>with<sp/>running<sp/>dot_draw<sp/>plugin<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="44"><highlight class="normal"></highlight></codeline>
+<codeline lineno="45" refid="olsrs3d_8h_10643a36891539929d987e2ee83ff81d1" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structolsr__con" kindref="compound">olsr_con</ref><sp/>*<ref refid="main_8c_10643a36891539929d987e2ee83ff81d1" kindref="member">Con_begin</ref><sp/>=<sp/>NULL;<sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>begin<sp/>of<sp/>connection<sp/>list<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="46" refid="olsrs3d_8h_1c5c5c6846587092d0c23b58b558e680c" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structolsr__node" kindref="compound">olsr_node</ref><sp/>*<ref refid="main_8c_1c5c5c6846587092d0c23b58b558e680c" kindref="member">Olsr_root</ref><sp/>=<sp/>NULL;<sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>top<sp/>of<sp/>olsr<sp/>node<sp/>tree<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="47" refid="olsrs3d_8h_19494e9e8cbdc4eceb86cb33ff0006785" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structObj__to__ip" kindref="compound">Obj_to_ip</ref><sp/>*<ref refid="main_8c_19494e9e8cbdc4eceb86cb33ff0006785" kindref="member">Obj_to_ip_head</ref>,<sp/>*<ref refid="main_8c_1236217b97f5fe65457d8b22c73c5073d" kindref="member">Obj_to_ip_end</ref>,<sp/>*<ref refid="main_8c_16a8ff2c3957f5f0ab7dcafcd72b8bd57" kindref="member">List_ptr</ref>;<sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>needed<sp/>pointer<sp/>for<sp/>linked<sp/>list<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="48"><highlight class="normal"></highlight></codeline>
+<codeline lineno="49" refid="olsrs3d_8h_186c048bc4aaab319f4d61f7c0e1f056f" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="main_8c_186c048bc4aaab319f4d61f7c0e1f056f" kindref="member">Olsr_node_count</ref><sp/>=<sp/>0,<sp/><ref refid="main_8c_158acad60c78b63554c696703227d0b7b" kindref="member">Last_olsr_node_count</ref><sp/>=<sp/>-1;</highlight></codeline>
+<codeline lineno="50" refid="olsrs3d_8h_14dfd0657ff868fa02113bcd3335acff1" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="main_8c_14dfd0657ff868fa02113bcd3335acff1" kindref="member">Olsr_node_count_obj</ref><sp/>=<sp/>-1;</highlight></codeline>
+<codeline lineno="51" refid="main_8c_1bc4292eef79532d125b616a9e0ec8fa0" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="main_8c_1bc4292eef79532d125b616a9e0ec8fa0" kindref="member">Olsr_ip_label_obj</ref><sp/>=<sp/>-1;</highlight></codeline>
+<codeline lineno="52" refid="olsrs3d_8h_15bcc20f84efa7bd4aafc56a629f2eff3" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="main_8c_15bcc20f84efa7bd4aafc56a629f2eff3" kindref="member">Net_read_count</ref>;</highlight></codeline>
+<codeline lineno="53"><highlight class="normal"></highlight></codeline>
+<codeline lineno="54" refid="olsrs3d_8h_15eba8148fe9257c34665ed364b595fdb" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="main_8c_15eba8148fe9257c34665ed364b595fdb" kindref="member">Olsr_node_obj</ref>,<sp/><ref refid="main_8c_1b02228665cef19331d409b0d8a831531" kindref="member">Olsr_node_inet_obj</ref>,<sp/><ref refid="main_8c_1c03c9b38147e4231238c44f4b5fbdff7" kindref="member">Olsr_node_hna_net</ref>;</highlight></codeline>
+<codeline lineno="55"><highlight class="normal"></highlight></codeline>
+<codeline lineno="56" refid="main_8c_1fb33da16fedfac392508c8ca439aca5d" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="main_8c_1fb33da16fedfac392508c8ca439aca5d" kindref="member">Asp</ref><sp/>=<sp/>1.0;</highlight></codeline>
+<codeline lineno="57" refid="olsrs3d_8h_1f23a6ad2da4511ef430c4f522ae9f4cc" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="main_8c_1f23a6ad2da4511ef430c4f522ae9f4cc" kindref="member">Bottom</ref><sp/>=<sp/>-1.0;</highlight></codeline>
+<codeline lineno="58" refid="olsrs3d_8h_16f68bad9075598ca8ede1827c6832376" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="main_8c_16f68bad9075598ca8ede1827c6832376" kindref="member">Left</ref><sp/>=<sp/>-1.0;</highlight></codeline>
+<codeline lineno="59"><highlight class="normal"></highlight></codeline>
+<codeline lineno="60" refid="main_8c_15d58294b80563f797d1a14d1d739f52b" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="main_8c_15d58294b80563f797d1a14d1d739f52b" kindref="member">CamPosition</ref>[2][3];<sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>CamPosition[trans|rot][x-z]<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="61" refid="main_8c_14942e67624e2b40a2a949f5cc658ccce" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="main_8c_14942e67624e2b40a2a949f5cc658ccce" kindref="member">ZeroPosition</ref>[3]<sp/>=<sp/>{0,0,0};<sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>current<sp/>position<sp/>zero<sp/>position<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="62" refid="olsrs3d_8h_1e113d40abb6f4dd73e4b1253917a1942" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="main_8c_1e113d40abb6f4dd73e4b1253917a1942" kindref="member">ZeroPoint</ref>;<sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>object<sp/>zeropoint<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="63" refid="main_8c_1ea9e1c287e0c505c2075a0b936dc3404" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="main_8c_1ea9e1c287e0c505c2075a0b936dc3404" kindref="member">Zp_rotate</ref><sp/>=<sp/>0;</highlight></codeline>
+<codeline lineno="64" refid="main_8c_1aaca6648d8e9266d2fbeb21a6a4f4745" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="main_8c_1aaca6648d8e9266d2fbeb21a6a4f4745" kindref="member">ColorSwitch</ref><sp/>=<sp/>0;<sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>enable/disable<sp/>colored<sp/>olsr<sp/>connections<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="65" refid="main_8c_14370348160930ca94ac7a5d1a6fc5172" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="main_8c_14370348160930ca94ac7a5d1a6fc5172" kindref="member">RotateSwitch</ref><sp/>=<sp/>0;</highlight></codeline>
+<codeline lineno="66" refid="main_8c_1cfe4f8990043eade6e82cab3f101b12e" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="main_8c_1cfe4f8990043eade6e82cab3f101b12e" kindref="member">RotateSpeed</ref><sp/>=<sp/>2;</highlight></codeline>
+<codeline lineno="67" refid="main_8c_198d8a7901c60f18d6bf9b35998147831" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="main_8c_198d8a7901c60f18d6bf9b35998147831" kindref="member">Factor</ref><sp/>=<sp/>0.5;<sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Factor<sp/>in<sp/>calc_olsr_node_mov<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="68"><highlight class="normal"></highlight></codeline>
+<codeline lineno="69"><highlight class="normal"></highlight><highlight class="comment">/***</highlight></codeline>
+<codeline lineno="70"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="71"><highlight class="comment"><sp/>*<sp/>print<sp/>usage<sp/>info</highlight></codeline>
+<codeline lineno="72"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="73"><highlight class="comment"><sp/>***/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="74"><highlight class="normal"></highlight></codeline>
+<codeline lineno="75" refid="main_8c_1a1187b70998f73cdb598833d6afaa30a" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="main_8c_1a1187b70998f73cdb598833d6afaa30a" kindref="member">print_usage</ref>(<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="76"><highlight class="normal"></highlight></codeline>
+<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(<sp/></highlight><highlight class="stringliteral">&quot;Usage<sp/>is<sp/>olsrs3d<sp/>[options]<sp/>[--<sp/>[s3d<sp/>options]]\n&quot;</highlight><highlight class="normal"><sp/>);</highlight></codeline>
+<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(<sp/></highlight><highlight class="stringliteral">&quot;olsrs3d<sp/>options:\n&quot;</highlight><highlight class="normal"><sp/>);</highlight></codeline>
+<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(<sp/></highlight><highlight class="stringliteral">&quot;<sp/><sp/><sp/>-h\tprint<sp/>this<sp/>short<sp/>help\n&quot;</highlight><highlight class="normal"><sp/>);</highlight></codeline>
+<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(<sp/></highlight><highlight class="stringliteral">&quot;<sp/><sp/><sp/>-d\tenable<sp/>debug<sp/>mode\n&quot;</highlight><highlight class="normal"><sp/>);</highlight></codeline>
+<codeline lineno="81"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(<sp/></highlight><highlight class="stringliteral">&quot;<sp/><sp/><sp/>-H\tconnect<sp/>to<sp/>olsr<sp/>node<sp/>[default:<sp/>localhost]\n&quot;</highlight><highlight class="normal"><sp/>);</highlight></codeline>
+<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_usage();</highlight></codeline>
+<codeline lineno="83"><highlight class="normal"></highlight></codeline>
+<codeline lineno="84"><highlight class="normal">}</highlight></codeline>
+<codeline lineno="85"><highlight class="normal"></highlight></codeline>
+<codeline lineno="86"><highlight class="normal"></highlight></codeline>
+<codeline lineno="87"><highlight class="normal"></highlight></codeline>
+<codeline lineno="88"><highlight class="normal"></highlight><highlight class="comment">/***</highlight></codeline>
+<codeline lineno="89"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="90"><highlight class="comment"><sp/>*<sp/>print<sp/>error<sp/>and<sp/>exit</highlight></codeline>
+<codeline lineno="91"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="92"><highlight class="comment"><sp/>***/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="93"><highlight class="normal"></highlight></codeline>
+<codeline lineno="94" refid="olsrs3d_8h_1be0835e7acb76ea987ac80769302d90a" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="main_8c_1be0835e7acb76ea987ac80769302d90a" kindref="member">out_of_mem</ref>(<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="95"><highlight class="normal"></highlight></codeline>
+<codeline lineno="96"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(<sp/></highlight><highlight class="stringliteral">&quot;Sorry<sp/>-<sp/>you<sp/>ran<sp/>out<sp/>of<sp/>memory<sp/>!\n&quot;</highlight><highlight class="normal"><sp/>);</highlight></codeline>
+<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>exit(8);</highlight></codeline>
+<codeline lineno="98"><highlight class="normal"></highlight></codeline>
+<codeline lineno="99"><highlight class="normal">}</highlight></codeline>
+<codeline lineno="100"><highlight class="normal"></highlight></codeline>
+<codeline lineno="101"><highlight class="normal"></highlight></codeline>
+<codeline lineno="102"><highlight class="normal"></highlight></codeline>
+<codeline lineno="103"><highlight class="normal"></highlight><highlight class="comment">/***</highlight></codeline>
+<codeline lineno="104"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="105"><highlight class="comment"><sp/>*<sp/>calculate<sp/>distance<sp/>between<sp/>2<sp/>vectors<sp/>=&gt;<sp/>http://en.wikipedia.org/wiki/Euclidean_distance</highlight></codeline>
+<codeline lineno="106"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="107"><highlight class="comment"><sp/>*<sp/><sp/><sp/>p1<sp/><sp/><sp/>=&gt;<sp/><sp/><sp/>vector<sp/>of<sp/>node<sp/>1</highlight></codeline>
+<codeline lineno="108"><highlight class="comment"><sp/>*<sp/><sp/><sp/>p2<sp/><sp/><sp/>=&gt;<sp/><sp/><sp/>vector<sp/>of<sp/>node<sp/>2</highlight></codeline>
+<codeline lineno="109"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="110"><highlight class="comment"><sp/>*<sp/><sp/><sp/>return<sp/>distance</highlight></codeline>
+<codeline lineno="111"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="112"><highlight class="comment"><sp/>***/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="113"><highlight class="normal"></highlight></codeline>
+<codeline lineno="114" refid="main_8c_1da3bfd6c7ec35068dbcdf966a4628f5e" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="main_8c_1da3bfd6c7ec35068dbcdf966a4628f5e" kindref="member">dist</ref>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>p1[],<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>p2[])</highlight></codeline>
+<codeline lineno="115"><highlight class="normal">{</highlight></codeline>
+<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>p[3];</highlight></codeline>
+<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>p[0]=p1[0]-p2[0];</highlight></codeline>
+<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>p[1]=p1[1]-p2[1];</highlight></codeline>
+<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>p[2]=p1[2]-p2[2];</highlight></codeline>
+<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(sqrt(p[0]*p[0]<sp/><sp/><sp/>+<sp/><sp/>p[1]*p[1]<sp/><sp/>+<sp/><sp/>p[2]*p[2]));</highlight></codeline>
+<codeline lineno="121"><highlight class="normal"></highlight></codeline>
+<codeline lineno="122"><highlight class="normal">}</highlight></codeline>
+<codeline lineno="123"><highlight class="normal"></highlight></codeline>
+<codeline lineno="124"><highlight class="normal"></highlight></codeline>
+<codeline lineno="125"><highlight class="normal"></highlight></codeline>
+<codeline lineno="126"><highlight class="normal"></highlight><highlight class="comment">/***</highlight></codeline>
+<codeline lineno="127"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="128"><highlight class="comment"><sp/>*<sp/>calculate<sp/>distance<sp/>between<sp/>2<sp/>vectors<sp/>and<sp/>substract<sp/>vector1<sp/>from<sp/>vector2</highlight></codeline>
+<codeline lineno="129"><highlight class="comment"><sp/>*<sp/><sp/>=&gt;<sp/>http://en.wikipedia.org/wiki/Vector_%28spatial%29#Vector_addition_and_subtraction</highlight></codeline>
+<codeline lineno="130"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="131"><highlight class="comment"><sp/>*<sp/><sp/><sp/>p1<sp/><sp/><sp/>=&gt;<sp/><sp/><sp/>vector<sp/>of<sp/>node<sp/>1</highlight></codeline>
+<codeline lineno="132"><highlight class="comment"><sp/>*<sp/><sp/><sp/>p2<sp/><sp/><sp/>=&gt;<sp/><sp/><sp/>vector<sp/>of<sp/>node<sp/>2</highlight></codeline>
+<codeline lineno="133"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="134"><highlight class="comment"><sp/>*<sp/><sp/><sp/>return<sp/>distance</highlight></codeline>
+<codeline lineno="135"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="136"><highlight class="comment"><sp/>***/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="137"><highlight class="normal"></highlight></codeline>
+<codeline lineno="138" refid="main_8c_1753e5e5d6fbcbd893bb466ce045a3316" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="main_8c_1753e5e5d6fbcbd893bb466ce045a3316" kindref="member">dirt</ref>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>p1[],<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>p2[],<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>p3[])</highlight></codeline>
+<codeline lineno="139"><highlight class="normal">{</highlight></codeline>
+<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>d;</highlight></codeline>
+<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>d=<ref refid="main_8c_1da3bfd6c7ec35068dbcdf966a4628f5e" kindref="member">dist</ref>(p1,p2);</highlight></codeline>
+<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(d!=0.0)</highlight></codeline>
+<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
+<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>p3[0]=p2[0]-p1[0];</highlight></codeline>
+<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>p3[1]=p2[1]-p1[1];</highlight></codeline>
+<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>p3[2]=p2[2]-p1[2];</highlight></codeline>
+<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
+<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>p3[0]=p2[0]=p1[0]=0.0;</highlight></codeline>
+<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">(d);</highlight></codeline>
+<codeline lineno="151"><highlight class="normal">}</highlight></codeline>
+<codeline lineno="152"><highlight class="normal"></highlight></codeline>
+<codeline lineno="153"><highlight class="normal"></highlight></codeline>
+<codeline lineno="154"><highlight class="normal"></highlight></codeline>
+<codeline lineno="155"><highlight class="normal"></highlight><highlight class="comment">/***</highlight></codeline>
+<codeline lineno="156"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="157"><highlight class="comment"><sp/>*<sp/>calculate<sp/>new<sp/>movement<sp/>of<sp/>node<sp/>by<sp/>adding<sp/>the<sp/>product<sp/>of<sp/>the<sp/>factor<sp/>and<sp/>the<sp/>vector<sp/>to<sp/>the<sp/>movement<sp/>vector</highlight></codeline>
+<codeline lineno="158"><highlight class="comment"><sp/>*<sp/><sp/>=&gt;<sp/>http://en.wikipedia.org/wiki/Vector_%28spatial%29#Scalar_multiplication</highlight></codeline>
+<codeline lineno="159"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="160"><highlight class="comment"><sp/>*<sp/><sp/><sp/>mov<sp/><sp/>=&gt;<sp/><sp/><sp/>current<sp/>mov<sp/>vector</highlight></codeline>
+<codeline lineno="161"><highlight class="comment"><sp/>*<sp/><sp/><sp/>p<sp/><sp/><sp/><sp/>=&gt;<sp/><sp/><sp/>vector<sp/>of<sp/>node</highlight></codeline>
+<codeline lineno="162"><highlight class="comment"><sp/>*<sp/><sp/><sp/>fac<sp/><sp/>=&gt;<sp/><sp/><sp/>factor<sp/>which<sp/>is</highlight></codeline>
+<codeline lineno="163"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="164"><highlight class="comment"><sp/>***/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="165"><highlight class="normal"></highlight></codeline>
+<codeline lineno="166" refid="main_8c_1f4369a866dcd049e2642e137507e8ff1" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="main_8c_1f4369a866dcd049e2642e137507e8ff1" kindref="member">mov_add</ref>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>mov[],<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>p[],<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>fac)</highlight></codeline>
+<codeline lineno="167"><highlight class="normal">{</highlight></codeline>
+<codeline lineno="168"><highlight class="normal"></highlight><highlight class="comment">/*<sp/><sp/><sp/><sp/><sp/><sp/>if<sp/>(fac&gt;1000)</highlight></codeline>
+<codeline lineno="169"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>return;</highlight></codeline>
+<codeline lineno="170"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fac=1000;<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>mov[0]+=fac*p[0];</highlight></codeline>
+<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>mov[1]+=fac*p[1];</highlight></codeline>
+<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>mov[2]+=fac*p[2];</highlight></codeline>
+<codeline lineno="174"><highlight class="normal">}</highlight></codeline>
+<codeline lineno="175"><highlight class="normal"></highlight></codeline>
+<codeline lineno="176"><highlight class="normal"></highlight></codeline>
+<codeline lineno="177"><highlight class="normal"></highlight></codeline>
+<codeline lineno="178"><highlight class="normal"></highlight><highlight class="comment">/***</highlight></codeline>
+<codeline lineno="179"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="180"><highlight class="comment"><sp/>*<sp/>check<sp/>whether<sp/>is<sp/>a<sp/>new<sp/>/<sp/>modified<sp/>/<sp/>vanished<sp/>node<sp/>and<sp/>handle<sp/>it<sp/>accordingly</highlight></codeline>
+<codeline lineno="181"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="182"><highlight class="comment"><sp/>*<sp/><sp/><sp/>*olsr_node<sp/>=&gt;<sp/><sp/><sp/>pointer<sp/>to<sp/>current<sp/>olsr_node</highlight></codeline>
+<codeline lineno="183"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="184"><highlight class="comment"><sp/>***/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="185"><highlight class="normal"></highlight></codeline>
+<codeline lineno="186" refid="main_8c_1de55269b71a792259ef22763327686b9" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="main_8c_1de55269b71a792259ef22763327686b9" kindref="member">handle_olsr_node</ref>(<sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/><ref refid="structolsr__node" kindref="compound">olsr_node</ref><sp/>*<ref refid="structolsr__node" kindref="compound">olsr_node</ref><sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="187"><highlight class="normal"></highlight></codeline>
+<codeline lineno="188"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>distance,<sp/>angle,<sp/>angle_rad;</highlight></codeline>
+<codeline lineno="189"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>tmp_mov_vec[3],<sp/>desc_norm_vec[3]<sp/>=<sp/>{0,0,-1};</highlight></codeline>
+<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal">olsr_node<sp/>*other_node;</highlight></codeline>
+<codeline lineno="191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structObj__to__ip" kindref="compound">Obj_to_ip</ref><sp/>*Obj_to_ip_curr;</highlight></codeline>
+<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structolsr__neigh__list" kindref="compound">olsr_neigh_list</ref><sp/>*<ref refid="structolsr__neigh__list" kindref="compound">olsr_neigh_list</ref>,<sp/>*prev_olsr_neigh_list,<sp/>*other_node_neigh_list,<sp/>*tmp_olsr_neigh_list;</highlight></codeline>
+<codeline lineno="193"><highlight class="normal"></highlight></codeline>
+<codeline lineno="194"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>no<sp/>more<sp/>nodes<sp/>left<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>olsr_node<sp/>==<sp/>NULL<sp/>)<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
+<codeline lineno="196"><highlight class="normal"></highlight></codeline>
+<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>olsr<sp/>node<sp/>vanished<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>olsr_node-&gt;<ref refid="structolsr__node_11d492aa6f4e75cc100d7a3e2f059d615" kindref="member">last_seen</ref><sp/>&gt;<sp/>0<sp/>)<sp/>olsr_node-&gt;<ref refid="structolsr__node_11d492aa6f4e75cc100d7a3e2f059d615" kindref="member">last_seen</ref>--;</highlight></codeline>
+<codeline lineno="199"><highlight class="normal"></highlight></codeline>
+<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>olsr_node-&gt;<ref refid="structolsr__node_11d492aa6f4e75cc100d7a3e2f059d615" kindref="member">last_seen</ref><sp/>==<sp/>0<sp/>&amp;&amp;<sp/>olsr_node-&gt;<ref refid="structolsr__node_1f19d37e4aa5263be9a1741de24686664" kindref="member">visible</ref><sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="201"><highlight class="normal"></highlight></codeline>
+<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/><ref refid="main_8c_1923774364cedbc16baa0bc05e9be136c" kindref="member">Debug</ref><sp/>)<sp/>printf(<sp/></highlight><highlight class="stringliteral">&quot;olsr<sp/>node<sp/>vanished:<sp/>%s\n&quot;</highlight><highlight class="normal">,<sp/>olsr_node-&gt;<ref refid="structolsr__node_159690d75faff5c149faecacb4f4d2a57" kindref="member">ip</ref><sp/>);</highlight></codeline>
+<codeline lineno="203"><highlight class="normal"></highlight></codeline>
+<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_186c048bc4aaab319f4d61f7c0e1f056f" kindref="member">Olsr_node_count</ref>--;</highlight></codeline>
+<codeline lineno="205"><highlight class="normal"></highlight></codeline>
+<codeline lineno="206"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>olsr_node-&gt;<ref refid="structolsr__node_1f19d37e4aa5263be9a1741de24686664" kindref="member">visible</ref><sp/>=<sp/>0;</highlight></codeline>
+<codeline lineno="207"><highlight class="normal"></highlight></codeline>
+<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>delete<sp/>shape<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>olsr_node-&gt;<ref refid="structolsr__node_115be0912065801026e7b4411af561788" kindref="member">obj_id</ref><sp/>!=<sp/>-1<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="210"><highlight class="normal"></highlight></codeline>
+<codeline lineno="211"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>remove<sp/>element<sp/>from<sp/>ob2ip<sp/>list<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="212"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="olsrs3d_8h_1febf2594bdfe9ec411d0c04c9cd951b3" kindref="member">lst_del</ref>(<sp/>olsr_node-&gt;<ref refid="structolsr__node_115be0912065801026e7b4411af561788" kindref="member">obj_id</ref><sp/>);</highlight></codeline>
+<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>remove<sp/>object<sp/>from<sp/>s3d<sp/>server<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="214"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_del_object(<sp/>olsr_node-&gt;<ref refid="structolsr__node_115be0912065801026e7b4411af561788" kindref="member">obj_id</ref><sp/>);</highlight></codeline>
+<codeline lineno="215"><highlight class="normal"></highlight></codeline>
+<codeline lineno="216"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>olsr_node-&gt;<ref refid="structolsr__node_115be0912065801026e7b4411af561788" kindref="member">obj_id</ref><sp/>=<sp/>-1;</highlight></codeline>
+<codeline lineno="217"><highlight class="normal"></highlight></codeline>
+<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="219"><highlight class="normal"></highlight></codeline>
+<codeline lineno="220"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>olsr_node-&gt;<ref refid="structolsr__node_1f2e3f729be82b64001867038bbe8012a" kindref="member">desc_id</ref><sp/>!=<sp/>-1<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="221"><highlight class="normal"></highlight></codeline>
+<codeline lineno="222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_del_object(<sp/>olsr_node-&gt;<ref refid="structolsr__node_1f2e3f729be82b64001867038bbe8012a" kindref="member">desc_id</ref><sp/>);</highlight></codeline>
+<codeline lineno="223"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>olsr_node-&gt;<ref refid="structolsr__node_1f2e3f729be82b64001867038bbe8012a" kindref="member">desc_id</ref><sp/>=<sp/>-1;</highlight></codeline>
+<codeline lineno="224"><highlight class="normal"></highlight></codeline>
+<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="226"><highlight class="normal"></highlight></codeline>
+<codeline lineno="227"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>delete<sp/>olsr<sp/>connections<sp/>of<sp/>this<sp/>node<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="228"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>olsr_neigh_list<sp/>=<sp/>olsr_node-&gt;<ref refid="structolsr__node_13b80ce78a06be6aba5a1f93887442764" kindref="member">olsr_neigh_list</ref>;</highlight></codeline>
+<codeline lineno="229"><highlight class="normal"></highlight></codeline>
+<codeline lineno="230"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(<sp/>olsr_neigh_list<sp/>!=<sp/>NULL<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="231"><highlight class="normal"></highlight></codeline>
+<codeline lineno="232"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>get<sp/>connection<sp/>list<sp/>of<sp/>&apos;other&apos;<sp/>node<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="233"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>olsr_neigh_list-&gt;<ref refid="structolsr__neigh__list_183a291941fbb40293f8e2e5c6b4d11b6" kindref="member">olsr_con</ref>-&gt;<ref refid="structolsr__con_1578882f9337bb0bdad9444e85d56a088" kindref="member">left_olsr_node</ref><sp/>==<sp/>olsr_node<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="234"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>other_node<sp/>=<sp/>olsr_neigh_list-&gt;<ref refid="structolsr__neigh__list_183a291941fbb40293f8e2e5c6b4d11b6" kindref="member">olsr_con</ref>-&gt;<ref refid="structolsr__con_1f49aca51c70a95deddf8bb715d63af31" kindref="member">right_olsr_node</ref>;</highlight></codeline>
+<codeline lineno="235"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
+<codeline lineno="236"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>other_node<sp/>=<sp/>olsr_neigh_list-&gt;<ref refid="structolsr__neigh__list_183a291941fbb40293f8e2e5c6b4d11b6" kindref="member">olsr_con</ref>-&gt;<ref refid="structolsr__con_1578882f9337bb0bdad9444e85d56a088" kindref="member">left_olsr_node</ref>;</highlight></codeline>
+<codeline lineno="237"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="238"><highlight class="normal"></highlight></codeline>
+<codeline lineno="239"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>find<sp/>this<sp/>connection<sp/>in<sp/>&apos;other&apos;<sp/>nodes<sp/>connection<sp/>list<sp/>...<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="240"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>prev_olsr_neigh_list<sp/>=<sp/>NULL;</highlight></codeline>
+<codeline lineno="241"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>other_node_neigh_list<sp/>=<sp/>other_node-&gt;<ref refid="structolsr__node_13b80ce78a06be6aba5a1f93887442764" kindref="member">olsr_neigh_list</ref>;</highlight></codeline>
+<codeline lineno="242"><highlight class="normal"></highlight></codeline>
+<codeline lineno="243"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(<sp/>other_node_neigh_list<sp/>!=<sp/>NULL<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="244"><highlight class="normal"></highlight></codeline>
+<codeline lineno="245"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>other_node_neigh_list-&gt;<ref refid="structolsr__neigh__list_183a291941fbb40293f8e2e5c6b4d11b6" kindref="member">olsr_con</ref><sp/>==<sp/>olsr_neigh_list-&gt;<ref refid="structolsr__neigh__list_183a291941fbb40293f8e2e5c6b4d11b6" kindref="member">olsr_con</ref><sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="246"><highlight class="normal"></highlight></codeline>
+<codeline lineno="247"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>and<sp/>delete<sp/>it<sp/>!<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>prev_olsr_neigh_list<sp/>!=<sp/>NULL<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>is<sp/>first,<sp/>any<sp/>or<sp/>last<sp/>element<sp/>in<sp/>the<sp/>list<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="250"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>prev_olsr_neigh_list-&gt;<ref refid="structolsr__neigh__list_1f1d533fde49e1ed2ea5299661f5c10c6" kindref="member">next_olsr_neigh_list</ref><sp/>=<sp/>other_node_neigh_list-&gt;<ref refid="structolsr__neigh__list_1f1d533fde49e1ed2ea5299661f5c10c6" kindref="member">next_olsr_neigh_list</ref>;</highlight></codeline>
+<codeline lineno="251"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
+<codeline lineno="252"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>the<sp/>only<sp/>element<sp/>in<sp/>the<sp/>list<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="253"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>other_node-&gt;<ref refid="structolsr__node_13b80ce78a06be6aba5a1f93887442764" kindref="member">olsr_neigh_list</ref><sp/>=<sp/>NULL;</highlight></codeline>
+<codeline lineno="254"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="255"><highlight class="normal"></highlight></codeline>
+<codeline lineno="256"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>free(<sp/>other_node_neigh_list<sp/>);</highlight></codeline>
+<codeline lineno="257"><highlight class="normal"></highlight></codeline>
+<codeline lineno="258"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
+<codeline lineno="259"><highlight class="normal"></highlight></codeline>
+<codeline lineno="260"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="261"><highlight class="normal"></highlight></codeline>
+<codeline lineno="262"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>prev_olsr_neigh_list<sp/>=<sp/>other_node_neigh_list;</highlight></codeline>
+<codeline lineno="263"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>other_node_neigh_list<sp/>=<sp/>other_node_neigh_list-&gt;<ref refid="structolsr__neigh__list_1f1d533fde49e1ed2ea5299661f5c10c6" kindref="member">next_olsr_neigh_list</ref>;</highlight></codeline>
+<codeline lineno="264"><highlight class="normal"></highlight></codeline>
+<codeline lineno="265"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="266"><highlight class="normal"></highlight></codeline>
+<codeline lineno="267"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_del_object(<sp/>olsr_neigh_list-&gt;<ref refid="structolsr__neigh__list_183a291941fbb40293f8e2e5c6b4d11b6" kindref="member">olsr_con</ref>-&gt;<ref refid="structolsr__con_1fe985b6b83425cb17e801ac00001175e" kindref="member">obj_id</ref><sp/>);</highlight></codeline>
+<codeline lineno="268"><highlight class="normal"></highlight></codeline>
+<codeline lineno="269"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>delete<sp/>connection<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="270"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>olsr_neigh_list-&gt;<ref refid="structolsr__neigh__list_183a291941fbb40293f8e2e5c6b4d11b6" kindref="member">olsr_con</ref>-&gt;<ref refid="structolsr__con_10382eebfbf31d5f217572d4907c503cb" kindref="member">prev_olsr_con</ref><sp/>!=<sp/>NULL<sp/>)<sp/>olsr_neigh_list-&gt;<ref refid="structolsr__neigh__list_183a291941fbb40293f8e2e5c6b4d11b6" kindref="member">olsr_con</ref>-&gt;<ref refid="structolsr__con_10382eebfbf31d5f217572d4907c503cb" kindref="member">prev_olsr_con</ref>-&gt;<ref refid="structolsr__con_1369dfd6eec077d0a6228cd1387135e6e" kindref="member">next_olsr_con</ref><sp/>=<sp/>olsr_neigh_list-&gt;<ref refid="structolsr__neigh__list_183a291941fbb40293f8e2e5c6b4d11b6" kindref="member">olsr_con</ref>-&gt;<ref!
  refid="structolsr__con_1369dfd6eec077d0a6228cd1387135e6e" kindref="member">next_olsr_con</ref>;</highlight></codeline>
+<codeline lineno="271"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>olsr_neigh_list-&gt;<ref refid="structolsr__neigh__list_183a291941fbb40293f8e2e5c6b4d11b6" kindref="member">olsr_con</ref>-&gt;<ref refid="structolsr__con_1369dfd6eec077d0a6228cd1387135e6e" kindref="member">next_olsr_con</ref><sp/>!=<sp/>NULL<sp/>)<sp/>olsr_neigh_list-&gt;<ref refid="structolsr__neigh__list_183a291941fbb40293f8e2e5c6b4d11b6" kindref="member">olsr_con</ref>-&gt;<ref refid="structolsr__con_1369dfd6eec077d0a6228cd1387135e6e" kindref="member">next_olsr_con</ref>-&gt;<ref refid="structolsr__con_10382eebfbf31d5f217572d4907c503cb" kindref="member">prev_olsr_con</ref><sp/>=<sp/>olsr_neigh_list-&gt;<ref refid="structolsr__neigh__list_183a291941fbb40293f8e2e5c6b4d11b6" kindref="member">olsr_con</ref>-&gt;<ref!
  refid="structolsr__con_10382eebfbf31d5f217572d4907c503cb" kindref="member">prev_olsr_con</ref>;</highlight></codeline>
+<codeline lineno="272"><highlight class="normal"></highlight></codeline>
+<codeline lineno="273"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp_olsr_neigh_list<sp/>=<sp/>olsr_neigh_list;</highlight></codeline>
+<codeline lineno="274"><highlight class="normal"></highlight></codeline>
+<codeline lineno="275"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>olsr_neigh_list<sp/>=<sp/>olsr_neigh_list-&gt;<ref refid="structolsr__neigh__list_1f1d533fde49e1ed2ea5299661f5c10c6" kindref="member">next_olsr_neigh_list</ref>;</highlight></codeline>
+<codeline lineno="276"><highlight class="normal"></highlight></codeline>
+<codeline lineno="277"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>free(<sp/>tmp_olsr_neigh_list-&gt;<ref refid="structolsr__neigh__list_183a291941fbb40293f8e2e5c6b4d11b6" kindref="member">olsr_con</ref><sp/>);</highlight></codeline>
+<codeline lineno="278"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>free(<sp/>tmp_olsr_neigh_list<sp/>);</highlight></codeline>
+<codeline lineno="279"><highlight class="normal"></highlight></codeline>
+<codeline lineno="280"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="281"><highlight class="normal"></highlight></codeline>
+<codeline lineno="282"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>olsr_node-&gt;<ref refid="structolsr__node_13b80ce78a06be6aba5a1f93887442764" kindref="member">olsr_neigh_list</ref><sp/>=<sp/>NULL;</highlight></codeline>
+<codeline lineno="283"><highlight class="normal"></highlight></codeline>
+<codeline lineno="284"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>olsr_node-&gt;<ref refid="structolsr__node_1f19d37e4aa5263be9a1741de24686664" kindref="member">visible</ref><sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="285"><highlight class="normal"></highlight></codeline>
+<codeline lineno="286"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>olsr<sp/>node<sp/>shape<sp/>has<sp/>been<sp/>modified<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="287"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>olsr_node-&gt;<ref refid="structolsr__node_14517a87e4fdbdb58f678743b5684088b" kindref="member">node_type_modified</ref><sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="288"><highlight class="normal"></highlight></codeline>
+<codeline lineno="289"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>delete<sp/>old<sp/>shape<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="290"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>olsr_node-&gt;<ref refid="structolsr__node_115be0912065801026e7b4411af561788" kindref="member">obj_id</ref><sp/>!=<sp/>-1<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="291"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>remove<sp/>element<sp/>from<sp/>ob2ip<sp/>list<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="292"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="olsrs3d_8h_1febf2594bdfe9ec411d0c04c9cd951b3" kindref="member">lst_del</ref>(<sp/>olsr_node-&gt;<ref refid="structolsr__node_115be0912065801026e7b4411af561788" kindref="member">obj_id</ref><sp/>);</highlight></codeline>
+<codeline lineno="293"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_del_object(<sp/>olsr_node-&gt;<ref refid="structolsr__node_115be0912065801026e7b4411af561788" kindref="member">obj_id</ref><sp/>);</highlight></codeline>
+<codeline lineno="294"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="295"><highlight class="normal"></highlight></codeline>
+<codeline lineno="296"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>olsr_node-&gt;<ref refid="structolsr__node_1f2e3f729be82b64001867038bbe8012a" kindref="member">desc_id</ref><sp/>!=<sp/>-1<sp/>)<sp/>s3d_del_object(<sp/>olsr_node-&gt;<ref refid="structolsr__node_1f2e3f729be82b64001867038bbe8012a" kindref="member">desc_id</ref><sp/>);</highlight></codeline>
+<codeline lineno="297"><highlight class="normal"></highlight></codeline>
+<codeline lineno="298"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>create<sp/>new<sp/>shape<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="299"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>olsr_node-&gt;<ref refid="structolsr__node_1c89186513811183436bcd79cdb6d7b4d" kindref="member">node_type</ref><sp/>==<sp/>1<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="300"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>olsr<sp/>node<sp/>offers<sp/>internet<sp/>access<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="301"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>olsr_node-&gt;<ref refid="structolsr__node_115be0912065801026e7b4411af561788" kindref="member">obj_id</ref><sp/>=<sp/>s3d_clone(<sp/><ref refid="main_8c_1b02228665cef19331d409b0d8a831531" kindref="member">Olsr_node_inet_obj</ref><sp/>);</highlight></codeline>
+<codeline lineno="302"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>olsr_node-&gt;<ref refid="structolsr__node_1c89186513811183436bcd79cdb6d7b4d" kindref="member">node_type</ref><sp/>==<sp/>2<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="303"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>via<sp/>hna<sp/>announced<sp/>network<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="304"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>olsr_node-&gt;<ref refid="structolsr__node_115be0912065801026e7b4411af561788" kindref="member">obj_id</ref><sp/>=<sp/>s3d_clone(<sp/><ref refid="main_8c_1c03c9b38147e4231238c44f4b5fbdff7" kindref="member">Olsr_node_hna_net</ref><sp/>);</highlight></codeline>
+<codeline lineno="305"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
+<codeline lineno="306"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>normal<sp/>olsr<sp/>node<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="307"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>olsr_node-&gt;<ref refid="structolsr__node_115be0912065801026e7b4411af561788" kindref="member">obj_id</ref><sp/>=<sp/>s3d_clone(<sp/><ref refid="main_8c_15eba8148fe9257c34665ed364b595fdb" kindref="member">Olsr_node_obj</ref><sp/>);</highlight></codeline>
+<codeline lineno="308"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="309"><highlight class="normal"></highlight></codeline>
+<codeline lineno="310"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_flags_on(<sp/>olsr_node-&gt;<ref refid="structolsr__node_115be0912065801026e7b4411af561788" kindref="member">obj_id</ref>,<sp/>S3D_OF_VISIBLE|S3D_OF_SELECTABLE);</highlight></codeline>
+<codeline lineno="311"><highlight class="normal"></highlight></codeline>
+<codeline lineno="312"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>link<sp/>newly<sp/>created<sp/>object<sp/>to<sp/>ZeroPoint<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="313"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_link(<sp/>olsr_node-&gt;<ref refid="structolsr__node_115be0912065801026e7b4411af561788" kindref="member">obj_id</ref>,<sp/><ref refid="main_8c_1e113d40abb6f4dd73e4b1253917a1942" kindref="member">ZeroPoint</ref><sp/>);</highlight></codeline>
+<codeline lineno="314"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>add<sp/>object_id<sp/>and<sp/>olsr_node<sp/>to<sp/>linked<sp/>list<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="315"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="olsrs3d_8h_1d01a29bcb2e2daed6fcc6516c328f141" kindref="member">lst_add</ref>(olsr_node-&gt;<ref refid="structolsr__node_115be0912065801026e7b4411af561788" kindref="member">obj_id</ref>,&amp;olsr_node);</highlight></codeline>
+<codeline lineno="316"><highlight class="normal"></highlight></codeline>
+<codeline lineno="317"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>create<sp/>olsr<sp/>node<sp/>text<sp/>and<sp/>attach<sp/>(link)<sp/>it<sp/>to<sp/>the<sp/>node<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="318"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>olsr_node-&gt;<ref refid="structolsr__node_1f2e3f729be82b64001867038bbe8012a" kindref="member">desc_id</ref><sp/>=<sp/>s3d_draw_string(<sp/>olsr_node-&gt;<ref refid="structolsr__node_159690d75faff5c149faecacb4f4d2a57" kindref="member">ip</ref>,<sp/>&amp;olsr_node-&gt;<ref refid="structolsr__node_1c2a66c5312cf64fec10f6b8903dbd966" kindref="member">desc_length</ref><sp/>);</highlight></codeline>
+<codeline lineno="319"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_link(<sp/>olsr_node-&gt;<ref refid="structolsr__node_1f2e3f729be82b64001867038bbe8012a" kindref="member">desc_id</ref>,<sp/>olsr_node-&gt;<ref refid="structolsr__node_115be0912065801026e7b4411af561788" kindref="member">obj_id</ref><sp/>);</highlight></codeline>
+<codeline lineno="320"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_translate(<sp/>olsr_node-&gt;<ref refid="structolsr__node_1f2e3f729be82b64001867038bbe8012a" kindref="member">desc_id</ref>,<sp/>-<sp/>olsr_node-&gt;<ref refid="structolsr__node_1c2a66c5312cf64fec10f6b8903dbd966" kindref="member">desc_length</ref><sp/>/<sp/>2,<sp/>-2,<sp/>0<sp/>);</highlight></codeline>
+<codeline lineno="321"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_flags_on(<sp/>olsr_node-&gt;<ref refid="structolsr__node_1f2e3f729be82b64001867038bbe8012a" kindref="member">desc_id</ref>,<sp/>S3D_OF_VISIBLE<sp/>);</highlight></codeline>
+<codeline lineno="322"><highlight class="normal"></highlight></codeline>
+<codeline lineno="323"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>olsr_node-&gt;<ref refid="structolsr__node_14517a87e4fdbdb58f678743b5684088b" kindref="member">node_type_modified</ref><sp/>=<sp/>0;</highlight></codeline>
+<codeline lineno="324"><highlight class="normal"></highlight></codeline>
+<codeline lineno="325"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="326"><highlight class="normal"></highlight></codeline>
+<codeline lineno="327"><highlight class="normal"></highlight></codeline>
+<codeline lineno="328"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>rotate<sp/>node<sp/>description<sp/>so<sp/>that<sp/>they<sp/>are<sp/>always<sp/>readable<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="329"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp_mov_vec[0]<sp/>=<sp/><ref refid="main_8c_15d58294b80563f797d1a14d1d739f52b" kindref="member">CamPosition</ref>[0][0]<sp/>-<sp/>olsr_node-&gt;<ref refid="structolsr__node_191977704430de9534f7a118d1dfbeb54" kindref="member">pos_vec</ref>[0];</highlight></codeline>
+<codeline lineno="330"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp_mov_vec[1]<sp/>=<sp/>0;<sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>we<sp/>are<sp/>not<sp/>interested<sp/>in<sp/>the<sp/>y<sp/>value<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="331"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp_mov_vec[2]<sp/>=<sp/><ref refid="main_8c_15d58294b80563f797d1a14d1d739f52b" kindref="member">CamPosition</ref>[0][2]<sp/>-<sp/>olsr_node-&gt;<ref refid="structolsr__node_191977704430de9534f7a118d1dfbeb54" kindref="member">pos_vec</ref>[2];</highlight></codeline>
+<codeline lineno="332"><highlight class="normal"></highlight></codeline>
+<codeline lineno="333"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>angle<sp/>=<sp/>s3d_vector_angle(<sp/>desc_norm_vec,<sp/>tmp_mov_vec<sp/>);</highlight></codeline>
+<codeline lineno="334"><highlight class="normal"></highlight></codeline>
+<codeline lineno="335"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>take<sp/>care<sp/>of<sp/>inverse<sp/>cosinus<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="336"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>tmp_mov_vec[0]<sp/>&gt;<sp/>0<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="337"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>angle_rad<sp/>=<sp/>90.0/M_PI<sp/>-<sp/>angle;</highlight></codeline>
+<codeline lineno="338"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>angle<sp/>=<sp/>180<sp/>-<sp/>(<sp/>180.0/M_PI<sp/>*<sp/>angle<sp/>);</highlight></codeline>
+<codeline lineno="339"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
+<codeline lineno="340"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>angle_rad<sp/>=<sp/>90.0/M_PI<sp/>+<sp/>angle;</highlight></codeline>
+<codeline lineno="341"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>angle<sp/>=<sp/>180<sp/>+<sp/>(<sp/>180.0/M_PI<sp/>*<sp/>angle<sp/>);</highlight></codeline>
+<codeline lineno="342"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="343"><highlight class="normal"></highlight></codeline>
+<codeline lineno="344"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_rotate(<sp/>olsr_node-&gt;<ref refid="structolsr__node_1f2e3f729be82b64001867038bbe8012a" kindref="member">desc_id</ref>,<sp/>0,<sp/>angle<sp/>,<sp/>0<sp/>);</highlight></codeline>
+<codeline lineno="345"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_translate(<sp/>olsr_node-&gt;<ref refid="structolsr__node_1f2e3f729be82b64001867038bbe8012a" kindref="member">desc_id</ref>,<sp/>-cos(angle_rad)*olsr_node-&gt;<ref refid="structolsr__node_1c2a66c5312cf64fec10f6b8903dbd966" kindref="member">desc_length</ref>/2<sp/>,-1.5,<sp/>sin(angle_rad)*olsr_node-&gt;<ref refid="structolsr__node_1c2a66c5312cf64fec10f6b8903dbd966" kindref="member">desc_length</ref>/2<sp/>);</highlight></codeline>
+<codeline lineno="346"><highlight class="normal"></highlight></codeline>
+<codeline lineno="347"><highlight class="normal"></highlight></codeline>
+<codeline lineno="348"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>drift<sp/>away<sp/>from<sp/>unrelated<sp/>nodes<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="349"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Obj_to_ip_curr<sp/>=<sp/><ref refid="main_8c_19494e9e8cbdc4eceb86cb33ff0006785" kindref="member">Obj_to_ip_head</ref>-&gt;<ref refid="structObj__to__ip_1da076aa87c753db90520204360bf326a" kindref="member">next</ref>;</highlight></codeline>
+<codeline lineno="350"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(<sp/>Obj_to_ip_curr<sp/>!=<sp/><ref refid="main_8c_1236217b97f5fe65457d8b22c73c5073d" kindref="member">Obj_to_ip_end</ref><sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="351"><highlight class="normal"></highlight></codeline>
+<codeline lineno="352"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>myself<sp/>...<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="353"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>olsr_node<sp/>!=<sp/>Obj_to_ip_curr-&gt;<ref refid="structObj__to__ip_1207d8f9a609e3e20b4cbd9a7976dcd18" kindref="member">olsr_node</ref><sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="354"><highlight class="normal"></highlight></codeline>
+<codeline lineno="355"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>olsr_neigh_list<sp/>=<sp/>olsr_node-&gt;<ref refid="structolsr__node_13b80ce78a06be6aba5a1f93887442764" kindref="member">olsr_neigh_list</ref>;</highlight></codeline>
+<codeline lineno="356"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(<sp/>olsr_neigh_list<sp/>!=<sp/>NULL<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="357"><highlight class="normal"></highlight></codeline>
+<codeline lineno="358"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>nodes<sp/>are<sp/>related<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="359"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>(<sp/>olsr_neigh_list-&gt;<ref refid="structolsr__neigh__list_183a291941fbb40293f8e2e5c6b4d11b6" kindref="member">olsr_con</ref>-&gt;<ref refid="structolsr__con_1578882f9337bb0bdad9444e85d56a088" kindref="member">left_olsr_node</ref>-&gt;<ref refid="structolsr__node_1f19d37e4aa5263be9a1741de24686664" kindref="member">visible</ref><sp/>==<sp/>1<sp/>)<sp/>&amp;&amp;<sp/>(<sp/>olsr_neigh_list-&gt;<ref refid="structolsr__neigh__list_183a291941fbb40293f8e2e5c6b4d11b6" kindref="member">olsr_con</ref>-&gt;<ref refid="structolsr__con_1f49aca51c70a95deddf8bb715d63af31" kindref="member">right_olsr_node</ref>-&gt;<ref refid="structolsr__node_1f19d3!
 7e4aa5263be9a1741de24686664" kindref="member">visible</ref><sp/>==<sp/>1<sp/>)<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="360"><highlight class="normal"></highlight></codeline>
+<codeline lineno="361"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>(<sp/>olsr_neigh_list-&gt;<ref refid="structolsr__neigh__list_183a291941fbb40293f8e2e5c6b4d11b6" kindref="member">olsr_con</ref>-&gt;<ref refid="structolsr__con_1578882f9337bb0bdad9444e85d56a088" kindref="member">left_olsr_node</ref><sp/>==<sp/>Obj_to_ip_curr-&gt;<ref refid="structObj__to__ip_1207d8f9a609e3e20b4cbd9a7976dcd18" kindref="member">olsr_node</ref><sp/>)<sp/>||<sp/>(<sp/><sp/>olsr_neigh_list-&gt;<ref refid="structolsr__neigh__list_183a291941fbb40293f8e2e5c6b4d11b6" kindref="member">olsr_con</ref>-&gt;<ref refid="structolsr__con_1f49aca51c70a95deddf8bb715d63af31" kindref="member">right_ol!
 sr_node</ref><sp/>==<sp/>Obj_to_ip_curr-&gt;<ref refid="structObj__to__ip_1207d8f9a609e3e20b4cbd9a7976dcd18" kindref="member">olsr_node</ref><sp/>)<sp/>)<sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
+<codeline lineno="362"><highlight class="normal"></highlight></codeline>
+<codeline lineno="363"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="364"><highlight class="normal"></highlight></codeline>
+<codeline lineno="365"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>olsr_neigh_list<sp/>=<sp/>olsr_neigh_list-&gt;<ref refid="structolsr__neigh__list_1f1d533fde49e1ed2ea5299661f5c10c6" kindref="member">next_olsr_neigh_list</ref>;</highlight></codeline>
+<codeline lineno="366"><highlight class="normal"></highlight></codeline>
+<codeline lineno="367"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="368"><highlight class="normal"></highlight></codeline>
+<codeline lineno="369"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>nodes<sp/>are<sp/>not<sp/>related<sp/>-<sp/>so<sp/>drift<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="370"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>olsr_neigh_list<sp/>==<sp/>NULL<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="371"><highlight class="normal"></highlight></codeline>
+<codeline lineno="372"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>distance<sp/>=<sp/><ref refid="main_8c_1753e5e5d6fbcbd893bb466ce045a3316" kindref="member">dirt</ref>(<sp/>olsr_node-&gt;<ref refid="structolsr__node_191977704430de9534f7a118d1dfbeb54" kindref="member">pos_vec</ref>,<sp/>Obj_to_ip_curr-&gt;<ref refid="structObj__to__ip_1207d8f9a609e3e20b4cbd9a7976dcd18" kindref="member">olsr_node</ref>-&gt;<ref refid="structolsr__node_191977704430de9534f7a118d1dfbeb54" kindref="member">pos_vec</ref>,<sp/>tmp_mov_vec<sp/>);</highlight></codeline>
+<codeline lineno="373"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>distance<sp/>&lt;<sp/>0.1<sp/>)<sp/>distance<sp/>=<sp/>0.1;</highlight></codeline>
+<codeline lineno="374"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_1f4369a866dcd049e2642e137507e8ff1" kindref="member">mov_add</ref>(<sp/>olsr_node-&gt;<ref refid="structolsr__node_1f95ed9fca02788c5f4933ac51b4ea147" kindref="member">mov_vec</ref>,<sp/>tmp_mov_vec,-100<sp/>/<sp/>(<sp/>distance<sp/>*<sp/>distance<sp/>)<sp/>);</highlight></codeline>
+<codeline lineno="375"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_1f4369a866dcd049e2642e137507e8ff1" kindref="member">mov_add</ref>(<sp/>Obj_to_ip_curr-&gt;<ref refid="structObj__to__ip_1207d8f9a609e3e20b4cbd9a7976dcd18" kindref="member">olsr_node</ref>-&gt;<ref refid="structolsr__node_1f95ed9fca02788c5f4933ac51b4ea147" kindref="member">mov_vec</ref>,<sp/>tmp_mov_vec,<sp/>100<sp/>/<sp/>(<sp/>distance<sp/>*<sp/>distance<sp/>)<sp/>);</highlight></codeline>
+<codeline lineno="376"><highlight class="normal"></highlight></codeline>
+<codeline lineno="377"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="378"><highlight class="normal"></highlight></codeline>
+<codeline lineno="379"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="380"><highlight class="normal"></highlight></codeline>
+<codeline lineno="381"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Obj_to_ip_curr<sp/>=<sp/>Obj_to_ip_curr-&gt;<ref refid="structObj__to__ip_1da076aa87c753db90520204360bf326a" kindref="member">next</ref>;</highlight></codeline>
+<codeline lineno="382"><highlight class="normal"></highlight></codeline>
+<codeline lineno="383"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="384"><highlight class="normal"></highlight></codeline>
+<codeline lineno="385"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="386"><highlight class="normal"></highlight></codeline>
+<codeline lineno="387"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_1de55269b71a792259ef22763327686b9" kindref="member">handle_olsr_node</ref>(<sp/>olsr_node-&gt;<ref refid="structolsr__node_1b64ee26ebfa4a3c2719de780b4cabada" kindref="member">left</ref><sp/>);</highlight></codeline>
+<codeline lineno="388"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_1de55269b71a792259ef22763327686b9" kindref="member">handle_olsr_node</ref>(<sp/>olsr_node-&gt;<ref refid="structolsr__node_1bc6cf143d12b1e5a204ae64d40c0eb05" kindref="member">right</ref><sp/>);</highlight></codeline>
+<codeline lineno="389"><highlight class="normal"></highlight></codeline>
+<codeline lineno="390"><highlight class="normal">}</highlight></codeline>
+<codeline lineno="391"><highlight class="normal"></highlight></codeline>
+<codeline lineno="392"><highlight class="normal"></highlight></codeline>
+<codeline lineno="393"><highlight class="normal"></highlight></codeline>
+<codeline lineno="394"><highlight class="normal"></highlight><highlight class="comment">/***</highlight></codeline>
+<codeline lineno="395"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="396"><highlight class="comment"><sp/>*<sp/>calculate<sp/>movement<sp/>vector<sp/>of<sp/>all<sp/>olsr<sp/>nodes</highlight></codeline>
+<codeline lineno="397"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="398"><highlight class="comment"><sp/>***/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="399"><highlight class="normal"></highlight></codeline>
+<codeline lineno="400" refid="main_8c_1668e36a25680cc3e0ac4d85a418a838a" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="main_8c_1668e36a25680cc3e0ac4d85a418a838a" kindref="member">calc_olsr_node_mov</ref>(<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="401"><highlight class="normal"></highlight></codeline>
+<codeline lineno="402"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>distance;</highlight></codeline>
+<codeline lineno="403"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>tmp_mov_vec[3];</highlight></codeline>
+<codeline lineno="404"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>f;</highlight></codeline>
+<codeline lineno="405"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structolsr__con" kindref="compound">olsr_con</ref><sp/>*<ref refid="structolsr__con" kindref="compound">olsr_con</ref><sp/>=<sp/><ref refid="main_8c_10643a36891539929d987e2ee83ff81d1" kindref="member">Con_begin</ref>;</highlight></codeline>
+<codeline lineno="406"><highlight class="normal"></highlight></codeline>
+<codeline lineno="407"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(<sp/>olsr_con<sp/>!=<sp/>NULL<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="408"><highlight class="normal"></highlight></codeline>
+<codeline lineno="409"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>(<sp/>olsr_con-&gt;<ref refid="structolsr__con_1d93efab11883355b45a0460456991362" kindref="member">left_etx</ref><sp/>!=<sp/>0.0<sp/>)<sp/>&amp;&amp;<sp/>(<sp/>olsr_con-&gt;<ref refid="structolsr__con_130d90c31e93a79ba37ca51b8d146693a" kindref="member">right_etx</ref><sp/>!=<sp/>0.0<sp/><sp/>)<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="410"><highlight class="normal"></highlight></codeline>
+<codeline lineno="411"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>distance<sp/>=<sp/><ref refid="main_8c_1753e5e5d6fbcbd893bb466ce045a3316" kindref="member">dirt</ref>(<sp/>olsr_con-&gt;<ref refid="structolsr__con_1578882f9337bb0bdad9444e85d56a088" kindref="member">left_olsr_node</ref>-&gt;<ref refid="structolsr__node_191977704430de9534f7a118d1dfbeb54" kindref="member">pos_vec</ref>,<sp/>olsr_con-&gt;<ref refid="structolsr__con_1f49aca51c70a95deddf8bb715d63af31" kindref="member">right_olsr_node</ref>-&gt;<ref refid="structolsr__node_191977704430de9534f7a118d1dfbeb54" kindref="member">pos_vec</ref>,<sp/>tmp_mov_vec<sp/>);</highlight></codeline>
+<codeline lineno="412"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>f<sp/>=<sp/>(<sp/>(<sp/>olsr_con-&gt;<ref refid="structolsr__con_1d93efab11883355b45a0460456991362" kindref="member">left_etx</ref><sp/>+<sp/>olsr_con-&gt;<ref refid="structolsr__con_130d90c31e93a79ba37ca51b8d146693a" kindref="member">right_etx</ref><sp/>)<sp/>/<sp/>4.0<sp/>)<sp/>/<sp/>distance;</highlight></codeline>
+<codeline lineno="413"><highlight class="normal"></highlight></codeline>
+<codeline lineno="414"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/***</highlight></codeline>
+<codeline lineno="415"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>drift<sp/>factor<sp/>-<sp/>0.0<sp/>&lt;<sp/>factor<sp/>&lt;<sp/>1.0<sp/>(<sp/>best<sp/>results:<sp/>0.3<sp/>&lt;<sp/>factor<sp/>&lt;<sp/>0.9</highlight></codeline>
+<codeline lineno="416"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>small<sp/>factor:<sp/>fast<sp/>and<sp/>strong<sp/>drift<sp/>to<sp/>neighbours</highlight></codeline>
+<codeline lineno="417"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>***/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="418"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>f<sp/>&lt;<sp/><ref refid="main_8c_198d8a7901c60f18d6bf9b35998147831" kindref="member">Factor</ref><sp/>)<sp/>f<sp/>=<sp/><ref refid="main_8c_198d8a7901c60f18d6bf9b35998147831" kindref="member">Factor</ref>;</highlight></codeline>
+<codeline lineno="419"><highlight class="normal"></highlight></codeline>
+<codeline lineno="420"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_1f4369a866dcd049e2642e137507e8ff1" kindref="member">mov_add</ref>(<sp/>olsr_con-&gt;<ref refid="structolsr__con_1578882f9337bb0bdad9444e85d56a088" kindref="member">left_olsr_node</ref>-&gt;<ref refid="structolsr__node_1f95ed9fca02788c5f4933ac51b4ea147" kindref="member">mov_vec</ref>,<sp/>tmp_mov_vec,<sp/>1<sp/>/<sp/>f<sp/>-<sp/>1<sp/>);</highlight></codeline>
+<codeline lineno="421"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_1f4369a866dcd049e2642e137507e8ff1" kindref="member">mov_add</ref>(<sp/>olsr_con-&gt;<ref refid="structolsr__con_1f49aca51c70a95deddf8bb715d63af31" kindref="member">right_olsr_node</ref>-&gt;<ref refid="structolsr__node_1f95ed9fca02788c5f4933ac51b4ea147" kindref="member">mov_vec</ref>,<sp/>tmp_mov_vec,<sp/>-<sp/>(<sp/>1<sp/>/<sp/>f<sp/>-<sp/>1<sp/>)<sp/>);</highlight></codeline>
+<codeline lineno="422"><highlight class="normal"></highlight></codeline>
+<codeline lineno="423"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="424"><highlight class="normal"></highlight></codeline>
+<codeline lineno="425"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>olsr_con<sp/>=<sp/>olsr_con-&gt;<ref refid="structolsr__con_1369dfd6eec077d0a6228cd1387135e6e" kindref="member">next_olsr_con</ref>;</highlight></codeline>
+<codeline lineno="426"><highlight class="normal"></highlight></codeline>
+<codeline lineno="427"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="428"><highlight class="normal"></highlight></codeline>
+<codeline lineno="429"><highlight class="normal">}</highlight></codeline>
+<codeline lineno="430"><highlight class="normal"></highlight></codeline>
+<codeline lineno="431"><highlight class="normal"></highlight></codeline>
+<codeline lineno="432"><highlight class="normal"></highlight></codeline>
+<codeline lineno="433"><highlight class="normal"></highlight><highlight class="comment">/***</highlight></codeline>
+<codeline lineno="434"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="435"><highlight class="comment"><sp/>*<sp/>move<sp/>all<sp/>olsr<sp/>nodes<sp/>and<sp/>their<sp/>connections</highlight></codeline>
+<codeline lineno="436"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="437"><highlight class="comment"><sp/>***/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="438"><highlight class="normal"></highlight></codeline>
+<codeline lineno="439" refid="main_8c_1b8d0d8cf5ac8914802be645e15241b77" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="main_8c_1b8d0d8cf5ac8914802be645e15241b77" kindref="member">move_olsr_nodes</ref>(<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="440"><highlight class="normal"></highlight></codeline>
+<codeline lineno="441"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>null_vec[3]<sp/>=<sp/>{0,0,0},<sp/>vertex_buf[6];</highlight></codeline>
+<codeline lineno="442"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>tmp_mov_vec[3];</highlight></codeline>
+<codeline lineno="443"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>distance,<sp/>etx,<sp/><ref refid="structolsr__con_1239f576ba1dae4303a935a296d5adb95" kindref="member">rgb</ref>;</highlight></codeline>
+<codeline lineno="444"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structolsr__con" kindref="compound">olsr_con</ref><sp/>*<ref refid="structolsr__con" kindref="compound">olsr_con</ref><sp/>=<sp/><ref refid="main_8c_10643a36891539929d987e2ee83ff81d1" kindref="member">Con_begin</ref>;</highlight></codeline>
+<codeline lineno="445"><highlight class="normal"></highlight></codeline>
+<codeline lineno="446"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(<sp/>olsr_con<sp/>!=<sp/>NULL<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="447"><highlight class="normal"></highlight></codeline>
+<codeline lineno="448"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>move<sp/>left<sp/>olsr<sp/>node<sp/>if<sp/>it<sp/>has<sp/>not<sp/>been<sp/>moved<sp/>yet<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="449"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>!(<sp/>(<sp/>olsr_con-&gt;<ref refid="structolsr__con_1578882f9337bb0bdad9444e85d56a088" kindref="member">left_olsr_node</ref>-&gt;<ref refid="structolsr__node_1f95ed9fca02788c5f4933ac51b4ea147" kindref="member">mov_vec</ref>[0]<sp/>==<sp/>0<sp/>)<sp/>&amp;&amp;<sp/>(<sp/>olsr_con-&gt;<ref refid="structolsr__con_1578882f9337bb0bdad9444e85d56a088" kindref="member">left_olsr_node</ref>-&gt;<ref refid="structolsr__node_1f95ed9fca02788c5f4933ac51b4ea147" kindref="member">mov_vec</ref>[1]<sp/>==<sp/>0<sp/>)<sp/>&amp;&amp;<sp/>(<sp/>olsr_con-&gt;<ref refid="structolsr__con_1578882f9337bb0bdad9444e85d56a088" kindref="member">left_olsr_node</ref>-&gt;<ref refid="structolsr__node_1f95ed9fca02788c5f4933ac51b4ea147" kindref="member">mov_vec</ref>[2]<sp/>==<sp/>0<sp/!
 >)<sp/>)<sp/>&amp;&amp;<sp/>olsr_con-&gt;<ref refid="structolsr__con_1578882f9337bb0bdad9444e85d56a088" kindref="member">left_olsr_node</ref>-&gt;<ref refid="structolsr__node_1f19d37e4aa5263be9a1741de24686664" kindref="member">visible</ref><sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="450"><highlight class="normal"></highlight></codeline>
+<codeline lineno="451"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>distance<sp/>=<sp/><ref refid="main_8c_1753e5e5d6fbcbd893bb466ce045a3316" kindref="member">dirt</ref>(<sp/>olsr_con-&gt;<ref refid="structolsr__con_1578882f9337bb0bdad9444e85d56a088" kindref="member">left_olsr_node</ref>-&gt;<ref refid="structolsr__node_191977704430de9534f7a118d1dfbeb54" kindref="member">pos_vec</ref>,<sp/>null_vec,<sp/>tmp_mov_vec<sp/>);</highlight></codeline>
+<codeline lineno="452"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_1f4369a866dcd049e2642e137507e8ff1" kindref="member">mov_add</ref>(<sp/>olsr_con-&gt;<ref refid="structolsr__con_1578882f9337bb0bdad9444e85d56a088" kindref="member">left_olsr_node</ref>-&gt;<ref refid="structolsr__node_1f95ed9fca02788c5f4933ac51b4ea147" kindref="member">mov_vec</ref>,<sp/>tmp_mov_vec,<sp/>distance<sp/>/<sp/>100<sp/>);<sp/></highlight><highlight class="comment">/*<sp/>move<sp/>a<sp/>little<sp/>bit<sp/>to<sp/>point<sp/>zero<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="453"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_1f4369a866dcd049e2642e137507e8ff1" kindref="member">mov_add</ref>(<sp/>olsr_con-&gt;<ref refid="structolsr__con_1578882f9337bb0bdad9444e85d56a088" kindref="member">left_olsr_node</ref>-&gt;<ref refid="structolsr__node_1f95ed9fca02788c5f4933ac51b4ea147" kindref="member">mov_vec</ref>,<sp/>tmp_mov_vec,<sp/>1<sp/>);<sp/></highlight><highlight class="comment">/*<sp/>move<sp/>a<sp/>little<sp/>bit<sp/>to<sp/>point<sp/>zero<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="454"><highlight class="normal"></highlight></codeline>
+<codeline lineno="455"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>(<sp/>distance<sp/>=<sp/><ref refid="main_8c_1da3bfd6c7ec35068dbcdf966a4628f5e" kindref="member">dist</ref>(<sp/>olsr_con-&gt;<ref refid="structolsr__con_1578882f9337bb0bdad9444e85d56a088" kindref="member">left_olsr_node</ref>-&gt;<ref refid="structolsr__node_1f95ed9fca02788c5f4933ac51b4ea147" kindref="member">mov_vec</ref>,<sp/>null_vec<sp/>)<sp/>)<sp/>&gt;<sp/>10.0<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="456"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_1f4369a866dcd049e2642e137507e8ff1" kindref="member">mov_add</ref>(<sp/>olsr_con-&gt;<ref refid="structolsr__con_1578882f9337bb0bdad9444e85d56a088" kindref="member">left_olsr_node</ref>-&gt;<ref refid="structolsr__node_191977704430de9534f7a118d1dfbeb54" kindref="member">pos_vec</ref>,<sp/>olsr_con-&gt;<ref refid="structolsr__con_1578882f9337bb0bdad9444e85d56a088" kindref="member">left_olsr_node</ref>-&gt;<ref refid="structolsr__node_1f95ed9fca02788c5f4933ac51b4ea147" kindref="member">mov_vec</ref>,<sp/>1.0<sp/>/<sp/>(<sp/>(<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>)<sp/>distance<sp/>)<sp/>);</highlight></codeline>
+<codeline lineno="457"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
+<codeline lineno="458"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_1f4369a866dcd049e2642e137507e8ff1" kindref="member">mov_add</ref>(<sp/>olsr_con-&gt;<ref refid="structolsr__con_1578882f9337bb0bdad9444e85d56a088" kindref="member">left_olsr_node</ref>-&gt;<ref refid="structolsr__node_191977704430de9534f7a118d1dfbeb54" kindref="member">pos_vec</ref>,<sp/>olsr_con-&gt;<ref refid="structolsr__con_1578882f9337bb0bdad9444e85d56a088" kindref="member">left_olsr_node</ref>-&gt;<ref refid="structolsr__node_1f95ed9fca02788c5f4933ac51b4ea147" kindref="member">mov_vec</ref>,<sp/>0.1<sp/>);</highlight></codeline>
+<codeline lineno="459"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="460"><highlight class="normal"></highlight></codeline>
+<codeline lineno="461"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_translate(<sp/>olsr_con-&gt;<ref refid="structolsr__con_1578882f9337bb0bdad9444e85d56a088" kindref="member">left_olsr_node</ref>-&gt;<ref refid="structolsr__node_115be0912065801026e7b4411af561788" kindref="member">obj_id</ref>,<sp/>olsr_con-&gt;<ref refid="structolsr__con_1578882f9337bb0bdad9444e85d56a088" kindref="member">left_olsr_node</ref>-&gt;<ref refid="structolsr__node_191977704430de9534f7a118d1dfbeb54" kindref="member">pos_vec</ref>[0],<sp/>olsr_con-&gt;<ref refid="structolsr__con_1578882f9337bb0bdad9444e85d56a088" kindref="member">left_olsr_node</ref>-&gt;<ref refid="structolsr__node_191977704430de9534f7a118d1dfbeb54" kindref="member">pos_vec</ref>[1],<sp/>olsr_con-&gt;<ref refid="structolsr__con_1578882f9337bb0bdad9444e85d56a088" kindref="member">left_olsr_node</ref>-&gt;<ref refid="structolsr_!
 _node_191977704430de9534f7a118d1dfbeb54" kindref="member">pos_vec</ref>[2]<sp/>);</highlight></codeline>
+<codeline lineno="462"><highlight class="normal"></highlight></codeline>
+<codeline lineno="463"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>reset<sp/>movement<sp/>vector<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="464"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>olsr_con-&gt;<ref refid="structolsr__con_1578882f9337bb0bdad9444e85d56a088" kindref="member">left_olsr_node</ref>-&gt;<ref refid="structolsr__node_1f95ed9fca02788c5f4933ac51b4ea147" kindref="member">mov_vec</ref>[0]<sp/>=<sp/>olsr_con-&gt;<ref refid="structolsr__con_1578882f9337bb0bdad9444e85d56a088" kindref="member">left_olsr_node</ref>-&gt;<ref refid="structolsr__node_1f95ed9fca02788c5f4933ac51b4ea147" kindref="member">mov_vec</ref>[1]<sp/>=<sp/>olsr_con-&gt;<ref refid="structolsr__con_1578882f9337bb0bdad9444e85d56a088" kindref="member">left_olsr_node</ref>-&gt;<ref refid="structolsr__node_1f95ed9fca02788c5f4933ac51b4ea147" kindref="member">mov_vec</ref>[2]<sp/>=<sp/>0.0;</highlight></codeline>
+<codeline lineno="465"><highlight class="normal"></highlight></codeline>
+<codeline lineno="466"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="467"><highlight class="normal"></highlight></codeline>
+<codeline lineno="468"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>move<sp/>right<sp/>olsr<sp/>node<sp/>if<sp/>it<sp/>has<sp/>not<sp/>been<sp/>moved<sp/>yet<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="469"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>!(<sp/>(<sp/>olsr_con-&gt;<ref refid="structolsr__con_1f49aca51c70a95deddf8bb715d63af31" kindref="member">right_olsr_node</ref>-&gt;<ref refid="structolsr__node_1f95ed9fca02788c5f4933ac51b4ea147" kindref="member">mov_vec</ref>[0]<sp/>==<sp/>0<sp/>)<sp/>&amp;&amp;<sp/>(<sp/>olsr_con-&gt;<ref refid="structolsr__con_1f49aca51c70a95deddf8bb715d63af31" kindref="member">right_olsr_node</ref>-&gt;<ref refid="structolsr__node_1f95ed9fca02788c5f4933ac51b4ea147" kindref="member">mov_vec</ref>[1]<sp/>==<sp/>0<sp/>)<sp/>&amp;&amp;<sp/>(<sp/>olsr_con-&gt;<ref refid="structolsr__con_1f49aca51c70a95deddf8bb715d63af31" kindref="member">right_olsr_node</ref>-&gt;<ref refid="structolsr__node_1f95ed9fca02788c5f4933ac51b4ea147" kindref="member">mov_vec</ref>[2]<sp/>==<sp/>0<!
 sp/>)<sp/>)<sp/>&amp;&amp;<sp/>olsr_con-&gt;<ref refid="structolsr__con_1f49aca51c70a95deddf8bb715d63af31" kindref="member">right_olsr_node</ref>-&gt;<ref refid="structolsr__node_1f19d37e4aa5263be9a1741de24686664" kindref="member">visible</ref><sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="470"><highlight class="normal"></highlight></codeline>
+<codeline lineno="471"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>distance<sp/>=<sp/><ref refid="main_8c_1753e5e5d6fbcbd893bb466ce045a3316" kindref="member">dirt</ref>(<sp/>olsr_con-&gt;<ref refid="structolsr__con_1f49aca51c70a95deddf8bb715d63af31" kindref="member">right_olsr_node</ref>-&gt;<ref refid="structolsr__node_191977704430de9534f7a118d1dfbeb54" kindref="member">pos_vec</ref>,<sp/>null_vec,<sp/>tmp_mov_vec<sp/>);</highlight></codeline>
+<codeline lineno="472"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_1f4369a866dcd049e2642e137507e8ff1" kindref="member">mov_add</ref>(<sp/>olsr_con-&gt;<ref refid="structolsr__con_1f49aca51c70a95deddf8bb715d63af31" kindref="member">right_olsr_node</ref>-&gt;<ref refid="structolsr__node_1f95ed9fca02788c5f4933ac51b4ea147" kindref="member">mov_vec</ref>,<sp/>tmp_mov_vec,<sp/>distance<sp/>/<sp/>100<sp/>);<sp/></highlight><highlight class="comment">/*<sp/>move<sp/>a<sp/>little<sp/>bit<sp/>to<sp/>point<sp/>zero<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="473"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_1f4369a866dcd049e2642e137507e8ff1" kindref="member">mov_add</ref>(<sp/>olsr_con-&gt;<ref refid="structolsr__con_1f49aca51c70a95deddf8bb715d63af31" kindref="member">right_olsr_node</ref>-&gt;<ref refid="structolsr__node_1f95ed9fca02788c5f4933ac51b4ea147" kindref="member">mov_vec</ref>,<sp/>tmp_mov_vec,<sp/>1<sp/>);<sp/></highlight><highlight class="comment">/*<sp/>move<sp/>a<sp/>little<sp/>bit<sp/>to<sp/>point<sp/>zero<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="474"><highlight class="normal"></highlight></codeline>
+<codeline lineno="475"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>(<sp/>distance<sp/>=<sp/><ref refid="main_8c_1da3bfd6c7ec35068dbcdf966a4628f5e" kindref="member">dist</ref>(<sp/>olsr_con-&gt;<ref refid="structolsr__con_1f49aca51c70a95deddf8bb715d63af31" kindref="member">right_olsr_node</ref>-&gt;<ref refid="structolsr__node_1f95ed9fca02788c5f4933ac51b4ea147" kindref="member">mov_vec</ref>,<sp/>null_vec<sp/>)<sp/>)<sp/>&gt;<sp/>10.0<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="476"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_1f4369a866dcd049e2642e137507e8ff1" kindref="member">mov_add</ref>(<sp/>olsr_con-&gt;<ref refid="structolsr__con_1f49aca51c70a95deddf8bb715d63af31" kindref="member">right_olsr_node</ref>-&gt;<ref refid="structolsr__node_191977704430de9534f7a118d1dfbeb54" kindref="member">pos_vec</ref>,<sp/>olsr_con-&gt;<ref refid="structolsr__con_1f49aca51c70a95deddf8bb715d63af31" kindref="member">right_olsr_node</ref>-&gt;<ref refid="structolsr__node_1f95ed9fca02788c5f4933ac51b4ea147" kindref="member">mov_vec</ref>,<sp/>1.0<sp/>/<sp/>(<sp/>(<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>)<sp/>distance<sp/>)<sp/>);</highlight></codeline>
+<codeline lineno="477"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
+<codeline lineno="478"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_1f4369a866dcd049e2642e137507e8ff1" kindref="member">mov_add</ref>(<sp/>olsr_con-&gt;<ref refid="structolsr__con_1f49aca51c70a95deddf8bb715d63af31" kindref="member">right_olsr_node</ref>-&gt;<ref refid="structolsr__node_191977704430de9534f7a118d1dfbeb54" kindref="member">pos_vec</ref>,<sp/>olsr_con-&gt;<ref refid="structolsr__con_1f49aca51c70a95deddf8bb715d63af31" kindref="member">right_olsr_node</ref>-&gt;<ref refid="structolsr__node_1f95ed9fca02788c5f4933ac51b4ea147" kindref="member">mov_vec</ref>,<sp/>0.1<sp/>);</highlight></codeline>
+<codeline lineno="479"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="480"><highlight class="normal"></highlight></codeline>
+<codeline lineno="481"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_translate(<sp/>olsr_con-&gt;<ref refid="structolsr__con_1f49aca51c70a95deddf8bb715d63af31" kindref="member">right_olsr_node</ref>-&gt;<ref refid="structolsr__node_115be0912065801026e7b4411af561788" kindref="member">obj_id</ref>,<sp/>olsr_con-&gt;<ref refid="structolsr__con_1f49aca51c70a95deddf8bb715d63af31" kindref="member">right_olsr_node</ref>-&gt;<ref refid="structolsr__node_191977704430de9534f7a118d1dfbeb54" kindref="member">pos_vec</ref>[0],<sp/>olsr_con-&gt;<ref refid="structolsr__con_1f49aca51c70a95deddf8bb715d63af31" kindref="member">right_olsr_node</ref>-&gt;<ref refid="structolsr__node_191977704430de9534f7a118d1dfbeb54" kindref="member">pos_vec</ref>[1],<sp/>olsr_con-&gt;<ref refid="structolsr__con_1f49aca51c70a95deddf8bb715d63af31" kindref="member">right_olsr_node</ref>-&gt;<ref refid="structo!
 lsr__node_191977704430de9534f7a118d1dfbeb54" kindref="member">pos_vec</ref>[2]<sp/>);</highlight></codeline>
+<codeline lineno="482"><highlight class="normal"></highlight></codeline>
+<codeline lineno="483"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>reset<sp/>movement<sp/>vector<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="484"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>olsr_con-&gt;<ref refid="structolsr__con_1f49aca51c70a95deddf8bb715d63af31" kindref="member">right_olsr_node</ref>-&gt;<ref refid="structolsr__node_1f95ed9fca02788c5f4933ac51b4ea147" kindref="member">mov_vec</ref>[0]<sp/>=<sp/>olsr_con-&gt;<ref refid="structolsr__con_1f49aca51c70a95deddf8bb715d63af31" kindref="member">right_olsr_node</ref>-&gt;<ref refid="structolsr__node_1f95ed9fca02788c5f4933ac51b4ea147" kindref="member">mov_vec</ref>[1]<sp/>=<sp/>olsr_con-&gt;<ref refid="structolsr__con_1f49aca51c70a95deddf8bb715d63af31" kindref="member">right_olsr_node</ref>-&gt;<ref refid="structolsr__node_1f95ed9fca02788c5f4933ac51b4ea147" kindref="member">mov_vec</ref>[2]<sp/>=<sp/>0.0;</highlight></codeline>
+<codeline lineno="485"><highlight class="normal"></highlight></codeline>
+<codeline lineno="486"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="487"><highlight class="normal"></highlight></codeline>
+<codeline lineno="488"><highlight class="normal"></highlight></codeline>
+<codeline lineno="489"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>move<sp/>connection<sp/>between<sp/>left<sp/>and<sp/>right<sp/>olsr<sp/>node<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="490"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>vertex_buf[0]<sp/>=<sp/>olsr_con-&gt;<ref refid="structolsr__con_1578882f9337bb0bdad9444e85d56a088" kindref="member">left_olsr_node</ref>-&gt;<ref refid="structolsr__node_191977704430de9534f7a118d1dfbeb54" kindref="member">pos_vec</ref>[0];</highlight></codeline>
+<codeline lineno="491"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>vertex_buf[1]<sp/>=<sp/>olsr_con-&gt;<ref refid="structolsr__con_1578882f9337bb0bdad9444e85d56a088" kindref="member">left_olsr_node</ref>-&gt;<ref refid="structolsr__node_191977704430de9534f7a118d1dfbeb54" kindref="member">pos_vec</ref>[1];</highlight></codeline>
+<codeline lineno="492"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>vertex_buf[2]<sp/>=<sp/>olsr_con-&gt;<ref refid="structolsr__con_1578882f9337bb0bdad9444e85d56a088" kindref="member">left_olsr_node</ref>-&gt;<ref refid="structolsr__node_191977704430de9534f7a118d1dfbeb54" kindref="member">pos_vec</ref>[2];</highlight></codeline>
+<codeline lineno="493"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>vertex_buf[3]<sp/>=<sp/>olsr_con-&gt;<ref refid="structolsr__con_1f49aca51c70a95deddf8bb715d63af31" kindref="member">right_olsr_node</ref>-&gt;<ref refid="structolsr__node_191977704430de9534f7a118d1dfbeb54" kindref="member">pos_vec</ref>[0];</highlight></codeline>
+<codeline lineno="494"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>vertex_buf[4]<sp/>=<sp/>olsr_con-&gt;<ref refid="structolsr__con_1f49aca51c70a95deddf8bb715d63af31" kindref="member">right_olsr_node</ref>-&gt;<ref refid="structolsr__node_191977704430de9534f7a118d1dfbeb54" kindref="member">pos_vec</ref>[1];</highlight></codeline>
+<codeline lineno="495"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>vertex_buf[5]<sp/>=<sp/>olsr_con-&gt;<ref refid="structolsr__con_1f49aca51c70a95deddf8bb715d63af31" kindref="member">right_olsr_node</ref>-&gt;<ref refid="structolsr__node_191977704430de9534f7a118d1dfbeb54" kindref="member">pos_vec</ref>[2];</highlight></codeline>
+<codeline lineno="496"><highlight class="normal"></highlight></codeline>
+<codeline lineno="497"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_pep_vertices(<sp/>olsr_con-&gt;<ref refid="structolsr__con_1fe985b6b83425cb17e801ac00001175e" kindref="member">obj_id</ref>,<sp/>vertex_buf,<sp/>2<sp/>);</highlight></codeline>
+<codeline lineno="498"><highlight class="normal"></highlight></codeline>
+<codeline lineno="499"><highlight class="normal"></highlight></codeline>
+<codeline lineno="500"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/><ref refid="main_8c_1aaca6648d8e9266d2fbeb21a6a4f4745" kindref="member">ColorSwitch</ref><sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="501"><highlight class="normal"></highlight></codeline>
+<codeline lineno="502"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>HNA<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="503"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>olsr_con-&gt;<ref refid="structolsr__con_1d93efab11883355b45a0460456991362" kindref="member">left_etx</ref><sp/>==<sp/>-1000.00<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="504"><highlight class="normal"></highlight></codeline>
+<codeline lineno="505"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(olsr_con-&gt;<ref refid="structolsr__con_126a11a87df79af8e59e9f5048937b0c1" kindref="member">color</ref><sp/>!=<sp/>1)<sp/>{</highlight></codeline>
+<codeline lineno="506"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_pep_material(<sp/>olsr_con-&gt;<ref refid="structolsr__con_1fe985b6b83425cb17e801ac00001175e" kindref="member">obj_id</ref>,</highlight></codeline>
+<codeline lineno="507"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>0.0,0.0,1.0,</highlight></codeline>
+<codeline lineno="508"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>0.0,0.0,1.0,</highlight></codeline>
+<codeline lineno="509"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>0.0,0.0,1.0);</highlight></codeline>
+<codeline lineno="510"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>olsr_con-&gt;<ref refid="structolsr__con_126a11a87df79af8e59e9f5048937b0c1" kindref="member">color</ref><sp/>=<sp/>1;</highlight></codeline>
+<codeline lineno="511"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="512"><highlight class="normal"></highlight></codeline>
+<codeline lineno="513"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
+<codeline lineno="514"><highlight class="normal"></highlight></codeline>
+<codeline lineno="515"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>etx<sp/>=<sp/>(<sp/>olsr_con-&gt;<ref refid="structolsr__con_1d93efab11883355b45a0460456991362" kindref="member">left_etx</ref><sp/>+<sp/>olsr_con-&gt;<ref refid="structolsr__con_130d90c31e93a79ba37ca51b8d146693a" kindref="member">right_etx</ref><sp/>)<sp/>/<sp/>2.0;</highlight></codeline>
+<codeline lineno="516"><highlight class="normal"></highlight></codeline>
+<codeline lineno="517"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>very<sp/>good<sp/>link<sp/>-<sp/>bright<sp/>blue<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="518"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>(<sp/>etx<sp/>&gt;=<sp/>1.0<sp/>)<sp/>&amp;&amp;<sp/>(<sp/>etx<sp/>&lt;<sp/>1.5<sp/>)<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="519"><highlight class="normal"></highlight></codeline>
+<codeline lineno="520"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(olsr_con-&gt;<ref refid="structolsr__con_126a11a87df79af8e59e9f5048937b0c1" kindref="member">color</ref><sp/>!=<sp/>2)<sp/>{</highlight></codeline>
+<codeline lineno="521"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_pep_material(<sp/>olsr_con-&gt;<ref refid="structolsr__con_1fe985b6b83425cb17e801ac00001175e" kindref="member">obj_id</ref>,</highlight></codeline>
+<codeline lineno="522"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>0.5,1.0,1.0,</highlight></codeline>
+<codeline lineno="523"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>0.5,1.0,1.0,</highlight></codeline>
+<codeline lineno="524"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>0.5,1.0,1.0);</highlight></codeline>
+<codeline lineno="525"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>olsr_con-&gt;<ref refid="structolsr__con_126a11a87df79af8e59e9f5048937b0c1" kindref="member">color</ref><sp/>=<sp/>2;</highlight></codeline>
+<codeline lineno="526"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="527"><highlight class="normal"></highlight></codeline>
+<codeline lineno="528"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>good<sp/>link<sp/>-<sp/>bright<sp/>yellow<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="529"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>(<sp/>etx<sp/>&gt;=<sp/>1.5<sp/>)<sp/>&amp;&amp;<sp/>(<sp/>etx<sp/>&lt;<sp/>2.0<sp/>)<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="530"><highlight class="normal"></highlight></codeline>
+<codeline lineno="531"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rgb<sp/>=<sp/>2.0<sp/>-<sp/>etx;</highlight></codeline>
+<codeline lineno="532"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>olsr_con-&gt;<ref refid="structolsr__con_126a11a87df79af8e59e9f5048937b0c1" kindref="member">color</ref><sp/>!=<sp/>3<sp/>||<sp/>(olsr_con-&gt;<ref refid="structolsr__con_126a11a87df79af8e59e9f5048937b0c1" kindref="member">color</ref><sp/>==<sp/>3<sp/>&amp;&amp;<sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)<sp/>rintf(olsr_con-&gt;<ref refid="structolsr__con_1239f576ba1dae4303a935a296d5adb95" kindref="member">rgb</ref><sp/>*<sp/>10)<sp/>!=<sp/><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)<sp/>rintf(rgb<sp/>*<sp/>10)))<sp/>{</highlight></codeline>
+<codeline lineno="533"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_pep_material(<sp/>olsr_con-&gt;<ref refid="structolsr__con_1fe985b6b83425cb17e801ac00001175e" kindref="member">obj_id</ref>,</highlight></codeline>
+<codeline lineno="534"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>1.0,1.0,rgb,</highlight></codeline>
+<codeline lineno="535"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>1.0,1.0,rgb,</highlight></codeline>
+<codeline lineno="536"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>1.0,1.0,rgb);</highlight></codeline>
+<codeline lineno="537"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>olsr_con-&gt;<ref refid="structolsr__con_126a11a87df79af8e59e9f5048937b0c1" kindref="member">color</ref><sp/>=<sp/>3;</highlight></codeline>
+<codeline lineno="538"><highlight class="normal"></highlight></codeline>
+<codeline lineno="539"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>olsr_con-&gt;<ref refid="structolsr__con_1239f576ba1dae4303a935a296d5adb95" kindref="member">rgb</ref><sp/>=<sp/><sp/>rgb;</highlight></codeline>
+<codeline lineno="540"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="541"><highlight class="normal"></highlight></codeline>
+<codeline lineno="542"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>not<sp/>so<sp/>good<sp/>link<sp/>-<sp/>orange<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="543"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>(<sp/>etx<sp/>&gt;=<sp/>2.0<sp/>)<sp/>&amp;&amp;<sp/>(<sp/>etx<sp/>&lt;<sp/>3.0<sp/>)<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="544"><highlight class="normal"></highlight></codeline>
+<codeline lineno="545"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rgb<sp/>=<sp/>1.5<sp/>-<sp/>(<sp/>etx<sp/>/<sp/>2.0<sp/>);</highlight></codeline>
+<codeline lineno="546"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>olsr_con-&gt;<ref refid="structolsr__con_126a11a87df79af8e59e9f5048937b0c1" kindref="member">color</ref><sp/>!=<sp/>4<sp/>||<sp/>(olsr_con-&gt;<ref refid="structolsr__con_126a11a87df79af8e59e9f5048937b0c1" kindref="member">color</ref><sp/>==<sp/>4<sp/>&amp;&amp;<sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)<sp/>rintf(olsr_con-&gt;<ref refid="structolsr__con_1239f576ba1dae4303a935a296d5adb95" kindref="member">rgb</ref><sp/>*<sp/>10)<sp/>!=<sp/><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)<sp/>rintf(rgb<sp/>*<sp/>10)))<sp/>{</highlight></codeline>
+<codeline lineno="547"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_pep_material(<sp/>olsr_con-&gt;<ref refid="structolsr__con_1fe985b6b83425cb17e801ac00001175e" kindref="member">obj_id</ref>,</highlight></codeline>
+<codeline lineno="548"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>1.0,rgb,0.0,</highlight></codeline>
+<codeline lineno="549"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>1.0,rgb,0.0,</highlight></codeline>
+<codeline lineno="550"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>1.0,rgb,0.0);</highlight></codeline>
+<codeline lineno="551"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>olsr_con-&gt;<ref refid="structolsr__con_126a11a87df79af8e59e9f5048937b0c1" kindref="member">color</ref><sp/>=<sp/>4;</highlight></codeline>
+<codeline lineno="552"><highlight class="normal"></highlight></codeline>
+<codeline lineno="553"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>olsr_con-&gt;<ref refid="structolsr__con_1239f576ba1dae4303a935a296d5adb95" kindref="member">rgb</ref><sp/>=<sp/>rgb;</highlight></codeline>
+<codeline lineno="554"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="555"><highlight class="normal"></highlight></codeline>
+<codeline lineno="556"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>bad<sp/>link<sp/>(almost<sp/>dead)<sp/>-<sp/>brown<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="557"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>(<sp/>etx<sp/>&gt;=<sp/>3.0<sp/>)<sp/>&amp;&amp;<sp/>(<sp/>etx<sp/>&lt;<sp/>5.0<sp/>)<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="558"><highlight class="normal"></highlight></codeline>
+<codeline lineno="559"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rgb<sp/>=<sp/>1.75<sp/>-<sp/>(<sp/>etx<sp/>/<sp/>4.0<sp/>);</highlight></codeline>
+<codeline lineno="560"><highlight class="normal"></highlight></codeline>
+<codeline lineno="561"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>olsr_con-&gt;<ref refid="structolsr__con_126a11a87df79af8e59e9f5048937b0c1" kindref="member">color</ref><sp/>!=<sp/>5<sp/>||<sp/>(olsr_con-&gt;<ref refid="structolsr__con_126a11a87df79af8e59e9f5048937b0c1" kindref="member">color</ref><sp/>==<sp/>5<sp/>&amp;&amp;<sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)<sp/>rintf(olsr_con-&gt;<ref refid="structolsr__con_1239f576ba1dae4303a935a296d5adb95" kindref="member">rgb</ref><sp/>*<sp/>10)<sp/>!=<sp/><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)<sp/>rintf(rgb<sp/>*<sp/>10))<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="562"><highlight class="normal"></highlight></codeline>
+<codeline lineno="563"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_pep_material(<sp/>olsr_con-&gt;<ref refid="structolsr__con_1fe985b6b83425cb17e801ac00001175e" kindref="member">obj_id</ref>,</highlight></codeline>
+<codeline lineno="564"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rgb,rgb<sp/>-<sp/>0.5,0.0,</highlight></codeline>
+<codeline lineno="565"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rgb,rgb<sp/>-<sp/>0.5,0.0,</highlight></codeline>
+<codeline lineno="566"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rgb,rgb<sp/>-<sp/>0.5,0.0);</highlight></codeline>
+<codeline lineno="567"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>olsr_con-&gt;<ref refid="structolsr__con_126a11a87df79af8e59e9f5048937b0c1" kindref="member">color</ref><sp/>=<sp/>5;</highlight></codeline>
+<codeline lineno="568"><highlight class="normal"></highlight></codeline>
+<codeline lineno="569"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>olsr_con-&gt;<ref refid="structolsr__con_1239f576ba1dae4303a935a296d5adb95" kindref="member">rgb</ref><sp/>=<sp/>rgb;</highlight></codeline>
+<codeline lineno="570"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="571"><highlight class="normal"></highlight></codeline>
+<codeline lineno="572"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>zombie<sp/>link<sp/>-<sp/>grey<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="573"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>(<sp/>etx<sp/>&gt;=<sp/>5.0<sp/>)<sp/>&amp;&amp;<sp/>(<sp/>etx<sp/>&lt;<sp/>1000.0<sp/>)<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="574"><highlight class="normal"></highlight></codeline>
+<codeline lineno="575"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rgb<sp/>=<sp/>1000.0<sp/>/<sp/>(<sp/>1500.0<sp/>+<sp/>etx<sp/>);</highlight></codeline>
+<codeline lineno="576"><highlight class="normal"></highlight></codeline>
+<codeline lineno="577"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>olsr_con-&gt;<ref refid="structolsr__con_126a11a87df79af8e59e9f5048937b0c1" kindref="member">color</ref><sp/>!=<sp/>6<sp/>||<sp/>(olsr_con-&gt;<ref refid="structolsr__con_126a11a87df79af8e59e9f5048937b0c1" kindref="member">color</ref><sp/>==<sp/>6<sp/>&amp;&amp;<sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)<sp/>rintf(olsr_con-&gt;<ref refid="structolsr__con_1239f576ba1dae4303a935a296d5adb95" kindref="member">rgb</ref><sp/>*<sp/>10)<sp/>!=<sp/><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)<sp/>rintf(rgb<sp/>*<sp/>10))<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="578"><highlight class="normal"></highlight></codeline>
+<codeline lineno="579"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_pep_material(<sp/>olsr_con-&gt;<ref refid="structolsr__con_1fe985b6b83425cb17e801ac00001175e" kindref="member">obj_id</ref>,</highlight></codeline>
+<codeline lineno="580"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rgb,rgb,rgb,</highlight></codeline>
+<codeline lineno="581"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rgb,rgb,rgb,</highlight></codeline>
+<codeline lineno="582"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>rgb,rgb,rgb);</highlight></codeline>
+<codeline lineno="583"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>olsr_con-&gt;<ref refid="structolsr__con_126a11a87df79af8e59e9f5048937b0c1" kindref="member">color</ref><sp/>=<sp/>6;</highlight></codeline>
+<codeline lineno="584"><highlight class="normal"></highlight></codeline>
+<codeline lineno="585"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>olsr_con-&gt;<ref refid="structolsr__con_1239f576ba1dae4303a935a296d5adb95" kindref="member">rgb</ref><sp/>=<sp/>rgb;</highlight></codeline>
+<codeline lineno="586"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="587"><highlight class="normal"></highlight></codeline>
+<codeline lineno="588"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>wtf<sp/>-<sp/>dark<sp/>grey<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="589"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
+<codeline lineno="590"><highlight class="normal"></highlight></codeline>
+<codeline lineno="591"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(olsr_con-&gt;<ref refid="structolsr__con_126a11a87df79af8e59e9f5048937b0c1" kindref="member">color</ref><sp/>!=<sp/>7)<sp/>{</highlight></codeline>
+<codeline lineno="592"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_pep_material(<sp/>olsr_con-&gt;<ref refid="structolsr__con_1fe985b6b83425cb17e801ac00001175e" kindref="member">obj_id</ref>,</highlight></codeline>
+<codeline lineno="593"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>0.3,0.3,0.3,</highlight></codeline>
+<codeline lineno="594"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>0.3,0.3,0.3,</highlight></codeline>
+<codeline lineno="595"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>0.3,0.3,0.3);</highlight></codeline>
+<codeline lineno="596"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>olsr_con-&gt;<ref refid="structolsr__con_126a11a87df79af8e59e9f5048937b0c1" kindref="member">color</ref><sp/>=<sp/>7;</highlight></codeline>
+<codeline lineno="597"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="598"><highlight class="normal"></highlight></codeline>
+<codeline lineno="599"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="600"><highlight class="normal"></highlight></codeline>
+<codeline lineno="601"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="602"><highlight class="normal"></highlight></codeline>
+<codeline lineno="603"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
+<codeline lineno="604"><highlight class="normal"></highlight></codeline>
+<codeline lineno="605"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(olsr_con-&gt;<ref refid="structolsr__con_126a11a87df79af8e59e9f5048937b0c1" kindref="member">color</ref><sp/>!=<sp/>0)<sp/>{</highlight></codeline>
+<codeline lineno="606"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_pep_material(<sp/>olsr_con-&gt;<ref refid="structolsr__con_1fe985b6b83425cb17e801ac00001175e" kindref="member">obj_id</ref>,</highlight></codeline>
+<codeline lineno="607"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>1.0,1.0,1.0,</highlight></codeline>
+<codeline lineno="608"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>1.0,1.0,1.0,</highlight></codeline>
+<codeline lineno="609"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>1.0,1.0,1.0);</highlight></codeline>
+<codeline lineno="610"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>olsr_con-&gt;<ref refid="structolsr__con_126a11a87df79af8e59e9f5048937b0c1" kindref="member">color</ref><sp/>=<sp/>0;</highlight></codeline>
+<codeline lineno="611"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="612"><highlight class="normal"></highlight></codeline>
+<codeline lineno="613"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="614"><highlight class="normal"></highlight></codeline>
+<codeline lineno="615"><highlight class="normal"></highlight></codeline>
+<codeline lineno="616"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>olsr_con<sp/>=<sp/>olsr_con-&gt;<ref refid="structolsr__con_1369dfd6eec077d0a6228cd1387135e6e" kindref="member">next_olsr_con</ref>;</highlight></codeline>
+<codeline lineno="617"><highlight class="normal"></highlight></codeline>
+<codeline lineno="618"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="619"><highlight class="normal"></highlight></codeline>
+<codeline lineno="620"><highlight class="normal">}</highlight></codeline>
+<codeline lineno="621"><highlight class="normal"></highlight></codeline>
+<codeline lineno="622"><highlight class="normal"></highlight></codeline>
+<codeline lineno="623"><highlight class="normal"></highlight></codeline>
+<codeline lineno="624" refid="main_8c_1896df4ffe3f986ad843e4d191cd712b3" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="main_8c_1896df4ffe3f986ad843e4d191cd712b3" kindref="member">mainloop</ref>()<sp/>{</highlight></codeline>
+<codeline lineno="625"><highlight class="normal"></highlight></codeline>
+<codeline lineno="626"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>net_result;<sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>result<sp/>of<sp/>function<sp/>net_main<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="627"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>nc_str[20];</highlight></codeline>
+<codeline lineno="628"><highlight class="normal"></highlight></codeline>
+<codeline lineno="629"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>calculate<sp/>new<sp/>movement<sp/>vector<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="630"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_1668e36a25680cc3e0ac4d85a418a838a" kindref="member">calc_olsr_node_mov</ref>();</highlight></codeline>
+<codeline lineno="631"><highlight class="normal"></highlight></codeline>
+<codeline lineno="632"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>prepare<sp/>nodes<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="633"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_1de55269b71a792259ef22763327686b9" kindref="member">handle_olsr_node</ref>(<sp/><ref refid="main_8c_1c5c5c6846587092d0c23b58b558e680c" kindref="member">Olsr_root</ref><sp/>);</highlight></codeline>
+<codeline lineno="634"><highlight class="normal"></highlight></codeline>
+<codeline lineno="635"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>move<sp/>it<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="636"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_1b8d0d8cf5ac8914802be645e15241b77" kindref="member">move_olsr_nodes</ref>();</highlight></codeline>
+<codeline lineno="637"><highlight class="normal"></highlight></codeline>
+<codeline lineno="638"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>if<sp/>we<sp/>have<sp/>more<sp/>or<sp/>less<sp/>nodes<sp/>now<sp/>-<sp/>redraw<sp/>node<sp/>count<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="639"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/><ref refid="main_8c_186c048bc4aaab319f4d61f7c0e1f056f" kindref="member">Olsr_node_count</ref><sp/>!=<sp/><ref refid="main_8c_158acad60c78b63554c696703227d0b7b" kindref="member">Last_olsr_node_count</ref><sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="640"><highlight class="normal"></highlight></codeline>
+<codeline lineno="641"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/><ref refid="main_8c_14dfd0657ff868fa02113bcd3335acff1" kindref="member">Olsr_node_count_obj</ref><sp/>!=<sp/>-1<sp/>)<sp/>s3d_del_object(<sp/><ref refid="main_8c_14dfd0657ff868fa02113bcd3335acff1" kindref="member">Olsr_node_count_obj</ref><sp/>);</highlight></codeline>
+<codeline lineno="642"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>snprintf(<sp/>nc_str,<sp/>20,<sp/></highlight><highlight class="stringliteral">&quot;node<sp/>count:<sp/>%d&quot;</highlight><highlight class="normal">,<sp/><ref refid="main_8c_186c048bc4aaab319f4d61f7c0e1f056f" kindref="member">Olsr_node_count</ref><sp/>);</highlight></codeline>
+<codeline lineno="643"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_14dfd0657ff868fa02113bcd3335acff1" kindref="member">Olsr_node_count_obj</ref><sp/>=<sp/>s3d_draw_string(<sp/>nc_str,<sp/>NULL<sp/>);</highlight></codeline>
+<codeline lineno="644"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_link(<sp/><ref refid="main_8c_14dfd0657ff868fa02113bcd3335acff1" kindref="member">Olsr_node_count_obj</ref>,<sp/>0<sp/>);</highlight></codeline>
+<codeline lineno="645"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_flags_on(<sp/><ref refid="main_8c_14dfd0657ff868fa02113bcd3335acff1" kindref="member">Olsr_node_count_obj</ref>,<sp/>S3D_OF_VISIBLE<sp/>);</highlight></codeline>
+<codeline lineno="646"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_scale(<sp/><ref refid="main_8c_14dfd0657ff868fa02113bcd3335acff1" kindref="member">Olsr_node_count_obj</ref>,<sp/>0.2<sp/>);</highlight></codeline>
+<codeline lineno="647"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_translate(<sp/><ref refid="main_8c_14dfd0657ff868fa02113bcd3335acff1" kindref="member">Olsr_node_count_obj</ref>,<sp/><ref refid="main_8c_16f68bad9075598ca8ede1827c6832376" kindref="member">Left</ref>*3.0,<sp/>-<ref refid="main_8c_1f23a6ad2da4511ef430c4f522ae9f4cc" kindref="member">Bottom</ref>*3.0-0.2,<sp/>-3.0<sp/>);</highlight></codeline>
+<codeline lineno="648"><highlight class="normal"></highlight></codeline>
+<codeline lineno="649"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_158acad60c78b63554c696703227d0b7b" kindref="member">Last_olsr_node_count</ref><sp/>=<sp/><ref refid="main_8c_186c048bc4aaab319f4d61f7c0e1f056f" kindref="member">Olsr_node_count</ref>;</highlight></codeline>
+<codeline lineno="650"><highlight class="normal"></highlight></codeline>
+<codeline lineno="651"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="652"><highlight class="normal"></highlight></codeline>
+<codeline lineno="653"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>read<sp/>data<sp/>from<sp/>socket<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="654"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_15bcc20f84efa7bd4aafc56a629f2eff3" kindref="member">Net_read_count</ref><sp/>=<sp/>0;</highlight></codeline>
+<codeline lineno="655"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(<sp/>(<sp/>net_result<sp/>=<sp/><ref refid="net_8c_1b8a768eba717722a3d860c01f69fbbc9" kindref="member">net_main</ref>()<sp/>)<sp/>!=<sp/>0<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="656"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>net_result<sp/>==<sp/>-1<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="657"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_quit();</highlight></codeline>
+<codeline lineno="658"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
+<codeline lineno="659"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="660"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="661"><highlight class="normal"></highlight></codeline>
+<codeline lineno="662"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="main_8c_14370348160930ca94ac7a5d1a6fc5172" kindref="member">RotateSwitch</ref>)<sp/>{</highlight></codeline>
+<codeline lineno="663"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_1ea9e1c287e0c505c2075a0b936dc3404" kindref="member">Zp_rotate</ref><sp/>=<sp/>(<ref refid="main_8c_1ea9e1c287e0c505c2075a0b936dc3404" kindref="member">Zp_rotate</ref>+<ref refid="main_8c_1cfe4f8990043eade6e82cab3f101b12e" kindref="member">RotateSpeed</ref>)%360;</highlight></codeline>
+<codeline lineno="664"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_rotate(<ref refid="main_8c_1e113d40abb6f4dd73e4b1253917a1942" kindref="member">ZeroPoint</ref>,0,<ref refid="main_8c_1ea9e1c287e0c505c2075a0b936dc3404" kindref="member">Zp_rotate</ref>,0);</highlight></codeline>
+<codeline lineno="665"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="666"><highlight class="normal"></highlight></codeline>
+<codeline lineno="667"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nanosleep(<sp/>&amp;<ref refid="main_8c_1ea8eb9210d53cd6c1b34e6e7f80a243c" kindref="member">sleep_time</ref>,<sp/>NULL<sp/>);</highlight></codeline>
+<codeline lineno="668"><highlight class="normal"></highlight></codeline>
+<codeline lineno="669"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
+<codeline lineno="670"><highlight class="normal"></highlight></codeline>
+<codeline lineno="671"><highlight class="normal">}</highlight></codeline>
+<codeline lineno="672"><highlight class="normal"></highlight></codeline>
+<codeline lineno="673"><highlight class="normal"></highlight></codeline>
+<codeline lineno="674"><highlight class="normal"></highlight></codeline>
+<codeline lineno="675" refid="main_8c_18c528baf37154d347366083f0f816846" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="main_8c_18c528baf37154d347366083f0f816846" kindref="member">stop</ref>()<sp/>{</highlight></codeline>
+<codeline lineno="676"><highlight class="normal"></highlight></codeline>
+<codeline lineno="677"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_quit();</highlight></codeline>
+<codeline lineno="678"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="net_8c_198aebc7a8515c76551eb15ecd465b923" kindref="member">net_quit</ref>();</highlight></codeline>
+<codeline lineno="679"><highlight class="normal"></highlight></codeline>
+<codeline lineno="680"><highlight class="normal">}</highlight></codeline>
+<codeline lineno="681"><highlight class="normal"></highlight></codeline>
+<codeline lineno="682"><highlight class="normal"></highlight></codeline>
+<codeline lineno="683"><highlight class="normal"></highlight></codeline>
+<codeline lineno="684"><highlight class="normal"></highlight><highlight class="comment">/***</highlight></codeline>
+<codeline lineno="685"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="686"><highlight class="comment"><sp/>*<sp/>eventhandler<sp/>when<sp/>key<sp/>pressed</highlight></codeline>
+<codeline lineno="687"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="688"><highlight class="comment"><sp/>***/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="689"><highlight class="normal"></highlight></codeline>
+<codeline lineno="690" refid="main_8c_12f5982986645c1e7a202d72bc5e633eb" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="main_8c_12f5982986645c1e7a202d72bc5e633eb" kindref="member">keypress</ref>(</highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/>s3d_evt<sp/>*event)<sp/>{</highlight></codeline>
+<codeline lineno="691"><highlight class="normal"></highlight></codeline>
+<codeline lineno="692"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>key;</highlight></codeline>
+<codeline lineno="693"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>key=*((</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">short</highlight><highlight class="normal"><sp/>*)event-&gt;buf);</highlight></codeline>
+<codeline lineno="694"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal">(key)<sp/>{</highlight></codeline>
+<codeline lineno="695"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>S3DK_ESCAPE:<sp/></highlight><highlight class="comment">/*<sp/>esc<sp/>-&gt;<sp/>close<sp/>olsr<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="696"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_18c528baf37154d347366083f0f816846" kindref="member">stop</ref>();</highlight></codeline>
+<codeline lineno="697"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
+<codeline lineno="698"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>15:<sp/></highlight><highlight class="comment">/*<sp/>strg<sp/>+<sp/>o<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="699"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="olsrs3d_8h_1a015f713ca02d8b76a52175b4128d3e8" kindref="member">lst_out</ref>();<sp/></highlight><highlight class="comment">/*<sp/>output<sp/>ob2ip<sp/>list<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="700"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
+<codeline lineno="701"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/></highlight><highlight class="charliteral">&apos;c&apos;</highlight><highlight class="normal">:<sp/></highlight><highlight class="comment">/*<sp/>c<sp/>-&gt;<sp/>color<sp/>on/off<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="702"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="main_8c_1aaca6648d8e9266d2fbeb21a6a4f4745" kindref="member">ColorSwitch</ref>)<sp/><ref refid="main_8c_1aaca6648d8e9266d2fbeb21a6a4f4745" kindref="member">ColorSwitch</ref><sp/>=<sp/>0;</highlight></codeline>
+<codeline lineno="703"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/><ref refid="main_8c_1aaca6648d8e9266d2fbeb21a6a4f4745" kindref="member">ColorSwitch</ref><sp/>=<sp/>1;</highlight></codeline>
+<codeline lineno="704"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
+<codeline lineno="705"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/></highlight><highlight class="charliteral">&apos;r&apos;</highlight><highlight class="normal">:<sp/></highlight><highlight class="comment">/*<sp/>r<sp/>-&gt;<sp/>rotate<sp/>start/stop*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="706"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="main_8c_14370348160930ca94ac7a5d1a6fc5172" kindref="member">RotateSwitch</ref>)<sp/><ref refid="main_8c_14370348160930ca94ac7a5d1a6fc5172" kindref="member">RotateSwitch</ref><sp/>=<sp/>0;</highlight></codeline>
+<codeline lineno="707"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/><ref refid="main_8c_14370348160930ca94ac7a5d1a6fc5172" kindref="member">RotateSwitch</ref><sp/>=<sp/>1;</highlight></codeline>
+<codeline lineno="708"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
+<codeline lineno="709"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/></highlight><highlight class="charliteral">&apos;+&apos;</highlight><highlight class="normal">:<sp/></highlight><highlight class="comment">/*<sp/>+<sp/>-&gt;<sp/>rotate<sp/>speed<sp/>increase*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="710"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="main_8c_14370348160930ca94ac7a5d1a6fc5172" kindref="member">RotateSwitch</ref><sp/>&amp;&amp;<sp/><ref refid="main_8c_1cfe4f8990043eade6e82cab3f101b12e" kindref="member">RotateSpeed</ref><sp/>&lt;<sp/>10)</highlight></codeline>
+<codeline lineno="711"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_1cfe4f8990043eade6e82cab3f101b12e" kindref="member">RotateSpeed</ref>++;</highlight></codeline>
+<codeline lineno="712"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
+<codeline lineno="713"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/></highlight><highlight class="charliteral">&apos;-&apos;</highlight><highlight class="normal">:<sp/></highlight><highlight class="comment">/*<sp/>-<sp/>-&gt;<sp/>rotate<sp/>speed<sp/>decrease*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="714"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="main_8c_14370348160930ca94ac7a5d1a6fc5172" kindref="member">RotateSwitch</ref><sp/>&amp;&amp;<sp/><ref refid="main_8c_1cfe4f8990043eade6e82cab3f101b12e" kindref="member">RotateSpeed</ref><sp/>&gt;<sp/>1)</highlight></codeline>
+<codeline lineno="715"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_1cfe4f8990043eade6e82cab3f101b12e" kindref="member">RotateSpeed</ref>--;</highlight></codeline>
+<codeline lineno="716"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
+<codeline lineno="717"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>16:<sp/></highlight><highlight class="comment">/*<sp/>strg<sp/>+<sp/>p<sp/>-&gt;<sp/>reset<sp/>nodes<sp/>(<sp/>zeroPoint<sp/>to<sp/>0,0,0<sp/>)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="718"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_translate(<ref refid="main_8c_1e113d40abb6f4dd73e4b1253917a1942" kindref="member">ZeroPoint</ref>,0.0,0.0,0.0);</highlight></codeline>
+<codeline lineno="719"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_14942e67624e2b40a2a949f5cc658ccce" kindref="member">ZeroPosition</ref>[0]<sp/>=<sp/><ref refid="main_8c_14942e67624e2b40a2a949f5cc658ccce" kindref="member">ZeroPosition</ref>[1]<sp/>=<sp/><ref refid="main_8c_14942e67624e2b40a2a949f5cc658ccce" kindref="member">ZeroPosition</ref>[2]<sp/>=<sp/>0.0;</highlight></codeline>
+<codeline lineno="720"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
+<codeline lineno="721"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>S3DK_UP:<sp/></highlight><highlight class="comment">/*<sp/>arrow<sp/>up<sp/>-&gt;<sp/>move<sp/>nodes<sp/>up<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="722"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_14942e67624e2b40a2a949f5cc658ccce" kindref="member">ZeroPosition</ref>[1]++;</highlight></codeline>
+<codeline lineno="723"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_translate(<ref refid="main_8c_1e113d40abb6f4dd73e4b1253917a1942" kindref="member">ZeroPoint</ref>,<ref refid="main_8c_14942e67624e2b40a2a949f5cc658ccce" kindref="member">ZeroPosition</ref>[0],<ref refid="main_8c_14942e67624e2b40a2a949f5cc658ccce" kindref="member">ZeroPosition</ref>[1],<ref refid="main_8c_14942e67624e2b40a2a949f5cc658ccce" kindref="member">ZeroPosition</ref>[2]);</highlight></codeline>
+<codeline lineno="724"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
+<codeline lineno="725"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>S3DK_DOWN:<sp/></highlight><highlight class="comment">/*<sp/>arrow<sp/>down<sp/>-&gt;<sp/>move<sp/>nodes<sp/>down<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="726"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_14942e67624e2b40a2a949f5cc658ccce" kindref="member">ZeroPosition</ref>[1]--;</highlight></codeline>
+<codeline lineno="727"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_translate(<ref refid="main_8c_1e113d40abb6f4dd73e4b1253917a1942" kindref="member">ZeroPoint</ref>,<ref refid="main_8c_14942e67624e2b40a2a949f5cc658ccce" kindref="member">ZeroPosition</ref>[0],<ref refid="main_8c_14942e67624e2b40a2a949f5cc658ccce" kindref="member">ZeroPosition</ref>[1],<ref refid="main_8c_14942e67624e2b40a2a949f5cc658ccce" kindref="member">ZeroPosition</ref>[2]);</highlight></codeline>
+<codeline lineno="728"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
+<codeline lineno="729"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>S3DK_PAGEUP:<sp/></highlight><highlight class="comment">/*<sp/>page<sp/>up<sp/>-&gt;<sp/>change<sp/>factor<sp/>in<sp/>calc_olsr_node_mov<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="730"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="main_8c_198d8a7901c60f18d6bf9b35998147831" kindref="member">Factor</ref><sp/>&lt;<sp/>0.9)</highlight></codeline>
+<codeline lineno="731"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_198d8a7901c60f18d6bf9b35998147831" kindref="member">Factor</ref><sp/>+=<sp/>0.1;</highlight></codeline>
+<codeline lineno="732"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
+<codeline lineno="733"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>S3DK_PAGEDOWN:<sp/></highlight><highlight class="comment">/*<sp/>page<sp/>down<sp/>-&gt;<sp/>change<sp/>factor<sp/>in<sp/>calc_olsr_node_mov<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="734"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="main_8c_198d8a7901c60f18d6bf9b35998147831" kindref="member">Factor</ref><sp/>&gt;<sp/>0.3)</highlight></codeline>
+<codeline lineno="735"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_198d8a7901c60f18d6bf9b35998147831" kindref="member">Factor</ref><sp/>-=<sp/>0.1;</highlight></codeline>
+<codeline lineno="736"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
+<codeline lineno="737"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="738"><highlight class="normal">}</highlight></codeline>
+<codeline lineno="739"><highlight class="normal"></highlight></codeline>
+<codeline lineno="740"><highlight class="normal"></highlight><highlight class="comment">/***</highlight></codeline>
+<codeline lineno="741"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="742"><highlight class="comment"><sp/>*<sp/>eventhandler<sp/>when<sp/>object<sp/>clicked</highlight></codeline>
+<codeline lineno="743"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="744"><highlight class="comment"><sp/>***/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="745"><highlight class="normal"></highlight></codeline>
+<codeline lineno="746" refid="main_8c_1ddbd46dad32b89cec68daa03a08f3582" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="main_8c_1ddbd46dad32b89cec68daa03a08f3582" kindref="member">object_click</ref>(</highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/>s3d_evt<sp/>*evt)</highlight></codeline>
+<codeline lineno="747"><highlight class="normal">{</highlight></codeline>
+<codeline lineno="748"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>oid;</highlight></codeline>
+<codeline lineno="749"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>float<sp/>distance,tmp_vector[3];<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="750"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>ip_str[50];</highlight></codeline>
+<codeline lineno="751"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structolsr__node" kindref="compound">olsr_node</ref><sp/>*<ref refid="structolsr__node" kindref="compound">olsr_node</ref>;</highlight></codeline>
+<codeline lineno="752"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>oid=(int)*((</highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>*)evt-&gt;buf);</highlight></codeline>
+<codeline lineno="753"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>olsr_node<sp/>=<sp/>*<ref refid="olsrs3d_8h_1ef8aff26d4e096ef0880c204c13309f0" kindref="member">lst_search</ref>(oid);</highlight></codeline>
+<codeline lineno="754"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>printf(&quot;obj2ip:<sp/>search<sp/>return<sp/>%s\n&quot;,olsr_node-&gt;ip);<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="755"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*</highlight></codeline>
+<codeline lineno="756"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>distance<sp/>=<sp/>dirt(CamPosition[0],olsr_node-&gt;pos_vec,tmp_vector);</highlight></codeline>
+<codeline lineno="757"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>mov_add(ZeroPosition,tmp_vector,1.0);</highlight></codeline>
+<codeline lineno="758"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_translate(ZeroPoint,ZeroPosition[0]<sp/>*<sp/>-1,ZeroPosition[1]<sp/>*<sp/>-1,ZeroPosition[2]<sp/>*<sp/>-1);</highlight></codeline>
+<codeline lineno="759"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="760"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/><ref refid="main_8c_1bc4292eef79532d125b616a9e0ec8fa0" kindref="member">Olsr_ip_label_obj</ref><sp/>!=<sp/>-1<sp/>)<sp/>s3d_del_object(<sp/><ref refid="main_8c_1bc4292eef79532d125b616a9e0ec8fa0" kindref="member">Olsr_ip_label_obj</ref><sp/>);</highlight></codeline>
+<codeline lineno="761"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*Olsr_ip_label_obj<sp/>=<sp/>s3d_clone(olsr_node-&gt;desc_id);*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="762"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>snprintf(<sp/>ip_str,<sp/>50,<sp/></highlight><highlight class="stringliteral">&quot;ip:<sp/>%s&quot;</highlight><highlight class="normal">,<sp/>olsr_node-&gt;<ref refid="structolsr__node_159690d75faff5c149faecacb4f4d2a57" kindref="member">ip</ref><sp/>);</highlight></codeline>
+<codeline lineno="763"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_1bc4292eef79532d125b616a9e0ec8fa0" kindref="member">Olsr_ip_label_obj</ref><sp/>=<sp/>s3d_draw_string(<sp/>ip_str,<sp/>NULL<sp/>);</highlight></codeline>
+<codeline lineno="764"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_link(<sp/><ref refid="main_8c_1bc4292eef79532d125b616a9e0ec8fa0" kindref="member">Olsr_ip_label_obj</ref>,<sp/>0<sp/>);</highlight></codeline>
+<codeline lineno="765"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_flags_on(<sp/><ref refid="main_8c_1bc4292eef79532d125b616a9e0ec8fa0" kindref="member">Olsr_ip_label_obj</ref>,<sp/>S3D_OF_VISIBLE<sp/>);</highlight></codeline>
+<codeline lineno="766"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_scale(<sp/><ref refid="main_8c_1bc4292eef79532d125b616a9e0ec8fa0" kindref="member">Olsr_ip_label_obj</ref>,<sp/>0.2<sp/>);</highlight></codeline>
+<codeline lineno="767"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_translate(<sp/><ref refid="main_8c_1bc4292eef79532d125b616a9e0ec8fa0" kindref="member">Olsr_ip_label_obj</ref>,<sp/><ref refid="main_8c_16f68bad9075598ca8ede1827c6832376" kindref="member">Left</ref>*3.0,<sp/>-<ref refid="main_8c_1f23a6ad2da4511ef430c4f522ae9f4cc" kindref="member">Bottom</ref>*3.0-0.6,<sp/>-3.0<sp/>);</highlight></codeline>
+<codeline lineno="768"><highlight class="normal">}</highlight></codeline>
+<codeline lineno="769"><highlight class="normal"></highlight></codeline>
+<codeline lineno="770"><highlight class="normal"></highlight><highlight class="comment">/***</highlight></codeline>
+<codeline lineno="771"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="772"><highlight class="comment"><sp/>*<sp/>eventhandler<sp/>when<sp/>object<sp/>change<sp/>by<sp/>user</highlight></codeline>
+<codeline lineno="773"><highlight class="comment"><sp/>*<sp/>such<sp/>as<sp/>Cam</highlight></codeline>
+<codeline lineno="774"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="775"><highlight class="comment"><sp/>***/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="776"><highlight class="normal"></highlight></codeline>
+<codeline lineno="777" refid="main_8c_1b7f2ab10a4f7d5ef94d5205fc6147cc4" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="main_8c_1b7f2ab10a4f7d5ef94d5205fc6147cc4" kindref="member">object_info</ref>(</highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/>s3d_evt<sp/>*hrmz)</highlight></codeline>
+<codeline lineno="778"><highlight class="normal">{</highlight></codeline>
+<codeline lineno="779"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal">s3d_obj_info<sp/>*inf;</highlight></codeline>
+<codeline lineno="780"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>inf=(</highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal">s3d_obj_info<sp/>*)hrmz-&gt;buf;</highlight></codeline>
+<codeline lineno="781"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>if<sp/>(inf-&gt;object==0)</highlight></codeline>
+<codeline lineno="782"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
+<codeline lineno="783"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_15d58294b80563f797d1a14d1d739f52b" kindref="member">CamPosition</ref>[0][0]<sp/>=<sp/>inf-&gt;trans_x;</highlight></codeline>
+<codeline lineno="784"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_15d58294b80563f797d1a14d1d739f52b" kindref="member">CamPosition</ref>[0][1]<sp/>=<sp/>inf-&gt;trans_y;</highlight></codeline>
+<codeline lineno="785"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_15d58294b80563f797d1a14d1d739f52b" kindref="member">CamPosition</ref>[0][2]<sp/>=<sp/>inf-&gt;trans_z;</highlight></codeline>
+<codeline lineno="786"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_15d58294b80563f797d1a14d1d739f52b" kindref="member">CamPosition</ref>[1][0]<sp/>=<sp/>inf-&gt;rot_x;</highlight></codeline>
+<codeline lineno="787"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_15d58294b80563f797d1a14d1d739f52b" kindref="member">CamPosition</ref>[1][1]<sp/>=<sp/>inf-&gt;rot_y;</highlight></codeline>
+<codeline lineno="788"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_15d58294b80563f797d1a14d1d739f52b" kindref="member">CamPosition</ref>[1][2]<sp/>=<sp/>inf-&gt;rot_z;</highlight></codeline>
+<codeline lineno="789"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_1fb33da16fedfac392508c8ca439aca5d" kindref="member">Asp</ref>=inf-&gt;scale;</highlight></codeline>
+<codeline lineno="790"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="main_8c_1fb33da16fedfac392508c8ca439aca5d" kindref="member">Asp</ref>&gt;1.0)<sp/></highlight><highlight class="comment">/*<sp/>wide<sp/>screen<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="791"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
+<codeline lineno="792"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_1f23a6ad2da4511ef430c4f522ae9f4cc" kindref="member">Bottom</ref>=-1.0;</highlight></codeline>
+<codeline lineno="793"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_16f68bad9075598ca8ede1827c6832376" kindref="member">Left</ref>=-<ref refid="main_8c_1fb33da16fedfac392508c8ca439aca5d" kindref="member">Asp</ref>;</highlight></codeline>
+<codeline lineno="794"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{<sp/><sp/></highlight><highlight class="comment">/*<sp/>high<sp/>screen<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="795"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_1f23a6ad2da4511ef430c4f522ae9f4cc" kindref="member">Bottom</ref>=(-1.0/<ref refid="main_8c_1fb33da16fedfac392508c8ca439aca5d" kindref="member">Asp</ref>);</highlight></codeline>
+<codeline lineno="796"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_16f68bad9075598ca8ede1827c6832376" kindref="member">Left</ref>=-1.0;</highlight></codeline>
+<codeline lineno="797"><highlight class="normal"></highlight></codeline>
+<codeline lineno="798"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="799"><highlight class="normal"></highlight></codeline>
+<codeline lineno="800"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="801"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>printf(&quot;%f<sp/>%f<sp/>%f\n&quot;,inf-&gt;trans_x,inf-&gt;trans_y,inf-&gt;trans_z);<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="802"><highlight class="normal">}</highlight></codeline>
+<codeline lineno="803"><highlight class="normal"></highlight></codeline>
+<codeline lineno="804" refid="main_8c_10ddf1224851353fc92bfbff6f499fa97" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="main_8c_10ddf1224851353fc92bfbff6f499fa97" kindref="member">main</ref>(<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>argc,<sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*argv[]<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="805"><highlight class="normal"></highlight></codeline>
+<codeline lineno="806"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>optchar;</highlight></codeline>
+<codeline lineno="807"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>strncpy(<sp/><ref refid="main_8c_19034a20840ce47fbec531d2b4a4a9f21" kindref="member">Olsr_host</ref>,<sp/></highlight><highlight class="stringliteral">&quot;127.0.0.1&quot;</highlight><highlight class="normal">,<sp/>256<sp/>);</highlight></codeline>
+<codeline lineno="808"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="olsrs3d_8h_100f1cd38b187535569d0354f2506fb74" kindref="member">lbuf</ref>[0]<sp/>=<sp/></highlight><highlight class="charliteral">&apos;\0&apos;</highlight><highlight class="normal">;<sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>init<sp/>lbuf<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="809"><highlight class="normal"></highlight></codeline>
+<codeline lineno="810"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(<sp/>(<sp/>optchar<sp/>=<sp/>getopt<sp/>(<sp/>argc,<sp/>argv,<sp/></highlight><highlight class="stringliteral">&quot;dhH:&quot;</highlight><highlight class="normal"><sp/>)<sp/>)<sp/>!=<sp/>-1<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="811"><highlight class="normal"></highlight></codeline>
+<codeline lineno="812"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(<sp/>optchar<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="813"><highlight class="normal"></highlight></codeline>
+<codeline lineno="814"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/></highlight><highlight class="charliteral">&apos;d&apos;</highlight><highlight class="normal">:</highlight></codeline>
+<codeline lineno="815"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_1923774364cedbc16baa0bc05e9be136c" kindref="member">Debug</ref><sp/>=<sp/>1;</highlight></codeline>
+<codeline lineno="816"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
+<codeline lineno="817"><highlight class="normal"></highlight></codeline>
+<codeline lineno="818"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/></highlight><highlight class="charliteral">&apos;H&apos;</highlight><highlight class="normal">:</highlight></codeline>
+<codeline lineno="819"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>strncpy(<sp/><ref refid="main_8c_19034a20840ce47fbec531d2b4a4a9f21" kindref="member">Olsr_host</ref>,<sp/>optarg,<sp/>256<sp/>);</highlight></codeline>
+<codeline lineno="820"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
+<codeline lineno="821"><highlight class="normal"></highlight></codeline>
+<codeline lineno="822"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/></highlight><highlight class="charliteral">&apos;h&apos;</highlight><highlight class="normal">:</highlight></codeline>
+<codeline lineno="823"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
+<codeline lineno="824"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_1a1187b70998f73cdb598833d6afaa30a" kindref="member">print_usage</ref>();</highlight></codeline>
+<codeline lineno="825"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(0);</highlight></codeline>
+<codeline lineno="826"><highlight class="normal"></highlight></codeline>
+<codeline lineno="827"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="828"><highlight class="normal"></highlight></codeline>
+<codeline lineno="829"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="830"><highlight class="normal"></highlight></codeline>
+<codeline lineno="831"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/><ref refid="main_8c_1923774364cedbc16baa0bc05e9be136c" kindref="member">Debug</ref><sp/>)<sp/>printf(<sp/></highlight><highlight class="stringliteral">&quot;debug<sp/>mode<sp/>enabled<sp/>...\n&quot;</highlight><highlight class="normal"><sp/>);</highlight></codeline>
+<codeline lineno="832"><highlight class="normal"></highlight></codeline>
+<codeline lineno="833"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>initialize<sp/>obj2ip<sp/>linked<sp/>list<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="834"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="olsrs3d_8h_1edfb2ae44af543946842187ced1cd47e" kindref="member">lst_initialize</ref>();</highlight></codeline>
+<codeline lineno="835"><highlight class="normal"></highlight></codeline>
+<codeline lineno="836"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>delete<sp/>olsrs3d<sp/>options<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="837"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(<sp/>(<sp/>optind<sp/>&lt;<sp/>argc<sp/>)<sp/>&amp;&amp;<sp/>(<sp/>argv[optind][0]<sp/>!=<sp/></highlight><highlight class="charliteral">&apos;-&apos;</highlight><highlight class="normal"><sp/>)<sp/>)<sp/>optind++;<sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>optind<sp/>may<sp/>point<sp/>to<sp/>ip<sp/>addr<sp/>of<sp/>&apos;-H&apos;<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="838"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>optind--;</highlight></codeline>
+<codeline lineno="839"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>argv[optind]<sp/>=<sp/>argv[0];<sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>save<sp/>program<sp/>path<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="840"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>argc<sp/>-=<sp/>optind;<sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>jump<sp/>over<sp/>olsrs3d<sp/>options<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="841"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>argv<sp/>+=<sp/>optind;</highlight></codeline>
+<codeline lineno="842"><highlight class="normal"></highlight></codeline>
+<codeline lineno="843"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>set<sp/>extern<sp/>int<sp/>optind<sp/>=<sp/>0<sp/>for<sp/>parse_args<sp/>in<sp/>io.c<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="844"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>optind<sp/>=<sp/>0;</highlight></codeline>
+<codeline lineno="845"><highlight class="normal"></highlight></codeline>
+<codeline lineno="846"><highlight class="normal"></highlight></codeline>
+<codeline lineno="847"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="net_8c_163c933342efd8cac7f272b92d8acab05" kindref="member">net_init</ref>(<ref refid="main_8c_19034a20840ce47fbec531d2b4a4a9f21" kindref="member">Olsr_host</ref>))</highlight></codeline>
+<codeline lineno="848"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
+<codeline lineno="849"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!s3d_init(&amp;argc,&amp;argv,</highlight><highlight class="stringliteral">&quot;olsrs3d&quot;</highlight><highlight class="normal">))</highlight></codeline>
+<codeline lineno="850"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
+<codeline lineno="851"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_set_callback(S3D_EVENT_OBJ_INFO,<ref refid="main_8c_1b7f2ab10a4f7d5ef94d5205fc6147cc4" kindref="member">object_info</ref>);</highlight></codeline>
+<codeline lineno="852"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_set_callback(S3D_EVENT_OBJ_CLICK,<ref refid="main_8c_1ddbd46dad32b89cec68daa03a08f3582" kindref="member">object_click</ref>);</highlight></codeline>
+<codeline lineno="853"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_set_callback(S3D_EVENT_KEY,<ref refid="main_8c_12f5982986645c1e7a202d72bc5e633eb" kindref="member">keypress</ref>);</highlight></codeline>
+<codeline lineno="854"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_set_callback(S3D_EVENT_QUIT,<ref refid="main_8c_18c528baf37154d347366083f0f816846" kindref="member">stop</ref>);</highlight></codeline>
+<codeline lineno="855"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(s3d_select_font(</highlight><highlight class="stringliteral">&quot;vera&quot;</highlight><highlight class="normal">))</highlight></codeline>
+<codeline lineno="856"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(</highlight><highlight class="stringliteral">&quot;font<sp/>not<sp/>found\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
+<codeline lineno="857"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_15eba8148fe9257c34665ed364b595fdb" kindref="member">Olsr_node_obj</ref><sp/>=<sp/>s3d_import_3ds_file(<sp/></highlight><highlight class="stringliteral">&quot;objs/accesspoint.3ds&quot;</highlight><highlight class="normal"><sp/>);</highlight></codeline>
+<codeline lineno="858"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_1b02228665cef19331d409b0d8a831531" kindref="member">Olsr_node_inet_obj</ref><sp/>=<sp/>s3d_import_3ds_file(<sp/></highlight><highlight class="stringliteral">&quot;objs/accesspoint_inet.3ds&quot;</highlight><highlight class="normal"><sp/>);</highlight></codeline>
+<codeline lineno="859"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_1c03c9b38147e4231238c44f4b5fbdff7" kindref="member">Olsr_node_hna_net</ref><sp/>=<sp/>s3d_import_3ds_file(<sp/></highlight><highlight class="stringliteral">&quot;objs/internet.3ds&quot;</highlight><highlight class="normal"><sp/>);</highlight></codeline>
+<codeline lineno="860"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_1e113d40abb6f4dd73e4b1253917a1942" kindref="member">ZeroPoint</ref><sp/>=<sp/>s3d_new_object();</highlight></codeline>
+<codeline lineno="861"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_mainloop(<ref refid="main_8c_1896df4ffe3f986ad843e4d191cd712b3" kindref="member">mainloop</ref>);</highlight></codeline>
+<codeline lineno="862"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_quit();</highlight></codeline>
+<codeline lineno="863"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="net_8c_198aebc7a8515c76551eb15ecd465b923" kindref="member">net_quit</ref>();</highlight></codeline>
+<codeline lineno="864"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="865"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="866"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">(0);</highlight></codeline>
+<codeline lineno="867"><highlight class="normal">}</highlight></codeline>
+<codeline lineno="868"><highlight class="normal"></highlight></codeline>
+    </programlisting>
+    <location file="/home/bigm/s3d/apps/olsrs3d/main.c"/>
+  </compounddef>
+</doxygen>

Added: trunk/apps/olsrs3d/doxygen/xml/net_8c.xml
===================================================================
--- trunk/apps/olsrs3d/doxygen/xml/net_8c.xml	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/xml/net_8c.xml	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,336 @@
+<?xml version='1.0' encoding='iso-8859-1' standalone='no'?>
+<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.4.6">
+  <compounddef id="net_8c" kind="file">
+    <compoundname>net.c</compoundname>
+    <includes local="no">stdio.h</includes>
+    <includes local="no">stdlib.h</includes>
+    <includes local="no">unistd.h</includes>
+    <includes local="no">errno.h</includes>
+    <includes local="no">string.h</includes>
+    <includes local="no">netdb.h</includes>
+    <includes local="no">sys/types.h</includes>
+    <includes local="no">netinet/in.h</includes>
+    <includes local="no">sys/socket.h</includes>
+    <includes local="no">fcntl.h</includes>
+    <includes refid="olsrs3d_8h" local="yes">olsrs3d.h</includes>
+    <incdepgraph>
+      <node id="19">
+        <label>netinet/in.h</label>
+      </node>
+      <node id="13">
+        <label>stdlib.h</label>
+      </node>
+      <node id="15">
+        <label>errno.h</label>
+      </node>
+      <node id="21">
+        <label>fcntl.h</label>
+      </node>
+      <node id="17">
+        <label>netdb.h</label>
+      </node>
+      <node id="22">
+        <label>olsrs3d.h</label>
+        <link refid="olsrs3d_8h"/>
+      </node>
+      <node id="18">
+        <label>sys/types.h</label>
+      </node>
+      <node id="16">
+        <label>string.h</label>
+      </node>
+      <node id="14">
+        <label>unistd.h</label>
+      </node>
+      <node id="20">
+        <label>sys/socket.h</label>
+      </node>
+      <node id="11">
+        <label>s3d/apps/olsrs3d/net.c</label>
+        <link refid="net.c"/>
+        <childnode refid="12" relation="include">
+        </childnode>
+        <childnode refid="13" relation="include">
+        </childnode>
+        <childnode refid="14" relation="include">
+        </childnode>
+        <childnode refid="15" relation="include">
+        </childnode>
+        <childnode refid="16" relation="include">
+        </childnode>
+        <childnode refid="17" relation="include">
+        </childnode>
+        <childnode refid="18" relation="include">
+        </childnode>
+        <childnode refid="19" relation="include">
+        </childnode>
+        <childnode refid="20" relation="include">
+        </childnode>
+        <childnode refid="21" relation="include">
+        </childnode>
+        <childnode refid="22" relation="include">
+        </childnode>
+      </node>
+      <node id="12">
+        <label>stdio.h</label>
+      </node>
+    </incdepgraph>
+      <sectiondef kind="define">
+      <memberdef kind="define" id="net_8c_1614217d263be1fb1a5f76e2ff7be19a2" prot="public" static="no">
+        <name>PORT</name>
+        <initializer>2004</initializer>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/net.c" line="40" bodyfile="/home/bigm/s3d/apps/olsrs3d/net.c" bodystart="40" bodyend="-1"/>
+        <referencedby refid="olsrs3d_8h_163c933342efd8cac7f272b92d8acab05" compoundref="net_8c" startline="45" endline="72">net_init</referencedby>
+      </memberdef>
+      </sectiondef>
+      <sectiondef kind="func">
+      <memberdef kind="function" id="net_8c_163c933342efd8cac7f272b92d8acab05" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
+        <type>int</type>
+        <definition>int net_init</definition>
+        <argsstring>(char *host)</argsstring>
+        <name>net_init</name>
+        <param>
+          <type>char *</type>
+          <declname>host</declname>
+        </param>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/net.c" line="46" bodyfile="/home/bigm/s3d/apps/olsrs3d/net.c" bodystart="45" bodyend="72"/>
+        <references refid="net_8c_1614217d263be1fb1a5f76e2ff7be19a2" compoundref="net_8c" startline="40">PORT</references>
+        <references refid="net_8c_1d2c8fb3df3a737e0685e902870a611d2" compoundref="net_8c" startline="44">sockfd</references>
+        <referencedby refid="main_8c_10ddf1224851353fc92bfbff6f499fa97" compoundref="main_8c" startline="804" endline="867">main</referencedby>
+      </memberdef>
+      <memberdef kind="function" id="net_8c_1b8a768eba717722a3d860c01f69fbbc9" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
+        <type>int</type>
+        <definition>int net_main</definition>
+        <argsstring>()</argsstring>
+        <name>net_main</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/net.c" line="74" bodyfile="/home/bigm/s3d/apps/olsrs3d/net.c" bodystart="74" bodyend="120"/>
+        <references refid="net_8c_1f39ed2161fb25f51aa61ffc038306f75" compoundref="net_8c" startline="41">buf</references>
+        <references refid="main_8c_1923774364cedbc16baa0bc05e9be136c" compoundref="main_8c" startline="41">Debug</references>
+        <references refid="olsrs3d_8h_100f1cd38b187535569d0354f2506fb74" compoundref="process_8c" startline="34">lbuf</references>
+        <references refid="olsrs3d_8h_116c16f9369be4a374a3e621f6d13bb16" compoundref="olsrs3d_8h" startline="30">MAXDATASIZE</references>
+        <references refid="olsrs3d_8h_1e310f74f793edeb882f0c2d8d8b50bb8" compoundref="olsrs3d_8h" startline="29">MAXLINESIZE</references>
+        <references refid="main_8c_15bcc20f84efa7bd4aafc56a629f2eff3" compoundref="main_8c" startline="52">Net_read_count</references>
+        <references refid="net_8c_124bdd92b6cf8d141a4a27d4882c6a905" compoundref="net_8c" startline="44">numbytes</references>
+        <references refid="olsrs3d_8h_16b4e9b6718b671f6330c2e501c60d3c1" compoundref="process_8c" startline="368" endline="487">process_main</references>
+        <references refid="net_8c_1d2c8fb3df3a737e0685e902870a611d2" compoundref="net_8c" startline="44">sockfd</references>
+        <referencedby refid="main_8c_1896df4ffe3f986ad843e4d191cd712b3" compoundref="main_8c" startline="624" endline="671">mainloop</referencedby>
+      </memberdef>
+      <memberdef kind="function" id="net_8c_198aebc7a8515c76551eb15ecd465b923" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
+        <type>int</type>
+        <definition>int net_quit</definition>
+        <argsstring>()</argsstring>
+        <name>net_quit</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/net.c" line="123" bodyfile="/home/bigm/s3d/apps/olsrs3d/net.c" bodystart="122" bodyend="127"/>
+        <references refid="net_8c_1d2c8fb3df3a737e0685e902870a611d2" compoundref="net_8c" startline="44">sockfd</references>
+        <referencedby refid="main_8c_10ddf1224851353fc92bfbff6f499fa97" compoundref="main_8c" startline="804" endline="867">main</referencedby>
+        <referencedby refid="main_8c_18c528baf37154d347366083f0f816846" compoundref="main_8c" startline="675" endline="680">stop</referencedby>
+      </memberdef>
+      </sectiondef>
+      <sectiondef kind="var">
+      <memberdef kind="variable" id="net_8c_1f39ed2161fb25f51aa61ffc038306f75" prot="public" static="no" mutable="no">
+        <type>char</type>
+        <definition>char buf[MAXDATASIZE]</definition>
+        <argsstring>[MAXDATASIZE]</argsstring>
+        <name>buf</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/net.c" line="41" bodyfile="/home/bigm/s3d/apps/olsrs3d/net.c" bodystart="41" bodyend="-1"/>
+        <referencedby refid="olsrs3d_8h_1b8a768eba717722a3d860c01f69fbbc9" compoundref="net_8c" startline="74" endline="120">net_main</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="net_8c_124bdd92b6cf8d141a4a27d4882c6a905" prot="public" static="no" mutable="no">
+        <type>int</type>
+        <definition>int numbytes</definition>
+        <argsstring></argsstring>
+        <name>numbytes</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/net.c" line="44" bodyfile="/home/bigm/s3d/apps/olsrs3d/net.c" bodystart="44" bodyend="-1"/>
+        <referencedby refid="olsrs3d_8h_1b8a768eba717722a3d860c01f69fbbc9" compoundref="net_8c" startline="74" endline="120">net_main</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="net_8c_1d2c8fb3df3a737e0685e902870a611d2" prot="public" static="no" mutable="no">
+        <type>int</type>
+        <definition>int sockfd</definition>
+        <argsstring></argsstring>
+        <name>sockfd</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/net.c" line="44" bodyfile="/home/bigm/s3d/apps/olsrs3d/net.c" bodystart="44" bodyend="-1"/>
+        <referencedby refid="olsrs3d_8h_163c933342efd8cac7f272b92d8acab05" compoundref="net_8c" startline="45" endline="72">net_init</referencedby>
+        <referencedby refid="olsrs3d_8h_1b8a768eba717722a3d860c01f69fbbc9" compoundref="net_8c" startline="74" endline="120">net_main</referencedby>
+        <referencedby refid="olsrs3d_8h_198aebc7a8515c76551eb15ecd465b923" compoundref="net_8c" startline="122" endline="127">net_quit</referencedby>
+      </memberdef>
+      </sectiondef>
+    <briefdescription>
+    </briefdescription>
+    <detaileddescription>
+    </detaileddescription>
+    <programlisting>
+<codeline lineno="1"><highlight class="comment">/*</highlight></codeline>
+<codeline lineno="2"><highlight class="comment"><sp/>*<sp/>net.c</highlight></codeline>
+<codeline lineno="3"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="4"><highlight class="comment"><sp/>*<sp/>Copyright<sp/>(C)<sp/>2004-2006<sp/>Simon<sp/>Wunderlich<sp/>&lt;dotslash at packetmixer.de&gt;</highlight></codeline>
+<codeline lineno="5"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Marek<sp/>Lindner<sp/>&lt;lindner_marek at yahoo.de&gt;</highlight></codeline>
+<codeline lineno="6"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Andreas<sp/>Langer<sp/>&lt;andreas_lbg at gmx.de&gt;</highlight></codeline>
+<codeline lineno="7"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="8"><highlight class="comment"><sp/>*<sp/>This<sp/>file<sp/>is<sp/>part<sp/>of<sp/>olsrs3d,<sp/>an<sp/>olsr<sp/>topology<sp/>visualizer<sp/>for<sp/>s3d.</highlight></codeline>
+<codeline lineno="9"><highlight class="comment"><sp/>*<sp/>See<sp/>http://s3d.berlios.de/<sp/>for<sp/>more<sp/>updates.</highlight></codeline>
+<codeline lineno="10"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="11"><highlight class="comment"><sp/>*<sp/>olsrs3d<sp/>is<sp/>free<sp/>software;<sp/>you<sp/>can<sp/>redistribute<sp/>it<sp/>and/or<sp/>modify</highlight></codeline>
+<codeline lineno="12"><highlight class="comment"><sp/>*<sp/>it<sp/>under<sp/>the<sp/>terms<sp/>of<sp/>the<sp/>GNU<sp/>General<sp/>Public<sp/>License<sp/>as<sp/>published<sp/>by</highlight></codeline>
+<codeline lineno="13"><highlight class="comment"><sp/>*<sp/>the<sp/>Free<sp/>Software<sp/>Foundation;<sp/>either<sp/>version<sp/>2<sp/>of<sp/>the<sp/>License,<sp/>or</highlight></codeline>
+<codeline lineno="14"><highlight class="comment"><sp/>*<sp/>(at<sp/>your<sp/>option)<sp/>any<sp/>later<sp/>version.</highlight></codeline>
+<codeline lineno="15"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="16"><highlight class="comment"><sp/>*<sp/>olsrs3d<sp/>is<sp/>distributed<sp/>in<sp/>the<sp/>hope<sp/>that<sp/>it<sp/>will<sp/>be<sp/>useful,</highlight></codeline>
+<codeline lineno="17"><highlight class="comment"><sp/>*<sp/>but<sp/>WITHOUT<sp/>ANY<sp/>WARRANTY;<sp/>without<sp/>even<sp/>the<sp/>implied<sp/>warranty<sp/>of</highlight></codeline>
+<codeline lineno="18"><highlight class="comment"><sp/>*<sp/>MERCHANTABILITY<sp/>or<sp/>FITNESS<sp/>FOR<sp/>A<sp/>PARTICULAR<sp/>PURPOSE.<sp/><sp/>See<sp/>the</highlight></codeline>
+<codeline lineno="19"><highlight class="comment"><sp/>*<sp/>GNU<sp/>General<sp/>Public<sp/>License<sp/>for<sp/>more<sp/>details.</highlight></codeline>
+<codeline lineno="20"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="21"><highlight class="comment"><sp/>*<sp/>You<sp/>should<sp/>have<sp/>received<sp/>a<sp/>copy<sp/>of<sp/>the<sp/>GNU<sp/>General<sp/>Public<sp/>License</highlight></codeline>
+<codeline lineno="22"><highlight class="comment"><sp/>*<sp/>along<sp/>with<sp/>s3d;<sp/>if<sp/>not,<sp/>write<sp/>to<sp/>the<sp/>Free<sp/>Software</highlight></codeline>
+<codeline lineno="23"><highlight class="comment"><sp/>*<sp/>Foundation,<sp/>Inc.,<sp/>51<sp/>Franklin<sp/>St,<sp/>Fifth<sp/>Floor,<sp/>Boston,<sp/>MA<sp/><sp/>02110-1301<sp/><sp/>USA</highlight></codeline>
+<codeline lineno="24"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="25"><highlight class="normal"></highlight></codeline>
+<codeline lineno="26"><highlight class="normal"></highlight></codeline>
+<codeline lineno="27"><highlight class="normal"></highlight></codeline>
+<codeline lineno="28"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;stdio.h&gt;</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="29"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;stdlib.h&gt;</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="30"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;unistd.h&gt;</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>close()<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="31"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;errno.h&gt;</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="32"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;string.h&gt;</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>strlen(),<sp/>memmove(),<sp/>strncpy(),<sp/>strncat()<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="33"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;netdb.h&gt;</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="34"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;sys/types.h&gt;</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="35"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;netinet/in.h&gt;</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="36"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;sys/socket.h&gt;</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="37"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;fcntl.h&gt;</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>fnctl()<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="38"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="olsrs3d_8h" kindref="compound">olsrs3d.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="39"><highlight class="normal"></highlight></codeline>
+<codeline lineno="40" refid="net_8c_1614217d263be1fb1a5f76e2ff7be19a2" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>PORT<sp/>2004<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>the<sp/>port<sp/>client<sp/>will<sp/>be<sp/>connecting<sp/>to<sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="41" refid="net_8c_1f39ed2161fb25f51aa61ffc038306f75" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="net_8c_1f39ed2161fb25f51aa61ffc038306f75" kindref="member">buf</ref>[<ref refid="olsrs3d_8h_116c16f9369be4a374a3e621f6d13bb16" kindref="member">MAXDATASIZE</ref>];</highlight></codeline>
+<codeline lineno="42"><highlight class="normal"></highlight></codeline>
+<codeline lineno="43"><highlight class="normal"></highlight></codeline>
+<codeline lineno="44" refid="net_8c_1d2c8fb3df3a737e0685e902870a611d2" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="net_8c_1d2c8fb3df3a737e0685e902870a611d2" kindref="member">sockfd</ref>,<sp/><ref refid="net_8c_124bdd92b6cf8d141a4a27d4882c6a905" kindref="member">numbytes</ref>;</highlight></codeline>
+<codeline lineno="45" refid="olsrs3d_8h_163c933342efd8cac7f272b92d8acab05" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="net_8c_163c933342efd8cac7f272b92d8acab05" kindref="member">net_init</ref>(</highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*host)</highlight></codeline>
+<codeline lineno="46"><highlight class="normal">{</highlight></codeline>
+<codeline lineno="47"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal">hostent<sp/>*he;</highlight></codeline>
+<codeline lineno="48"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal">sockaddr_in<sp/>their_addr;<sp/></highlight><highlight class="comment">/*<sp/>connector&apos;s<sp/>address<sp/>information<sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="49"><highlight class="normal"></highlight></codeline>
+<codeline lineno="50"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((he=gethostbyname(host))<sp/>==<sp/>NULL)<sp/>{<sp/><sp/></highlight><highlight class="comment">/*<sp/>get<sp/>the<sp/>host<sp/>info<sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>herror(</highlight><highlight class="stringliteral">&quot;gethostbyname&quot;</highlight><highlight class="normal">);</highlight></codeline>
+<codeline lineno="52"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">(1);</highlight></codeline>
+<codeline lineno="53"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="54"><highlight class="normal"></highlight></codeline>
+<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((<ref refid="net_8c_1d2c8fb3df3a737e0685e902870a611d2" kindref="member">sockfd</ref><sp/>=<sp/>socket(PF_INET,<sp/>SOCK_STREAM,<sp/>0))<sp/>==<sp/>-1)<sp/>{</highlight></codeline>
+<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>perror(</highlight><highlight class="stringliteral">&quot;socket&quot;</highlight><highlight class="normal">);</highlight></codeline>
+<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">(1);</highlight></codeline>
+<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="59"><highlight class="normal"></highlight></codeline>
+<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/>their_addr.sin_family<sp/>=<sp/>AF_INET;<sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>host<sp/>byte<sp/>order<sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/>their_addr.sin_port<sp/>=<sp/>htons(<ref refid="net_8c_1614217d263be1fb1a5f76e2ff7be19a2" kindref="member">PORT</ref>);<sp/><sp/></highlight><highlight class="comment">/*<sp/>short,<sp/>network<sp/>byte<sp/>order<sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/>their_addr.sin_addr<sp/>=<sp/>*((</highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal">in_addr<sp/>*)he-&gt;h_addr);</highlight></codeline>
+<codeline lineno="63"><highlight class="normal"><sp/><sp/><sp/><sp/>memset(&amp;(their_addr.sin_zero),<sp/></highlight><highlight class="charliteral">&apos;\0&apos;</highlight><highlight class="normal">,<sp/>8);<sp/><sp/></highlight><highlight class="comment">/*<sp/>zero<sp/>the<sp/>rest<sp/>of<sp/>the<sp/>struct<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="64"><highlight class="normal"></highlight></codeline>
+<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(connect(<ref refid="net_8c_1d2c8fb3df3a737e0685e902870a611d2" kindref="member">sockfd</ref>,<sp/>(</highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/>sockaddr<sp/>*)&amp;their_addr,</highlight></codeline>
+<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(</highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/>sockaddr))<sp/>==<sp/>-1)<sp/>{</highlight></codeline>
+<codeline lineno="67"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>perror(</highlight><highlight class="stringliteral">&quot;connect&quot;</highlight><highlight class="normal">);</highlight></codeline>
+<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">(1);</highlight></codeline>
+<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fcntl(<ref refid="net_8c_1d2c8fb3df3a737e0685e902870a611d2" kindref="member">sockfd</ref>,F_SETFL,<sp/>O_NONBLOCK);</highlight></codeline>
+<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">(0);</highlight></codeline>
+<codeline lineno="72"><highlight class="normal">}</highlight></codeline>
+<codeline lineno="73"><highlight class="normal"></highlight></codeline>
+<codeline lineno="74" refid="olsrs3d_8h_1b8a768eba717722a3d860c01f69fbbc9" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="net_8c_1b8a768eba717722a3d860c01f69fbbc9" kindref="member">net_main</ref>()<sp/>{</highlight></codeline>
+<codeline lineno="75"><highlight class="normal"></highlight></codeline>
+<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((<ref refid="net_8c_124bdd92b6cf8d141a4a27d4882c6a905" kindref="member">numbytes</ref>=recv(<ref refid="net_8c_1d2c8fb3df3a737e0685e902870a611d2" kindref="member">sockfd</ref>,<sp/><ref refid="net_8c_1f39ed2161fb25f51aa61ffc038306f75" kindref="member">buf</ref>,<sp/><ref refid="olsrs3d_8h_116c16f9369be4a374a3e621f6d13bb16" kindref="member">MAXDATASIZE</ref>-1,<sp/>0))<sp/>==<sp/>-1)<sp/>{</highlight></codeline>
+<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(errno==EAGAIN)</highlight></codeline>
+<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">(0);<sp/></highlight><highlight class="comment">/*<sp/>well,<sp/>that&apos;s<sp/>okay<sp/>...<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>perror(</highlight><highlight class="stringliteral">&quot;recv&quot;</highlight><highlight class="normal">);</highlight></codeline>
+<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">(-1);</highlight></codeline>
+<codeline lineno="81"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="82"><highlight class="normal"></highlight></codeline>
+<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="net_8c_124bdd92b6cf8d141a4a27d4882c6a905" kindref="member">numbytes</ref>==0)<sp/>{</highlight></codeline>
+<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(</highlight><highlight class="stringliteral">&quot;connection<sp/>reset\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
+<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">(-1);</highlight></codeline>
+<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="87"><highlight class="normal"></highlight></codeline>
+<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="net_8c_1f39ed2161fb25f51aa61ffc038306f75" kindref="member">buf</ref>[<ref refid="net_8c_124bdd92b6cf8d141a4a27d4882c6a905" kindref="member">numbytes</ref>]<sp/>=<sp/></highlight><highlight class="charliteral">&apos;\0&apos;</highlight><highlight class="normal">;</highlight></codeline>
+<codeline lineno="89"><highlight class="normal"></highlight></codeline>
+<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>check<sp/>for<sp/>potential<sp/>buffer<sp/>overflow<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="91"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>(<sp/>strlen(<sp/><ref refid="olsrs3d_8h_100f1cd38b187535569d0354f2506fb74" kindref="member">lbuf</ref><sp/>)<sp/>+<sp/>strlen(<sp/><ref refid="net_8c_1f39ed2161fb25f51aa61ffc038306f75" kindref="member">buf</ref><sp/>)<sp/>)<sp/>&lt;<sp/><ref refid="olsrs3d_8h_1e310f74f793edeb882f0c2d8d8b50bb8" kindref="member">MAXLINESIZE</ref><sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="92"><highlight class="normal"></highlight></codeline>
+<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>strncat(<sp/><ref refid="olsrs3d_8h_100f1cd38b187535569d0354f2506fb74" kindref="member">lbuf</ref>,<sp/><ref refid="net_8c_1f39ed2161fb25f51aa61ffc038306f75" kindref="member">buf</ref>,<sp/><ref refid="olsrs3d_8h_1e310f74f793edeb882f0c2d8d8b50bb8" kindref="member">MAXLINESIZE</ref><sp/>);</highlight></codeline>
+<codeline lineno="94"><highlight class="normal"></highlight></codeline>
+<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
+<codeline lineno="96"><highlight class="normal"></highlight></codeline>
+<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>hope<sp/>that<sp/>carriage<sp/>return<sp/>is<sp/>now<sp/>in<sp/>buf<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="98"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>strlen(<sp/><ref refid="olsrs3d_8h_100f1cd38b187535569d0354f2506fb74" kindref="member">lbuf</ref><sp/>)<sp/>&lt;<sp/><ref refid="olsrs3d_8h_1e310f74f793edeb882f0c2d8d8b50bb8" kindref="member">MAXLINESIZE</ref><sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="99"><highlight class="normal"></highlight></codeline>
+<codeline lineno="100"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/><ref refid="main_8c_1923774364cedbc16baa0bc05e9be136c" kindref="member">Debug</ref><sp/>)<sp/>printf(<sp/></highlight><highlight class="stringliteral">&quot;WARNING:<sp/>lbuf<sp/>almost<sp/>filled<sp/>without<sp/>*any*<sp/>carriage<sp/>return<sp/>within<sp/>that<sp/>data<sp/>!\nAppending<sp/>truncated<sp/>buf<sp/>to<sp/>lbuf<sp/>to<sp/>prevent<sp/>buffer<sp/>overflow.\n&quot;</highlight><highlight class="normal"><sp/>);</highlight></codeline>
+<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>strncat(<sp/><ref refid="olsrs3d_8h_100f1cd38b187535569d0354f2506fb74" kindref="member">lbuf</ref>,<sp/><ref refid="net_8c_1f39ed2161fb25f51aa61ffc038306f75" kindref="member">buf</ref>,<sp/><ref refid="olsrs3d_8h_1e310f74f793edeb882f0c2d8d8b50bb8" kindref="member">MAXLINESIZE</ref><sp/>-<sp/>strlen(<sp/><ref refid="olsrs3d_8h_100f1cd38b187535569d0354f2506fb74" kindref="member">lbuf</ref><sp/>)<sp/>);</highlight></codeline>
+<codeline lineno="102"><highlight class="normal"></highlight></codeline>
+<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
+<codeline lineno="104"><highlight class="normal"></highlight></codeline>
+<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/><ref refid="main_8c_1923774364cedbc16baa0bc05e9be136c" kindref="member">Debug</ref><sp/>)<sp/>printf(<sp/></highlight><highlight class="stringliteral">&quot;ERROR:<sp/>lbuf<sp/>filled<sp/>without<sp/>*any*<sp/>carriage<sp/>return<sp/>within<sp/>that<sp/>data<sp/>!\nClearing<sp/>lbuf<sp/>to<sp/>prevent<sp/>buffer<sp/>overflow.\n&quot;</highlight><highlight class="normal"><sp/>);</highlight></codeline>
+<codeline lineno="106"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>strncpy(<sp/><ref refid="olsrs3d_8h_100f1cd38b187535569d0354f2506fb74" kindref="member">lbuf</ref>,<sp/><ref refid="net_8c_1f39ed2161fb25f51aa61ffc038306f75" kindref="member">buf</ref>,<sp/><ref refid="olsrs3d_8h_1e310f74f793edeb882f0c2d8d8b50bb8" kindref="member">MAXLINESIZE</ref><sp/>);</highlight></codeline>
+<codeline lineno="107"><highlight class="normal"></highlight></codeline>
+<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="109"><highlight class="normal"></highlight></codeline>
+<codeline lineno="110"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="111"><highlight class="normal"></highlight></codeline>
+<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="olsrs3d_8h_16b4e9b6718b671f6330c2e501c60d3c1" kindref="member">process_main</ref>();</highlight></codeline>
+<codeline lineno="113"><highlight class="normal"></highlight></codeline>
+<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>++<ref refid="main_8c_15bcc20f84efa7bd4aafc56a629f2eff3" kindref="member">Net_read_count</ref><sp/>&gt;<sp/>5<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">(0);<sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>continue<sp/>mainloop<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
+<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">(1);<sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>continue<sp/>reading<sp/>data<sp/>from<sp/>socket<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="119"><highlight class="normal"></highlight></codeline>
+<codeline lineno="120"><highlight class="normal">}</highlight></codeline>
+<codeline lineno="121"><highlight class="normal"></highlight></codeline>
+<codeline lineno="122" refid="olsrs3d_8h_198aebc7a8515c76551eb15ecd465b923" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="net_8c_198aebc7a8515c76551eb15ecd465b923" kindref="member">net_quit</ref>()</highlight></codeline>
+<codeline lineno="123"><highlight class="normal">{</highlight></codeline>
+<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/>close(<ref refid="net_8c_1d2c8fb3df3a737e0685e902870a611d2" kindref="member">sockfd</ref>);</highlight></codeline>
+<codeline lineno="125"><highlight class="normal"></highlight></codeline>
+<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
+<codeline lineno="127"><highlight class="normal">}</highlight></codeline>
+<codeline lineno="128"><highlight class="normal"></highlight></codeline>
+<codeline lineno="129"><highlight class="normal"></highlight></codeline>
+    </programlisting>
+    <location file="/home/bigm/s3d/apps/olsrs3d/net.c"/>
+  </compounddef>
+</doxygen>

Added: trunk/apps/olsrs3d/doxygen/xml/olsrs3d_8h.xml
===================================================================
--- trunk/apps/olsrs3d/doxygen/xml/olsrs3d_8h.xml	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/xml/olsrs3d_8h.xml	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,721 @@
+<?xml version='1.0' encoding='iso-8859-1' standalone='no'?>
+<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.4.6">
+  <compounddef id="olsrs3d_8h" kind="file">
+    <compoundname>olsrs3d.h</compoundname>
+    <includedby refid="main_8c" local="yes">s3d/apps/olsrs3d/main.c</includedby>
+    <includedby refid="net_8c" local="yes">s3d/apps/olsrs3d/net.c</includedby>
+    <includedby refid="process_8c" local="yes">s3d/apps/olsrs3d/process.c</includedby>
+    <invincdepgraph>
+      <node id="28">
+        <label>s3d/apps/olsrs3d/process.c</label>
+        <link refid="process_8c"/>
+      </node>
+      <node id="25">
+        <label>s3d/apps/olsrs3d/olsrs3d.h</label>
+        <link refid="olsrs3d.h"/>
+        <childnode refid="26" relation="include">
+        </childnode>
+        <childnode refid="27" relation="include">
+        </childnode>
+        <childnode refid="28" relation="include">
+        </childnode>
+      </node>
+      <node id="26">
+        <label>s3d/apps/olsrs3d/main.c</label>
+        <link refid="main_8c"/>
+      </node>
+      <node id="27">
+        <label>s3d/apps/olsrs3d/net.c</label>
+        <link refid="net_8c"/>
+      </node>
+    </invincdepgraph>
+    <innerclass refid="structObj__to__ip">Obj_to_ip</innerclass>
+    <innerclass refid="structolsr__con">olsr_con</innerclass>
+    <innerclass refid="structolsr__neigh__list">olsr_neigh_list</innerclass>
+    <innerclass refid="structolsr__node">olsr_node</innerclass>
+      <sectiondef kind="define">
+      <memberdef kind="define" id="olsrs3d_8h_116c16f9369be4a374a3e621f6d13bb16" prot="public" static="no">
+        <name>MAXDATASIZE</name>
+        <initializer>100</initializer>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="30" bodyfile="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" bodystart="30" bodyend="-1"/>
+        <referencedby refid="olsrs3d_8h_1b8a768eba717722a3d860c01f69fbbc9" compoundref="net_8c" startline="74" endline="120">net_main</referencedby>
+      </memberdef>
+      <memberdef kind="define" id="olsrs3d_8h_1e310f74f793edeb882f0c2d8d8b50bb8" prot="public" static="no">
+        <name>MAXLINESIZE</name>
+        <initializer>1000</initializer>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="29" bodyfile="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" bodystart="29" bodyend="-1"/>
+        <referencedby refid="olsrs3d_8h_1b8a768eba717722a3d860c01f69fbbc9" compoundref="net_8c" startline="74" endline="120">net_main</referencedby>
+      </memberdef>
+      <memberdef kind="define" id="olsrs3d_8h_1f8c0c53607c56b59e883cb0894e5cde7" prot="public" static="no">
+        <name>NAMEMAX</name>
+        <initializer>128</initializer>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="28" bodyfile="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" bodystart="28" bodyend="-1"/>
+        <referencedby refid="process_8c_14c780ee64b12fa5531a56edfb5ffcc00" compoundref="process_8c" startline="48" endline="140">add_olsr_con</referencedby>
+        <referencedby refid="process_8c_17ba929b35f03f5921272b4e5e821ade2" compoundref="process_8c" startline="155" endline="231">get_olsr_node</referencedby>
+        <referencedby refid="process_8c_16b4e9b6718b671f6330c2e501c60d3c1" compoundref="process_8c" startline="368" endline="487">process_main</referencedby>
+      </memberdef>
+      </sectiondef>
+      <sectiondef kind="func">
+      <memberdef kind="function" id="olsrs3d_8h_1d01a29bcb2e2daed6fcc6516c328f141" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
+        <type>void</type>
+        <definition>void lst_add</definition>
+        <argsstring>(int id, struct olsr_node **olsr_node)</argsstring>
+        <name>lst_add</name>
+        <param>
+          <type>int</type>
+          <declname>id</declname>
+        </param>
+        <param>
+          <type>struct <ref refid="structolsr__node" kindref="compound">olsr_node</ref> **</type>
+          <declname>olsr_node</declname>
+        </param>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="111" bodyfile="/home/bigm/s3d/apps/olsrs3d/process.c" bodystart="259" bodyend="272"/>
+        <references refid="main_8c_16a8ff2c3957f5f0ab7dcafcd72b8bd57" compoundref="main_8c" startline="47">List_ptr</references>
+        <references refid="olsrs3d_8h_1576c61914d53ad9035e74317dbb15903" compoundref="process_8c" startline="303" endline="334">move_lst_ptr</references>
+        <references refid="structObj__to__ip_1da076aa87c753db90520204360bf326a" compoundref="olsrs3d_8h" startline="82">Obj_to_ip::next</references>
+        <references refid="structObj__to__ip_1207d8f9a609e3e20b4cbd9a7976dcd18" compoundref="olsrs3d_8h" startline="81">Obj_to_ip::olsr_node</references>
+        <references refid="main_8c_1be0835e7acb76ea987ac80769302d90a" compoundref="main_8c" startline="94" endline="99">out_of_mem</references>
+        <references refid="structObj__to__ip_1c41475dd4632807df16315bad4309333" compoundref="olsrs3d_8h" startline="83">Obj_to_ip::prev</references>
+        <referencedby refid="main_8c_1de55269b71a792259ef22763327686b9" compoundref="main_8c" startline="186" endline="390">handle_olsr_node</referencedby>
+      </memberdef>
+      <memberdef kind="function" id="olsrs3d_8h_1febf2594bdfe9ec411d0c04c9cd951b3" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
+        <type>void</type>
+        <definition>void lst_del</definition>
+        <argsstring>(int id)</argsstring>
+        <name>lst_del</name>
+        <param>
+          <type>int</type>
+          <declname>id</declname>
+        </param>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="112" bodyfile="/home/bigm/s3d/apps/olsrs3d/process.c" bodystart="281" bodyend="294"/>
+        <references refid="structObj__to__ip_123759dec76c683ac720f937fea4e4d41" compoundref="olsrs3d_8h" startline="80">Obj_to_ip::id</references>
+        <references refid="main_8c_16a8ff2c3957f5f0ab7dcafcd72b8bd57" compoundref="main_8c" startline="47">List_ptr</references>
+        <references refid="olsrs3d_8h_1576c61914d53ad9035e74317dbb15903" compoundref="process_8c" startline="303" endline="334">move_lst_ptr</references>
+        <references refid="structObj__to__ip_1da076aa87c753db90520204360bf326a" compoundref="olsrs3d_8h" startline="82">Obj_to_ip::next</references>
+        <references refid="structObj__to__ip_1c41475dd4632807df16315bad4309333" compoundref="olsrs3d_8h" startline="83">Obj_to_ip::prev</references>
+        <referencedby refid="main_8c_1de55269b71a792259ef22763327686b9" compoundref="main_8c" startline="186" endline="390">handle_olsr_node</referencedby>
+      </memberdef>
+      <memberdef kind="function" id="olsrs3d_8h_1edfb2ae44af543946842187ced1cd47e" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
+        <type>void</type>
+        <definition>void lst_initialize</definition>
+        <argsstring>()</argsstring>
+        <name>lst_initialize</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="110" bodyfile="/home/bigm/s3d/apps/olsrs3d/process.c" bodystart="239" bodyend="249"/>
+        <references refid="structObj__to__ip_123759dec76c683ac720f937fea4e4d41" compoundref="olsrs3d_8h" startline="80">Obj_to_ip::id</references>
+        <references refid="main_8c_16a8ff2c3957f5f0ab7dcafcd72b8bd57" compoundref="main_8c" startline="47">List_ptr</references>
+        <references refid="structObj__to__ip_1da076aa87c753db90520204360bf326a" compoundref="olsrs3d_8h" startline="82">Obj_to_ip::next</references>
+        <references refid="main_8c_1236217b97f5fe65457d8b22c73c5073d" compoundref="main_8c" startline="47">Obj_to_ip_end</references>
+        <references refid="main_8c_19494e9e8cbdc4eceb86cb33ff0006785" compoundref="main_8c" startline="47">Obj_to_ip_head</references>
+        <references refid="main_8c_1be0835e7acb76ea987ac80769302d90a" compoundref="main_8c" startline="94" endline="99">out_of_mem</references>
+        <references refid="structObj__to__ip_1c41475dd4632807df16315bad4309333" compoundref="olsrs3d_8h" startline="83">Obj_to_ip::prev</references>
+        <referencedby refid="main_8c_10ddf1224851353fc92bfbff6f499fa97" compoundref="main_8c" startline="804" endline="867">main</referencedby>
+      </memberdef>
+      <memberdef kind="function" id="olsrs3d_8h_1a015f713ca02d8b76a52175b4128d3e8" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
+        <type>void</type>
+        <definition>void lst_out</definition>
+        <argsstring>()</argsstring>
+        <name>lst_out</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="114" bodyfile="/home/bigm/s3d/apps/olsrs3d/process.c" bodystart="359" bodyend="366"/>
+        <references refid="structObj__to__ip_123759dec76c683ac720f937fea4e4d41" compoundref="olsrs3d_8h" startline="80">Obj_to_ip::id</references>
+        <references refid="structObj__to__ip_1da076aa87c753db90520204360bf326a" compoundref="olsrs3d_8h" startline="82">Obj_to_ip::next</references>
+        <references refid="main_8c_19494e9e8cbdc4eceb86cb33ff0006785" compoundref="main_8c" startline="47">Obj_to_ip_head</references>
+        <referencedby refid="main_8c_12f5982986645c1e7a202d72bc5e633eb" compoundref="main_8c" startline="690" endline="738">keypress</referencedby>
+      </memberdef>
+      <memberdef kind="function" id="olsrs3d_8h_1ef8aff26d4e096ef0880c204c13309f0" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
+        <type><ref refid="structolsr__node" kindref="compound">olsr_node</ref> **</type>
+        <definition>struct olsr_node ** lst_search</definition>
+        <argsstring>(int id)</argsstring>
+        <name>lst_search</name>
+        <param>
+          <type>int</type>
+          <declname>id</declname>
+        </param>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="113" bodyfile="/home/bigm/s3d/apps/olsrs3d/process.c" bodystart="349" bodyend="357"/>
+        <references refid="main_8c_16a8ff2c3957f5f0ab7dcafcd72b8bd57" compoundref="main_8c" startline="47">List_ptr</references>
+        <references refid="olsrs3d_8h_1576c61914d53ad9035e74317dbb15903" compoundref="process_8c" startline="303" endline="334">move_lst_ptr</references>
+        <references refid="structObj__to__ip_1207d8f9a609e3e20b4cbd9a7976dcd18" compoundref="olsrs3d_8h" startline="81">Obj_to_ip::olsr_node</references>
+        <referencedby refid="main_8c_1ddbd46dad32b89cec68daa03a08f3582" compoundref="main_8c" startline="746" endline="768">object_click</referencedby>
+      </memberdef>
+      <memberdef kind="function" id="olsrs3d_8h_1576c61914d53ad9035e74317dbb15903" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
+        <type>void</type>
+        <definition>void move_lst_ptr</definition>
+        <argsstring>(int *id)</argsstring>
+        <name>move_lst_ptr</name>
+        <param>
+          <type>int *</type>
+          <declname>id</declname>
+        </param>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="115" bodyfile="/home/bigm/s3d/apps/olsrs3d/process.c" bodystart="303" bodyend="334"/>
+        <references refid="structObj__to__ip_123759dec76c683ac720f937fea4e4d41" compoundref="olsrs3d_8h" startline="80">Obj_to_ip::id</references>
+        <references refid="main_8c_16a8ff2c3957f5f0ab7dcafcd72b8bd57" compoundref="main_8c" startline="47">List_ptr</references>
+        <references refid="structObj__to__ip_1da076aa87c753db90520204360bf326a" compoundref="olsrs3d_8h" startline="82">Obj_to_ip::next</references>
+        <references refid="main_8c_1236217b97f5fe65457d8b22c73c5073d" compoundref="main_8c" startline="47">Obj_to_ip_end</references>
+        <references refid="main_8c_19494e9e8cbdc4eceb86cb33ff0006785" compoundref="main_8c" startline="47">Obj_to_ip_head</references>
+        <references refid="structObj__to__ip_1c41475dd4632807df16315bad4309333" compoundref="olsrs3d_8h" startline="83">Obj_to_ip::prev</references>
+        <referencedby refid="process_8c_1d01a29bcb2e2daed6fcc6516c328f141" compoundref="process_8c" startline="259" endline="272">lst_add</referencedby>
+        <referencedby refid="process_8c_1febf2594bdfe9ec411d0c04c9cd951b3" compoundref="process_8c" startline="281" endline="294">lst_del</referencedby>
+        <referencedby refid="process_8c_1b74d5229fcc3a39626609ac9f12510dd" compoundref="process_8c" startline="349" endline="357">lst_search</referencedby>
+      </memberdef>
+      <memberdef kind="function" id="olsrs3d_8h_163c933342efd8cac7f272b92d8acab05" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
+        <type>int</type>
+        <definition>int net_init</definition>
+        <argsstring>(char *host)</argsstring>
+        <name>net_init</name>
+        <param>
+          <type>char *</type>
+          <declname>host</declname>
+        </param>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="118" bodyfile="/home/bigm/s3d/apps/olsrs3d/net.c" bodystart="45" bodyend="72"/>
+        <references refid="net_8c_1614217d263be1fb1a5f76e2ff7be19a2" compoundref="net_8c" startline="40">PORT</references>
+        <references refid="net_8c_1d2c8fb3df3a737e0685e902870a611d2" compoundref="net_8c" startline="44">sockfd</references>
+        <referencedby refid="main_8c_10ddf1224851353fc92bfbff6f499fa97" compoundref="main_8c" startline="804" endline="867">main</referencedby>
+      </memberdef>
+      <memberdef kind="function" id="olsrs3d_8h_1b8a768eba717722a3d860c01f69fbbc9" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
+        <type>int</type>
+        <definition>int net_main</definition>
+        <argsstring>()</argsstring>
+        <name>net_main</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="119" bodyfile="/home/bigm/s3d/apps/olsrs3d/net.c" bodystart="74" bodyend="120"/>
+        <references refid="net_8c_1f39ed2161fb25f51aa61ffc038306f75" compoundref="net_8c" startline="41">buf</references>
+        <references refid="main_8c_1923774364cedbc16baa0bc05e9be136c" compoundref="main_8c" startline="41">Debug</references>
+        <references refid="olsrs3d_8h_100f1cd38b187535569d0354f2506fb74" compoundref="process_8c" startline="34">lbuf</references>
+        <references refid="olsrs3d_8h_116c16f9369be4a374a3e621f6d13bb16" compoundref="olsrs3d_8h" startline="30">MAXDATASIZE</references>
+        <references refid="olsrs3d_8h_1e310f74f793edeb882f0c2d8d8b50bb8" compoundref="olsrs3d_8h" startline="29">MAXLINESIZE</references>
+        <references refid="main_8c_15bcc20f84efa7bd4aafc56a629f2eff3" compoundref="main_8c" startline="52">Net_read_count</references>
+        <references refid="net_8c_124bdd92b6cf8d141a4a27d4882c6a905" compoundref="net_8c" startline="44">numbytes</references>
+        <references refid="olsrs3d_8h_16b4e9b6718b671f6330c2e501c60d3c1" compoundref="process_8c" startline="368" endline="487">process_main</references>
+        <references refid="net_8c_1d2c8fb3df3a737e0685e902870a611d2" compoundref="net_8c" startline="44">sockfd</references>
+        <referencedby refid="main_8c_1896df4ffe3f986ad843e4d191cd712b3" compoundref="main_8c" startline="624" endline="671">mainloop</referencedby>
+      </memberdef>
+      <memberdef kind="function" id="olsrs3d_8h_198aebc7a8515c76551eb15ecd465b923" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
+        <type>int</type>
+        <definition>int net_quit</definition>
+        <argsstring>()</argsstring>
+        <name>net_quit</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="120" bodyfile="/home/bigm/s3d/apps/olsrs3d/net.c" bodystart="122" bodyend="127"/>
+        <references refid="net_8c_1d2c8fb3df3a737e0685e902870a611d2" compoundref="net_8c" startline="44">sockfd</references>
+        <referencedby refid="main_8c_10ddf1224851353fc92bfbff6f499fa97" compoundref="main_8c" startline="804" endline="867">main</referencedby>
+        <referencedby refid="main_8c_18c528baf37154d347366083f0f816846" compoundref="main_8c" startline="675" endline="680">stop</referencedby>
+      </memberdef>
+      <memberdef kind="function" id="olsrs3d_8h_1be0835e7acb76ea987ac80769302d90a" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
+        <type>void</type>
+        <definition>void out_of_mem</definition>
+        <argsstring>(void)</argsstring>
+        <name>out_of_mem</name>
+        <param>
+          <type>void</type>
+        </param>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="122" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="94" bodyend="99"/>
+        <referencedby refid="process_8c_14c780ee64b12fa5531a56edfb5ffcc00" compoundref="process_8c" startline="48" endline="140">add_olsr_con</referencedby>
+        <referencedby refid="process_8c_17ba929b35f03f5921272b4e5e821ade2" compoundref="process_8c" startline="155" endline="231">get_olsr_node</referencedby>
+        <referencedby refid="process_8c_1d01a29bcb2e2daed6fcc6516c328f141" compoundref="process_8c" startline="259" endline="272">lst_add</referencedby>
+        <referencedby refid="process_8c_1edfb2ae44af543946842187ced1cd47e" compoundref="process_8c" startline="239" endline="249">lst_initialize</referencedby>
+      </memberdef>
+      <memberdef kind="function" id="olsrs3d_8h_16b4e9b6718b671f6330c2e501c60d3c1" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
+        <type>int</type>
+        <definition>int process_main</definition>
+        <argsstring>()</argsstring>
+        <name>process_main</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="116" bodyfile="/home/bigm/s3d/apps/olsrs3d/process.c" bodystart="368" bodyend="487"/>
+        <references refid="process_8c_14c780ee64b12fa5531a56edfb5ffcc00" compoundref="process_8c" startline="48" endline="140">add_olsr_con</references>
+        <references refid="main_8c_1923774364cedbc16baa0bc05e9be136c" compoundref="main_8c" startline="41">Debug</references>
+        <references refid="process_8c_17ba929b35f03f5921272b4e5e821ade2" compoundref="process_8c" startline="155" endline="231">get_olsr_node</references>
+        <references refid="structolsr__node_159690d75faff5c149faecacb4f4d2a57" compoundref="olsrs3d_8h" startline="64">olsr_node::ip</references>
+        <references refid="olsrs3d_8h_100f1cd38b187535569d0354f2506fb74" compoundref="process_8c" startline="34">lbuf</references>
+        <references refid="olsrs3d_8h_1f8c0c53607c56b59e883cb0894e5cde7" compoundref="olsrs3d_8h" startline="28">NAMEMAX</references>
+        <references refid="structolsr__node_1c89186513811183436bcd79cdb6d7b4d" compoundref="olsrs3d_8h" startline="65">olsr_node::node_type</references>
+        <references refid="structolsr__node_14517a87e4fdbdb58f678743b5684088b" compoundref="olsrs3d_8h" startline="66">olsr_node::node_type_modified</references>
+        <references refid="main_8c_1c5c5c6846587092d0c23b58b558e680c" compoundref="main_8c" startline="46">Olsr_root</references>
+        <references refid="structolsr__node_1f19d37e4aa5263be9a1741de24686664" compoundref="olsrs3d_8h" startline="68">olsr_node::visible</references>
+        <referencedby refid="olsrs3d_8h_1b8a768eba717722a3d860c01f69fbbc9" compoundref="net_8c" startline="74" endline="120">net_main</referencedby>
+      </memberdef>
+      </sectiondef>
+      <sectiondef kind="var">
+      <memberdef kind="variable" id="olsrs3d_8h_1f23a6ad2da4511ef430c4f522ae9f4cc" prot="public" static="no" mutable="no">
+        <type>float</type>
+        <definition>float Bottom</definition>
+        <argsstring></argsstring>
+        <name>Bottom</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="106" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="57" bodyend="-1"/>
+        <referencedby refid="main_8c_1896df4ffe3f986ad843e4d191cd712b3" compoundref="main_8c" startline="624" endline="671">mainloop</referencedby>
+        <referencedby refid="main_8c_1ddbd46dad32b89cec68daa03a08f3582" compoundref="main_8c" startline="746" endline="768">object_click</referencedby>
+        <referencedby refid="main_8c_1b7f2ab10a4f7d5ef94d5205fc6147cc4" compoundref="main_8c" startline="777" endline="802">object_info</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="olsrs3d_8h_10643a36891539929d987e2ee83ff81d1" prot="public" static="no" mutable="no">
+        <type><ref refid="structolsr__con" kindref="compound">olsr_con</ref> *</type>
+        <definition>struct olsr_con* Con_begin</definition>
+        <argsstring></argsstring>
+        <name>Con_begin</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="90" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="45" bodyend="-1"/>
+        <referencedby refid="process_8c_14c780ee64b12fa5531a56edfb5ffcc00" compoundref="process_8c" startline="48" endline="140">add_olsr_con</referencedby>
+        <referencedby refid="main_8c_1668e36a25680cc3e0ac4d85a418a838a" compoundref="main_8c" startline="400" endline="429">calc_olsr_node_mov</referencedby>
+        <referencedby refid="main_8c_1b8d0d8cf5ac8914802be645e15241b77" compoundref="main_8c" startline="439" endline="620">move_olsr_nodes</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="olsrs3d_8h_1923774364cedbc16baa0bc05e9be136c" prot="public" static="no" mutable="no">
+        <type>int</type>
+        <definition>int Debug</definition>
+        <argsstring></argsstring>
+        <name>Debug</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="88" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="41" bodyend="-1"/>
+        <referencedby refid="process_8c_17ba929b35f03f5921272b4e5e821ade2" compoundref="process_8c" startline="155" endline="231">get_olsr_node</referencedby>
+        <referencedby refid="main_8c_1de55269b71a792259ef22763327686b9" compoundref="main_8c" startline="186" endline="390">handle_olsr_node</referencedby>
+        <referencedby refid="main_8c_10ddf1224851353fc92bfbff6f499fa97" compoundref="main_8c" startline="804" endline="867">main</referencedby>
+        <referencedby refid="olsrs3d_8h_1b8a768eba717722a3d860c01f69fbbc9" compoundref="net_8c" startline="74" endline="120">net_main</referencedby>
+        <referencedby refid="process_8c_16b4e9b6718b671f6330c2e501c60d3c1" compoundref="process_8c" startline="368" endline="487">process_main</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="olsrs3d_8h_158acad60c78b63554c696703227d0b7b" prot="public" static="no" mutable="no">
+        <type>int</type>
+        <definition>int Last_olsr_node_count</definition>
+        <argsstring></argsstring>
+        <name>Last_olsr_node_count</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="100" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="49" bodyend="-1"/>
+        <referencedby refid="main_8c_1896df4ffe3f986ad843e4d191cd712b3" compoundref="main_8c" startline="624" endline="671">mainloop</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="olsrs3d_8h_100f1cd38b187535569d0354f2506fb74" prot="public" static="no" mutable="no">
+        <type>char</type>
+        <definition>char lbuf[MAXLINESIZE]</definition>
+        <argsstring>[MAXLINESIZE]</argsstring>
+        <name>lbuf</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="108" bodyfile="/home/bigm/s3d/apps/olsrs3d/process.c" bodystart="34" bodyend="-1"/>
+        <referencedby refid="main_8c_10ddf1224851353fc92bfbff6f499fa97" compoundref="main_8c" startline="804" endline="867">main</referencedby>
+        <referencedby refid="olsrs3d_8h_1b8a768eba717722a3d860c01f69fbbc9" compoundref="net_8c" startline="74" endline="120">net_main</referencedby>
+        <referencedby refid="process_8c_16b4e9b6718b671f6330c2e501c60d3c1" compoundref="process_8c" startline="368" endline="487">process_main</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="olsrs3d_8h_16f68bad9075598ca8ede1827c6832376" prot="public" static="no" mutable="no">
+        <type>float</type>
+        <definition>float Left</definition>
+        <argsstring></argsstring>
+        <name>Left</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="106" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="58" bodyend="-1"/>
+        <referencedby refid="main_8c_1896df4ffe3f986ad843e4d191cd712b3" compoundref="main_8c" startline="624" endline="671">mainloop</referencedby>
+        <referencedby refid="main_8c_1ddbd46dad32b89cec68daa03a08f3582" compoundref="main_8c" startline="746" endline="768">object_click</referencedby>
+        <referencedby refid="main_8c_1b7f2ab10a4f7d5ef94d5205fc6147cc4" compoundref="main_8c" startline="777" endline="802">object_info</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="olsrs3d_8h_16a8ff2c3957f5f0ab7dcafcd72b8bd57" prot="public" static="no" mutable="no">
+        <type><ref refid="structObj__to__ip" kindref="compound">Obj_to_ip</ref> *</type>
+        <definition>struct Obj_to_ip * List_ptr</definition>
+        <argsstring></argsstring>
+        <name>List_ptr</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="92" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="47" bodyend="-1"/>
+        <referencedby refid="process_8c_1d01a29bcb2e2daed6fcc6516c328f141" compoundref="process_8c" startline="259" endline="272">lst_add</referencedby>
+        <referencedby refid="process_8c_1febf2594bdfe9ec411d0c04c9cd951b3" compoundref="process_8c" startline="281" endline="294">lst_del</referencedby>
+        <referencedby refid="process_8c_1edfb2ae44af543946842187ced1cd47e" compoundref="process_8c" startline="239" endline="249">lst_initialize</referencedby>
+        <referencedby refid="process_8c_1b74d5229fcc3a39626609ac9f12510dd" compoundref="process_8c" startline="349" endline="357">lst_search</referencedby>
+        <referencedby refid="process_8c_1576c61914d53ad9035e74317dbb15903" compoundref="process_8c" startline="303" endline="334">move_lst_ptr</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="olsrs3d_8h_15bcc20f84efa7bd4aafc56a629f2eff3" prot="public" static="no" mutable="no">
+        <type>int</type>
+        <definition>int Net_read_count</definition>
+        <argsstring></argsstring>
+        <name>Net_read_count</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="102" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="52" bodyend="-1"/>
+        <referencedby refid="main_8c_1896df4ffe3f986ad843e4d191cd712b3" compoundref="main_8c" startline="624" endline="671">mainloop</referencedby>
+        <referencedby refid="olsrs3d_8h_1b8a768eba717722a3d860c01f69fbbc9" compoundref="net_8c" startline="74" endline="120">net_main</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="olsrs3d_8h_1236217b97f5fe65457d8b22c73c5073d" prot="public" static="no" mutable="no">
+        <type><ref refid="structObj__to__ip" kindref="compound">Obj_to_ip</ref> *</type>
+        <definition>struct Obj_to_ip * Obj_to_ip_end</definition>
+        <argsstring></argsstring>
+        <name>Obj_to_ip_end</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="92" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="47" bodyend="-1"/>
+        <referencedby refid="main_8c_1de55269b71a792259ef22763327686b9" compoundref="main_8c" startline="186" endline="390">handle_olsr_node</referencedby>
+        <referencedby refid="process_8c_1edfb2ae44af543946842187ced1cd47e" compoundref="process_8c" startline="239" endline="249">lst_initialize</referencedby>
+        <referencedby refid="process_8c_1576c61914d53ad9035e74317dbb15903" compoundref="process_8c" startline="303" endline="334">move_lst_ptr</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="olsrs3d_8h_19494e9e8cbdc4eceb86cb33ff0006785" prot="public" static="no" mutable="no">
+        <type><ref refid="structObj__to__ip" kindref="compound">Obj_to_ip</ref> *</type>
+        <definition>struct Obj_to_ip* Obj_to_ip_head</definition>
+        <argsstring></argsstring>
+        <name>Obj_to_ip_head</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="92" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="47" bodyend="-1"/>
+        <referencedby refid="main_8c_1de55269b71a792259ef22763327686b9" compoundref="main_8c" startline="186" endline="390">handle_olsr_node</referencedby>
+        <referencedby refid="process_8c_1edfb2ae44af543946842187ced1cd47e" compoundref="process_8c" startline="239" endline="249">lst_initialize</referencedby>
+        <referencedby refid="process_8c_1a015f713ca02d8b76a52175b4128d3e8" compoundref="process_8c" startline="359" endline="366">lst_out</referencedby>
+        <referencedby refid="process_8c_1576c61914d53ad9035e74317dbb15903" compoundref="process_8c" startline="303" endline="334">move_lst_ptr</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="olsrs3d_8h_186c048bc4aaab319f4d61f7c0e1f056f" prot="public" static="no" mutable="no">
+        <type>int</type>
+        <definition>int Olsr_node_count</definition>
+        <argsstring></argsstring>
+        <name>Olsr_node_count</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="99" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="49" bodyend="-1"/>
+        <referencedby refid="process_8c_17ba929b35f03f5921272b4e5e821ade2" compoundref="process_8c" startline="155" endline="231">get_olsr_node</referencedby>
+        <referencedby refid="main_8c_1de55269b71a792259ef22763327686b9" compoundref="main_8c" startline="186" endline="390">handle_olsr_node</referencedby>
+        <referencedby refid="main_8c_1896df4ffe3f986ad843e4d191cd712b3" compoundref="main_8c" startline="624" endline="671">mainloop</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="olsrs3d_8h_14dfd0657ff868fa02113bcd3335acff1" prot="public" static="no" mutable="no">
+        <type>int</type>
+        <definition>int Olsr_node_count_obj</definition>
+        <argsstring></argsstring>
+        <name>Olsr_node_count_obj</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="98" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="50" bodyend="-1"/>
+        <referencedby refid="main_8c_1896df4ffe3f986ad843e4d191cd712b3" compoundref="main_8c" startline="624" endline="671">mainloop</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="olsrs3d_8h_1c03c9b38147e4231238c44f4b5fbdff7" prot="public" static="no" mutable="no">
+        <type>int</type>
+        <definition>int Olsr_node_hna_net</definition>
+        <argsstring></argsstring>
+        <name>Olsr_node_hna_net</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="96" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="54" bodyend="-1"/>
+        <referencedby refid="main_8c_1de55269b71a792259ef22763327686b9" compoundref="main_8c" startline="186" endline="390">handle_olsr_node</referencedby>
+        <referencedby refid="main_8c_10ddf1224851353fc92bfbff6f499fa97" compoundref="main_8c" startline="804" endline="867">main</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="olsrs3d_8h_1b02228665cef19331d409b0d8a831531" prot="public" static="no" mutable="no">
+        <type>int</type>
+        <definition>int Olsr_node_inet_obj</definition>
+        <argsstring></argsstring>
+        <name>Olsr_node_inet_obj</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="95" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="54" bodyend="-1"/>
+        <referencedby refid="main_8c_1de55269b71a792259ef22763327686b9" compoundref="main_8c" startline="186" endline="390">handle_olsr_node</referencedby>
+        <referencedby refid="main_8c_10ddf1224851353fc92bfbff6f499fa97" compoundref="main_8c" startline="804" endline="867">main</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="olsrs3d_8h_15eba8148fe9257c34665ed364b595fdb" prot="public" static="no" mutable="no">
+        <type>int</type>
+        <definition>int Olsr_node_obj</definition>
+        <argsstring></argsstring>
+        <name>Olsr_node_obj</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="94" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="54" bodyend="-1"/>
+        <referencedby refid="main_8c_1de55269b71a792259ef22763327686b9" compoundref="main_8c" startline="186" endline="390">handle_olsr_node</referencedby>
+        <referencedby refid="main_8c_10ddf1224851353fc92bfbff6f499fa97" compoundref="main_8c" startline="804" endline="867">main</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="olsrs3d_8h_1c5c5c6846587092d0c23b58b558e680c" prot="public" static="no" mutable="no">
+        <type><ref refid="structolsr__node" kindref="compound">olsr_node</ref> *</type>
+        <definition>struct olsr_node* Olsr_root</definition>
+        <argsstring></argsstring>
+        <name>Olsr_root</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="91" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="46" bodyend="-1"/>
+        <referencedby refid="main_8c_1896df4ffe3f986ad843e4d191cd712b3" compoundref="main_8c" startline="624" endline="671">mainloop</referencedby>
+        <referencedby refid="process_8c_16b4e9b6718b671f6330c2e501c60d3c1" compoundref="process_8c" startline="368" endline="487">process_main</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="olsrs3d_8h_1e113d40abb6f4dd73e4b1253917a1942" prot="public" static="no" mutable="no">
+        <type>int</type>
+        <definition>int ZeroPoint</definition>
+        <argsstring></argsstring>
+        <name>ZeroPoint</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="104" bodyfile="/home/bigm/s3d/apps/olsrs3d/main.c" bodystart="62" bodyend="-1"/>
+        <referencedby refid="process_8c_14c780ee64b12fa5531a56edfb5ffcc00" compoundref="process_8c" startline="48" endline="140">add_olsr_con</referencedby>
+        <referencedby refid="main_8c_1de55269b71a792259ef22763327686b9" compoundref="main_8c" startline="186" endline="390">handle_olsr_node</referencedby>
+        <referencedby refid="main_8c_12f5982986645c1e7a202d72bc5e633eb" compoundref="main_8c" startline="690" endline="738">keypress</referencedby>
+        <referencedby refid="main_8c_10ddf1224851353fc92bfbff6f499fa97" compoundref="main_8c" startline="804" endline="867">main</referencedby>
+        <referencedby refid="main_8c_1896df4ffe3f986ad843e4d191cd712b3" compoundref="main_8c" startline="624" endline="671">mainloop</referencedby>
+      </memberdef>
+      </sectiondef>
+    <briefdescription>
+    </briefdescription>
+    <detaileddescription>
+    </detaileddescription>
+    <programlisting>
+<codeline lineno="1"><highlight class="comment">/*</highlight></codeline>
+<codeline lineno="2"><highlight class="comment"><sp/>*<sp/>olsrs3d.h</highlight></codeline>
+<codeline lineno="3"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="4"><highlight class="comment"><sp/>*<sp/>Copyright<sp/>(C)<sp/>2004-2006<sp/>Simon<sp/>Wunderlich<sp/>&lt;dotslash at packetmixer.de&gt;</highlight></codeline>
+<codeline lineno="5"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Marek<sp/>Lindner<sp/>&lt;lindner_marek at yahoo.de&gt;</highlight></codeline>
+<codeline lineno="6"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Andreas<sp/>Langer<sp/>&lt;andreas_lbg at gmx.de&gt;</highlight></codeline>
+<codeline lineno="7"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="8"><highlight class="comment"><sp/>*<sp/>This<sp/>file<sp/>is<sp/>part<sp/>of<sp/>olsrs3d,<sp/>an<sp/>olsr<sp/>topology<sp/>visualizer<sp/>for<sp/>s3d.</highlight></codeline>
+<codeline lineno="9"><highlight class="comment"><sp/>*<sp/>See<sp/>http://s3d.berlios.de/<sp/>for<sp/>more<sp/>updates.</highlight></codeline>
+<codeline lineno="10"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="11"><highlight class="comment"><sp/>*<sp/>olsrs3d<sp/>is<sp/>free<sp/>software;<sp/>you<sp/>can<sp/>redistribute<sp/>it<sp/>and/or<sp/>modify</highlight></codeline>
+<codeline lineno="12"><highlight class="comment"><sp/>*<sp/>it<sp/>under<sp/>the<sp/>terms<sp/>of<sp/>the<sp/>GNU<sp/>General<sp/>Public<sp/>License<sp/>as<sp/>published<sp/>by</highlight></codeline>
+<codeline lineno="13"><highlight class="comment"><sp/>*<sp/>the<sp/>Free<sp/>Software<sp/>Foundation;<sp/>either<sp/>version<sp/>2<sp/>of<sp/>the<sp/>License,<sp/>or</highlight></codeline>
+<codeline lineno="14"><highlight class="comment"><sp/>*<sp/>(at<sp/>your<sp/>option)<sp/>any<sp/>later<sp/>version.</highlight></codeline>
+<codeline lineno="15"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="16"><highlight class="comment"><sp/>*<sp/>olsrs3d<sp/>is<sp/>distributed<sp/>in<sp/>the<sp/>hope<sp/>that<sp/>it<sp/>will<sp/>be<sp/>useful,</highlight></codeline>
+<codeline lineno="17"><highlight class="comment"><sp/>*<sp/>but<sp/>WITHOUT<sp/>ANY<sp/>WARRANTY;<sp/>without<sp/>even<sp/>the<sp/>implied<sp/>warranty<sp/>of</highlight></codeline>
+<codeline lineno="18"><highlight class="comment"><sp/>*<sp/>MERCHANTABILITY<sp/>or<sp/>FITNESS<sp/>FOR<sp/>A<sp/>PARTICULAR<sp/>PURPOSE.<sp/><sp/>See<sp/>the</highlight></codeline>
+<codeline lineno="19"><highlight class="comment"><sp/>*<sp/>GNU<sp/>General<sp/>Public<sp/>License<sp/>for<sp/>more<sp/>details.</highlight></codeline>
+<codeline lineno="20"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="21"><highlight class="comment"><sp/>*<sp/>You<sp/>should<sp/>have<sp/>received<sp/>a<sp/>copy<sp/>of<sp/>the<sp/>GNU<sp/>General<sp/>Public<sp/>License</highlight></codeline>
+<codeline lineno="22"><highlight class="comment"><sp/>*<sp/>along<sp/>with<sp/>s3d;<sp/>if<sp/>not,<sp/>write<sp/>to<sp/>the<sp/>Free<sp/>Software</highlight></codeline>
+<codeline lineno="23"><highlight class="comment"><sp/>*<sp/>Foundation,<sp/>Inc.,<sp/>51<sp/>Franklin<sp/>St,<sp/>Fifth<sp/>Floor,<sp/>Boston,<sp/>MA<sp/><sp/>02110-1301<sp/><sp/>USA</highlight></codeline>
+<codeline lineno="24"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="25"><highlight class="normal"></highlight></codeline>
+<codeline lineno="26"><highlight class="normal"></highlight></codeline>
+<codeline lineno="27"><highlight class="normal"></highlight></codeline>
+<codeline lineno="28" refid="olsrs3d_8h_1f8c0c53607c56b59e883cb0894e5cde7" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>NAMEMAX<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>128</highlight></codeline>
+<codeline lineno="29" refid="olsrs3d_8h_1e310f74f793edeb882f0c2d8d8b50bb8" refkind="member"><highlight class="preprocessor"></highlight><highlight class="preprocessor">#define<sp/>MAXLINESIZE<sp/>1000<sp/></highlight><highlight class="comment">/*<sp/>lines<sp/>in<sp/>a<sp/>digraph<sp/>just<sp/>shouldn&apos;t<sp/>get<sp/>that<sp/>longer<sp/>...<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="30" refid="olsrs3d_8h_116c16f9369be4a374a3e621f6d13bb16" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>MAXDATASIZE<sp/>100<sp/></highlight><highlight class="comment">/*<sp/>max<sp/>number<sp/>of<sp/>bytes<sp/>we<sp/>can<sp/>get<sp/>at<sp/>once<sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="31"><highlight class="normal"></highlight></codeline>
+<codeline lineno="32"><highlight class="normal"></highlight></codeline>
+<codeline lineno="33"><highlight class="normal"></highlight></codeline>
+<codeline lineno="34"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>linked<sp/>list<sp/>for<sp/>the<sp/>all<sp/>connections<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="35" refid="structolsr__con" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structolsr__con" kindref="compound">olsr_con</ref><sp/>{</highlight></codeline>
+<codeline lineno="36"><highlight class="normal"></highlight></codeline>
+<codeline lineno="37" refid="structolsr__con_1369dfd6eec077d0a6228cd1387135e6e" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structolsr__con" kindref="compound">olsr_con</ref><sp/>*<ref refid="structolsr__con_1369dfd6eec077d0a6228cd1387135e6e" kindref="member">next_olsr_con</ref>;<sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>pointer<sp/>to<sp/>next<sp/>connection<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="38" refid="structolsr__con_10382eebfbf31d5f217572d4907c503cb" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structolsr__con" kindref="compound">olsr_con</ref><sp/>*<ref refid="structolsr__con_10382eebfbf31d5f217572d4907c503cb" kindref="member">prev_olsr_con</ref>;<sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>pointer<sp/>to<sp/>previous<sp/>connection<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="39" refid="structolsr__con_1578882f9337bb0bdad9444e85d56a088" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structolsr__node" kindref="compound">olsr_node</ref><sp/>*<ref refid="structolsr__con_1578882f9337bb0bdad9444e85d56a088" kindref="member">left_olsr_node</ref>;<sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>pointer<sp/>to<sp/>left<sp/>end<sp/>point<sp/>of<sp/>the<sp/>connection<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="40" refid="structolsr__con_1f49aca51c70a95deddf8bb715d63af31" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structolsr__node" kindref="compound">olsr_node</ref><sp/>*<ref refid="structolsr__con_1f49aca51c70a95deddf8bb715d63af31" kindref="member">right_olsr_node</ref>;<sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>pointer<sp/>to<sp/>right<sp/>end<sp/>point<sp/>of<sp/>the<sp/>connection<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="41" refid="structolsr__con_1d93efab11883355b45a0460456991362" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="structolsr__con_1d93efab11883355b45a0460456991362" kindref="member">left_etx</ref>;<sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>etx<sp/>of<sp/>left<sp/>olsr<sp/>node<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="42" refid="structolsr__con_130d90c31e93a79ba37ca51b8d146693a" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="structolsr__con_130d90c31e93a79ba37ca51b8d146693a" kindref="member">right_etx</ref>;<sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>etx<sp/>of<sp/>right<sp/>olsr<sp/>node<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="43" refid="structolsr__con_1fe985b6b83425cb17e801ac00001175e" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="structolsr__con_1fe985b6b83425cb17e801ac00001175e" kindref="member">obj_id</ref>;<sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>id<sp/>of<sp/>connection<sp/>object<sp/>in<sp/>s3d<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="44" refid="structolsr__con_126a11a87df79af8e59e9f5048937b0c1" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="structolsr__con_126a11a87df79af8e59e9f5048937b0c1" kindref="member">color</ref>;</highlight></codeline>
+<codeline lineno="45" refid="structolsr__con_1239f576ba1dae4303a935a296d5adb95" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="structolsr__con_1239f576ba1dae4303a935a296d5adb95" kindref="member">rgb</ref>;</highlight></codeline>
+<codeline lineno="46"><highlight class="normal"></highlight></codeline>
+<codeline lineno="47"><highlight class="normal">};</highlight></codeline>
+<codeline lineno="48"><highlight class="normal"></highlight></codeline>
+<codeline lineno="49"><highlight class="normal"></highlight></codeline>
+<codeline lineno="50"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>linked<sp/>list<sp/>for<sp/>the<sp/>neighbours<sp/>of<sp/>each<sp/>olsr<sp/>node<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="51" refid="structolsr__neigh__list" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structolsr__neigh__list" kindref="compound">olsr_neigh_list</ref><sp/>{</highlight></codeline>
+<codeline lineno="52"><highlight class="normal"></highlight></codeline>
+<codeline lineno="53" refid="structolsr__neigh__list_1f1d533fde49e1ed2ea5299661f5c10c6" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structolsr__neigh__list" kindref="compound">olsr_neigh_list</ref><sp/>*<ref refid="structolsr__neigh__list_1f1d533fde49e1ed2ea5299661f5c10c6" kindref="member">next_olsr_neigh_list</ref>;<sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>pointer<sp/>to<sp/>next<sp/>neighbour<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="54" refid="structolsr__neigh__list_183a291941fbb40293f8e2e5c6b4d11b6" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structolsr__con" kindref="compound">olsr_con</ref><sp/>*<ref refid="structolsr__con" kindref="compound">olsr_con</ref>;<sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>pointer<sp/>to<sp/>the<sp/>connection<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="55"><highlight class="normal"></highlight></codeline>
+<codeline lineno="56"><highlight class="normal">};</highlight></codeline>
+<codeline lineno="57"><highlight class="normal"></highlight></codeline>
+<codeline lineno="58"><highlight class="normal"></highlight></codeline>
+<codeline lineno="59"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>we<sp/>contruct<sp/>a<sp/>binary<sp/>tree<sp/>to<sp/>handle<sp/>the<sp/>nodes<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="60" refid="structolsr__node" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structolsr__node" kindref="compound">olsr_node</ref><sp/>{</highlight></codeline>
+<codeline lineno="61"><highlight class="normal"></highlight></codeline>
+<codeline lineno="62" refid="structolsr__node_1b64ee26ebfa4a3c2719de780b4cabada" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structolsr__node" kindref="compound">olsr_node</ref><sp/>*<ref refid="structolsr__node_1b64ee26ebfa4a3c2719de780b4cabada" kindref="member">left</ref>;</highlight></codeline>
+<codeline lineno="63" refid="structolsr__node_1bc6cf143d12b1e5a204ae64d40c0eb05" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structolsr__node" kindref="compound">olsr_node</ref><sp/>*<ref refid="structolsr__node_1bc6cf143d12b1e5a204ae64d40c0eb05" kindref="member">right</ref>;</highlight></codeline>
+<codeline lineno="64" refid="structolsr__node_159690d75faff5c149faecacb4f4d2a57" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="structolsr__node_159690d75faff5c149faecacb4f4d2a57" kindref="member">ip</ref>[<ref refid="olsrs3d_8h_1f8c0c53607c56b59e883cb0894e5cde7" kindref="member">NAMEMAX</ref>];<sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>host<sp/>ip<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="65" refid="structolsr__node_1c89186513811183436bcd79cdb6d7b4d" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="structolsr__node_1c89186513811183436bcd79cdb6d7b4d" kindref="member">node_type</ref>;<sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>normal<sp/>=<sp/>0,<sp/>internet<sp/>gateway<sp/>=<sp/>1,<sp/>via<sp/>hna<sp/>announced<sp/>network<sp/>=<sp/>2<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="66" refid="structolsr__node_14517a87e4fdbdb58f678743b5684088b" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="structolsr__node_14517a87e4fdbdb58f678743b5684088b" kindref="member">node_type_modified</ref>;<sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>node_type<sp/>modified<sp/>flag<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="67" refid="structolsr__node_11d492aa6f4e75cc100d7a3e2f059d615" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="structolsr__node_11d492aa6f4e75cc100d7a3e2f059d615" kindref="member">last_seen</ref>;<sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>last<sp/>seen<sp/>counter<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="68" refid="structolsr__node_1f19d37e4aa5263be9a1741de24686664" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="structolsr__node_1f19d37e4aa5263be9a1741de24686664" kindref="member">visible</ref>;<sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>is<sp/>this<sp/>node<sp/>visible<sp/>or<sp/>vanished<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="69" refid="structolsr__node_191977704430de9534f7a118d1dfbeb54" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="structolsr__node_191977704430de9534f7a118d1dfbeb54" kindref="member">pos_vec</ref>[3];<sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>position<sp/>vector<sp/>in<sp/>3d<sp/>&quot;space&quot;<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="70" refid="structolsr__node_1f95ed9fca02788c5f4933ac51b4ea147" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="structolsr__node_1f95ed9fca02788c5f4933ac51b4ea147" kindref="member">mov_vec</ref>[3];<sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>move<sp/>vector<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="71" refid="structolsr__node_115be0912065801026e7b4411af561788" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="structolsr__node_115be0912065801026e7b4411af561788" kindref="member">obj_id</ref>;<sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>id<sp/>of<sp/>node<sp/>object<sp/>in<sp/>s3d<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="72" refid="structolsr__node_1f2e3f729be82b64001867038bbe8012a" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="structolsr__node_1f2e3f729be82b64001867038bbe8012a" kindref="member">desc_id</ref>;<sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>id<sp/>of<sp/>node<sp/>description<sp/>object<sp/>in<sp/>s3d<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="73" refid="structolsr__node_1c2a66c5312cf64fec10f6b8903dbd966" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="structolsr__node_1c2a66c5312cf64fec10f6b8903dbd966" kindref="member">desc_length</ref>;<sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>length<sp/>of<sp/>node<sp/>description<sp/>object<sp/>in<sp/>s3d<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="74" refid="structolsr__node_13b80ce78a06be6aba5a1f93887442764" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structolsr__neigh__list" kindref="compound">olsr_neigh_list</ref><sp/>*<ref refid="structolsr__neigh__list" kindref="compound">olsr_neigh_list</ref>;<sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>pointer<sp/>to<sp/>first<sp/>neighbour<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="75"><highlight class="normal"></highlight></codeline>
+<codeline lineno="76"><highlight class="normal">};</highlight></codeline>
+<codeline lineno="77"><highlight class="normal"></highlight></codeline>
+<codeline lineno="78"><highlight class="normal"></highlight></codeline>
+<codeline lineno="79" refid="structObj__to__ip" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structObj__to__ip" kindref="compound">Obj_to_ip</ref><sp/>{</highlight></codeline>
+<codeline lineno="80" refid="structObj__to__ip_123759dec76c683ac720f937fea4e4d41" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="structObj__to__ip_123759dec76c683ac720f937fea4e4d41" kindref="member">id</ref>;</highlight></codeline>
+<codeline lineno="81" refid="structObj__to__ip_1207d8f9a609e3e20b4cbd9a7976dcd18" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structolsr__node" kindref="compound">olsr_node</ref><sp/>*<ref refid="structolsr__node" kindref="compound">olsr_node</ref>;</highlight></codeline>
+<codeline lineno="82" refid="structObj__to__ip_1da076aa87c753db90520204360bf326a" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structObj__to__ip" kindref="compound">Obj_to_ip</ref><sp/>*<ref refid="structObj__to__ip_1da076aa87c753db90520204360bf326a" kindref="member">next</ref>;</highlight></codeline>
+<codeline lineno="83" refid="structObj__to__ip_1c41475dd4632807df16315bad4309333" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structObj__to__ip" kindref="compound">Obj_to_ip</ref><sp/>*<ref refid="structObj__to__ip_1c41475dd4632807df16315bad4309333" kindref="member">prev</ref>;</highlight></codeline>
+<codeline lineno="84"><highlight class="normal">};</highlight></codeline>
+<codeline lineno="85"><highlight class="normal"></highlight></codeline>
+<codeline lineno="86"><highlight class="normal"></highlight></codeline>
+<codeline lineno="87"><highlight class="normal"></highlight></codeline>
+<codeline lineno="88"><highlight class="normal"></highlight><highlight class="keyword">extern</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="main_8c_1923774364cedbc16baa0bc05e9be136c" kindref="member">Debug</ref>;</highlight></codeline>
+<codeline lineno="89"><highlight class="normal"></highlight></codeline>
+<codeline lineno="90"><highlight class="normal"></highlight><highlight class="keyword">extern</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structolsr__con" kindref="compound">olsr_con</ref><sp/>*<ref refid="main_8c_10643a36891539929d987e2ee83ff81d1" kindref="member">Con_begin</ref>;<sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>begin<sp/>of<sp/>connection<sp/>list<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="91"><highlight class="normal"></highlight><highlight class="keyword">extern</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structolsr__node" kindref="compound">olsr_node</ref><sp/>*<ref refid="main_8c_1c5c5c6846587092d0c23b58b558e680c" kindref="member">Olsr_root</ref>;<sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>top<sp/>of<sp/>olsr<sp/>node<sp/>tree<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="92"><highlight class="normal"></highlight><highlight class="keyword">extern</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structObj__to__ip" kindref="compound">Obj_to_ip</ref><sp/>*<ref refid="main_8c_19494e9e8cbdc4eceb86cb33ff0006785" kindref="member">Obj_to_ip_head</ref>,<sp/>*<ref refid="main_8c_1236217b97f5fe65457d8b22c73c5073d" kindref="member">Obj_to_ip_end</ref>,*<ref refid="main_8c_16a8ff2c3957f5f0ab7dcafcd72b8bd57" kindref="member">List_ptr</ref>;<sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>struct<sp/>list<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="93"><highlight class="normal"></highlight></codeline>
+<codeline lineno="94"><highlight class="normal"></highlight><highlight class="keyword">extern</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_15eba8148fe9257c34665ed364b595fdb" kindref="member">Olsr_node_obj</ref>;</highlight></codeline>
+<codeline lineno="95"><highlight class="normal"></highlight><highlight class="keyword">extern</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_1b02228665cef19331d409b0d8a831531" kindref="member">Olsr_node_inet_obj</ref>;</highlight></codeline>
+<codeline lineno="96"><highlight class="normal"></highlight><highlight class="keyword">extern</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_1c03c9b38147e4231238c44f4b5fbdff7" kindref="member">Olsr_node_hna_net</ref>;</highlight></codeline>
+<codeline lineno="97"><highlight class="normal"></highlight></codeline>
+<codeline lineno="98"><highlight class="normal"></highlight><highlight class="keyword">extern</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="main_8c_14dfd0657ff868fa02113bcd3335acff1" kindref="member">Olsr_node_count_obj</ref>;</highlight></codeline>
+<codeline lineno="99"><highlight class="normal"></highlight><highlight class="keyword">extern</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="main_8c_186c048bc4aaab319f4d61f7c0e1f056f" kindref="member">Olsr_node_count</ref>;</highlight></codeline>
+<codeline lineno="100"><highlight class="normal"></highlight><highlight class="keyword">extern</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="main_8c_158acad60c78b63554c696703227d0b7b" kindref="member">Last_olsr_node_count</ref>;</highlight></codeline>
+<codeline lineno="101"><highlight class="normal"></highlight></codeline>
+<codeline lineno="102"><highlight class="normal"></highlight><highlight class="keyword">extern</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="main_8c_15bcc20f84efa7bd4aafc56a629f2eff3" kindref="member">Net_read_count</ref>;</highlight></codeline>
+<codeline lineno="103"><highlight class="normal"></highlight></codeline>
+<codeline lineno="104"><highlight class="normal"></highlight><highlight class="keyword">extern</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="main_8c_1e113d40abb6f4dd73e4b1253917a1942" kindref="member">ZeroPoint</ref>;</highlight></codeline>
+<codeline lineno="105"><highlight class="normal"></highlight></codeline>
+<codeline lineno="106"><highlight class="normal"></highlight><highlight class="keyword">extern</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="main_8c_1f23a6ad2da4511ef430c4f522ae9f4cc" kindref="member">Bottom</ref>,<sp/><ref refid="main_8c_16f68bad9075598ca8ede1827c6832376" kindref="member">Left</ref>;</highlight></codeline>
+<codeline lineno="107"><highlight class="normal"></highlight></codeline>
+<codeline lineno="108"><highlight class="normal"></highlight><highlight class="keyword">extern</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="olsrs3d_8h_100f1cd38b187535569d0354f2506fb74" kindref="member">lbuf</ref>[<ref refid="olsrs3d_8h_1e310f74f793edeb882f0c2d8d8b50bb8" kindref="member">MAXLINESIZE</ref>];</highlight></codeline>
+<codeline lineno="109"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>process<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="110"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="olsrs3d_8h_1edfb2ae44af543946842187ced1cd47e" kindref="member">lst_initialize</ref>();</highlight></codeline>
+<codeline lineno="111"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="olsrs3d_8h_1d01a29bcb2e2daed6fcc6516c328f141" kindref="member">lst_add</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">id</highlight><highlight class="normal">,</highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/><ref refid="structolsr__node" kindref="compound">olsr_node</ref><sp/>**<ref refid="structolsr__node" kindref="compound">olsr_node</ref>);</highlight></codeline>
+<codeline lineno="112"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="olsrs3d_8h_1febf2594bdfe9ec411d0c04c9cd951b3" kindref="member">lst_del</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">id</highlight><highlight class="normal">);</highlight></codeline>
+<codeline lineno="113"><highlight class="normal"></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structolsr__node" kindref="compound">olsr_node</ref><sp/>**<ref refid="olsrs3d_8h_1ef8aff26d4e096ef0880c204c13309f0" kindref="member">lst_search</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">id</highlight><highlight class="normal">);</highlight></codeline>
+<codeline lineno="114"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="olsrs3d_8h_1a015f713ca02d8b76a52175b4128d3e8" kindref="member">lst_out</ref>();</highlight></codeline>
+<codeline lineno="115"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="olsrs3d_8h_1576c61914d53ad9035e74317dbb15903" kindref="member">move_lst_ptr</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>*</highlight><highlight class="keywordtype">id</highlight><highlight class="normal">);</highlight></codeline>
+<codeline lineno="116"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="olsrs3d_8h_16b4e9b6718b671f6330c2e501c60d3c1" kindref="member">process_main</ref>();</highlight></codeline>
+<codeline lineno="117"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>net<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="118"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="net_8c_163c933342efd8cac7f272b92d8acab05" kindref="member">net_init</ref>(</highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*host);</highlight></codeline>
+<codeline lineno="119"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="net_8c_1b8a768eba717722a3d860c01f69fbbc9" kindref="member">net_main</ref>();</highlight></codeline>
+<codeline lineno="120"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="net_8c_198aebc7a8515c76551eb15ecd465b923" kindref="member">net_quit</ref>();</highlight></codeline>
+<codeline lineno="121"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>main<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="122"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="main_8c_1be0835e7acb76ea987ac80769302d90a" kindref="member">out_of_mem</ref>(<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>);</highlight></codeline>
+<codeline lineno="123"><highlight class="normal"></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structolsr__node" kindref="compound">olsr_node</ref><sp/>**<ref refid="olsrs3d_8h_1ef8aff26d4e096ef0880c204c13309f0" kindref="member">lst_search</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">id</highlight><highlight class="normal">);</highlight></codeline>
+<codeline lineno="124"><highlight class="normal"></highlight></codeline>
+    </programlisting>
+    <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h"/>
+  </compounddef>
+</doxygen>

Added: trunk/apps/olsrs3d/doxygen/xml/process_8c.xml
===================================================================
--- trunk/apps/olsrs3d/doxygen/xml/process_8c.xml	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/xml/process_8c.xml	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,781 @@
+<?xml version='1.0' encoding='iso-8859-1' standalone='no'?>
+<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.4.6">
+  <compounddef id="process_8c" kind="file">
+    <compoundname>process.c</compoundname>
+    <includes local="no">stdio.h</includes>
+    <includes local="no">string.h</includes>
+    <includes local="no">stdlib.h</includes>
+    <includes local="no">s3d.h</includes>
+    <includes refid="olsrs3d_8h" local="yes">olsrs3d.h</includes>
+    <incdepgraph>
+      <node id="29">
+        <label>s3d/apps/olsrs3d/process.c</label>
+        <link refid="process.c"/>
+        <childnode refid="30" relation="include">
+        </childnode>
+        <childnode refid="31" relation="include">
+        </childnode>
+        <childnode refid="32" relation="include">
+        </childnode>
+        <childnode refid="33" relation="include">
+        </childnode>
+        <childnode refid="34" relation="include">
+        </childnode>
+      </node>
+      <node id="32">
+        <label>stdlib.h</label>
+      </node>
+      <node id="34">
+        <label>olsrs3d.h</label>
+        <link refid="olsrs3d_8h"/>
+      </node>
+      <node id="31">
+        <label>string.h</label>
+      </node>
+      <node id="33">
+        <label>s3d.h</label>
+      </node>
+      <node id="30">
+        <label>stdio.h</label>
+      </node>
+    </incdepgraph>
+      <sectiondef kind="func">
+      <memberdef kind="function" id="process_8c_14c780ee64b12fa5531a56edfb5ffcc00" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
+        <type>int</type>
+        <definition>int add_olsr_con</definition>
+        <argsstring>(struct olsr_node *con_from, struct olsr_node *con_to, float etx)</argsstring>
+        <name>add_olsr_con</name>
+        <param>
+          <type>struct <ref refid="structolsr__node" kindref="compound">olsr_node</ref> *</type>
+          <declname>con_from</declname>
+        </param>
+        <param>
+          <type>struct <ref refid="structolsr__node" kindref="compound">olsr_node</ref> *</type>
+          <declname>con_to</declname>
+        </param>
+        <param>
+          <type>float</type>
+          <declname>etx</declname>
+        </param>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/process.c" line="48" bodyfile="/home/bigm/s3d/apps/olsrs3d/process.c" bodystart="48" bodyend="140"/>
+        <references refid="main_8c_10643a36891539929d987e2ee83ff81d1" compoundref="main_8c" startline="45">Con_begin</references>
+        <references refid="structolsr__node_159690d75faff5c149faecacb4f4d2a57" compoundref="olsrs3d_8h" startline="64">olsr_node::ip</references>
+        <references refid="structolsr__con_1d93efab11883355b45a0460456991362" compoundref="olsrs3d_8h" startline="41">olsr_con::left_etx</references>
+        <references refid="olsrs3d_8h_1f8c0c53607c56b59e883cb0894e5cde7" compoundref="olsrs3d_8h" startline="28">NAMEMAX</references>
+        <references refid="structolsr__con_1369dfd6eec077d0a6228cd1387135e6e" compoundref="olsrs3d_8h" startline="37">olsr_con::next_olsr_con</references>
+        <references refid="structolsr__neigh__list_1f1d533fde49e1ed2ea5299661f5c10c6" compoundref="olsrs3d_8h" startline="53">olsr_neigh_list::next_olsr_neigh_list</references>
+        <references refid="structolsr__neigh__list_183a291941fbb40293f8e2e5c6b4d11b6" compoundref="olsrs3d_8h" startline="54">olsr_neigh_list::olsr_con</references>
+        <references refid="main_8c_1be0835e7acb76ea987ac80769302d90a" compoundref="main_8c" startline="94" endline="99">out_of_mem</references>
+        <references refid="structolsr__con_10382eebfbf31d5f217572d4907c503cb" compoundref="olsrs3d_8h" startline="38">olsr_con::prev_olsr_con</references>
+        <references refid="main_8c_1e113d40abb6f4dd73e4b1253917a1942" compoundref="main_8c" startline="62">ZeroPoint</references>
+        <referencedby refid="process_8c_16b4e9b6718b671f6330c2e501c60d3c1" compoundref="process_8c" startline="368" endline="487">process_main</referencedby>
+      </memberdef>
+      <memberdef kind="function" id="process_8c_17ba929b35f03f5921272b4e5e821ade2" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
+        <type>void *</type>
+        <definition>void* get_olsr_node</definition>
+        <argsstring>(struct olsr_node **olsr_node, char *ip)</argsstring>
+        <name>get_olsr_node</name>
+        <param>
+          <type>struct <ref refid="structolsr__node" kindref="compound">olsr_node</ref> **</type>
+          <declname>olsr_node</declname>
+        </param>
+        <param>
+          <type>char *</type>
+          <declname>ip</declname>
+        </param>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/process.c" line="155" bodyfile="/home/bigm/s3d/apps/olsrs3d/process.c" bodystart="155" bodyend="231"/>
+        <references refid="main_8c_1923774364cedbc16baa0bc05e9be136c" compoundref="main_8c" startline="41">Debug</references>
+        <references refid="structolsr__node_1b64ee26ebfa4a3c2719de780b4cabada" compoundref="olsrs3d_8h" startline="62">olsr_node::left</references>
+        <references refid="olsrs3d_8h_1f8c0c53607c56b59e883cb0894e5cde7" compoundref="olsrs3d_8h" startline="28">NAMEMAX</references>
+        <references refid="main_8c_186c048bc4aaab319f4d61f7c0e1f056f" compoundref="main_8c" startline="49">Olsr_node_count</references>
+        <references refid="main_8c_1be0835e7acb76ea987ac80769302d90a" compoundref="main_8c" startline="94" endline="99">out_of_mem</references>
+        <references refid="structolsr__node_1bc6cf143d12b1e5a204ae64d40c0eb05" compoundref="olsrs3d_8h" startline="63">olsr_node::right</references>
+        <referencedby refid="process_8c_16b4e9b6718b671f6330c2e501c60d3c1" compoundref="process_8c" startline="368" endline="487">process_main</referencedby>
+      </memberdef>
+      <memberdef kind="function" id="process_8c_1d01a29bcb2e2daed6fcc6516c328f141" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
+        <type>void</type>
+        <definition>void lst_add</definition>
+        <argsstring>(int id, struct olsr_node **olsr_node)</argsstring>
+        <name>lst_add</name>
+        <param>
+          <type>int</type>
+          <declname>id</declname>
+        </param>
+        <param>
+          <type>struct <ref refid="structolsr__node" kindref="compound">olsr_node</ref> **</type>
+          <declname>olsr_node</declname>
+        </param>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/process.c" line="259" bodyfile="/home/bigm/s3d/apps/olsrs3d/process.c" bodystart="259" bodyend="272"/>
+        <references refid="main_8c_16a8ff2c3957f5f0ab7dcafcd72b8bd57" compoundref="main_8c" startline="47">List_ptr</references>
+        <references refid="olsrs3d_8h_1576c61914d53ad9035e74317dbb15903" compoundref="process_8c" startline="303" endline="334">move_lst_ptr</references>
+        <references refid="structObj__to__ip_1da076aa87c753db90520204360bf326a" compoundref="olsrs3d_8h" startline="82">Obj_to_ip::next</references>
+        <references refid="structObj__to__ip_1207d8f9a609e3e20b4cbd9a7976dcd18" compoundref="olsrs3d_8h" startline="81">Obj_to_ip::olsr_node</references>
+        <references refid="main_8c_1be0835e7acb76ea987ac80769302d90a" compoundref="main_8c" startline="94" endline="99">out_of_mem</references>
+        <references refid="structObj__to__ip_1c41475dd4632807df16315bad4309333" compoundref="olsrs3d_8h" startline="83">Obj_to_ip::prev</references>
+        <referencedby refid="main_8c_1de55269b71a792259ef22763327686b9" compoundref="main_8c" startline="186" endline="390">handle_olsr_node</referencedby>
+      </memberdef>
+      <memberdef kind="function" id="process_8c_1febf2594bdfe9ec411d0c04c9cd951b3" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
+        <type>void</type>
+        <definition>void lst_del</definition>
+        <argsstring>(int id)</argsstring>
+        <name>lst_del</name>
+        <param>
+          <type>int</type>
+          <declname>id</declname>
+        </param>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/process.c" line="281" bodyfile="/home/bigm/s3d/apps/olsrs3d/process.c" bodystart="281" bodyend="294"/>
+        <references refid="structObj__to__ip_123759dec76c683ac720f937fea4e4d41" compoundref="olsrs3d_8h" startline="80">Obj_to_ip::id</references>
+        <references refid="main_8c_16a8ff2c3957f5f0ab7dcafcd72b8bd57" compoundref="main_8c" startline="47">List_ptr</references>
+        <references refid="olsrs3d_8h_1576c61914d53ad9035e74317dbb15903" compoundref="process_8c" startline="303" endline="334">move_lst_ptr</references>
+        <references refid="structObj__to__ip_1da076aa87c753db90520204360bf326a" compoundref="olsrs3d_8h" startline="82">Obj_to_ip::next</references>
+        <references refid="structObj__to__ip_1c41475dd4632807df16315bad4309333" compoundref="olsrs3d_8h" startline="83">Obj_to_ip::prev</references>
+        <referencedby refid="main_8c_1de55269b71a792259ef22763327686b9" compoundref="main_8c" startline="186" endline="390">handle_olsr_node</referencedby>
+      </memberdef>
+      <memberdef kind="function" id="process_8c_1edfb2ae44af543946842187ced1cd47e" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
+        <type>void</type>
+        <definition>void lst_initialize</definition>
+        <argsstring>()</argsstring>
+        <name>lst_initialize</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/process.c" line="239" bodyfile="/home/bigm/s3d/apps/olsrs3d/process.c" bodystart="239" bodyend="249"/>
+        <references refid="structObj__to__ip_123759dec76c683ac720f937fea4e4d41" compoundref="olsrs3d_8h" startline="80">Obj_to_ip::id</references>
+        <references refid="main_8c_16a8ff2c3957f5f0ab7dcafcd72b8bd57" compoundref="main_8c" startline="47">List_ptr</references>
+        <references refid="structObj__to__ip_1da076aa87c753db90520204360bf326a" compoundref="olsrs3d_8h" startline="82">Obj_to_ip::next</references>
+        <references refid="main_8c_1236217b97f5fe65457d8b22c73c5073d" compoundref="main_8c" startline="47">Obj_to_ip_end</references>
+        <references refid="main_8c_19494e9e8cbdc4eceb86cb33ff0006785" compoundref="main_8c" startline="47">Obj_to_ip_head</references>
+        <references refid="main_8c_1be0835e7acb76ea987ac80769302d90a" compoundref="main_8c" startline="94" endline="99">out_of_mem</references>
+        <references refid="structObj__to__ip_1c41475dd4632807df16315bad4309333" compoundref="olsrs3d_8h" startline="83">Obj_to_ip::prev</references>
+        <referencedby refid="main_8c_10ddf1224851353fc92bfbff6f499fa97" compoundref="main_8c" startline="804" endline="867">main</referencedby>
+      </memberdef>
+      <memberdef kind="function" id="process_8c_1a015f713ca02d8b76a52175b4128d3e8" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
+        <type>void</type>
+        <definition>void lst_out</definition>
+        <argsstring>()</argsstring>
+        <name>lst_out</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/process.c" line="359" bodyfile="/home/bigm/s3d/apps/olsrs3d/process.c" bodystart="359" bodyend="366"/>
+        <references refid="structObj__to__ip_123759dec76c683ac720f937fea4e4d41" compoundref="olsrs3d_8h" startline="80">Obj_to_ip::id</references>
+        <references refid="structObj__to__ip_1da076aa87c753db90520204360bf326a" compoundref="olsrs3d_8h" startline="82">Obj_to_ip::next</references>
+        <references refid="main_8c_19494e9e8cbdc4eceb86cb33ff0006785" compoundref="main_8c" startline="47">Obj_to_ip_head</references>
+        <referencedby refid="main_8c_12f5982986645c1e7a202d72bc5e633eb" compoundref="main_8c" startline="690" endline="738">keypress</referencedby>
+      </memberdef>
+      <memberdef kind="function" id="process_8c_1b74d5229fcc3a39626609ac9f12510dd" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
+        <type><ref refid="structolsr__node" kindref="compound">olsr_node</ref> **</type>
+        <definition>struct olsr_node** lst_search</definition>
+        <argsstring>(int id)</argsstring>
+        <name>lst_search</name>
+        <param>
+          <type>int</type>
+          <declname>id</declname>
+        </param>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/process.c" line="349" bodyfile="/home/bigm/s3d/apps/olsrs3d/process.c" bodystart="349" bodyend="357"/>
+        <references refid="main_8c_16a8ff2c3957f5f0ab7dcafcd72b8bd57" compoundref="main_8c" startline="47">List_ptr</references>
+        <references refid="olsrs3d_8h_1576c61914d53ad9035e74317dbb15903" compoundref="process_8c" startline="303" endline="334">move_lst_ptr</references>
+        <references refid="structObj__to__ip_1207d8f9a609e3e20b4cbd9a7976dcd18" compoundref="olsrs3d_8h" startline="81">Obj_to_ip::olsr_node</references>
+        <referencedby refid="main_8c_1ddbd46dad32b89cec68daa03a08f3582" compoundref="main_8c" startline="746" endline="768">object_click</referencedby>
+      </memberdef>
+      <memberdef kind="function" id="process_8c_1576c61914d53ad9035e74317dbb15903" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
+        <type>void</type>
+        <definition>void move_lst_ptr</definition>
+        <argsstring>(int *id)</argsstring>
+        <name>move_lst_ptr</name>
+        <param>
+          <type>int *</type>
+          <declname>id</declname>
+        </param>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/process.c" line="303" bodyfile="/home/bigm/s3d/apps/olsrs3d/process.c" bodystart="303" bodyend="334"/>
+        <references refid="structObj__to__ip_123759dec76c683ac720f937fea4e4d41" compoundref="olsrs3d_8h" startline="80">Obj_to_ip::id</references>
+        <references refid="main_8c_16a8ff2c3957f5f0ab7dcafcd72b8bd57" compoundref="main_8c" startline="47">List_ptr</references>
+        <references refid="structObj__to__ip_1da076aa87c753db90520204360bf326a" compoundref="olsrs3d_8h" startline="82">Obj_to_ip::next</references>
+        <references refid="main_8c_1236217b97f5fe65457d8b22c73c5073d" compoundref="main_8c" startline="47">Obj_to_ip_end</references>
+        <references refid="main_8c_19494e9e8cbdc4eceb86cb33ff0006785" compoundref="main_8c" startline="47">Obj_to_ip_head</references>
+        <references refid="structObj__to__ip_1c41475dd4632807df16315bad4309333" compoundref="olsrs3d_8h" startline="83">Obj_to_ip::prev</references>
+        <referencedby refid="process_8c_1d01a29bcb2e2daed6fcc6516c328f141" compoundref="process_8c" startline="259" endline="272">lst_add</referencedby>
+        <referencedby refid="process_8c_1febf2594bdfe9ec411d0c04c9cd951b3" compoundref="process_8c" startline="281" endline="294">lst_del</referencedby>
+        <referencedby refid="process_8c_1b74d5229fcc3a39626609ac9f12510dd" compoundref="process_8c" startline="349" endline="357">lst_search</referencedby>
+      </memberdef>
+      <memberdef kind="function" id="process_8c_16b4e9b6718b671f6330c2e501c60d3c1" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
+        <type>int</type>
+        <definition>int process_main</definition>
+        <argsstring>()</argsstring>
+        <name>process_main</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/process.c" line="368" bodyfile="/home/bigm/s3d/apps/olsrs3d/process.c" bodystart="368" bodyend="487"/>
+        <references refid="process_8c_14c780ee64b12fa5531a56edfb5ffcc00" compoundref="process_8c" startline="48" endline="140">add_olsr_con</references>
+        <references refid="main_8c_1923774364cedbc16baa0bc05e9be136c" compoundref="main_8c" startline="41">Debug</references>
+        <references refid="process_8c_17ba929b35f03f5921272b4e5e821ade2" compoundref="process_8c" startline="155" endline="231">get_olsr_node</references>
+        <references refid="structolsr__node_159690d75faff5c149faecacb4f4d2a57" compoundref="olsrs3d_8h" startline="64">olsr_node::ip</references>
+        <references refid="olsrs3d_8h_100f1cd38b187535569d0354f2506fb74" compoundref="process_8c" startline="34">lbuf</references>
+        <references refid="olsrs3d_8h_1f8c0c53607c56b59e883cb0894e5cde7" compoundref="olsrs3d_8h" startline="28">NAMEMAX</references>
+        <references refid="structolsr__node_1c89186513811183436bcd79cdb6d7b4d" compoundref="olsrs3d_8h" startline="65">olsr_node::node_type</references>
+        <references refid="structolsr__node_14517a87e4fdbdb58f678743b5684088b" compoundref="olsrs3d_8h" startline="66">olsr_node::node_type_modified</references>
+        <references refid="main_8c_1c5c5c6846587092d0c23b58b558e680c" compoundref="main_8c" startline="46">Olsr_root</references>
+        <references refid="structolsr__node_1f19d37e4aa5263be9a1741de24686664" compoundref="olsrs3d_8h" startline="68">olsr_node::visible</references>
+        <referencedby refid="olsrs3d_8h_1b8a768eba717722a3d860c01f69fbbc9" compoundref="net_8c" startline="74" endline="120">net_main</referencedby>
+      </memberdef>
+      </sectiondef>
+      <sectiondef kind="var">
+      <memberdef kind="variable" id="process_8c_100f1cd38b187535569d0354f2506fb74" prot="public" static="no" mutable="no">
+        <type>char</type>
+        <definition>char lbuf[MAXLINESIZE]</definition>
+        <argsstring>[MAXLINESIZE]</argsstring>
+        <name>lbuf</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/process.c" line="34" bodyfile="/home/bigm/s3d/apps/olsrs3d/process.c" bodystart="34" bodyend="-1"/>
+        <referencedby refid="main_8c_10ddf1224851353fc92bfbff6f499fa97" compoundref="main_8c" startline="804" endline="867">main</referencedby>
+        <referencedby refid="olsrs3d_8h_1b8a768eba717722a3d860c01f69fbbc9" compoundref="net_8c" startline="74" endline="120">net_main</referencedby>
+        <referencedby refid="process_8c_16b4e9b6718b671f6330c2e501c60d3c1" compoundref="process_8c" startline="368" endline="487">process_main</referencedby>
+      </memberdef>
+      </sectiondef>
+    <briefdescription>
+    </briefdescription>
+    <detaileddescription>
+    </detaileddescription>
+    <programlisting>
+<codeline lineno="1"><highlight class="comment">/*</highlight></codeline>
+<codeline lineno="2"><highlight class="comment"><sp/>*<sp/>process.c</highlight></codeline>
+<codeline lineno="3"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="4"><highlight class="comment"><sp/>*<sp/>Copyright<sp/>(C)<sp/>2004-2006<sp/>Simon<sp/>Wunderlich<sp/>&lt;dotslash at packetmixer.de&gt;</highlight></codeline>
+<codeline lineno="5"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Marek<sp/>Lindner<sp/>&lt;lindner_marek at yahoo.de&gt;</highlight></codeline>
+<codeline lineno="6"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Andreas<sp/>Langer<sp/>&lt;andreas_lbg at gmx.de&gt;</highlight></codeline>
+<codeline lineno="7"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="8"><highlight class="comment"><sp/>*<sp/>This<sp/>file<sp/>is<sp/>part<sp/>of<sp/>olsrs3d,<sp/>an<sp/>olsr<sp/>topology<sp/>visualizer<sp/>for<sp/>s3d.</highlight></codeline>
+<codeline lineno="9"><highlight class="comment"><sp/>*<sp/>See<sp/>http://s3d.berlios.de/<sp/>for<sp/>more<sp/>updates.</highlight></codeline>
+<codeline lineno="10"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="11"><highlight class="comment"><sp/>*<sp/>olsrs3d<sp/>is<sp/>free<sp/>software;<sp/>you<sp/>can<sp/>redistribute<sp/>it<sp/>and/or<sp/>modify</highlight></codeline>
+<codeline lineno="12"><highlight class="comment"><sp/>*<sp/>it<sp/>under<sp/>the<sp/>terms<sp/>of<sp/>the<sp/>GNU<sp/>General<sp/>Public<sp/>License<sp/>as<sp/>published<sp/>by</highlight></codeline>
+<codeline lineno="13"><highlight class="comment"><sp/>*<sp/>the<sp/>Free<sp/>Software<sp/>Foundation;<sp/>either<sp/>version<sp/>2<sp/>of<sp/>the<sp/>License,<sp/>or</highlight></codeline>
+<codeline lineno="14"><highlight class="comment"><sp/>*<sp/>(at<sp/>your<sp/>option)<sp/>any<sp/>later<sp/>version.</highlight></codeline>
+<codeline lineno="15"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="16"><highlight class="comment"><sp/>*<sp/>olsrs3d<sp/>is<sp/>distributed<sp/>in<sp/>the<sp/>hope<sp/>that<sp/>it<sp/>will<sp/>be<sp/>useful,</highlight></codeline>
+<codeline lineno="17"><highlight class="comment"><sp/>*<sp/>but<sp/>WITHOUT<sp/>ANY<sp/>WARRANTY;<sp/>without<sp/>even<sp/>the<sp/>implied<sp/>warranty<sp/>of</highlight></codeline>
+<codeline lineno="18"><highlight class="comment"><sp/>*<sp/>MERCHANTABILITY<sp/>or<sp/>FITNESS<sp/>FOR<sp/>A<sp/>PARTICULAR<sp/>PURPOSE.<sp/><sp/>See<sp/>the</highlight></codeline>
+<codeline lineno="19"><highlight class="comment"><sp/>*<sp/>GNU<sp/>General<sp/>Public<sp/>License<sp/>for<sp/>more<sp/>details.</highlight></codeline>
+<codeline lineno="20"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="21"><highlight class="comment"><sp/>*<sp/>You<sp/>should<sp/>have<sp/>received<sp/>a<sp/>copy<sp/>of<sp/>the<sp/>GNU<sp/>General<sp/>Public<sp/>License</highlight></codeline>
+<codeline lineno="22"><highlight class="comment"><sp/>*<sp/>along<sp/>with<sp/>s3d;<sp/>if<sp/>not,<sp/>write<sp/>to<sp/>the<sp/>Free<sp/>Software</highlight></codeline>
+<codeline lineno="23"><highlight class="comment"><sp/>*<sp/>Foundation,<sp/>Inc.,<sp/>51<sp/>Franklin<sp/>St,<sp/>Fifth<sp/>Floor,<sp/>Boston,<sp/>MA<sp/><sp/>02110-1301<sp/><sp/>USA</highlight></codeline>
+<codeline lineno="24"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="25"><highlight class="normal"></highlight></codeline>
+<codeline lineno="26"><highlight class="normal"></highlight></codeline>
+<codeline lineno="27"><highlight class="normal"></highlight></codeline>
+<codeline lineno="28"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;stdio.h&gt;</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>NULL<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="29"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;string.h&gt;</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>strlen(),<sp/>memmove()<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="30"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;stdlib.h&gt;</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>rand(),<sp/>malloc(),<sp/>realloc(),<sp/>free()<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="31"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;s3d.h&gt;</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="32"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="olsrs3d_8h" kindref="compound">olsrs3d.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="33"><highlight class="normal"></highlight></codeline>
+<codeline lineno="34" refid="process_8c_100f1cd38b187535569d0354f2506fb74" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/><ref refid="olsrs3d_8h_100f1cd38b187535569d0354f2506fb74" kindref="member">lbuf</ref>[<ref refid="olsrs3d_8h_1e310f74f793edeb882f0c2d8d8b50bb8" kindref="member">MAXLINESIZE</ref>];</highlight></codeline>
+<codeline lineno="35"><highlight class="normal"></highlight></codeline>
+<codeline lineno="36"><highlight class="normal"></highlight></codeline>
+<codeline lineno="37"><highlight class="normal"></highlight></codeline>
+<codeline lineno="38"><highlight class="normal"></highlight><highlight class="comment">/***</highlight></codeline>
+<codeline lineno="39"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="40"><highlight class="comment"><sp/>*<sp/>create<sp/>new<sp/>or<sp/>alter<sp/>connection<sp/>between<sp/>2<sp/>nodes</highlight></codeline>
+<codeline lineno="41"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="42"><highlight class="comment"><sp/>*<sp/><sp/><sp/>con_from<sp/>=&gt;<sp/><sp/><sp/>current<sp/>node</highlight></codeline>
+<codeline lineno="43"><highlight class="comment"><sp/>*<sp/><sp/><sp/>con_to<sp/><sp/><sp/>=&gt;<sp/><sp/><sp/>node<sp/>to<sp/>connect<sp/>to</highlight></codeline>
+<codeline lineno="44"><highlight class="comment"><sp/>*<sp/><sp/><sp/>etx<sp/><sp/><sp/><sp/><sp/><sp/>=&gt;<sp/><sp/><sp/>ETX</highlight></codeline>
+<codeline lineno="45"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="46"><highlight class="comment"><sp/>***/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="47"><highlight class="normal"></highlight></codeline>
+<codeline lineno="48" refid="process_8c_14c780ee64b12fa5531a56edfb5ffcc00" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="process_8c_14c780ee64b12fa5531a56edfb5ffcc00" kindref="member">add_olsr_con</ref>(<sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/><ref refid="structolsr__node" kindref="compound">olsr_node</ref><sp/>*con_from,<sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/><ref refid="structolsr__node" kindref="compound">olsr_node</ref><sp/>*con_to,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>etx<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="49"><highlight class="normal"></highlight></codeline>
+<codeline lineno="50"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structolsr__con" kindref="compound">olsr_con</ref><sp/>**<ref refid="structolsr__con" kindref="compound">olsr_con</ref><sp/>=<sp/>&amp;<ref refid="main_8c_10643a36891539929d987e2ee83ff81d1" kindref="member">Con_begin</ref>;</highlight></codeline>
+<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal">olsr_con<sp/>*<ref refid="structolsr__con_10382eebfbf31d5f217572d4907c503cb" kindref="member">prev_olsr_con</ref><sp/>=<sp/>NULL;<sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>previous<sp/>olsr<sp/>connection<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="52"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structolsr__neigh__list" kindref="compound">olsr_neigh_list</ref><sp/>**<ref refid="structolsr__neigh__list" kindref="compound">olsr_neigh_list</ref>;</highlight></codeline>
+<codeline lineno="53"><highlight class="normal"></highlight></codeline>
+<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(<sp/>(*<ref refid="structolsr__neigh__list_183a291941fbb40293f8e2e5c6b4d11b6" kindref="member">olsr_con</ref>)<sp/>!=<sp/>NULL<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="55"><highlight class="normal"></highlight></codeline>
+<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>connection<sp/>already<sp/>exists<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>(<sp/>strncmp(<sp/>(*olsr_con)-&gt;left_olsr_node-&gt;ip,<sp/>con_from-&gt;<ref refid="structolsr__node_159690d75faff5c149faecacb4f4d2a57" kindref="member">ip</ref>,<sp/><ref refid="olsrs3d_8h_1f8c0c53607c56b59e883cb0894e5cde7" kindref="member">NAMEMAX</ref><sp/>)<sp/>==<sp/>0<sp/>)<sp/>&amp;&amp;<sp/>(<sp/>strncmp(<sp/>(*olsr_con)-&gt;right_olsr_node-&gt;ip,<sp/>con_to-&gt;<ref refid="structolsr__node_159690d75faff5c149faecacb4f4d2a57" kindref="member">ip</ref>,<sp/><ref refid="olsrs3d_8h_1f8c0c53607c56b59e883cb0894e5cde7" kindref="member">NAMEMAX</ref><sp/>)<sp/>==<sp/>0<sp/>)<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*olsr_con)-&gt;<ref refid="structolsr__con_1d93efab11883355b45a0460456991362" kindref="member">left_etx</ref><sp/>=<sp/>etx;</highlight></codeline>
+<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
+<codeline lineno="60"><highlight class="normal"></highlight></codeline>
+<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>(<sp/>strncmp(<sp/>(*olsr_con)-&gt;right_olsr_node-&gt;ip,<sp/>con_from-&gt;<ref refid="structolsr__node_159690d75faff5c149faecacb4f4d2a57" kindref="member">ip</ref>,<sp/><ref refid="olsrs3d_8h_1f8c0c53607c56b59e883cb0894e5cde7" kindref="member">NAMEMAX</ref><sp/>)<sp/>==<sp/>0<sp/>)<sp/>&amp;&amp;<sp/>(<sp/>strncmp(<sp/>(*olsr_con)-&gt;left_olsr_node-&gt;ip,<sp/>con_to-&gt;<ref refid="structolsr__node_159690d75faff5c149faecacb4f4d2a57" kindref="member">ip</ref>,<sp/><ref refid="olsrs3d_8h_1f8c0c53607c56b59e883cb0894e5cde7" kindref="member">NAMEMAX</ref><sp/>)<sp/>==<sp/>0<sp/>)<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="62"><highlight class="normal"></highlight></codeline>
+<codeline lineno="63"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*olsr_con)-&gt;right_etx<sp/>=<sp/>etx;</highlight></codeline>
+<codeline lineno="64"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
+<codeline lineno="65"><highlight class="normal"></highlight></codeline>
+<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="67"><highlight class="normal"></highlight></codeline>
+<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>save<sp/>previous<sp/>olsr<sp/>connection<sp/>for<sp/>later<sp/>use<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>prev_olsr_con<sp/>=<sp/>(*olsr_con);</highlight></codeline>
+<codeline lineno="70"><highlight class="normal"></highlight></codeline>
+<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="structolsr__neigh__list_183a291941fbb40293f8e2e5c6b4d11b6" kindref="member">olsr_con</ref><sp/>=<sp/>&amp;(*olsr_con)-&gt;<ref refid="structolsr__con_1369dfd6eec077d0a6228cd1387135e6e" kindref="member">next_olsr_con</ref>;</highlight></codeline>
+<codeline lineno="72"><highlight class="normal"></highlight></codeline>
+<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="74"><highlight class="normal"></highlight></codeline>
+<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>new<sp/>connection<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>(*<ref refid="structolsr__neigh__list_183a291941fbb40293f8e2e5c6b4d11b6" kindref="member">olsr_con</ref>)<sp/>==<sp/>NULL<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="77"><highlight class="normal"></highlight></codeline>
+<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*olsr_con)<sp/>=<sp/>malloc(<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/><ref refid="structolsr__neigh__list_183a291941fbb40293f8e2e5c6b4d11b6" kindref="member">olsr_con</ref><sp/>)<sp/>);</highlight></codeline>
+<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>(*olsr_con)<sp/>==<sp/>NULL<sp/>)<sp/><ref refid="main_8c_1be0835e7acb76ea987ac80769302d90a" kindref="member">out_of_mem</ref>();</highlight></codeline>
+<codeline lineno="80"><highlight class="normal"></highlight></codeline>
+<codeline lineno="81"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>create<sp/>connection<sp/>object<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*olsr_con)-&gt;obj_id<sp/>=<sp/>s3d_new_object();</highlight></codeline>
+<codeline lineno="83"><highlight class="normal"></highlight></codeline>
+<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>add<sp/>olsr<sp/>node<sp/>to<sp/>new<sp/>olsr<sp/>connection<sp/>in<sp/>order<sp/>to<sp/>access<sp/>the<sp/>nodes<sp/>from<sp/>the<sp/>connection<sp/>list<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*olsr_con)-&gt;left_olsr_node<sp/>=<sp/>con_from;</highlight></codeline>
+<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*olsr_con)-&gt;right_olsr_node<sp/>=<sp/>con_to;</highlight></codeline>
+<codeline lineno="87"><highlight class="normal"></highlight></codeline>
+<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>add<sp/>connection<sp/>color<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*olsr_con)-&gt;color<sp/>=<sp/>0;</highlight></codeline>
+<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_push_material(<sp/>(*olsr_con)-&gt;obj_id,</highlight></codeline>
+<codeline lineno="91"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>1.0,1.0,1.0,</highlight></codeline>
+<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>1.0,1.0,1.0,</highlight></codeline>
+<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>1.0,1.0,1.0);</highlight></codeline>
+<codeline lineno="94"><highlight class="normal"></highlight></codeline>
+<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>add<sp/>connection<sp/>endpoints<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="96"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_push_vertex(<sp/>(*olsr_con)-&gt;obj_id,<sp/>(*olsr_con)-&gt;left_olsr_node-&gt;pos_vec[0],<sp/>(*olsr_con)-&gt;left_olsr_node-&gt;pos_vec[1],<sp/>(*olsr_con)-&gt;left_olsr_node-&gt;pos_vec[2]<sp/>);</highlight></codeline>
+<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_push_vertex(<sp/>(*olsr_con)-&gt;obj_id,<sp/>(*olsr_con)-&gt;right_olsr_node-&gt;pos_vec[0],<sp/>(*olsr_con)-&gt;right_olsr_node-&gt;pos_vec[1],<sp/>(*olsr_con)-&gt;right_olsr_node-&gt;pos_vec[2]<sp/>);</highlight></codeline>
+<codeline lineno="98"><highlight class="normal"></highlight></codeline>
+<codeline lineno="99"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_push_line(<sp/>(*olsr_con)-&gt;obj_id,<sp/>0,1,0<sp/>);</highlight></codeline>
+<codeline lineno="100"><highlight class="normal"></highlight></codeline>
+<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_flags_on(<sp/>(*olsr_con)-&gt;obj_id,<sp/>S3D_OF_VISIBLE<sp/>);</highlight></codeline>
+<codeline lineno="102"><highlight class="normal"></highlight></codeline>
+<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s3d_link(<sp/>(*olsr_con)-&gt;obj_id,<sp/><sp/><ref refid="main_8c_1e113d40abb6f4dd73e4b1253917a1942" kindref="member">ZeroPoint</ref><sp/>);</highlight></codeline>
+<codeline lineno="104"><highlight class="normal"></highlight></codeline>
+<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>HNA<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="106"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>etx<sp/>==<sp/>-1000.00<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="107"><highlight class="normal"></highlight></codeline>
+<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*olsr_con)-&gt;left_etx<sp/>=<sp/>etx;</highlight></codeline>
+<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*olsr_con)-&gt;right_etx<sp/>=<sp/>etx;</highlight></codeline>
+<codeline lineno="110"><highlight class="normal"></highlight></codeline>
+<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
+<codeline lineno="112"><highlight class="normal"></highlight></codeline>
+<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*olsr_con)-&gt;left_etx<sp/>=<sp/>etx;</highlight></codeline>
+<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*olsr_con)-&gt;right_etx<sp/>=<sp/>0.0;</highlight></codeline>
+<codeline lineno="115"><highlight class="normal"></highlight></codeline>
+<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="117"><highlight class="normal"></highlight></codeline>
+<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*olsr_con)-&gt;next_olsr_con<sp/>=<sp/>NULL;</highlight></codeline>
+<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*olsr_con)-&gt;prev_olsr_con<sp/>=<sp/>prev_olsr_con;</highlight></codeline>
+<codeline lineno="120"><highlight class="normal"></highlight></codeline>
+<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>add<sp/>new<sp/>olsr<sp/>connection<sp/>to<sp/>olsr<sp/>nodes<sp/>in<sp/>order<sp/>to<sp/>access<sp/>the<sp/>connection<sp/>from<sp/>the<sp/>olsr<sp/>node<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>olsr_neigh_list<sp/>=<sp/>&amp;(*olsr_con)-&gt;left_olsr_node-&gt;olsr_neigh_list;</highlight></codeline>
+<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(<sp/>(*olsr_neigh_list)<sp/>!=<sp/>NULL<sp/>)<sp/>olsr_neigh_list<sp/>=<sp/>&amp;(*olsr_neigh_list)-&gt;<ref refid="structolsr__neigh__list_1f1d533fde49e1ed2ea5299661f5c10c6" kindref="member">next_olsr_neigh_list</ref>;</highlight></codeline>
+<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*olsr_neigh_list)<sp/>=<sp/>malloc(<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/>olsr_neigh_list<sp/>)<sp/>);</highlight></codeline>
+<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>(*olsr_neigh_list)<sp/>==<sp/>NULL<sp/>)<sp/><ref refid="main_8c_1be0835e7acb76ea987ac80769302d90a" kindref="member">out_of_mem</ref>();</highlight></codeline>
+<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*olsr_neigh_list)-&gt;olsr_con<sp/>=<sp/>(*olsr_con);</highlight></codeline>
+<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*olsr_neigh_list)-&gt;next_olsr_neigh_list<sp/>=<sp/>NULL;</highlight></codeline>
+<codeline lineno="128"><highlight class="normal"></highlight></codeline>
+<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>olsr_neigh_list<sp/>=<sp/>&amp;(*olsr_con)-&gt;right_olsr_node-&gt;olsr_neigh_list;</highlight></codeline>
+<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(<sp/>(*olsr_neigh_list)<sp/>!=<sp/>NULL<sp/>)<sp/>olsr_neigh_list<sp/>=<sp/>&amp;(*olsr_neigh_list)-&gt;next_olsr_neigh_list;</highlight></codeline>
+<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*olsr_neigh_list)<sp/>=<sp/>malloc(<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/>olsr_neigh_list<sp/>)<sp/>);</highlight></codeline>
+<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>(*olsr_neigh_list)<sp/>==<sp/>NULL<sp/>)<sp/><ref refid="main_8c_1be0835e7acb76ea987ac80769302d90a" kindref="member">out_of_mem</ref>();</highlight></codeline>
+<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*olsr_neigh_list)-&gt;olsr_con<sp/>=<sp/>(*olsr_con);</highlight></codeline>
+<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*olsr_neigh_list)-&gt;next_olsr_neigh_list<sp/>=<sp/>NULL;</highlight></codeline>
+<codeline lineno="135"><highlight class="normal"></highlight></codeline>
+<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="137"><highlight class="normal"></highlight></codeline>
+<codeline lineno="138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">(0);</highlight></codeline>
+<codeline lineno="139"><highlight class="normal"></highlight></codeline>
+<codeline lineno="140"><highlight class="normal">}</highlight></codeline>
+<codeline lineno="141"><highlight class="normal"></highlight></codeline>
+<codeline lineno="142"><highlight class="normal"></highlight></codeline>
+<codeline lineno="143"><highlight class="normal"></highlight></codeline>
+<codeline lineno="144"><highlight class="normal"></highlight><highlight class="comment">/***</highlight></codeline>
+<codeline lineno="145"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="146"><highlight class="comment"><sp/>*<sp/>get<sp/>pointer<sp/>to<sp/>olsr<sp/>node<sp/>or<sp/>create<sp/>new<sp/>node<sp/>if<sp/>node<sp/>string<sp/>could<sp/>not<sp/>be<sp/>found</highlight></codeline>
+<codeline lineno="147"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="148"><highlight class="comment"><sp/>*<sp/><sp/><sp/>**node<sp/>=&gt;<sp/><sp/><sp/>pointer<sp/>to<sp/>current<sp/>olsr_node</highlight></codeline>
+<codeline lineno="149"><highlight class="comment"><sp/>*<sp/><sp/><sp/>*ip<sp/><sp/><sp/><sp/>=&gt;<sp/><sp/><sp/>node<sp/>ip</highlight></codeline>
+<codeline lineno="150"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="151"><highlight class="comment"><sp/>*<sp/><sp/><sp/>return<sp/>olsr<sp/>node<sp/>pointer</highlight></codeline>
+<codeline lineno="152"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="153"><highlight class="comment"><sp/>***/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="154"><highlight class="normal"></highlight></codeline>
+<codeline lineno="155" refid="process_8c_17ba929b35f03f5921272b4e5e821ade2" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*<ref refid="process_8c_17ba929b35f03f5921272b4e5e821ade2" kindref="member">get_olsr_node</ref>(<sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/><ref refid="structolsr__node" kindref="compound">olsr_node</ref><sp/>**<ref refid="structolsr__node" kindref="compound">olsr_node</ref>,<sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*ip<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="156"><highlight class="normal"></highlight></codeline>
+<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>result;<sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>result<sp/>of<sp/>strcmp<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="158"><highlight class="normal"></highlight></codeline>
+<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(<sp/>(*olsr_node)<sp/>!=<sp/>NULL<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="160"><highlight class="normal"></highlight></codeline>
+<codeline lineno="161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/>strncmp(<sp/>(*olsr_node)-&gt;ip,<sp/>ip,<sp/><ref refid="olsrs3d_8h_1f8c0c53607c56b59e883cb0894e5cde7" kindref="member">NAMEMAX</ref><sp/>);</highlight></codeline>
+<codeline lineno="162"><highlight class="normal"></highlight></codeline>
+<codeline lineno="163"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>we<sp/>found<sp/>the<sp/>node<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>result<sp/>==<sp/>0<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="165"><highlight class="normal"></highlight></codeline>
+<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*olsr_node)-&gt;last_seen<sp/>=<sp/>100;</highlight></codeline>
+<codeline lineno="167"><highlight class="normal"></highlight></codeline>
+<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>former<sp/>invisble<sp/>(deleted)<sp/>node<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>(*olsr_node)-&gt;visible<sp/>==<sp/>0<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="170"><highlight class="normal"></highlight></codeline>
+<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*olsr_node)-&gt;node_type<sp/>=<sp/>0;</highlight></codeline>
+<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*olsr_node)-&gt;node_type_modified<sp/>=<sp/>1;</highlight></codeline>
+<codeline lineno="173"><highlight class="normal"></highlight></codeline>
+<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*olsr_node)-&gt;visible<sp/>=<sp/>1;</highlight></codeline>
+<codeline lineno="175"><highlight class="normal"></highlight></codeline>
+<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*olsr_node)-&gt;mov_vec[0]<sp/>=<sp/>(*olsr_node)-&gt;mov_vec[1]<sp/>=<sp/>(*olsr_node)-&gt;mov_vec[2]<sp/>=<sp/>0.0;</highlight></codeline>
+<codeline lineno="177"><highlight class="normal"></highlight></codeline>
+<codeline lineno="178"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/><ref refid="main_8c_1923774364cedbc16baa0bc05e9be136c" kindref="member">Debug</ref><sp/>)<sp/>printf(<sp/></highlight><highlight class="stringliteral">&quot;new<sp/>olsr<sp/>node:<sp/>%s\n&quot;</highlight><highlight class="normal">,<sp/>(*olsr_node)-&gt;ip<sp/>);</highlight></codeline>
+<codeline lineno="179"><highlight class="normal"></highlight></codeline>
+<codeline lineno="180"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_186c048bc4aaab319f4d61f7c0e1f056f" kindref="member">Olsr_node_count</ref>++;</highlight></codeline>
+<codeline lineno="181"><highlight class="normal"></highlight></codeline>
+<codeline lineno="182"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="183"><highlight class="normal"></highlight></codeline>
+<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(*olsr_node);</highlight></codeline>
+<codeline lineno="185"><highlight class="normal"></highlight></codeline>
+<codeline lineno="186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="187"><highlight class="normal"></highlight></codeline>
+<codeline lineno="188"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>the<sp/>searched<sp/>node<sp/>must<sp/>be<sp/>in<sp/>the<sp/>subtree<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="189"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>result<sp/>&lt;<sp/>0<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>olsr_node<sp/>=<sp/>&amp;(*olsr_node)-&gt;<ref refid="structolsr__node_1bc6cf143d12b1e5a204ae64d40c0eb05" kindref="member">right</ref>;</highlight></codeline>
+<codeline lineno="191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
+<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>olsr_node<sp/>=<sp/>&amp;(*olsr_node)-&gt;<ref refid="structolsr__node_1b64ee26ebfa4a3c2719de780b4cabada" kindref="member">left</ref>;</highlight></codeline>
+<codeline lineno="193"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="194"><highlight class="normal"></highlight></codeline>
+<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="196"><highlight class="normal"></highlight></codeline>
+<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>if<sp/>node<sp/>is<sp/>NULL<sp/>we<sp/>reached<sp/>the<sp/>end<sp/>of<sp/>the<sp/>tree<sp/>and<sp/>must<sp/>create<sp/>a<sp/>new<sp/>olsr_node<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>(*olsr_node)<sp/>==<sp/>NULL<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="199"><highlight class="normal"></highlight></codeline>
+<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*olsr_node)<sp/>=<sp/>malloc(<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/>olsr_node<sp/>)<sp/>);</highlight></codeline>
+<codeline lineno="201"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>(*olsr_node)<sp/>==<sp/>NULL<sp/>)<sp/><ref refid="main_8c_1be0835e7acb76ea987ac80769302d90a" kindref="member">out_of_mem</ref>();</highlight></codeline>
+<codeline lineno="202"><highlight class="normal"></highlight></codeline>
+<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*olsr_node)-&gt;left<sp/>=<sp/>NULL;</highlight></codeline>
+<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*olsr_node)-&gt;right<sp/>=<sp/>NULL;</highlight></codeline>
+<codeline lineno="205"><highlight class="normal"></highlight></codeline>
+<codeline lineno="206"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>strncpy(<sp/>(*olsr_node)-&gt;ip,<sp/>ip,<sp/><ref refid="olsrs3d_8h_1f8c0c53607c56b59e883cb0894e5cde7" kindref="member">NAMEMAX</ref><sp/>);</highlight></codeline>
+<codeline lineno="207"><highlight class="normal"></highlight></codeline>
+<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*olsr_node)-&gt;node_type<sp/>=<sp/>0;</highlight></codeline>
+<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*olsr_node)-&gt;node_type_modified<sp/>=<sp/>1;</highlight></codeline>
+<codeline lineno="210"><highlight class="normal"></highlight></codeline>
+<codeline lineno="211"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*olsr_node)-&gt;last_seen<sp/>=<sp/>100;</highlight></codeline>
+<codeline lineno="212"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*olsr_node)-&gt;visible<sp/>=<sp/>1;</highlight></codeline>
+<codeline lineno="213"><highlight class="normal"></highlight></codeline>
+<codeline lineno="214"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/><ref refid="main_8c_1923774364cedbc16baa0bc05e9be136c" kindref="member">Debug</ref><sp/>)<sp/>printf(<sp/></highlight><highlight class="stringliteral">&quot;new<sp/>olsr<sp/>node:<sp/>%s\n&quot;</highlight><highlight class="normal">,<sp/>(*olsr_node)-&gt;ip<sp/>);</highlight></codeline>
+<codeline lineno="215"><highlight class="normal"></highlight></codeline>
+<codeline lineno="216"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_186c048bc4aaab319f4d61f7c0e1f056f" kindref="member">Olsr_node_count</ref>++;</highlight></codeline>
+<codeline lineno="217"><highlight class="normal"></highlight></codeline>
+<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*olsr_node)-&gt;pos_vec[0]<sp/>=<sp/>(<sp/>(<sp/>float<sp/>)<sp/>2.0<sp/>*<sp/>rand()<sp/>)<sp/>/<sp/>RAND_MAX<sp/>-<sp/>1.0;</highlight></codeline>
+<codeline lineno="219"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*olsr_node)-&gt;pos_vec[1]<sp/>=<sp/>(<sp/>(<sp/>float<sp/>)<sp/>2.0<sp/>*<sp/>rand()<sp/>)<sp/>/<sp/>RAND_MAX<sp/>-<sp/>1.0;</highlight></codeline>
+<codeline lineno="220"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*olsr_node)-&gt;pos_vec[2]<sp/>=<sp/>(<sp/>(<sp/>float<sp/>)<sp/>2.0<sp/>*<sp/>rand()<sp/>)<sp/>/<sp/>RAND_MAX<sp/>-<sp/>1.0;</highlight></codeline>
+<codeline lineno="221"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*olsr_node)-&gt;mov_vec[0]<sp/>=<sp/>(*olsr_node)-&gt;mov_vec[1]<sp/>=<sp/>(*olsr_node)-&gt;mov_vec[2]<sp/>=<sp/>0.0;</highlight></codeline>
+<codeline lineno="222"><highlight class="normal"></highlight></codeline>
+<codeline lineno="223"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*olsr_node)-&gt;obj_id<sp/>=<sp/>-1;</highlight></codeline>
+<codeline lineno="224"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*olsr_node)-&gt;desc_id<sp/>=<sp/>-1;</highlight></codeline>
+<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*olsr_node)-&gt;olsr_neigh_list<sp/>=<sp/>NULL;</highlight></codeline>
+<codeline lineno="226"><highlight class="normal"></highlight></codeline>
+<codeline lineno="227"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(*olsr_node);</highlight></codeline>
+<codeline lineno="228"><highlight class="normal"></highlight></codeline>
+<codeline lineno="229"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="230"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">(0);</highlight></codeline>
+<codeline lineno="231"><highlight class="normal">}</highlight></codeline>
+<codeline lineno="232"><highlight class="normal"></highlight></codeline>
+<codeline lineno="233"><highlight class="normal"></highlight><highlight class="comment">/*</highlight></codeline>
+<codeline lineno="234"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="235"><highlight class="comment"><sp/>*<sp/>initialize<sp/>the<sp/>struct<sp/>for<sp/>a<sp/>linked<sp/>list<sp/>obj2ip</highlight></codeline>
+<codeline lineno="236"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="237"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="238"><highlight class="normal"></highlight></codeline>
+<codeline lineno="239" refid="process_8c_1edfb2ae44af543946842187ced1cd47e" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="olsrs3d_8h_1edfb2ae44af543946842187ced1cd47e" kindref="member">lst_initialize</ref>()<sp/>{</highlight></codeline>
+<codeline lineno="240"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_19494e9e8cbdc4eceb86cb33ff0006785" kindref="member">Obj_to_ip_head</ref><sp/>=<sp/>(</highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structObj__to__ip" kindref="compound">Obj_to_ip</ref>*)<sp/>malloc(</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(</highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/><ref refid="structObj__to__ip" kindref="compound">Obj_to_ip</ref>));</highlight></codeline>
+<codeline lineno="241"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_1236217b97f5fe65457d8b22c73c5073d" kindref="member">Obj_to_ip_end</ref><sp/>=<sp/>(</highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal">Obj_to_ip*)<sp/>malloc(</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(</highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/>Obj_to_ip));</highlight></codeline>
+<codeline lineno="242"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="main_8c_19494e9e8cbdc4eceb86cb33ff0006785" kindref="member">Obj_to_ip_head</ref><sp/>==<sp/>NULL<sp/>||<sp/><ref refid="main_8c_1236217b97f5fe65457d8b22c73c5073d" kindref="member">Obj_to_ip_end</ref><sp/>==<sp/>NULL)</highlight></codeline>
+<codeline lineno="243"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_1be0835e7acb76ea987ac80769302d90a" kindref="member">out_of_mem</ref>();</highlight></codeline>
+<codeline lineno="244"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_19494e9e8cbdc4eceb86cb33ff0006785" kindref="member">Obj_to_ip_head</ref>-&gt;<ref refid="structObj__to__ip_123759dec76c683ac720f937fea4e4d41" kindref="member">id</ref><sp/>=<sp/>0;</highlight></codeline>
+<codeline lineno="245"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_1236217b97f5fe65457d8b22c73c5073d" kindref="member">Obj_to_ip_end</ref>-&gt;<ref refid="structObj__to__ip_123759dec76c683ac720f937fea4e4d41" kindref="member">id</ref><sp/>=<sp/>0;</highlight></codeline>
+<codeline lineno="246"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_19494e9e8cbdc4eceb86cb33ff0006785" kindref="member">Obj_to_ip_head</ref>-&gt;<ref refid="structObj__to__ip_1c41475dd4632807df16315bad4309333" kindref="member">prev</ref><sp/>=<sp/><ref refid="main_8c_1236217b97f5fe65457d8b22c73c5073d" kindref="member">Obj_to_ip_end</ref>-&gt;<ref refid="structObj__to__ip_1c41475dd4632807df16315bad4309333" kindref="member">prev</ref><sp/>=<sp/><ref refid="main_8c_19494e9e8cbdc4eceb86cb33ff0006785" kindref="member">Obj_to_ip_head</ref>;</highlight></codeline>
+<codeline lineno="247"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_19494e9e8cbdc4eceb86cb33ff0006785" kindref="member">Obj_to_ip_head</ref>-&gt;<ref refid="structObj__to__ip_1da076aa87c753db90520204360bf326a" kindref="member">next</ref><sp/>=<sp/><ref refid="main_8c_1236217b97f5fe65457d8b22c73c5073d" kindref="member">Obj_to_ip_end</ref>-&gt;<ref refid="structObj__to__ip_1da076aa87c753db90520204360bf326a" kindref="member">next</ref><sp/>=<sp/><ref refid="main_8c_1236217b97f5fe65457d8b22c73c5073d" kindref="member">Obj_to_ip_end</ref>;</highlight></codeline>
+<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_16a8ff2c3957f5f0ab7dcafcd72b8bd57" kindref="member">List_ptr</ref><sp/>=<sp/><ref refid="main_8c_19494e9e8cbdc4eceb86cb33ff0006785" kindref="member">Obj_to_ip_head</ref>;</highlight></codeline>
+<codeline lineno="249"><highlight class="normal">}</highlight></codeline>
+<codeline lineno="250"><highlight class="normal"></highlight></codeline>
+<codeline lineno="251"><highlight class="normal"></highlight><highlight class="comment">/*</highlight></codeline>
+<codeline lineno="252"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="253"><highlight class="comment"><sp/>*<sp/>add<sp/>a<sp/>link<sp/>object_id<sp/>to<sp/>olsr_node,<sp/>to<sp/>get<sp/>ip<sp/>adress<sp/>and<sp/>coordinates<sp/>per<sp/>object_id</highlight></codeline>
+<codeline lineno="254"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>id<sp/>=&gt;<sp/>object_id,<sp/>returned<sp/>from<sp/>s3d_clone<sp/>or<sp/>s3d_new_object</highlight></codeline>
+<codeline lineno="255"><highlight class="comment"><sp/>*<sp/><sp/>**olsr_node<sp/>=&gt;<sp/>pointer<sp/>to<sp/>pointer<sp/>of<sp/>current<sp/>olsr_node</highlight></codeline>
+<codeline lineno="256"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="257"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="258"><highlight class="normal"></highlight></codeline>
+<codeline lineno="259" refid="process_8c_1d01a29bcb2e2daed6fcc6516c328f141" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="olsrs3d_8h_1d01a29bcb2e2daed6fcc6516c328f141" kindref="member">lst_add</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">id</highlight><highlight class="normal">,</highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/><ref refid="structolsr__node" kindref="compound">olsr_node</ref><sp/>**<ref refid="structolsr__node" kindref="compound">olsr_node</ref>)<sp/>{</highlight></codeline>
+<codeline lineno="260"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structObj__to__ip" kindref="compound">Obj_to_ip</ref><sp/>*</highlight><highlight class="keyword">new</highlight><highlight class="normal">;</highlight></codeline>
+<codeline lineno="261"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>=<sp/>(</highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structObj__to__ip" kindref="compound">Obj_to_ip</ref>*)<sp/>malloc(</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(</highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/><ref refid="structObj__to__ip" kindref="compound">Obj_to_ip</ref>));</highlight></codeline>
+<codeline lineno="262"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(</highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>==<sp/>NULL)</highlight></codeline>
+<codeline lineno="263"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_1be0835e7acb76ea987ac80769302d90a" kindref="member">out_of_mem</ref>();</highlight></codeline>
+<codeline lineno="264"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal">-&gt;id<sp/>=<sp/>id;</highlight></codeline>
+<codeline lineno="265"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal">-&gt;olsr_node<sp/>=<sp/>*<ref refid="structObj__to__ip_1207d8f9a609e3e20b4cbd9a7976dcd18" kindref="member">olsr_node</ref>;</highlight></codeline>
+<codeline lineno="266"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="olsrs3d_8h_1576c61914d53ad9035e74317dbb15903" kindref="member">move_lst_ptr</ref>(&amp;</highlight><highlight class="keywordtype">id</highlight><highlight class="normal">);</highlight></codeline>
+<codeline lineno="267"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal">-&gt;prev<sp/>=<sp/><ref refid="main_8c_16a8ff2c3957f5f0ab7dcafcd72b8bd57" kindref="member">List_ptr</ref>;</highlight></codeline>
+<codeline lineno="268"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal">-&gt;<ref refid="structObj__to__ip_1da076aa87c753db90520204360bf326a" kindref="member">next</ref><sp/>=<sp/><ref refid="main_8c_16a8ff2c3957f5f0ab7dcafcd72b8bd57" kindref="member">List_ptr</ref>-&gt;<ref refid="structObj__to__ip_1da076aa87c753db90520204360bf326a" kindref="member">next</ref>;</highlight></codeline>
+<codeline lineno="269"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_16a8ff2c3957f5f0ab7dcafcd72b8bd57" kindref="member">List_ptr</ref>-&gt;<ref refid="structObj__to__ip_1da076aa87c753db90520204360bf326a" kindref="member">next</ref>-&gt;<ref refid="structObj__to__ip_1c41475dd4632807df16315bad4309333" kindref="member">prev</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal">;</highlight></codeline>
+<codeline lineno="270"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_16a8ff2c3957f5f0ab7dcafcd72b8bd57" kindref="member">List_ptr</ref>-&gt;<ref refid="structObj__to__ip_1da076aa87c753db90520204360bf326a" kindref="member">next</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal">;</highlight></codeline>
+<codeline lineno="271"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>printf(&quot;obj2ip:<sp/>add<sp/>object<sp/>%d<sp/>between<sp/>%d<sp/>..<sp/>%d<sp/>ip<sp/>%s<sp/>to<sp/>list\n&quot;,new-&gt;id,new-&gt;prev-&gt;id,new-&gt;next-&gt;id,new-&gt;olsr_node-&gt;ip);<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="272"><highlight class="normal">}</highlight></codeline>
+<codeline lineno="273"><highlight class="normal"></highlight></codeline>
+<codeline lineno="274"><highlight class="normal"></highlight><highlight class="comment">/*</highlight></codeline>
+<codeline lineno="275"><highlight class="comment"><sp/>*void<sp/>move_lst_ptr(int<sp/>*id)</highlight></codeline>
+<codeline lineno="276"><highlight class="comment"><sp/>*<sp/>remove<sp/>element<sp/>from<sp/>obj2ip<sp/>linked<sp/>list</highlight></codeline>
+<codeline lineno="277"><highlight class="comment"><sp/>*<sp/>id<sp/>=&gt;<sp/>object_id,<sp/>returned<sp/>from<sp/>s3d_clone<sp/>or<sp/>s3d_new_object</highlight></codeline>
+<codeline lineno="278"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="279"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="280"><highlight class="normal"></highlight></codeline>
+<codeline lineno="281" refid="process_8c_1febf2594bdfe9ec411d0c04c9cd951b3" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="olsrs3d_8h_1febf2594bdfe9ec411d0c04c9cd951b3" kindref="member">lst_del</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">id</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
+<codeline lineno="282"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structObj__to__ip" kindref="compound">Obj_to_ip</ref><sp/>*del;</highlight></codeline>
+<codeline lineno="283"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="olsrs3d_8h_1576c61914d53ad9035e74317dbb15903" kindref="member">move_lst_ptr</ref>(&amp;</highlight><highlight class="keywordtype">id</highlight><highlight class="normal">);</highlight></codeline>
+<codeline lineno="284"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(</highlight><highlight class="keywordtype">id</highlight><highlight class="normal"><sp/>!=<sp/><ref refid="main_8c_16a8ff2c3957f5f0ab7dcafcd72b8bd57" kindref="member">List_ptr</ref>-&gt;<ref refid="structObj__to__ip_123759dec76c683ac720f937fea4e4d41" kindref="member">id</ref>)</highlight></codeline>
+<codeline lineno="285"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
+<codeline lineno="286"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(</highlight><highlight class="stringliteral">&quot;obj2ip:<sp/>remove<sp/>id<sp/>%d<sp/>failed<sp/>move_lst_ptr<sp/>return<sp/>id<sp/>%d\n&quot;</highlight><highlight class="normal">,</highlight><highlight class="keywordtype">id</highlight><highlight class="normal">,<ref refid="main_8c_16a8ff2c3957f5f0ab7dcafcd72b8bd57" kindref="member">List_ptr</ref>-&gt;<ref refid="structObj__to__ip_1da076aa87c753db90520204360bf326a" kindref="member">next</ref>-&gt;<ref refid="structObj__to__ip_123759dec76c683ac720f937fea4e4d41" kindref="member">id</ref>);</highlight></codeline>
+<codeline lineno="287"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
+<codeline lineno="288"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>del<sp/>=<sp/><ref refid="main_8c_16a8ff2c3957f5f0ab7dcafcd72b8bd57" kindref="member">List_ptr</ref>;</highlight></codeline>
+<codeline lineno="289"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_16a8ff2c3957f5f0ab7dcafcd72b8bd57" kindref="member">List_ptr</ref>-&gt;<ref refid="structObj__to__ip_1da076aa87c753db90520204360bf326a" kindref="member">next</ref>-&gt;<ref refid="structObj__to__ip_1c41475dd4632807df16315bad4309333" kindref="member">prev</ref><sp/>=<sp/><ref refid="main_8c_16a8ff2c3957f5f0ab7dcafcd72b8bd57" kindref="member">List_ptr</ref>-&gt;<ref refid="structObj__to__ip_1c41475dd4632807df16315bad4309333" kindref="member">prev</ref>;</highlight></codeline>
+<codeline lineno="290"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_16a8ff2c3957f5f0ab7dcafcd72b8bd57" kindref="member">List_ptr</ref>-&gt;<ref refid="structObj__to__ip_1c41475dd4632807df16315bad4309333" kindref="member">prev</ref>-&gt;<ref refid="structObj__to__ip_1da076aa87c753db90520204360bf326a" kindref="member">next</ref><sp/>=<sp/><ref refid="main_8c_16a8ff2c3957f5f0ab7dcafcd72b8bd57" kindref="member">List_ptr</ref>-&gt;<ref refid="structObj__to__ip_1da076aa87c753db90520204360bf326a" kindref="member">next</ref>;</highlight></codeline>
+<codeline lineno="291"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>printf(&quot;obj2ip:<sp/>remove<sp/>object<sp/>%d<sp/>--&gt;<sp/>%d<sp/>&lt;--<sp/>%d<sp/>ip<sp/>%s<sp/>from<sp/>list\n&quot;,List_ptr-&gt;prev-&gt;id,del-&gt;id,List_ptr-&gt;next-&gt;id,del-&gt;olsr_node-&gt;ip);<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="292"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>free(del);</highlight></codeline>
+<codeline lineno="293"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="294"><highlight class="normal">}</highlight></codeline>
+<codeline lineno="295"><highlight class="normal"></highlight></codeline>
+<codeline lineno="296"><highlight class="normal"></highlight><highlight class="comment">/*</highlight></codeline>
+<codeline lineno="297"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="298"><highlight class="comment"><sp/>*<sp/>move<sp/>the<sp/>List_ptr<sp/>one<sp/>positon<sp/>ahead<sp/>the<sp/>searched<sp/>element</highlight></codeline>
+<codeline lineno="299"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/>*id<sp/>=&gt;<sp/>pointer<sp/>of<sp/>object_id<sp/>,<sp/>returned<sp/>from<sp/>s3d_clone<sp/>or<sp/>s3d_new_object</highlight></codeline>
+<codeline lineno="300"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="301"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="302"><highlight class="normal"></highlight></codeline>
+<codeline lineno="303" refid="process_8c_1576c61914d53ad9035e74317dbb15903" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="olsrs3d_8h_1576c61914d53ad9035e74317dbb15903" kindref="member">move_lst_ptr</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>*</highlight><highlight class="keywordtype">id</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
+<codeline lineno="304"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>printf(&quot;obj2ip:<sp/>move<sp/>for<sp/>%d\n&quot;,*id);<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="305"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>head<sp/>to<sp/>point<sp/>at<sp/>end<sp/>or<sp/>id<sp/>lass<sp/>then<sp/>first<sp/>element<sp/>in<sp/>linked<sp/>list*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="306"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="main_8c_19494e9e8cbdc4eceb86cb33ff0006785" kindref="member">Obj_to_ip_head</ref>-&gt;<ref refid="structObj__to__ip_1da076aa87c753db90520204360bf326a" kindref="member">next</ref><sp/>==<sp/><ref refid="main_8c_19494e9e8cbdc4eceb86cb33ff0006785" kindref="member">Obj_to_ip_head</ref><sp/>||<sp/>*id<sp/>&lt;<sp/>Obj_to_ip_head-&gt;<ref refid="structObj__to__ip_1da076aa87c753db90520204360bf326a" kindref="member">next</ref>-&gt;<ref refid="structObj__to__ip_123759dec76c683ac720f937fea4e4d41" kindref="member">id</ref>)</highlight></codeline>
+<codeline lineno="307"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_16a8ff2c3957f5f0ab7dcafcd72b8bd57" kindref="member">List_ptr</ref><sp/>=<sp/><ref refid="main_8c_19494e9e8cbdc4eceb86cb33ff0006785" kindref="member">Obj_to_ip_head</ref>;</highlight></codeline>
+<codeline lineno="308"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>id<sp/>is<sp/>greather<sp/>then<sp/>last<sp/>element<sp/>in<sp/>linked<sp/>list<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="309"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(*</highlight><highlight class="keywordtype">id</highlight><highlight class="normal"><sp/>&gt;<sp/><ref refid="main_8c_1236217b97f5fe65457d8b22c73c5073d" kindref="member">Obj_to_ip_end</ref>-&gt;<ref refid="structObj__to__ip_1c41475dd4632807df16315bad4309333" kindref="member">prev</ref>-&gt;<ref refid="structObj__to__ip_123759dec76c683ac720f937fea4e4d41" kindref="member">id</ref>)</highlight></codeline>
+<codeline lineno="310"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_16a8ff2c3957f5f0ab7dcafcd72b8bd57" kindref="member">List_ptr</ref><sp/>=<sp/><ref refid="main_8c_1236217b97f5fe65457d8b22c73c5073d" kindref="member">Obj_to_ip_end</ref>-&gt;<ref refid="structObj__to__ip_1c41475dd4632807df16315bad4309333" kindref="member">prev</ref>;</highlight></codeline>
+<codeline lineno="311"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
+<codeline lineno="312"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>printf(&quot;obj2ip:<sp/>ok<sp/>i<sp/>search<sp/>deeper<sp/>;-)<sp/>for<sp/>id=%d\n&quot;,*id);<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="313"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">((*</highlight><highlight class="keywordtype">id</highlight><highlight class="normal"><sp/>-<sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)<sp/><ref refid="main_8c_19494e9e8cbdc4eceb86cb33ff0006785" kindref="member">Obj_to_ip_head</ref>-&gt;<ref refid="structObj__to__ip_1da076aa87c753db90520204360bf326a" kindref="member">next</ref>-&gt;<ref refid="structObj__to__ip_123759dec76c683ac720f937fea4e4d41" kindref="member">id</ref>)<sp/>&lt;=<sp/>((</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)(<ref refid="main_8c_1236217b97f5fe65457d8b22c73c5073d" kindref="member">Obj_to_ip_end</ref>-&gt;<ref refid="structObj__to__ip_1c41475dd4632807df16315bad4309333" kindref="member">prev</ref>-&gt;<ref re!
 fid="structObj__to__ip_123759dec76c683ac720f937fea4e4d41" kindref="member">id</ref>)-*</highlight><highlight class="keywordtype">id</highlight><highlight class="normal">))<sp/>{</highlight></codeline>
+<codeline lineno="314"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_16a8ff2c3957f5f0ab7dcafcd72b8bd57" kindref="member">List_ptr</ref><sp/>=<sp/><ref refid="main_8c_19494e9e8cbdc4eceb86cb33ff0006785" kindref="member">Obj_to_ip_head</ref>;</highlight></codeline>
+<codeline lineno="315"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>printf(&quot;obj2ip:<sp/>start<sp/>at<sp/>head<sp/>id<sp/>%d<sp/>-<sp/>%d<sp/>&lt;=<sp/>%d<sp/>-<sp/>%d<sp/>\n&quot;,*id,Obj_to_ip_head-&gt;next-&gt;id,Obj_to_ip_end-&gt;prev-&gt;id,*id);<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="316"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal">(*</highlight><highlight class="keywordtype">id</highlight><highlight class="normal"><sp/>&gt;=<sp/><ref refid="main_8c_16a8ff2c3957f5f0ab7dcafcd72b8bd57" kindref="member">List_ptr</ref>-&gt;<ref refid="structObj__to__ip_1da076aa87c753db90520204360bf326a" kindref="member">next</ref>-&gt;<ref refid="structObj__to__ip_123759dec76c683ac720f937fea4e4d41" kindref="member">id</ref>)<sp/>{</highlight></codeline>
+<codeline lineno="317"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>printf(&quot;obj2ip:<sp/>%d<sp/>&gt;<sp/>%d<sp/>move<sp/>to<sp/>&quot;,*id,List_ptr-&gt;id);<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="318"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_16a8ff2c3957f5f0ab7dcafcd72b8bd57" kindref="member">List_ptr</ref><sp/>=<sp/><ref refid="main_8c_16a8ff2c3957f5f0ab7dcafcd72b8bd57" kindref="member">List_ptr</ref>-&gt;<ref refid="structObj__to__ip_1da076aa87c753db90520204360bf326a" kindref="member">next</ref>;</highlight></codeline>
+<codeline lineno="319"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>printf(&quot;%d\n&quot;,List_ptr-&gt;id);<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="320"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="321"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
+<codeline lineno="322"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_16a8ff2c3957f5f0ab7dcafcd72b8bd57" kindref="member">List_ptr</ref><sp/>=<sp/><ref refid="main_8c_1236217b97f5fe65457d8b22c73c5073d" kindref="member">Obj_to_ip_end</ref>;</highlight></codeline>
+<codeline lineno="323"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>printf(&quot;obj2ip:<sp/>start<sp/>at<sp/>end<sp/>id<sp/>%d<sp/>-<sp/>%d<sp/>&gt;<sp/>%d<sp/>-<sp/>%d<sp/>\n&quot;,*id,Obj_to_ip_head-&gt;next-&gt;id,Obj_to_ip_end-&gt;prev-&gt;id,*id);<sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="324"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/><sp/>do<sp/>List_ptr<sp/>=<sp/>List_ptr-&gt;prev;<sp/>while(*id<sp/>&gt;<sp/>List_ptr-&gt;prev-&gt;id);<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="325"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal">(*id<sp/>&lt;<sp/>List_ptr-&gt;<ref refid="structObj__to__ip_1c41475dd4632807df16315bad4309333" kindref="member">prev</ref>-&gt;<ref refid="structObj__to__ip_123759dec76c683ac720f937fea4e4d41" kindref="member">id</ref>)<sp/>{</highlight></codeline>
+<codeline lineno="326"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>printf(&quot;obj2ip:<sp/>%d<sp/>&lt;<sp/>%d<sp/>move<sp/>to<sp/>&quot;,*id,List_ptr-&gt;id);<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="327"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_16a8ff2c3957f5f0ab7dcafcd72b8bd57" kindref="member">List_ptr</ref><sp/>=<sp/><ref refid="main_8c_16a8ff2c3957f5f0ab7dcafcd72b8bd57" kindref="member">List_ptr</ref>-&gt;<ref refid="structObj__to__ip_1c41475dd4632807df16315bad4309333" kindref="member">prev</ref>;</highlight></codeline>
+<codeline lineno="328"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>printf(&quot;%d\n&quot;,List_ptr-&gt;id);<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="329"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="330"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="main_8c_16a8ff2c3957f5f0ab7dcafcd72b8bd57" kindref="member">List_ptr</ref><sp/>=<sp/><ref refid="main_8c_16a8ff2c3957f5f0ab7dcafcd72b8bd57" kindref="member">List_ptr</ref>-&gt;<ref refid="structObj__to__ip_1c41475dd4632807df16315bad4309333" kindref="member">prev</ref>;</highlight></codeline>
+<codeline lineno="331"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="332"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>printf(&quot;obj2ip:<sp/>found<sp/>id<sp/>to<sp/>insert<sp/>between<sp/>%d--&gt;<sp/>..<sp/>&lt;--%d<sp/>to<sp/>search/delete<sp/>%d--&gt;<sp/>..<sp/>&lt;--%d\n&quot;,List_ptr-&gt;id,List_ptr-&gt;next-&gt;next-&gt;id,List_ptr-&gt;prev-&gt;id,List_ptr-&gt;next-&gt;id);<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="333"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="334"><highlight class="normal">}</highlight></codeline>
+<codeline lineno="335"><highlight class="normal"></highlight></codeline>
+<codeline lineno="336"><highlight class="normal"></highlight><highlight class="comment">/*</highlight></codeline>
+<codeline lineno="337"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="338"><highlight class="comment"><sp/>*<sp/>search<sp/>a<sp/>object_id<sp/>in<sp/>linked<sp/>list<sp/>and<sp/>return<sp/>pointer<sp/>on<sp/>struct<sp/>olsr_node</highlight></codeline>
+<codeline lineno="339"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/>id<sp/>=&gt;<sp/>object_id<sp/>,<sp/>returned<sp/>from<sp/>s3d_clone<sp/>or<sp/>s3d_new_object</highlight></codeline>
+<codeline lineno="340"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="341"><highlight class="comment"><sp/>*<sp/>&lt;example&gt;</highlight></codeline>
+<codeline lineno="342"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/>struct<sp/>olsr_node<sp/>*olsr_node;</highlight></codeline>
+<codeline lineno="343"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/>olsr_node<sp/>=<sp/>*lst_search(oid);</highlight></codeline>
+<codeline lineno="344"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/>printf(&quot;obj2ip:<sp/>search<sp/>return<sp/>%s\n&quot;,olsr_node-&gt;ip);</highlight></codeline>
+<codeline lineno="345"><highlight class="comment"><sp/>*<sp/>&lt;/example&gt;</highlight></codeline>
+<codeline lineno="346"><highlight class="comment"><sp/>*</highlight></codeline>
+<codeline lineno="347"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="348"><highlight class="normal"></highlight></codeline>
+<codeline lineno="349" refid="process_8c_1b74d5229fcc3a39626609ac9f12510dd" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structolsr__node" kindref="compound">olsr_node</ref><sp/>**<ref refid="olsrs3d_8h_1ef8aff26d4e096ef0880c204c13309f0" kindref="member">lst_search</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">id</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
+<codeline lineno="350"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="olsrs3d_8h_1576c61914d53ad9035e74317dbb15903" kindref="member">move_lst_ptr</ref>(&amp;</highlight><highlight class="keywordtype">id</highlight><highlight class="normal">);</highlight></codeline>
+<codeline lineno="351"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>TODO:<sp/>return<sp/>NULL<sp/>when<sp/>no<sp/>node<sp/>found<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="352"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>if(id<sp/>!=<sp/>List_ptr-&gt;id)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="353"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>printf(&quot;obj2ip:<sp/>search<sp/>id....id<sp/>not<sp/>found\n&quot;);<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="354"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>else<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="355"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>printf(&quot;obj2ip:<sp/>search<sp/>found<sp/>objekt_id=%d<sp/>objekt_ip=%s\n&quot;,List_ptr-&gt;id,List_ptr-&gt;olsr_node-&gt;ip);<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="356"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">(&amp;<ref refid="main_8c_16a8ff2c3957f5f0ab7dcafcd72b8bd57" kindref="member">List_ptr</ref>-&gt;<ref refid="structObj__to__ip_1207d8f9a609e3e20b4cbd9a7976dcd18" kindref="member">olsr_node</ref>);</highlight></codeline>
+<codeline lineno="357"><highlight class="normal">}</highlight></codeline>
+<codeline lineno="358"><highlight class="normal"></highlight></codeline>
+<codeline lineno="359" refid="process_8c_1a015f713ca02d8b76a52175b4128d3e8" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="olsrs3d_8h_1a015f713ca02d8b76a52175b4128d3e8" kindref="member">lst_out</ref>()<sp/>{</highlight></codeline>
+<codeline lineno="360"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structObj__to__ip" kindref="compound">Obj_to_ip</ref><sp/>*ptr;</highlight></codeline>
+<codeline lineno="361"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptr<sp/>=<sp/><ref refid="main_8c_19494e9e8cbdc4eceb86cb33ff0006785" kindref="member">Obj_to_ip_head</ref>;</highlight></codeline>
+<codeline lineno="362"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal">(ptr<sp/>!=<sp/>ptr-&gt;<ref refid="structObj__to__ip_1da076aa87c753db90520204360bf326a" kindref="member">next</ref>)<sp/>{</highlight></codeline>
+<codeline lineno="363"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>printf(</highlight><highlight class="stringliteral">&quot;id-&gt;<sp/>%d\n&quot;</highlight><highlight class="normal">,ptr-&gt;<ref refid="structObj__to__ip_123759dec76c683ac720f937fea4e4d41" kindref="member">id</ref>);</highlight></codeline>
+<codeline lineno="364"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptr<sp/>=<sp/>ptr-&gt;<ref refid="structObj__to__ip_1da076aa87c753db90520204360bf326a" kindref="member">next</ref>;</highlight></codeline>
+<codeline lineno="365"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="366"><highlight class="normal">}</highlight></codeline>
+<codeline lineno="367"><highlight class="normal"></highlight></codeline>
+<codeline lineno="368" refid="process_8c_16b4e9b6718b671f6330c2e501c60d3c1" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="olsrs3d_8h_16b4e9b6718b671f6330c2e501c60d3c1" kindref="member">process_main</ref>()<sp/>{</highlight></codeline>
+<codeline lineno="369"><highlight class="normal"></highlight></codeline>
+<codeline lineno="370"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>dn;</highlight></codeline>
+<codeline lineno="371"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>f;</highlight></codeline>
+<codeline lineno="372"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*lbuf_ptr,<sp/>*last_cr_ptr,<sp/>*con_from,<sp/>*con_from_end,<sp/>*con_to,<sp/>*con_to_end,<sp/>*etx,<sp/>*etx_end;</highlight></codeline>
+<codeline lineno="373"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structolsr__node" kindref="compound">olsr_node</ref><sp/>*olsr_node1;<sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>pointer<sp/>to<sp/>olsr<sp/>nodes<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="374"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structolsr__node" kindref="compound">olsr_node</ref><sp/>*olsr_node2;</highlight></codeline>
+<codeline lineno="375"><highlight class="normal"></highlight></codeline>
+<codeline lineno="376"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lbuf_ptr<sp/>=<sp/><ref refid="olsrs3d_8h_100f1cd38b187535569d0354f2506fb74" kindref="member">lbuf</ref>;</highlight></codeline>
+<codeline lineno="377"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>last_cr_ptr<sp/>=<sp/>NULL;</highlight></codeline>
+<codeline lineno="378"><highlight class="normal"></highlight></codeline>
+<codeline lineno="379"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>con_from<sp/>=<sp/>con_from_end<sp/>=<sp/>con_to<sp/>=<sp/>con_to_end<sp/>=<sp/>etx<sp/>=<sp/>etx_end<sp/>=<sp/>NULL;</highlight></codeline>
+<codeline lineno="380"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dn<sp/>=<sp/>0;</highlight></codeline>
+<codeline lineno="381"><highlight class="normal"></highlight></codeline>
+<codeline lineno="382"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(<sp/>(*lbuf_ptr)<sp/>!=<sp/></highlight><highlight class="charliteral">&apos;\0&apos;</highlight><highlight class="normal"><sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="383"><highlight class="normal"></highlight></codeline>
+<codeline lineno="384"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>printf(<sp/>&quot;%c&quot;,(*lbuf_ptr)<sp/>);<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="385"><highlight class="normal"></highlight></codeline>
+<codeline lineno="386"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>(*lbuf_ptr)<sp/>==<sp/></highlight><highlight class="charliteral">&apos;\n&apos;</highlight><highlight class="normal"><sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="387"><highlight class="normal"></highlight></codeline>
+<codeline lineno="388"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>last_cr_ptr<sp/>=<sp/>lbuf_ptr;</highlight></codeline>
+<codeline lineno="389"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>con_from<sp/>=<sp/>con_from_end<sp/>=<sp/>con_to<sp/>=<sp/>con_to_end<sp/>=<sp/>etx<sp/>=<sp/>etx_end<sp/>=<sp/>NULL;</highlight></codeline>
+<codeline lineno="390"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dn<sp/>=<sp/>0;</highlight></codeline>
+<codeline lineno="391"><highlight class="normal"></highlight></codeline>
+<codeline lineno="392"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="393"><highlight class="normal"></highlight></codeline>
+<codeline lineno="394"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>(*lbuf_ptr)<sp/>==<sp/></highlight><highlight class="charliteral">&apos;&quot;&apos;</highlight><highlight class="normal"><sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="395"><highlight class="normal"></highlight></codeline>
+<codeline lineno="396"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(<sp/>dn<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="397"><highlight class="normal"></highlight></codeline>
+<codeline lineno="398"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>0:</highlight></codeline>
+<codeline lineno="399"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>con_from<sp/>=<sp/>lbuf_ptr<sp/>+<sp/>1;</highlight></codeline>
+<codeline lineno="400"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
+<codeline lineno="401"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>1:</highlight></codeline>
+<codeline lineno="402"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>con_from_end<sp/>=<sp/>lbuf_ptr;</highlight></codeline>
+<codeline lineno="403"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
+<codeline lineno="404"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>2:</highlight></codeline>
+<codeline lineno="405"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>con_to<sp/>=<sp/>lbuf_ptr<sp/>+<sp/>1;</highlight></codeline>
+<codeline lineno="406"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
+<codeline lineno="407"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>3:</highlight></codeline>
+<codeline lineno="408"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>con_to_end<sp/>=<sp/>lbuf_ptr;</highlight></codeline>
+<codeline lineno="409"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
+<codeline lineno="410"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>4:</highlight></codeline>
+<codeline lineno="411"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>etx<sp/>=<sp/>lbuf_ptr<sp/>+<sp/>1;</highlight></codeline>
+<codeline lineno="412"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
+<codeline lineno="413"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>5:</highlight></codeline>
+<codeline lineno="414"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>etx_end<sp/>=<sp/>lbuf_ptr;</highlight></codeline>
+<codeline lineno="415"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
+<codeline lineno="416"><highlight class="normal"></highlight></codeline>
+<codeline lineno="417"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="418"><highlight class="normal"></highlight></codeline>
+<codeline lineno="419"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>++dn<sp/>==<sp/>6<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="420"><highlight class="normal"></highlight></codeline>
+<codeline lineno="421"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>terminate<sp/>strings<sp/>-<sp/>but<sp/>not<sp/>before<sp/>6<sp/>times<sp/>&apos;&quot;&apos;<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="422"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*con_from_end)<sp/>=<sp/>(*con_to_end)<sp/>=<sp/>(*etx_end)<sp/>=<sp/></highlight><highlight class="charliteral">&apos;\0&apos;</highlight><highlight class="normal">;</highlight></codeline>
+<codeline lineno="423"><highlight class="normal"></highlight></codeline>
+<codeline lineno="424"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>printf(<sp/>&quot;con_from:<sp/>%s,<sp/>con_to:<sp/>%s,<sp/>etx:<sp/>%s\n&quot;,<sp/>con_from,<sp/>con_to,<sp/>etx<sp/>);<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="425"><highlight class="normal"></highlight></codeline>
+<codeline lineno="426"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>announced<sp/>network<sp/>via<sp/>HNA<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="427"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>strncmp(<sp/>etx,<sp/></highlight><highlight class="stringliteral">&quot;HNA&quot;</highlight><highlight class="normal">,<sp/><ref refid="olsrs3d_8h_1f8c0c53607c56b59e883cb0894e5cde7" kindref="member">NAMEMAX</ref><sp/>)<sp/>==<sp/>0<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="428"><highlight class="normal"></highlight></codeline>
+<codeline lineno="429"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>connection<sp/>to<sp/>internet<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="430"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>strncmp(<sp/>con_to,<sp/></highlight><highlight class="stringliteral">&quot;0.0.0.0/0.0.0.0&quot;</highlight><highlight class="normal">,<sp/><ref refid="olsrs3d_8h_1f8c0c53607c56b59e883cb0894e5cde7" kindref="member">NAMEMAX</ref><sp/>)<sp/>==<sp/>0<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="431"><highlight class="normal"></highlight></codeline>
+<codeline lineno="432"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>olsr_node1<sp/>=<sp/><ref refid="process_8c_17ba929b35f03f5921272b4e5e821ade2" kindref="member">get_olsr_node</ref>(<sp/>&amp;<ref refid="main_8c_1c5c5c6846587092d0c23b58b558e680c" kindref="member">Olsr_root</ref>,<sp/>con_from<sp/>);</highlight></codeline>
+<codeline lineno="433"><highlight class="normal"></highlight></codeline>
+<codeline lineno="434"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>olsr_node1-&gt;<ref refid="structolsr__node_1c89186513811183436bcd79cdb6d7b4d" kindref="member">node_type</ref><sp/>!=<sp/>1<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="435"><highlight class="normal"></highlight></codeline>
+<codeline lineno="436"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>olsr_node1-&gt;<ref refid="structolsr__node_1c89186513811183436bcd79cdb6d7b4d" kindref="member">node_type</ref><sp/>=<sp/>1;</highlight></codeline>
+<codeline lineno="437"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>olsr_node1-&gt;<ref refid="structolsr__node_14517a87e4fdbdb58f678743b5684088b" kindref="member">node_type_modified</ref><sp/>=<sp/>1;</highlight></codeline>
+<codeline lineno="438"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/><ref refid="main_8c_1923774364cedbc16baa0bc05e9be136c" kindref="member">Debug</ref><sp/>)<sp/>printf(<sp/></highlight><highlight class="stringliteral">&quot;new<sp/>internet:<sp/>%s\n&quot;</highlight><highlight class="normal">,<sp/>olsr_node1-&gt;<ref refid="structolsr__node_159690d75faff5c149faecacb4f4d2a57" kindref="member">ip</ref><sp/>);</highlight></codeline>
+<codeline lineno="439"><highlight class="normal"></highlight></codeline>
+<codeline lineno="440"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="441"><highlight class="normal"></highlight></codeline>
+<codeline lineno="442"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>normal<sp/>HNA<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="443"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
+<codeline lineno="444"><highlight class="normal"></highlight></codeline>
+<codeline lineno="445"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>olsr_node1<sp/>=<sp/><ref refid="process_8c_17ba929b35f03f5921272b4e5e821ade2" kindref="member">get_olsr_node</ref>(<sp/>&amp;<ref refid="main_8c_1c5c5c6846587092d0c23b58b558e680c" kindref="member">Olsr_root</ref>,<sp/>con_from<sp/>);</highlight></codeline>
+<codeline lineno="446"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>olsr_node2<sp/>=<sp/><ref refid="process_8c_17ba929b35f03f5921272b4e5e821ade2" kindref="member">get_olsr_node</ref>(<sp/>&amp;<ref refid="main_8c_1c5c5c6846587092d0c23b58b558e680c" kindref="member">Olsr_root</ref>,<sp/>con_to<sp/>);</highlight></codeline>
+<codeline lineno="447"><highlight class="normal"></highlight></codeline>
+<codeline lineno="448"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>olsr_node2-&gt;<ref refid="structolsr__node_1c89186513811183436bcd79cdb6d7b4d" kindref="member">node_type</ref><sp/>!=<sp/>2<sp/>)<sp/>{</highlight></codeline>
+<codeline lineno="449"><highlight class="normal"></highlight></codeline>
+<codeline lineno="450"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>olsr_node2-&gt;<ref refid="structolsr__node_1c89186513811183436bcd79cdb6d7b4d" kindref="member">node_type</ref><sp/>=<sp/>2;</highlight></codeline>
+<codeline lineno="451"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>olsr_node2-&gt;<ref refid="structolsr__node_14517a87e4fdbdb58f678743b5684088b" kindref="member">node_type_modified</ref><sp/>=<sp/>1;</highlight></codeline>
+<codeline lineno="452"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/><ref refid="main_8c_1923774364cedbc16baa0bc05e9be136c" kindref="member">Debug</ref><sp/>)<sp/>printf(<sp/></highlight><highlight class="stringliteral">&quot;new<sp/>hna<sp/>network:<sp/>%s\n&quot;</highlight><highlight class="normal">,<sp/>olsr_node2-&gt;<ref refid="structolsr__node_159690d75faff5c149faecacb4f4d2a57" kindref="member">ip</ref><sp/>);</highlight></codeline>
+<codeline lineno="453"><highlight class="normal"></highlight></codeline>
+<codeline lineno="454"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="455"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>olsr_node1-&gt;<ref refid="structolsr__node_1f19d37e4aa5263be9a1741de24686664" kindref="member">visible</ref><sp/>&amp;&amp;<sp/>olsr_node2-&gt;<ref refid="structolsr__node_1f19d37e4aa5263be9a1741de24686664" kindref="member">visible</ref><sp/>)</highlight></codeline>
+<codeline lineno="456"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="process_8c_14c780ee64b12fa5531a56edfb5ffcc00" kindref="member">add_olsr_con</ref>(<sp/>olsr_node1,<sp/>olsr_node2,<sp/>-1000.00<sp/>);</highlight></codeline>
+<codeline lineno="457"><highlight class="normal"></highlight></codeline>
+<codeline lineno="458"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="459"><highlight class="normal"></highlight></codeline>
+<codeline lineno="460"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>normal<sp/>node<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
+<codeline lineno="461"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
+<codeline lineno="462"><highlight class="normal"></highlight></codeline>
+<codeline lineno="463"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>olsr_node1<sp/>=<sp/><ref refid="process_8c_17ba929b35f03f5921272b4e5e821ade2" kindref="member">get_olsr_node</ref>(<sp/>&amp;<ref refid="main_8c_1c5c5c6846587092d0c23b58b558e680c" kindref="member">Olsr_root</ref>,<sp/>con_from<sp/>);</highlight></codeline>
+<codeline lineno="464"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>olsr_node2<sp/>=<sp/><ref refid="process_8c_17ba929b35f03f5921272b4e5e821ade2" kindref="member">get_olsr_node</ref>(<sp/>&amp;<ref refid="main_8c_1c5c5c6846587092d0c23b58b558e680c" kindref="member">Olsr_root</ref>,<sp/>con_to<sp/>);</highlight></codeline>
+<codeline lineno="465"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>f<sp/>=<sp/>strtod(etx,NULL);</highlight></codeline>
+<codeline lineno="466"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>f<sp/>&lt;<sp/>1<sp/>)</highlight></codeline>
+<codeline lineno="467"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>f<sp/>=<sp/>999;</highlight></codeline>
+<codeline lineno="468"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="process_8c_14c780ee64b12fa5531a56edfb5ffcc00" kindref="member">add_olsr_con</ref>(<sp/>olsr_node1,<sp/>olsr_node2,<sp/>f<sp/>);</highlight></codeline>
+<codeline lineno="469"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="470"><highlight class="normal"></highlight></codeline>
+<codeline lineno="471"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>con_from<sp/>=<sp/>con_from_end<sp/>=<sp/>con_to<sp/>=<sp/>con_to_end<sp/>=<sp/>etx<sp/>=<sp/>etx_end<sp/>=<sp/>NULL;</highlight></codeline>
+<codeline lineno="472"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dn<sp/>=<sp/>0;</highlight></codeline>
+<codeline lineno="473"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>last_cr_ptr<sp/>=<sp/>lbuf_ptr;</highlight></codeline>
+<codeline lineno="474"><highlight class="normal"></highlight></codeline>
+<codeline lineno="475"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="476"><highlight class="normal"></highlight></codeline>
+<codeline lineno="477"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="478"><highlight class="normal"></highlight></codeline>
+<codeline lineno="479"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lbuf_ptr++;</highlight></codeline>
+<codeline lineno="480"><highlight class="normal"></highlight></codeline>
+<codeline lineno="481"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
+<codeline lineno="482"><highlight class="normal"></highlight></codeline>
+<codeline lineno="483"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>last_cr_ptr<sp/>!=<sp/>NULL<sp/>)<sp/>memmove(<sp/><ref refid="olsrs3d_8h_100f1cd38b187535569d0354f2506fb74" kindref="member">lbuf</ref>,<sp/>last_cr_ptr<sp/>+<sp/>1,<sp/>strlen(<sp/>last_cr_ptr<sp/>)<sp/>);</highlight></codeline>
+<codeline lineno="484"><highlight class="normal"></highlight></codeline>
+<codeline lineno="485"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">(0);</highlight></codeline>
+<codeline lineno="486"><highlight class="normal"></highlight></codeline>
+<codeline lineno="487"><highlight class="normal">}</highlight></codeline>
+    </programlisting>
+    <location file="/home/bigm/s3d/apps/olsrs3d/process.c"/>
+  </compounddef>
+</doxygen>

Added: trunk/apps/olsrs3d/doxygen/xml/structObj__to__ip.xml
===================================================================
--- trunk/apps/olsrs3d/doxygen/xml/structObj__to__ip.xml	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/xml/structObj__to__ip.xml	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,135 @@
+<?xml version='1.0' encoding='iso-8859-1' standalone='no'?>
+<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.4.6">
+  <compounddef id="structObj__to__ip" kind="struct" prot="public">
+    <compoundname>Obj_to_ip</compoundname>
+    <includes refid="olsrs3d_8h" local="no">olsrs3d.h</includes>
+      <sectiondef kind="public-attrib">
+      <memberdef kind="variable" id="structObj__to__ip_123759dec76c683ac720f937fea4e4d41" prot="public" static="no" mutable="no">
+        <type>int</type>
+        <definition>int Obj_to_ip::id</definition>
+        <argsstring></argsstring>
+        <name>id</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="80" bodyfile="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" bodystart="80" bodyend="-1"/>
+        <referencedby refid="process_8c_1febf2594bdfe9ec411d0c04c9cd951b3" compoundref="process_8c" startline="281" endline="294">lst_del</referencedby>
+        <referencedby refid="process_8c_1edfb2ae44af543946842187ced1cd47e" compoundref="process_8c" startline="239" endline="249">lst_initialize</referencedby>
+        <referencedby refid="process_8c_1a015f713ca02d8b76a52175b4128d3e8" compoundref="process_8c" startline="359" endline="366">lst_out</referencedby>
+        <referencedby refid="process_8c_1576c61914d53ad9035e74317dbb15903" compoundref="process_8c" startline="303" endline="334">move_lst_ptr</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="structObj__to__ip_1da076aa87c753db90520204360bf326a" prot="public" static="no" mutable="no">
+        <type><ref refid="structObj__to__ip" kindref="compound">Obj_to_ip</ref> *</type>
+        <definition>struct Obj_to_ip* Obj_to_ip::next</definition>
+        <argsstring></argsstring>
+        <name>next</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="82" bodyfile="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" bodystart="82" bodyend="-1"/>
+        <referencedby refid="main_8c_1de55269b71a792259ef22763327686b9" compoundref="main_8c" startline="186" endline="390">handle_olsr_node</referencedby>
+        <referencedby refid="process_8c_1d01a29bcb2e2daed6fcc6516c328f141" compoundref="process_8c" startline="259" endline="272">lst_add</referencedby>
+        <referencedby refid="process_8c_1febf2594bdfe9ec411d0c04c9cd951b3" compoundref="process_8c" startline="281" endline="294">lst_del</referencedby>
+        <referencedby refid="process_8c_1edfb2ae44af543946842187ced1cd47e" compoundref="process_8c" startline="239" endline="249">lst_initialize</referencedby>
+        <referencedby refid="process_8c_1a015f713ca02d8b76a52175b4128d3e8" compoundref="process_8c" startline="359" endline="366">lst_out</referencedby>
+        <referencedby refid="process_8c_1576c61914d53ad9035e74317dbb15903" compoundref="process_8c" startline="303" endline="334">move_lst_ptr</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="structObj__to__ip_1207d8f9a609e3e20b4cbd9a7976dcd18" prot="public" static="no" mutable="no">
+        <type><ref refid="structolsr__node" kindref="compound">olsr_node</ref> *</type>
+        <definition>struct olsr_node* Obj_to_ip::olsr_node</definition>
+        <argsstring></argsstring>
+        <name>olsr_node</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="81" bodyfile="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" bodystart="81" bodyend="-1"/>
+        <referencedby refid="main_8c_1de55269b71a792259ef22763327686b9" compoundref="main_8c" startline="186" endline="390">handle_olsr_node</referencedby>
+        <referencedby refid="process_8c_1d01a29bcb2e2daed6fcc6516c328f141" compoundref="process_8c" startline="259" endline="272">lst_add</referencedby>
+        <referencedby refid="process_8c_1b74d5229fcc3a39626609ac9f12510dd" compoundref="process_8c" startline="349" endline="357">lst_search</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="structObj__to__ip_1c41475dd4632807df16315bad4309333" prot="public" static="no" mutable="no">
+        <type><ref refid="structObj__to__ip" kindref="compound">Obj_to_ip</ref> *</type>
+        <definition>struct Obj_to_ip* Obj_to_ip::prev</definition>
+        <argsstring></argsstring>
+        <name>prev</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="83" bodyfile="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" bodystart="83" bodyend="-1"/>
+        <referencedby refid="process_8c_1d01a29bcb2e2daed6fcc6516c328f141" compoundref="process_8c" startline="259" endline="272">lst_add</referencedby>
+        <referencedby refid="process_8c_1febf2594bdfe9ec411d0c04c9cd951b3" compoundref="process_8c" startline="281" endline="294">lst_del</referencedby>
+        <referencedby refid="process_8c_1edfb2ae44af543946842187ced1cd47e" compoundref="process_8c" startline="239" endline="249">lst_initialize</referencedby>
+        <referencedby refid="process_8c_1576c61914d53ad9035e74317dbb15903" compoundref="process_8c" startline="303" endline="334">move_lst_ptr</referencedby>
+      </memberdef>
+      </sectiondef>
+    <briefdescription>
+    </briefdescription>
+    <detaileddescription>
+    </detaileddescription>
+    <collaborationgraph>
+      <node id="2">
+        <label>olsr_node</label>
+        <link refid="structolsr__node"/>
+        <childnode refid="2" relation="usage">
+          <edgelabel>right
+left</edgelabel>
+        </childnode>
+        <childnode refid="3" relation="usage">
+          <edgelabel>olsr_neigh_list</edgelabel>
+        </childnode>
+      </node>
+      <node id="1">
+        <label>Obj_to_ip</label>
+        <link refid="structObj__to__ip"/>
+        <childnode refid="2" relation="usage">
+          <edgelabel>olsr_node</edgelabel>
+        </childnode>
+        <childnode refid="1" relation="usage">
+          <edgelabel>prev
+next</edgelabel>
+        </childnode>
+      </node>
+      <node id="3">
+        <label>olsr_neigh_list</label>
+        <link refid="structolsr__neigh__list"/>
+        <childnode refid="4" relation="usage">
+          <edgelabel>olsr_con</edgelabel>
+        </childnode>
+        <childnode refid="3" relation="usage">
+          <edgelabel>next_olsr_neigh_list</edgelabel>
+        </childnode>
+      </node>
+      <node id="4">
+        <label>olsr_con</label>
+        <link refid="structolsr__con"/>
+        <childnode refid="2" relation="usage">
+          <edgelabel>left_olsr_node
+right_olsr_node</edgelabel>
+        </childnode>
+        <childnode refid="4" relation="usage">
+          <edgelabel>next_olsr_con
+prev_olsr_con</edgelabel>
+        </childnode>
+      </node>
+    </collaborationgraph>
+    <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="79" bodyfile="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" bodystart="79" bodyend="84"/>
+    <listofallmembers>
+      <member refid="structObj__to__ip_123759dec76c683ac720f937fea4e4d41" prot="public" virt="non-virtual"><scope>Obj_to_ip</scope><name>id</name></member>
+      <member refid="structObj__to__ip_1da076aa87c753db90520204360bf326a" prot="public" virt="non-virtual"><scope>Obj_to_ip</scope><name>next</name></member>
+      <member refid="structObj__to__ip_1207d8f9a609e3e20b4cbd9a7976dcd18" prot="public" virt="non-virtual"><scope>Obj_to_ip</scope><name>olsr_node</name></member>
+      <member refid="structObj__to__ip_1c41475dd4632807df16315bad4309333" prot="public" virt="non-virtual"><scope>Obj_to_ip</scope><name>prev</name></member>
+    </listofallmembers>
+  </compounddef>
+</doxygen>

Added: trunk/apps/olsrs3d/doxygen/xml/structolsr__con.xml
===================================================================
--- trunk/apps/olsrs3d/doxygen/xml/structolsr__con.xml	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/xml/structolsr__con.xml	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,198 @@
+<?xml version='1.0' encoding='iso-8859-1' standalone='no'?>
+<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.4.6">
+  <compounddef id="structolsr__con" kind="struct" prot="public">
+    <compoundname>olsr_con</compoundname>
+    <includes refid="olsrs3d_8h" local="no">olsrs3d.h</includes>
+      <sectiondef kind="public-attrib">
+      <memberdef kind="variable" id="structolsr__con_126a11a87df79af8e59e9f5048937b0c1" prot="public" static="no" mutable="no">
+        <type>int</type>
+        <definition>int olsr_con::color</definition>
+        <argsstring></argsstring>
+        <name>color</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="44" bodyfile="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" bodystart="44" bodyend="-1"/>
+        <referencedby refid="main_8c_1b8d0d8cf5ac8914802be645e15241b77" compoundref="main_8c" startline="439" endline="620">move_olsr_nodes</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="structolsr__con_1d93efab11883355b45a0460456991362" prot="public" static="no" mutable="no">
+        <type>float</type>
+        <definition>float olsr_con::left_etx</definition>
+        <argsstring></argsstring>
+        <name>left_etx</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="41" bodyfile="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" bodystart="41" bodyend="-1"/>
+        <referencedby refid="process_8c_14c780ee64b12fa5531a56edfb5ffcc00" compoundref="process_8c" startline="48" endline="140">add_olsr_con</referencedby>
+        <referencedby refid="main_8c_1668e36a25680cc3e0ac4d85a418a838a" compoundref="main_8c" startline="400" endline="429">calc_olsr_node_mov</referencedby>
+        <referencedby refid="main_8c_1b8d0d8cf5ac8914802be645e15241b77" compoundref="main_8c" startline="439" endline="620">move_olsr_nodes</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="structolsr__con_1578882f9337bb0bdad9444e85d56a088" prot="public" static="no" mutable="no">
+        <type><ref refid="structolsr__node" kindref="compound">olsr_node</ref> *</type>
+        <definition>struct olsr_node* olsr_con::left_olsr_node</definition>
+        <argsstring></argsstring>
+        <name>left_olsr_node</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="39" bodyfile="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" bodystart="39" bodyend="-1"/>
+        <referencedby refid="main_8c_1668e36a25680cc3e0ac4d85a418a838a" compoundref="main_8c" startline="400" endline="429">calc_olsr_node_mov</referencedby>
+        <referencedby refid="main_8c_1de55269b71a792259ef22763327686b9" compoundref="main_8c" startline="186" endline="390">handle_olsr_node</referencedby>
+        <referencedby refid="main_8c_1b8d0d8cf5ac8914802be645e15241b77" compoundref="main_8c" startline="439" endline="620">move_olsr_nodes</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="structolsr__con_1369dfd6eec077d0a6228cd1387135e6e" prot="public" static="no" mutable="no">
+        <type><ref refid="structolsr__con" kindref="compound">olsr_con</ref> *</type>
+        <definition>struct olsr_con* olsr_con::next_olsr_con</definition>
+        <argsstring></argsstring>
+        <name>next_olsr_con</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="37" bodyfile="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" bodystart="37" bodyend="-1"/>
+        <referencedby refid="process_8c_14c780ee64b12fa5531a56edfb5ffcc00" compoundref="process_8c" startline="48" endline="140">add_olsr_con</referencedby>
+        <referencedby refid="main_8c_1668e36a25680cc3e0ac4d85a418a838a" compoundref="main_8c" startline="400" endline="429">calc_olsr_node_mov</referencedby>
+        <referencedby refid="main_8c_1de55269b71a792259ef22763327686b9" compoundref="main_8c" startline="186" endline="390">handle_olsr_node</referencedby>
+        <referencedby refid="main_8c_1b8d0d8cf5ac8914802be645e15241b77" compoundref="main_8c" startline="439" endline="620">move_olsr_nodes</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="structolsr__con_1fe985b6b83425cb17e801ac00001175e" prot="public" static="no" mutable="no">
+        <type>int</type>
+        <definition>int olsr_con::obj_id</definition>
+        <argsstring></argsstring>
+        <name>obj_id</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="43" bodyfile="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" bodystart="43" bodyend="-1"/>
+        <referencedby refid="main_8c_1de55269b71a792259ef22763327686b9" compoundref="main_8c" startline="186" endline="390">handle_olsr_node</referencedby>
+        <referencedby refid="main_8c_1b8d0d8cf5ac8914802be645e15241b77" compoundref="main_8c" startline="439" endline="620">move_olsr_nodes</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="structolsr__con_10382eebfbf31d5f217572d4907c503cb" prot="public" static="no" mutable="no">
+        <type><ref refid="structolsr__con" kindref="compound">olsr_con</ref> *</type>
+        <definition>struct olsr_con* olsr_con::prev_olsr_con</definition>
+        <argsstring></argsstring>
+        <name>prev_olsr_con</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="38" bodyfile="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" bodystart="38" bodyend="-1"/>
+        <referencedby refid="process_8c_14c780ee64b12fa5531a56edfb5ffcc00" compoundref="process_8c" startline="48" endline="140">add_olsr_con</referencedby>
+        <referencedby refid="main_8c_1de55269b71a792259ef22763327686b9" compoundref="main_8c" startline="186" endline="390">handle_olsr_node</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="structolsr__con_1239f576ba1dae4303a935a296d5adb95" prot="public" static="no" mutable="no">
+        <type>float</type>
+        <definition>float olsr_con::rgb</definition>
+        <argsstring></argsstring>
+        <name>rgb</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="45" bodyfile="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" bodystart="45" bodyend="-1"/>
+        <referencedby refid="main_8c_1b8d0d8cf5ac8914802be645e15241b77" compoundref="main_8c" startline="439" endline="620">move_olsr_nodes</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="structolsr__con_130d90c31e93a79ba37ca51b8d146693a" prot="public" static="no" mutable="no">
+        <type>float</type>
+        <definition>float olsr_con::right_etx</definition>
+        <argsstring></argsstring>
+        <name>right_etx</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="42" bodyfile="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" bodystart="42" bodyend="-1"/>
+        <referencedby refid="main_8c_1668e36a25680cc3e0ac4d85a418a838a" compoundref="main_8c" startline="400" endline="429">calc_olsr_node_mov</referencedby>
+        <referencedby refid="main_8c_1b8d0d8cf5ac8914802be645e15241b77" compoundref="main_8c" startline="439" endline="620">move_olsr_nodes</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="structolsr__con_1f49aca51c70a95deddf8bb715d63af31" prot="public" static="no" mutable="no">
+        <type><ref refid="structolsr__node" kindref="compound">olsr_node</ref> *</type>
+        <definition>struct olsr_node* olsr_con::right_olsr_node</definition>
+        <argsstring></argsstring>
+        <name>right_olsr_node</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="40" bodyfile="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" bodystart="40" bodyend="-1"/>
+        <referencedby refid="main_8c_1668e36a25680cc3e0ac4d85a418a838a" compoundref="main_8c" startline="400" endline="429">calc_olsr_node_mov</referencedby>
+        <referencedby refid="main_8c_1de55269b71a792259ef22763327686b9" compoundref="main_8c" startline="186" endline="390">handle_olsr_node</referencedby>
+        <referencedby refid="main_8c_1b8d0d8cf5ac8914802be645e15241b77" compoundref="main_8c" startline="439" endline="620">move_olsr_nodes</referencedby>
+      </memberdef>
+      </sectiondef>
+    <briefdescription>
+    </briefdescription>
+    <detaileddescription>
+    </detaileddescription>
+    <collaborationgraph>
+      <node id="7">
+        <label>olsr_node</label>
+        <link refid="structolsr__node"/>
+        <childnode refid="7" relation="usage">
+          <edgelabel>right
+left</edgelabel>
+        </childnode>
+        <childnode refid="8" relation="usage">
+          <edgelabel>olsr_neigh_list</edgelabel>
+        </childnode>
+      </node>
+      <node id="8">
+        <label>olsr_neigh_list</label>
+        <link refid="structolsr__neigh__list"/>
+        <childnode refid="6" relation="usage">
+          <edgelabel>olsr_con</edgelabel>
+        </childnode>
+        <childnode refid="8" relation="usage">
+          <edgelabel>next_olsr_neigh_list</edgelabel>
+        </childnode>
+      </node>
+      <node id="6">
+        <label>olsr_con</label>
+        <link refid="structolsr__con"/>
+        <childnode refid="7" relation="usage">
+          <edgelabel>left_olsr_node
+right_olsr_node</edgelabel>
+        </childnode>
+        <childnode refid="6" relation="usage">
+          <edgelabel>next_olsr_con
+prev_olsr_con</edgelabel>
+        </childnode>
+      </node>
+    </collaborationgraph>
+    <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="35" bodyfile="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" bodystart="35" bodyend="47"/>
+    <listofallmembers>
+      <member refid="structolsr__con_126a11a87df79af8e59e9f5048937b0c1" prot="public" virt="non-virtual"><scope>olsr_con</scope><name>color</name></member>
+      <member refid="structolsr__con_1d93efab11883355b45a0460456991362" prot="public" virt="non-virtual"><scope>olsr_con</scope><name>left_etx</name></member>
+      <member refid="structolsr__con_1578882f9337bb0bdad9444e85d56a088" prot="public" virt="non-virtual"><scope>olsr_con</scope><name>left_olsr_node</name></member>
+      <member refid="structolsr__con_1369dfd6eec077d0a6228cd1387135e6e" prot="public" virt="non-virtual"><scope>olsr_con</scope><name>next_olsr_con</name></member>
+      <member refid="structolsr__con_1fe985b6b83425cb17e801ac00001175e" prot="public" virt="non-virtual"><scope>olsr_con</scope><name>obj_id</name></member>
+      <member refid="structolsr__con_10382eebfbf31d5f217572d4907c503cb" prot="public" virt="non-virtual"><scope>olsr_con</scope><name>prev_olsr_con</name></member>
+      <member refid="structolsr__con_1239f576ba1dae4303a935a296d5adb95" prot="public" virt="non-virtual"><scope>olsr_con</scope><name>rgb</name></member>
+      <member refid="structolsr__con_130d90c31e93a79ba37ca51b8d146693a" prot="public" virt="non-virtual"><scope>olsr_con</scope><name>right_etx</name></member>
+      <member refid="structolsr__con_1f49aca51c70a95deddf8bb715d63af31" prot="public" virt="non-virtual"><scope>olsr_con</scope><name>right_olsr_node</name></member>
+    </listofallmembers>
+  </compounddef>
+</doxygen>

Added: trunk/apps/olsrs3d/doxygen/xml/structolsr__neigh__list.xml
===================================================================
--- trunk/apps/olsrs3d/doxygen/xml/structolsr__neigh__list.xml	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/xml/structolsr__neigh__list.xml	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,83 @@
+<?xml version='1.0' encoding='iso-8859-1' standalone='no'?>
+<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.4.6">
+  <compounddef id="structolsr__neigh__list" kind="struct" prot="public">
+    <compoundname>olsr_neigh_list</compoundname>
+    <includes refid="olsrs3d_8h" local="no">olsrs3d.h</includes>
+      <sectiondef kind="public-attrib">
+      <memberdef kind="variable" id="structolsr__neigh__list_1f1d533fde49e1ed2ea5299661f5c10c6" prot="public" static="no" mutable="no">
+        <type><ref refid="structolsr__neigh__list" kindref="compound">olsr_neigh_list</ref> *</type>
+        <definition>struct olsr_neigh_list* olsr_neigh_list::next_olsr_neigh_list</definition>
+        <argsstring></argsstring>
+        <name>next_olsr_neigh_list</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="53" bodyfile="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" bodystart="53" bodyend="-1"/>
+        <referencedby refid="process_8c_14c780ee64b12fa5531a56edfb5ffcc00" compoundref="process_8c" startline="48" endline="140">add_olsr_con</referencedby>
+        <referencedby refid="main_8c_1de55269b71a792259ef22763327686b9" compoundref="main_8c" startline="186" endline="390">handle_olsr_node</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="structolsr__neigh__list_183a291941fbb40293f8e2e5c6b4d11b6" prot="public" static="no" mutable="no">
+        <type><ref refid="structolsr__con" kindref="compound">olsr_con</ref> *</type>
+        <definition>struct olsr_con* olsr_neigh_list::olsr_con</definition>
+        <argsstring></argsstring>
+        <name>olsr_con</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="54" bodyfile="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" bodystart="54" bodyend="-1"/>
+        <referencedby refid="process_8c_14c780ee64b12fa5531a56edfb5ffcc00" compoundref="process_8c" startline="48" endline="140">add_olsr_con</referencedby>
+        <referencedby refid="main_8c_1de55269b71a792259ef22763327686b9" compoundref="main_8c" startline="186" endline="390">handle_olsr_node</referencedby>
+      </memberdef>
+      </sectiondef>
+    <briefdescription>
+    </briefdescription>
+    <detaileddescription>
+    </detaileddescription>
+    <collaborationgraph>
+      <node id="12">
+        <label>olsr_node</label>
+        <link refid="structolsr__node"/>
+        <childnode refid="12" relation="usage">
+          <edgelabel>right
+left</edgelabel>
+        </childnode>
+        <childnode refid="10" relation="usage">
+          <edgelabel>olsr_neigh_list</edgelabel>
+        </childnode>
+      </node>
+      <node id="10">
+        <label>olsr_neigh_list</label>
+        <link refid="structolsr__neigh__list"/>
+        <childnode refid="11" relation="usage">
+          <edgelabel>olsr_con</edgelabel>
+        </childnode>
+        <childnode refid="10" relation="usage">
+          <edgelabel>next_olsr_neigh_list</edgelabel>
+        </childnode>
+      </node>
+      <node id="11">
+        <label>olsr_con</label>
+        <link refid="structolsr__con"/>
+        <childnode refid="12" relation="usage">
+          <edgelabel>left_olsr_node
+right_olsr_node</edgelabel>
+        </childnode>
+        <childnode refid="11" relation="usage">
+          <edgelabel>next_olsr_con
+prev_olsr_con</edgelabel>
+        </childnode>
+      </node>
+    </collaborationgraph>
+    <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="51" bodyfile="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" bodystart="51" bodyend="56"/>
+    <listofallmembers>
+      <member refid="structolsr__neigh__list_1f1d533fde49e1ed2ea5299661f5c10c6" prot="public" virt="non-virtual"><scope>olsr_neigh_list</scope><name>next_olsr_neigh_list</name></member>
+      <member refid="structolsr__neigh__list_183a291941fbb40293f8e2e5c6b4d11b6" prot="public" virt="non-virtual"><scope>olsr_neigh_list</scope><name>olsr_con</name></member>
+    </listofallmembers>
+  </compounddef>
+</doxygen>

Added: trunk/apps/olsrs3d/doxygen/xml/structolsr__node.xml
===================================================================
--- trunk/apps/olsrs3d/doxygen/xml/structolsr__node.xml	2006-03-19 11:34:43 UTC (rev 214)
+++ trunk/apps/olsrs3d/doxygen/xml/structolsr__node.xml	2006-03-19 12:31:45 UTC (rev 215)
@@ -0,0 +1,260 @@
+<?xml version='1.0' encoding='iso-8859-1' standalone='no'?>
+<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.4.6">
+  <compounddef id="structolsr__node" kind="struct" prot="public">
+    <compoundname>olsr_node</compoundname>
+    <includes refid="olsrs3d_8h" local="no">olsrs3d.h</includes>
+      <sectiondef kind="public-attrib">
+      <memberdef kind="variable" id="structolsr__node_1f2e3f729be82b64001867038bbe8012a" prot="public" static="no" mutable="no">
+        <type>int</type>
+        <definition>int olsr_node::desc_id</definition>
+        <argsstring></argsstring>
+        <name>desc_id</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="72" bodyfile="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" bodystart="72" bodyend="-1"/>
+        <referencedby refid="main_8c_1de55269b71a792259ef22763327686b9" compoundref="main_8c" startline="186" endline="390">handle_olsr_node</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="structolsr__node_1c2a66c5312cf64fec10f6b8903dbd966" prot="public" static="no" mutable="no">
+        <type>float</type>
+        <definition>float olsr_node::desc_length</definition>
+        <argsstring></argsstring>
+        <name>desc_length</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="73" bodyfile="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" bodystart="73" bodyend="-1"/>
+        <referencedby refid="main_8c_1de55269b71a792259ef22763327686b9" compoundref="main_8c" startline="186" endline="390">handle_olsr_node</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="structolsr__node_159690d75faff5c149faecacb4f4d2a57" prot="public" static="no" mutable="no">
+        <type>char</type>
+        <definition>char olsr_node::ip[NAMEMAX]</definition>
+        <argsstring>[NAMEMAX]</argsstring>
+        <name>ip</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="64" bodyfile="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" bodystart="64" bodyend="-1"/>
+        <referencedby refid="process_8c_14c780ee64b12fa5531a56edfb5ffcc00" compoundref="process_8c" startline="48" endline="140">add_olsr_con</referencedby>
+        <referencedby refid="main_8c_1de55269b71a792259ef22763327686b9" compoundref="main_8c" startline="186" endline="390">handle_olsr_node</referencedby>
+        <referencedby refid="main_8c_1ddbd46dad32b89cec68daa03a08f3582" compoundref="main_8c" startline="746" endline="768">object_click</referencedby>
+        <referencedby refid="process_8c_16b4e9b6718b671f6330c2e501c60d3c1" compoundref="process_8c" startline="368" endline="487">process_main</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="structolsr__node_11d492aa6f4e75cc100d7a3e2f059d615" prot="public" static="no" mutable="no">
+        <type>int</type>
+        <definition>int olsr_node::last_seen</definition>
+        <argsstring></argsstring>
+        <name>last_seen</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="67" bodyfile="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" bodystart="67" bodyend="-1"/>
+        <referencedby refid="main_8c_1de55269b71a792259ef22763327686b9" compoundref="main_8c" startline="186" endline="390">handle_olsr_node</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="structolsr__node_1b64ee26ebfa4a3c2719de780b4cabada" prot="public" static="no" mutable="no">
+        <type><ref refid="structolsr__node" kindref="compound">olsr_node</ref> *</type>
+        <definition>struct olsr_node* olsr_node::left</definition>
+        <argsstring></argsstring>
+        <name>left</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="62" bodyfile="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" bodystart="62" bodyend="-1"/>
+        <referencedby refid="process_8c_17ba929b35f03f5921272b4e5e821ade2" compoundref="process_8c" startline="155" endline="231">get_olsr_node</referencedby>
+        <referencedby refid="main_8c_1de55269b71a792259ef22763327686b9" compoundref="main_8c" startline="186" endline="390">handle_olsr_node</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="structolsr__node_1f95ed9fca02788c5f4933ac51b4ea147" prot="public" static="no" mutable="no">
+        <type>float</type>
+        <definition>float olsr_node::mov_vec[3]</definition>
+        <argsstring>[3]</argsstring>
+        <name>mov_vec</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="70" bodyfile="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" bodystart="70" bodyend="-1"/>
+        <referencedby refid="main_8c_1668e36a25680cc3e0ac4d85a418a838a" compoundref="main_8c" startline="400" endline="429">calc_olsr_node_mov</referencedby>
+        <referencedby refid="main_8c_1de55269b71a792259ef22763327686b9" compoundref="main_8c" startline="186" endline="390">handle_olsr_node</referencedby>
+        <referencedby refid="main_8c_1b8d0d8cf5ac8914802be645e15241b77" compoundref="main_8c" startline="439" endline="620">move_olsr_nodes</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="structolsr__node_1c89186513811183436bcd79cdb6d7b4d" prot="public" static="no" mutable="no">
+        <type>int</type>
+        <definition>int olsr_node::node_type</definition>
+        <argsstring></argsstring>
+        <name>node_type</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="65" bodyfile="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" bodystart="65" bodyend="-1"/>
+        <referencedby refid="main_8c_1de55269b71a792259ef22763327686b9" compoundref="main_8c" startline="186" endline="390">handle_olsr_node</referencedby>
+        <referencedby refid="process_8c_16b4e9b6718b671f6330c2e501c60d3c1" compoundref="process_8c" startline="368" endline="487">process_main</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="structolsr__node_14517a87e4fdbdb58f678743b5684088b" prot="public" static="no" mutable="no">
+        <type>int</type>
+        <definition>int olsr_node::node_type_modified</definition>
+        <argsstring></argsstring>
+        <name>node_type_modified</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="66" bodyfile="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" bodystart="66" bodyend="-1"/>
+        <referencedby refid="main_8c_1de55269b71a792259ef22763327686b9" compoundref="main_8c" startline="186" endline="390">handle_olsr_node</referencedby>
+        <referencedby refid="process_8c_16b4e9b6718b671f6330c2e501c60d3c1" compoundref="process_8c" startline="368" endline="487">process_main</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="structolsr__node_115be0912065801026e7b4411af561788" prot="public" static="no" mutable="no">
+        <type>int</type>
+        <definition>int olsr_node::obj_id</definition>
+        <argsstring></argsstring>
+        <name>obj_id</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="71" bodyfile="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" bodystart="71" bodyend="-1"/>
+        <referencedby refid="main_8c_1de55269b71a792259ef22763327686b9" compoundref="main_8c" startline="186" endline="390">handle_olsr_node</referencedby>
+        <referencedby refid="main_8c_1b8d0d8cf5ac8914802be645e15241b77" compoundref="main_8c" startline="439" endline="620">move_olsr_nodes</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="structolsr__node_13b80ce78a06be6aba5a1f93887442764" prot="public" static="no" mutable="no">
+        <type><ref refid="structolsr__neigh__list" kindref="compound">olsr_neigh_list</ref> *</type>
+        <definition>struct olsr_neigh_list* olsr_node::olsr_neigh_list</definition>
+        <argsstring></argsstring>
+        <name>olsr_neigh_list</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="74" bodyfile="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" bodystart="74" bodyend="-1"/>
+        <referencedby refid="main_8c_1de55269b71a792259ef22763327686b9" compoundref="main_8c" startline="186" endline="390">handle_olsr_node</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="structolsr__node_191977704430de9534f7a118d1dfbeb54" prot="public" static="no" mutable="no">
+        <type>float</type>
+        <definition>float olsr_node::pos_vec[3]</definition>
+        <argsstring>[3]</argsstring>
+        <name>pos_vec</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="69" bodyfile="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" bodystart="69" bodyend="-1"/>
+        <referencedby refid="main_8c_1668e36a25680cc3e0ac4d85a418a838a" compoundref="main_8c" startline="400" endline="429">calc_olsr_node_mov</referencedby>
+        <referencedby refid="main_8c_1de55269b71a792259ef22763327686b9" compoundref="main_8c" startline="186" endline="390">handle_olsr_node</referencedby>
+        <referencedby refid="main_8c_1b8d0d8cf5ac8914802be645e15241b77" compoundref="main_8c" startline="439" endline="620">move_olsr_nodes</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="structolsr__node_1bc6cf143d12b1e5a204ae64d40c0eb05" prot="public" static="no" mutable="no">
+        <type><ref refid="structolsr__node" kindref="compound">olsr_node</ref> *</type>
+        <definition>struct olsr_node* olsr_node::right</definition>
+        <argsstring></argsstring>
+        <name>right</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="63" bodyfile="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" bodystart="63" bodyend="-1"/>
+        <referencedby refid="process_8c_17ba929b35f03f5921272b4e5e821ade2" compoundref="process_8c" startline="155" endline="231">get_olsr_node</referencedby>
+        <referencedby refid="main_8c_1de55269b71a792259ef22763327686b9" compoundref="main_8c" startline="186" endline="390">handle_olsr_node</referencedby>
+      </memberdef>
+      <memberdef kind="variable" id="structolsr__node_1f19d37e4aa5263be9a1741de24686664" prot="public" static="no" mutable="no">
+        <type>int</type>
+        <definition>int olsr_node::visible</definition>
+        <argsstring></argsstring>
+        <name>visible</name>
+        <briefdescription>
+        </briefdescription>
+        <detaileddescription>
+        </detaileddescription>
+        <inbodydescription>
+        </inbodydescription>
+        <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="68" bodyfile="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" bodystart="68" bodyend="-1"/>
+        <referencedby refid="main_8c_1de55269b71a792259ef22763327686b9" compoundref="main_8c" startline="186" endline="390">handle_olsr_node</referencedby>
+        <referencedby refid="main_8c_1b8d0d8cf5ac8914802be645e15241b77" compoundref="main_8c" startline="439" endline="620">move_olsr_nodes</referencedby>
+        <referencedby refid="process_8c_16b4e9b6718b671f6330c2e501c60d3c1" compoundref="process_8c" startline="368" endline="487">process_main</referencedby>
+      </memberdef>
+      </sectiondef>
+    <briefdescription>
+    </briefdescription>
+    <detaileddescription>
+    </detaileddescription>
+    <collaborationgraph>
+      <node id="14">
+        <label>olsr_node</label>
+        <link refid="structolsr__node"/>
+        <childnode refid="14" relation="usage">
+          <edgelabel>right
+left</edgelabel>
+        </childnode>
+        <childnode refid="15" relation="usage">
+          <edgelabel>olsr_neigh_list</edgelabel>
+        </childnode>
+      </node>
+      <node id="15">
+        <label>olsr_neigh_list</label>
+        <link refid="structolsr__neigh__list"/>
+        <childnode refid="16" relation="usage">
+          <edgelabel>olsr_con</edgelabel>
+        </childnode>
+        <childnode refid="15" relation="usage">
+          <edgelabel>next_olsr_neigh_list</edgelabel>
+        </childnode>
+      </node>
+      <node id="16">
+        <label>olsr_con</label>
+        <link refid="structolsr__con"/>
+        <childnode refid="14" relation="usage">
+          <edgelabel>left_olsr_node
+right_olsr_node</edgelabel>
+        </childnode>
+        <childnode refid="16" relation="usage">
+          <edgelabel>next_olsr_con
+prev_olsr_con</edgelabel>
+        </childnode>
+      </node>
+    </collaborationgraph>
+    <location file="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" line="60" bodyfile="/home/bigm/s3d/apps/olsrs3d/olsrs3d.h" bodystart="60" bodyend="76"/>
+    <listofallmembers>
+      <member refid="structolsr__node_1f2e3f729be82b64001867038bbe8012a" prot="public" virt="non-virtual"><scope>olsr_node</scope><name>desc_id</name></member>
+      <member refid="structolsr__node_1c2a66c5312cf64fec10f6b8903dbd966" prot="public" virt="non-virtual"><scope>olsr_node</scope><name>desc_length</name></member>
+      <member refid="structolsr__node_159690d75faff5c149faecacb4f4d2a57" prot="public" virt="non-virtual"><scope>olsr_node</scope><name>ip</name></member>
+      <member refid="structolsr__node_11d492aa6f4e75cc100d7a3e2f059d615" prot="public" virt="non-virtual"><scope>olsr_node</scope><name>last_seen</name></member>
+      <member refid="structolsr__node_1b64ee26ebfa4a3c2719de780b4cabada" prot="public" virt="non-virtual"><scope>olsr_node</scope><name>left</name></member>
+      <member refid="structolsr__node_1f95ed9fca02788c5f4933ac51b4ea147" prot="public" virt="non-virtual"><scope>olsr_node</scope><name>mov_vec</name></member>
+      <member refid="structolsr__node_1c89186513811183436bcd79cdb6d7b4d" prot="public" virt="non-virtual"><scope>olsr_node</scope><name>node_type</name></member>
+      <member refid="structolsr__node_14517a87e4fdbdb58f678743b5684088b" prot="public" virt="non-virtual"><scope>olsr_node</scope><name>node_type_modified</name></member>
+      <member refid="structolsr__node_115be0912065801026e7b4411af561788" prot="public" virt="non-virtual"><scope>olsr_node</scope><name>obj_id</name></member>
+      <member refid="structolsr__node_13b80ce78a06be6aba5a1f93887442764" prot="public" virt="non-virtual"><scope>olsr_node</scope><name>olsr_neigh_list</name></member>
+      <member refid="structolsr__node_191977704430de9534f7a118d1dfbeb54" prot="public" virt="non-virtual"><scope>olsr_node</scope><name>pos_vec</name></member>
+      <member refid="structolsr__node_1bc6cf143d12b1e5a204ae64d40c0eb05" prot="public" virt="non-virtual"><scope>olsr_node</scope><name>right</name></member>
+      <member refid="structolsr__node_1f19d37e4aa5263be9a1741de24686664" prot="public" virt="non-virtual"><scope>olsr_node</scope><name>visible</name></member>
+    </listofallmembers>
+  </compounddef>
+</doxygen>



From nichtsnutz at berlios.de  Sun Mar 19 14:56:31 2006
From: nichtsnutz at berlios.de (nichtsnutz at BerliOS)
Date: Sun, 19 Mar 2006 14:56:31 +0100
Subject: [S3d-svn] r216 - trunk/apps/olsrs3d
Message-ID: <200603191356.k2JDuV7U019796@sheep.berlios.de>

Author: nichtsnutz
Date: 2006-03-19 14:56:11 +0100 (Sun, 19 Mar 2006)
New Revision: 216

Modified:
   trunk/apps/olsrs3d/main.c
Log:
add output for clicked node ( etx of clicked node to connected node and etx of connected node to clicked node ), not final


Modified: trunk/apps/olsrs3d/main.c
===================================================================
--- trunk/apps/olsrs3d/main.c	2006-03-19 12:31:45 UTC (rev 215)
+++ trunk/apps/olsrs3d/main.c	2006-03-19 13:56:11 UTC (rev 216)
@@ -49,6 +49,9 @@
 int Olsr_node_count = 0, Last_olsr_node_count = -1;
 int Olsr_node_count_obj = -1;
 int Olsr_ip_label_obj = -1;
+int *Olsr_neighbour_label_obj = NULL;
+int Size;
+
 int Net_read_count;
 
 int Olsr_node_obj, Olsr_node_inet_obj, Olsr_node_hna_net;
@@ -749,22 +752,69 @@
 	/* float distance,tmp_vector[3]; */
 	char ip_str[50];
 	struct olsr_node *olsr_node;
+	float ln;
+	struct olsr_neigh_list *tmpNeighbour;
+	float p = 1.0;
+	int i;
+	
 	oid=(int)*((unsigned long *)evt->buf);
 	olsr_node = *lst_search(oid);
-	/* printf("obj2ip: search return %s\n",olsr_node->ip); */
+	
 	/*
 	distance = dirt(CamPosition[0],olsr_node->pos_vec,tmp_vector);
 	mov_add(ZeroPosition,tmp_vector,1.0);
 	s3d_translate(ZeroPoint,ZeroPosition[0] * -1,ZeroPosition[1] * -1,ZeroPosition[2] * -1);
 	*/
+	
+	/* print clicked object ip and connections */
 	if ( Olsr_ip_label_obj != -1 ) s3d_del_object( Olsr_ip_label_obj );
-	/*Olsr_ip_label_obj = s3d_clone(olsr_node->desc_id);*/
-	snprintf( ip_str, 50, "ip: %s", olsr_node->ip );
-	Olsr_ip_label_obj = s3d_draw_string( ip_str, NULL );
+	snprintf( ip_str, 35, "ip: %s", olsr_node->ip );
+	Olsr_ip_label_obj = s3d_draw_string( ip_str, &ln );
 	s3d_link( Olsr_ip_label_obj, 0 );
 	s3d_flags_on( Olsr_ip_label_obj, S3D_OF_VISIBLE );
 	s3d_scale( Olsr_ip_label_obj, 0.2 );
-	s3d_translate( Olsr_ip_label_obj, Left*3.0, -Bottom*3.0-0.6, -3.0 );
+	s3d_translate( Olsr_ip_label_obj,-Left*3.0-(ln * 0.2), -Bottom*3.0-0.8, -3.0 );
+	
+	if( Olsr_neighbour_label_obj != NULL )
+	{
+		/* int n = sizeof(Olsr_neighbour_label_obj) / sizeof(int);*/
+		for(i=0; i < Size; i++)
+		{
+			printf("remove %d\n",Olsr_neighbour_label_obj[i]);
+			s3d_del_object( Olsr_neighbour_label_obj[i] );
+		}
+		free(Olsr_neighbour_label_obj);
+		Olsr_neighbour_label_obj = NULL;
+	}
+	
+	tmpNeighbour = olsr_node->olsr_neigh_list;
+	
+	Size = 0;
+	while(tmpNeighbour != NULL)
+	{
+		Size++;
+		tmpNeighbour = tmpNeighbour->next_olsr_neigh_list;
+	}
+	
+	Olsr_neighbour_label_obj = malloc(Size*sizeof(int));
+	tmpNeighbour = olsr_node->olsr_neigh_list;
+	
+	for(i = 0; i < Size ;i++)
+	{	
+		char nIpStr[60];
+		float len;
+		snprintf(nIpStr, 60, "%10.2f %s %10.2f", (strcmp(olsr_node->ip,tmpNeighbour->olsr_con->right_olsr_node->ip)?tmpNeighbour->olsr_con->left_etx:tmpNeighbour->olsr_con->right_etx),
+				    (strcmp(olsr_node->ip,tmpNeighbour->olsr_con->right_olsr_node->ip)?tmpNeighbour->olsr_con->right_olsr_node->ip:tmpNeighbour->olsr_con->left_olsr_node->ip),
+				    	(strcmp(olsr_node->ip,tmpNeighbour->olsr_con->right_olsr_node->ip)?tmpNeighbour->olsr_con->right_etx:tmpNeighbour->olsr_con->left_etx));
+		Olsr_neighbour_label_obj[i] = s3d_draw_string( nIpStr, &len );
+		s3d_link(Olsr_neighbour_label_obj[i], 0);
+		s3d_flags_on(Olsr_neighbour_label_obj[i], S3D_OF_VISIBLE );
+		s3d_scale(Olsr_neighbour_label_obj[i], 0.2 );
+		s3d_translate(Olsr_neighbour_label_obj[i], -Left*3.0-(len * 0.2), -Bottom*3.0-p, -3.0 );
+		tmpNeighbour = tmpNeighbour->next_olsr_neigh_list;
+		p += 0.2;
+		printf("create %d\n",Olsr_neighbour_label_obj[i]);
+	}
 }
 
 /***



From dotslash at berlios.de  Sun Mar 19 20:20:26 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Sun, 19 Mar 2006 20:20:26 +0100
Subject: [S3d-svn] r217 - in trunk: . Documentation Documentation/s3dapi
Message-ID: <200603191920.k2JJKQB3017815@sheep.berlios.de>

Author: dotslash
Date: 2006-03-19 20:20:23 +0100 (Sun, 19 Mar 2006)
New Revision: 217

Added:
   trunk/Documentation/s3dapi/
   trunk/Documentation/s3dapi/bookinfo.docbook
   trunk/Documentation/s3dapi/s3dapi.docbook
Removed:
   trunk/Documentation/s3dlib.txt
Modified:
   trunk/
Log:
 r329 at balthasar:  dotslash | 2006-03-19 20:20:02 +0100
 - Docbook documentation!!!
 - oudated s3dlib.txt becomes obsolete



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:323
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:329

Added: trunk/Documentation/s3dapi/bookinfo.docbook
===================================================================
--- trunk/Documentation/s3dapi/bookinfo.docbook	2006-03-19 13:56:11 UTC (rev 216)
+++ trunk/Documentation/s3dapi/bookinfo.docbook	2006-03-19 19:20:23 UTC (rev 217)
@@ -0,0 +1,26 @@
+<bookinfo>
+<title>The s3d manual</title>
+<authorgroup>
+<author>
+<firstname>Simon</firstname>
+<surname>Wunderlich</surname>
+</author>
+</authorgroup>
+
+<date>03/19/2006</date>
+<releaseinfo>0.1</releaseinfo>
+
+<abstract>
+<para>
+This Manual is the programmers guide to the s3d API.
+</para>
+</abstract>
+
+<keywordset>
+<keyword>s3d</keyword>
+<keyword>API</keyword>
+<keyword>handbook</keyword>
+<keyword>guide</keyword>
+</keywordset>
+
+</bookinfo>

Added: trunk/Documentation/s3dapi/s3dapi.docbook
===================================================================
--- trunk/Documentation/s3dapi/s3dapi.docbook	2006-03-19 13:56:11 UTC (rev 216)
+++ trunk/Documentation/s3dapi/s3dapi.docbook	2006-03-19 19:20:23 UTC (rev 217)
@@ -0,0 +1,1695 @@
+<?xml version="1.0" encoding="UTF-8" ?>
+<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN" [
+  <!ENTITY introduction SYSTEM "bookinfo.docbook">
+]>
+<book id="s3dapi" lang="en">
+ 
+<bookinfo>
+<title>The <application>s3d</application> API manual</title>
+</bookinfo>
+<chapter id="introduction">
+<title>Introduction</title>
+ <para>I'm trying to cover as much as possible, please drop me a line if 
+ there is something missing or not clear enough. please beware: anything may change anytime,
+ as i'm sometimes in the mood of changing deep internal things.
+ </para>
+ <para>
+ Thanks to David Rugge, Mark Glassi and Eric Bischoff for their great <ulink url="http://opensource.bureau-cornavin.com/crash-course/">Docbook Crash Course</ulink>, this Doc wouldn't be here without that :)
+ </para>
+ <para>
+ And of course THANKS to the whole s3d team - Yd, Marek, 2x Andreas, Mog - and all the people who support <application>s3d</application>!!
+ </para>
+</chapter>
+<chapter id="using">
+<title>Using the <application>s3d</application> library</title>
+<sect1 id="setup">
+<title>Setting <application>s3d</application> up</title>
+ <para>
+ Install the lib using the usual usual mechanism:
+ <programlisting>
+ ./configure
+ make
+ make install
+ </programlisting>
+ You might need to have superuser rights in order to do make install. You should now have the server,
+ the library and some applications installed somewhere.
+ </para>
+</sect1>
+<sect1 id="gettingstarted">
+<title>Getting started</title>
+<para>
+ After having <application>s3d</application> installed, you can write your own <application>s3d</application> programs (yeah, that is what this guide is about ;)
+ <programlisting>
+ <![CDATA[#include <s3d.h>]]>
+ </programlisting>
+ should be enough to access the 3d functions. If you want to use keyboard interaction, do
+ <programlisting>
+ <![CDATA[#include <s3d_keysym.h>]]>
+ </programlisting>
+ for the keycode table.
+ Now you can compile your program with 
+ <screen>
+ <prompt>bash$</prompt> <command> gcc <replaceable>program</replaceable>.c -ls3d -o <replaceable>program</replaceable> </command>
+ That wasn't that hard, wasn't it?
+ </screen>
+</para>
+</sect1>
+</chapter>
+
+
+<chapter id="functions">
+<title>function reference</title>
+
+<sect1 id="s3d_init">
+<title>s3d_init</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_init</function></funcdef>
+<paramdef>
+int *<parameter>argc</parameter>.
+char ***<parameter>argv</parameter>
+char *<parameter>name</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+This will initialize the <application>s3d</application>-library and the connection to the Server. It will return 0 on
+success in Server initializion. name specifies the your programs name.
+</para>
+<programlisting>
+int main(char argc, char **argv)
+{
+	if (!<emphasis>s3d_init(<![CDATA[&argc,&argv]]>,"Hello world")</emphasis>) 
+	{
+		...
+		<link linkend="s3d_quit">s3d_quit()</link>;
+	}
+	return(0);
+}
+			   
+</programlisting>
+</sect1>
+
+
+<sect1 id="s3d_quit">
+<title>s3d_quit</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_quit</function></funcdef>
+<paramdef>void </paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+closes the connection and cleares the event-stack. it can also be used to leave
+the <link linkend="s3d_mainloop">s3d_mainloop</link>.
+</para>
+</sect1>
+
+<sect1 id="s3d_usage">
+<title>s3d_usage</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>void <function>s3d_usage</function></funcdef>
+<paramdef>void </paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+Prints the possible parameter for the client library (which can be passed in 
+<link linkend="s3d_init">s3d_init()</link>)
+</para>
+</sect1>
+
+<sect1 id="s3d_mainloop">
+<title>s3d_mainloop</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_mainloop</function></funcdef>
+<paramdef>void (*<parameter>f</parameter>)()</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+takes a function as argument. it will loop this function until a quit-event is
+received. you can pass NULL if you have no function to be looped, but its
+better to sleep some time if you have nothing to do anyway to save cpu-time.
+</para>
+<programlisting>
+void mainloop()
+{
+    usleep(1000); // sleep 1 ms in every cycle
+}
+...
+
+<emphasis>s3d_mainloop</emphasis>(mainloop());
+
+</programlisting>
+</sect1>
+
+
+<sect1 id="s3d_push_vertex">
+<title>s3d_push_vertex</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_push_vertex</function></funcdef>
+<paramdef>int <parameter>object</parameter>, float <parameter>x</parameter>, float <parameter>y</parameter>, float <parameter>z</parameter></paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+pushes a vertex onto the vertex stack. make sure that you count how many
+vertices you've pushed because you'll need that for referencing when you push
+your polygons.
+</para>
+</sect1>
+
+
+<sect1>
+<title>s3d_push_vertices</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_push_vertices</function></funcdef>
+<paramdef>int <parameter>object</parameter>, float *<parameter>vbuf</parameter>, unsigned short <parameter>n</parameter></paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+push some vertices from an array. that's much better for performing than
+using <link linkend="s3d_push_vertex">s3d_push_vertex()</link> if you have a lot of vertices (and that's probably the
+usual case).
+</para>
+<programlisting>
+float vertices[] = { 0.0, 0.0, 0.0,
+                     1.0, 2.0, 3,0,
+                     3.0, 2.0, 1.0};
+<emphasis>s3d_push_vertices</emphasis>(object, vertices, 3); /* pushing 3 vertices */
+</programlisting>
+</sect1>
+
+
+<sect1 id="s3d_push_material">
+<title>s3d_push_material</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_push_material</function></funcdef>
+<paramdef>int <parameter>object</parameter>, 
+float <parameter>amb_r</parameter>,
+float <parameter>amb_g</parameter>,
+float <parameter>amb_b</parameter>,
+float <parameter>spec_r</parameter>,
+float <parameter>spec_g</parameter>,
+float <parameter>spec_b</parameter>,
+float <parameter>diff_r</parameter>,
+float <parameter>diff_g</parameter>,
+float <parameter>diff_b</parameter>,
+
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+pushes a material for an object. you will have to count them yourself too, as
+polygons will ask for the material index number. the material properties are
+given in rgb (red/green/blue) color codes, in float. 0.0 is the minimum,
+1.0 is the maximum a color value can be.
+the specular color is the color which is directly reflected from the light
+source. the diffuse color is the color which can be seen in the bright side
+of the object, and the ambience color is the color of the shadow side of the
+object.
+</para>
+</sect1>
+
+<sect1 id="s3d_push_material_a">
+<title>s3d_push_material_a</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_push_material_a</function></funcdef>
+<paramdef>int <parameter>object</parameter>, 
+float <parameter>amb_r</parameter>,
+float <parameter>amb_g</parameter>,
+float <parameter>amb_b</parameter>,
+float <parameter>amb_a</parameter>,
+float <parameter>spec_r</parameter>,
+float <parameter>spec_g</parameter>,
+float <parameter>spec_b</parameter>,
+float <parameter>spec_a</parameter>,
+float <parameter>diff_r</parameter>,
+float <parameter>diff_g</parameter>,
+float <parameter>diff_b</parameter>,
+float <parameter>diff_a</parameter>
+
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+Same as <link linkend="s3d_push_material">s3d_push_material</link>, but color has <link linkend="alpha">alpha value</link> added.
+Use <link linkend="s3d_push_materials_a">s3d_push_materials_a()</link> if you have a lot of materials to push.
+</para>
+</sect1>
+
+
+<sect1 id="s3d_push_materials_a">
+<title>s3d_push_materials_a</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_push_materials_a</function></funcdef>
+<paramdef>
+int <parameter>object</parameter>, 
+float *<parameter>mbuf</parameter>, 
+unsigned short <parameter>n</parameter>
+
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+Pushes a buffer of Materials. Those Materials are in the format float[n*12], with
+<itemizedlist>
+<listitem><para>mbuf[n*12 + 0-3] - ambience</para></listitem>
+<listitem><para>mbuf[n*12 + 4-7] - specular</para></listitem>
+<listitem><para>mbuf[n *12 + 8-11] - diffusion values </para></listitem>
+</itemizedlist>
+of each entry. n is the number of materials pushed. The values are in the order r,g,b,a.
+If you only want to push one material, use the more easy <link linkend="s3d_push_material_a">s3d_push_material_a()</link>
+function.
+</para>
+<programlisting>
+/* each line has r,g,b,a value */
+float bla[24]=
+	{1,0,0,1,
+	 1,0,0,1,
+	 1,0,0,1,
+	 0,1,1,1,
+	 0,1,1,1,
+	 0,1,1,1};
+
+s3d_push_materials_a(object,mbuf,2); /* push a red and a cyan material */
+</programlisting>
+</sect1>
+
+
+
+<sect1>
+<title>s3d_push_polygon</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_push_polygon</function></funcdef>
+<paramdef>int <parameter>object</parameter>, 
+int <parameter>v1</parameter>,
+int <parameter>v2</parameter>,
+int <parameter>v3</parameter>,
+int <parameter>material</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+push one polygon on the polygonstack of the object. it takes 3 vertex-index-
+numbers and one material material-index-nr. as argument.
+</para>
+<programlisting>
+int oid=<link linkend="s3d_new_object">s3d_new_object</link>();   /* create a new object */
+<link linkend="s3d_push_vertex">s3d_push_vertex</link>(oid,0.0,0.0,0.0);
+<link linkend="s3d_push_vertex">s3d_push_vertex</link>(oid,0.0,1.0,0.0);
+<link linkend="s3d_push_vertex">s3d_push_vertex</link>(oid,1.0,0.0,0.0);
+<link linkend="s3d_push_material">s3d_push_material</link>(oid,0.3,0.0,0.0, 1.0,1.0,1.0, 1.0,0.0,0.0);
+<emphasis>s3d_push_polygon</emphasis>(oid,0,1,2,0);
+/* this will create a red polygon */
+</programlisting>
+</sect1>
+
+
+<sect1>
+<title>s3d_push_polygons</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_push_polygons</function></funcdef>
+<paramdef>int <parameter>object</parameter>, 
+unsigned long <parameter>*pbuf</parameter>,
+unsigned short <parameter>n</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+as for vertices, you can push arrays of polygons to have greater performance.
+the pbuf should contain n polygons which consist of 4 unsigned long values
+of 3 vertices indeces and 1 material index.
+</para>
+<programlisting>
+unsigned long pbuf[] = { 0,1,2,0};
+int oid=<link linkend="s3d_new_object">s3d_new_object</link>();   /* create a new object */
+<link linkend="s3d_push_vertex">s3d_push_vertex</link>(oid,0.0,0.0,0.0);
+<link linkend="s3d_push_vertex">s3d_push_vertex</link>(oid,0.0,1.0,0.0);
+<link linkend="s3d_push_vertex">s3d_push_vertex</link>(oid,1.0,0.0,0.0);
+<link linkend="s3d_push_material">s3d_push_material</link>(oid,0.3,0.0,0.0, 1.0,1.0,1.0, 1.0,0.0,0.0);
+<emphasis>s3d_push_polygons</emphasis>(oid,pbuf,1);
+/* push one polygon with the pbuf data */
+</programlisting>
+</sect1>
+
+
+<sect1 id="s3d_push_line">
+<title>s3d_push_line</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_push_line</function></funcdef>
+<paramdef>int <parameter>object</parameter>, 
+int <parameter>v1</parameter>,
+int <parameter>v2</parameter>,
+int <parameter>material</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+Push one line on the linestack of the object. It takes 2 vertex-index-
+numbers and one material material-index-nr. as argument. If you have
+a lot of lines to push, use <link linkend="s3d_push_lines">s3d_push_lines()</link>
+</para>
+</sect1>
+
+<sect1 id="s3d_push_lines">
+<title>s3d_push_lines</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_push_line</function></funcdef>
+<paramdef>int <parameter>object</parameter>, 
+unsigned  long *<parameter>*lbuf</parameter>,
+unsigned short <parameter>n</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+Pushing n lines on the linestack of the object, each lbuf has a size of n*3,
+each entry has the index number of the first vertex, second vertex and material number just
+as in <link linkend="s3d_push_line">s3d_push_line()</link>.
+</para>
+</sect1>
+
+<sect1 id="s3d_push_texture">
+<title>s3d_push_texture</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_push_line</function></funcdef>
+<paramdef>int <parameter>object</parameter>, 
+int <parameter>w</parameter>,
+int <parameter>h</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+Adds a new texture with height w and height h on the texturestack.
+</para>
+</sect1>
+
+
+<sect1>
+<title>s3d_pop_vertex</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_pop_vertex</function></funcdef>
+<paramdef>int <parameter>object</parameter>, 
+unsigned short <parameter>n</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+Deletes the latest n vertices from the vertex stack of the object.
+</para>
+</sect1>
+
+
+<sect1>
+<title>s3d_pop_polygon</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_pop_polygon</function></funcdef>
+<paramdef>int <parameter>object</parameter>, 
+unsigned short <parameter>n</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+Deletes the latest n polygon from the polygon stack of the object.
+</para>
+</sect1>
+
+
+
+<sect1>
+<title>s3d_pop_material</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_pop_material</function></funcdef>
+<paramdef>int <parameter>object</parameter>, 
+unsigned short <parameter>n</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+Deletes the latest n material from the material stack of the object.
+</para>
+</sect1>
+
+
+<sect1>
+<title>s3d_pop_texture</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_pop_texture</function></funcdef>
+<paramdef>int <parameter>object</parameter>, 
+unsigned short <parameter>n</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+Deletes the latest n textures from the texture stack of the object.
+</para>
+</sect1>
+
+
+<sect1>
+<title>s3d_pop_line</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_pop_line</function></funcdef>
+<paramdef>int <parameter>object</parameter>, 
+unsigned short <parameter>n</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+Deletes the latest n lines from the line stack of the object.
+</para>
+</sect1>
+
+<sect1 id="s3d_pep_polygon_normals">
+<title>s3d_pep_polygon_normals</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_pep_polygon_normals</function></funcdef>
+<paramdef>
+int <parameter>object</parameter>, 
+float *<parameter>nbuf</parameter>,
+unsigned short <parameter>n</parameter>,
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+Adds normal information to polygons, giving each vertex of a polygon a normal information. With this, you can
+archive smoothed edge effects. nbuf holds n*9 float values, 3 (x,y,z) vector values for each vertex of the Polygon.
+Don't worry if you don't use this, it's kind of hard to calculate and the server will use some always use some
+proper normal values (same for every vertex, calculated by the plane which is defined by the 3 points of the polygon.
+</para>
+</sect1>
+
+<sect1 id="s3d_pep_tex_coord">
+<title>s3d_pep_tex_coord</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_pep_tex_coord</function></funcdef>
+<paramdef>
+int <parameter>object</parameter>, 
+float <parameter>x1</parameter>, 
+float <parameter>y1</parameter>, 
+float <parameter>x2</parameter>, 
+float <parameter>y2</parameter>, 
+float <parameter>x3</parameter>, 
+float <parameter>y3</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+Pimp the last polygon pushed with some textures coordinates, x and y values for each vertex point respectively.
+Those values may be between 0 and 1 and are vertex points on the <link linkend="s3d_pep_material_texture">
+texture defined in the material</link> of the polygon. If you have more polygons which should get a texture, use
+<link linkend="s3d_pep_tex_coords">s3d_pep_tex_coords()</link>
+</para>
+</sect1>
+
+<sect1 id="s3d_pep_tex_coords">
+<title>s3d_pep_tex_coords</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_pep_tex_coords</function></funcdef>
+<paramdef>
+int <parameter>object</parameter>, 
+float *<parameter>tbuf</parameter>, 
+int <parameter>n</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+Pimp the latest n polygons with texture coordinates. tbuf has 6*n float values for its entries, which are supplied in the order
+as in <link linkend="s3d_pep_tex_coord">s3d_pep_polygon_tex_coord()</link>
+</para>
+</sect1>
+
+<sect1 id="s3d_pep_material_texture">
+<title>s3d_pep_material_texture</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_pep_material_texture</function></funcdef>
+<paramdef>
+int <parameter>object</parameter>, 
+unsigned long <parameter>tex</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+Assign the latest material a texture referenced by the index tex. Of course, you will
+have pushed this texture with <link linkend="s3d_push_texture">s3d_push_texture</link>
+</para>
+</sect1>
+
+
+<sect1 id="s3d_pep_vertex">
+<title>s3d_pep_vertex</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_pep_vertex</function></funcdef>
+<paramdef>
+int <parameter>object</parameter>, 
+float <parameter>x</parameter>,
+float <parameter>y</parameter>,
+float <parameter>z</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+Alter the latest pushed vertex, overwriting with the supplied values.
+</para>
+</sect1>
+
+<sect1 id="s3d_pep_vertices">
+<title>s3d_pep_vertices</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_pep_vertices</function></funcdef>
+<paramdef>
+int <parameter>object</parameter>, 
+float *<parameter>vbuf</parameter>,
+unsigned short <parameter>n</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+Alter the latest n pushed vertex. vbuf holds the values which
+are used to overwrite the old data, n entries with each 3 floats
+specifying x,y,z of the vertices.
+</para>
+</sect1>
+
+<sect1 id="s3d_pep_line">
+<title>s3d_pep_line</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_pep_line</function></funcdef>
+<paramdef>
+int <parameter>object</parameter>, 
+unsigned long <parameter>v1</parameter>,
+unsigned long <parameter>v2</parameter>,
+unsigned long <parameter>material</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+Alter the latest pushed line, overwriting with the supplied values.
+</para>
+</sect1>
+
+<sect1 id="s3d_pep_lines">
+<title>s3d_pep_lines</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_pep_lines</function></funcdef>
+<paramdef>
+int <parameter>object</parameter>, 
+unsigned long *<parameter>lbuf</parameter>,
+unsigned short <parameter>n</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+Alter the latest n pushed lines. lbuf holds the values which
+are used to overwrite the old data, n entries with each 3 unsigned longs
+specifying first, second vertex and material of each line.
+</para>
+</sect1>
+
+
+
+<sect1 id="s3d_pep_material">
+<title>s3d_pep_material</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_pep_material</function></funcdef>
+<paramdef>
+int <parameter>object</parameter>, 
+float <parameter>amb_r</parameter>,
+float <parameter>amb_g</parameter>,
+float <parameter>amb_b</parameter>,
+float <parameter>spec_r</parameter>,
+float <parameter>spec_g</parameter>,
+float <parameter>spec_b</parameter>,
+float <parameter>diff_r</parameter>,
+float <parameter>diff_g</parameter>,
+float <parameter>diff_b</parameter>,
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+Overwriting the latest pushed Material, overwriting the current value with the specified one.
+See <link linkend="s3d_pep_materials_a">s3d_pep_materials_a</link> if you want to pep more materials.
+</para>
+</sect1>
+
+
+
+<sect1 id="s3d_pep_material_a">
+<title>s3d_pep_material_a</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_pep_material_a</function></funcdef>
+<paramdef>
+int <parameter>object</parameter>, 
+float <parameter>amb_r</parameter>,
+float <parameter>amb_g</parameter>,
+float <parameter>amb_b</parameter>,
+float <parameter>amb_a</parameter>,
+float <parameter>spec_r</parameter>,
+float <parameter>spec_g</parameter>,
+float <parameter>spec_b</parameter>,
+float <parameter>spec_a</parameter>,
+float <parameter>diff_r</parameter>,
+float <parameter>diff_g</parameter>,
+float <parameter>diff_b</parameter>,
+float <parameter>diff_a</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+Overwriting the latest pushed Material, overwriting the current value with the specified one, with 
+<link linkend="alpha">alpha value</link> in contrast to <link linkend="s3d_pep_material">s3d_pep_material</link>
+See <link linkend="s3d_pep_materials_a">s3d_push_materials_a</link> if you want to pep more materials.
+</para>
+</sect1>
+
+<sect1 id="s3d_pep_materials_a">
+<title>s3d_pep_materials_a</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_pep_materials_a</function></funcdef>
+<paramdef>
+int <parameter>object</parameter>, 
+float *<parameter>mbuf</parameter>, 
+unsigned short <parameter>n</parameter>
+
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+Alters the last n pushed Materials. See <link linkend="s3d_push_materials_a">s3d_push_materials_a()</link> for
+more information how mbuf should look like. Use <link linkend="s3d_pep_material_a">s3d_pep_material_a()</link>
+if you only want to alter the latest material.
+</para>
+</sect1>
+
+<sect1 id="s3d_load_materials_a">
+<title>s3d_load_materials_a</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_load_materials_a</function></funcdef>
+<paramdef>
+int <parameter>object</parameter>, 
+float *<parameter>mbuf</parameter>, 
+unsigned longs <parameter>start</parameter>,
+unsigned short <parameter>n</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+Loads n materials starting from index position start into the Material stack.
+See <link linkend="s3d_push_materials_a">s3d_push_materials_a</link> for more informatino about the values in mbuf.
+</para>
+</sect1>
+
+
+
+<sect1 id="s3d_load_polygon_normals">
+<title>s3d_load_polygon_normals</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_load_polygon_normals</function></funcdef>
+<paramdef>
+int <parameter>object</parameter>, 
+float *<parameter>nbuf</parameter>,
+int <parameter>start</parameter>,
+unsigned short <parameter>n</parameter>,
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+Just as <link linkend="s3d_pep_polygon_normals">s3d_pep_polygon_normals()</link>, with the difference you won't alter 
+the latest n polygons but n polygons starting with index start.
+</para>
+</sect1>
+
+
+<sect1 id="s3d_load_tex_coords">
+<title>s3d_load_tex_coords</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_load_tex_coords</function></funcdef>
+<paramdef>
+int <parameter>object</parameter>, 
+float *<parameter>tbuf</parameter>, 
+int <parameter>start</parameter>,
+int <parameter>n</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+Just as <link linkend="s3d_pep_tex_coords">s3d_load_tex_coords()</link>, with the difference you won't alter 
+the latest n polygons but n polygons starting with index start.
+</para>
+</sect1>
+
+<sect1 id="s3d_load_texture">
+<title>s3d_load_texture</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_load_texture</function></funcdef>
+<paramdef>
+int <parameter>object</parameter>, 
+unsigned long <parameter>tex</parameter>,
+unsigned short <parameter>xpos</parameter>,
+unsigned short <parameter>ypos</parameter>,
+unsigned short <parameter>w</parameter>,
+unsigned short <parameter>h</parameter>,
+unsgined char *<parameter>data</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+This will load an 32bit rgba image supplied in data at position xpos,ypos of the texture tex. The image has
+the width w and height h. This can be used to update only parts of the texture. It's no problem to supply big textures,
+as the image will be sent to server in fragments. Of course, you will have created the texture with 
+<link linkend="s3d_push_texture">s3d_push_texture</link>, have an material assigned to the texture with <link linkend="s3d_pep_material_texture">
+s3d_pep_material_texture()</link> and have your polygons set sane polygon texture coords 
+using <link linkend="s3d_pep_tex_coord">s3d_pep_tex_coord()</link>.
+</para>
+</sect1>
+
+
+<sect1 id="s3d_new_object">
+<title>s3d_new_object</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_new_object</function></funcdef>
+<paramdef>
+void
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+Creates a new object, returning the object id.
+<warning><para>Of course, you won't forget to <link linkend="s3d_flags_on">toggle</link> it <link linkend="S3D_OF_VISIBLE">visible</link>, won't you?</para></warning>
+</para>
+</sect1>
+
+
+<sect1>
+<title>s3d_del_object</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_del_object</function></funcdef>
+<paramdef>
+int <parameter>oid</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+Deletes the object referenced by oid.
+</para>
+</sect1>
+
+
+<sect1 id="s3d_clone_object">
+<title>s3d_clone_object</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_clone_object</function></funcdef>
+<paramdef>
+int <parameter>oid</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+Clones an already exisiting object. They get just look the same as the
+parent-object and will change when the parent-object changes.
+Cloning especially makes sense if you want to use the same object a lot of
+times. Move and transform is independent from the parent.
+The function returns the childs object id.
+</para>
+</sect1>
+
+
+<sect1>
+<title>s3d_clone_object_target</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_clone_object_target</function></funcdef>
+<paramdef>
+int <parameter>oid</parameter>,
+int <parameter>toid</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+Changes the clone target of oid to another object (toid). This assumes you've got
+oid from <link linkend="s3d_clone_object">s3d_clone_object</link> before.
+</para>
+</sect1>
+
+
+<sect1>
+<title>s3d_link</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_link</function></funcdef>
+<paramdef>
+int <parameter>oid_from</parameter>,
+int <parameter>oid_to</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+A linked object will move along with it's link parent. For example if you have
+a book on a table, you can link the book to the table so the book will 
+"keep on the table" if you move the table around in space.
+It will also rotate with the table etc.
+</para>
+</sect1>
+
+
+<sect1>
+<title>s3d_unlink</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_unlink</function></funcdef>
+<paramdef>
+int <parameter>oid</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+Remove the link of object oid to its target.
+</para>
+</sect1>
+
+
+<sect1>
+<title>s3d_import_3ds</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_import_3ds</function></funcdef>
+<paramdef>
+char *<parameter>buf</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+Imports a 3ds-file from memory (assuming that you have already loaded the 3ds-file and it's located at *buf).
+</para>
+<warning><para>Of course, you won't forget to <link linkend="s3d_flags_on">toggle</link> it <link linkend="S3D_OF_VISIBLE">visible</link>, won't you?</para></warning>
+</sect1>
+
+
+<sect1>
+<title>s3d_import_3ds_file</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_import_3ds_file</function></funcdef>
+<paramdef>
+char *<parameter>fname</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+Opens the 3ds file referenced by 3ds. The function will also look in your object directories (maybe /usr/share/s3d, depending
+on your installation), so you can also use relative paths.
+</para>
+<warning><para>Of course, you won't forget to <link linkend="s3d_flags_on">toggle</link> it <link linkend="S3D_OF_VISIBLE">visible</link>, won't you?</para></warning>
+</sect1>
+
+
+<sect1 id="s3d_select_font">
+<title>s3d_select_font</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_select_font</function></funcdef>
+<paramdef>
+char *<parameter>mask</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+This selects a font for the <link linkend="s3d_draw_string">s3d_draw_string()</link> function.
+</para>
+<warning><para>Of course, you won't forget to <link linkend="s3d_flags_on">toggle</link> it <link linkend="S3D_OF_VISIBLE">visible</link>, won't you?</para></warning>
+<programlisting>
+    s3d_select_font("vera"); /* will use the vera font face */
+</programlisting>
+</sect1>
+
+
+<sect1 id="s3d_draw_string">
+<title>s3d_draw_string</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_draw_string</function></funcdef>
+<paramdef>
+char *<parameter>str</parameter>,
+float *<parameter>len</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+Renders the string str with in Truetype format with the height 1, returns
+the length of the rendered string in *len (or set len=NULL to disable this).
+
+</para>
+<programlisting>
+	char str="hello world!";
+	float len;
+	<link linkend="s3d_select_font">s3d_select_font</link>("vera");
+	<emphasis>s3d_draw_string</emphasis>(str,len);
+
+	/* not interested in the length? do that:
+	 * <emphasis>s3d_draw_string</emphasis>(str,NULL); */
+</programlisting>
+</sect1>
+
+<sect1>
+<title>s3d_open_file</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_open_file</function></funcdef>
+<paramdef>
+char *<parameter>fname</parameter>,
+char **<parameter>pointer</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+This opens the file fname, setting *pointer to it's memory position. the
+function will return the size of buffer. you can free() the pointer when
+you're finished.
+</para>
+</sect1>
+
+
+
+<sect1 id="s3d_flags_on">
+<title>s3d_flags_on</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_flags_on</function></funcdef>
+<paramdef>
+int <parameter>object</parameter>,
+unsigned long <parameter>flags</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+turn some flags on for object.
+</para>
+<warning><para>if you don't toggle OF_VISIBLE on, you won't see your object. usually you want this. 
+(at least after you *push()d all your content)</para></warning>
+</sect1>
+
+<sect1 id="s3d_flags_off">
+<title>s3d_flags_off</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_flags_off</function></funcdef>
+<paramdef>
+int <parameter>object</parameter>,
+unsigned long <parameter>flags</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+turn some flags off for object.
+</para>
+</sect1>
+
+
+<sect1>
+<title>s3d_translate</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_translate</function></funcdef>
+<paramdef>
+int <parameter>object</parameter>,
+float <parameter>x</parameter>,
+float <parameter>y</parameter>,
+float <parameter>z</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+Move the object to some position in space. when you create an object, it's 
+always located at 0.0 , 0.0, 0.0.
+</para>
+<important><para>Translation is absolute, not relative!</para></important>
+<programlisting>
+<emphasis>s3d_translate</emphasis>(object,2,0,0);
+<emphasis>s3d_translate</emphasis>(object,4,0,0);
+/* object will end up at 4,0,0 and not 6,0,0!! */
+</programlisting>
+</sect1>
+
+
+<sect1>
+<title>s3d_rotate</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_rotate</function></funcdef>
+<paramdef>
+int <parameter>object</parameter>,
+float <parameter>x</parameter>,
+float <parameter>y</parameter>,
+float <parameter>z</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+rotate an object around the x, y and z-axis respectively. x,y,z may have values
+between [0,360] degrees. 
+</para>
+<para>
+You will usually only rotate around one axis, leaving the unused fields on 0, I guess. 
+If you want to rotate around more than one axis, please note: The order of the rotation
+applies is y-axis, x-axis, and then z-axis. You can think of it as the earth position coordinates:
+x is the longitude, y is the latitude, and z is the rotation at this point of the earth around your
+bodies axis. (I wonder if that makes it any clearer ;)
+</para>
+<important><para>Rotate is absolute, not relative!</para></important>
+<programlisting>
+<emphasis>s3d_rotate</emphasis>(object,90,0,0);
+<emphasis>s3d_rotate</emphasis>(object,180,0,0);
+/* object will be rotated 180 degrees around the x-axis, not 270 degress! */
+</programlisting>
+</sect1>
+
+
+<sect1>
+<title>s3d_scale</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_scale</function></funcdef>
+<paramdef>
+int <parameter>object</parameter>,
+float <parameter>s</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+Scales the object. about factor s. s=1 will be the original size, -1 will mirror it.
+</para>
+<important><para>s=0 is forbidden and will be ignored! s3d_scale is also absolute, not relative!</para></important>
+</sect1>
+
+<sect1>
+<title>s3d_push_event</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_push_event</function></funcdef>
+<paramdef>
+struct s3d_evt <parameter>*newevt</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+Pushes an <link linkend="s3d_evt">event</link> onto the event-stack. Usually you don't need to do this manually.
+</para>
+</sect1>
+
+<sect1>
+<title>s3d_pop_event</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>struct s3d_evt *<function>s3d_pop_event</function></funcdef>
+<paramdef>void
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+Pops the latest event from the stack. Don't forget to free() both the event
+and its buffer! Returns a pointer to <link linkend="s3d_evt">struct s3d_evt</link>.
+</para>
+</sect1>
+
+<sect1 id="s3d_find_event">
+<title>s3d_find_event</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>struct s3d_evt *<function>s3d_find_event</function></funcdef>
+<paramdef>
+unsigned char <parameter>event</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+Finds the latest occurence of an event, giving the event type as argument.
+Returns a pointer to <link linkend="s3d_evt">struct s3d_evt</link>.
+</para>
+</sect1>
+
+<sect1>
+<title>s3d_delete_event</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_delete_event</function></funcdef>
+<paramdef>
+struct s3d_evt *<parameter>devt</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+deletes an event, the argument is the pointer to the <link linkend="s3d_evt">event</link> which is to be 
+deleted (maybe obtained from <link linkend="s3d_find_event">s3d_find_event</link>).
+</para>
+</sect1>
+
+<sect1 id="s3d_set_callback">
+<title>s3d_set_callback</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_set_callback</function></funcdef>
+<paramdef>
+unsigned char <parameter>event</parameter>
+s3d_cb <parameter>func</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+sets a <link linkend="s3d_cb">callback</link> for a certain event. this is very useful for event-oriented 
+applications. event callbacks will not interrupt each other or the mainloop.
+</para>
+<important><para>Defining callbacks will only work after calling <link linkend="s3d_init">s3d_init()</link></para></important>
+<programlisting>
+void obj_click(<link linkend="s3d_evt">struct s3d_evt</link> event)
+{
+	printf("object id %d got clicked", *((unsigned long *)event->buf));
+}
+...
+	<link linkend="s3d_set_callback">s3d_set_callback</link>(<link linkend="S3D_EVENT_NEW_OBJECT">S3D_EVENT_NEW_OBJECT</link>, obj_click);
+
+/* this will tell you when a object got clicked */
+</programlisting>
+</sect1>
+
+
+<sect1>
+<title>s3d_clear_callback</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>void <function>s3d_clear_callback</function></funcdef>
+<paramdef>
+unsigned char <parameter>event</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+Clears the callback which is associated with the event.
+</para>
+</sect1>
+
+
+<sect1>
+<title>s3d_get_callback</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>s3d_cb <function>s3d_get_callback</function></funcdef>
+<paramdef>
+unsigned char <parameter>event</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+Returns the <link linkend="s3d_cb">Callback-function</link> of the event.
+</para>
+<programlisting>
+	<link linkend="s3d_evt">struct s3d_evt</link> e;
+	...
+	<emphasis>s3d_get_callback</emphasis>(<link linkend="S3D_EVENT_KEY">S3D_EVENT_KEY</link>)(e);
+	/* will call the key-handling function with argument e.  */
+
+</programlisting>
+</sect1>
+
+
+<sect1>
+<title>s3d_process_stack</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>void <function>s3d_process_callback</function></funcdef>
+<paramdef>void
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+This function goes through all function of the event-stack and will call 
+functions. this is useful when you define a new function but still have a lot 
+of events of this type on the stack. 
+</para>
+<note><para>This is probably obsolete</para></note>
+</sect1>
+
+<sect1>
+<title>s3d_vector_length</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>float <function>s3d_vector_length</function></funcdef>
+<paramdef>
+float <parameter>vector</parameter>[]
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+Calculates and returns the length of the given vector (which should be of the type float[3]).
+More info <ulink url="http://en.wikipedia.org/wiki/Vector_%28spatial%29#Length_of_a_vector">on wikipedia</ulink>.
+</para>
+</sect1>
+
+<sect1>
+<title>s3d_vector_substract</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>void <function>s3d_vector_substract</function></funcdef>
+<paramdef>
+float <parameter>vector1</parameter>[],
+float <parameter>vector2</parameter>[],
+float <parameter>result_vector</parameter>[]
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+Substracts vector1 from vector2, writing result into result_vector.
+All vectors should have the format  float[3].
+More info <ulink url="http://en.wikipedia.org/wiki/Vector_%28spatial%29#Vector_addition_and_subtraction">on wikipedia</ulink>.
+</para>
+</sect1>
+
+<sect1>
+<title>s3d_vector_dot_product</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>float <function>s3d_vector_dot_product</function></funcdef>
+<paramdef>
+float <parameter>vector1</parameter>[],
+float <parameter>vector2</parameter>[]
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+Calculates and returns the dot product of vector1 and vector2.
+All vectors should have the format  float[3].
+More info <ulink url="http://en.wikipedia.org/wiki/Vector_%28spatial%29#Dot_product">on wikipedia</ulink>.
+</para>
+</sect1>
+
+<sect1>
+<title>s3d_vector_angle</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>float <function>s3d_vector_angle</function></funcdef>
+<paramdef>
+float <parameter>vector1</parameter>[],
+float <parameter>vector2</parameter>[]
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+Calculates and returns the angle between vector1 and vector2. Please note that the resulting angle is between 0 and PI, therefore not covering the whole period! To convert in degrees just do result*180/M_PI.
+All vectors should have the format  float[3].
+More info <ulink url="http://en.wikipedia.org/wiki/Vector_%28spatial%29#Dot_product">on wikipedia</ulink>.
+</para>
+</sect1>
+
+
+<sect1>
+<title>s3d_mcp_focus</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_mcp_focus</function></funcdef>
+<paramdef>
+int <parameter>object</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+This is an mcp-only function. It gives focus (for receiving key-strokes etc.)
+to an app referenced by it's mcp-object-id. 
+</para>
+</sect1>
+
+
+</chapter>
+
+
+<chapter id="data_types">
+<title>Data types</title>
+
+<sect1 id="s3d_obj_info">
+<title>struct s3d_but_info</title>
+<programlisting>
+struct s3d_obj_info 
+{
+	unsigned long object;
+	unsigned long flags;
+	float trans_x,trans_y,trans_z;
+	float rot_x,rot_y,rot_z;
+	float scale;
+	float r;
+	char name[256]; 
+};
+</programlisting>
+<para>
+Can be used on the buffer of an <link linkend="s3d_evt">event</link> of type <link linkend="S3D_EVENT_OBJ_INFO">S3D_EVENT_OBJ_INFO</link>.
+name will usually contain nothing for usual objects, but mcp objects will contain the applications names here. r is the radius of the convex sphere
+an object, which will also be interesting for the mcp.
+</para>
+<para>
+Special objects like camera, pointer will have the "sys_" prefix in the name and will be named "pointer0", "pointer1" ... or "cam0", "cam1" ...
+For cam object, scale will contain the aspect ratio.
+</para>
+</sect1>
+
+
+
+<sect1 id="s3d_but_info">
+<title>struct s3d_but_info</title>
+<programlisting>
+struct s3d_but_info     
+{                       
+    unsigned char button, state;
+};                      
+</programlisting>
+<para>
+Can be used on the buffer of an <link linkend="s3d_evt">event</link> of type <link linkend="S3D_EVENT_MBUTTON">S3D_EVENT_MBUTTON</link>.
+</para>
+</sect1>
+
+
+<sect1 id="mcp_object">
+<title>struct mcp_object</title>
+<programlisting>
+struct mcp_object 
+{
+	unsigned long object;
+	float trans_x,trans_y,trans_z;
+	float r;
+	char name[256]; 
+};
+
+</programlisting>
+<para>
+obsolete, deprecated, don't use, to be removed soon (use <link linkend="s3d_but_info">struct s3d_but_info</link>). ;)
+</para>
+</sect1>
+
+<sect1 id="s3d_evt">
+<title>struct s3d_evt</title>
+<programlisting>
+struct s3d_evt {
+	unsigned char event;
+	int length;
+	char *buf;
+	struct s3d_evt *next;
+};
+</programlisting>
+<para>
+
+This is the event information holder. 
+<variablelist>
+<varlistentry>
+<term>event</term>
+<listitem><para>gives the <link linkend="s3d_events">event type</link></para></listitem>
+</varlistentry>
+<varlistentry>
+<term>length</term>
+<listitem><para>gives the length of the buffer *buf</para></listitem>
+</varlistentry>
+<varlistentry>
+<term>*buf</term>
+<listitem><para>is the pointer to the multiple purpose buffer, which will have more specific information about the object</para></listitem>
+</varlistentry>
+<varlistentry>
+<term>*next</term>
+<listitem><para>can be safely ignored ;)</para></listitem>
+</varlistentry>
+</variablelist>
+
+Depending on the event, buf can contain the keycode pressed on keyboard event, the <link linkend="s3d_but_info">mouse button state</link> on a mouse event, <link linkend="s3d_obj_info">object information</link> etc.
+</para>
+</sect1>
+
+<sect1 id="s3d_cb">
+<title>typedef s3d_cb</title>
+<programlisting>
+typedef void (*<emphasis>s3d_cb</emphasis>)(<link linkend="s3d_evt">struct s3d_evt</link> *);
+</programlisting>
+<para>
+This defines the callback format. Each callback should return void and take an argument of <link linkend="s3d_evt">struct s3d_evt *</link>.
+Callbacks can be defined with <link linkend="s3d_set_callback">s3d_set_callback()</link>.
+</para>
+<programlisting>
+/* a callback handler could look like this: */
+void my_key_handler(struct s3d_evt *event_data)
+{
+	...
+}
+</programlisting>
+</sect1>
+</chapter>
+
+
+
+
+<chapter id="definitions">
+<title>Definitions</title>
+
+
+
+
+<sect1 id="s3d_events">
+<title>S3D events</title>
+<para>
+This defines the callback format. Each callback should return void and take an argument of <link linkend="s3d_evt">struct s3d_evt *</link>.
+Callbacks can be defined with <link linkend="s3d_set_callback">s3d_set_callback()</link>.
+<variablelist>
+
+<varlistentry>
+<term><anchor id="S3D_EVENT_OBJ_CLICK"/>S3D_EVENT_OBJ_CLICK</term>
+<listitem><para>
+An object got clicked (when you set the flag <link linkend="S3D_OF_SELECTABLE">S3D_OF_SELECTABLE</link>), buf will contain the object id
+of the object which got clicked (unsigned long, 4 byte)
+</para></listitem>
+</varlistentry>
+
+<varlistentry>
+<term><anchor id="S3D_EVENT_KEY"/>S3D_EVENT_KEY</term>
+<listitem><para>
+A key was pressed, buf will contain a keycode. use  <![CDATA[#include <s3d_keysym.h>]]> to have the keycodes available. buf is a 2 byte unsigned short keycode.
+</para></listitem>
+</varlistentry>
+
+
+<varlistentry>
+<term><anchor id="S3D_EVENT_MBUTTON"/>S3D_EVENT_MBUTTON</term>
+<listitem><para>
+A mouse button was clicked. Use <link linkend="s3d_but_info">struct s3d_but_info</link> on buf to get more info.
+</para></listitem>
+</varlistentry>
+
+<varlistentry>
+<term><anchor id="S3D_EVENT_NEW_OBJECT"/>S3D_EVENT_NEW_OBJECT</term>
+<listitem><para>
+deprecated, will use <link linkend="S3D_EVENT_OBJ_INFO">S3D_EVENT_OBJ_INFO</link>
+</para></listitem>
+</varlistentry>
+
+
+<varlistentry>
+<term><anchor id="S3D_EVENT_OBJ_INFO"/>S3D_EVENT_OBJ_INFO</term>
+<listitem><para>
+Something happened to an object. This can happen if the camera was moved, the mouse (pointer) was moved or an application appeared/changed in the mcp
+
+</para></listitem>
+</varlistentry>
+
+<varlistentry>
+<term><anchor id="S3D_MCP_OBJECT"/>S3D_MCP_OBJECT</term>
+<listitem><para>
+As the name suggests, those will only happen to the MCP. 
+This tells it about new/changed application object. <link linkend="mcp_object">struct mcp_object</link>
+can be used on buf. To be removed in the future.
+</para></listitem>
+</varlistentry>
+
+<varlistentry>
+<term><anchor id="S3D_MCP_DEL_OBJECT"/>S3D_MCP_DEL_OBJECT</term>
+<listitem><para>
+As the name suggests, those will only happen to the MCP. 
+This tells it about deleted application object. <link linkend="mcp_object">struct mcp_object</link>
+can be used on buf. To be removed in the future.
+</para></listitem>
+</varlistentry>
+
+
+<varlistentry>
+<term><anchor id="S3D_EVENT_QUIT"/>S3D_EVENT_QUIT</term>
+<listitem><para>
+Server sent the quit signal, or the connection was terminated. Usually, this is only processed internally.
+</para></listitem>
+</varlistentry>
+
+
+
+</variablelist>
+</para>
+<programlisting>
+/* a callback handler could look like this: */
+void my_key_handler(struct s3d_evt *event_data)
+{
+	...
+}
+</programlisting>
+</sect1>
+
+
+<sect1 id="s3d_object_flags">
+<title>S3D Object Flags</title>
+<para>
+Objects can have several flags to change their behaviour in the server and can be set with 
+<link linkend="s3d_flags_on">s3d_flags_on()</link> and
+<link linkend="s3d_flags_off">s3d_flags_off()</link>
+<variablelist>
+<varlistentry>
+<term><anchor id="S3D_OF_VISIBLE"/>S3D_OF_VISIBLE</term>
+<listitem><para>default:off</para><para>
+Obviously, if this flag is toggled the user can see it, if not it will be hidden. ;)
+</para><para>
+When an object is created it's turned off, so you will be able push your geometry data and
+turn it on after you're done. That avaoids flickering and stuff.
+</para></listitem>
+</varlistentry>
+
+<varlistentry>
+<term><anchor id="S3D_OF_SELECTABLE"/>S3D_OF_SELECTABLE</term>
+<listitem><para>default:off</para><para>
+When this is toggled on, you will receive <link linkend="S3D_EVENT_OBJ_CLICK">click events</link>.
+Don't use it if you don't need it, it will eat performance.
+</para></listitem>
+</varlistentry>
+
+<varlistentry>
+<term><anchor id="S3D_OF_POINTABLE"/>S3D_OF_POINTABLE</term>
+<listitem><para>default:off</para><para>
+Placeholder for pointer (onmouseover-event enabler) events. Not implemented yet.
+</para></listitem>
+</varlistentry>
+
+</variablelist>
+</para>
+</sect1>
+
+</chapter>
+
+<chapter id="Notes">
+<title>Additional Notes</title>
+<sect1 id="alpha">
+<title>About alpha transparency</title>
+<para>
+Alpha transparency works, but polygons don't get ordered in view direction on the server yet. So please don't
+use this feature yet. If you have an easy idea how to do that with opengl please drop me a line.
+</para>
+</sect1>
+</chapter>
+
+
+
+
+<chapter id="About">
+<title>About</title>
+<para>
+Copyright ? 2006 Simon Wunderlich <email>dotslash at packetmixer.de</email>
+</para>
+<para>
+All Rights reserved. That is, because I currently don't know how to license this. You may distribute or copy it as long this 
+Documentation is unmodified and complete (I'd love to receive patches and corrections though). Don't hesitate to ask
+if you want to use this doc in any way or have some license recommendation.
+</para>
+</chapter>
+
+</book>
+

Deleted: trunk/Documentation/s3dlib.txt
===================================================================
--- trunk/Documentation/s3dlib.txt	2006-03-19 13:56:11 UTC (rev 216)
+++ trunk/Documentation/s3dlib.txt	2006-03-19 19:20:23 UTC (rev 217)
@@ -1,409 +0,0 @@
-  ___________________________________________________________________________
- /                                                                           \
-|       libs3d documentation                                                  |
- \___________________________________________________________________________/
-
-14.03.06: PLEASE NOTE
-
-- This Document is slightly outdated, I would like to create a HTML/man page for this
-  -> see OPEN_PROBLEMS
-
-this is just a plain raw text documentatio of the libs3d api. maybe i'll do 
-some docbook version later :) please beware: anything may change anytime,
-as i'm sometimes in the mood of changing deep internal things. 
-if you miss something, just drop me a line <dotslash at packetmixer.de> :)
-
-------- instructions ----------------------------------------------------------
-
-instructions:
-include the s3d-header with
-
-#include <s3d.h>
-
-make sure that the s3d.h file is in your include path. you can either use
-dynamic linking with the libs3d.so (/dll?!) or statically with the libs3d.a
-file.
-------- data types ------------------------------------------------------------
-
-struct mcp_object 
-{
-	unsigned long object;
-	float trans_x,trans_y,trans_z;
-//	char event;
-#define MCP_NEW_OBJECT	1
-	char name[256]; 
-}
-
-this is the structure of an event->buf of a S3D_MCP_OBJECT type. it gives 
-infromation about the virtual object which is in fact a logged in application.
-
-_______________________________________________________________________________
-
-typedef void (*s3d_cb)(struct s3d_evt *);
-
-the callback definition. each callback-functions takes a struct s3d_evt 
-pointer as argument. it will contain the information what actually happened
-(e.g which key was pressed, which object was clicked etc)
-
-------- constants -------------------------------------------------------------
-
-#define S3D_EVENT_OBJ_CLICK		1
-
-an object got clicked. the buffer contains a 4byte unsigned long number which
-is the object id. of the clicked object.
-
-#define S3D_EVENT_KEY			2
-
-a key has been pressed. contains a 2byte unsigned short keycode.
-
-#define S3D_MCP_OBJECT			17
-
-information about a virtual object. only an mcp will receive this.
-
-#define S3D_MCP_DEL_OBJECT		18
-
-a virtual object disappeared. (e.g. the app logged out)
-
-#define	S3D_OF_VISIBLE		0x00000001
-
-the object can be seen.
-
-#define	S3D_OF_SELECTABLE	0x00000002
-
-the object can be clicked.
-
-------- functions -------------------------------------------------------------
-
-int s3d_init(int *argc, char ***argv, char *name);
-
-initializes the s3dlibrary, builds the connection to the server and does some
-internal stuff. the argc/argv pointer can be given from 
-main(int argc, char *argv[])
-
-example:
-
-int main(int argc, char *argv[])
-{
-	s3d_init(&argc,&argv,"my program");
-	...
-_______________________________________________________________________________
-
-
-int s3d_quit();
-
-closes the connection and cleares the event-stack. it can also be used to leave
-the s3d_mainloop
-
-_______________________________________________________________________________
-
-
-int s3d_mainloop(void (*f)());
-
-takes a function as argument. it will loop this function until a quit-event is 
-received. you can pass NULL if you have no function to be looped, but its
-better to sleep some time if you have nothing to do anyway to save cpu-time.
-
-example:
-
-void mainloop()
-{
-	usleep(1000); // sleep 1 ms in every cycle
-}
-...
-
-	s3d_mainloop(mainloop();
-
-_______________________________________________________________________________
-
-int s3d_push_vertex(int object, float x, float y, float z);
-
-pushes a vertex onto the vertex stack. make sure that you count how many
-vertices you've pushed because you'll need that for referencing when you push
-your polygons.
-
-_______________________________________________________________________________
-
-int s3d_push_vertex_array(int object, float *vbuf, unsigned short n);
-
-push some vertices from an array. that's much better for performing than
-using s3d_push_vertex() if you have a lot of vertices (and that's probably the 
-usual case).
-
-example:
-
-	float vertices[] = { 0.0, 0.0, 0.0,
-						 1.0, 2.0, 3,0,
-						 3.0, 2.0, 1.0};
-	s3d_push_vertex_array(object, vertices, 3); // pushing 3 vertices
-
-_______________________________________________________________________________
-
-int s3d_push_material( int object, 
-						float amb_r, float amb_g, float amb_b,
-						float spec_r, float spec_g, float spec_b,
-						float diff_r, float diff_g, float diff_b
-						);
-
-pushes a material for an object. you will have to count them yourself too, as
-polygons will ask for the material index number. the material properties are
-given in rgb (red/green/blue) color codes, in float. 0.0 is the minimum, 
-1.0 is the maximum a color value can be. 
-the specular color is the color which is directly reflected from the light
-source. the diffuse color is the color which can be seen in the bright side
-of the object, and the ambience color is the color of the shadow side of the
-object.
-
-_______________________________________________________________________________
-
-int s3d_push_polygon(int object, int v1, int v2, int v3, int material);
-
-push one polygon on the polygonstack of the object. it takes 3 vertex-index-
-numbers and one material material-index-nr. as argument.
-
-example:
-	int oid=s3d_new_object();	// create a new object
-	s3d_push_vertex(oid,0.0,0.0,0.0);
-	s3d_push_vertex(oid,0.0,1.0,0.0);
-	s3d_push_vertex(oid,1.0,0.0,0.0);
-	s3d_push_material(oid,0.3,0.0,0.0, 1.0,1.0,1.0, 1.0,0.0,0.0);
-	s3d_push_polygon(oid,0,1,2,0);
-	// this will create a red polygon
-
-_______________________________________________________________________________
-
-int s3d_push_polygon_array(int object, unsigned long *pbuf, unsigned short n);
-
-as for vertices, you can push arrays of polygons to have greater performance.
-the pbuf should contain n polygons which consist of 4 unsigned long values
-of 3 vertices indeces and 1 material index.
-
-example:
-	unsigned long pbuf[] = { 0,1,2,0};
-	int oid=s3d_new_object();	// create a new object
-	s3d_push_vertex(oid,0.0,0.0,0.0);
-	s3d_push_vertex(oid,0.0,1.0,0.0);
-	s3d_push_vertex(oid,1.0,0.0,0.0);
-	s3d_push_material(oid,0.3,0.0,0.0, 1.0,1.0,1.0, 1.0,0.0,0.0);
-	s3d_push_polygon_array(oid,pbuf,1);
-	// push one polygon with the pbuf data
-
-_______________________________________________________________________________
-
-int s3d_pop_vertex(int object, unsigned short n);
-int s3d_pop_polygon(int object, unsigned short n);
-int s3d_pop_material(int object, unsigned short n);
-
-deletes the latest n vertices/polygons/materials from the vertex/polygon/
-material stack
-
-_______________________________________________________________________________
-
-int s3d_new_object();
-
-creates a new object, returning the object id.
-
-_______________________________________________________________________________
-
-int s3d_del_object(unsigned long oid);
-
-deletes the object referenced by oid.
-
-_______________________________________________________________________________
-
-int s3d_clone_object(unsigned long oid);
-
-clones an already exisiting object. they get just look the same as the 
-parent-object and will change when the parent-object changes.
-cloning especially makes sense if you want to use the same object a lot of
-times. move and transform is independent from the parent.
-the function returns child's object id.
-
-_______________________________________________________________________________
-
-int s3d_change_clone_target(unsigned long oid, unsigned long toid);
-
-changes the clone target to another object.
-
-_______________________________________________________________________________
-
-int s3d_link(unsigned long oid_from, unsigned long oid_to);
-
-a linked object will move along with it's link parent. for example if you have
-a book on a table, you can link the book to the table so the book will 
-"keep on the table" if you move the table around in space.
-it will also rotate with the table.
-
-_______________________________________________________________________________
-
-int s3d_unlink_object(unsigned long oid);
-
-remove the link to the parent.
-
-_______________________________________________________________________________
-
-int s3d_import_3ds_file(char *fname);
-
-imports a 3ds-file, returning the object id of the loaded file. fname should
-be the path to the 3ds-file.
-
-_______________________________________________________________________________
-
-int s3d_import_3ds(char *buf);
-
-imports a 3ds-file from memory.
-
-_______________________________________________________________________________
-
-int s3d_open_file(char *fname, char **pointer);
-
-this opens the file fname, setting *pointer to it's memory position. the
-function will return the size of buffer. you can free() the pointer when
-you're finished.
-
-_______________________________________________________________________________
-
-int s3d_select_font(char *mask);
-
-this selects a font for the s3d_draw_string() function. 
-
-example:
-
-	s3d_select_font("vera");
-	// will use the vera font face
-
-_______________________________________________________________________________
-
-int s3d_draw_string( char *str,float *len);
-
-renders the string str with len in truetype format with the height 1, returns
-the length of the string rendered in *len (or set len=NULL to disable this)
-
-example:
-	
-	char str="hello world!";
-	float len;
-	s3d_select_font("vera");
-	s3d_draw_string(str,len);
-
-	/* not interested in the length? do that:
-	 * s3d_draw_string(str,NULL); */
-
-_______________________________________________________________________________
-
-int s3d_flags_on(int object, unsigned long flags);
-
-put some flags on for an object.
-
-!!! HINT:
-if you don't toggle OF_VISIBLE on, you won't see your object. usually you want
-this.
-
-_______________________________________________________________________________
-
-int s3d_flags_off(int object, unsigned long flags);
-
-turns some flags off.
-_______________________________________________________________________________
-
-int s3d_translate(int object, float x, float y, float z);
-
-move the object to some position in space. when you create an object, it's 
-always located at 0.0,0.0,0.0
-
-_______________________________________________________________________________
-
-int s3d_rotate(int object, float x, float y, float z);
-
-rotate an object around the x, y and z-axis respectively. x,y,z may have values
-between [0,360].
-
-_______________________________________________________________________________
-
-int s3d_scale(int object, float x, float y, float z);
-
-enlarge an object about the factor of x, y, z for each axis respectively.
-
-_______________________________________________________________________________
-
-float s3d_get_radius(unsigned long oid);
-
-get the radius the sphere which would exactly enclose the object.
-this is useful to get the size of an object, but is slow as it needs 
-interaction with the server (maybe i'll remove this function later ...).
-
-_______________________________________________________________________________
-
-void s3d_push_event(struct s3d_evt *newevt);
-
-push an event onto the event-stack. usually you don't need to do this manually
-
-_______________________________________________________________________________
-
-struct s3d_evt *s3d_pop_event();
-
-pops the latest event from the stack. don't forget to free() it's buffer 
-and the event itself.
-
-_______________________________________________________________________________
-
-struct s3d_evt *s3d_find_event(unsigned char event);
-
-finds an the latest occurence of an event, giving the event type as argument.
-
-_______________________________________________________________________________
-
-int s3d_delete_event(struct s3d_evt *devt);
-
-deletes an event, the argument is the pointer to the event which is to be 
-deleted (maybe obtained from s3d_find_event).
-
-_______________________________________________________________________________
-
-void s3d_set_callback(unsigned char event, s3d_cb func);
-
-sets a callback for a certain event. this is very useful for event-oriented 
-applications. event callbacks will not interrupt each other or the mainloop.
-
-example:
-
-void obj_click(struct s3d_evt event)
-{
-	printf("object id %d got clicked", *((unsigned long *)event->buf));
-}
-...
-	s3d_set_callback(S3D_EVENT_NEW_OBJECT, obj_click);
-
-// this will tell you when a object got clicked
-
-_______________________________________________________________________________
-
-void s3d_clear_callback(unsigned char event);
-
-clears the callback associated with event.
-
-_______________________________________________________________________________
-
-s3d_cb s3d_get_callback(unsigned char event);
-
-returns the callback-function of the event.
-
-example:
-	struct s3d_evt e;
-	...
-	s3d_get_callback(S3D_EVENT_KEY)(e);
-	// will call the key-handling function with argument e. 
-
-_______________________________________________________________________________
-
-void s3d_process_stack();
-
-this function gos through all function of the event-stack and will call 
-functions. this is useful when you define a new function but still have a lot 
-of events of this type on the stack. 
-
-_______________________________________________________________________________
-
-int s3d_mcp_focus(int object);
-
-this is an mcp-only function. it gives focus (for receiving key-strokes etc.)
-to an app referenced by it's mcp-object-id. 



From dotslash at berlios.de  Sun Mar 19 20:33:51 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Sun, 19 Mar 2006 20:33:51 +0100
Subject: [S3d-svn] r218 - in trunk: . apps/dot_mcp
Message-ID: <200603191933.k2JJXps4026218@sheep.berlios.de>

Author: dotslash
Date: 2006-03-19 20:33:49 +0100 (Sun, 19 Mar 2006)
New Revision: 218

Modified:
   trunk/
   trunk/apps/dot_mcp/main.c
Log:
 r333 at balthasar:  dotslash | 2006-03-19 20:32:54 +0100
 - using mogs icons in the mcp



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:329
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:333

Modified: trunk/apps/dot_mcp/main.c
===================================================================
--- trunk/apps/dot_mcp/main.c	2006-03-19 19:20:23 UTC (rev 217)
+++ trunk/apps/dot_mcp/main.c	2006-03-19 19:33:49 UTC (rev 218)
@@ -423,10 +423,10 @@
 					1,1,1,0.2,
 					1,1,1,0.2,
 					1,1,1,0.2);*/
-		min_but=s3d_import_3ds_file("objs/cubeyholes.3ds");
-		rotate=s3d_import_3ds_file("objs/rotate.3ds");
+		min_but=s3d_import_3ds_file("objs/btn_minimize.3ds");
+		rotate=s3d_import_3ds_file("objs/btn_rotate.3ds");
 		reset=s3d_import_3ds_file("objs/reset.3ds");
-		close_but=s3d_import_3ds_file("objs/spikeybla.3ds");
+		close_but=s3d_import_3ds_file("objs/btn_close.3ds");
 		sphere=s3d_import_3ds_file("objs/ringsystem.3ds");
 		menu=menu_init();
 		s3d_link(menu,0);



From dotslash at berlios.de  Sun Mar 19 20:55:06 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Sun, 19 Mar 2006 20:55:06 +0100
Subject: [S3d-svn] r219 - in trunk: . Documentation/s3dapi client objs server
Message-ID: <200603191955.k2JJt6mI004166@sheep.berlios.de>

Author: dotslash
Date: 2006-03-19 20:54:11 +0100 (Sun, 19 Mar 2006)
New Revision: 219

Added:
   trunk/Documentation/s3dapi/README
   trunk/objs/AUTHORS
   trunk/objs/s3d_logo.3ds
Modified:
   trunk/
   trunk/client/proto_out.c
   trunk/client/s3d.h
   trunk/objs/Makefile.am
   trunk/server/TODO
Log:
 r335 at balthasar:  dotslash | 2006-03-19 20:53:54 +0100
 - adding authors and objects. 
 - adding s3dapi README
 - s3d.h fix (just signed/unsigned stuff)



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:333
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:335

Added: trunk/Documentation/s3dapi/README
===================================================================
--- trunk/Documentation/s3dapi/README	2006-03-19 19:33:49 UTC (rev 218)
+++ trunk/Documentation/s3dapi/README	2006-03-19 19:54:11 UTC (rev 219)
@@ -0,0 +1,8 @@
+You can read this online on
+
+http://s3d.berlios.de/doc
+
+or compile it yourself, for example with
+
+docbook2html s3dapi.docbook
+

Modified: trunk/client/proto_out.c
===================================================================
--- trunk/client/proto_out.c	2006-03-19 19:33:49 UTC (rev 218)
+++ trunk/client/proto_out.c	2006-03-19 19:54:11 UTC (rev 219)
@@ -43,7 +43,7 @@
 	return(_queue_want_object());  /*  TODO: well ... */
 }
 /*  clones an object */
-int s3d_clone(unsigned long oid)
+int s3d_clone(int oid)
 {
 	uint32_t res;
 	res=s3d_new_object();
@@ -52,7 +52,7 @@
 }
 
 /*  changes the target of a clone-object */
-int s3d_clone_target(unsigned long oid, unsigned long toid)
+int s3d_clone_target(int oid, int toid)
 {
 	uint32_t buf[2];
 	buf[0]=htonl(oid);
@@ -62,7 +62,7 @@
 	return oid;
 }
 /*  deletes an object */
-int s3d_del_object(unsigned long oid)
+int s3d_del_object(int oid)
 {
 	uint32_t res=htonl(oid);
 	net_send(S3D_P_C_DEL_OBJ,(char *)&res,4);
@@ -70,7 +70,7 @@
 }
 /*  creates a link from object oid_from to object oid_to in order to copy */
 /*  translations/rotations */
-int s3d_link(unsigned long oid_from, unsigned long oid_to)
+int s3d_link(int oid_from, int oid_to)
 {
 	uint32_t buf[2];
 	buf[0]=htonl(oid_from);
@@ -79,7 +79,7 @@
 	return(0);
 }
 /*  remove the link to another object */
-int s3d_unlink(unsigned long oid)
+int s3d_unlink(int oid)
 {
 	uint32_t buf;
 	buf=htonl(oid);
@@ -213,7 +213,7 @@
 /* 	free(buf); */
 	return(0);
 }
-int s3d_push_polygon(int object, int v1, int v2, int v3, int material)
+int s3d_push_polygon(int object, unsigned long v1, unsigned long v2, unsigned long v3, unsigned long material)
 {
 	char				buf[4+4*4],*ptr;
 	int					len=4+4*4;
@@ -227,7 +227,7 @@
 	net_send(S3D_P_C_PUSH_POLY,buf,len);
 	return(0);
 }
-int s3d_push_line(int object, int v1, int v2, int material)
+int s3d_push_line(int object, unsigned long v1, unsigned long v2, unsigned long material)
 {
 	char				buf[4+3*4],*ptr;
 	int					len=4+3*4;
@@ -632,7 +632,7 @@
 	}
 	return(0);
 }
-int s3d_pep_material_texture(int object, unsigned long mat, unsigned long tex)
+int s3d_pep_material_texture(int object, unsigned long tex)
 {
 	char				buf[4*2],*ptr;
 	ptr=buf;
@@ -642,7 +642,7 @@
 	return(0);
 }
 /*  load data (which has width w and height h) into object, texture tex at position (xpos,ypos) */
-int s3d_load_texture(int object, unsigned long tex, unsigned short xpos, unsigned short ypos, unsigned short w, unsigned short h, char *data)
+int s3d_load_texture(int object, unsigned long tex, unsigned short xpos, unsigned short ypos, unsigned short w, unsigned short h, unsigned char *data)
 {
 	char				buf[MF_LEN+4],*ptr;
 	int 				linestep,lines,i;

Modified: trunk/client/s3d.h
===================================================================
--- trunk/client/s3d.h	2006-03-19 19:33:49 UTC (rev 218)
+++ trunk/client/s3d.h	2006-03-19 19:54:11 UTC (rev 219)
@@ -99,9 +99,9 @@
 
 int s3d_pep_materials_a(int object, float *mbuf, unsigned short n);
 int s3d_load_materials_a(int object, float *mbuf, unsigned long start, unsigned short n);
-int s3d_push_polygon(int object, int v1, int v2, int v3, int material);
+int s3d_push_polygon(int object, unsigned long v1, unsigned long v2, unsigned long v3, unsigned long material);
 int s3d_push_polygons(int object, unsigned long *pbuf, unsigned short n);
-int s3d_push_line(int object, int v1, int v2, int material);
+int s3d_push_line(int object, unsigned long v1, unsigned long v2, unsigned long material);
 int s3d_push_lines(int object, unsigned long *lbuf, unsigned short n);
 int s3d_push_texture(int object, unsigned short w, unsigned short h);
 int s3d_pop_vertex(int object, unsigned long n);
@@ -113,23 +113,23 @@
 int s3d_pep_polygon_normals(int object, float *nbuf,unsigned short n);
 int s3d_pep_polygon_tex_coord(int object, float x1, float y1, float x2, float y2, float x3, float y3);
 int s3d_pep_polygon_tex_coords(int object, float *tbuf,unsigned short n);
-int s3d_pep_material_texture(int object, unsigned long mat, unsigned long tex);
+int s3d_pep_material_texture(int object, unsigned long tex);
 int s3d_pep_vertex(int object, float x, float y, float z);
 int s3d_pep_vertices(int object, float *vbuf,unsigned short n);
 int s3d_pep_line(int object, int v1, int v2, int material);
 int s3d_pep_lines(int object, unsigned long *lbuf,unsigned short n);
 int s3d_load_polygon_normals(int object, float *nbuf,unsigned long start, unsigned short n);
 int s3d_load_polygon_tex_coords(int object, float *tbuf, unsigned long start, unsigned short n);
-int s3d_load_texture(int object, unsigned long tex, unsigned short xpos, unsigned short ypos, unsigned short w, unsigned short h, char *data);
+int s3d_load_texture(int object, unsigned long tex, unsigned short xpos, unsigned short ypos, unsigned short w, unsigned short h, unsigned char *data);
 
 int s3d_new_object();
-int s3d_del_object(unsigned long oid);
+int s3d_del_object(int oid);
 
-int s3d_clone(unsigned long oid);
-int s3d_clone_target(unsigned long oid, unsigned long toid);
+int s3d_clone(int oid);
+int s3d_clone_target(int oid, int toid);
 
-int s3d_link(unsigned long oid_from, unsigned long oid_to);
-int s3d_unlink(unsigned long oid);
+int s3d_link(int oid_from, int oid_to);
+int s3d_unlink(int oid);
 
 int s3d_flags_on(int object, unsigned long flags);
 int s3d_flags_off(int object, unsigned long flags);

Added: trunk/objs/AUTHORS
===================================================================
--- trunk/objs/AUTHORS	2006-03-19 19:33:49 UTC (rev 218)
+++ trunk/objs/AUTHORS	2006-03-19 19:54:11 UTC (rev 219)
@@ -0,0 +1,72 @@
+All those objects in here (except for martin sterns, from whom I don't know yet) are 
+may be used under the term GPL, that means you may distribute and modify or alter them
+as you want, if you give full credits and redistribute them under GPL again. 
+Too bad we don't have source code for them. maybe GPL is no good idea, but o well. :)
+
+I know, some of them (especially mine) are mostly junk, but maybe you find them useful ;)
+
+### Mike Greanz (mog):
+
+btn_close.3ds
+btn_maximize.3ds
+btn_minimize.3ds
+btn_rotate.3ds
+
+### Andreas Langer:
+
+accesspoint.3ds
+accesspoint_inet.3ds
+internet.3ds
+
+### Martin Stern:
+
+martin_stern/*
+
+### Christiane Weidauer (yd):
+
+abs2.3ds
+abs.3ds
+cube.3ds
+cubey.3ds
+cubeyholes.3ds
+miu.3ds
+spikeybla.3ds
+star.3ds
+
+
+### Simon Wunderlich:
+
+arrow.3ds
+big_p.3ds
+bigsphere.3ds
+comp.3ds
+clock_bg.3ds
+dot.3ds
+dotdot.3ds
+duno.3ds
+dirstep.3ds
+folder.3ds
+geometry.3ds
+go_button.3ds
+katze_body.3ds
+katze_leg.3ds
+katze_tail.3ds
+lil_p.3ds
+materials.3ds
+meshnode.3ds
+new_sphere.3ds
+notes.3ds
+reset.3ds
+ringsystem.3ds
+rotate.3ds
+s3d_logo.3ds
+sec_p.3ds
+snow_body.3ds
+snow_foot.3ds
+snow_head.3ds
+sphere.3ds
+weirdball.3ds
+wtf.3ds
+xyz.3ds
+
+

Modified: trunk/objs/Makefile.am
===================================================================
--- trunk/objs/Makefile.am	2006-03-19 19:33:49 UTC (rev 218)
+++ trunk/objs/Makefile.am	2006-03-19 19:54:11 UTC (rev 219)
@@ -41,5 +41,8 @@
 	big_p.3ds \
 	spikeybla.3ds \
 	btn_close.3ds \
-	btn_minimize.3ds
+	btn_minimize.3ds \
+	btn_rotate.3ds \
+	btn_maximize.3ds \
+	AUTHORS
 

Added: trunk/objs/s3d_logo.3ds
===================================================================
(Binary files differ)


Property changes on: trunk/objs/s3d_logo.3ds
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Modified: trunk/server/TODO
===================================================================
--- trunk/server/TODO	2006-03-19 19:33:49 UTC (rev 218)
+++ trunk/server/TODO	2006-03-19 19:54:11 UTC (rev 219)
@@ -14,7 +14,6 @@
 
  
 IDEAS:
- - how to define special keys? e.g. the GLUT way, the SDL way, the ANSI way ...
  - ipv6, unix socket support. 
  - put whole processes in display lists?!
 



From dotslash at berlios.de  Sun Mar 19 21:09:05 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Sun, 19 Mar 2006 21:09:05 +0100
Subject: [S3d-svn] r220 - in trunk: . apps/s3d_x11gate apps/s3dgps example extras
Message-ID: <200603192009.k2JK95RU008831@sheep.berlios.de>

Author: dotslash
Date: 2006-03-19 21:08:38 +0100 (Sun, 19 Mar 2006)
New Revision: 220

Modified:
   trunk/
   trunk/apps/s3d_x11gate/s3d_x11gate.c
   trunk/apps/s3dgps/s3dgps.c
   trunk/example/texturetest.c
   trunk/extras/mplayer.1.0pre7.s3d.patch
Log:
 r337 at balthasar:  dotslash | 2006-03-19 21:08:27 +0100
 - some more fixes due API changes (textures)



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:335
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:337

Modified: trunk/apps/s3d_x11gate/s3d_x11gate.c
===================================================================
--- trunk/apps/s3d_x11gate/s3d_x11gate.c	2006-03-19 19:54:11 UTC (rev 219)
+++ trunk/apps/s3d_x11gate/s3d_x11gate.c	2006-03-19 20:08:38 UTC (rev 220)
@@ -103,7 +103,7 @@
 				if (last_change!=y)
 				{	 /*  last change is already over, post it! */
 /*					printf("[%d to %d]",start_change,last_change);*/
-					s3d_load_texture(oid,0,0,start_change,width,last_change-start_change+1,tex_image+start_change*width*4);
+					s3d_load_texture(oid,0,0,start_change,width,last_change-start_change+1,(unsigned char *)tex_image+start_change*width*4);
 					start_change=-1;
 					last_change=-1;
 				}
@@ -113,7 +113,7 @@
 		if (last_change!=-1)
 		{
 /*			printf("last one: [%d-%d]",start_change,last_change);*/
-			s3d_load_texture(oid,0,0,start_change,width,last_change-start_change,tex_image+start_change*width*4);
+			s3d_load_texture(oid,0,0,start_change,width,last_change-start_change,(unsigned char *)tex_image+start_change*width*4);
 		}
 /* 		s3d_load_texture(oid,0,0,0,width,height,tex_image); */
 		 /*  swap images */
@@ -206,7 +206,7 @@
 									   0.0,0.0);
 		s3d_push_texture(oid,width,height);
 					 /*  push data on texture 0 position (0,0) */
-		s3d_pep_material_texture(oid,0,0);	 /*  assign texture 0 to material 0 */
+		s3d_pep_material_texture(oid,0);	 /*  assign texture 0 to material 0 */
 		s3d_flags_on(oid,S3D_OF_VISIBLE);
 		s3d_mainloop(mainloop);
 		free(img1);

Modified: trunk/apps/s3dgps/s3dgps.c
===================================================================
--- trunk/apps/s3dgps/s3dgps.c	2006-03-19 19:54:11 UTC (rev 219)
+++ trunk/apps/s3dgps/s3dgps.c	2006-03-19 20:08:38 UTC (rev 220)
@@ -193,9 +193,9 @@
 									   1.0,1.0,
 									   0.0,1.0);
 		s3d_push_texture(oid,w,h);		
-		s3d_load_texture(oid,0,0,0,w,h,(char *)data);
+		s3d_load_texture(oid,0,0,0,w,h,(unsigned char *)data);
 		free(data);
-		s3d_pep_material_texture(oid,0,0);	 /*  assign texture 0 to material 0 */
+		s3d_pep_material_texture(oid,0);	 /*  assign texture 0 to material 0 */
 	} else {
 		printf("can't load %s\n",path);
 	}

Modified: trunk/example/texturetest.c
===================================================================
--- trunk/example/texturetest.c	2006-03-19 19:54:11 UTC (rev 219)
+++ trunk/example/texturetest.c	2006-03-19 20:08:38 UTC (rev 220)
@@ -72,10 +72,10 @@
 				data[(y*MAXX+x)*4+3]=255;
 			}
 		s3d_push_texture(oid,MAXX,MAXY);		
-		s3d_load_texture(oid,0,0,0,MAXX,MAXY,(char *)data);
+		s3d_load_texture(oid,0,0,0,MAXX,MAXY,data);
 					 /*  push data on texture 0 position (0,0) */
 		free(data);
-		s3d_pep_material_texture(oid,0,0);	 /*  assign texture 0 to material 0 */
+		s3d_pep_material_texture(oid,0);	 /*  assign texture 0 to material 0 */
 		s3d_flags_on(oid,S3D_OF_VISIBLE);
 		i=0;
 		s3d_mainloop(mainloop);

Modified: trunk/extras/mplayer.1.0pre7.s3d.patch
===================================================================
--- trunk/extras/mplayer.1.0pre7.s3d.patch	2006-03-19 19:54:11 UTC (rev 219)
+++ trunk/extras/mplayer.1.0pre7.s3d.patch	2006-03-19 20:08:38 UTC (rev 220)
@@ -1,6 +1,6 @@
-diff -Naur MPlayer-1.0pre7.old/configure MPlayer-1.0pre7/configure
---- MPlayer-1.0pre7.old/configure	2005-04-13 13:46:35.000000000 +0200
-+++ MPlayer-1.0pre7/configure	2005-05-22 18:12:56.586338408 +0200
+diff -Naur MPlayer-1.0pre7/configure MPlayer-1.0pre7.s3d/configure
+--- MPlayer-1.0pre7/configure	2005-04-13 13:46:35.000000000 +0200
++++ MPlayer-1.0pre7.s3d/configure	2005-05-22 18:19:08.000000000 +0200
 @@ -234,6 +234,7 @@
    --disable-vidix        disable VIDIX [enable on x86 *nix]
    --enable-gl            build with OpenGL render support [autodetect]
@@ -70,9 +70,9 @@
  $_def_caca
  $_def_tga
  $_def_toolame
-diff -Naur MPlayer-1.0pre7.old/libvo/video_out.c MPlayer-1.0pre7/libvo/video_out.c
---- MPlayer-1.0pre7.old/libvo/video_out.c	2004-12-21 21:33:51.000000000 +0100
-+++ MPlayer-1.0pre7/libvo/video_out.c	2005-05-22 18:09:59.288291808 +0200
+diff -Naur MPlayer-1.0pre7/libvo/video_out.c MPlayer-1.0pre7.s3d/libvo/video_out.c
+--- MPlayer-1.0pre7/libvo/video_out.c	2004-12-21 21:33:51.000000000 +0100
++++ MPlayer-1.0pre7.s3d/libvo/video_out.c	2005-05-22 18:19:08.000000000 +0200
 @@ -84,6 +84,7 @@
  extern vo_functions_t video_out_png;
  extern vo_functions_t video_out_ggi;
@@ -91,10 +91,10 @@
  #ifdef HAVE_CACA
  	&video_out_caca,
  #endif
-diff -Naur MPlayer-1.0pre7.old/libvo/vo_s3d.c MPlayer-1.0pre7/libvo/vo_s3d.c
---- MPlayer-1.0pre7.old/libvo/vo_s3d.c	1970-01-01 01:00:00.000000000 +0100
-+++ MPlayer-1.0pre7/libvo/vo_s3d.c	2005-05-22 18:09:59.289291656 +0200
-@@ -0,0 +1,160 @@
+diff -Naur MPlayer-1.0pre7/libvo/vo_s3d.c MPlayer-1.0pre7.s3d/libvo/vo_s3d.c
+--- MPlayer-1.0pre7/libvo/vo_s3d.c	1970-01-01 01:00:00.000000000 +0100
++++ MPlayer-1.0pre7.s3d/libvo/vo_s3d.c	2006-03-19 20:56:19.000000000 +0100
+@@ -0,0 +1,169 @@
 +#include <stdio.h>
 +#include <stdlib.h>
 +#include <string.h>
@@ -170,6 +170,7 @@
 +static uint32_t
 +config(uint32_t width, uint32_t height, uint32_t d_width, uint32_t d_height, uint32_t fullscreen, char *title, uint32_t format)
 +{
++	float aspect;
 +	image_width = width;
 +	image_height = height;
 +	printf("config!!\n\n");
@@ -178,14 +179,21 @@
 +	} else {
 +		free(data2);
 +		s3d_pop_texture(oid,1);
++		s3d_pop_vertex(oid,4);
 +	}
-+	s3d_scale(oid,(((float) d_width)/((float) d_height)),1.0,1.0);
++	aspect=((float) d_width)/((float) d_height);
++	s3d_push_vertex(oid,-3*aspect,-3,0);
++	s3d_push_vertex(oid, 3*aspect,-3,0);
++	s3d_push_vertex(oid, 3*aspect, 3,0);
++	s3d_push_vertex(oid,-3*aspect, 3,0);
++
++/*	s3d_scale(oid,(((float) d_width)/((float) d_height)),1.0,1.0);*/
 +	data2=malloc(width*height*4);
 +	memset(data2,128,width*height*4);
 +	s3d_push_texture(oid,image_width,image_height);		
 +   	mp_msg (MSGT_VO, MSGL_INFO,"[s3d] requesting a %d %d texture... \n",image_width,image_height);
 +   	mp_msg (MSGT_VO, MSGL_INFO,"[s3d] wanted size is %d %d... \n",d_width,d_height);
-+	s3d_pep_material_texture(oid,0,0);	// assign texture 0 to material 0
++	s3d_pep_material_texture(oid,0);	// assign texture 0 to material 0
 +	return 0;
 +}
 +
@@ -213,6 +221,7 @@
 +    	mp_msg (MSGT_VO, MSGL_WARN, "[s3d] sorry, can't reach server.\n");
 +		return(ENOSYS);
 +	}
++	oid=s3d_new_object();
 +	s3d_push_vertex(oid,-3,-3,0);
 +	s3d_push_vertex(oid, 3,-3,0);
 +	s3d_push_vertex(oid, 3, 3,0);
@@ -255,9 +264,9 @@
 +  }
 +  return VO_NOTIMPL;
 +}
-diff -Naur MPlayer-1.0pre7.old/Makefile MPlayer-1.0pre7/Makefile
---- MPlayer-1.0pre7.old/Makefile	2005-04-16 22:18:12.000000000 +0200
-+++ MPlayer-1.0pre7/Makefile	2005-05-22 18:13:18.386024352 +0200
+diff -Naur MPlayer-1.0pre7/Makefile MPlayer-1.0pre7.s3d/Makefile
+--- MPlayer-1.0pre7/Makefile	2005-04-16 22:18:12.000000000 +0200
++++ MPlayer-1.0pre7.s3d/Makefile	2005-05-22 18:19:08.000000000 +0200
 @@ -30,7 +30,7 @@
  OBJS_MENCODER = $(SRCS_MENCODER:.c=.o)
  OBJS_MPLAYER = $(SRCS_MPLAYER:.c=.o)
@@ -267,3 +276,4 @@
  AO_LIBS = $(ARTS_LIB) $(ESD_LIB) $(JACK_LIB) $(NAS_LIB) $(SGIAUDIO_LIB) $(POLYP_LIB)
  CODEC_LIBS = $(AV_LIB) $(FAME_LIB) $(MAD_LIB) $(VORBIS_LIB) $(THEORA_LIB) $(FAAD_LIB) $(LIBLZO_LIB) $(DECORE_LIB) $(XVID_LIB) $(DTS_LIB) $(PNG_LIB) $(Z_LIB) $(JPEG_LIB) $(ALSA_LIB) $(XMMS_LIB) $(X264_LIB)
  COMMON_LIBS = libmpcodecs/libmpcodecs.a $(W32_LIB) $(DS_LIB) libaf/libaf.a libmpdemux/libmpdemux.a input/libinput.a postproc/libswscale.a osdep/libosdep.a $(DVDREAD_LIB) $(CODEC_LIBS) $(FREETYPE_LIB) $(TERMCAP_LIB) $(CDPARANOIA_LIB) $(MPLAYER_NETWORK_LIB) $(WIN32_LIB) $(GIF_LIB) $(MACOSX_FRAMEWORKS) $(SMBSUPPORT_LIB) $(FRIBIDI_LIB) $(FONTCONFIG_LIB) $(ENCA_LIB)
+



From dotslash at berlios.de  Sun Mar 19 21:36:43 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Sun, 19 Mar 2006 21:36:43 +0100
Subject: [S3d-svn] r221 - trunk
Message-ID: <200603192036.k2JKah5G021781@sheep.berlios.de>

Author: dotslash
Date: 2006-03-19 21:36:41 +0100 (Sun, 19 Mar 2006)
New Revision: 221

Modified:
   trunk/
   trunk/CREDITS
   trunk/ChangeLog
   trunk/README
Log:
 r339 at balthasar:  dotslash | 2006-03-19 21:36:36 +0100
 - some author updating



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:337
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:339

Modified: trunk/CREDITS
===================================================================
--- trunk/CREDITS	2006-03-19 20:08:38 UTC (rev 220)
+++ trunk/CREDITS	2006-03-19 20:36:41 UTC (rev 221)
@@ -6,8 +6,8 @@
 	Manocha D. 	(1994)
 apps/s3dvt/s3dvt.c
 	- much of the code comes from glterm by <helly at gmx.net>
-example/miu3ds/*
-	- objects things come from yd
+objs/AUTHORS
+	- see this file for the model artists
 
 	
 - some win32 addition come from rudi. <chru at hrz.tu-chemnitz.de>

Modified: trunk/ChangeLog
===================================================================
--- trunk/ChangeLog	2006-03-19 20:08:38 UTC (rev 220)
+++ trunk/ChangeLog	2006-03-19 20:36:41 UTC (rev 221)
@@ -1,3 +1,8 @@
+2006-03-19  Simon Wunderlich - <dotslash at packetmixer.de>
+	- FINALLY, PROUDLY PRESENTING: S3D VERSION 0.1!!!
+	- this changelog is pretty incomplete. Please use the
+	  subversion ChangeLog (by typing svn log) for updates.
+	- We will stop this Changelog now, as svn does the dirty work :)
 2006-03-15  Andreas Kohn - <andreas at syndrom23.de>
 	- some configure.ac changes to fix glut/sdl detection code
 	- some autoconf magic to fix pthread detection for esoteric arch's.
@@ -419,3 +424,5 @@
 	- some minor graphics optimizations
 	- added usleep() into 3dsloader.c
 	...
+2004-8-?	Simon Wunderlich - <dotslash at packetmixer.de>
+	- s3d started. dunno the correct date thou :X

Modified: trunk/README
===================================================================
--- trunk/README	2006-03-19 20:08:38 UTC (rev 220)
+++ trunk/README	2006-03-19 20:36:41 UTC (rev 221)
@@ -66,3 +66,13 @@
 WWW:	http://s3d.berlios.de
 
 Any Feedback is welcome!!
+
+7. TEAM
+-------
+	Mike Graenz <mog at users.berlios.de>
+	Andreas Langer <andreas_lbg at gmx.de>
+	Marek Lindner <lindner_marek at yahoo.de>
+	Andreas Kohn <andreas at syndrom23.de>
+	Christiane Weidauer <yd at freakkind.de>
+	Simon Wunderlich <dotslash at packetmixer.de>
+	



From dotslash at berlios.de  Sun Mar 19 22:42:17 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Sun, 19 Mar 2006 22:42:17 +0100
Subject: [S3d-svn] r222 - in trunk: . Documentation
Message-ID: <200603192142.k2JLgHhU031772@sheep.berlios.de>

Author: dotslash
Date: 2006-03-19 22:42:11 +0100 (Sun, 19 Mar 2006)
New Revision: 222

Modified:
   trunk/
   trunk/Documentation/Makefile.am
   trunk/TODO
   trunk/configure.ac
Log:
 r341 at balthasar:  dotslash | 2006-03-19 22:42:06 +0100
 - some cleanup for the release



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:339
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:341

Modified: trunk/Documentation/Makefile.am
===================================================================
--- trunk/Documentation/Makefile.am	2006-03-19 20:36:41 UTC (rev 221)
+++ trunk/Documentation/Makefile.am	2006-03-19 21:42:11 UTC (rev 222)
@@ -1,2 +1,4 @@
-EXTRA_DIST	= s3dlib.txt s3drc.txt for_icon_designer.txt OPEN_PROBLEMS.txt
+SUBDIRS=s3dapi
 
+EXTRA_DIST	= s3drc.txt for_icon_designer.txt OPEN_PROBLEMS.txt 
+

Modified: trunk/TODO
===================================================================
--- trunk/TODO	2006-03-19 20:36:41 UTC (rev 221)
+++ trunk/TODO	2006-03-19 21:42:11 UTC (rev 222)
@@ -2,6 +2,8 @@
 	* sane paths for applications
 autotools:
 	* OBJECTPATH for finding the object?
+	* ./configure: line 23422: HAVE_PTHREAD: command not found < huh?
+	* ./configure: line 22373: MDL_HAVE_OPENGL: command not found
 
 	* Apple todo: won't find -lX11 (for s3d_x11gate) while compiling
 	* "-Wall -pedantic" default in CFLAGS? (if possible)

Modified: trunk/configure.ac
===================================================================
--- trunk/configure.ac	2006-03-19 20:36:41 UTC (rev 221)
+++ trunk/configure.ac	2006-03-19 21:42:11 UTC (rev 222)
@@ -179,7 +179,8 @@
 	apps/dot_mcp/Makefile
 	example/Makefile
 	objs/Makefile
-	Documentation/Makefile])
+	Documentation/Makefile
+	Documentation/s3dapi/Makefile])
 AC_OUTPUT
 
 echo "



From marec at berlios.de  Fri Mar 24 21:12:40 2006
From: marec at berlios.de (marec at berlios.de)
Date: Fri, 24 Mar 2006 21:12:40 +0100
Subject: [S3d-svn] r226 - in trunk: Documentation apps/olsrs3d server
Message-ID: <200603242012.k2OKCeeP028576@sheep.berlios.de>

Author: marec
Date: 2006-03-24 21:11:42 +0100 (Fri, 24 Mar 2006)
New Revision: 226

Modified:
   trunk/Documentation/Makefile.am
   trunk/apps/olsrs3d/main.c
   trunk/apps/olsrs3d/olsrs3d.h
   trunk/apps/olsrs3d/process.c
   trunk/server/config.h
Log:
sqrt for distance of olsr nodes


Modified: trunk/Documentation/Makefile.am
===================================================================
--- trunk/Documentation/Makefile.am	2006-03-21 00:12:44 UTC (rev 225)
+++ trunk/Documentation/Makefile.am	2006-03-24 20:11:42 UTC (rev 226)
@@ -1,4 +1,4 @@
-SUBDIRS		= s3dapi
+#SUBDIRS		= s3dapi
 
 EXTRA_DIST	= s3drc.txt for_icon_designer.txt OPEN_PROBLEMS.txt \
 		  s3dapi/README s3dapi/bookinfo.docbook s3dapi.docbook

Modified: trunk/apps/olsrs3d/main.c
===================================================================
--- trunk/apps/olsrs3d/main.c	2006-03-21 00:12:44 UTC (rev 225)
+++ trunk/apps/olsrs3d/main.c	2006-03-24 20:11:42 UTC (rev 226)
@@ -409,22 +409,18 @@
 
 	while ( olsr_con != NULL ) {
 
-		if ( ( olsr_con->left_etx != 0.0 ) && ( olsr_con->right_etx != 0.0  ) ) {
+		distance = dirt( olsr_con->left_olsr_node->pos_vec, olsr_con->right_olsr_node->pos_vec, tmp_mov_vec );
+		f = ( ( olsr_con->left_etx_sqrt + olsr_con->left_etx_sqrt ) / 4.0 ) / distance;
 
-			distance = dirt( olsr_con->left_olsr_node->pos_vec, olsr_con->right_olsr_node->pos_vec, tmp_mov_vec );
-			f = ( ( olsr_con->left_etx + olsr_con->right_etx ) / 4.0 ) / distance;
+		/***
+		 * drift factor - 0.0 < factor < 1.0 ( best results: 0.3 < factor < 0.9
+		 * small factor: fast and strong drift to neighbours
+		 ***/
+		if ( f < Factor ) f = Factor;
 
-			/***
-			 * drift factor - 0.0 < factor < 1.0 ( best results: 0.3 < factor < 0.9
-			 * small factor: fast and strong drift to neighbours
-			 ***/
-			if ( f < Factor ) f = Factor;
+		mov_add( olsr_con->left_olsr_node->mov_vec, tmp_mov_vec, 1 / f - 1 );
+		mov_add( olsr_con->right_olsr_node->mov_vec, tmp_mov_vec, - ( 1 / f - 1 ) );
 
-			mov_add( olsr_con->left_olsr_node->mov_vec, tmp_mov_vec, 1 / f - 1 );
-			mov_add( olsr_con->right_olsr_node->mov_vec, tmp_mov_vec, - ( 1 / f - 1 ) );
-
-		}
-
 		olsr_con = olsr_con->next_olsr_con;
 
 	}
@@ -756,16 +752,16 @@
 	struct olsr_neigh_list *tmpNeighbour;
 	float p = 1.0;
 	int i;
-	
+
 	oid=(int)*((unsigned long *)evt->buf);
 	olsr_node = *lst_search(oid);
-	
+
 	/*
 	distance = dirt(CamPosition[0],olsr_node->pos_vec,tmp_vector);
 	mov_add(ZeroPosition,tmp_vector,1.0);
 	s3d_translate(ZeroPoint,ZeroPosition[0] * -1,ZeroPosition[1] * -1,ZeroPosition[2] * -1);
 	*/
-	
+
 	/* print clicked object ip and connections */
 	if ( Olsr_ip_label_obj != -1 ) s3d_del_object( Olsr_ip_label_obj );
 	snprintf( ip_str, 35, "ip: %s", olsr_node->ip );
@@ -774,7 +770,7 @@
 	s3d_flags_on( Olsr_ip_label_obj, S3D_OF_VISIBLE );
 	s3d_scale( Olsr_ip_label_obj, 0.2 );
 	s3d_translate( Olsr_ip_label_obj,-Left*3.0-(ln * 0.2), -Bottom*3.0-0.8, -3.0 );
-	
+
 	if( Olsr_neighbour_label_obj != NULL )
 	{
 		/* int n = sizeof(Olsr_neighbour_label_obj) / sizeof(int);*/
@@ -786,21 +782,21 @@
 		free(Olsr_neighbour_label_obj);
 		Olsr_neighbour_label_obj = NULL;
 	}
-	
+
 	tmpNeighbour = olsr_node->olsr_neigh_list;
-	
+
 	Size = 0;
 	while(tmpNeighbour != NULL)
 	{
 		Size++;
 		tmpNeighbour = tmpNeighbour->next_olsr_neigh_list;
 	}
-	
+
 	Olsr_neighbour_label_obj = malloc(Size*sizeof(int));
 	tmpNeighbour = olsr_node->olsr_neigh_list;
-	
+
 	for(i = 0; i < Size ;i++)
-	{	
+	{
 		char nIpStr[60];
 		float len;
 		snprintf(nIpStr, 60, "%10.2f %s %10.2f", (strcmp(olsr_node->ip,tmpNeighbour->olsr_con->right_olsr_node->ip)?tmpNeighbour->olsr_con->left_etx:tmpNeighbour->olsr_con->right_etx),

Modified: trunk/apps/olsrs3d/olsrs3d.h
===================================================================
--- trunk/apps/olsrs3d/olsrs3d.h	2006-03-21 00:12:44 UTC (rev 225)
+++ trunk/apps/olsrs3d/olsrs3d.h	2006-03-24 20:11:42 UTC (rev 226)
@@ -40,6 +40,8 @@
 	struct olsr_node *right_olsr_node;   /* pointer to right end point of the connection */
 	float left_etx;   /* etx of left olsr node */
 	float right_etx;   /* etx of right olsr node */
+	float left_etx_sqrt;   /* sqrt of etx of left olsr node */
+	float right_etx_sqrt;   /* sqrt etx of right olsr node */
 	int obj_id;   /* id of connection object in s3d */
 	int color;
 	float rgb;

Modified: trunk/apps/olsrs3d/process.c
===================================================================
--- trunk/apps/olsrs3d/process.c	2006-03-21 00:12:44 UTC (rev 225)
+++ trunk/apps/olsrs3d/process.c	2006-03-24 20:11:42 UTC (rev 226)
@@ -29,6 +29,7 @@
 #include <string.h> 	/* strlen(), memmove() */
 #include <stdlib.h> 	/* rand(), malloc(), realloc(), free() */
 #include <s3d.h>
+#include <math.h>       /* sqrt() */
 #include "olsrs3d.h"
 
 char lbuf[MAXLINESIZE];
@@ -56,11 +57,13 @@
 		/* connection already exists */
 		if ( ( strncmp( (*olsr_con)->left_olsr_node->ip, con_from->ip, NAMEMAX ) == 0 ) && ( strncmp( (*olsr_con)->right_olsr_node->ip, con_to->ip, NAMEMAX ) == 0 ) ) {
 			(*olsr_con)->left_etx = etx;
+			(*olsr_con)->left_etx_sqrt = sqrt( etx );
 			break;
 
 		} else if ( ( strncmp( (*olsr_con)->right_olsr_node->ip, con_from->ip, NAMEMAX ) == 0 ) && ( strncmp( (*olsr_con)->left_olsr_node->ip, con_to->ip, NAMEMAX ) == 0 ) ) {
 
 			(*olsr_con)->right_etx = etx;
+			(*olsr_con)->right_etx_sqrt = sqrt( etx );
 			break;
 
 		}
@@ -106,12 +109,16 @@
 		if ( etx == -1000.00 ) {
 
 			(*olsr_con)->left_etx = etx;
+			(*olsr_con)->left_etx_sqrt = 10.0;
 			(*olsr_con)->right_etx = etx;
+			(*olsr_con)->right_etx_sqrt = 10.0;
 
 		} else {
 
 			(*olsr_con)->left_etx = etx;
-			(*olsr_con)->right_etx = 0.0;
+			(*olsr_con)->left_etx_sqrt = sqrt( etx );
+			(*olsr_con)->right_etx = 999.0;
+			(*olsr_con)->right_etx_sqrt = sqrt( 999.0 );
 
 		}
 
@@ -463,8 +470,8 @@
 					olsr_node1 = get_olsr_node( &Olsr_root, con_from );
 					olsr_node2 = get_olsr_node( &Olsr_root, con_to );
 					f = strtod(etx,NULL);
-					if ( f < 1 )
-						f = 999;
+					if ( f < 1.0 )
+						f = 999.0;
 					add_olsr_con( olsr_node1, olsr_node2, f );
 				}
 

Modified: trunk/server/config.h
===================================================================
--- trunk/server/config.h	2006-03-21 00:12:44 UTC (rev 225)
+++ trunk/server/config.h	2006-03-24 20:11:42 UTC (rev 226)
@@ -40,7 +40,7 @@
 #define HIGH	4
 #define	VHIGH	5
 /*  which is the minimum level of debugmessage we want to see? */
-#define DEBUG	LOW
+#define DEBUG	VHIGH
 #ifndef DEBUG
 #define errds(...) /* nothing */
 #define dprintf(...) /* nothing */



From nichtsnutz at berlios.de  Sat Mar 25 01:51:26 2006
From: nichtsnutz at berlios.de (nichtsnutz at BerliOS)
Date: Sat, 25 Mar 2006 01:51:26 +0100
Subject: [S3d-svn] r227 - trunk/apps/olsrs3d
Message-ID: <200603250051.k2P0pQYb021969@sheep.berlios.de>

Author: nichtsnutz
Date: 2006-03-25 01:51:16 +0100 (Sat, 25 Mar 2006)
New Revision: 227

Modified:
   trunk/apps/olsrs3d/process.c
Log:
fix sqare etx

Modified: trunk/apps/olsrs3d/process.c
===================================================================
--- trunk/apps/olsrs3d/process.c	2006-03-24 20:11:42 UTC (rev 226)
+++ trunk/apps/olsrs3d/process.c	2006-03-25 00:51:16 UTC (rev 227)
@@ -57,13 +57,13 @@
 		/* connection already exists */
 		if ( ( strncmp( (*olsr_con)->left_olsr_node->ip, con_from->ip, NAMEMAX ) == 0 ) && ( strncmp( (*olsr_con)->right_olsr_node->ip, con_to->ip, NAMEMAX ) == 0 ) ) {
 			(*olsr_con)->left_etx = etx;
-			(*olsr_con)->left_etx_sqrt = sqrt( etx );
+			(*olsr_con)->left_etx_sqrt = (etx==-1000.00)? 10.0 : sqrt( etx ) ;
 			break;
 
 		} else if ( ( strncmp( (*olsr_con)->right_olsr_node->ip, con_from->ip, NAMEMAX ) == 0 ) && ( strncmp( (*olsr_con)->left_olsr_node->ip, con_to->ip, NAMEMAX ) == 0 ) ) {
 
 			(*olsr_con)->right_etx = etx;
-			(*olsr_con)->right_etx_sqrt = sqrt( etx );
+			(*olsr_con)->right_etx_sqrt = (etx==-1000.00)? 10.0 : sqrt( etx ) ;
 			break;
 
 		}



From nichtsnutz at berlios.de  Sat Mar 25 04:25:11 2006
From: nichtsnutz at berlios.de (nichtsnutz at BerliOS)
Date: Sat, 25 Mar 2006 04:25:11 +0100
Subject: [S3d-svn] r228 - trunk/apps/olsrs3d
Message-ID: <200603250325.k2P3PBLC032235@sheep.berlios.de>

Author: nichtsnutz
Date: 2006-03-25 04:25:01 +0100 (Sat, 25 Mar 2006)
New Revision: 228

Modified:
   trunk/apps/olsrs3d/main.c
   trunk/apps/olsrs3d/olsrs3d.h
   trunk/apps/olsrs3d/process.c
Log:
realtime etx output when node clicked
add close button

Modified: trunk/apps/olsrs3d/main.c
===================================================================
--- trunk/apps/olsrs3d/main.c	2006-03-25 00:51:16 UTC (rev 227)
+++ trunk/apps/olsrs3d/main.c	2006-03-25 03:25:01 UTC (rev 228)
@@ -49,6 +49,7 @@
 int Olsr_node_count = 0, Last_olsr_node_count = -1;
 int Olsr_node_count_obj = -1;
 int Olsr_ip_label_obj = -1;
+
 int *Olsr_neighbour_label_obj = NULL;
 int Size;
 
@@ -68,7 +69,9 @@
 int RotateSwitch = 0;
 int RotateSpeed = 2;
 float Factor = 0.5;	/* Factor in calc_olsr_node_mov */
-
+struct olsr_node *Olsr_node_pEtx;
+int Btn_close_id = -1;
+int Btn_close_obj;
 /***
  *
  * print usage info
@@ -658,6 +661,11 @@
 		}
 	}
 
+	if( Olsr_ip_label_obj != -1 )
+	{
+		print_etx();
+	}
+
 	if(RotateSwitch) {
 		Zp_rotate = (Zp_rotate+RotateSpeed)%360;
 		s3d_rotate(ZeroPoint,0,Zp_rotate,0);
@@ -694,9 +702,6 @@
 		case S3DK_ESCAPE: /* esc -> close olsr */
 			stop();
 			break;
-		case 15: /* strg + o */
-			lst_out(); /* output ob2ip list */
-			break;
 		case 'c': /* c -> color on/off */
 			if(ColorSwitch) ColorSwitch = 0;
 			else ColorSwitch = 1;
@@ -736,6 +741,14 @@
 	}
 }
 
+/*
+void mbutton_click(struct s3d_but_info *event)
+{
+	printf("%s",event->state);
+}
+*/
+
+
 /***
  *
  * eventhandler when object clicked
@@ -747,15 +760,35 @@
 	int oid;
 	/* float distance,tmp_vector[3]; */
 	char ip_str[50];
-	struct olsr_node *olsr_node;
 	float ln;
-	struct olsr_neigh_list *tmpNeighbour;
-	float p = 1.0;
-	int i;
 
 	oid=(int)*((unsigned long *)evt->buf);
-	olsr_node = *lst_search(oid);
 
+	if( oid == Btn_close_id )
+	{
+		int i;
+		s3d_del_object(Btn_close_id);
+		s3d_del_object(Olsr_ip_label_obj);
+		Btn_close_id = Olsr_ip_label_obj = -1;
+		for(i=0; i < Size; i++)
+			s3d_del_object( Olsr_neighbour_label_obj[i] );
+		free(Olsr_neighbour_label_obj);
+		Olsr_neighbour_label_obj = NULL;
+		return;
+	}
+	
+	Olsr_node_pEtx = *lst_search(oid);
+		
+	if( Btn_close_id == -1)
+	{
+		Btn_close_id = s3d_clone( Btn_close_obj );
+		s3d_link(Btn_close_id,0);
+		s3d_flags_on(Btn_close_id,S3D_OF_VISIBLE|S3D_OF_SELECTABLE);
+		s3d_scale( Btn_close_id, 0.1 );
+		s3d_translate( Btn_close_id,-Left*3.0-0.2, -Bottom*3.0-0.5, -3.0 );
+		
+	}
+	
 	/*
 	distance = dirt(CamPosition[0],olsr_node->pos_vec,tmp_vector);
 	mov_add(ZeroPosition,tmp_vector,1.0);
@@ -764,16 +797,16 @@
 
 	/* print clicked object ip and connections */
 	if ( Olsr_ip_label_obj != -1 ) s3d_del_object( Olsr_ip_label_obj );
-	snprintf( ip_str, 35, "ip: %s", olsr_node->ip );
+	snprintf( ip_str, 35, "ip: %s", Olsr_node_pEtx->ip );
 	Olsr_ip_label_obj = s3d_draw_string( ip_str, &ln );
 	s3d_link( Olsr_ip_label_obj, 0 );
 	s3d_flags_on( Olsr_ip_label_obj, S3D_OF_VISIBLE );
 	s3d_scale( Olsr_ip_label_obj, 0.2 );
 	s3d_translate( Olsr_ip_label_obj,-Left*3.0-(ln * 0.2), -Bottom*3.0-0.8, -3.0 );
-
+	
+	/*
 	if( Olsr_neighbour_label_obj != NULL )
 	{
-		/* int n = sizeof(Olsr_neighbour_label_obj) / sizeof(int);*/
 		for(i=0; i < Size; i++)
 		{
 			printf("remove %d\n",Olsr_neighbour_label_obj[i]);
@@ -811,8 +844,56 @@
 		p += 0.2;
 		printf("create %d\n",Olsr_neighbour_label_obj[i]);
 	}
+	*/
 }
 
+void print_etx()
+{
+	struct olsr_neigh_list *tmpNeighbour;
+	float p = 1.0;
+	int i;
+	if( Olsr_neighbour_label_obj != NULL )
+	{
+		/* int n = sizeof(Olsr_neighbour_label_obj) / sizeof(int);*/
+		for(i=0; i < Size; i++)
+			s3d_del_object( Olsr_neighbour_label_obj[i] );
+		free(Olsr_neighbour_label_obj);
+		Olsr_neighbour_label_obj = NULL;
+	}
+
+	tmpNeighbour = Olsr_node_pEtx->olsr_neigh_list;
+
+	Size = 0;
+	while(tmpNeighbour != NULL)
+	{
+		Size++;
+		tmpNeighbour = tmpNeighbour->next_olsr_neigh_list;
+	}
+
+	Olsr_neighbour_label_obj = malloc(Size*sizeof(int));
+	tmpNeighbour = Olsr_node_pEtx->olsr_neigh_list;
+
+	for(i = 0; i < Size ;i++)
+	{
+		char nIpStr[60];
+		float len;
+		float mEtx = ( tmpNeighbour->olsr_con->left_etx + tmpNeighbour->olsr_con->right_etx ) / 2;
+		if( mEtx != -1000 )
+			snprintf(nIpStr, 60, "%15s --> %4.2f",(strcmp(Olsr_node_pEtx->ip,tmpNeighbour->olsr_con->right_olsr_node->ip)?tmpNeighbour->olsr_con->right_olsr_node->ip:tmpNeighbour->olsr_con->left_olsr_node->ip),mEtx);
+		else
+			snprintf(nIpStr, 60, "%15s --> HNA",(strcmp(Olsr_node_pEtx->ip,tmpNeighbour->olsr_con->right_olsr_node->ip)?tmpNeighbour->olsr_con->right_olsr_node->ip:tmpNeighbour->olsr_con->left_olsr_node->ip));
+		Olsr_neighbour_label_obj[i] = s3d_draw_string( nIpStr, &len );
+		s3d_link(Olsr_neighbour_label_obj[i], 0);
+		s3d_flags_on(Olsr_neighbour_label_obj[i], S3D_OF_VISIBLE );
+		s3d_scale(Olsr_neighbour_label_obj[i], 0.2 );
+		s3d_translate(Olsr_neighbour_label_obj[i], -Left*3.0-(len * 0.2), -Bottom*3.0-p, -3.0 );
+		tmpNeighbour = tmpNeighbour->next_olsr_neigh_list;
+		p += 0.2;
+	}
+}
+
+
+
 /***
  *
  * eventhandler when object change by user
@@ -898,11 +979,13 @@
 			s3d_set_callback(S3D_EVENT_OBJ_CLICK,object_click);
 			s3d_set_callback(S3D_EVENT_KEY,keypress);
 			s3d_set_callback(S3D_EVENT_QUIT,stop);
+			/* s3d_set_callback(S3D_EVENT_MBUTTON,mbutton_click); */
 			if (s3d_select_font("vera"))
 				printf("font not found\n");
 			Olsr_node_obj = s3d_import_3ds_file( "objs/accesspoint.3ds" );
 			Olsr_node_inet_obj = s3d_import_3ds_file( "objs/accesspoint_inet.3ds" );
 			Olsr_node_hna_net = s3d_import_3ds_file( "objs/internet.3ds" );
+			Btn_close_obj = s3d_import_3ds_file("objs/btn_close.3ds");
 			ZeroPoint = s3d_new_object();
 			s3d_mainloop(mainloop);
 			s3d_quit();

Modified: trunk/apps/olsrs3d/olsrs3d.h
===================================================================
--- trunk/apps/olsrs3d/olsrs3d.h	2006-03-25 00:51:16 UTC (rev 227)
+++ trunk/apps/olsrs3d/olsrs3d.h	2006-03-25 03:25:01 UTC (rev 228)
@@ -96,6 +96,8 @@
 extern int	Olsr_node_obj;
 extern int	Olsr_node_inet_obj;
 extern int	Olsr_node_hna_net;
+extern int	Btn_close_obj;
+extern int	Btn_close_id;
 
 extern int Olsr_node_count_obj;
 extern int Olsr_node_count;
@@ -123,4 +125,4 @@
 /* main */
 void out_of_mem( void );
 struct olsr_node **lst_search(int id);
-
+void print_etx( void );

Modified: trunk/apps/olsrs3d/process.c
===================================================================
--- trunk/apps/olsrs3d/process.c	2006-03-25 00:51:16 UTC (rev 227)
+++ trunk/apps/olsrs3d/process.c	2006-03-25 03:25:01 UTC (rev 228)
@@ -170,7 +170,7 @@
 		/* we found the node */
 		if ( result == 0 ) {
 
-			(*olsr_node)->last_seen = 100;
+			(*olsr_node)->last_seen = 150;
 
 			/* former invisble (deleted) node */
 			if ( (*olsr_node)->visible == 0 ) {
@@ -215,7 +215,7 @@
 		(*olsr_node)->node_type = 0;
 		(*olsr_node)->node_type_modified = 1;
 
-		(*olsr_node)->last_seen = 100;
+		(*olsr_node)->last_seen = 150;
 		(*olsr_node)->visible = 1;
 
 		if ( Debug ) printf( "new olsr node: %s\n", (*olsr_node)->ip );



From nichtsnutz at berlios.de  Sat Mar 25 13:21:24 2006
From: nichtsnutz at berlios.de (nichtsnutz at BerliOS)
Date: Sat, 25 Mar 2006 13:21:24 +0100
Subject: [S3d-svn] r229 - trunk/apps/olsrs3d
Message-ID: <200603251221.k2PCLOnE023422@sheep.berlios.de>

Author: nichtsnutz
Date: 2006-03-25 13:21:22 +0100 (Sat, 25 Mar 2006)
New Revision: 229

Modified:
   trunk/apps/olsrs3d/main.c
Log:
change side of olsr_count output

Modified: trunk/apps/olsrs3d/main.c
===================================================================
--- trunk/apps/olsrs3d/main.c	2006-03-25 03:25:01 UTC (rev 228)
+++ trunk/apps/olsrs3d/main.c	2006-03-25 12:21:22 UTC (rev 229)
@@ -627,7 +627,8 @@
 
 	int net_result;   /* result of function net_main */
 	char nc_str[20];
-
+	float strLen;
+	
 	/* calculate new movement vector */
 	calc_olsr_node_mov();
 
@@ -642,11 +643,11 @@
 
 		if ( Olsr_node_count_obj != -1 ) s3d_del_object( Olsr_node_count_obj );
 		snprintf( nc_str, 20, "node count: %d", Olsr_node_count );
-		Olsr_node_count_obj = s3d_draw_string( nc_str, NULL );
+		Olsr_node_count_obj = s3d_draw_string( nc_str, &strLen );
 		s3d_link( Olsr_node_count_obj, 0 );
 		s3d_flags_on( Olsr_node_count_obj, S3D_OF_VISIBLE );
 		s3d_scale( Olsr_node_count_obj, 0.2 );
-		s3d_translate( Olsr_node_count_obj, Left*3.0, -Bottom*3.0-0.2, -3.0 );
+		s3d_translate( Olsr_node_count_obj, -Left*3.0-(strLen * 0.2), -Bottom*3.0-0.5, -3.0 );
 
 		Last_olsr_node_count = Olsr_node_count;
 
@@ -784,8 +785,8 @@
 		Btn_close_id = s3d_clone( Btn_close_obj );
 		s3d_link(Btn_close_id,0);
 		s3d_flags_on(Btn_close_id,S3D_OF_VISIBLE|S3D_OF_SELECTABLE);
-		s3d_scale( Btn_close_id, 0.1 );
-		s3d_translate( Btn_close_id,-Left*3.0-0.2, -Bottom*3.0-0.5, -3.0 );
+		s3d_scale( Btn_close_id, 0.05 );
+		s3d_translate( Btn_close_id,-Left*3.0-0.1, -Bottom*3.0-0.7, -3.0 );
 		
 	}
 	
@@ -802,7 +803,7 @@
 	s3d_link( Olsr_ip_label_obj, 0 );
 	s3d_flags_on( Olsr_ip_label_obj, S3D_OF_VISIBLE );
 	s3d_scale( Olsr_ip_label_obj, 0.2 );
-	s3d_translate( Olsr_ip_label_obj,-Left*3.0-(ln * 0.2), -Bottom*3.0-0.8, -3.0 );
+	s3d_translate( Olsr_ip_label_obj,-Left*3.0-(ln * 0.2), -Bottom*3.0-0.9, -3.0 );
 	
 	/*
 	if( Olsr_neighbour_label_obj != NULL )
@@ -850,7 +851,7 @@
 void print_etx()
 {
 	struct olsr_neigh_list *tmpNeighbour;
-	float p = 1.0;
+	float p = 1.1;
 	int i;
 	if( Olsr_neighbour_label_obj != NULL )
 	{



From nichtsnutz at berlios.de  Sat Mar 25 15:22:41 2006
From: nichtsnutz at berlios.de (nichtsnutz at BerliOS)
Date: Sat, 25 Mar 2006 15:22:41 +0100
Subject: [S3d-svn] r230 - trunk/apps/olsrs3d
Message-ID: <200603251422.k2PEMffA011017@sheep.berlios.de>

Author: nichtsnutz
Date: 2006-03-25 15:22:21 +0100 (Sat, 25 Mar 2006)
New Revision: 230

Modified:
   trunk/apps/olsrs3d/main.c
   trunk/apps/olsrs3d/process.c
Log:
fix rotate nodes

Modified: trunk/apps/olsrs3d/main.c
===================================================================
--- trunk/apps/olsrs3d/main.c	2006-03-25 12:21:22 UTC (rev 229)
+++ trunk/apps/olsrs3d/main.c	2006-03-25 14:22:21 UTC (rev 230)
@@ -62,6 +62,7 @@
 float Left = -1.0;
 
 float CamPosition[2][3];   /* CamPosition[trans|rot][x-z] */
+float CamPosition2[2][3];   /* CamPosition[trans|rot][x-z] */
 float ZeroPosition[3] = {0,0,0};   /* current position zero position */
 int ZeroPoint;   /* object zeropoint */
 int Zp_rotate = 0;
@@ -332,9 +333,9 @@
 
 
 		/* rotate node description so that they are always readable */
-		tmp_mov_vec[0] = CamPosition[0][0] - olsr_node->pos_vec[0];
+		tmp_mov_vec[0] = CamPosition2[0][0] - olsr_node->pos_vec[0];
 		tmp_mov_vec[1] = 0;   /* we are not interested in the y value */
-		tmp_mov_vec[2] = CamPosition[0][2] - olsr_node->pos_vec[2];
+		tmp_mov_vec[2] = CamPosition2[0][2] - olsr_node->pos_vec[2];
 
 		angle = s3d_vector_angle( desc_norm_vec, tmp_mov_vec );
 
@@ -671,7 +672,11 @@
 		Zp_rotate = (Zp_rotate+RotateSpeed)%360;
 		s3d_rotate(ZeroPoint,0,Zp_rotate,0);
 	}
+	CamPosition2[0][0]=  CamPosition[0][0]*cos(Zp_rotate*M_PI/180.0) - CamPosition[0][2] * sin (Zp_rotate*M_PI/180.0);
+	CamPosition2[0][1]=  CamPosition[0][1];
+	CamPosition2[0][2]=  CamPosition[0][0]*sin(Zp_rotate*M_PI/180.0) + CamPosition[0][2] * cos (Zp_rotate*M_PI/180.0);
 
+
 	nanosleep( &sleep_time, NULL );
 
 	return;

Modified: trunk/apps/olsrs3d/process.c
===================================================================
--- trunk/apps/olsrs3d/process.c	2006-03-25 12:21:22 UTC (rev 229)
+++ trunk/apps/olsrs3d/process.c	2006-03-25 14:22:21 UTC (rev 230)
@@ -376,7 +376,7 @@
 
 	int dn;
 	float f;
-	char *lbuf_ptr, *last_cr_ptr, *con_from, *con_from_end, *con_to, *con_to_end, *etx, *etx_end;
+	char *lbuf_ptr, *last_cr_ptr, *con_from, *con_from_end, *con_to, *con_to_end, *etx, *etx_end, *tmpChar;
 	struct olsr_node *olsr_node1;   /* pointer to olsr nodes */
 	struct olsr_node *olsr_node2;
 
@@ -448,7 +448,13 @@
 
 					/* normal HNA */
 					} else {
-
+						/*
+						if( (tmpChar = strchr((char*)con_to, (int)'/')))
+						{
+							tmpChar++;
+							printf("%s\n",tmpChar);
+						}
+						*/
 						olsr_node1 = get_olsr_node( &Olsr_root, con_from );
 						olsr_node2 = get_olsr_node( &Olsr_root, con_to );
 



From dotslash at berlios.de  Sat Mar 25 16:35:50 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Sat, 25 Mar 2006 16:35:50 +0100
Subject: [S3d-svn] r231 - in trunk: . apps/dot_mcp example
Message-ID: <200603251535.k2PFZoSh027454@sheep.berlios.de>

Author: dotslash
Date: 2006-03-25 16:35:49 +0100 (Sat, 25 Mar 2006)
New Revision: 231

Modified:
   trunk/apps/dot_mcp/menu.c
   trunk/config.guess
   trunk/config.sub
   trunk/example/filebrowser.c
Log:
- filebrowser -> menu.c in dot_mcp
- filebrowser loading movies (mplayer) and 3d-objects (3dsloader)

Modified: trunk/apps/dot_mcp/menu.c
===================================================================
--- trunk/apps/dot_mcp/menu.c	2006-03-25 14:22:21 UTC (rev 230)
+++ trunk/apps/dot_mcp/menu.c	2006-03-25 15:35:49 UTC (rev 231)
@@ -39,6 +39,7 @@
 		{"objs/comp.3ds","terminal","s3dvt",				0,0},
 		{"objs/comp.3ds","olsrs3d","olsrs3d",				0,0},
 		{"objs/comp.3ds","s3d_x11gate","s3d_x11gate",		0,0},
+		{"objs/comp.3ds","filebrowser","filebrowser",		0,0}, 
 		{"objs/comp.3ds","logout","LOGOUT",					0,0}, 
 };
 void menu_click(int oid)

Modified: trunk/config.guess
===================================================================
--- trunk/config.guess	2006-03-25 14:22:21 UTC (rev 230)
+++ trunk/config.guess	2006-03-25 15:35:49 UTC (rev 231)
@@ -1,9 +1,9 @@
 #! /bin/sh
 # Attempt to guess a canonical system name.
 #   Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999,
-#   2000, 2001, 2002, 2003 Free Software Foundation, Inc.
+#   2000, 2001, 2002, 2003, 2004, 2005 Free Software Foundation, Inc.
 
-timestamp='2003-07-02'
+timestamp='2006-02-23'
 
 # This file is free software; you can redistribute it and/or modify it
 # under the terms of the GNU General Public License as published by
@@ -17,13 +17,15 @@
 #
 # You should have received a copy of the GNU General Public License
 # along with this program; if not, write to the Free Software
-# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
+# Foundation, Inc., 51 Franklin Street - Fifth Floor, Boston, MA
+# 02110-1301, USA.
 #
 # As a special exception to the GNU General Public License, if you
 # distribute this file as part of a program that contains a
 # configuration script generated by Autoconf, you may include it under
 # the same distribution terms that you use for the rest of that program.
 
+
 # Originally written by Per Bothner <per at bothner.com>.
 # Please send patches to <config-patches at gnu.org>.  Submit a context
 # diff and a properly formatted ChangeLog entry.
@@ -53,7 +55,7 @@
 GNU config.guess ($timestamp)
 
 Originally written by Per Bothner.
-Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001
+Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005
 Free Software Foundation, Inc.
 
 This is free software; see the source for copying conditions.  There is NO
@@ -66,11 +68,11 @@
 while test $# -gt 0 ; do
   case $1 in
     --time-stamp | --time* | -t )
-       echo "$timestamp" ; exit 0 ;;
+       echo "$timestamp" ; exit ;;
     --version | -v )
-       echo "$version" ; exit 0 ;;
+       echo "$version" ; exit ;;
     --help | --h* | -h )
-       echo "$usage"; exit 0 ;;
+       echo "$usage"; exit ;;
     -- )     # Stop option processing
        shift; break ;;
     - )	# Use stdin as input.
@@ -104,7 +106,7 @@
 trap "exitcode=\$?; (rm -f \$tmpfiles 2>/dev/null; rmdir \$tmp 2>/dev/null) && exit \$exitcode" 0 ;
 trap "rm -f \$tmpfiles 2>/dev/null; rmdir \$tmp 2>/dev/null; exit 1" 1 2 13 15 ;
 : ${TMPDIR=/tmp} ;
- { tmp=`(umask 077 && mktemp -d -q "$TMPDIR/cgXXXXXX") 2>/dev/null` && test -n "$tmp" && test -d "$tmp" ; } ||
+ { tmp=`(umask 077 && mktemp -d "$TMPDIR/cgXXXXXX") 2>/dev/null` && test -n "$tmp" && test -d "$tmp" ; } ||
  { test -n "$RANDOM" && tmp=$TMPDIR/cg$$-$RANDOM && (umask 077 && mkdir $tmp) ; } ||
  { tmp=$TMPDIR/cg-$$ && (umask 077 && mkdir $tmp) && echo "Warning: creating insecure temp directory" >&2 ; } ||
  { echo "$me: cannot create a temporary directory in $TMPDIR" >&2 ; exit 1 ; } ;
@@ -123,7 +125,7 @@
 	;;
  ,,*)   CC_FOR_BUILD=$CC ;;
  ,*,*)  CC_FOR_BUILD=$HOST_CC ;;
-esac ;'
+esac ; set_cc_for_build= ;'
 
 # This is needed to find uname on a Pyramid OSx when run in the BSD universe.
 # (ghazi at noc.rutgers.edu 1994-08-24)
@@ -196,50 +198,32 @@
 	# contains redundant information, the shorter form:
 	# CPU_TYPE-MANUFACTURER-OPERATING_SYSTEM is used.
 	echo "${machine}-${os}${release}"
-	exit 0 ;;
-    amiga:OpenBSD:*:*)
-	echo m68k-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    arc:OpenBSD:*:*)
-	echo mipsel-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    hp300:OpenBSD:*:*)
-	echo m68k-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    mac68k:OpenBSD:*:*)
-	echo m68k-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    macppc:OpenBSD:*:*)
-	echo powerpc-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    mvme68k:OpenBSD:*:*)
-	echo m68k-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    mvme88k:OpenBSD:*:*)
-	echo m88k-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    mvmeppc:OpenBSD:*:*)
-	echo powerpc-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    pmax:OpenBSD:*:*)
-	echo mipsel-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    sgi:OpenBSD:*:*)
-	echo mipseb-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    sun3:OpenBSD:*:*)
-	echo m68k-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
-    wgrisc:OpenBSD:*:*)
-	echo mipsel-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     *:OpenBSD:*:*)
-	echo ${UNAME_MACHINE}-unknown-openbsd${UNAME_RELEASE}
-	exit 0 ;;
+	UNAME_MACHINE_ARCH=`arch | sed 's/OpenBSD.//'`
+	echo ${UNAME_MACHINE_ARCH}-unknown-openbsd${UNAME_RELEASE}
+	exit ;;
+    *:ekkoBSD:*:*)
+	echo ${UNAME_MACHINE}-unknown-ekkobsd${UNAME_RELEASE}
+	exit ;;
+    *:SolidBSD:*:*)
+	echo ${UNAME_MACHINE}-unknown-solidbsd${UNAME_RELEASE}
+	exit ;;
+    macppc:MirBSD:*:*)
+	echo powerppc-unknown-mirbsd${UNAME_RELEASE}
+	exit ;;
+    *:MirBSD:*:*)
+	echo ${UNAME_MACHINE}-unknown-mirbsd${UNAME_RELEASE}
+	exit ;;
     alpha:OSF1:*:*)
-	if test $UNAME_RELEASE = "V4.0"; then
+	case $UNAME_RELEASE in
+	*4.0)
 		UNAME_RELEASE=`/usr/sbin/sizer -v | awk '{print $3}'`
-	fi
+		;;
+	*5.*)
+	        UNAME_RELEASE=`/usr/sbin/sizer -v | awk '{print $4}'`
+		;;
+	esac
 	# According to Compaq, /usr/sbin/psrinfo has been available on
 	# OSF/1 and Tru64 systems produced since 1995.  I hope that
 	# covers most systems running today.  This code pipes the CPU
@@ -277,42 +261,49 @@
 	    "EV7.9 (21364A)")
 		UNAME_MACHINE="alphaev79" ;;
 	esac
+	# A Pn.n version is a patched version.
 	# A Vn.n version is a released version.
 	# A Tn.n version is a released field test version.
 	# A Xn.n version is an unreleased experimental baselevel.
 	# 1.2 uses "1.2" for uname -r.
-	echo ${UNAME_MACHINE}-dec-osf`echo ${UNAME_RELEASE} | sed -e 's/^[VTX]//' | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz'`
-	exit 0 ;;
-    Alpha*:OpenVMS:*:*)
-	echo alpha-hp-vms
-	exit 0 ;;
+	echo ${UNAME_MACHINE}-dec-osf`echo ${UNAME_RELEASE} | sed -e 's/^[PVTX]//' | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz'`
+	exit ;;
     Alpha\ *:Windows_NT*:*)
 	# How do we know it's Interix rather than the generic POSIX subsystem?
 	# Should we change UNAME_MACHINE based on the output of uname instead
 	# of the specific Alpha model?
 	echo alpha-pc-interix
-	exit 0 ;;
+	exit ;;
     21064:Windows_NT:50:3)
 	echo alpha-dec-winnt3.5
-	exit 0 ;;
+	exit ;;
     Amiga*:UNIX_System_V:4.0:*)
 	echo m68k-unknown-sysv4
-	exit 0;;
+	exit ;;
     *:[Aa]miga[Oo][Ss]:*:*)
 	echo ${UNAME_MACHINE}-unknown-amigaos
-	exit 0 ;;
+	exit ;;
     *:[Mm]orph[Oo][Ss]:*:*)
 	echo ${UNAME_MACHINE}-unknown-morphos
-	exit 0 ;;
+	exit ;;
     *:OS/390:*:*)
 	echo i370-ibm-openedition
-	exit 0 ;;
+	exit ;;
+    *:z/VM:*:*)
+	echo s390-ibm-zvmoe
+	exit ;;
+    *:OS400:*:*)
+        echo powerpc-ibm-os400
+	exit ;;
     arm:RISC*:1.[012]*:*|arm:riscix:1.[012]*:*)
 	echo arm-acorn-riscix${UNAME_RELEASE}
-	exit 0;;
+	exit ;;
+    arm:riscos:*:*|arm:RISCOS:*:*)
+	echo arm-unknown-riscos
+	exit ;;
     SR2?01:HI-UX/MPP:*:* | SR8000:HI-UX/MPP:*:*)
 	echo hppa1.1-hitachi-hiuxmpp
-	exit 0;;
+	exit ;;
     Pyramid*:OSx*:*:* | MIS*:OSx*:*:* | MIS*:SMP_DC-OSx*:*:*)
 	# akee at wpdis03.wpafb.af.mil (Earle F. Ake) contributed MIS and NILE.
 	if test "`(/bin/universe) 2>/dev/null`" = att ; then
@@ -320,32 +311,32 @@
 	else
 		echo pyramid-pyramid-bsd
 	fi
-	exit 0 ;;
+	exit ;;
     NILE*:*:*:dcosx)
 	echo pyramid-pyramid-svr4
-	exit 0 ;;
+	exit ;;
     DRS?6000:unix:4.0:6*)
 	echo sparc-icl-nx6
-	exit 0 ;;
-    DRS?6000:UNIX_SV:4.2*:7*)
+	exit ;;
+    DRS?6000:UNIX_SV:4.2*:7* | DRS?6000:isis:4.2*:7*)
 	case `/usr/bin/uname -p` in
-	    sparc) echo sparc-icl-nx7 && exit 0 ;;
+	    sparc) echo sparc-icl-nx7; exit ;;
 	esac ;;
     sun4H:SunOS:5.*:*)
 	echo sparc-hal-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
-	exit 0 ;;
+	exit ;;
     sun4*:SunOS:5.*:* | tadpole*:SunOS:5.*:*)
 	echo sparc-sun-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
-	exit 0 ;;
+	exit ;;
     i86pc:SunOS:5.*:*)
 	echo i386-pc-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
-	exit 0 ;;
+	exit ;;
     sun4*:SunOS:6*:*)
 	# According to config.sub, this is the proper way to canonicalize
 	# SunOS6.  Hard to guess exactly what SunOS6 will be like, but
 	# it's likely to be more like Solaris than SunOS4.
 	echo sparc-sun-solaris3`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
-	exit 0 ;;
+	exit ;;
     sun4*:SunOS:*:*)
 	case "`/usr/bin/arch -k`" in
 	    Series*|S4*)
@@ -354,10 +345,10 @@
 	esac
 	# Japanese Language versions have a version number like `4.1.3-JL'.
 	echo sparc-sun-sunos`echo ${UNAME_RELEASE}|sed -e 's/-/_/'`
-	exit 0 ;;
+	exit ;;
     sun3*:SunOS:*:*)
 	echo m68k-sun-sunos${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     sun*:*:4.2BSD:*)
 	UNAME_RELEASE=`(sed 1q /etc/motd | awk '{print substr($5,1,3)}') 2>/dev/null`
 	test "x${UNAME_RELEASE}" = "x" && UNAME_RELEASE=3
@@ -369,10 +360,10 @@
 		echo sparc-sun-sunos${UNAME_RELEASE}
 		;;
 	esac
-	exit 0 ;;
+	exit ;;
     aushp:SunOS:*:*)
 	echo sparc-auspex-sunos${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     # The situation for MiNT is a little confusing.  The machine name
     # can be virtually everything (everything which is not
     # "atarist" or "atariste" at least should have a processor
@@ -383,37 +374,40 @@
     # be no problem.
     atarist[e]:*MiNT:*:* | atarist[e]:*mint:*:* | atarist[e]:*TOS:*:*)
         echo m68k-atari-mint${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     atari*:*MiNT:*:* | atari*:*mint:*:* | atarist[e]:*TOS:*:*)
 	echo m68k-atari-mint${UNAME_RELEASE}
-        exit 0 ;;
+        exit ;;
     *falcon*:*MiNT:*:* | *falcon*:*mint:*:* | *falcon*:*TOS:*:*)
         echo m68k-atari-mint${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     milan*:*MiNT:*:* | milan*:*mint:*:* | *milan*:*TOS:*:*)
         echo m68k-milan-mint${UNAME_RELEASE}
-        exit 0 ;;
+        exit ;;
     hades*:*MiNT:*:* | hades*:*mint:*:* | *hades*:*TOS:*:*)
         echo m68k-hades-mint${UNAME_RELEASE}
-        exit 0 ;;
+        exit ;;
     *:*MiNT:*:* | *:*mint:*:* | *:*TOS:*:*)
         echo m68k-unknown-mint${UNAME_RELEASE}
-        exit 0 ;;
+        exit ;;
+    m68k:machten:*:*)
+	echo m68k-apple-machten${UNAME_RELEASE}
+	exit ;;
     powerpc:machten:*:*)
 	echo powerpc-apple-machten${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     RISC*:Mach:*:*)
 	echo mips-dec-mach_bsd4.3
-	exit 0 ;;
+	exit ;;
     RISC*:ULTRIX:*:*)
 	echo mips-dec-ultrix${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     VAX*:ULTRIX*:*:*)
 	echo vax-dec-ultrix${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     2020:CLIX:*:* | 2430:CLIX:*:*)
 	echo clipper-intergraph-clix${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     mips:*:*:UMIPS | mips:*:*:RISCos)
 	eval $set_cc_for_build
 	sed 's/^	//' << EOF >$dummy.c
@@ -437,32 +431,33 @@
 	  exit (-1);
 	}
 EOF
-	$CC_FOR_BUILD -o $dummy $dummy.c \
-	  && $dummy `echo "${UNAME_RELEASE}" | sed -n 's/\([0-9]*\).*/\1/p'` \
-	  && exit 0
+	$CC_FOR_BUILD -o $dummy $dummy.c &&
+	  dummyarg=`echo "${UNAME_RELEASE}" | sed -n 's/\([0-9]*\).*/\1/p'` &&
+	  SYSTEM_NAME=`$dummy $dummyarg` &&
+	    { echo "$SYSTEM_NAME"; exit; }
 	echo mips-mips-riscos${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     Motorola:PowerMAX_OS:*:*)
 	echo powerpc-motorola-powermax
-	exit 0 ;;
+	exit ;;
     Motorola:*:4.3:PL8-*)
 	echo powerpc-harris-powermax
-	exit 0 ;;
+	exit ;;
     Night_Hawk:*:*:PowerMAX_OS | Synergy:PowerMAX_OS:*:*)
 	echo powerpc-harris-powermax
-	exit 0 ;;
+	exit ;;
     Night_Hawk:Power_UNIX:*:*)
 	echo powerpc-harris-powerunix
-	exit 0 ;;
+	exit ;;
     m88k:CX/UX:7*:*)
 	echo m88k-harris-cxux7
-	exit 0 ;;
+	exit ;;
     m88k:*:4*:R4*)
 	echo m88k-motorola-sysv4
-	exit 0 ;;
+	exit ;;
     m88k:*:3*:R3*)
 	echo m88k-motorola-sysv3
-	exit 0 ;;
+	exit ;;
     AViiON:dgux:*:*)
         # DG/UX returns AViiON for all architectures
         UNAME_PROCESSOR=`/usr/bin/uname -p`
@@ -478,29 +473,29 @@
 	else
 	    echo i586-dg-dgux${UNAME_RELEASE}
 	fi
- 	exit 0 ;;
+ 	exit ;;
     M88*:DolphinOS:*:*)	# DolphinOS (SVR3)
 	echo m88k-dolphin-sysv3
-	exit 0 ;;
+	exit ;;
     M88*:*:R3*:*)
 	# Delta 88k system running SVR3
 	echo m88k-motorola-sysv3
-	exit 0 ;;
+	exit ;;
     XD88*:*:*:*) # Tektronix XD88 system running UTekV (SVR3)
 	echo m88k-tektronix-sysv3
-	exit 0 ;;
+	exit ;;
     Tek43[0-9][0-9]:UTek:*:*) # Tektronix 4300 system running UTek (BSD)
 	echo m68k-tektronix-bsd
-	exit 0 ;;
+	exit ;;
     *:IRIX*:*:*)
 	echo mips-sgi-irix`echo ${UNAME_RELEASE}|sed -e 's/-/_/g'`
-	exit 0 ;;
+	exit ;;
     ????????:AIX?:[12].1:2)   # AIX 2.2.1 or AIX 2.1.1 is RT/PC AIX.
-	echo romp-ibm-aix      # uname -m gives an 8 hex-code CPU id
-	exit 0 ;;              # Note that: echo "'`uname -s`'" gives 'AIX '
+	echo romp-ibm-aix     # uname -m gives an 8 hex-code CPU id
+	exit ;;               # Note that: echo "'`uname -s`'" gives 'AIX '
     i*86:AIX:*:*)
 	echo i386-ibm-aix
-	exit 0 ;;
+	exit ;;
     ia64:AIX:*:*)
 	if [ -x /usr/bin/oslevel ] ; then
 		IBM_REV=`/usr/bin/oslevel`
@@ -508,7 +503,7 @@
 		IBM_REV=${UNAME_VERSION}.${UNAME_RELEASE}
 	fi
 	echo ${UNAME_MACHINE}-ibm-aix${IBM_REV}
-	exit 0 ;;
+	exit ;;
     *:AIX:2:3)
 	if grep bos325 /usr/include/stdio.h >/dev/null 2>&1; then
 		eval $set_cc_for_build
@@ -523,14 +518,18 @@
 			exit(0);
 			}
 EOF
-		$CC_FOR_BUILD -o $dummy $dummy.c && $dummy && exit 0
-		echo rs6000-ibm-aix3.2.5
+		if $CC_FOR_BUILD -o $dummy $dummy.c && SYSTEM_NAME=`$dummy`
+		then
+			echo "$SYSTEM_NAME"
+		else
+			echo rs6000-ibm-aix3.2.5
+		fi
 	elif grep bos324 /usr/include/stdio.h >/dev/null 2>&1; then
 		echo rs6000-ibm-aix3.2.4
 	else
 		echo rs6000-ibm-aix3.2
 	fi
-	exit 0 ;;
+	exit ;;
     *:AIX:*:[45])
 	IBM_CPU_ID=`/usr/sbin/lsdev -C -c processor -S available | sed 1q | awk '{ print $1 }'`
 	if /usr/sbin/lsattr -El ${IBM_CPU_ID} | grep ' POWER' >/dev/null 2>&1; then
@@ -544,28 +543,28 @@
 		IBM_REV=${UNAME_VERSION}.${UNAME_RELEASE}
 	fi
 	echo ${IBM_ARCH}-ibm-aix${IBM_REV}
-	exit 0 ;;
+	exit ;;
     *:AIX:*:*)
 	echo rs6000-ibm-aix
-	exit 0 ;;
+	exit ;;
     ibmrt:4.4BSD:*|romp-ibm:BSD:*)
 	echo romp-ibm-bsd4.4
-	exit 0 ;;
+	exit ;;
     ibmrt:*BSD:*|romp-ibm:BSD:*)            # covers RT/PC BSD and
 	echo romp-ibm-bsd${UNAME_RELEASE}   # 4.3 with uname added to
-	exit 0 ;;                           # report: romp-ibm BSD 4.3
+	exit ;;                             # report: romp-ibm BSD 4.3
     *:BOSX:*:*)
 	echo rs6000-bull-bosx
-	exit 0 ;;
+	exit ;;
     DPX/2?00:B.O.S.:*:*)
 	echo m68k-bull-sysv3
-	exit 0 ;;
+	exit ;;
     9000/[34]??:4.3bsd:1.*:*)
 	echo m68k-hp-bsd
-	exit 0 ;;
+	exit ;;
     hp300:4.4BSD:*:* | 9000/[34]??:4.3bsd:2.*:*)
 	echo m68k-hp-bsd4.4
-	exit 0 ;;
+	exit ;;
     9000/[34678]??:HP-UX:*:*)
 	HPUX_REV=`echo ${UNAME_RELEASE}|sed -e 's/[^.]*.[0B]*//'`
 	case "${UNAME_MACHINE}" in
@@ -627,9 +626,19 @@
 	esac
 	if [ ${HP_ARCH} = "hppa2.0w" ]
 	then
-	    # avoid double evaluation of $set_cc_for_build
-	    test -n "$CC_FOR_BUILD" || eval $set_cc_for_build
-	    if echo __LP64__ | (CCOPTS= $CC_FOR_BUILD -E -) | grep __LP64__ >/dev/null
+	    eval $set_cc_for_build
+
+	    # hppa2.0w-hp-hpux* has a 64-bit kernel and a compiler generating
+	    # 32-bit code.  hppa64-hp-hpux* has the same kernel and a compiler
+	    # generating 64-bit code.  GNU and HP use different nomenclature:
+	    #
+	    # $ CC_FOR_BUILD=cc ./config.guess
+	    # => hppa2.0w-hp-hpux11.23
+	    # $ CC_FOR_BUILD="cc +DA2.0w" ./config.guess
+	    # => hppa64-hp-hpux11.23
+
+	    if echo __LP64__ | (CCOPTS= $CC_FOR_BUILD -E - 2>/dev/null) |
+		grep __LP64__ >/dev/null
 	    then
 		HP_ARCH="hppa2.0w"
 	    else
@@ -637,11 +646,11 @@
 	    fi
 	fi
 	echo ${HP_ARCH}-hp-hpux${HPUX_REV}
-	exit 0 ;;
+	exit ;;
     ia64:HP-UX:*:*)
 	HPUX_REV=`echo ${UNAME_RELEASE}|sed -e 's/[^.]*.[0B]*//'`
 	echo ia64-hp-hpux${HPUX_REV}
-	exit 0 ;;
+	exit ;;
     3050*:HI-UX:*:*)
 	eval $set_cc_for_build
 	sed 's/^	//' << EOF >$dummy.c
@@ -669,153 +678,177 @@
 	  exit (0);
 	}
 EOF
-	$CC_FOR_BUILD -o $dummy $dummy.c && $dummy && exit 0
+	$CC_FOR_BUILD -o $dummy $dummy.c && SYSTEM_NAME=`$dummy` &&
+		{ echo "$SYSTEM_NAME"; exit; }
 	echo unknown-hitachi-hiuxwe2
-	exit 0 ;;
+	exit ;;
     9000/7??:4.3bsd:*:* | 9000/8?[79]:4.3bsd:*:* )
 	echo hppa1.1-hp-bsd
-	exit 0 ;;
+	exit ;;
     9000/8??:4.3bsd:*:*)
 	echo hppa1.0-hp-bsd
-	exit 0 ;;
+	exit ;;
     *9??*:MPE/iX:*:* | *3000*:MPE/iX:*:*)
 	echo hppa1.0-hp-mpeix
-	exit 0 ;;
+	exit ;;
     hp7??:OSF1:*:* | hp8?[79]:OSF1:*:* )
 	echo hppa1.1-hp-osf
-	exit 0 ;;
+	exit ;;
     hp8??:OSF1:*:*)
 	echo hppa1.0-hp-osf
-	exit 0 ;;
+	exit ;;
     i*86:OSF1:*:*)
 	if [ -x /usr/sbin/sysversion ] ; then
 	    echo ${UNAME_MACHINE}-unknown-osf1mk
 	else
 	    echo ${UNAME_MACHINE}-unknown-osf1
 	fi
-	exit 0 ;;
+	exit ;;
     parisc*:Lites*:*:*)
 	echo hppa1.1-hp-lites
-	exit 0 ;;
+	exit ;;
     C1*:ConvexOS:*:* | convex:ConvexOS:C1*:*)
 	echo c1-convex-bsd
-        exit 0 ;;
+        exit ;;
     C2*:ConvexOS:*:* | convex:ConvexOS:C2*:*)
 	if getsysinfo -f scalar_acc
 	then echo c32-convex-bsd
 	else echo c2-convex-bsd
 	fi
-        exit 0 ;;
+        exit ;;
     C34*:ConvexOS:*:* | convex:ConvexOS:C34*:*)
 	echo c34-convex-bsd
-        exit 0 ;;
+        exit ;;
     C38*:ConvexOS:*:* | convex:ConvexOS:C38*:*)
 	echo c38-convex-bsd
-        exit 0 ;;
+        exit ;;
     C4*:ConvexOS:*:* | convex:ConvexOS:C4*:*)
 	echo c4-convex-bsd
-        exit 0 ;;
+        exit ;;
     CRAY*Y-MP:*:*:*)
 	echo ymp-cray-unicos${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
-	exit 0 ;;
+	exit ;;
     CRAY*[A-Z]90:*:*:*)
 	echo ${UNAME_MACHINE}-cray-unicos${UNAME_RELEASE} \
 	| sed -e 's/CRAY.*\([A-Z]90\)/\1/' \
 	      -e y/ABCDEFGHIJKLMNOPQRSTUVWXYZ/abcdefghijklmnopqrstuvwxyz/ \
 	      -e 's/\.[^.]*$/.X/'
-	exit 0 ;;
+	exit ;;
     CRAY*TS:*:*:*)
 	echo t90-cray-unicos${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
-	exit 0 ;;
+	exit ;;
     CRAY*T3E:*:*:*)
 	echo alphaev5-cray-unicosmk${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
-	exit 0 ;;
+	exit ;;
     CRAY*SV1:*:*:*)
 	echo sv1-cray-unicos${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
-	exit 0 ;;
+	exit ;;
     *:UNICOS/mp:*:*)
-	echo nv1-cray-unicosmp${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/' 
-	exit 0 ;;
+	echo craynv-cray-unicosmp${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
+	exit ;;
     F30[01]:UNIX_System_V:*:* | F700:UNIX_System_V:*:*)
 	FUJITSU_PROC=`uname -m | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz'`
         FUJITSU_SYS=`uname -p | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz' | sed -e 's/\///'`
         FUJITSU_REL=`echo ${UNAME_RELEASE} | sed -e 's/ /_/'`
         echo "${FUJITSU_PROC}-fujitsu-${FUJITSU_SYS}${FUJITSU_REL}"
-        exit 0 ;;
+        exit ;;
+    5000:UNIX_System_V:4.*:*)
+        FUJITSU_SYS=`uname -p | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz' | sed -e 's/\///'`
+        FUJITSU_REL=`echo ${UNAME_RELEASE} | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz' | sed -e 's/ /_/'`
+        echo "sparc-fujitsu-${FUJITSU_SYS}${FUJITSU_REL}"
+	exit ;;
     i*86:BSD/386:*:* | i*86:BSD/OS:*:* | *:Ascend\ Embedded/OS:*:*)
 	echo ${UNAME_MACHINE}-pc-bsdi${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     sparc*:BSD/OS:*:*)
 	echo sparc-unknown-bsdi${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     *:BSD/OS:*:*)
 	echo ${UNAME_MACHINE}-unknown-bsdi${UNAME_RELEASE}
-	exit 0 ;;
-    *:FreeBSD:*:*|*:GNU/FreeBSD:*:*)
-	# Determine whether the default compiler uses glibc.
-	eval $set_cc_for_build
-	sed 's/^	//' << EOF >$dummy.c
-	#include <features.h>
-	#if __GLIBC__ >= 2
-	LIBC=gnu
-	#else
-	LIBC=
-	#endif
-EOF
-	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep ^LIBC=`
-	# GNU/FreeBSD systems have a "k" prefix to indicate we are using
-	# FreeBSD's kernel, but not the complete OS.
-	case ${LIBC} in gnu) kernel_only='k' ;; esac
-	echo ${UNAME_MACHINE}-unknown-${kernel_only}freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`${LIBC:+-$LIBC}
-	exit 0 ;;
+	exit ;;
+    *:FreeBSD:*:*)
+	case ${UNAME_MACHINE} in
+	    pc98)
+		echo i386-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'` ;;
+	    *)
+		echo ${UNAME_MACHINE}-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'` ;;
+	esac
+	exit ;;
     i*:CYGWIN*:*)
 	echo ${UNAME_MACHINE}-pc-cygwin
-	exit 0 ;;
+	exit ;;
     i*:MINGW*:*)
 	echo ${UNAME_MACHINE}-pc-mingw32
-	exit 0 ;;
+	exit ;;
+    i*:MSYS_NT-*:*:*)
+	echo ${UNAME_MACHINE}-pc-mingw32
+	exit ;;
+    i*:windows32*:*)
+    	# uname -m includes "-pc" on this system.
+    	echo ${UNAME_MACHINE}-mingw32
+	exit ;;
     i*:PW*:*)
 	echo ${UNAME_MACHINE}-pc-pw32
-	exit 0 ;;
-    x86:Interix*:[34]*)
-	echo i586-pc-interix${UNAME_RELEASE}|sed -e 's/\..*//'
-	exit 0 ;;
+	exit ;;
+    x86:Interix*:[345]*)
+	echo i586-pc-interix${UNAME_RELEASE}
+	exit ;;
+    EM64T:Interix*:[345]*)
+	echo x86_64-unknown-interix${UNAME_RELEASE}
+	exit ;;
     [345]86:Windows_95:* | [345]86:Windows_98:* | [345]86:Windows_NT:*)
 	echo i${UNAME_MACHINE}-pc-mks
-	exit 0 ;;
+	exit ;;
     i*:Windows_NT*:* | Pentium*:Windows_NT*:*)
 	# How do we know it's Interix rather than the generic POSIX subsystem?
 	# It also conflicts with pre-2.0 versions of AT&T UWIN. Should we
 	# UNAME_MACHINE based on the output of uname instead of i386?
 	echo i586-pc-interix
-	exit 0 ;;
+	exit ;;
     i*:UWIN*:*)
 	echo ${UNAME_MACHINE}-pc-uwin
-	exit 0 ;;
+	exit ;;
+    amd64:CYGWIN*:*:* | x86_64:CYGWIN*:*:*)
+	echo x86_64-unknown-cygwin
+	exit ;;
     p*:CYGWIN*:*)
 	echo powerpcle-unknown-cygwin
-	exit 0 ;;
+	exit ;;
     prep*:SunOS:5.*:*)
 	echo powerpcle-unknown-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
-	exit 0 ;;
+	exit ;;
     *:GNU:*:*)
+	# the GNU system
 	echo `echo ${UNAME_MACHINE}|sed -e 's,[-/].*$,,'`-unknown-gnu`echo ${UNAME_RELEASE}|sed -e 's,/.*$,,'`
-	exit 0 ;;
+	exit ;;
+    *:GNU/*:*:*)
+	# other systems with GNU libc and userland
+	echo ${UNAME_MACHINE}-unknown-`echo ${UNAME_SYSTEM} | sed 's,^[^/]*/,,' | tr '[A-Z]' '[a-z]'``echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`-gnu
+	exit ;;
     i*86:Minix:*:*)
 	echo ${UNAME_MACHINE}-pc-minix
-	exit 0 ;;
+	exit ;;
     arm*:Linux:*:*)
 	echo ${UNAME_MACHINE}-unknown-linux-gnu
-	exit 0 ;;
+	exit ;;
     cris:Linux:*:*)
 	echo cris-axis-linux-gnu
-	exit 0 ;;
+	exit ;;
+    crisv32:Linux:*:*)
+	echo crisv32-axis-linux-gnu
+	exit ;;
+    frv:Linux:*:*)
+    	echo frv-unknown-linux-gnu
+	exit ;;
     ia64:Linux:*:*)
 	echo ${UNAME_MACHINE}-unknown-linux-gnu
-	exit 0 ;;
+	exit ;;
+    m32r*:Linux:*:*)
+	echo ${UNAME_MACHINE}-unknown-linux-gnu
+	exit ;;
     m68*:Linux:*:*)
 	echo ${UNAME_MACHINE}-unknown-linux-gnu
-	exit 0 ;;
+	exit ;;
     mips:Linux:*:*)
 	eval $set_cc_for_build
 	sed 's/^	//' << EOF >$dummy.c
@@ -832,8 +865,12 @@
 	#endif
 	#endif
 EOF
-	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep ^CPU=`
-	test x"${CPU}" != x && echo "${CPU}-unknown-linux-gnu" && exit 0
+	eval "`$CC_FOR_BUILD -E $dummy.c 2>/dev/null | sed -n '
+	    /^CPU/{
+		s: ::g
+		p
+	    }'`"
+	test x"${CPU}" != x && { echo "${CPU}-unknown-linux-gnu"; exit; }
 	;;
     mips64:Linux:*:*)
 	eval $set_cc_for_build
@@ -851,15 +888,22 @@
 	#endif
 	#endif
 EOF
-	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep ^CPU=`
-	test x"${CPU}" != x && echo "${CPU}-unknown-linux-gnu" && exit 0
+	eval "`$CC_FOR_BUILD -E $dummy.c 2>/dev/null | sed -n '
+	    /^CPU/{
+		s: ::g
+		p
+	    }'`"
+	test x"${CPU}" != x && { echo "${CPU}-unknown-linux-gnu"; exit; }
 	;;
+    or32:Linux:*:*)
+	echo or32-unknown-linux-gnu
+	exit ;;
     ppc:Linux:*:*)
 	echo powerpc-unknown-linux-gnu
-	exit 0 ;;
+	exit ;;
     ppc64:Linux:*:*)
 	echo powerpc64-unknown-linux-gnu
-	exit 0 ;;
+	exit ;;
     alpha:Linux:*:*)
 	case `sed -n '/^cpu model/s/^.*: \(.*\)/\1/p' < /proc/cpuinfo` in
 	  EV5)   UNAME_MACHINE=alphaev5 ;;
@@ -873,7 +917,7 @@
 	objdump --private-headers /bin/sh | grep ld.so.1 >/dev/null
 	if test "$?" = 0 ; then LIBC="libc1" ; else LIBC="" ; fi
 	echo ${UNAME_MACHINE}-unknown-linux-gnu${LIBC}
-	exit 0 ;;
+	exit ;;
     parisc:Linux:*:* | hppa:Linux:*:*)
 	# Look for CPU level
 	case `grep '^cpu[^a-z]*:' /proc/cpuinfo 2>/dev/null | cut -d' ' -f2` in
@@ -881,25 +925,28 @@
 	  PA8*) echo hppa2.0-unknown-linux-gnu ;;
 	  *)    echo hppa-unknown-linux-gnu ;;
 	esac
-	exit 0 ;;
+	exit ;;
     parisc64:Linux:*:* | hppa64:Linux:*:*)
 	echo hppa64-unknown-linux-gnu
-	exit 0 ;;
+	exit ;;
     s390:Linux:*:* | s390x:Linux:*:*)
 	echo ${UNAME_MACHINE}-ibm-linux
-	exit 0 ;;
+	exit ;;
     sh64*:Linux:*:*)
     	echo ${UNAME_MACHINE}-unknown-linux-gnu
-	exit 0 ;;
+	exit ;;
     sh*:Linux:*:*)
 	echo ${UNAME_MACHINE}-unknown-linux-gnu
-	exit 0 ;;
+	exit ;;
     sparc:Linux:*:* | sparc64:Linux:*:*)
 	echo ${UNAME_MACHINE}-unknown-linux-gnu
-	exit 0 ;;
+	exit ;;
+    vax:Linux:*:*)
+	echo ${UNAME_MACHINE}-dec-linux-gnu
+	exit ;;
     x86_64:Linux:*:*)
 	echo x86_64-unknown-linux-gnu
-	exit 0 ;;
+	exit ;;
     i*86:Linux:*:*)
 	# The BFD linker knows what the default object file format is, so
 	# first see if it will tell us. cd to the root directory to prevent
@@ -917,15 +964,15 @@
 		;;
 	  a.out-i386-linux)
 		echo "${UNAME_MACHINE}-pc-linux-gnuaout"
-		exit 0 ;;
+		exit ;;
 	  coff-i386)
 		echo "${UNAME_MACHINE}-pc-linux-gnucoff"
-		exit 0 ;;
+		exit ;;
 	  "")
 		# Either a pre-BFD a.out linker (linux-gnuoldld) or
 		# one that does not give us useful --help.
 		echo "${UNAME_MACHINE}-pc-linux-gnuoldld"
-		exit 0 ;;
+		exit ;;
 	esac
 	# Determine whether the default compiler is a.out or elf
 	eval $set_cc_for_build
@@ -942,23 +989,33 @@
 	LIBC=gnulibc1
 	# endif
 	#else
-	#ifdef __INTEL_COMPILER
+	#if defined(__INTEL_COMPILER) || defined(__PGI) || defined(__sun)
 	LIBC=gnu
 	#else
 	LIBC=gnuaout
 	#endif
 	#endif
+	#ifdef __dietlibc__
+	LIBC=dietlibc
+	#endif
 EOF
-	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep ^LIBC=`
-	test x"${LIBC}" != x && echo "${UNAME_MACHINE}-pc-linux-${LIBC}" && exit 0
-	test x"${TENTATIVE}" != x && echo "${TENTATIVE}" && exit 0
+	eval "`$CC_FOR_BUILD -E $dummy.c 2>/dev/null | sed -n '
+	    /^LIBC/{
+		s: ::g
+		p
+	    }'`"
+	test x"${LIBC}" != x && {
+		echo "${UNAME_MACHINE}-pc-linux-${LIBC}"
+		exit
+	}
+	test x"${TENTATIVE}" != x && { echo "${TENTATIVE}"; exit; }
 	;;
     i*86:DYNIX/ptx:4*:*)
 	# ptx 4.0 does uname -s correctly, with DYNIX/ptx in there.
 	# earlier versions are messed up and put the nodename in both
 	# sysname and nodename.
 	echo i386-sequent-sysv4
-	exit 0 ;;
+	exit ;;
     i*86:UNIX_SV:4.2MP:2.*)
         # Unixware is an offshoot of SVR4, but it has its own version
         # number series starting with 2...
@@ -966,24 +1023,27 @@
 	# I just have to hope.  -- rms.
         # Use sysv4.2uw... so that sysv4* matches it.
 	echo ${UNAME_MACHINE}-pc-sysv4.2uw${UNAME_VERSION}
-	exit 0 ;;
+	exit ;;
     i*86:OS/2:*:*)
 	# If we were able to find `uname', then EMX Unix compatibility
 	# is probably installed.
 	echo ${UNAME_MACHINE}-pc-os2-emx
-	exit 0 ;;
+	exit ;;
     i*86:XTS-300:*:STOP)
 	echo ${UNAME_MACHINE}-unknown-stop
-	exit 0 ;;
+	exit ;;
     i*86:atheos:*:*)
 	echo ${UNAME_MACHINE}-unknown-atheos
-	exit 0 ;;
+	exit ;;
+    i*86:syllable:*:*)
+	echo ${UNAME_MACHINE}-pc-syllable
+	exit ;;
     i*86:LynxOS:2.*:* | i*86:LynxOS:3.[01]*:* | i*86:LynxOS:4.0*:*)
 	echo i386-unknown-lynxos${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     i*86:*DOS:*:*)
 	echo ${UNAME_MACHINE}-pc-msdosdjgpp
-	exit 0 ;;
+	exit ;;
     i*86:*:4.*:* | i*86:SYSTEM_V:4.*:*)
 	UNAME_REL=`echo ${UNAME_RELEASE} | sed 's/\/MP$//'`
 	if grep Novell /usr/include/link.h >/dev/null 2>/dev/null; then
@@ -991,15 +1051,16 @@
 	else
 		echo ${UNAME_MACHINE}-pc-sysv${UNAME_REL}
 	fi
-	exit 0 ;;
-    i*86:*:5:[78]*)
+	exit ;;
+    i*86:*:5:[678]*)
+    	# UnixWare 7.x, OpenUNIX and OpenServer 6.
 	case `/bin/uname -X | grep "^Machine"` in
 	    *486*)	     UNAME_MACHINE=i486 ;;
 	    *Pentium)	     UNAME_MACHINE=i586 ;;
 	    *Pent*|*Celeron) UNAME_MACHINE=i686 ;;
 	esac
 	echo ${UNAME_MACHINE}-unknown-sysv${UNAME_RELEASE}${UNAME_SYSTEM}${UNAME_VERSION}
-	exit 0 ;;
+	exit ;;
     i*86:*:3.2:*)
 	if test -f /usr/options/cb.name; then
 		UNAME_REL=`sed -n 's/.*Version //p' </usr/options/cb.name`
@@ -1017,73 +1078,73 @@
 	else
 		echo ${UNAME_MACHINE}-pc-sysv32
 	fi
-	exit 0 ;;
+	exit ;;
     pc:*:*:*)
 	# Left here for compatibility:
         # uname -m prints for DJGPP always 'pc', but it prints nothing about
         # the processor, so we play safe by assuming i386.
 	echo i386-pc-msdosdjgpp
-        exit 0 ;;
+        exit ;;
     Intel:Mach:3*:*)
 	echo i386-pc-mach3
-	exit 0 ;;
+	exit ;;
     paragon:*:*:*)
 	echo i860-intel-osf1
-	exit 0 ;;
+	exit ;;
     i860:*:4.*:*) # i860-SVR4
 	if grep Stardent /usr/include/sys/uadmin.h >/dev/null 2>&1 ; then
 	  echo i860-stardent-sysv${UNAME_RELEASE} # Stardent Vistra i860-SVR4
 	else # Add other i860-SVR4 vendors below as they are discovered.
 	  echo i860-unknown-sysv${UNAME_RELEASE}  # Unknown i860-SVR4
 	fi
-	exit 0 ;;
+	exit ;;
     mini*:CTIX:SYS*5:*)
 	# "miniframe"
 	echo m68010-convergent-sysv
-	exit 0 ;;
+	exit ;;
     mc68k:UNIX:SYSTEM5:3.51m)
 	echo m68k-convergent-sysv
-	exit 0 ;;
+	exit ;;
     M680?0:D-NIX:5.3:*)
 	echo m68k-diab-dnix
-	exit 0 ;;
-    M68*:*:R3V[567]*:*)
-	test -r /sysV68 && echo 'm68k-motorola-sysv' && exit 0 ;;
-    3[34]??:*:4.0:3.0 | 3[34]??A:*:4.0:3.0 | 3[34]??,*:*:4.0:3.0 | 3[34]??/*:*:4.0:3.0 | 4400:*:4.0:3.0 | 4850:*:4.0:3.0 | SKA40:*:4.0:3.0 | SDS2:*:4.0:3.0 | SHG2:*:4.0:3.0)
+	exit ;;
+    M68*:*:R3V[5678]*:*)
+	test -r /sysV68 && { echo 'm68k-motorola-sysv'; exit; } ;;
+    3[345]??:*:4.0:3.0 | 3[34]??A:*:4.0:3.0 | 3[34]??,*:*:4.0:3.0 | 3[34]??/*:*:4.0:3.0 | 4400:*:4.0:3.0 | 4850:*:4.0:3.0 | SKA40:*:4.0:3.0 | SDS2:*:4.0:3.0 | SHG2:*:4.0:3.0 | S7501*:*:4.0:3.0)
 	OS_REL=''
 	test -r /etc/.relid \
 	&& OS_REL=.`sed -n 's/[^ ]* [^ ]* \([0-9][0-9]\).*/\1/p' < /etc/.relid`
 	/bin/uname -p 2>/dev/null | grep 86 >/dev/null \
-	  && echo i486-ncr-sysv4.3${OS_REL} && exit 0
+	  && { echo i486-ncr-sysv4.3${OS_REL}; exit; }
 	/bin/uname -p 2>/dev/null | /bin/grep entium >/dev/null \
-	  && echo i586-ncr-sysv4.3${OS_REL} && exit 0 ;;
+	  && { echo i586-ncr-sysv4.3${OS_REL}; exit; } ;;
     3[34]??:*:4.0:* | 3[34]??,*:*:4.0:*)
         /bin/uname -p 2>/dev/null | grep 86 >/dev/null \
-          && echo i486-ncr-sysv4 && exit 0 ;;
+          && { echo i486-ncr-sysv4; exit; } ;;
     m68*:LynxOS:2.*:* | m68*:LynxOS:3.0*:*)
 	echo m68k-unknown-lynxos${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     mc68030:UNIX_System_V:4.*:*)
 	echo m68k-atari-sysv4
-	exit 0 ;;
+	exit ;;
     TSUNAMI:LynxOS:2.*:*)
 	echo sparc-unknown-lynxos${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     rs6000:LynxOS:2.*:*)
 	echo rs6000-unknown-lynxos${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     PowerPC:LynxOS:2.*:* | PowerPC:LynxOS:3.[01]*:* | PowerPC:LynxOS:4.0*:*)
 	echo powerpc-unknown-lynxos${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     SM[BE]S:UNIX_SV:*:*)
 	echo mips-dde-sysv${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     RM*:ReliantUNIX-*:*:*)
 	echo mips-sni-sysv4
-	exit 0 ;;
+	exit ;;
     RM*:SINIX-*:*:*)
 	echo mips-sni-sysv4
-	exit 0 ;;
+	exit ;;
     *:SINIX-*:*:*)
 	if uname -p 2>/dev/null >/dev/null ; then
 		UNAME_MACHINE=`(uname -p) 2>/dev/null`
@@ -1091,68 +1152,72 @@
 	else
 		echo ns32k-sni-sysv
 	fi
-	exit 0 ;;
+	exit ;;
     PENTIUM:*:4.0*:*) # Unisys `ClearPath HMP IX 4000' SVR4/MP effort
                       # says <Richard.M.Bartel at ccMail.Census.GOV>
         echo i586-unisys-sysv4
-        exit 0 ;;
+        exit ;;
     *:UNIX_System_V:4*:FTX*)
 	# From Gerald Hewes <hewes at openmarket.com>.
 	# How about differentiating between stratus architectures? -djm
 	echo hppa1.1-stratus-sysv4
-	exit 0 ;;
+	exit ;;
     *:*:*:FTX*)
 	# From seanf at swdc.stratus.com.
 	echo i860-stratus-sysv4
-	exit 0 ;;
+	exit ;;
+    i*86:VOS:*:*)
+	# From Paul.Green at stratus.com.
+	echo ${UNAME_MACHINE}-stratus-vos
+	exit ;;
     *:VOS:*:*)
 	# From Paul.Green at stratus.com.
 	echo hppa1.1-stratus-vos
-	exit 0 ;;
+	exit ;;
     mc68*:A/UX:*:*)
 	echo m68k-apple-aux${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     news*:NEWS-OS:6*:*)
 	echo mips-sony-newsos6
-	exit 0 ;;
+	exit ;;
     R[34]000:*System_V*:*:* | R4000:UNIX_SYSV:*:* | R*000:UNIX_SV:*:*)
 	if [ -d /usr/nec ]; then
 	        echo mips-nec-sysv${UNAME_RELEASE}
 	else
 	        echo mips-unknown-sysv${UNAME_RELEASE}
 	fi
-        exit 0 ;;
+        exit ;;
     BeBox:BeOS:*:*)	# BeOS running on hardware made by Be, PPC only.
 	echo powerpc-be-beos
-	exit 0 ;;
+	exit ;;
     BeMac:BeOS:*:*)	# BeOS running on Mac or Mac clone, PPC only.
 	echo powerpc-apple-beos
-	exit 0 ;;
+	exit ;;
     BePC:BeOS:*:*)	# BeOS running on Intel PC compatible.
 	echo i586-pc-beos
-	exit 0 ;;
+	exit ;;
     SX-4:SUPER-UX:*:*)
 	echo sx4-nec-superux${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     SX-5:SUPER-UX:*:*)
 	echo sx5-nec-superux${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     SX-6:SUPER-UX:*:*)
 	echo sx6-nec-superux${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     Power*:Rhapsody:*:*)
 	echo powerpc-apple-rhapsody${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     *:Rhapsody:*:*)
 	echo ${UNAME_MACHINE}-apple-rhapsody${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     *:Darwin:*:*)
-	case `uname -p` in
-	    *86) UNAME_PROCESSOR=i686 ;;
-	    powerpc) UNAME_PROCESSOR=powerpc ;;
+	UNAME_PROCESSOR=`uname -p` || UNAME_PROCESSOR=unknown
+	case $UNAME_PROCESSOR in
+	    unknown) UNAME_PROCESSOR=powerpc ;;
 	esac
 	echo ${UNAME_PROCESSOR}-apple-darwin${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     *:procnto*:*:* | *:QNX:[0123456789]*:*)
 	UNAME_PROCESSOR=`uname -p`
 	if test "$UNAME_PROCESSOR" = "x86"; then
@@ -1160,22 +1225,25 @@
 		UNAME_MACHINE=pc
 	fi
 	echo ${UNAME_PROCESSOR}-${UNAME_MACHINE}-nto-qnx${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     *:QNX:*:4*)
 	echo i386-pc-qnx
-	exit 0 ;;
-    NSR-[DGKLNPTVW]:NONSTOP_KERNEL:*:*)
+	exit ;;
+    NSE-?:NONSTOP_KERNEL:*:*)
+	echo nse-tandem-nsk${UNAME_RELEASE}
+	exit ;;
+    NSR-?:NONSTOP_KERNEL:*:*)
 	echo nsr-tandem-nsk${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     *:NonStop-UX:*:*)
 	echo mips-compaq-nonstopux
-	exit 0 ;;
+	exit ;;
     BS2000:POSIX*:*:*)
 	echo bs2000-siemens-sysv
-	exit 0 ;;
+	exit ;;
     DS/*:UNIX_System_V:*:*)
 	echo ${UNAME_MACHINE}-${UNAME_SYSTEM}-${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
     *:Plan9:*:*)
 	# "uname -m" is not consistent, so use $cputype instead. 386
 	# is converted to i386 for consistency with other x86
@@ -1186,28 +1254,47 @@
 	    UNAME_MACHINE="$cputype"
 	fi
 	echo ${UNAME_MACHINE}-unknown-plan9
-	exit 0 ;;
+	exit ;;
     *:TOPS-10:*:*)
 	echo pdp10-unknown-tops10
-	exit 0 ;;
+	exit ;;
     *:TENEX:*:*)
 	echo pdp10-unknown-tenex
-	exit 0 ;;
+	exit ;;
     KS10:TOPS-20:*:* | KL10:TOPS-20:*:* | TYPE4:TOPS-20:*:*)
 	echo pdp10-dec-tops20
-	exit 0 ;;
+	exit ;;
     XKL-1:TOPS-20:*:* | TYPE5:TOPS-20:*:*)
 	echo pdp10-xkl-tops20
-	exit 0 ;;
+	exit ;;
     *:TOPS-20:*:*)
 	echo pdp10-unknown-tops20
-	exit 0 ;;
+	exit ;;
     *:ITS:*:*)
 	echo pdp10-unknown-its
-	exit 0 ;;
+	exit ;;
     SEI:*:*:SEIUX)
         echo mips-sei-seiux${UNAME_RELEASE}
-	exit 0 ;;
+	exit ;;
+    *:DragonFly:*:*)
+	echo ${UNAME_MACHINE}-unknown-dragonfly`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`
+	exit ;;
+    *:*VMS:*:*)
+    	UNAME_MACHINE=`(uname -p) 2>/dev/null`
+	case "${UNAME_MACHINE}" in
+	    A*) echo alpha-dec-vms ; exit ;;
+	    I*) echo ia64-dec-vms ; exit ;;
+	    V*) echo vax-dec-vms ; exit ;;
+	esac ;;
+    *:XENIX:*:SysV)
+	echo i386-pc-xenix
+	exit ;;
+    i*86:skyos:*:*)
+	echo ${UNAME_MACHINE}-pc-skyos`echo ${UNAME_RELEASE}` | sed -e 's/ .*$//'
+	exit ;;
+    i*86:rdos:*:*)
+	echo ${UNAME_MACHINE}-pc-rdos
+	exit ;;
 esac
 
 #echo '(No uname command or uname output not recognized.)' 1>&2
@@ -1239,7 +1326,7 @@
 #endif
 
 #if defined (__arm) && defined (__acorn) && defined (__unix)
-  printf ("arm-acorn-riscix"); exit (0);
+  printf ("arm-acorn-riscix\n"); exit (0);
 #endif
 
 #if defined (hp300) && !defined (hpux)
@@ -1328,11 +1415,12 @@
 }
 EOF
 
-$CC_FOR_BUILD -o $dummy $dummy.c 2>/dev/null && $dummy && exit 0
+$CC_FOR_BUILD -o $dummy $dummy.c 2>/dev/null && SYSTEM_NAME=`$dummy` &&
+	{ echo "$SYSTEM_NAME"; exit; }
 
 # Apollos put the system type in the environment.
 
-test -d /usr/apollo && { echo ${ISP}-apollo-${SYSTYPE}; exit 0; }
+test -d /usr/apollo && { echo ${ISP}-apollo-${SYSTYPE}; exit; }
 
 # Convex versions that predate uname can use getsysinfo(1)
 
@@ -1341,22 +1429,22 @@
     case `getsysinfo -f cpu_type` in
     c1*)
 	echo c1-convex-bsd
-	exit 0 ;;
+	exit ;;
     c2*)
 	if getsysinfo -f scalar_acc
 	then echo c32-convex-bsd
 	else echo c2-convex-bsd
 	fi
-	exit 0 ;;
+	exit ;;
     c34*)
 	echo c34-convex-bsd
-	exit 0 ;;
+	exit ;;
     c38*)
 	echo c38-convex-bsd
-	exit 0 ;;
+	exit ;;
     c4*)
 	echo c4-convex-bsd
-	exit 0 ;;
+	exit ;;
     esac
 fi
 
@@ -1367,7 +1455,9 @@
 the operating system you are using. It is advised that you
 download the most up to date version of the config scripts from
 
-    ftp://ftp.gnu.org/pub/gnu/config/
+  http://savannah.gnu.org/cgi-bin/viewcvs/*checkout*/config/config/config.guess
+and
+  http://savannah.gnu.org/cgi-bin/viewcvs/*checkout*/config/config/config.sub
 
 If the version you run ($0) is already up to date, please
 send the following data and any information you think might be

Modified: trunk/config.sub
===================================================================
--- trunk/config.sub	2006-03-25 14:22:21 UTC (rev 230)
+++ trunk/config.sub	2006-03-25 15:35:49 UTC (rev 231)
@@ -1,9 +1,9 @@
 #! /bin/sh
 # Configuration validation subroutine script.
 #   Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999,
-#   2000, 2001, 2002, 2003 Free Software Foundation, Inc.
+#   2000, 2001, 2002, 2003, 2004, 2005 Free Software Foundation, Inc.
 
-timestamp='2003-07-04'
+timestamp='2006-02-23'
 
 # This file is (in principle) common to ALL GNU software.
 # The presence of a machine in this file suggests that SOME GNU software
@@ -21,14 +21,15 @@
 #
 # You should have received a copy of the GNU General Public License
 # along with this program; if not, write to the Free Software
-# Foundation, Inc., 59 Temple Place - Suite 330,
-# Boston, MA 02111-1307, USA.
-
+# Foundation, Inc., 51 Franklin Street - Fifth Floor, Boston, MA
+# 02110-1301, USA.
+#
 # As a special exception to the GNU General Public License, if you
 # distribute this file as part of a program that contains a
 # configuration script generated by Autoconf, you may include it under
 # the same distribution terms that you use for the rest of that program.
 
+
 # Please send patches to <config-patches at gnu.org>.  Submit a context
 # diff and a properly formatted ChangeLog entry.
 #
@@ -70,7 +71,7 @@
 version="\
 GNU config.sub ($timestamp)
 
-Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001
+Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005
 Free Software Foundation, Inc.
 
 This is free software; see the source for copying conditions.  There is NO
@@ -83,11 +84,11 @@
 while test $# -gt 0 ; do
   case $1 in
     --time-stamp | --time* | -t )
-       echo "$timestamp" ; exit 0 ;;
+       echo "$timestamp" ; exit ;;
     --version | -v )
-       echo "$version" ; exit 0 ;;
+       echo "$version" ; exit ;;
     --help | --h* | -h )
-       echo "$usage"; exit 0 ;;
+       echo "$usage"; exit ;;
     -- )     # Stop option processing
        shift; break ;;
     - )	# Use stdin as input.
@@ -99,7 +100,7 @@
     *local*)
        # First pass through any local machine types.
        echo $1
-       exit 0;;
+       exit ;;
 
     * )
        break ;;
@@ -118,7 +119,9 @@
 # Here we must recognize all the valid KERNEL-OS combinations.
 maybe_os=`echo $1 | sed 's/^\(.*\)-\([^-]*-[^-]*\)$/\2/'`
 case $maybe_os in
-  nto-qnx* | linux-gnu* | kfreebsd*-gnu* | netbsd*-gnu* | storm-chaos* | os2-emx* | rtmk-nova*)
+  nto-qnx* | linux-gnu* | linux-dietlibc | linux-newlib* | linux-uclibc* | \
+  uclinux-uclibc* | uclinux-gnu* | kfreebsd*-gnu* | knetbsd*-gnu* | netbsd*-gnu* | \
+  storm-chaos* | os2-emx* | rtmk-nova*)
     os=-$maybe_os
     basic_machine=`echo $1 | sed 's/^\(.*\)-\([^-]*-[^-]*\)$/\1/'`
     ;;
@@ -144,7 +147,7 @@
 	-convergent* | -ncr* | -news | -32* | -3600* | -3100* | -hitachi* |\
 	-c[123]* | -convex* | -sun | -crds | -omron* | -dg | -ultra | -tti* | \
 	-harris | -dolphin | -highlevel | -gould | -cbm | -ns | -masscomp | \
-	-apple | -axis)
+	-apple | -axis | -knuth | -cray)
 		os=
 		basic_machine=$1
 		;;
@@ -169,6 +172,10 @@
 	-hiux*)
 		os=-hiuxwe2
 		;;
+	-sco6)
+		os=-sco5v6
+		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
+		;;
 	-sco5)
 		os=-sco3.2v5
 		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
@@ -185,6 +192,10 @@
 		# Don't forget version if it is 3.2v4 or newer.
 		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
 		;;
+	-sco5v6*)
+		# Don't forget version if it is 3.2v4 or newer.
+		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
+		;;
 	-sco*)
 		os=-sco3.2v2
 		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
@@ -228,14 +239,16 @@
 	| a29k \
 	| alpha | alphaev[4-8] | alphaev56 | alphaev6[78] | alphapca5[67] \
 	| alpha64 | alpha64ev[4-8] | alpha64ev56 | alpha64ev6[78] | alpha64pca5[67] \
+	| am33_2.0 \
 	| arc | arm | arm[bl]e | arme[lb] | armv[2345] | armv[345][lb] | avr \
+	| bfin \
 	| c4x | clipper \
 	| d10v | d30v | dlx | dsp16xx \
 	| fr30 | frv \
 	| h8300 | h8500 | hppa | hppa1.[01] | hppa2.0 | hppa2.0[nw] | hppa64 \
 	| i370 | i860 | i960 | ia64 \
-	| ip2k \
-	| m32r | m68000 | m68k | m88k | mcore \
+	| ip2k | iq2000 \
+	| m32r | m32rle | m68000 | m68k | m88k | maxq | mb | microblaze | mcore \
 	| mips | mipsbe | mipseb | mipsel | mipsle \
 	| mips16 \
 	| mips64 | mips64el \
@@ -244,30 +257,38 @@
 	| mips64vr4100 | mips64vr4100el \
 	| mips64vr4300 | mips64vr4300el \
 	| mips64vr5000 | mips64vr5000el \
+	| mips64vr5900 | mips64vr5900el \
 	| mipsisa32 | mipsisa32el \
 	| mipsisa32r2 | mipsisa32r2el \
 	| mipsisa64 | mipsisa64el \
+	| mipsisa64r2 | mipsisa64r2el \
 	| mipsisa64sb1 | mipsisa64sb1el \
 	| mipsisa64sr71k | mipsisa64sr71kel \
 	| mipstx39 | mipstx39el \
 	| mn10200 | mn10300 \
+	| mt \
 	| msp430 \
+	| nios | nios2 \
 	| ns16k | ns32k \
-	| openrisc | or32 \
+	| or32 \
 	| pdp10 | pdp11 | pj | pjl \
 	| powerpc | powerpc64 | powerpc64le | powerpcle | ppcbe \
 	| pyramid \
-	| sh | sh[1234] | sh[23]e | sh[34]eb | shbe | shle | sh[1234]le | sh3ele \
+	| sh | sh[1234] | sh[24]a | sh[23]e | sh[34]eb | shbe | shle | sh[1234]le | sh3ele \
 	| sh64 | sh64le \
-	| sparc | sparc64 | sparc86x | sparclet | sparclite | sparcv9 | sparcv9b \
+	| sparc | sparc64 | sparc64b | sparc86x | sparclet | sparclite \
+	| sparcv8 | sparcv9 | sparcv9b \
 	| strongarm \
 	| tahoe | thumb | tic4x | tic80 | tron \
 	| v850 | v850e \
 	| we32k \
-	| x86 | xscale | xstormy16 | xtensa \
+	| x86 | xscale | xscalee[bl] | xstormy16 | xtensa \
 	| z8k)
 		basic_machine=$basic_machine-unknown
 		;;
+	m32c)
+		basic_machine=$basic_machine-unknown
+		;;
 	m6811 | m68hc11 | m6812 | m68hc12)
 		# Motorola 68HC11/12.
 		basic_machine=$basic_machine-unknown
@@ -275,6 +296,9 @@
 		;;
 	m88110 | m680[12346]0 | m683?2 | m68360 | m5200 | v70 | w65 | z8k)
 		;;
+	ms1)
+		basic_machine=mt-unknown
+		;;
 
 	# We use `pc' rather than `unknown'
 	# because (1) that's what they normally are, and
@@ -292,22 +316,22 @@
 	| a29k-* \
 	| alpha-* | alphaev[4-8]-* | alphaev56-* | alphaev6[78]-* \
 	| alpha64-* | alpha64ev[4-8]-* | alpha64ev56-* | alpha64ev6[78]-* \
-	| alphapca5[67]-* | alpha64pca5[67]-* | amd64-* | arc-* \
+	| alphapca5[67]-* | alpha64pca5[67]-* | arc-* \
 	| arm-*  | armbe-* | armle-* | armeb-* | armv*-* \
 	| avr-* \
-	| bs2000-* \
+	| bfin-* | bs2000-* \
 	| c[123]* | c30-* | [cjt]90-* | c4x-* | c54x-* | c55x-* | c6x-* \
-	| clipper-* | cydra-* \
+	| clipper-* | craynv-* | cydra-* \
 	| d10v-* | d30v-* | dlx-* \
 	| elxsi-* \
 	| f30[01]-* | f700-* | fr30-* | frv-* | fx80-* \
 	| h8300-* | h8500-* \
 	| hppa-* | hppa1.[01]-* | hppa2.0-* | hppa2.0[nw]-* | hppa64-* \
 	| i*86-* | i860-* | i960-* | ia64-* \
-	| ip2k-* \
-	| m32r-* \
+	| ip2k-* | iq2000-* \
+	| m32r-* | m32rle-* \
 	| m68000-* | m680[012346]0-* | m68360-* | m683?2-* | m68k-* \
-	| m88110-* | m88k-* | mcore-* \
+	| m88110-* | m88k-* | maxq-* | mcore-* \
 	| mips-* | mipsbe-* | mipseb-* | mipsel-* | mipsle-* \
 	| mips16-* \
 	| mips64-* | mips64el-* \
@@ -316,33 +340,41 @@
 	| mips64vr4100-* | mips64vr4100el-* \
 	| mips64vr4300-* | mips64vr4300el-* \
 	| mips64vr5000-* | mips64vr5000el-* \
+	| mips64vr5900-* | mips64vr5900el-* \
 	| mipsisa32-* | mipsisa32el-* \
 	| mipsisa32r2-* | mipsisa32r2el-* \
 	| mipsisa64-* | mipsisa64el-* \
+	| mipsisa64r2-* | mipsisa64r2el-* \
 	| mipsisa64sb1-* | mipsisa64sb1el-* \
 	| mipsisa64sr71k-* | mipsisa64sr71kel-* \
 	| mipstx39-* | mipstx39el-* \
+	| mmix-* \
+	| mt-* \
 	| msp430-* \
-	| none-* | np1-* | nv1-* | ns16k-* | ns32k-* \
+	| nios-* | nios2-* \
+	| none-* | np1-* | ns16k-* | ns32k-* \
 	| orion-* \
 	| pdp10-* | pdp11-* | pj-* | pjl-* | pn-* | power-* \
 	| powerpc-* | powerpc64-* | powerpc64le-* | powerpcle-* | ppcbe-* \
 	| pyramid-* \
 	| romp-* | rs6000-* \
-	| sh-* | sh[1234]-* | sh[23]e-* | sh[34]eb-* | shbe-* \
+	| sh-* | sh[1234]-* | sh[24]a-* | sh[23]e-* | sh[34]eb-* | shbe-* \
 	| shle-* | sh[1234]le-* | sh3ele-* | sh64-* | sh64le-* \
-	| sparc-* | sparc64-* | sparc86x-* | sparclet-* | sparclite-* \
-	| sparcv9-* | sparcv9b-* | strongarm-* | sv1-* | sx?-* \
+	| sparc-* | sparc64-* | sparc64b-* | sparc86x-* | sparclet-* \
+	| sparclite-* \
+	| sparcv8-* | sparcv9-* | sparcv9b-* | strongarm-* | sv1-* | sx?-* \
 	| tahoe-* | thumb-* \
 	| tic30-* | tic4x-* | tic54x-* | tic55x-* | tic6x-* | tic80-* \
 	| tron-* \
 	| v850-* | v850e-* | vax-* \
 	| we32k-* \
-	| x86-* | x86_64-* | xps100-* | xscale-* | xstormy16-* \
-	| xtensa-* \
+	| x86-* | x86_64-* | xps100-* | xscale-* | xscalee[bl]-* \
+	| xstormy16-* | xtensa-* \
 	| ymp-* \
 	| z8k-*)
 		;;
+	m32c-*)
+		;;
 	# Recognize the various machine names and aliases which stand
 	# for a CPU type and a company and sometimes even an OS.
 	386bsd)
@@ -359,6 +391,9 @@
 		basic_machine=a29k-amd
 		os=-udi
 		;;
+    	abacus)
+		basic_machine=abacus-unknown
+		;;
 	adobe68k)
 		basic_machine=m68010-adobe
 		os=-scout
@@ -376,6 +411,9 @@
 	amd64)
 		basic_machine=x86_64-pc
 		;;
+	amd64-*)
+		basic_machine=x86_64-`echo $basic_machine | sed 's/^[^-]*-//'`
+		;;
 	amdahl)
 		basic_machine=580-amdahl
 		os=-sysv
@@ -435,12 +473,27 @@
 		basic_machine=j90-cray
 		os=-unicos
 		;;
+	craynv)
+		basic_machine=craynv-cray
+		os=-unicosmp
+		;;
+	cr16c)
+		basic_machine=cr16c-unknown
+		os=-elf
+		;;
 	crds | unos)
 		basic_machine=m68k-crds
 		;;
+	crisv32 | crisv32-* | etraxfs*)
+		basic_machine=crisv32-axis
+		;;
 	cris | cris-* | etrax*)
 		basic_machine=cris-axis
 		;;
+	crx)
+		basic_machine=crx-unknown
+		os=-elf
+		;;
 	da30 | da30-*)
 		basic_machine=m68k-da30
 		;;
@@ -463,6 +516,10 @@
 		basic_machine=m88k-motorola
 		os=-sysv3
 		;;
+	djgpp)
+		basic_machine=i586-pc
+		os=-msdosdjgpp
+		;;
 	dpx20 | dpx20-*)
 		basic_machine=rs6000-bull
 		os=-bosx
@@ -641,10 +698,6 @@
 	mips3*)
 		basic_machine=`echo $basic_machine | sed -e 's/mips3/mips64/'`-unknown
 		;;
-	mmix*)
-		basic_machine=mmix-knuth
-		os=-mmixware
-		;;
 	monitor)
 		basic_machine=m68k-rom68k
 		os=-coff
@@ -657,6 +710,9 @@
 		basic_machine=i386-pc
 		os=-msdos
 		;;
+	ms1-*)
+		basic_machine=`echo $basic_machine | sed -e 's/ms1-/mt-/'`
+		;;
 	mvs)
 		basic_machine=i370-ibm
 		os=-mvs
@@ -725,10 +781,6 @@
 	np1)
 		basic_machine=np1-gould
 		;;
-	nv1)
-		basic_machine=nv1-cray
-		os=-unicosmp
-		;;
 	nsr-tandem)
 		basic_machine=nsr-tandem
 		;;
@@ -736,10 +788,13 @@
 		basic_machine=hppa1.1-oki
 		os=-proelf
 		;;
-	or32 | or32-*)
+	openrisc | openrisc-*)
 		basic_machine=or32-unknown
-		os=-coff
 		;;
+	os400)
+		basic_machine=powerpc-ibm
+		os=-os400
+		;;
 	OSE68000 | ose68000)
 		basic_machine=m68000-ericsson
 		os=-ose
@@ -765,6 +820,12 @@
 	pc532 | pc532-*)
 		basic_machine=ns32k-pc532
 		;;
+	pc98)
+		basic_machine=i386-pc
+		;;
+	pc98-*)
+		basic_machine=i386-`echo $basic_machine | sed 's/^[^-]*-//'`
+		;;
 	pentium | p5 | k5 | k6 | nexgen | viac3)
 		basic_machine=i586-pc
 		;;
@@ -821,6 +882,10 @@
 		basic_machine=i586-unknown
 		os=-pw32
 		;;
+	rdos)
+		basic_machine=i386-pc
+		os=-rdos
+		;;
 	rom68k)
 		basic_machine=m68k-rom68k
 		os=-coff
@@ -960,6 +1025,10 @@
 	tower | tower-32)
 		basic_machine=m68k-ncr
 		;;
+	tpf)
+		basic_machine=s390x-ibm
+		os=-tpf
+		;;
 	udi29k)
 		basic_machine=a29k-amd
 		os=-udi
@@ -1003,6 +1072,10 @@
 		basic_machine=hppa1.1-winbond
 		os=-proelf
 		;;
+	xbox)
+		basic_machine=i686-pc
+		os=-mingw32
+		;;
 	xps | xps100)
 		basic_machine=xps100-honeywell
 		;;
@@ -1033,6 +1106,9 @@
 	romp)
 		basic_machine=romp-ibm
 		;;
+	mmix)
+		basic_machine=mmix-knuth
+		;;
 	rs6000)
 		basic_machine=rs6000-ibm
 		;;
@@ -1049,13 +1125,10 @@
 	we32k)
 		basic_machine=we32k-att
 		;;
-	sh3 | sh4 | sh[34]eb | sh[1234]le | sh[23]ele)
+	sh[1234] | sh[24]a | sh[34]eb | sh[1234]le | sh[23]ele)
 		basic_machine=sh-unknown
 		;;
-	sh64)
-		basic_machine=sh64-unknown
-		;;
-	sparc | sparcv9 | sparcv9b)
+	sparc | sparcv8 | sparcv9 | sparcv9b)
 		basic_machine=sparc-sun
 		;;
 	cydra)
@@ -1128,19 +1201,23 @@
 	      | -aos* \
 	      | -nindy* | -vxsim* | -vxworks* | -ebmon* | -hms* | -mvs* \
 	      | -clix* | -riscos* | -uniplus* | -iris* | -rtu* | -xenix* \
-	      | -hiux* | -386bsd* | -netbsd* | -openbsd* | -kfreebsd* | -freebsd* | -riscix* \
-	      | -lynxos* | -bosx* | -nextstep* | -cxux* | -aout* | -elf* | -oabi* \
+	      | -hiux* | -386bsd* | -knetbsd* | -mirbsd* | -netbsd* \
+	      | -openbsd* | -solidbsd* \
+	      | -ekkobsd* | -kfreebsd* | -freebsd* | -riscix* | -lynxos* \
+	      | -bosx* | -nextstep* | -cxux* | -aout* | -elf* | -oabi* \
 	      | -ptx* | -coff* | -ecoff* | -winnt* | -domain* | -vsta* \
 	      | -udi* | -eabi* | -lites* | -ieee* | -go32* | -aux* \
 	      | -chorusos* | -chorusrdb* \
 	      | -cygwin* | -pe* | -psos* | -moss* | -proelf* | -rtems* \
-	      | -mingw32* | -linux-gnu* | -uxpv* | -beos* | -mpeix* | -udk* \
+	      | -mingw32* | -linux-gnu* | -linux-newlib* | -linux-uclibc* \
+	      | -uxpv* | -beos* | -mpeix* | -udk* \
 	      | -interix* | -uwin* | -mks* | -rhapsody* | -darwin* | -opened* \
 	      | -openstep* | -oskit* | -conix* | -pw32* | -nonstopux* \
 	      | -storm-chaos* | -tops10* | -tenex* | -tops20* | -its* \
 	      | -os2* | -vos* | -palmos* | -uclinux* | -nucleus* \
 	      | -morphos* | -superux* | -rtmk* | -rtmk-nova* | -windiss* \
-	      | -powermax* | -dnix* | -nx6 | -nx7 | -sei*)
+	      | -powermax* | -dnix* | -nx6 | -nx7 | -sei* | -dragonfly* \
+	      | -skyos* | -haiku* | -rdos*)
 	# Remember, each alternative MUST END IN *, to match a version number.
 		;;
 	-qnx*)
@@ -1158,12 +1235,15 @@
 		os=`echo $os | sed -e 's|nto|nto-qnx|'`
 		;;
 	-sim | -es1800* | -hms* | -xray | -os68k* | -none* | -v88r* \
-	      | -windows* | -osx | -abug | -netware* | -os9* | -beos* \
+	      | -windows* | -osx | -abug | -netware* | -os9* | -beos* | -haiku* \
 	      | -macos* | -mpw* | -magic* | -mmixware* | -mon960* | -lnews*)
 		;;
 	-mac*)
 		os=`echo $os | sed -e 's|mac|macos|'`
 		;;
+	-linux-dietlibc)
+		os=-linux-dietlibc
+		;;
 	-linux*)
 		os=`echo $os | sed -e 's|linux|linux-gnu|'`
 		;;
@@ -1176,6 +1256,9 @@
 	-opened*)
 		os=-openedition
 		;;
+        -os400*)
+		os=-os400
+		;;
 	-wince*)
 		os=-wince
 		;;
@@ -1197,6 +1280,9 @@
 	-atheos*)
 		os=-atheos
 		;;
+	-syllable*)
+		os=-syllable
+		;;
 	-386bsd)
 		os=-bsd
 		;;
@@ -1219,6 +1305,9 @@
 	-sinix*)
 		os=-sysv4
 		;;
+        -tpf*)
+		os=-tpf
+		;;
 	-triton*)
 		os=-sysv3
 		;;
@@ -1255,6 +1344,9 @@
 	-kaos*)
 		os=-kaos
 		;;
+	-zvmoe)
+		os=-zvmoe
+		;;
 	-none)
 		;;
 	*)
@@ -1332,9 +1424,15 @@
 	*-be)
 		os=-beos
 		;;
+	*-haiku)
+		os=-haiku
+		;;
 	*-ibm)
 		os=-aix
 		;;
+    	*-knuth)
+		os=-mmixware
+		;;
 	*-wec)
 		os=-proelf
 		;;
@@ -1467,9 +1565,15 @@
 			-mvs* | -opened*)
 				vendor=ibm
 				;;
+			-os400*)
+				vendor=ibm
+				;;
 			-ptx*)
 				vendor=sequent
 				;;
+			-tpf*)
+				vendor=ibm
+				;;
 			-vxsim* | -vxworks* | -windiss*)
 				vendor=wrs
 				;;
@@ -1494,7 +1598,7 @@
 esac
 
 echo $basic_machine$os
-exit 0
+exit
 
 # Local variables:
 # eval: (add-hook 'write-file-hooks 'time-stamp)

Modified: trunk/example/filebrowser.c
===================================================================
--- trunk/example/filebrowser.c	2006-03-25 14:22:21 UTC (rev 230)
+++ trunk/example/filebrowser.c	2006-03-25 15:35:49 UTC (rev 231)
@@ -39,10 +39,11 @@
 #define T_FOLDER	3
 #define T_GEOMETRY	4
 #define T_MUSIC		5
+#define	T_MOVIE		6
 
 #define M_DIR		512
 #define M_NAME		256
-int folder,geometry,mp3,duno,dot,dotdot;
+int folder,geometry,mp3,movie,duno,dot,dotdot;
 struct t_item {
 	int icon_oid, descr_oid, pie_oid;
 	char name[M_NAME];
@@ -107,6 +108,9 @@
 							   item[n].type=T_GEOMETRY;
 					   else if (0==strncmp(ext,".mp3",strlen(ext)<4?strlen(ext):4))
 							   item[n].type=T_MUSIC;
+					   else if (0==strncmp(ext,".mpg",strlen(ext)<4?strlen(ext):4))
+							   item[n].type=T_MOVIE;
+
 				   }
 				}
 			}
@@ -118,6 +122,7 @@
 									break;
 				case T_GEOMETRY:   	item[n].icon_oid=s3d_clone(geometry);break;
 				case T_MUSIC:	   	item[n].icon_oid=s3d_clone(mp3);break;
+				case T_MOVIE:		item[n].icon_oid=s3d_clone(movie);break;
 				default:   			printf("don't know type, defaulting to duno %d...\n",duno);
 									item[n].icon_oid=s3d_clone(duno);break;
 			}
@@ -175,6 +180,7 @@
 void object_click(struct s3d_evt *evt)
 {
 	int i,oid;
+	char execstr[256];
 	oid=(int)*((unsigned long *)evt->buf);
 	printf("!!!!!!!!! clicked object %d\n",oid);
 	for (i=0;i<n_item;i++)
@@ -192,6 +198,20 @@
 						display_dir(".",0,0,0,0);
 						return;
 						break;
+				case T_GEOMETRY:
+						printf("loading geometry %s\n",item[i].name);
+						snprintf(execstr,256,"3dsloader \"%s\"&\n",item[i].name);
+						system(execstr);
+						return;
+						break;
+				case T_MOVIE:
+						printf("playing %s\n",item[i].name);
+						snprintf(execstr,256,"mplayer -vo s3d \"%s\"&\n",item[i].name);
+						system(execstr);
+						return;
+						break;
+
+						
 			}
 		}
 	}
@@ -210,6 +230,7 @@
 		folder=s3d_import_3ds_file("objs/folder.3ds");
 		geometry=s3d_import_3ds_file("objs/geometry.3ds");
 		mp3=s3d_import_3ds_file("objs/notes.3ds");
+		movie=s3d_import_3ds_file("objs/notes.3ds");
 		duno=s3d_import_3ds_file("objs/duno.3ds");
 		dot=s3d_import_3ds_file("objs/dot.3ds");
 		dotdot=s3d_import_3ds_file("objs/dotdot.3ds");



From nichtsnutz at berlios.de  Sat Mar 25 18:42:57 2006
From: nichtsnutz at berlios.de (nichtsnutz at BerliOS)
Date: Sat, 25 Mar 2006 18:42:57 +0100
Subject: [S3d-svn] r232 - trunk/apps/olsrs3d
Message-ID: <200603251742.k2PHgvBK014111@sheep.berlios.de>

Author: nichtsnutz
Date: 2006-03-25 18:42:48 +0100 (Sat, 25 Mar 2006)
New Revision: 232

Modified:
   trunk/apps/olsrs3d/main.c
   trunk/apps/olsrs3d/process.c
Log:
subnet

Modified: trunk/apps/olsrs3d/main.c
===================================================================
--- trunk/apps/olsrs3d/main.c	2006-03-25 15:35:49 UTC (rev 231)
+++ trunk/apps/olsrs3d/main.c	2006-03-25 17:42:48 UTC (rev 232)
@@ -69,7 +69,7 @@
 int ColorSwitch = 0;   /* enable/disable colored olsr connections */
 int RotateSwitch = 0;
 int RotateSpeed = 2;
-float Factor = 0.5;	/* Factor in calc_olsr_node_mov */
+float Factor = 0.6;	/* Factor in calc_olsr_node_mov */
 struct olsr_node *Olsr_node_pEtx;
 int Btn_close_id = -1;
 int Btn_close_obj;

Modified: trunk/apps/olsrs3d/process.c
===================================================================
--- trunk/apps/olsrs3d/process.c	2006-03-25 15:35:49 UTC (rev 231)
+++ trunk/apps/olsrs3d/process.c	2006-03-25 17:42:48 UTC (rev 232)
@@ -31,7 +31,11 @@
 #include <s3d.h>
 #include <math.h>       /* sqrt() */
 #include "olsrs3d.h"
+#include <sys/socket.h>
+#include <netinet/in.h>
+#include <arpa/inet.h>
 
+
 char lbuf[MAXLINESIZE];
 
 
@@ -379,7 +383,8 @@
 	char *lbuf_ptr, *last_cr_ptr, *con_from, *con_from_end, *con_to, *con_to_end, *etx, *etx_end, *tmpChar;
 	struct olsr_node *olsr_node1;   /* pointer to olsr nodes */
 	struct olsr_node *olsr_node2;
-
+	in_addr_t address;
+	
 	lbuf_ptr = lbuf;
 	last_cr_ptr = NULL;
 
@@ -448,13 +453,18 @@
 
 					/* normal HNA */
 					} else {
-						/*
+						
 						if( (tmpChar = strchr((char*)con_to, (int)'/')))
 						{
+							char *test;
 							tmpChar++;
-							printf("%s\n",tmpChar);
+							address = inet_addr(tmpChar);
+							printf("%d\n", (int)(rintf(log(address)/log(2))));
+							*tmpChar = '\0';
+							*test = sprintf("%d",(int)address);
+							strncat(con_to,test,NAMEMAX);
 						}
-						*/
+						
 						olsr_node1 = get_olsr_node( &Olsr_root, con_from );
 						olsr_node2 = get_olsr_node( &Olsr_root, con_to );
 



From ydyd at berlios.de  Sat Mar 25 18:45:22 2006
From: ydyd at berlios.de (ydyd at berlios.de)
Date: Sat, 25 Mar 2006 18:45:22 +0100
Subject: [S3d-svn] r233 - trunk/objs
Message-ID: <200603251745.k2PHjM48014942@sheep.berlios.de>

Author: ydyd
Date: 2006-03-25 18:44:57 +0100 (Sat, 25 Mar 2006)
New Revision: 233

Added:
   trunk/objs/s3dstart.3ds
Log:
yd was nice

Added: trunk/objs/s3dstart.3ds
===================================================================
(Binary files differ)


Property changes on: trunk/objs/s3dstart.3ds
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream



From marec at berlios.de  Sat Mar 25 19:08:36 2006
From: marec at berlios.de (marec at BerliOS)
Date: Sat, 25 Mar 2006 19:08:36 +0100
Subject: [S3d-svn] r234 - trunk/apps/olsrs3d
Message-ID: <200603251808.k2PI8aLc030460@sheep.berlios.de>

Author: marec
Date: 2006-03-25 19:07:57 +0100 (Sat, 25 Mar 2006)
New Revision: 234

Modified:
   trunk/apps/olsrs3d/process.c
Log:
fix subnet mask


Modified: trunk/apps/olsrs3d/process.c
===================================================================
--- trunk/apps/olsrs3d/process.c	2006-03-25 17:44:57 UTC (rev 233)
+++ trunk/apps/olsrs3d/process.c	2006-03-25 18:07:57 UTC (rev 234)
@@ -384,7 +384,8 @@
 	struct olsr_node *olsr_node1;   /* pointer to olsr nodes */
 	struct olsr_node *olsr_node2;
 	in_addr_t address;
-	
+	char hna_name[NAMEMAX];
+
 	lbuf_ptr = lbuf;
 	last_cr_ptr = NULL;
 
@@ -453,18 +454,16 @@
 
 					/* normal HNA */
 					} else {
-						
+
 						if( (tmpChar = strchr((char*)con_to, (int)'/')))
 						{
-							char *test;
 							tmpChar++;
 							address = inet_addr(tmpChar);
-							printf("%d\n", (int)(rintf(log(address)/log(2))));
-							*tmpChar = '\0';
-							*test = sprintf("%d",(int)address);
-							strncat(con_to,test,NAMEMAX);
+							sprintf(hna_name,"%d",(int)(rintf(log(address)/log(2))));
+							strncpy(tmpChar,hna_name,NAMEMAX);
+							printf("hna_name: %s <> con_to: %s\n", hna_name,con_to );
 						}
-						
+
 						olsr_node1 = get_olsr_node( &Olsr_root, con_from );
 						olsr_node2 = get_olsr_node( &Olsr_root, con_to );
 



From ydyd at berlios.de  Sat Mar 25 19:17:17 2006
From: ydyd at berlios.de (ydyd at berlios.de)
Date: Sat, 25 Mar 2006 19:17:17 +0100
Subject: [S3d-svn] r235 - trunk/objs
Message-ID: <200603251817.k2PIHHJU002682@sheep.berlios.de>

Author: ydyd
Date: 2006-03-25 19:17:11 +0100 (Sat, 25 Mar 2006)
New Revision: 235

Modified:
   trunk/objs/s3dstart.3ds
Log:
yd was nice

Modified: trunk/objs/s3dstart.3ds
===================================================================
(Binary files differ)



From marec at berlios.de  Sat Mar 25 21:05:46 2006
From: marec at berlios.de (marec at BerliOS)
Date: Sat, 25 Mar 2006 21:05:46 +0100
Subject: [S3d-svn] r236 - trunk/apps/olsrs3d
Message-ID: <200603252005.k2PK5kKR016183@sheep.berlios.de>

Author: marec
Date: 2006-03-25 21:05:44 +0100 (Sat, 25 Mar 2006)
New Revision: 236

Modified:
   trunk/apps/olsrs3d/process.c
Log:
fix subnet II

Modified: trunk/apps/olsrs3d/process.c
===================================================================
--- trunk/apps/olsrs3d/process.c	2006-03-25 18:17:11 UTC (rev 235)
+++ trunk/apps/olsrs3d/process.c	2006-03-25 20:05:44 UTC (rev 236)
@@ -383,7 +383,7 @@
 	char *lbuf_ptr, *last_cr_ptr, *con_from, *con_from_end, *con_to, *con_to_end, *etx, *etx_end, *tmpChar;
 	struct olsr_node *olsr_node1;   /* pointer to olsr nodes */
 	struct olsr_node *olsr_node2;
-	in_addr_t address;
+	int address;
 	char hna_name[NAMEMAX];
 
 	lbuf_ptr = lbuf;
@@ -458,10 +458,9 @@
 						if( (tmpChar = strchr((char*)con_to, (int)'/')))
 						{
 							tmpChar++;
-							address = inet_addr(tmpChar);
-							sprintf(hna_name,"%d",(int)(rintf(log(address)/log(2))));
+							address = (int)-inet_network(tmpChar);
+							sprintf(hna_name,"%d",(int)(32 - ceil(log(address)/log(2))));
 							strncpy(tmpChar,hna_name,NAMEMAX);
-							printf("hna_name: %s <> con_to: %s\n", hna_name,con_to );
 						}
 
 						olsr_node1 = get_olsr_node( &Olsr_root, con_from );



From dotslash at berlios.de  Sat Mar 25 21:59:31 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Sat, 25 Mar 2006 21:59:31 +0100
Subject: [S3d-svn] r237 - in trunk: . apps/dot_mcp apps/s3dfm example objs
Message-ID: <200603252059.k2PKxVYE015562@sheep.berlios.de>

Author: dotslash
Date: 2006-03-25 21:59:22 +0100 (Sat, 25 Mar 2006)
New Revision: 237

Modified:
   trunk/TODO
   trunk/apps/dot_mcp/menu.c
   trunk/apps/s3dfm/main.c
   trunk/example/Makefile.am
   trunk/example/filebrowser.c
   trunk/objs/AUTHORS
   trunk/objs/Makefile.am
Log:
- using yds icons in the filebrowser
- 3dsloader and filebrowser -> installing (within Makefile.am)

Modified: trunk/TODO
===================================================================
--- trunk/TODO	2006-03-25 20:05:44 UTC (rev 236)
+++ trunk/TODO	2006-03-25 20:59:22 UTC (rev 237)
@@ -1,3 +1,6 @@
+general:
+	* svn add reset.3ds?!
+	* FULLSCREEN!
 dot_mcp:
 	* sane paths for applications
 autotools:

Modified: trunk/apps/dot_mcp/menu.c
===================================================================
--- trunk/apps/dot_mcp/menu.c	2006-03-25 20:05:44 UTC (rev 236)
+++ trunk/apps/dot_mcp/menu.c	2006-03-25 20:59:22 UTC (rev 237)
@@ -89,7 +89,7 @@
 	int i,menu_o;
 	menu_o=s3d_new_object();
 	act=0; /* menu deactived */
-	go=s3d_import_3ds_file("objs/go_button.3ds");
+	go=s3d_import_3ds_file("objs/s3dstart.3ds");
 	s3d_flags_on(go,S3D_OF_VISIBLE|S3D_OF_SELECTABLE);
 	s3d_link(go,menu_o);
 	for (i=0;i<(sizeof(menu)/sizeof(struct menu_entry));i++)

Modified: trunk/apps/s3dfm/main.c
===================================================================
--- trunk/apps/s3dfm/main.c	2006-03-25 20:05:44 UTC (rev 236)
+++ trunk/apps/s3dfm/main.c	2006-03-25 20:59:22 UTC (rev 237)
@@ -46,6 +46,7 @@
 int folder,geometry,mp3,duno,dot,dotdot,dirstep;
 struct t_item {
 	int icon, str;							/* object ids ...*/
+	int block;								/* oid of the block */
 	char name[M_NAME];						/* name (e.g. file name) */
 	struct t_item *parent;					/* parent item */
 	struct t_item *list;					/* list of items  (if it's a subdir)*/
@@ -56,7 +57,39 @@
 	int disp;
 };
 struct t_item root;
+/* draw a block */
+int new_block(struct t_item *dir)
+{
+	float vertices[]=
+			{-1,0,-1,
+			 -1,0, 1,
+			  1,0, 1,
+			  1,0,-1,
+			 -1,1,-1,
+			 -1,1, 1,
+			  1,1, 1,
+			  1,1,-1};
 
+			 
+	dir->block=s3d_new_object();
+	s3d_push_vertices(dir->block,vertices,8);
+	s3d_push_material(dir->block,
+						1,1,1,
+						1,1,1,
+						1,1,1);
+	s3d_push_polygon(dir->block,4,5,6,0);
+	s3d_push_polygon(dir->block,4,6,7,0);
+
+	s3d_push_polygon(dir->block,0,4,5,0);
+	s3d_push_polygon(dir->block,0,5,1,0);
+	
+	s3d_push_polygon(dir->block,3,7,4,0);
+	s3d_push_polygon(dir->block,3,4,0,0);
+
+	s3d_push_polygon(dir->block,2,6,7,0);
+	s3d_push_polygon(dir->block,2,7,3,0);
+
+}
 int display_dir(struct t_item *dir)
 {
 	int i;
@@ -64,6 +97,10 @@
 	float dss; /* dirstep size */
 	int dirn, dirc,dps;
 	int icon;
+	float vertices[]={	-1,-1,0,
+						-1, 1,0,
+						 1, 1,0,
+						 1,-1,0};
 	px=pz=0.0;
 	if (dir->disp)
 		return(-1); /* already displayed ... */ 
@@ -75,52 +112,34 @@
 		if (dir->list[i].type==T_FOLDER)
 			dirn++;
 	}
-	dps=(dirn+3)/4; /* directories per side */
-	dirc=0;			/* no directories counted yet */
-	dss=1.0/(2.0*dps+1.0);
-	dir->scale=dss;
+	dps=ceil(sqrt(dir->n_item)); /* directories per line */
 	printf("having %d directories, %d per side. one is scaled down to %3.3f \n",dirn,dps,dss);
+	root.icon=s3d_new_object();
 	for (i=0;i<dir->n_item;i++)
 	{
-		if (dir->list[i].type==T_FOLDER)
+		dir->list[i].px=((float)(i%dps)+0.5)/((float)dps)-0.5;
+		dir->list[i].pz=((float)i/dps+0.5)/((float)dps)-0.5;
+		dir->list[i].block=s3d_new_object();
+		s3d_link(dir->list[i].block,dir->block);
+		s3d_push_vertices(dir->list[i].block,vertices,2);
+		switch (dir->list[i].type)
 		{
-			icon=dir->list[i].icon=s3d_clone(dirstep);
-			printf("processing %d [%s] icon %d\n",dirc,dir->list[i].name,icon);
-			s3d_scale(icon,dss);
-		    s3d_flags_on(icon,S3D_OF_VISIBLE|S3D_OF_SELECTABLE);
-			s3d_link(icon,dir->icon);
-			/* castle style:
-			 * direcotires are clockwise oredered, starting from the lower left corner on the 
-			 * underlying dirstep */
-			switch (dirc/dps)
-			{
-				case 0:
-					px=-1.0+dss;
-					pz=-1.0+(dirc*2+0.5)*2*dss;
-					break;
-				case 1:
-					px=-1.0+((dirc-dps)*2+0.5)*2*dss;
-					pz=1.0-dss;
-					break;
-				case 2:
-					px=1.0-dss;
-					pz=1.0-((dirc-2*dps)*2+0.5)*2*dss;
-					break;
-				case 3:
-					px=1.0-((dirc-dps*3)*2+0.5)*2*dss;
-					pz=-1.0+dss;
-					break;
-			}
-			s3d_translate(icon, px,SH,pz);
-			dir->list[i].px=px;
-			dir->list[i].pz=pz;
-			dir->list[i].str=s3d_draw_string(dir->list[i].name,NULL);
-			s3d_translate(	dir->list[i].str, px,1.0+SH,pz);
-			s3d_link(		dir->list[i].str,icon);
-			s3d_flags_on(	dir->list[i].str,S3D_OF_VISIBLE|S3D_OF_SELECTABLE);
-			dirc++;
-			
-        }
+			case T_FOLDER:
+				s3d_push_material(dir->list[i].block,
+										1,1,0,
+										1,1,0,
+										1,1,0);
+				break;
+			default:
+				s3d_push_material(dir->list[i].block,
+										0,0,1,
+										0,0,1,
+										0,0,1);
+		};
+		s3d_push_polygon(dir->list[i].block,0,1,2,0);
+		s3d_push_polygon(dir->list[i].block,0,2,3,0);
+		s3d_scale(dir->list[i].block,1.0/((float)dps));
+		s3d_flags_on(dir->list[i].block,S3D_OF_VISIBLE|S3D_OF_SELECTABLE);
 	}
 	dir->disp=1;
 	return(0);
@@ -290,8 +309,10 @@
 		root.icon=s3d_clone(dirstep);
 		root.px=root.pz=0.0;
 		root.scale=1.0;
+		new_block(&root);
 		rescale(&root);
 	    s3d_flags_on(root.icon,S3D_OF_VISIBLE|S3D_OF_SELECTABLE);
+	    s3d_flags_on(root.block,S3D_OF_VISIBLE|S3D_OF_SELECTABLE);
 		parse_dir(&root);
 		display_dir(&root);
 		s3d_mainloop(mainloop);

Modified: trunk/example/Makefile.am
===================================================================
--- trunk/example/Makefile.am	2006-03-25 20:05:44 UTC (rev 236)
+++ trunk/example/Makefile.am	2006-03-25 20:59:22 UTC (rev 237)
@@ -1,6 +1,7 @@
-noinst_PROGRAMS=	3dsloader filebrowser hudtest katze \
+noinst_PROGRAMS=	hudtest katze \
 			ptrtest radius_test s3dclock snowman \
 			strtest texturetest linetest
+bin_PROGRAMS= filebrowser 3dsloader
 			
 3dsloader_SOURCES=	3dsloader.c
 filebrowser_SOURCES=	filebrowser.c

Modified: trunk/example/filebrowser.c
===================================================================
--- trunk/example/filebrowser.c	2006-03-25 20:05:44 UTC (rev 236)
+++ trunk/example/filebrowser.c	2006-03-25 20:59:22 UTC (rev 237)
@@ -230,7 +230,7 @@
 		folder=s3d_import_3ds_file("objs/folder.3ds");
 		geometry=s3d_import_3ds_file("objs/geometry.3ds");
 		mp3=s3d_import_3ds_file("objs/notes.3ds");
-		movie=s3d_import_3ds_file("objs/notes.3ds");
+		movie=s3d_import_3ds_file("objs/film.3ds");
 		duno=s3d_import_3ds_file("objs/duno.3ds");
 		dot=s3d_import_3ds_file("objs/dot.3ds");
 		dotdot=s3d_import_3ds_file("objs/dotdot.3ds");

Modified: trunk/objs/AUTHORS
===================================================================
--- trunk/objs/AUTHORS	2006-03-25 20:05:44 UTC (rev 236)
+++ trunk/objs/AUTHORS	2006-03-25 20:59:22 UTC (rev 237)
@@ -29,7 +29,9 @@
 cube.3ds
 cubey.3ds
 cubeyholes.3ds
+film.3ds
 miu.3ds
+s3dstart.3ds
 spikeybla.3ds
 star.3ds
 

Modified: trunk/objs/Makefile.am
===================================================================
--- trunk/objs/Makefile.am	2006-03-25 20:05:44 UTC (rev 236)
+++ trunk/objs/Makefile.am	2006-03-25 20:59:22 UTC (rev 237)
@@ -1,5 +1,6 @@
 objsdir=	$(pkgdatadir)/objs
 dist_objs_DATA = \
+	s3dstart.3ds \
 	internet.3ds \
 	katze_tail.3ds \
 	sec_p.3ds \
@@ -15,6 +16,7 @@
 	katze_leg.3ds \
 	weirdball.3ds \
 	cubey.3ds \
+	film.3ds \
 	accesspoint.3ds \
 	folder.3ds \
 	snow_foot.3ds \



From dotslash at berlios.de  Sat Mar 25 22:23:24 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Sat, 25 Mar 2006 22:23:24 +0100
Subject: [S3d-svn] r238 - trunk/objs
Message-ID: <200603252123.k2PLNO69003853@sheep.berlios.de>

Author: dotslash
Date: 2006-03-25 22:23:23 +0100 (Sat, 25 Mar 2006)
New Revision: 238

Added:
   trunk/objs/film.3ds
Log:
- yds movie icon

Added: trunk/objs/film.3ds
===================================================================
(Binary files differ)


Property changes on: trunk/objs/film.3ds
___________________________________________________________________
Name: svn:executable
   + *
Name: svn:mime-type
   + application/octet-stream



From nichtsnutz at berlios.de  Sat Mar 25 22:54:16 2006
From: nichtsnutz at berlios.de (nichtsnutz at BerliOS)
Date: Sat, 25 Mar 2006 22:54:16 +0100
Subject: [S3d-svn] r239 - trunk/apps/olsrs3d
Message-ID: <200603252154.k2PLsGfu006928@sheep.berlios.de>

Author: nichtsnutz
Date: 2006-03-25 22:54:15 +0100 (Sat, 25 Mar 2006)
New Revision: 239

Modified:
   trunk/apps/olsrs3d/main.c
Log:
add border etx output

Modified: trunk/apps/olsrs3d/main.c
===================================================================
--- trunk/apps/olsrs3d/main.c	2006-03-25 21:23:23 UTC (rev 238)
+++ trunk/apps/olsrs3d/main.c	2006-03-25 21:54:15 UTC (rev 239)
@@ -49,7 +49,7 @@
 int Olsr_node_count = 0, Last_olsr_node_count = -1;
 int Olsr_node_count_obj = -1;
 int Olsr_ip_label_obj = -1;
-
+int Output_border[4];
 int *Olsr_neighbour_label_obj = NULL;
 int Size;
 
@@ -780,6 +780,12 @@
 			s3d_del_object( Olsr_neighbour_label_obj[i] );
 		free(Olsr_neighbour_label_obj);
 		Olsr_neighbour_label_obj = NULL;
+		for(i = 0; i < 4; i++)
+		{
+			if(Output_border[i] != -1)
+				s3d_del_object(Output_border[i]);
+			Output_border[i] = -1;
+		}
 		return;
 	}
 	
@@ -791,7 +797,7 @@
 		s3d_link(Btn_close_id,0);
 		s3d_flags_on(Btn_close_id,S3D_OF_VISIBLE|S3D_OF_SELECTABLE);
 		s3d_scale( Btn_close_id, 0.05 );
-		s3d_translate( Btn_close_id,-Left*3.0-0.1, -Bottom*3.0-0.7, -3.0 );
+		s3d_translate( Btn_close_id,-Left*3.0-0.125, -Bottom*3.0-0.7, -3.0 );
 		
 	}
 	
@@ -808,56 +814,17 @@
 	s3d_link( Olsr_ip_label_obj, 0 );
 	s3d_flags_on( Olsr_ip_label_obj, S3D_OF_VISIBLE );
 	s3d_scale( Olsr_ip_label_obj, 0.2 );
-	s3d_translate( Olsr_ip_label_obj,-Left*3.0-(ln * 0.2), -Bottom*3.0-0.9, -3.0 );
+	s3d_translate( Olsr_ip_label_obj,-Left*3.0-(ln * 0.2)-0.15, -Bottom*3.0-1.0, -3.0 );
 	
-	/*
-	if( Olsr_neighbour_label_obj != NULL )
-	{
-		for(i=0; i < Size; i++)
-		{
-			printf("remove %d\n",Olsr_neighbour_label_obj[i]);
-			s3d_del_object( Olsr_neighbour_label_obj[i] );
-		}
-		free(Olsr_neighbour_label_obj);
-		Olsr_neighbour_label_obj = NULL;
-	}
-
-	tmpNeighbour = olsr_node->olsr_neigh_list;
-
-	Size = 0;
-	while(tmpNeighbour != NULL)
-	{
-		Size++;
-		tmpNeighbour = tmpNeighbour->next_olsr_neigh_list;
-	}
-
-	Olsr_neighbour_label_obj = malloc(Size*sizeof(int));
-	tmpNeighbour = olsr_node->olsr_neigh_list;
-
-	for(i = 0; i < Size ;i++)
-	{
-		char nIpStr[60];
-		float len;
-		snprintf(nIpStr, 60, "%10.2f %s %10.2f", (strcmp(olsr_node->ip,tmpNeighbour->olsr_con->right_olsr_node->ip)?tmpNeighbour->olsr_con->left_etx:tmpNeighbour->olsr_con->right_etx),
-				    (strcmp(olsr_node->ip,tmpNeighbour->olsr_con->right_olsr_node->ip)?tmpNeighbour->olsr_con->right_olsr_node->ip:tmpNeighbour->olsr_con->left_olsr_node->ip),
-				    	(strcmp(olsr_node->ip,tmpNeighbour->olsr_con->right_olsr_node->ip)?tmpNeighbour->olsr_con->right_etx:tmpNeighbour->olsr_con->left_etx));
-		Olsr_neighbour_label_obj[i] = s3d_draw_string( nIpStr, &len );
-		s3d_link(Olsr_neighbour_label_obj[i], 0);
-		s3d_flags_on(Olsr_neighbour_label_obj[i], S3D_OF_VISIBLE );
-		s3d_scale(Olsr_neighbour_label_obj[i], 0.2 );
-		s3d_translate(Olsr_neighbour_label_obj[i], -Left*3.0-(len * 0.2), -Bottom*3.0-p, -3.0 );
-		tmpNeighbour = tmpNeighbour->next_olsr_neigh_list;
-		p += 0.2;
-		printf("create %d\n",Olsr_neighbour_label_obj[i]);
-	}
-	*/
 }
 
 void print_etx()
 {
 	struct olsr_neigh_list *tmpNeighbour;
-	float p = 1.1;
+	float p = 1.2;
 	int i;
+	float len = 0.0, max_len=0.0;
+	
 	if( Olsr_neighbour_label_obj != NULL )
 	{
 		/* int n = sizeof(Olsr_neighbour_label_obj) / sizeof(int);*/
@@ -882,20 +849,79 @@
 	for(i = 0; i < Size ;i++)
 	{
 		char nIpStr[60];
-		float len;
 		float mEtx = ( tmpNeighbour->olsr_con->left_etx + tmpNeighbour->olsr_con->right_etx ) / 2;
+		
 		if( mEtx != -1000 )
 			snprintf(nIpStr, 60, "%15s --> %4.2f",(strcmp(Olsr_node_pEtx->ip,tmpNeighbour->olsr_con->right_olsr_node->ip)?tmpNeighbour->olsr_con->right_olsr_node->ip:tmpNeighbour->olsr_con->left_olsr_node->ip),mEtx);
 		else
 			snprintf(nIpStr, 60, "%15s --> HNA",(strcmp(Olsr_node_pEtx->ip,tmpNeighbour->olsr_con->right_olsr_node->ip)?tmpNeighbour->olsr_con->right_olsr_node->ip:tmpNeighbour->olsr_con->left_olsr_node->ip));
+		
 		Olsr_neighbour_label_obj[i] = s3d_draw_string( nIpStr, &len );
 		s3d_link(Olsr_neighbour_label_obj[i], 0);
 		s3d_flags_on(Olsr_neighbour_label_obj[i], S3D_OF_VISIBLE );
 		s3d_scale(Olsr_neighbour_label_obj[i], 0.2 );
-		s3d_translate(Olsr_neighbour_label_obj[i], -Left*3.0-(len * 0.2), -Bottom*3.0-p, -3.0 );
+		s3d_translate(Olsr_neighbour_label_obj[i], -Left*3.0-(len * 0.2)-0.15, -Bottom*3.0-p, -3.0 );
 		tmpNeighbour = tmpNeighbour->next_olsr_neigh_list;
 		p += 0.2;
+		max_len = (len > max_len)?len+0.15:max_len;
 	}
+	
+	if( Btn_close_id != -1)
+	{
+		if( Output_border[0] == -1 )
+		{
+			for(i = 0; i < 4; i++)
+			{
+				Output_border[i] = s3d_new_object();
+				s3d_push_material( Output_border[i],
+					1.0,1.0,1.0,
+					1.0,1.0,1.0,
+					1.0,1.0,1.0);
+			}
+			s3d_push_vertex(Output_border[0], -Left*3.0-0.2,			-Bottom*3.0-0.7, -3.0);
+			s3d_push_vertex(Output_border[0], -Left*3.0-(max_len*0.2),	-Bottom*3.0-0.7, -3.0);
+	
+			s3d_push_vertex(Output_border[1], -Left*3.0-0.1,			-Bottom*3.0-0.8, -3.0);
+			s3d_push_vertex(Output_border[1], -Left*3.0-0.1,			-Bottom*3.0-p, 	-3.0);
+	
+			s3d_push_vertex(Output_border[2], -Left*3.0-0.1,			-Bottom*3.0-p, 	-3.0);
+			s3d_push_vertex(Output_border[2], -Left*3.0-(max_len*0.2),	-Bottom*3.0-p, 	-3.0);
+	
+			s3d_push_vertex(Output_border[3], -Left*3.0-(max_len*0.2),	-Bottom*3.0-0.7, -3.0);
+			s3d_push_vertex(Output_border[3], -Left*3.0-(max_len*0.2),	-Bottom*3.0-p, 	-3.0);
+	
+			s3d_push_line( Output_border[0], 0,1,0);
+			s3d_push_line( Output_border[1], 0,1,0);
+			s3d_push_line( Output_border[2], 0,1,0);
+			s3d_push_line( Output_border[3], 0,1,0);
+	
+			s3d_flags_on( Output_border[0], S3D_OF_VISIBLE);
+			s3d_flags_on( Output_border[1], S3D_OF_VISIBLE);
+			s3d_flags_on( Output_border[2], S3D_OF_VISIBLE);
+			s3d_flags_on( Output_border[3], S3D_OF_VISIBLE);
+
+			s3d_link( Output_border[0], 0);
+			s3d_link( Output_border[1], 0);
+			s3d_link( Output_border[2], 0);
+			s3d_link( Output_border[3], 0);
+		} else {
+			s3d_pop_vertex(Output_border[0], 2);
+			s3d_pop_vertex(Output_border[1], 2);
+			s3d_pop_vertex(Output_border[2], 2);
+			s3d_pop_vertex(Output_border[3], 2);
+			s3d_push_vertex(Output_border[0], -Left*3.0-0.2,				-Bottom*3.0-0.7, -3.0);
+			s3d_push_vertex(Output_border[0], -Left*3.0-(max_len*0.2),	-Bottom*3.0-0.7, -3.0);
+	
+			s3d_push_vertex(Output_border[1], -Left*3.0-0.1,				-Bottom*3.0-0.8, -3.0);
+			s3d_push_vertex(Output_border[1], -Left*3.0-0.1,				-Bottom*3.0-p,	 -3.0);
+	
+			s3d_push_vertex(Output_border[2], -Left*3.0-0.1,				-Bottom*3.0-p,	 -3.0);
+			s3d_push_vertex(Output_border[2], -Left*3.0-(max_len*0.2),	-Bottom*3.0-p,	 -3.0);
+	
+			s3d_push_vertex(Output_border[3], -Left*3.0-(max_len*0.2),	-Bottom*3.0-0.7, -3.0);
+			s3d_push_vertex(Output_border[3], -Left*3.0-(max_len*0.2),	-Bottom*3.0-p, 	 -3.0);
+		}
+	}
 }
 
 
@@ -993,6 +1019,7 @@
 			Olsr_node_hna_net = s3d_import_3ds_file( "objs/internet.3ds" );
 			Btn_close_obj = s3d_import_3ds_file("objs/btn_close.3ds");
 			ZeroPoint = s3d_new_object();
+			Output_border[0] = Output_border[1] = Output_border[2] = Output_border[3] = -1;
 			s3d_mainloop(mainloop);
 			s3d_quit();
 			net_quit();



From ankon at berlios.de  Tue Mar 28 23:11:46 2006
From: ankon at berlios.de (ankon at berlios.de)
Date: Tue, 28 Mar 2006 23:11:46 +0200
Subject: [S3d-svn] r240 - trunk/Documentation
Message-ID: <200603282111.k2SLBk5T001790@sheep.berlios.de>

Author: ankon
Date: 2006-03-28 23:11:44 +0200 (Tue, 28 Mar 2006)
New Revision: 240

Modified:
   trunk/Documentation/Makefile.am
Log:
Fix path, so that make dist works again



Modified: trunk/Documentation/Makefile.am
===================================================================
--- trunk/Documentation/Makefile.am	2006-03-25 21:54:15 UTC (rev 239)
+++ trunk/Documentation/Makefile.am	2006-03-28 21:11:44 UTC (rev 240)
@@ -1,5 +1,5 @@
 #SUBDIRS		= s3dapi
 
 EXTRA_DIST	= s3drc.txt for_icon_designer.txt OPEN_PROBLEMS.txt \
-		  s3dapi/README s3dapi/bookinfo.docbook s3dapi.docbook
+		  s3dapi/README s3dapi/bookinfo.docbook s3dapi/s3dapi.docbook
 



From marec at berlios.de  Wed Mar 29 20:23:36 2006
From: marec at berlios.de (marec at BerliOS)
Date: Wed, 29 Mar 2006 20:23:36 +0200
Subject: [S3d-svn] r241 - trunk/apps/olsrs3d
Message-ID: <200603291823.k2TINaH7031746@sheep.berlios.de>

Author: marec
Date: 2006-03-29 20:23:33 +0200 (Wed, 29 Mar 2006)
New Revision: 241

Modified:
   trunk/apps/olsrs3d/main.c
   trunk/apps/olsrs3d/olsrs3d.h
   trunk/apps/olsrs3d/process.c
Log:
non-etx compatibility added

Modified: trunk/apps/olsrs3d/main.c
===================================================================
--- trunk/apps/olsrs3d/main.c	2006-03-28 21:11:44 UTC (rev 240)
+++ trunk/apps/olsrs3d/main.c	2006-03-29 18:23:33 UTC (rev 241)
@@ -54,6 +54,8 @@
 int Size;
 
 int Net_read_count;
+int Output_block_counter = 0;
+int Output_block_completed = 0;
 
 int Olsr_node_obj, Olsr_node_inet_obj, Olsr_node_hna_net;
 
@@ -202,10 +204,8 @@
 	if ( olsr_node == NULL ) return;
 
 	/* olsr node vanished */
-	if ( olsr_node->last_seen > 0 ) olsr_node->last_seen--;
+	if ( ( olsr_node->last_seen < Output_block_counter - 1 ) && ( olsr_node->visible ) ) {
 
-	if ( olsr_node->last_seen == 0 && olsr_node->visible ) {
-
 		if ( Debug ) printf( "olsr node vanished: %s\n", olsr_node->ip );
 
 		Olsr_node_count--;
@@ -629,7 +629,7 @@
 	int net_result;   /* result of function net_main */
 	char nc_str[20];
 	float strLen;
-	
+
 	/* calculate new movement vector */
 	calc_olsr_node_mov();
 
@@ -654,6 +654,13 @@
 
 	}
 
+	if ( Output_block_completed ) {
+
+		Output_block_counter++;
+		Output_block_completed = 0;
+
+	}
+
 	/* read data from socket */
 	Net_read_count = 0;
 	while ( ( net_result = net_main() ) != 0 ) {
@@ -788,9 +795,9 @@
 		}
 		return;
 	}
-	
+
 	Olsr_node_pEtx = *lst_search(oid);
-		
+
 	if( Btn_close_id == -1)
 	{
 		Btn_close_id = s3d_clone( Btn_close_obj );
@@ -798,9 +805,9 @@
 		s3d_flags_on(Btn_close_id,S3D_OF_VISIBLE|S3D_OF_SELECTABLE);
 		s3d_scale( Btn_close_id, 0.05 );
 		s3d_translate( Btn_close_id,-Left*3.0-0.125, -Bottom*3.0-0.7, -3.0 );
-		
+
 	}
-	
+
 	/*
 	distance = dirt(CamPosition[0],olsr_node->pos_vec,tmp_vector);
 	mov_add(ZeroPosition,tmp_vector,1.0);
@@ -815,7 +822,7 @@
 	s3d_flags_on( Olsr_ip_label_obj, S3D_OF_VISIBLE );
 	s3d_scale( Olsr_ip_label_obj, 0.2 );
 	s3d_translate( Olsr_ip_label_obj,-Left*3.0-(ln * 0.2)-0.15, -Bottom*3.0-1.0, -3.0 );
-	
+
 }
 
 void print_etx()
@@ -824,7 +831,7 @@
 	float p = 1.2;
 	int i;
 	float len = 0.0, max_len=0.0;
-	
+
 	if( Olsr_neighbour_label_obj != NULL )
 	{
 		/* int n = sizeof(Olsr_neighbour_label_obj) / sizeof(int);*/
@@ -850,12 +857,12 @@
 	{
 		char nIpStr[60];
 		float mEtx = ( tmpNeighbour->olsr_con->left_etx + tmpNeighbour->olsr_con->right_etx ) / 2;
-		
+
 		if( mEtx != -1000 )
 			snprintf(nIpStr, 60, "%15s --> %4.2f",(strcmp(Olsr_node_pEtx->ip,tmpNeighbour->olsr_con->right_olsr_node->ip)?tmpNeighbour->olsr_con->right_olsr_node->ip:tmpNeighbour->olsr_con->left_olsr_node->ip),mEtx);
 		else
 			snprintf(nIpStr, 60, "%15s --> HNA",(strcmp(Olsr_node_pEtx->ip,tmpNeighbour->olsr_con->right_olsr_node->ip)?tmpNeighbour->olsr_con->right_olsr_node->ip:tmpNeighbour->olsr_con->left_olsr_node->ip));
-		
+
 		Olsr_neighbour_label_obj[i] = s3d_draw_string( nIpStr, &len );
 		s3d_link(Olsr_neighbour_label_obj[i], 0);
 		s3d_flags_on(Olsr_neighbour_label_obj[i], S3D_OF_VISIBLE );
@@ -865,7 +872,7 @@
 		p += 0.2;
 		max_len = (len > max_len)?len+0.15:max_len;
 	}
-	
+
 	if( Btn_close_id != -1)
 	{
 		if( Output_border[0] == -1 )
@@ -880,21 +887,21 @@
 			}
 			s3d_push_vertex(Output_border[0], -Left*3.0-0.2,			-Bottom*3.0-0.7, -3.0);
 			s3d_push_vertex(Output_border[0], -Left*3.0-(max_len*0.2),	-Bottom*3.0-0.7, -3.0);
-	
+
 			s3d_push_vertex(Output_border[1], -Left*3.0-0.1,			-Bottom*3.0-0.8, -3.0);
 			s3d_push_vertex(Output_border[1], -Left*3.0-0.1,			-Bottom*3.0-p, 	-3.0);
-	
+
 			s3d_push_vertex(Output_border[2], -Left*3.0-0.1,			-Bottom*3.0-p, 	-3.0);
 			s3d_push_vertex(Output_border[2], -Left*3.0-(max_len*0.2),	-Bottom*3.0-p, 	-3.0);
-	
+
 			s3d_push_vertex(Output_border[3], -Left*3.0-(max_len*0.2),	-Bottom*3.0-0.7, -3.0);
 			s3d_push_vertex(Output_border[3], -Left*3.0-(max_len*0.2),	-Bottom*3.0-p, 	-3.0);
-	
+
 			s3d_push_line( Output_border[0], 0,1,0);
 			s3d_push_line( Output_border[1], 0,1,0);
 			s3d_push_line( Output_border[2], 0,1,0);
 			s3d_push_line( Output_border[3], 0,1,0);
-	
+
 			s3d_flags_on( Output_border[0], S3D_OF_VISIBLE);
 			s3d_flags_on( Output_border[1], S3D_OF_VISIBLE);
 			s3d_flags_on( Output_border[2], S3D_OF_VISIBLE);
@@ -911,13 +918,13 @@
 			s3d_pop_vertex(Output_border[3], 2);
 			s3d_push_vertex(Output_border[0], -Left*3.0-0.2,				-Bottom*3.0-0.7, -3.0);
 			s3d_push_vertex(Output_border[0], -Left*3.0-(max_len*0.2),	-Bottom*3.0-0.7, -3.0);
-	
+
 			s3d_push_vertex(Output_border[1], -Left*3.0-0.1,				-Bottom*3.0-0.8, -3.0);
 			s3d_push_vertex(Output_border[1], -Left*3.0-0.1,				-Bottom*3.0-p,	 -3.0);
-	
+
 			s3d_push_vertex(Output_border[2], -Left*3.0-0.1,				-Bottom*3.0-p,	 -3.0);
 			s3d_push_vertex(Output_border[2], -Left*3.0-(max_len*0.2),	-Bottom*3.0-p,	 -3.0);
-	
+
 			s3d_push_vertex(Output_border[3], -Left*3.0-(max_len*0.2),	-Bottom*3.0-0.7, -3.0);
 			s3d_push_vertex(Output_border[3], -Left*3.0-(max_len*0.2),	-Bottom*3.0-p, 	 -3.0);
 		}

Modified: trunk/apps/olsrs3d/olsrs3d.h
===================================================================
--- trunk/apps/olsrs3d/olsrs3d.h	2006-03-28 21:11:44 UTC (rev 240)
+++ trunk/apps/olsrs3d/olsrs3d.h	2006-03-29 18:23:33 UTC (rev 241)
@@ -104,6 +104,8 @@
 extern int Last_olsr_node_count;
 
 extern int Net_read_count;
+extern int Output_block_counter;
+extern int Output_block_completed;
 
 extern int ZeroPoint;
 

Modified: trunk/apps/olsrs3d/process.c
===================================================================
--- trunk/apps/olsrs3d/process.c	2006-03-28 21:11:44 UTC (rev 240)
+++ trunk/apps/olsrs3d/process.c	2006-03-29 18:23:33 UTC (rev 241)
@@ -174,7 +174,7 @@
 		/* we found the node */
 		if ( result == 0 ) {
 
-			(*olsr_node)->last_seen = 150;
+			(*olsr_node)->last_seen = Output_block_counter;
 
 			/* former invisble (deleted) node */
 			if ( (*olsr_node)->visible == 0 ) {
@@ -219,7 +219,7 @@
 		(*olsr_node)->node_type = 0;
 		(*olsr_node)->node_type_modified = 1;
 
-		(*olsr_node)->last_seen = 150;
+		(*olsr_node)->last_seen = Output_block_counter;
 		(*olsr_node)->visible = 1;
 
 		if ( Debug ) printf( "new olsr node: %s\n", (*olsr_node)->ip );
@@ -495,6 +495,10 @@
 
 			}
 
+		} else if ( ( (*lbuf_ptr) == '}' ) && ( (*(lbuf_ptr + 1)) == '\n' ) ) {
+
+			Output_block_completed = 1;
+
 		}
 
 		lbuf_ptr++;



From dotslash at berlios.de  Wed Mar 29 21:52:31 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Wed, 29 Mar 2006 21:52:31 +0200
Subject: [S3d-svn] r242 - in trunk: . apps/s3dfm
Message-ID: <200603291952.k2TJqVxU006838@sheep.berlios.de>

Author: dotslash
Date: 2006-03-29 21:51:57 +0200 (Wed, 29 Mar 2006)
New Revision: 242

Modified:
   trunk/TODO
   trunk/apps/s3dfm/main.c
Log:
- changes from the weekend

Modified: trunk/TODO
===================================================================
--- trunk/TODO	2006-03-29 18:23:33 UTC (rev 241)
+++ trunk/TODO	2006-03-29 19:51:57 UTC (rev 242)
@@ -1,4 +1,5 @@
 general:
+	* put s3d.h into ${PREFIX}/include/, not ${PREFIX}/include/s3d/
 	* svn add reset.3ds?!
 	* FULLSCREEN!
 dot_mcp:

Modified: trunk/apps/s3dfm/main.c
===================================================================
--- trunk/apps/s3dfm/main.c	2006-03-29 18:23:33 UTC (rev 241)
+++ trunk/apps/s3dfm/main.c	2006-03-29 19:51:57 UTC (rev 242)
@@ -97,10 +97,11 @@
 	float dss; /* dirstep size */
 	int dirn, dirc,dps;
 	int icon;
-	float vertices[]={	-1,-1,0,
-						-1, 1,0,
-						 1, 1,0,
-						 1,-1,0};
+	float vertices[]={	-1,-0.5,0,
+						-1, 0.5,0,
+						 1, 0.5,0,
+						 1,-0.5,0};
+	float d;
 	px=pz=0.0;
 	if (dir->disp)
 		return(-1); /* already displayed ... */ 
@@ -113,32 +114,36 @@
 			dirn++;
 	}
 	dps=ceil(sqrt(dir->n_item)); /* directories per line */
-	printf("having %d directories, %d per side. one is scaled down to %3.3f \n",dirn,dps,dss);
+	printf("directories per line: %d\n",dps);
 	root.icon=s3d_new_object();
 	for (i=0;i<dir->n_item;i++)
 	{
-		dir->list[i].px=((float)(i%dps)+0.5)/((float)dps)-0.5;
-		dir->list[i].pz=((float)i/dps+0.5)/((float)dps)-0.5;
+		dir->list[i].px=((float)((int)i%dps)+0.5)/((float)dps)-0.5;
+		dir->list[i].pz=((float)((int)i/dps)+0.5)/((float)dps)-0.5;
 		dir->list[i].block=s3d_new_object();
 		s3d_link(dir->list[i].block,dir->block);
-		s3d_push_vertices(dir->list[i].block,vertices,2);
+		s3d_push_vertices(dir->list[i].block,vertices,4);
+		d=((int)i%2)*0.2;
 		switch (dir->list[i].type)
 		{
 			case T_FOLDER:
 				s3d_push_material(dir->list[i].block,
-										1,1,0,
-										1,1,0,
-										1,1,0);
+										1-d,1-d,0,
+										1-d,1-d,0,
+										1-d,1-d,0);
 				break;
 			default:
 				s3d_push_material(dir->list[i].block,
-										0,0,1,
-										0,0,1,
-										0,0,1);
+										0,0,1-d,
+										0,0,1-d,
+										0,0,1-d);
 		};
 		s3d_push_polygon(dir->list[i].block,0,1,2,0);
 		s3d_push_polygon(dir->list[i].block,0,2,3,0);
-		s3d_scale(dir->list[i].block,1.0/((float)dps));
+		s3d_scale(dir->list[i].block,(float)1.0/((float)dps));
+		printf("scaling factor is %f\n",(float)1.0/((float)dps));
+		printf("moving to %3.3f %3.3f 1.0\n",dir->list[i].px,dir->list[i].pz);
+		s3d_translate(dir->list[i].block,dir->list[i].px*2,dir->list[i].pz+0.5,1.0);
 		s3d_flags_on(dir->list[i].block,S3D_OF_VISIBLE|S3D_OF_SELECTABLE);
 	}
 	dir->disp=1;



From dotslash at berlios.de  Wed Mar 29 22:48:06 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Wed, 29 Mar 2006 22:48:06 +0200
Subject: [S3d-svn] r243 - in trunk: . example server
Message-ID: <200603292048.k2TKm6so011637@sheep.berlios.de>

Author: dotslash
Date: 2006-03-29 22:48:05 +0200 (Wed, 29 Mar 2006)
New Revision: 243

Modified:
   trunk/
   trunk/example/ptrtest.c
   trunk/server/object.c
Log:
 r365 at balthasar:  dotslash | 2006-03-29 22:47:32 +0200
 - user programs can now modify system object positions (camera etc). hope it works good :) see ptrtest for demo.



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:341
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:365

Modified: trunk/example/ptrtest.c
===================================================================
--- trunk/example/ptrtest.c	2006-03-29 19:51:57 UTC (rev 242)
+++ trunk/example/ptrtest.c	2006-03-29 20:48:05 UTC (rev 243)
@@ -25,6 +25,7 @@
 #include <s3d.h>
 #include <stdio.h>  /*  NULL*/
 #include <time.h>	/* nanosleep() */
+#include <math.h>	/* sin(), cos() */
 int i;
 int o;
 float bottom=-1.0;
@@ -32,7 +33,7 @@
 float asp=1.0;
 float len=1.0;
 int alpha=0;
-static struct timespec t={0,100*1000*1000}; /* 100 mili seconds */
+static struct timespec t={0,10*1000*1000}; /* 100 mili seconds */
 void stop(struct s3d_evt *evt)
 {
 	s3d_quit();
@@ -40,8 +41,12 @@
 
 void mainloop()
 {
-	alpha=(alpha+5)%360;
+	float a;
+	alpha=(alpha+1)%360;
 	s3d_rotate(o,alpha,0,0);
+	a=(((float)alpha)*M_PI/180);
+	s3d_translate(0,sin(a)*30,0,30+cos(a)*30);
+	s3d_rotate(0,sin(a)*30,alpha,0);
 	nanosleep(&t,NULL); 
 }
 void object_info(struct s3d_evt *hrmz)
@@ -74,7 +79,7 @@
 	struct s3d_but_info *inf;
 	char s[256];
 	inf=(struct s3d_but_info *)hrmz->buf;
-	snprintf(s,256,"button %d, state %d", inf->button,inf->state);
+	snprintf(s,256,"please, watch your stomach! button %d, state %d", inf->button,inf->state);
 	printf("button %d, state %d\n", inf->button,inf->state);
 	s3d_del_object(o);
 	o=s3d_draw_string(s,&len);
@@ -87,7 +92,7 @@
 int main (int argc, char **argv)
 {
 	i=0;
-	if (!s3d_init(&argc,&argv,"ptrtest"))	
+	if (!s3d_init(&argc,&argv,"ptr and cam test"))	
 	{
 		s3d_set_callback(S3D_EVENT_OBJ_INFO,object_info);
 		s3d_set_callback(S3D_EVENT_MBUTTON,mbutton_press);

Modified: trunk/server/object.c
===================================================================
--- trunk/server/object.c	2006-03-29 19:51:57 UTC (rev 242)
+++ trunk/server/object.c	2006-03-29 20:48:05 UTC (rev 243)
@@ -1059,16 +1059,33 @@
 int obj_translate(struct t_process *p, uint32_t oid, float *transv)
 {
 	struct t_obj *obj;
+	struct t_process *mcp_p=get_proc_by_pid(MCP);
+	float v[3];
 	if (obj_valid(p,oid,obj))
 	{
-		if ((p->id==MCP) || (!(obj->oflags&OF_SYSTEM)))
+		dprintf(VLOW,"[translate|pid %d] %d: %3.3f %3.3f %3.3f",p->id,oid,obj->translate.x,obj->translate.y,obj->translate.z);
+		if ((p->id!=MCP) && (obj->oflags&OF_SYSTEM))
 		{
+			if (focus_oid==p->mcp_oid)
+			{
+				v[0]=transv[0];
+				v[1]=transv[1];
+				v[2]=transv[2];
+				mySetMatrix(mcp_p->object[p->mcp_oid]->m);
+				myTransform3f(v);
+/*				mySetMatrix(mcp_p->object[oid]->m);
+				myInvert();
+				myTransform3f(v);
+				dprintf(LOW,"%3.3f %3.3f %3.3f",v[0],v[1],v[2]);*/
+				obj_translate(mcp_p,oid,v);
+			} 
+		} else {
 			obj->translate.x=*transv;
 			obj->translate.y=*(transv+1);
 			obj->translate.z=*(transv+2);
-			dprintf(VLOW,"[translate|pid %d] %d: %3.3f %3.3f %3.3f",p->id,oid,obj->translate.x,obj->translate.y,obj->translate.z);
 			obj_pos_update(p,oid);
 		}
+
 	}
 	return(0);
 }
@@ -1076,11 +1093,22 @@
 int obj_rotate(struct t_process *p, uint32_t oid, float *rotv)
 {
 	struct t_obj *obj;
+	struct t_process *mcp_p=get_proc_by_pid(MCP);
+	float v[3];
 	float f;
 	if (obj_valid(p,oid,obj))
 	{
-		if ((p->id==MCP) || (!(obj->oflags&OF_SYSTEM)))
+		dprintf(VLOW,"[rotate|pid %d] %d: %3.3f %3.3f %3.3f",p->id,oid,obj->rotate.x,obj->rotate.y,obj->rotate.z);
+		if ((p->id!=MCP) && (obj->oflags&OF_SYSTEM))
 		{
+			if (focus_oid==p->mcp_oid)
+			{
+				v[0]=obj->rotate.x + (rotv[0] - obj->rotate.x);
+				v[1]=obj->rotate.y + (rotv[1] - obj->rotate.y);
+				v[2]=obj->rotate.z + (rotv[2] - obj->rotate.z);
+				obj_rotate(mcp_p,oid,v);
+			}
+		} else {
 			f=*rotv;
 			if (f<0.0)		f+=(float)((int)-f/360)*360;
 			if (f>360.0)	f+=(float)((int)f/360)*-360;
@@ -1093,7 +1121,6 @@
 			if (f<0.0)		f+=(float)((int)-f/360)*360;
 			if (f>360.0)	f+=(float)((int)f/360)*-360;
 			obj->rotate.z=f;
-			dprintf(VLOW,"[rotate|pid %d] %d: %3.3f %3.3f %3.3f",p->id,oid,obj->rotate.x,obj->rotate.y,obj->rotate.z);
 			obj_pos_update(p,oid);
 		}
 	}
@@ -1287,6 +1314,7 @@
 			o=mcp_p->object[o->linkid];
 		else o=NULL;
 	}
+	/* mov in the mcp space */
 	mySetMatrix(mcp_p->object[oid]->m);
 	v[0]=v[1]=v[2]=0.0;
 	myTransform3f(v);
@@ -1302,7 +1330,7 @@
 			o=mcp_p->object[o->linkid];
 		else o=NULL;
 	}
-
+	/* reverse in the application space */
 	mySetMatrix(mcp_p->object[p->mcp_oid]->m);
 	myInvert();
 	myTransform3f(v);



From dotslash at berlios.de  Thu Mar 30 18:40:46 2006
From: dotslash at berlios.de (dotslash at BerliOS)
Date: Thu, 30 Mar 2006 18:40:46 +0200
Subject: [S3d-svn] r244 - in trunk: . objs server
Message-ID: <200603301640.k2UGekDW002729@sheep.berlios.de>

Author: dotslash
Date: 2006-03-30 18:40:39 +0200 (Thu, 30 Mar 2006)
New Revision: 244

Added:
   trunk/objs/reset.3ds
Modified:
   trunk/
   trunk/TODO
   trunk/objs/Makefile.am
   trunk/server/TODO
   trunk/server/graphics.c
   trunk/server/graphics_sdl.c
   trunk/server/user_sdl.c
Log:
 r368 at balthasar:  dotslash | 2006-03-30 18:38:45 +0200
 - sdl framemode resizeable
 - reset icon was missing in the svn tree (click in the mcp and teleport back to [0,0,5])



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:365
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:368

Modified: trunk/TODO
===================================================================
--- trunk/TODO	2006-03-29 20:48:05 UTC (rev 243)
+++ trunk/TODO	2006-03-30 16:40:39 UTC (rev 244)
@@ -1,6 +1,4 @@
 general:
-	* put s3d.h into ${PREFIX}/include/, not ${PREFIX}/include/s3d/
-	* svn add reset.3ds?!
 	* FULLSCREEN!
 dot_mcp:
 	* sane paths for applications

Modified: trunk/objs/Makefile.am
===================================================================
--- trunk/objs/Makefile.am	2006-03-29 20:48:05 UTC (rev 243)
+++ trunk/objs/Makefile.am	2006-03-30 16:40:39 UTC (rev 244)
@@ -1,6 +1,7 @@
 objsdir=	$(pkgdatadir)/objs
 dist_objs_DATA = \
 	s3dstart.3ds \
+	reset.3ds \
 	internet.3ds \
 	katze_tail.3ds \
 	sec_p.3ds \

Added: trunk/objs/reset.3ds
===================================================================
(Binary files differ)


Property changes on: trunk/objs/reset.3ds
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Modified: trunk/server/TODO
===================================================================
--- trunk/server/TODO	2006-03-29 20:48:05 UTC (rev 243)
+++ trunk/server/TODO	2006-03-30 16:40:39 UTC (rev 244)
@@ -1,4 +1,5 @@
 HIGH:
+ - properly buffer incoming network traffic!!
 MED:
  - culling for selection-mode - do it with line-culling, not plane-culling!
  - stop networking grepping after some deadline to prevent DoS ...?

Modified: trunk/server/graphics.c
===================================================================
--- trunk/server/graphics.c	2006-03-29 20:48:05 UTC (rev 243)
+++ trunk/server/graphics.c	2006-03-30 16:40:39 UTC (rev 244)
@@ -373,14 +373,19 @@
 	glLoadIdentity();
 	glMultMatrixf(m);
 
-	glFlush();
 	switch (frame_mode)
 	{
 #ifdef G_GLUT
-		case FRAME_GLUT:glutSwapBuffers();break;
+		case FRAME_GLUT:
+				glFlush();
+				glutSwapBuffers();
+				break;
 #endif
 #ifdef G_SDL
-    	case FRAME_SDL:SDL_GL_SwapBuffers();break;
+    	case FRAME_SDL:
+				/* SDL will glFlush itself */
+				SDL_GL_SwapBuffers(); 
+				break;
 #endif
 #ifdef G_GLX
 		case FRAME_GLX:...

Modified: trunk/server/graphics_sdl.c
===================================================================
--- trunk/server/graphics_sdl.c	2006-03-29 20:48:05 UTC (rev 243)
+++ trunk/server/graphics_sdl.c	2006-03-30 16:40:39 UTC (rev 244)
@@ -26,16 +26,15 @@
 #include <SDL_opengl.h>
 #include <SDL.h>
 
+int SDLFlags = 0;					 /*  some flags for SDL */
 int graphics_init_sdl()
 {
     SDL_Surface *GLwin = NULL;
     SDL_VideoInfo *VideoInfo;
-    int SDLFlags = 0;				 /*  nothing */
     int rgb_size[3]; 				 /*  for SDL_GL attributes */
 	dprintf(MED,"Using SDL driver ...");
 	
-    SDLFlags = SDL_OPENGL;
-    SDLFlags |= SDL_GL_DOUBLEBUFFER;
+    SDLFlags = SDL_OPENGL | SDL_GL_DOUBLEBUFFER | SDL_HWPALETTE | SDL_RESIZABLE;
     if (SDL_Init(SDL_INIT_VIDEO) < 0)  		
 			errsf("SDL_Init()",SDL_GetError());
     if ((VideoInfo = (SDL_VideoInfo *)SDL_GetVideoInfo())==NULL)

Modified: trunk/server/user_sdl.c
===================================================================
--- trunk/server/user_sdl.c	2006-03-29 20:48:05 UTC (rev 243)
+++ trunk/server/user_sdl.c	2006-03-30 16:40:39 UTC (rev 244)
@@ -26,11 +26,14 @@
 #include <SDL.h>
 /*  this file reads user input */
 /*  this is done right now by SDL-polling */
+
+extern int SDLFlags;
 int user_init_sdl() {
 	return(0);
 }
 int user_main_sdl() {
   SDL_Event 	event;
+  SDL_Surface *GLwin = NULL;
   while (SDL_PollEvent(&event)) 
   {
 	switch (event.type)
@@ -91,8 +94,11 @@
 		case SDL_ACTIVEEVENT:		dprintf(VLOW,"SDL_ACTIVEEVENT");break;
 		case SDL_KEYUP:				dprintf(VLOW,"SDL_KEYUP");break;
 		case SDL_SYSWMEVENT:		dprintf(VLOW,"SDL_SYSWMEVENT");break;
-		case SDL_VIDEORESIZE:		dprintf(VLOW,"SDL_VIDEORESIZE");break;
-		case SDL_VIDEOEXPOSE:		dprintf(VLOW,"SDL_VIDEOEXPOSE");break;
+		case SDL_VIDEORESIZE:		if ((GLwin = SDL_SetVideoMode(event.resize.w,event.resize.h,16,SDLFlags))==NULL) 
+										errsf("SDL_SetVideoMode()",SDL_GetError());
+									graphics_reshape(event.resize.w,event.resize.h);
+									break;
+		case SDL_VIDEOEXPOSE:		dprintf(LOW,"SDL_VIDEOEXPOSE");break;
 		case SDL_USEREVENT:			dprintf(VLOW,"SDL_USEREVENT");break;
 		case SDL_JOYAXISMOTION:		dprintf(VLOW,"SDL_JOYAXISMOTION");break;
 		case SDL_JOYBALLMOTION:		dprintf(VLOW,"SDL_JOYBALLMOTION");break;



