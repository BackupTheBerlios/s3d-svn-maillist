From dotslash at mail.berlios.de  Sat Oct  6 14:31:16 2007
From: dotslash at mail.berlios.de (dotslash at BerliOS)
Date: Sat, 6 Oct 2007 14:31:16 +0200
Subject: [S3d-svn] r713 - trunk/libs3d
Message-ID: <200710061231.l96CVGTc000635@sheep.berlios.de>

Author: dotslash
Date: 2007-10-06 14:31:15 +0200 (Sat, 06 Oct 2007)
New Revision: 713

Modified:
   trunk/libs3d/io.c
Log:
- increase init timeout from 1 to 10 seconds

Modified: trunk/libs3d/io.c
===================================================================
--- trunk/libs3d/io.c	2007-09-24 19:37:45 UTC (rev 712)
+++ trunk/libs3d/io.c	2007-10-06 12:31:15 UTC (rev 713)
@@ -120,8 +120,8 @@
 	char      buf[258];    /*  server buffer */
 	int      i;
 	struct timespec   t = {
-		0, 10*1000*1000
-	}; /* 10 mili second */
+		0, 100*1000*1000
+	}; /* 100 mili second */
 
 	cb_lock = 1; /* don't bother while initiating ... is set to 0 after INIT packet received. */
 	if (NULL != (s = getenv("S3D"))) {



From dotslash at mail.berlios.de  Sat Oct  6 14:32:09 2007
From: dotslash at mail.berlios.de (dotslash at BerliOS)
Date: Sat, 6 Oct 2007 14:32:09 +0200
Subject: [S3d-svn] r714 - trunk/apps/meshs3d
Message-ID: <200710061232.l96CW9wE000794@sheep.berlios.de>

Author: dotslash
Date: 2007-10-06 14:32:09 +0200 (Sat, 06 Oct 2007)
New Revision: 714

Modified:
   trunk/apps/meshs3d/main.c
   trunk/apps/meshs3d/process.c
Log:
- commit for my friend, the big developer

Modified: trunk/apps/meshs3d/main.c
===================================================================
--- trunk/apps/meshs3d/main.c	2007-10-06 12:31:15 UTC (rev 713)
+++ trunk/apps/meshs3d/main.c	2007-10-06 12:32:09 UTC (rev 714)
@@ -148,7 +148,7 @@
 	if (!((node->mov_vec[0] == 0) && (node->mov_vec[1] == 0) && (node->mov_vec[2] == 0)) && node->visible) {
 		distance = dirt(node->pos_vec, null_vec, tmp_mov_vec);
 		mov_add(node->mov_vec, tmp_mov_vec, distance / 100);   /* move a little bit to point zero */
-		mov_add(node->mov_vec, tmp_mov_vec, 1);   /* move a little bit to point zero */
+//		mov_add(node->mov_vec, tmp_mov_vec, 1);   /* move a little bit to point zero */
 
 		if ((distance = dist(node->mov_vec, null_vec)) > 10.0)
 			mov_add(node->pos_vec, node->mov_vec, 1.0 / ((float) distance));
@@ -166,7 +166,7 @@
 
 	float distance;
 	float tmp_mov_vec[3], vertex_buf[6];
-	float f;
+	float f, wish_distance;
 	int ip[2];
 	struct node_con *con;
 	struct node *first_node, *sec_node;
@@ -175,21 +175,21 @@
 	if (con_hash->elements == 0)
 		return;
 	hashit1 = hashit2 = NULL;
+	printf("start iteration\n");
 	while (NULL != (hashit1 = hash_iterate(node_hash, hashit1))) {
 		first_node = (struct node *) hashit1->bucket->data;
 		while (NULL != (hashit2 = hash_iterate(node_hash, hashit2))) {
 			sec_node = (struct node *) hashit2->bucket->data;
-			if (first_node != sec_node) {
-				ip[0] = max(first_node->ip, sec_node->ip);
-				ip[1] = min(first_node->ip, sec_node->ip);
+			if (first_node != sec_node && (max(first_node->ip, sec_node->ip) == first_node->ip)) {
+				ip[0] = first_node->ip;
+				ip[1] = sec_node->ip;
 				distance = dirt(first_node->pos_vec, sec_node->pos_vec, tmp_mov_vec);
 				if (NULL != (con = hash_find(con_hash, ip))) {
 					/* we have a connection */
-					f = ((con->etx1_sqrt + con->etx2_sqrt) / 4.0) / distance;
-					mov_add(first_node->mov_vec, tmp_mov_vec,  1 / f - 1);
+					wish_distance = ((con->etx1_sqrt + con->etx2_sqrt)) + 4;
+					f = wish_distance / distance;
+					mov_add(first_node->mov_vec, tmp_mov_vec, (1 / f - 1));
 					mov_add(sec_node->mov_vec, tmp_mov_vec, -(1 / f - 1));
-					printf("------co---------\n%s %.2f %.2f %.2f\n%s %.2f %.2f %.2f\n", first_node->ip_string, first_node->mov_vec[0], first_node->mov_vec[1], first_node->mov_vec[2],
-					       sec_node->ip_string, sec_node->mov_vec[0], sec_node->mov_vec[1], sec_node->mov_vec[2]);
 
 					vertex_buf[0] = first_node->pos_vec[0];
 					vertex_buf[1] = first_node->pos_vec[1];
@@ -208,13 +208,9 @@
 				} else {
 					/* we have no connection */
 					if (distance < 0.1) distance = 0.1;
-					mov_add(first_node->mov_vec, tmp_mov_vec, 100 / (distance * distance));
-					mov_add(sec_node->mov_vec, tmp_mov_vec, -100 / (distance * distance));
-					printf("------nco---------\n%s %.2f %.2f %.2f\n%s %.2f %.2f %.2f\n", first_node->ip_string, first_node->mov_vec[0], first_node->mov_vec[1], first_node->mov_vec[2],
-					       sec_node->ip_string, sec_node->mov_vec[0], sec_node->mov_vec[1], sec_node->mov_vec[2]);
+					mov_add(first_node->mov_vec, tmp_mov_vec, -100 / (distance * distance));
+					mov_add(sec_node->mov_vec, tmp_mov_vec, 100 / (distance * distance));
 				}
-				move_meshnode(first_node);
-				move_meshnode(sec_node);
 			}
 		}
 		/* first_node = hash_find( node_hash, &con->ip[0] );
@@ -229,6 +225,10 @@
 		/* if ( f < Factor ) f = Factor; */
 
 	}
+	while (NULL != (hashit1 = hash_iterate(node_hash, hashit1))) {
+		first_node = (struct node *) hashit1->bucket->data;
+		move_meshnode(first_node);
+	}
 
 }
 
@@ -243,6 +243,7 @@
 
 	while ((net_result = net_main()) != 0) {
 		if (net_result == -1) {
+			printf("that's it folks\n");
 			s3d_quit();
 			break;
 		}
@@ -328,10 +329,13 @@
 			Global.obj_zero_point = s3d_new_object();
 			/* Output_border[0] = Output_border[1] = Output_border[2] = Output_border[3] = -1; */
 
+			printf("go, s3d\n");
 			s3d_mainloop(mainloop);
 			s3d_quit();
 			net_quit();
-		}
+			printf("that's it\n");
+		} else 
+			printf("s3d init failed\n");
 	}
 	return(0);
 }

Modified: trunk/apps/meshs3d/process.c
===================================================================
--- trunk/apps/meshs3d/process.c	2007-10-06 12:31:15 UTC (rev 713)
+++ trunk/apps/meshs3d/process.c	2007-10-06 12:32:09 UTC (rev 714)
@@ -128,12 +128,22 @@
 		con->ip[0] = ip[0];
 		con->ip[1] = ip[1];
 		con->color = 0;
-		con->obj_id = 0;
+		/* draw line */
+		con->obj_id = s3d_new_object();
+		s3d_push_material(con->obj_id,
+		                  1.0, 1.0, 1.0,
+		                  1.0, 1.0, 1.0,
+		                  1.0, 1.0, 1.0);
+		s3d_push_vertex(con->obj_id, 0, 0, 0);
+		s3d_push_vertex(con->obj_id, 0, 0, 0);
+		s3d_push_line(con->obj_id, 0, 1, 0);
+		s3d_flags_on(con->obj_id, S3D_OF_VISIBLE);
+
 		con->rgb = 0.00;
-		con->etx1 = 0.00;
-		con->etx2 = 0.00;
-		con->etx1_sqrt = 0.00;
-		con->etx2_sqrt = 0.00;
+		con->etx1 = 1.00;
+		con->etx2 = 1.00;
+		con->etx1_sqrt = 1.00;
+		con->etx2_sqrt = 1.00;
 		hash_add(con_hash, con);
 	}
 



From nichtsnutz at mail.berlios.de  Sun Oct  7 23:33:22 2007
From: nichtsnutz at mail.berlios.de (nichtsnutz at BerliOS)
Date: Sun, 7 Oct 2007 23:33:22 +0200
Subject: [S3d-svn] r715 - trunk/apps/meshs3d
Message-ID: <200710072133.l97LXMs8013935@sheep.berlios.de>

Author: nichtsnutz
Date: 2007-10-07 23:33:22 +0200 (Sun, 07 Oct 2007)
New Revision: 715

Modified:
   trunk/apps/meshs3d/main.c
   trunk/apps/meshs3d/meshs3d.h
   trunk/apps/meshs3d/process.c
Log:
add node counter



Modified: trunk/apps/meshs3d/main.c
===================================================================
--- trunk/apps/meshs3d/main.c	2007-10-06 12:32:09 UTC (rev 714)
+++ trunk/apps/meshs3d/main.c	2007-10-07 21:33:22 UTC (rev 715)
@@ -40,6 +40,8 @@
 
 /* global vars */
 struct glob Global;
+
+
 static struct timespec sleep_time = {
 	0, 100 * 1000 * 1000
 };   /* 100 mili seconds */
@@ -54,6 +56,11 @@
 	Global.obj_btn_close = 0;
 	Global.obj_s3d_url = 0;
 	Global.obj_zero_point = 0;
+	Global.obj_node_count = 0;
+	Global.node_count = 0;
+	Global.asp = 1.0;
+	Global.left = -1.0;
+	Global.bottom = -1.0;
 
 }
 
@@ -174,17 +181,23 @@
 
 	if (con_hash->elements == 0)
 		return;
+
 	hashit1 = hashit2 = NULL;
-	printf("start iteration\n");
+
 	while (NULL != (hashit1 = hash_iterate(node_hash, hashit1))) {
+
 		first_node = (struct node *) hashit1->bucket->data;
 		while (NULL != (hashit2 = hash_iterate(node_hash, hashit2))) {
+
 			sec_node = (struct node *) hashit2->bucket->data;
 			if (first_node != sec_node && (max(first_node->ip, sec_node->ip) == first_node->ip)) {
+
 				ip[0] = first_node->ip;
 				ip[1] = sec_node->ip;
 				distance = dirt(first_node->pos_vec, sec_node->pos_vec, tmp_mov_vec);
+
 				if (NULL != (con = hash_find(con_hash, ip))) {
+
 					/* we have a connection */
 					wish_distance = ((con->etx1_sqrt + con->etx2_sqrt)) + 4;
 					f = wish_distance / distance;
@@ -206,10 +219,12 @@
 					                );
 
 				} else {
+
 					/* we have no connection */
 					if (distance < 0.1) distance = 0.1;
 					mov_add(first_node->mov_vec, tmp_mov_vec, -100 / (distance * distance));
 					mov_add(sec_node->mov_vec, tmp_mov_vec, 100 / (distance * distance));
+
 				}
 			}
 		}
@@ -234,13 +249,31 @@
 
 void mainloop()
 {
-
+	static int last_count = 0;
 	int net_result;   /* result of function net_main */
+	char nc_str[20];
+	float str_len;
 
 	calc_node_mov();
 	handle_node();
-	/* move_nodes(); */
 
+	
+	if( Global.node_count && Global.node_count != last_count ) {
+
+		if( Global.obj_node_count ) s3d_del_object( Global.obj_node_count );
+		
+		snprintf(nc_str, 20, "node count: %d", Global.node_count );
+		Global.obj_node_count = s3d_draw_string( nc_str, &str_len );
+		
+		s3d_link( Global.obj_node_count, 0 );
+		s3d_flags_on( Global.obj_node_count, S3D_OF_VISIBLE );
+		s3d_scale( Global.obj_node_count, 0.2 );
+		s3d_translate( Global.obj_node_count, -Global.left * 3.0 - (str_len * 0.2), -Global.bottom * 3.0 - 0.7, -3.0 );
+		
+		last_count = Global.node_count;
+
+	}
+	
 	while ((net_result = net_main()) != 0) {
 		if (net_result == -1) {
 			printf("that's it folks\n");
@@ -252,7 +285,33 @@
 	return;
 }
 
+int object_info(struct s3d_evt *hrmz)
+{
+	struct s3d_obj_info *inf;
+	inf = (struct s3d_obj_info *)hrmz->buf;
+	s3dw_object_info(hrmz);
+	
+	if (inf->object == 0) {
+	
+		Global.asp = inf->scale;
+		
+		if ( Global.asp > 1.0) {
 
+			Global.bottom = -1.0;
+			Global.left = -Global.asp;
+
+		} else {
+
+			Global.bottom = (-1.0 / Global.asp);
+			Global.left = -1.0;
+
+		}
+
+	}
+
+	return(0);
+}
+
 int main(int argc, char *argv[])
 {
 	int optchar;
@@ -302,8 +361,10 @@
 	process_init();
 
 	if (!net_init(olsr_host)) {
-		/* s3d_set_callback(S3D_EVENT_OBJ_INFO,object_info);
-		s3d_set_callback(S3D_EVENT_OBJ_CLICK,object_click);
+		
+		s3d_set_callback( S3D_EVENT_OBJ_INFO, object_info );
+		
+		/*s3d_set_callback(S3D_EVENT_OBJ_CLICK,object_click);
 		s3d_set_callback(S3D_EVENT_KEY,keypress);
 		s3d_set_callback(S3D_EVENT_QUIT,stop); */
 

Modified: trunk/apps/meshs3d/meshs3d.h
===================================================================
--- trunk/apps/meshs3d/meshs3d.h	2007-10-06 12:32:09 UTC (rev 714)
+++ trunk/apps/meshs3d/meshs3d.h	2007-10-07 21:33:22 UTC (rev 715)
@@ -79,6 +79,11 @@
 	int obj_btn_close;
 	int obj_s3d_url;
 	int obj_zero_point;
+	int obj_node_count;
+	int node_count;
+	float asp;
+	float bottom;
+	float left;
 };
 
 extern char lbuf[MAXLINESIZE];

Modified: trunk/apps/meshs3d/process.c
===================================================================
--- trunk/apps/meshs3d/process.c	2007-10-06 12:32:09 UTC (rev 714)
+++ trunk/apps/meshs3d/process.c	2007-10-07 21:33:22 UTC (rev 715)
@@ -196,6 +196,7 @@
 		orig_node->obj_id = -1;
 		orig_node->desc_id = -1;
 		hash_add(node_hash, orig_node);
+		Global.node_count++;
 	}
 	return;
 }



From dotslash at mail.berlios.de  Mon Oct  8 15:06:18 2007
From: dotslash at mail.berlios.de (dotslash at BerliOS)
Date: Mon, 8 Oct 2007 15:06:18 +0200
Subject: [S3d-svn] r716 - in trunk: . apps/comptest
Message-ID: <200710081306.l98D6IIB013709@sheep.berlios.de>

Author: dotslash
Date: 2007-10-08 15:06:17 +0200 (Mon, 08 Oct 2007)
New Revision: 716

Modified:
   trunk/
   trunk/apps/comptest/comptest.c
Log:
 r2591 at kero:  dotslash | 2007-10-08 15:05:55 +0200
 - add more experimental stuff for the composite test (event handling etc)



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:2475
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:2591

Modified: trunk/apps/comptest/comptest.c
===================================================================
--- trunk/apps/comptest/comptest.c	2007-10-07 21:33:22 UTC (rev 715)
+++ trunk/apps/comptest/comptest.c	2007-10-08 13:06:17 UTC (rev 716)
@@ -78,9 +78,12 @@
 
 int xinit();
 void window_update(struct window *win, int x, int y, int width, int height);
+static int print_event(Display *dpy, XEvent *event);
+void event();
 
 void mainloop()
 {
+	event();
 	nanosleep(&t, NULL);
 }
 
@@ -92,14 +95,98 @@
 	return(i);
 }
 
-static int error(Display *COMPUNUSED(dpy), XErrorEvent *COMPUNUSED(event))
+static int print_event(Display *COMPUNUSED(dpy), XEvent *event)
 {
-	/*    printf ("error %d request %d minor %d serial %d\n",
-	        event->error_code, event->request_code, event->minor_code, event->serial);*/
-	return 0;
+	char *name = "unknown";
+	switch (event->type & 0x7f) {
+	case Expose:
+		name = "Expose";
+		break;
+	case MapNotify:
+		name = "Map";
+		break;
+	case UnmapNotify:
+		name = "Unmap";
+		break;
+	case ReparentNotify:
+		name = "Reparent";
+		break;
+	case CirculateNotify:
+		name = "Circulate";
+		break;
+	}
+	if ( event->type == xdamage.event + XDamageNotify ) {
+		XDamageNotifyEvent *e = (XDamageNotifyEvent*) event ;
+		// e->drawable is the window ID of the damaged window
+		// e->geometry is the geometry of the damaged window	
+		// e->area     is the bounding rect for the damaged area	
+		// e->damage   is the damage handle returned by XDamageCreate()
+
+		// Subtract all the damage, repairing the window.
+		name = "Damage!!";
+	}
+	else if ( event->type == ConfigureNotify ) {
+		XConfigureEvent *e = &event->xconfigure;	
+		// The windows size, position or Z index in the stacking
+		// order has changed
+		name = "Configure!!";
+	}
+
+
+	printf("Event: %s\n", name);
+	return(0);
+
+
 }
+/*static int error(Display *COMPUNUSED(dpy), XErrorEvent *COMPUNUSED(event))*/
+static int error(Display *COMPUNUSED(dpy), XErrorEvent *event)
+{
+	char *name = "";
+    int     o;
 
+    o = event->error_code - xfixes.error;
+    switch (o) {
+    case BadRegion:
+        name = "BadRegion";
+        break;
+    default:
+        break;
+    }
+    o = event->error_code - xdamage.error;
+    switch (o) {
+    case BadDamage:
+        name = "BadDamage";
+        break;
+    default:
+        break;
+    }
+    o = event->error_code - xrender.error;
+    switch (o) {
+    case BadPictFormat:
+        name = "BadPictFormat";
+        break;
+    case BadPicture:
+        name = "BadPicture";
+        break;
+    case BadPictOp:
+        name = "BadPictOp";
+        break;
+    case BadGlyphSet:
+        name = "BadGlyphSet";
+        break;
+    case BadGlyph:
+        name = "BadGlyph";
+        break;
+    default:
+        break;
+    }
 
+	 printf ("error %d (name: %s) request %d minor %d serial %d\n",
+	        event->error_code, name, event->request_code, event->minor_code, (int)event->serial);
+	return(0);
+}
+
+
 int xinit()
 {
 	dpy = XOpenDisplay(display);
@@ -234,6 +321,10 @@
 		return;
 	win->id = id;
 	XGetWindowAttributes(dpy, win->id, &win->attr);
+/*	XSelectInput(dpy, win->id, ExposureMask|ButtonPressMask|KeyPressMask*/
+	XSelectInput(dpy, win->id, ExposureMask
+					|SubstructureNotifyMask | ExposureMask | StructureNotifyMask | PropertyChangeMask);
+/*	XSelectInput(dpy, win->id, ExposureMask);*/
 	win->format = XRenderFindVisualFormat(dpy, win->attr.visual);
 
 	if (win->format != 0) {
@@ -348,7 +439,18 @@
 
 void event()
 {
-	/* XNextEvent (dpy, &ev);*/
+	XEvent event;
+	while (QLength(dpy)) {
+		XNextEvent(dpy, &event);
+		print_event(dpy, &event);
+		if ( event.type == xdamage.event + XDamageNotify ) {
+			XDamageNotifyEvent *e = (XDamageNotifyEvent*) &event ;
+			printf("window = %d, geometry = %d:%d (at %d:%d), area = %d:%d (at %d:%d)\n", 
+					e->drawable, e->geometry.width, e->geometry.height, e->geometry.x, e->geometry.y,
+					e->area.width, e->area.height, e->area.x, e->area.y);
+			XDamageSubtract(dpy, e->damage, None, None);
+		}
+	}
 }
 
 
@@ -365,6 +467,10 @@
 	if (!s3d_init(&argc, &argv, "compotest")) {
 		for (scr_no = 0; scr_no < ScreenCount(dpy); scr_no++) {
 			XCompositeRedirectSubwindows(dpy, RootWindow(dpy, scr_no), CompositeRedirectAutomatic);
+/*			XCompositeRedirectSubwindows(dpy, RootWindow(dpy, scr_no), CompositeRedirectManual);*/
+			XSelectInput(dpy, RootWindow(dpy, scr_no),
+						SubstructureNotifyMask | ExposureMask | StructureNotifyMask | PropertyChangeMask);
+
 			XQueryTree(dpy, RootWindow(dpy, scr_no), &root_return, &parent_return, &children, &nchildren);
 			for (i = 0; i < (int)nchildren; i++)
 				window_add(dpy, children[i]);



From nichtsnutz at mail.berlios.de  Mon Oct  8 22:23:11 2007
From: nichtsnutz at mail.berlios.de (nichtsnutz at BerliOS)
Date: Mon, 8 Oct 2007 22:23:11 +0200
Subject: [S3d-svn] r717 - trunk/apps/meshs3d
Message-ID: <200710082023.l98KNB7h017381@sheep.berlios.de>

Author: nichtsnutz
Date: 2007-10-08 22:23:11 +0200 (Mon, 08 Oct 2007)
New Revision: 717

Modified:
   trunk/apps/meshs3d/main.c
   trunk/apps/meshs3d/process.c
Log:
add ip string



Modified: trunk/apps/meshs3d/main.c
===================================================================
--- trunk/apps/meshs3d/main.c	2007-10-08 13:06:17 UTC (rev 716)
+++ trunk/apps/meshs3d/main.c	2007-10-08 20:23:11 UTC (rev 717)
@@ -115,11 +115,9 @@
 		if (node->node_type_modified) {
 
 			node->node_type_modified = 0;
-			if (node->obj_id != -1) {
-				s3d_del_object(node->obj_id);
-			}
+			if (node->obj_id) s3d_del_object(node->obj_id);
 
-			if (node->desc_id != -1) s3d_del_object(node->desc_id);
+			if (node->desc_id) s3d_del_object(node->desc_id);
 
 			if (node->node_type == 1) {
 				node->obj_id = s3d_clone(Global.obj_node_inet);
@@ -130,7 +128,14 @@
 			}
 
 			s3d_flags_on(node->obj_id, S3D_OF_VISIBLE | S3D_OF_SELECTABLE);
+			
+			node->desc_id = s3d_draw_string(node->ip_string, &node->desc_length);
+			s3d_link(node->desc_id, node->obj_id);
+			s3d_translate(node->desc_id, - node->desc_length / 2, -2, 0);
+			s3d_flags_on(node->desc_id, S3D_OF_VISIBLE);
 
+			node->node_type_modified = 0;
+
 		}
 	}
 	return;

Modified: trunk/apps/meshs3d/process.c
===================================================================
--- trunk/apps/meshs3d/process.c	2007-10-08 13:06:17 UTC (rev 716)
+++ trunk/apps/meshs3d/process.c	2007-10-08 20:23:11 UTC (rev 717)
@@ -193,8 +193,8 @@
 		orig_node->pos_vec[2] = ((float) 2.0 * rand()) / RAND_MAX - 1.0;
 		orig_node->mov_vec[0] = orig_node->mov_vec[1] = orig_node->mov_vec[2] = 0.0;
 
-		orig_node->obj_id = -1;
-		orig_node->desc_id = -1;
+		orig_node->obj_id = 0;
+		orig_node->desc_id = 0;
 		hash_add(node_hash, orig_node);
 		Global.node_count++;
 	}



From nichtsnutz at mail.berlios.de  Mon Oct  8 22:27:24 2007
From: nichtsnutz at mail.berlios.de (nichtsnutz at BerliOS)
Date: Mon, 8 Oct 2007 22:27:24 +0200
Subject: [S3d-svn] r718 - trunk/apps/meshs3d
Message-ID: <200710082027.l98KROWV017595@sheep.berlios.de>

Author: nichtsnutz
Date: 2007-10-08 22:27:24 +0200 (Mon, 08 Oct 2007)
New Revision: 718

Modified:
   trunk/apps/meshs3d/main.c
Log:
fix node type


Modified: trunk/apps/meshs3d/main.c
===================================================================
--- trunk/apps/meshs3d/main.c	2007-10-08 20:23:11 UTC (rev 717)
+++ trunk/apps/meshs3d/main.c	2007-10-08 20:27:24 UTC (rev 718)
@@ -114,26 +114,25 @@
 		node = (struct node *) hashit->bucket->data;
 		if (node->node_type_modified) {
 
-			node->node_type_modified = 0;
-			if (node->obj_id) s3d_del_object(node->obj_id);
 
+			if (node->obj_id) s3d_del_object(node->obj_id);
 			if (node->desc_id) s3d_del_object(node->desc_id);
 
-			if (node->node_type == 1) {
+			if (node->node_type == 1)
 				node->obj_id = s3d_clone(Global.obj_node_inet);
-			} else if (node->node_type == 2) {
+			else if (node->node_type == 2)
 				node->obj_id = s3d_clone(Global.obj_node_hna);
-			} else {
+			else
 				node->obj_id = s3d_clone(Global.obj_node_normal);
-			}
 
+
 			s3d_flags_on(node->obj_id, S3D_OF_VISIBLE | S3D_OF_SELECTABLE);
 			
 			node->desc_id = s3d_draw_string(node->ip_string, &node->desc_length);
 			s3d_link(node->desc_id, node->obj_id);
 			s3d_translate(node->desc_id, - node->desc_length / 2, -2, 0);
 			s3d_flags_on(node->desc_id, S3D_OF_VISIBLE);
-
+			
 			node->node_type_modified = 0;
 
 		}



From nichtsnutz at mail.berlios.de  Mon Oct  8 22:41:54 2007
From: nichtsnutz at mail.berlios.de (nichtsnutz at BerliOS)
Date: Mon, 8 Oct 2007 22:41:54 +0200
Subject: [S3d-svn] r719 - trunk/apps/meshs3d
Message-ID: <200710082041.l98Kfs0W018650@sheep.berlios.de>

Author: nichtsnutz
Date: 2007-10-08 22:41:53 +0200 (Mon, 08 Oct 2007)
New Revision: 719

Added:
   trunk/apps/meshs3d/dump.data
Modified:
   trunk/apps/meshs3d/main.c
Log:
add dump


Added: trunk/apps/meshs3d/dump.data
===================================================================
--- trunk/apps/meshs3d/dump.data	2007-10-08 20:27:24 UTC (rev 718)
+++ trunk/apps/meshs3d/dump.data	2007-10-08 20:41:53 UTC (rev 719)
@@ -0,0 +1,2837 @@
+digraph topology
+{
+"104.131.131.1" -> "104.131.0.71"[label="0.00", style=dashed];
+"104.131.131.1" -> "104.131.0.42"[label="58.29", style=solid];
+"104.131.0.42"[shape=box];
+"104.131.131.1" -> "104.131.0.55"[label="7.02", style=solid];
+"104.131.131.1" -> "104.131.1.2"[label="38.03", style=solid];
+"104.131.1.2"[shape=box];
+"104.131.131.1" -> "104.131.0.3"[label="1.67", style=solid];
+"104.131.0.3"[shape=box];
+"104.131.131.1" -> "104.131.131.3"[label="53.68", style=solid];
+"104.131.131.3"[shape=box];
+"104.131.131.1" -> "104.131.83.77"[label="24.95", style=solid];
+"104.131.83.77"[shape=box];
+"104.131.131.1" -> "104.131.0.147"[label="0.00", style=dashed];
+"104.192.0.40" -> "104.192.192.166"[label="2.06"];
+"104.129.0.107" -> "104.129.0.77"[label="1.52"];
+"104.129.0.107" -> "104.129.81.1"[label="1.67"];
+"104.129.0.107" -> "104.129.1.43"[label="1.42"];
+"104.129.0.107" -> "104.129.1.44"[label="1.04"];
+"104.65.0.42" -> "104.0.7.254"[label="11.56"];
+"104.65.0.42" -> "104.0.0.6"[label="6.54"];
+"104.129.0.234" -> "104.129.37.2"[label="2.14"];
+"104.129.108.1" -> "104.129.105.2"[label="1.80"];
+"104.129.108.1" -> "104.129.105.10"[label="1.18"];
+"104.129.108.1" -> "104.129.103.1"[label="1.16"];
+"104.129.108.1" -> "104.129.103.19"[label="1.30"];
+"104.129.108.1" -> "104.129.0.91"[label="1.17"];
+"104.129.108.1" -> "104.129.0.165"[label="4.82"];
+"104.66.0.46" -> "104.66.0.8"[label="1.23"];
+"104.66.0.46" -> "104.66.0.24"[label="1.46"];
+"104.129.0.108" -> "104.129.0.239"[label="1.50"];
+"104.129.0.108" -> "104.129.0.95"[label="1.24"];
+"104.129.0.108" -> "104.129.0.8"[label="1.50"];
+"104.130.1.110" -> "104.130.1.97"[label="36.78"];
+"104.130.1.110" -> "104.130.27.176"[label="7.95"];
+"104.130.1.110" -> "104.130.3.3"[label="18.30"];
+"104.130.1.110" -> "104.130.17.17"[label="2.80"];
+"104.130.1.110" -> "104.130.1.157"[label="2.09"];
+"104.129.0.239" -> "104.129.0.108"[label="1.53"];
+"104.129.0.239" -> "104.129.0.125"[label="0.00"];
+"104.129.0.239" -> "104.129.0.95"[label="1.38"];
+"104.129.0.239" -> "104.129.37.2"[label="2.55"];
+"104.129.0.239" -> "104.129.0.8"[label="1.63"];
+"104.129.0.239" -> "104.129.1.10"[label="53.87"];
+"104.129.0.239" -> "104.129.1.17"[label="0.00"];
+"104.129.0.110" -> "104.129.0.123"[label="0.00"];
+"104.129.0.110" -> "104.129.0.219"[label="0.00"];
+"104.129.0.110" -> "104.129.0.82"[label="7.90"];
+"104.129.0.110" -> "104.129.37.2"[label="27.44"];
+"104.129.0.110" -> "104.129.1.17"[label="110.59"];
+"104.192.0.32" -> "104.192.192.1"[label="40.14"];
+"104.192.0.32" -> "104.192.192.225"[label="2.20"];
+"104.192.0.32" -> "104.192.0.39"[label="3.94"];
+"104.192.0.32" -> "104.192.192.199"[label="4.01"];
+"104.66.0.34" -> "104.66.0.30"[label="7.36"];
+"104.66.0.34" -> "104.66.107.4"[label="3.63"];
+"104.66.0.34" -> "104.66.0.249"[label="1.15"];
+"104.66.0.34" -> "104.66.0.203"[label="1.90"];
+"104.66.0.34" -> "104.66.77.4"[label="14.34"];
+"104.192.192.225" -> "104.135.0.1"[label="19.03"];
+"104.192.192.225" -> "104.192.0.32"[label="8.60"];
+"104.192.192.225" -> "104.192.192.99"[label="1.02"];
+"104.192.192.225" -> "104.192.0.39"[label="0.00"];
+"104.192.192.225" -> "104.130.1.65"[label="0.00"];
+"104.192.192.225" -> "104.192.192.66"[label="1.00"];
+"104.192.192.225" -> "104.192.192.199"[label="1.00"];
+"104.192.192.225" -> "104.198.65.81"[label="3.34"];
+"104.192.192.225" -> "104.192.192.33"[label="1.01"];
+"104.192.192.225" -> "104.192.192.166"[label="1.00"];
+"104.192.192.225" -> "104.192.192.177"[label="1.00"];
+"104.192.192.225" -> "104.192.192.1"[label="1.00"];
+"104.192.192.225" -> "104.130.100.100"[label="10.15"];
+"104.192.192.225" -> "104.192.192.133"[label="1.00"];
+"104.130.1.97" -> "104.130.17.17"[label="0.00"];
+"104.130.1.97" -> "104.130.1.110"[label="17.82"];
+"104.130.1.97" -> "104.130.27.176"[label="106.60"];
+"104.130.1.97" -> "104.130.3.3"[label="0.00"];
+"104.130.1.97" -> "104.130.1.157"[label="1.56"];
+"104.192.192.99" -> "104.192.192.225"[label="1.00"];
+"104.192.192.99" -> "104.192.0.52"[label="31.64"];
+"104.192.192.99" -> "104.192.192.66"[label="1.00"];
+"104.192.192.99" -> "104.192.192.199"[label="1.00"];
+"104.192.192.99" -> "104.66.0.30"[label="9.34"];
+"104.192.192.99" -> "104.192.192.33"[label="1.00"];
+"104.192.192.99" -> "104.192.103.3"[label="3.38"];
+"104.192.192.99" -> "104.192.192.166"[label="1.00"];
+"104.192.192.99" -> "104.193.24.100"[label="4.11"];
+"104.192.192.99" -> "104.192.192.177"[label="2.01"];
+"104.192.192.99" -> "104.66.77.4"[label="4.17"];
+"104.192.192.99" -> "104.66.0.201"[label="4.61"];
+"104.192.192.99" -> "104.192.192.1"[label="1.00"];
+"104.192.192.99" -> "104.192.192.133"[label="1.00"];
+"104.0.7.100" -> "104.0.7.254"[label="2.68"];
+"104.198.65.97" -> "104.130.77.5"[label="3.21"];
+"104.198.65.97" -> "104.130.77.1"[label="3.98"];
+"104.198.65.97" -> "104.130.1.66"[label="46.12"];
+"104.198.65.97" -> "104.198.65.65"[label="1.46"];
+"104.198.65.97" -> "104.130.77.78"[label="0.00"];
+"104.192.0.38" -> "104.130.1.65"[label="4.36"];
+"104.192.0.38" -> "104.12.1.6"[label="7.37"];
+"104.130.10.111" -> "104.12.1.6"[label="2.50"];
+"104.130.10.111" -> "104.131.25.14"[label="20.58"];
+"104.192.0.39" -> "104.192.0.32"[label="4.61"];
+"104.192.0.39" -> "104.192.192.225"[label="16.67"];
+"104.66.0.58" -> "104.66.0.49"[label="8.60"];
+"104.0.7.254" -> "104.131.9.1"[label="10.63"];
+"104.0.7.254" -> "104.7.2.1"[label="56.06"];
+"104.0.7.254" -> "104.23.0.2"[label="11.09"];
+"104.0.7.254" -> "104.0.7.100"[label="2.58"];
+"104.0.7.254" -> "104.69.0.69"[label="62.83"];
+"104.0.7.254" -> "104.65.0.42"[label="10.92"];
+"104.129.0.123" -> "104.129.0.110"[label="29.21"];
+"104.129.0.123" -> "104.129.0.77"[label="22.83"];
+"104.129.0.123" -> "104.129.0.161"[label="4.11"];
+"104.129.0.123" -> "104.129.37.2"[label="36.86"];
+"104.129.0.123" -> "104.129.0.8"[label="182.14"];
+"104.129.0.123" -> "104.131.9.1"[label="37.81"];
+"104.129.0.125" -> "104.129.0.239"[label="50.49"];
+"104.129.0.125" -> "104.129.0.219"[label="14.83"];
+"104.129.0.125" -> "104.129.0.95"[label="5.04"];
+"104.129.0.125" -> "104.192.192.166"[label="270.94"];
+"104.129.0.125" -> "104.129.0.8"[label="81.79"];
+"104.129.0.125" -> "104.129.1.10"[label="6.36"];
+"104.129.0.125" -> "104.129.1.11"[label="12.47"];
+"104.129.0.125" -> "104.192.192.133"[label="0.00"];
+"104.131.21.104" -> "104.131.21.101"[label="0.00"];
+"104.131.21.104" -> "104.131.21.21"[label="4.93"];
+"104.131.21.104" -> "104.131.21.1"[label="18.53"];
+"104.202.53.1" -> "104.203.0.1"[label="2.11"];
+"104.202.53.1" -> "104.192.192.66"[label="162.56"];
+"104.202.53.1" -> "104.202.19.1"[label="1.55"];
+"104.202.53.1" -> "104.192.192.33"[label="0.00"];
+"104.202.53.1" -> "104.0.0.6"[label="41.68"];
+"104.131.21.105" -> "104.131.21.101"[label="0.00"];
+"104.131.21.105" -> "104.131.21.21"[label="1.80"];
+"104.131.21.105" -> "104.131.21.1"[label="8.42"];
+"104.131.21.102" -> "104.131.21.101"[label="1.06"];
+"104.131.21.102" -> "104.131.21.34"[label="1.06"];
+"104.131.21.102" -> "104.131.21.21"[label="1.21"];
+"104.131.21.102" -> "104.131.21.12"[label="1.02"];
+"104.66.0.49" -> "104.66.0.58"[label="35.42"];
+"104.66.0.49" -> "104.66.0.203"[label="4.03"];
+"104.131.21.101" -> "104.131.21.104"[label="0.00"];
+"104.131.21.101" -> "104.131.21.102"[label="1.12"];
+"104.131.21.101" -> "104.131.21.34"[label="1.09"];
+"104.131.21.101" -> "104.131.21.21"[label="1.88"];
+"104.131.21.101" -> "104.131.21.12"[label="1.13"];
+"104.131.21.101" -> "104.131.21.1"[label="9.22"];
+"104.192.0.52" -> "104.192.192.99"[label="28.62"];
+"104.192.0.52" -> "104.192.192.66"[label="2.40"];
+"104.192.0.52" -> "104.192.0.20"[label="3.27"];
+"104.192.0.52" -> "104.192.192.33"[label="5.68"];
+"104.192.0.52" -> "104.193.24.100"[label="67.73"];
+"104.192.0.52" -> "104.192.0.75"[label="1.25"];
+"104.131.0.245" -> "104.131.25.12"[label="1.12"];
+"104.0.200.1" -> "104.12.0.225"[label="1.45"];
+"104.0.200.1" -> "104.13.1.97"[label="2.80"];
+"104.0.200.1" -> "104.12.0.105"[label="9.96"];
+"104.0.200.1" -> "104.13.3.241"[label="5.86"];
+"104.0.200.1" -> "104.12.9.89"[label="1.27"];
+"104.0.200.1" -> "104.13.3.33"[label="1.14"];
+"104.0.200.1" -> "104.12.0.183"[label="29.61"];
+"104.0.200.1" -> "104.13.0.50"[label="3.03"];
+"104.0.200.1" -> "104.13.3.57"[label="9.51"];
+"104.0.200.1" -> "104.13.1.2"[label="14.77"];
+"104.0.200.1" -> "104.12.0.8"[label="1.58"];
+"104.0.200.1" -> "104.13.138.1"[label="3.66"];
+"104.0.200.1" -> "104.13.0.17"[label="2.53"];
+"104.0.200.1" -> "104.13.0.155"[label="33.29"];
+"104.72.0.1" -> "104.202.19.1"[label="10.04"];
+"104.131.0.74" -> "104.131.25.14"[label="2.56"];
+"104.200.0.1" -> "104.200.0.10"[label="1.00"];
+"104.192.103.109" -> "104.192.103.200"[label="35.65"];
+"104.192.103.109" -> "104.192.99.103"[label="1.36"];
+"104.192.103.109" -> "104.192.103.44"[label="3.73"];
+"104.192.103.109" -> "104.192.192.133"[label="52.44"];
+"104.203.0.1" -> "104.202.53.1"[label="2.09"];
+"104.203.0.1" -> "104.202.19.1"[label="1.43"];
+"104.130.77.5" -> "104.198.65.97"[label="4.47"];
+"104.130.77.5" -> "104.130.77.1"[label="2.06"];
+"104.130.77.5" -> "104.130.1.66"[label="23.06"];
+"104.130.77.5" -> "104.130.77.79"[label="1.00"];
+"104.130.77.5" -> "104.130.77.78"[label="1.00"];
+"104.130.77.5" -> "104.130.77.77"[label="1.00"];
+"104.201.0.3" -> "104.201.0.4"[label="1.59"];
+"104.201.0.3" -> "104.0.0.6"[label="3.13"];
+"104.130.1.73" -> "104.130.1.67"[label="3.84"];
+"104.130.1.73" -> "104.65.5.3"[label="130.05"];
+"104.130.1.73" -> "104.131.34.1"[label="4.94"];
+"104.130.1.73" -> "104.130.77.77"[label="67.73"];
+"104.130.1.73" -> "104.129.31.3"[label="6.03"];
+"104.66.0.8" -> "104.66.0.46"[label="1.27"];
+"104.66.0.8" -> "104.66.0.24"[label="1.37"];
+"104.129.46.100" -> "104.129.0.77"[label="2.80"];
+"104.129.46.100" -> "104.129.81.1"[label="1.54"];
+"104.129.46.100" -> "104.129.18.1"[label="2.72"];
+"104.12.0.192" -> "104.12.0.43"[label="106.60"];
+"104.12.0.192" -> "104.12.0.136"[label="1.71"];
+"104.129.0.77" -> "104.129.0.107"[label="1.93"];
+"104.129.0.77" -> "104.129.0.123"[label="38.89"];
+"104.129.0.77" -> "104.129.46.100"[label="2.80"];
+"104.129.0.77" -> "104.129.81.1"[label="1.37"];
+"104.129.0.77" -> "104.129.1.43"[label="2.07"];
+"104.129.0.77" -> "104.129.1.44"[label="8.08"];
+"104.0.4.200" -> "104.0.4.65"[label="15.88"];
+"104.0.4.200" -> "104.0.4.161"[label="17.48"];
+"104.0.4.200" -> "104.0.0.17"[label="1.00"];
+"104.201.0.4" -> "104.201.0.3"[label="1.18"];
+"104.198.65.73" -> "104.198.65.81"[label="1.27"];
+"104.130.77.1" -> "104.198.65.97"[label="5.22"];
+"104.130.77.1" -> "104.130.77.5"[label="1.61"];
+"104.130.77.1" -> "104.130.77.79"[label="1.40"];
+"104.130.77.1" -> "104.130.77.77"[label="2.06"];
+"104.65.5.4" -> "104.65.5.3"[label="2.31"];
+"104.65.5.4" -> "104.192.192.199"[label="4.48"];
+"104.65.5.4" -> "104.192.192.166"[label="6.34"];
+"104.130.1.67" -> "104.130.1.73"[label="3.15"];
+"104.130.1.67" -> "104.130.1.66"[label="1.00"];
+"104.130.1.67" -> "104.130.1.65"[label="1.00"];
+"104.130.1.67" -> "104.0.4.65"[label="1.00"];
+"104.130.1.67" -> "104.131.34.1"[label="2.87"];
+"104.130.1.67" -> "104.131.9.2"[label="6.89"];
+"104.130.1.67" -> "104.131.9.1"[label="38.64"];
+"104.130.1.67" -> "104.131.10.2"[label="7.16"];
+"104.130.1.67" -> "104.12.1.6"[label="56.30"];
+"104.130.1.67" -> "104.131.9.6"[label="0.00"];
+"104.130.1.67" -> "104.130.1.131"[label="5.37"];
+"104.130.1.67" -> "104.130.1.6"[label="9.11"];
+"104.130.1.67" -> "104.130.1.154"[label="0.00"];
+"104.130.1.67" -> "104.129.1.28"[label="10.43"];
+"104.130.1.67" -> "104.131.83.77"[label="34.30"];
+"104.130.1.67" -> "104.129.31.3"[label="10.21"];
+"104.130.1.67" -> "104.130.30.1"[label="3.85"];
+"104.130.1.67" -> "104.130.30.3"[label="29.03"];
+"104.130.1.67" -> "104.130.1.16"[label="2.55"];
+"104.130.1.67" -> "104.130.30.9"[label="7.36"];
+"104.192.2.2" -> "104.192.103.3"[label="1.12"];
+"104.193.1.1" -> "104.0.3.81"[label="1.00"];
+"104.130.1.66" -> "104.192.192.225"[label="0.00"];
+"104.130.1.66" -> "104.198.65.97"[label="46.92"];
+"104.130.1.66" -> "104.130.77.5"[label="14.45"];
+"104.130.1.66" -> "104.130.1.67"[label="1.00"];
+"104.130.1.66" -> "104.130.1.65"[label="1.00"];
+"104.130.1.66" -> "104.0.4.65"[label="1.00"];
+"104.130.1.66" -> "104.198.23.1"[label="92.63"];
+"104.130.1.66" -> "104.130.1.45"[label="3.68"];
+"104.130.1.66" -> "104.130.1.162"[label="2.84"];
+"104.130.1.66" -> "104.130.77.79"[label="6.45"];
+"104.130.1.66" -> "104.130.77.77"[label="3.46"];
+"104.130.1.66" -> "104.130.100.100"[label="8.24"];
+"104.130.1.66" -> "104.130.1.6"[label="1.84"];
+"104.130.1.66" -> "104.135.0.1"[label="68.30"];
+"104.130.1.66" -> "104.130.1.154"[label="1.00"];
+"104.130.1.66" -> "104.130.30.1"[label="0.00"];
+"104.200.0.10" -> "104.200.0.1"[label="1.00"];
+"104.200.0.10" -> "104.192.192.33"[label="3.27"];
+"104.192.192.66" -> "104.192.192.225"[label="1.00"];
+"104.192.192.66" -> "104.192.192.99"[label="1.00"];
+"104.192.192.66" -> "104.192.0.52"[label="2.44"];
+"104.192.192.66" -> "104.193.0.2"[label="1.52"];
+"104.192.192.66" -> "104.192.192.199"[label="1.00"];
+"104.192.192.66" -> "104.192.0.20"[label="1.54"];
+"104.192.192.66" -> "104.192.192.33"[label="1.00"];
+"104.192.192.66" -> "104.192.192.166"[label="1.00"];
+"104.192.192.66" -> "104.193.24.100"[label="2.07"];
+"104.192.192.66" -> "104.192.192.177"[label="2.01"];
+"104.192.192.66" -> "104.192.192.1"[label="1.00"];
+"104.192.192.66" -> "104.192.192.133"[label="1.00"];
+"104.130.1.65" -> "104.192.192.225"[label="0.00"];
+"104.130.1.65" -> "104.192.0.38"[label="3.79"];
+"104.130.1.65" -> "104.130.1.67"[label="1.00"];
+"104.130.1.65" -> "104.130.1.66"[label="1.00"];
+"104.130.1.65" -> "104.0.4.65"[label="1.00"];
+"104.130.1.65" -> "104.65.5.3"[label="9.66"];
+"104.130.1.65" -> "104.192.192.199"[label="14.61"];
+"104.130.1.65" -> "104.131.34.1"[label="127.50"];
+"104.130.1.65" -> "104.130.77.77"[label="11.18"];
+"104.130.1.65" -> "104.130.1.154"[label="1.00"];
+"104.131.0.192" -> "104.131.25.16"[label="2.24"];
+"104.193.0.2" -> "104.192.192.66"[label="1.60"];
+"104.13.0.73" -> "104.13.0.97"[label="3.81"];
+"104.13.0.73" -> "104.13.0.71"[label="2.04"];
+"104.13.0.73" -> "104.13.0.74"[label="1.36"];
+"104.13.0.73" -> "104.13.0.38"[label="2.13"];
+"104.13.0.73" -> "104.13.3.33"[label="1.00"];
+"104.7.2.193" -> "104.7.2.65"[label="1.33"];
+"104.7.2.65" -> "104.7.2.193"[label="1.11"];
+"104.7.2.65" -> "104.7.2.1"[label="2.37"];
+"104.131.0.71" -> "104.131.1.2"[label="8.56"];
+"104.0.4.65" -> "104.0.4.200"[label="18.11"];
+"104.0.4.65" -> "104.130.1.67"[label="1.00"];
+"104.0.4.65" -> "104.130.1.66"[label="1.00"];
+"104.0.4.65" -> "104.130.1.65"[label="1.00"];
+"104.0.4.65" -> "104.0.4.161"[label="20.41"];
+"104.0.4.65" -> "104.130.1.154"[label="1.00"];
+"104.0.4.65" -> "104.0.0.17"[label="2.38"];
+"104.198.65.65" -> "104.198.65.97"[label="1.46"];
+"104.192.192.199" -> "104.192.0.32"[label="17.53"];
+"104.192.192.199" -> "104.192.192.225"[label="1.00"];
+"104.192.192.199" -> "104.192.192.99"[label="1.00"];
+"104.192.192.199" -> "104.65.5.4"[label="4.88"];
+"104.192.192.199" -> "104.130.1.65"[label="17.84"];
+"104.192.192.199" -> "104.192.192.66"[label="1.00"];
+"104.192.192.199" -> "104.131.34.1"[label="0.00"];
+"104.192.192.199" -> "104.192.192.33"[label="1.00"];
+"104.192.192.199" -> "104.192.192.166"[label="1.00"];
+"104.192.192.199" -> "104.192.192.177"[label="1.00"];
+"104.192.192.199" -> "104.192.192.1"[label="1.00"];
+"104.192.192.199" -> "104.192.192.133"[label="1.00"];
+"104.192.192.199" -> "104.135.0.1"[label="17.93"];
+"104.129.1.71" -> "104.129.37.2"[label="8.49"];
+"104.129.1.71" -> "104.129.1.18"[label="1.57"];
+"104.65.5.3" -> "104.130.1.73"[label="123.86"];
+"104.65.5.3" -> "104.65.5.4"[label="2.16"];
+"104.65.5.3" -> "104.130.1.65"[label="11.38"];
+"104.65.5.3" -> "104.12.1.6"[label="22.90"];
+"104.202.19.1" -> "104.202.53.1"[label="1.33"];
+"104.202.19.1" -> "104.202.0.2"[label="3.70"];
+"104.202.19.1" -> "104.72.0.1"[label="8.93"];
+"104.202.19.1" -> "104.203.0.1"[label="1.59"];
+"104.198.65.94" -> "104.198.65.81"[label="1.00"];
+"104.129.0.219" -> "104.129.0.125"[label="73.72"];
+"104.129.0.219" -> "104.129.0.110"[label="1.40"];
+"104.129.0.219" -> "104.129.0.82"[label="4.52"];
+"104.66.0.24" -> "104.66.0.46"[label="1.43"];
+"104.66.0.24" -> "104.66.0.8"[label="1.35"];
+"104.66.0.24" -> "104.130.1.154"[label="1.34"];
+"104.66.0.30" -> "104.192.192.99"[label="8.23"];
+"104.66.0.30" -> "104.66.107.4"[label="7.01"];
+"104.66.0.30" -> "104.192.103.3"[label="1.80"];
+"104.66.0.30" -> "104.192.192.166"[label="27.16"];
+"104.66.0.30" -> "104.66.0.203"[label="2.36"];
+"104.66.0.30" -> "104.66.77.4"[label="0.00"];
+"104.66.0.30" -> "104.192.192.133"[label="3.72"];
+"104.129.0.95" -> "104.129.0.108"[label="1.20"];
+"104.129.0.95" -> "104.129.0.239"[label="1.42"];
+"104.129.0.95" -> "104.129.0.125"[label="0.00"];
+"104.129.0.95" -> "104.129.0.8"[label="1.82"];
+"104.129.0.95" -> "104.129.1.10"[label="43.01"];
+"104.66.0.18" -> "104.66.24.111"[label="4.11"];
+"104.198.23.1" -> "104.130.1.66"[label="55.58"];
+"104.129.81.1" -> "104.129.0.107"[label="2.38"];
+"104.129.81.1" -> "104.129.103.1"[label="8.87"];
+"104.129.81.1" -> "104.129.46.100"[label="1.65"];
+"104.129.81.1" -> "104.129.0.77"[label="1.40"];
+"104.129.81.1" -> "104.129.1.43"[label="2.02"];
+"104.129.81.1" -> "104.129.1.44"[label="2.19"];
+"104.129.81.1" -> "104.129.0.138"[label="26.27"];
+"104.0.3.81" -> "104.193.1.1"[label="1.00"];
+"104.0.3.81" -> "104.0.3.13"[label="28.00"];
+"104.0.3.81" -> "104.0.0.5"[label="14.34"];
+"104.192.0.20" -> "104.192.0.52"[label="3.35"];
+"104.192.0.20" -> "104.192.192.66"[label="1.52"];
+"104.192.0.20" -> "104.192.192.33"[label="1.60"];
+"104.192.0.20" -> "104.192.192.1"[label="5.09"];
+"104.12.0.89" -> "104.12.0.73"[label="2.00"];
+"104.12.0.89" -> "104.13.3.33"[label="0.00"];
+"104.12.0.89" -> "104.13.0.189"[label="0.00"];
+"104.198.65.81" -> "104.192.192.225"[label="4.23"];
+"104.198.65.81" -> "104.198.65.73"[label="1.21"];
+"104.198.65.81" -> "104.198.65.94"[label="1.00"];
+"104.198.65.81" -> "104.192.192.1"[label="3.12"];
+"104.131.0.42" -> "104.131.131.1"[label="0.00"];
+"104.131.0.42" -> "104.131.1.2"[label="36.86"];
+"104.131.0.42" -> "104.131.131.3"[label="18.43"];
+"104.131.0.42" -> "104.131.0.146"[label="1.05"];
+"104.130.27.176" -> "104.130.1.97"[label="0.00"];
+"104.130.27.176" -> "104.130.1.110"[label="5.74"];
+"104.130.27.176" -> "104.130.1.10"[label="0.00"];
+"104.130.27.176" -> "104.130.3.3"[label="104.21"];
+"104.130.27.176" -> "104.130.17.17"[label="60.77"];
+"104.130.27.176" -> "104.130.1.157"[label="30.31"];
+"104.129.44.7" -> "104.131.0.147"[label="6.88"];
+"104.129.44.7" -> "104.131.0.148"[label="4.10"];
+"104.129.1.43" -> "104.129.0.107"[label="1.40"];
+"104.129.1.43" -> "104.129.46.100"[label="46.45"];
+"104.129.1.43" -> "104.129.0.77"[label="1.92"];
+"104.129.1.43" -> "104.129.81.1"[label="2.08"];
+"104.129.1.43" -> "104.129.1.44"[label="1.21"];
+"104.129.1.43" -> "104.129.6.1"[label="2.23"];
+"104.161.0.10" -> "104.161.0.1"[label="1.65"];
+"104.129.1.44" -> "104.129.0.107"[label="1.04"];
+"104.129.1.44" -> "104.129.81.1"[label="2.19"];
+"104.129.1.44" -> "104.129.1.43"[label="1.37"];
+"104.66.107.4" -> "104.66.0.34"[label="6.90"];
+"104.66.107.4" -> "104.66.0.30"[label="4.26"];
+"104.66.107.4" -> "104.66.0.203"[label="1.97"];
+"104.66.107.4" -> "104.66.77.4"[label="1.00"];
+"104.66.107.4" -> "104.66.0.201"[label="10.74"];
+"104.130.1.45" -> "104.130.1.66"[label="3.72"];
+"104.129.0.161" -> "104.129.0.123"[label="2.03"];
+"104.161.0.1" -> "104.0.4.161"[label="1.00"];
+"104.131.34.1" -> "104.130.1.73"[label="5.50"];
+"104.131.34.1" -> "104.130.1.67"[label="2.81"];
+"104.131.34.1" -> "104.192.192.166"[label="928.93"];
+"104.131.34.1" -> "104.131.9.6"[label="10.63"];
+"104.131.34.1" -> "104.130.1.131"[label="2.32"];
+"104.131.34.1" -> "104.131.21.21"[label="18.20"];
+"104.131.34.1" -> "104.130.17.20"[label="34.37"];
+"104.131.34.1" -> "104.130.1.16"[label="0.00"];
+"104.130.1.162" -> "104.130.1.66"[label="2.84"];
+"104.192.192.33" -> "104.192.192.225"[label="1.00"];
+"104.192.192.33" -> "104.192.192.99"[label="1.00"];
+"104.192.192.33" -> "104.202.53.1"[label="0.00"];
+"104.192.192.33" -> "104.192.0.52"[label="5.81"];
+"104.192.192.33" -> "104.200.0.10"[label="4.74"];
+"104.192.192.33" -> "104.192.192.66"[label="1.00"];
+"104.192.192.33" -> "104.192.192.199"[label="0.00"];
+"104.192.192.33" -> "104.192.0.20"[label="1.62"];
+"104.192.192.33" -> "104.192.192.166"[label="1.00"];
+"104.192.192.33" -> "104.193.24.100"[label="5.88"];
+"104.192.192.33" -> "104.192.192.177"[label="1.00"];
+"104.192.192.33" -> "104.192.0.75"[label="58.85"];
+"104.192.192.33" -> "104.192.192.1"[label="1.00"];
+"104.192.192.33" -> "104.192.192.133"[label="1.00"];
+"104.161.0.2" -> "104.161.0.1"[label="2.37"];
+"104.129.0.165" -> "104.129.105.2"[label="1.63"];
+"104.129.0.165" -> "104.129.108.1"[label="5.73"];
+"104.129.0.165" -> "104.129.105.10"[label="1.40"];
+"104.129.0.165" -> "104.129.103.1"[label="1.08"];
+"104.129.0.165" -> "104.129.103.19"[label="1.44"];
+"104.129.0.165" -> "104.129.0.91"[label="1.21"];
+"104.192.103.3" -> "104.192.192.99"[label="4.54"];
+"104.192.103.3" -> "104.192.2.2"[label="1.16"];
+"104.192.103.3" -> "104.66.0.30"[label="1.50"];
+"104.192.103.3" -> "104.66.0.201"[label="1.28"];
+"104.192.103.3" -> "104.66.77.4"[label="1.53"];
+"104.192.103.3" -> "104.192.192.133"[label="2.67"];
+"104.0.4.161" -> "104.0.4.200"[label="17.48"];
+"104.0.4.161" -> "104.0.4.65"[label="14.26"];
+"104.0.4.161" -> "104.161.0.1"[label="1.00"];
+"104.0.4.161" -> "104.0.0.17"[label="1.12"];
+"104.129.37.2" -> "104.129.0.234"[label="2.06"];
+"104.129.37.2" -> "104.129.0.239"[label="2.59"];
+"104.129.37.2" -> "104.129.0.110"[label="15.47"];
+"104.129.37.2" -> "104.129.0.123"[label="22.94"];
+"104.129.37.2" -> "104.129.1.71"[label="7.26"];
+"104.129.37.2" -> "104.129.0.8"[label="13.19"];
+"104.129.37.2" -> "104.129.1.10"[label="25.93"];
+"104.129.37.2" -> "104.129.1.1"[label="2.82"];
+"104.129.37.2" -> "104.129.1.17"[label="3.18"];
+"104.129.37.2" -> "104.129.1.18"[label="25.01"];
+"104.192.192.166" -> "104.192.0.40"[label="2.04"];
+"104.192.192.166" -> "104.192.192.225"[label="1.00"];
+"104.192.192.166" -> "104.192.192.99"[label="1.01"];
+"104.192.192.166" -> "104.129.0.125"[label="165.88"];
+"104.192.192.166" -> "104.65.5.4"[label="7.94"];
+"104.192.192.166" -> "104.192.192.66"[label="1.00"];
+"104.192.192.166" -> "104.192.192.199"[label="1.00"];
+"104.192.192.166" -> "104.66.0.30"[label="39.41"];
+"104.192.192.166" -> "104.131.34.1"[label="331.76"];
+"104.192.192.166" -> "104.192.192.33"[label="1.00"];
+"104.192.192.166" -> "104.192.192.177"[label="2.01"];
+"104.192.192.166" -> "104.66.77.4"[label="78.82"];
+"104.192.192.166" -> "104.66.0.201"[label="6.54"];
+"104.192.192.166" -> "104.192.192.1"[label="1.00"];
+"104.192.192.166" -> "104.192.192.133"[label="1.00"];
+"104.129.0.187" -> "104.129.1.28"[label="30.39"];
+"104.131.0.184" -> "104.131.131.3"[label="1.63"];
+"104.66.0.249" -> "104.66.0.34"[label="1.15"];
+"104.66.0.249" -> "104.66.0.23"[label="2.51"];
+"104.66.0.249" -> "104.66.0.203"[label="1.79"];
+"104.66.0.249" -> "104.66.0.201"[label="3.33"];
+"104.12.0.176" -> "104.5.0.222"[label="33.87"];
+"104.12.0.176" -> "104.12.0.1"[label="1.47"];
+"104.12.0.176" -> "104.12.1.11"[label="6.06"];
+"104.12.0.176" -> "104.12.0.19"[label="7.31"];
+"104.12.0.176" -> "104.12.0.30"[label="1.52"];
+"104.193.24.100" -> "104.192.192.99"[label="3.80"];
+"104.193.24.100" -> "104.192.0.52"[label="57.95"];
+"104.193.24.100" -> "104.192.192.66"[label="1.82"];
+"104.193.24.100" -> "104.192.192.33"[label="4.76"];
+"104.193.24.100" -> "104.192.192.1"[label="0.00"];
+"104.192.192.177" -> "104.192.192.225"[label="1.00"];
+"104.192.192.177" -> "104.192.192.99"[label="2.01"];
+"104.192.192.177" -> "104.192.192.66"[label="2.01"];
+"104.192.192.177" -> "104.192.192.199"[label="1.00"];
+"104.192.192.177" -> "104.192.192.33"[label="1.00"];
+"104.192.192.177" -> "104.192.192.166"[label="2.01"];
+"104.192.192.177" -> "104.192.192.178"[label="1.05"];
+"104.192.192.177" -> "104.192.192.1"[label="1.00"];
+"104.192.192.177" -> "104.192.192.133"[label="2.01"];
+"104.192.192.178" -> "104.192.192.177"[label="1.12"];
+"104.192.192.178" -> "104.129.29.29"[label="1.00"];
+"104.131.0.55" -> "104.131.131.1"[label="7.70"];
+"104.131.0.55" -> "104.131.0.3"[label="1.83"];
+"104.131.21.34" -> "104.131.21.102"[label="1.07"];
+"104.131.21.34" -> "104.131.21.101"[label="1.06"];
+"104.131.21.34" -> "104.131.34.1"[label="260.10"];
+"104.131.21.34" -> "104.131.21.21"[label="1.37"];
+"104.131.21.34" -> "104.131.21.12"[label="1.55"];
+"104.131.21.34" -> "104.131.21.1"[label="17.73"];
+"104.66.24.111" -> "104.66.0.18"[label="4.20"];
+"104.66.24.111" -> "104.0.3.13"[label="1.00"];
+"104.131.10.1" -> "104.131.10.2"[label="1.49"];
+"104.131.9.2" -> "104.130.1.67"[label="12.35"];
+"104.131.9.2" -> "104.130.1.65"[label="136.61"];
+"104.131.9.2" -> "104.129.0.138"[label="0.00"];
+"104.131.9.2" -> "104.131.9.1"[label="1.00"];
+"104.131.9.2" -> "104.131.9.6"[label="12.39"];
+"104.131.9.2" -> "104.131.9.4"[label="1.00"];
+"104.131.9.2" -> "104.131.9.5"[label="26.56"];
+"104.131.9.2" -> "104.131.0.147"[label="30.53"];
+"104.131.9.2" -> "104.131.0.148"[label="26.22"];
+"104.129.0.8" -> "104.129.0.108"[label="1.65"];
+"104.129.0.8" -> "104.129.0.239"[label="2.31"];
+"104.129.0.8" -> "104.129.0.123"[label="38.16"];
+"104.129.0.8" -> "104.129.0.125"[label="216.03"];
+"104.129.0.8" -> "104.129.0.95"[label="2.15"];
+"104.129.0.8" -> "104.129.37.2"[label="19.35"];
+"104.129.0.8" -> "104.129.1.17"[label="37.81"];
+"104.129.0.8" -> "104.129.1.10"[label="0.00"];
+"104.66.0.203" -> "104.66.0.34"[label="1.88"];
+"104.66.0.203" -> "104.66.0.49"[label="3.45"];
+"104.66.0.203" -> "104.66.0.30"[label="1.96"];
+"104.66.0.203" -> "104.66.107.4"[label="1.62"];
+"104.66.0.203" -> "104.192.103.3"[label="19.24"];
+"104.66.0.203" -> "104.66.0.249"[label="1.83"];
+"104.66.0.203" -> "104.66.0.201"[label="1.00"];
+"104.66.0.203" -> "104.66.77.4"[label="1.58"];
+"104.66.0.203" -> "104.66.68.16"[label="7.01"];
+"104.130.1.10" -> "104.130.1.14"[label="1.00"];
+"104.130.1.10" -> "104.136.12.5"[label="3.05"];
+"104.130.1.10" -> "104.130.3.3"[label="10.60"];
+"104.130.1.10" -> "104.130.17.17"[label="5.42"];
+"104.130.1.10" -> "104.130.1.16"[label="1.04"];
+"104.129.1.10" -> "104.129.0.239"[label="57.95"];
+"104.129.1.10" -> "104.129.0.125"[label="5.65"];
+"104.129.1.10" -> "104.129.0.95"[label="27.37"];
+"104.129.1.10" -> "104.129.37.2"[label="25.16"];
+"104.129.1.10" -> "104.129.0.8"[label="11.70"];
+"104.131.25.16" -> "104.131.0.192"[label="2.17"];
+"104.131.25.16" -> "104.130.1.14"[label="2.74"];
+"104.131.25.16" -> "104.131.25.14"[label="1.00"];
+"104.131.25.16" -> "104.131.25.12"[label="1.00"];
+"104.192.103.44" -> "104.192.103.200"[label="1.46"];
+"104.192.103.44" -> "104.192.103.109"[label="6.27"];
+"104.192.103.44" -> "104.192.99.103"[label="1.68"];
+"104.129.0.138" -> "104.129.0.77"[label="0.00"];
+"104.129.0.138" -> "104.129.81.1"[label="32.11"];
+"104.129.0.138" -> "104.131.9.2"[label="22.52"];
+"104.129.0.138" -> "104.130.1.10"[label="0.00"];
+"104.129.0.138" -> "104.131.9.1"[label="11.61"];
+"104.129.0.138" -> "104.131.21.1"[label="0.00"];
+"104.137.0.2" -> "104.12.1.6"[label="1.56"];
+"104.12.1.6" -> "104.192.0.38"[label="14.47"];
+"104.12.1.6" -> "104.130.10.111"[label="2.47"];
+"104.12.1.6" -> "104.130.1.67"[label="36.86"];
+"104.12.1.6" -> "104.65.5.3"[label="19.45"];
+"104.12.1.6" -> "104.137.0.2"[label="1.59"];
+"104.12.1.6" -> "104.6.0.6"[label="13.88"];
+"104.12.1.6" -> "104.130.1.131"[label="4.40"];
+"104.192.0.75" -> "104.192.0.52"[label="1.27"];
+"104.192.0.75" -> "104.192.192.33"[label="30.39"];
+"104.131.9.1" -> "104.129.0.123"[label="27.32"];
+"104.131.9.1" -> "104.0.7.254"[label="29.22"];
+"104.131.9.1" -> "104.130.1.67"[label="66.35"];
+"104.131.9.1" -> "104.131.9.2"[label="1.00"];
+"104.131.9.1" -> "104.129.0.138"[label="10.89"];
+"104.131.9.1" -> "104.131.9.4"[label="1.00"];
+"104.131.9.1" -> "104.131.9.5"[label="1.93"];
+"104.131.9.1" -> "104.131.0.147"[label="5.87"];
+"104.131.9.1" -> "104.131.0.148"[label="295.57"];
+"104.131.9.1" -> "104.131.21.1"[label="4.37"];
+"104.66.0.201" -> "104.192.192.99"[label="4.67"];
+"104.66.0.201" -> "104.66.107.4"[label="4.12"];
+"104.66.0.201" -> "104.192.103.3"[label="1.26"];
+"104.66.0.201" -> "104.192.192.166"[label="2.12"];
+"104.66.0.201" -> "104.66.0.249"[label="3.51"];
+"104.66.0.201" -> "104.66.0.203"[label="1.00"];
+"104.66.0.201" -> "104.66.77.4"[label="2.28"];
+"104.66.0.201" -> "104.192.192.133"[label="1.96"];
+"104.66.77.4" -> "104.66.0.34"[label="15.15"];
+"104.66.77.4" -> "104.192.192.99"[label="3.91"];
+"104.66.77.4" -> "104.66.0.30"[label="1.65"];
+"104.66.77.4" -> "104.66.107.4"[label="1.00"];
+"104.66.77.4" -> "104.192.103.3"[label="1.43"];
+"104.66.77.4" -> "104.192.192.166"[label="250.10"];
+"104.66.77.4" -> "104.66.0.203"[label="1.63"];
+"104.66.77.4" -> "104.66.0.201"[label="2.32"];
+"104.66.77.4" -> "104.192.192.133"[label="3.71"];
+"104.66.77.4" -> "104.66.68.16"[label="5.43"];
+"104.131.10.2" -> "104.130.1.67"[label="13.32"];
+"104.131.10.2" -> "104.131.10.1"[label="1.46"];
+"104.131.10.2" -> "104.131.83.77"[label="1.00"];
+"104.131.9.6" -> "104.130.1.67"[label="8.46"];
+"104.131.9.6" -> "104.131.34.1"[label="15.56"];
+"104.131.9.6" -> "104.131.9.2"[label="12.39"];
+"104.131.9.6" -> "104.131.0.147"[label="1.86"];
+"104.131.9.6" -> "104.131.21.1"[label="31.64"];
+"104.131.9.6" -> "104.131.0.148"[label="216.75"];
+"104.136.12.9" -> "104.136.22.22"[label="1.08"];
+"104.136.12.9" -> "104.136.12.7"[label="1.00"];
+"104.136.12.9" -> "104.136.12.30"[label="1.00"];
+"104.130.1.14" -> "104.130.1.10"[label="1.00"];
+"104.130.1.14" -> "104.131.25.16"[label="2.89"];
+"104.130.1.14" -> "104.130.1.16"[label="1.04"];
+"104.0.3.13" -> "104.0.3.81"[label="28.00"];
+"104.0.3.13" -> "104.66.24.111"[label="1.00"];
+"104.0.3.13" -> "104.0.0.5"[label="1.29"];
+"104.131.9.4" -> "104.131.9.2"[label="1.00"];
+"104.131.9.4" -> "104.131.9.1"[label="1.00"];
+"104.131.9.4" -> "104.131.9.5"[label="5.46"];
+"104.131.9.5" -> "104.131.9.2"[label="19.14"];
+"104.131.9.5" -> "104.131.9.1"[label="2.00"];
+"104.131.9.5" -> "104.131.9.4"[label="4.21"];
+"104.136.0.7" -> "104.136.22.22"[label="1.25"];
+"104.6.0.6" -> "104.12.1.6"[label="18.75"];
+"104.6.0.6" -> "104.6.0.11"[label="4.31"];
+"104.6.0.6" -> "104.8.0.24"[label="20.37"];
+"104.69.0.69" -> "104.0.7.254"[label="57.80"];
+"104.131.0.3" -> "104.131.131.1"[label="1.62"];
+"104.131.0.3" -> "104.131.1.2"[label="0.00"];
+"104.131.0.3" -> "104.131.131.3"[label="2.58"];
+"104.131.0.3" -> "104.131.0.55"[label="1.86"];
+"104.130.77.79" -> "104.130.77.5"[label="1.00"];
+"104.130.77.79" -> "104.130.77.1"[label="1.60"];
+"104.130.77.79" -> "104.130.1.66"[label="7.26"];
+"104.130.77.79" -> "104.130.77.232"[label="2.90"];
+"104.130.77.79" -> "104.130.77.78"[label="1.00"];
+"104.130.77.79" -> "104.130.77.77"[label="1.00"];
+"104.131.1.2" -> "104.131.131.3"[label="0.00"];
+"104.131.1.2" -> "104.131.83.77"[label="77.41"];
+"104.130.1.131" -> "104.130.1.67"[label="4.95"];
+"104.130.1.131" -> "104.131.34.1"[label="2.27"];
+"104.130.1.131" -> "104.12.1.6"[label="4.13"];
+"104.130.1.131" -> "104.130.1.16"[label="0.00"];
+"104.129.1.1" -> "104.129.37.2"[label="2.82"];
+"104.129.1.1" -> "104.0.0.30"[label="1.00"];
+"104.129.1.1" -> "104.129.1.17"[label="2.66"];
+"104.129.1.1" -> "104.0.0.17"[label="1.00"];
+"104.130.77.78" -> "104.130.77.79"[label="1.00"];
+"104.130.77.78" -> "104.130.77.77"[label="1.00"];
+"104.130.77.78" -> "104.130.77.5"[label="1.00"];
+"104.192.192.1" -> "104.192.0.32"[label="173.40"];
+"104.192.192.1" -> "104.192.192.225"[label="1.00"];
+"104.192.192.1" -> "104.192.192.99"[label="1.00"];
+"104.192.192.1" -> "104.192.192.66"[label="1.00"];
+"104.192.192.1" -> "104.192.192.199"[label="1.00"];
+"104.192.192.1" -> "104.192.0.20"[label="4.90"];
+"104.192.192.1" -> "104.198.65.81"[label="2.95"];
+"104.192.192.1" -> "104.192.192.33"[label="1.00"];
+"104.192.192.1" -> "104.192.192.166"[label="1.00"];
+"104.192.192.1" -> "104.192.192.177"[label="1.00"];
+"104.192.192.1" -> "104.192.192.133"[label="1.00"];
+"104.129.29.29" -> "104.192.192.178"[label="1.00"];
+"104.136.12.5" -> "104.130.1.10"[label="1.43"];
+"104.136.12.5" -> "104.130.3.3"[label="2167.50"];
+"104.136.12.5" -> "104.130.5.5"[label="1.17"];
+"104.136.12.5" -> "104.130.17.17"[label="7.52"];
+"104.130.17.17" -> "104.130.1.110"[label="2.57"];
+"104.130.17.17" -> "104.130.1.97"[label="0.00"];
+"104.130.17.17" -> "104.130.27.176"[label="61.34"];
+"104.130.17.17" -> "104.130.1.52"[label="47.33"];
+"104.130.17.17" -> "104.130.1.10"[label="8.69"];
+"104.130.17.17" -> "104.136.12.5"[label="7.21"];
+"104.130.17.17" -> "104.130.3.3"[label="2.33"];
+"104.130.17.17" -> "104.130.1.157"[label="22.84"];
+"104.130.17.17" -> "104.130.1.16"[label="844.48"];
+"104.130.3.3" -> "104.130.1.110"[label="17.87"];
+"104.130.3.3" -> "104.130.1.97"[label="0.00"];
+"104.130.3.3" -> "104.130.27.176"[label="0.00"];
+"104.130.3.3" -> "104.130.1.10"[label="14.03"];
+"104.130.3.3" -> "104.136.12.5"[label="2167.50"];
+"104.130.3.3" -> "104.130.17.17"[label="3.05"];
+"104.130.3.3" -> "104.130.1.157"[label="0.00"];
+"104.131.131.2" -> "104.131.131.3"[label="1.67"];
+"104.130.77.77" -> "104.130.1.73"[label="77.41"];
+"104.130.77.77" -> "104.130.77.5"[label="1.00"];
+"104.130.77.77" -> "104.130.77.1"[label="3.12"];
+"104.130.77.77" -> "104.130.1.67"[label="0.00"];
+"104.130.77.77" -> "104.130.1.66"[label="4.05"];
+"104.130.77.77" -> "104.130.1.65"[label="11.80"];
+"104.130.77.77" -> "104.130.77.79"[label="1.00"];
+"104.130.77.77" -> "104.130.77.78"[label="1.00"];
+"104.130.100.100" -> "104.192.192.225"[label="0.00"];
+"104.130.100.100" -> "104.130.1.66"[label="9.61"];
+"104.130.5.5" -> "104.136.12.5"[label="1.18"];
+"104.132.22.17" -> "104.132.24.12"[label="1.13"];
+"104.131.13.13" -> "104.131.21.1"[label="16.13"];
+"104.136.12.7" -> "104.136.12.9"[label="1.00"];
+"104.136.12.7" -> "104.136.12.30"[label="1.00"];
+"104.136.12.7" -> "104.131.25.12"[label="1.59"];
+"104.131.131.3" -> "104.131.0.184"[label="1.63"];
+"104.131.131.3" -> "104.131.1.2"[label="0.00"];
+"104.131.131.3" -> "104.131.0.3"[label="2.42"];
+"104.131.131.3" -> "104.131.131.2"[label="1.70"];
+"104.131.131.3" -> "104.131.83.77"[label="8.18"];
+"104.131.131.3" -> "104.131.0.146"[label="9.71"];
+"104.131.21.21" -> "104.131.21.104"[label="3.27"];
+"104.131.21.21" -> "104.131.21.105"[label="1.66"];
+"104.131.21.21" -> "104.131.21.102"[label="1.19"];
+"104.131.21.21" -> "104.131.21.101"[label="1.35"];
+"104.131.21.21" -> "104.131.34.1"[label="18.21"];
+"104.131.21.21" -> "104.131.21.34"[label="1.34"];
+"104.131.21.21" -> "104.131.21.12"[label="1.21"];
+"104.131.21.21" -> "104.131.21.1"[label="8.73"];
+"104.7.2.1" -> "104.0.7.254"[label="10.20"];
+"104.7.2.1" -> "104.7.2.65"[label="2.22"];
+"104.130.1.6" -> "104.130.1.67"[label="8.32"];
+"104.130.1.6" -> "104.130.1.66"[label="2.09"];
+"104.0.0.5" -> "104.0.3.81"[label="13.23"];
+"104.0.0.5" -> "104.0.3.13"[label="1.25"];
+"104.0.0.5" -> "104.0.0.6"[label="1.00"];
+"104.0.0.5" -> "104.0.0.17"[label="1.08"];
+"104.192.192.133" -> "104.192.103.109"[label="44.84"];
+"104.192.192.133" -> "104.192.0.74"[label="0.00"];
+"104.192.192.133" -> "104.192.192.225"[label="1.00"];
+"104.192.192.133" -> "104.192.192.99"[label="1.02"];
+"104.192.192.133" -> "104.129.0.125"[label="153.00"];
+"104.192.192.133" -> "104.66.0.49"[label="9.31"];
+"104.192.192.133" -> "104.192.192.66"[label="1.00"];
+"104.192.192.133" -> "104.192.192.199"[label="1.00"];
+"104.192.192.133" -> "104.66.0.30"[label="2.63"];
+"104.192.192.133" -> "104.192.192.33"[label="1.01"];
+"104.192.192.133" -> "104.192.103.3"[label="2.56"];
+"104.192.192.133" -> "104.192.192.166"[label="1.00"];
+"104.192.192.133" -> "104.192.192.177"[label="2.01"];
+"104.192.192.133" -> "104.66.77.4"[label="4.65"];
+"104.192.192.133" -> "104.66.0.201"[label="2.27"];
+"104.192.192.133" -> "104.192.192.1"[label="1.00"];
+"104.192.192.133" -> "104.192.99.160"[label="30.39"];
+"104.10.2.14" -> "104.10.2.34"[label="1.00"];
+"104.10.2.14" -> "104.6.0.11"[label="1.39"];
+"104.10.2.14" -> "104.10.2.24"[label="1.00"];
+"104.135.0.1" -> "104.192.192.225"[label="36.86"];
+"104.135.0.1" -> "104.130.1.66"[label="65.68"];
+"104.129.6.1" -> "104.129.1.43"[label="2.29"];
+"104.0.0.6" -> "104.65.0.42"[label="1.54"];
+"104.0.0.6" -> "104.202.53.1"[label="22.74"];
+"104.0.0.6" -> "104.201.0.3"[label="4.11"];
+"104.0.0.6" -> "104.201.0.4"[label="1.20"];
+"104.0.0.6" -> "104.202.19.1"[label="1.93"];
+"104.0.0.6" -> "104.0.0.5"[label="1.00"];
+"104.132.0.3" -> "104.132.24.7"[label="90.31"];
+"104.132.0.3" -> "104.132.24.3"[label="22.50"];
+"104.130.17.20" -> "104.131.34.1"[label="24.19"];
+"104.130.17.20" -> "104.130.1.16"[label="4.98"];
+"104.12.0.20" -> "104.12.0.200"[label="361.25"];
+"104.12.0.20" -> "104.12.34.6"[label="2.33"];
+"104.12.0.20" -> "104.13.3.33"[label="1.06"];
+"104.12.0.20" -> "104.12.0.46"[label="1.32"];
+"104.12.0.20" -> "104.12.0.43"[label="0.00"];
+"104.12.0.20" -> "104.13.0.50"[label="137.47"];
+"104.132.24.4" -> "104.132.24.7"[label="1.06"];
+"104.132.24.4" -> "104.132.24.1"[label="1.14"];
+"104.132.24.4" -> "104.132.24.2"[label="2.80"];
+"104.132.24.4" -> "104.132.24.3"[label="1.48"];
+"104.132.24.4" -> "104.132.24.8"[label="1.16"];
+"104.132.24.4" -> "104.132.24.9"[label="11.35"];
+"104.132.24.5" -> "104.132.24.1"[label="2.61"];
+"104.132.24.5" -> "104.132.24.2"[label="3.97"];
+"104.132.24.5" -> "104.132.24.3"[label="1.43"];
+"104.132.24.5" -> "104.132.24.9"[label="117.80"];
+"104.130.1.154" -> "104.130.1.67"[label="1.00"];
+"104.130.1.154" -> "104.130.1.66"[label="1.00"];
+"104.130.1.154" -> "104.130.1.65"[label="1.00"];
+"104.130.1.154" -> "104.0.4.65"[label="1.00"];
+"104.130.1.154" -> "104.66.0.24"[label="1.31"];
+"104.136.12.30" -> "104.132.24.1"[label="1.02"];
+"104.136.12.30" -> "104.136.12.7"[label="1.00"];
+"104.136.12.30" -> "104.136.12.9"[label="1.00"];
+"104.136.12.30" -> "104.136.22.22"[label="1.58"];
+"104.131.21.12" -> "104.131.21.102"[label="1.16"];
+"104.131.21.12" -> "104.131.21.101"[label="1.13"];
+"104.131.21.12" -> "104.131.21.34"[label="1.94"];
+"104.131.21.12" -> "104.131.21.21"[label="1.56"];
+"104.131.21.12" -> "104.131.21.1"[label="16.60"];
+"104.132.24.7" -> "104.132.0.3"[label="197.05"];
+"104.132.24.7" -> "104.132.24.4"[label="1.10"];
+"104.132.24.7" -> "104.132.24.1"[label="2.27"];
+"104.132.24.7" -> "104.132.24.2"[label="14.99"];
+"104.132.24.7" -> "104.132.24.9"[label="11.87"];
+"104.129.1.28" -> "104.130.1.67"[label="5.85"];
+"104.129.1.28" -> "104.129.0.187"[label="61.34"];
+"104.132.24.1" -> "104.132.24.4"[label="1.32"];
+"104.132.24.1" -> "104.132.24.5"[label="15.18"];
+"104.132.24.1" -> "104.136.12.30"[label="1.02"];
+"104.132.24.1" -> "104.132.24.7"[label="2.07"];
+"104.132.24.1" -> "104.132.24.3"[label="1.63"];
+"104.132.24.1" -> "104.132.24.8"[label="1.16"];
+"104.132.24.1" -> "104.132.24.9"[label="1.07"];
+"104.130.30.1" -> "104.130.1.67"[label="4.03"];
+"104.130.30.1" -> "104.130.30.3"[label="1.58"];
+"104.130.30.1" -> "104.130.30.9"[label="1.36"];
+"104.129.31.3" -> "104.130.1.73"[label="4.67"];
+"104.129.31.3" -> "104.130.1.67"[label="10.77"];
+"104.129.31.3" -> "104.129.31.14"[label="1.21"];
+"104.0.0.29" -> "104.0.0.30"[label="1.30"];
+"104.131.83.77" -> "104.130.1.67"[label="54.64"];
+"104.131.83.77" -> "104.131.10.2"[label="1.00"];
+"104.131.83.77" -> "104.131.1.2"[label="0.00"];
+"104.131.83.77" -> "104.131.131.1"[label="25.80"];
+"104.131.83.77" -> "104.131.131.3"[label="8.28"];
+"104.0.0.30" -> "104.129.1.1"[label="1.00"];
+"104.0.0.30" -> "104.0.0.29"[label="1.30"];
+"104.0.0.30" -> "104.0.0.17"[label="1.00"];
+"104.130.1.157" -> "104.130.1.110"[label="2.03"];
+"104.130.1.157" -> "104.130.1.97"[label="4.64"];
+"104.130.1.157" -> "104.130.27.176"[label="28.56"];
+"104.130.1.157" -> "104.130.3.3"[label="0.00"];
+"104.130.1.157" -> "104.130.17.17"[label="22.84"];
+"104.130.30.3" -> "104.130.1.67"[label="0.00"];
+"104.130.30.3" -> "104.130.30.1"[label="1.58"];
+"104.130.30.3" -> "104.130.30.9"[label="1.06"];
+"104.132.24.3" -> "104.132.0.3"[label="32.03"];
+"104.132.24.3" -> "104.132.24.4"[label="2.01"];
+"104.132.24.3" -> "104.132.24.5"[label="20.74"];
+"104.132.24.3" -> "104.132.24.1"[label="13.68"];
+"104.132.24.3" -> "104.132.24.9"[label="11.68"];
+"104.132.24.12" -> "104.132.22.17"[label="1.14"];
+"104.132.24.12" -> "104.132.24.2"[label="1.00"];
+"104.8.0.24" -> "104.6.0.11"[label="3.27"];
+"104.8.0.24" -> "104.6.0.6"[label="22.52"];
+"104.8.0.24" -> "104.8.0.22"[label="1.00"];
+"104.131.0.147" -> "104.131.9.2"[label="7.27"];
+"104.131.0.147" -> "104.131.9.1"[label="5.96"];
+"104.131.0.147" -> "104.131.9.6"[label="1.44"];
+"104.131.0.147" -> "104.131.0.148"[label="1.63"];
+"104.131.0.146" -> "104.131.0.42"[label="1.20"];
+"104.131.0.146" -> "104.131.1.2"[label="0.00"];
+"104.129.1.17" -> "104.129.0.110"[label="0.00"];
+"104.129.1.17" -> "104.129.37.2"[label="3.54"];
+"104.129.1.17" -> "104.129.0.8"[label="40.59"];
+"104.129.1.17" -> "104.129.1.1"[label="3.00"];
+"104.129.1.17" -> "104.129.1.18"[label="1.00"];
+"104.0.0.17" -> "104.0.4.200"[label="1.03"];
+"104.0.0.17" -> "104.0.4.65"[label="1.25"];
+"104.0.0.17" -> "104.0.4.161"[label="1.16"];
+"104.0.0.17" -> "104.129.1.1"[label="1.00"];
+"104.0.0.17" -> "104.0.0.5"[label="1.21"];
+"104.0.0.17" -> "104.0.0.30"[label="1.00"];
+"104.129.18.1" -> "104.129.46.100"[label="2.72"];
+"104.129.1.18" -> "104.129.1.71"[label="1.41"];
+"104.129.1.18" -> "104.129.37.2"[label="25.32"];
+"104.129.1.18" -> "104.129.1.17"[label="1.00"];
+"104.23.0.4" -> "104.23.0.2"[label="1.14"];
+"104.130.1.16" -> "104.130.1.67"[label="2.61"];
+"104.130.1.16" -> "104.131.34.1"[label="23.47"];
+"104.130.1.16" -> "104.130.1.10"[label="1.04"];
+"104.130.1.16" -> "104.130.1.14"[label="1.04"];
+"104.130.1.16" -> "104.130.1.131"[label="25.09"];
+"104.130.1.16" -> "104.130.17.17"[label="844.48"];
+"104.130.1.16" -> "104.130.17.20"[label="4.90"];
+"104.131.25.14" -> "104.130.10.111"[label="17.96"];
+"104.131.25.14" -> "104.131.0.74"[label="2.43"];
+"104.131.25.14" -> "104.131.25.16"[label="1.00"];
+"104.131.25.14" -> "104.131.25.12"[label="1.00"];
+"104.132.24.8" -> "104.132.24.7"[label="0.00"];
+"104.132.24.8" -> "104.132.24.4"[label="1.10"];
+"104.132.24.8" -> "104.132.24.1"[label="1.19"];
+"104.132.24.8" -> "104.132.24.9"[label="2.16"];
+"104.130.30.9" -> "104.130.30.1"[label="1.35"];
+"104.130.30.9" -> "104.130.1.67"[label="9.00"];
+"104.130.30.9" -> "104.130.30.3"[label="1.06"];
+"104.132.24.9" -> "104.132.24.4"[label="12.52"];
+"104.132.24.9" -> "104.132.24.5"[label="134.35"];
+"104.132.24.9" -> "104.132.24.7"[label="12.69"];
+"104.132.24.9" -> "104.132.24.1"[label="1.34"];
+"104.132.24.9" -> "104.132.24.3"[label="13.35"];
+"104.132.24.9" -> "104.132.24.8"[label="2.35"];
+"104.23.0.2" -> "104.0.7.254"[label="10.63"];
+"104.23.0.2" -> "104.23.0.4"[label="1.09"];
+"104.66.68.16" -> "104.66.0.23"[label="1.24"];
+"104.66.68.16" -> "104.66.0.203"[label="6.19"];
+"104.66.68.16" -> "104.66.77.4"[label="6.13"];
+"104.131.25.12" -> "104.131.0.245"[label="1.13"];
+"104.131.25.12" -> "104.131.25.16"[label="1.00"];
+"104.131.25.12" -> "104.136.12.7"[label="1.51"];
+"104.131.25.12" -> "104.131.25.14"[label="1.00"];
+"104.131.21.1" -> "104.131.21.104"[label="8.80"];
+"104.131.21.1" -> "104.131.21.105"[label="3.55"];
+"104.131.21.1" -> "104.131.21.101"[label="20.53"];
+"104.131.21.1" -> "104.131.34.1"[label="0.00"];
+"104.131.21.1" -> "104.131.21.34"[label="20.03"];
+"104.131.21.1" -> "104.131.9.2"[label="4.90"];
+"104.131.21.1" -> "104.131.9.1"[label="3.82"];
+"104.131.21.1" -> "104.131.21.21"[label="5.03"];
+"104.131.21.1" -> "104.131.21.12"[label="24.19"];
+"104.131.0.148" -> "104.129.44.7"[label="0.00"];
+"104.131.0.148" -> "104.131.9.2"[label="32.14"];
+"104.131.0.148" -> "104.131.9.1"[label="244.45"];
+"104.131.0.148" -> "104.131.9.6"[label="50.41"];
+"104.131.0.148" -> "104.131.0.147"[label="1.45"];
+"104.65.0.42" -> "0.0.0.0/0.0.0.0"[label="HNA"];
+"0.0.0.0/0.0.0.0"[shape=diamond];
+"104.0.7.254" -> "10.63.0.0/255.255.0.0"[label="HNA"];
+"10.63.0.0/255.255.0.0"[shape=diamond];
+"104.0.7.254" -> "104.63.0.0/255.255.0.0"[label="HNA"];
+"104.63.0.0/255.255.0.0"[shape=diamond];
+"104.0.7.254" -> "104.61.0.0/255.255.0.0"[label="HNA"];
+"104.61.0.0/255.255.0.0"[shape=diamond];
+"104.0.7.254" -> "10.99.0.0/255.255.0.0"[label="HNA"];
+"10.99.0.0/255.255.0.0"[shape=diamond];
+"104.131.0.245" -> "104.131.0.145/255.255.255.255"[label="HNA"];
+"104.131.0.145/255.255.255.255"[shape=diamond];
+"104.129.37.2" -> "104.129.37.3/255.255.255.255"[label="HNA"];
+"104.129.37.3/255.255.255.255"[shape=diamond];
+"104.129.37.2" -> "104.129.37.1/255.255.255.255"[label="HNA"];
+"104.129.37.1/255.255.255.255"[shape=diamond];
+"104.131.0.55" -> "0.0.0.0/0.0.0.0"[label="HNA"];
+"0.0.0.0/0.0.0.0"[shape=diamond];
+"104.131.9.1" -> "104.131.9.77/255.255.255.255"[label="HNA"];
+"104.131.9.77/255.255.255.255"[shape=diamond];
+"104.131.9.5" -> "104.131.9.136/255.255.255.248"[label="HNA"];
+"104.131.9.136/255.255.255.248"[shape=diamond];
+"104.130.17.17" -> "104.136.12.12/255.255.255.255"[label="HNA"];
+"104.136.12.12/255.255.255.255"[shape=diamond];
+"104.136.12.7" -> "0.0.0.0/0.0.0.0"[label="HNA"];
+"0.0.0.0/0.0.0.0"[shape=diamond];
+"104.131.21.21" -> "0.0.0.0/0.0.0.0"[label="HNA"];
+"0.0.0.0/0.0.0.0"[shape=diamond];
+"104.132.24.1" -> "0.0.0.0/0.0.0.0"[label="HNA"];
+"0.0.0.0/0.0.0.0"[shape=diamond];
+"104.130.30.1" -> "104.130.30.30/255.255.255.255"[label="HNA"];
+"104.130.30.30/255.255.255.255"[shape=diamond];
+"104.130.1.16" -> "0.0.0.0/0.0.0.0"[label="HNA"];
+"0.0.0.0/0.0.0.0"[shape=diamond];
+"104.132.24.8" -> "104.136.12.13/255.255.255.255"[label="HNA"];
+"104.136.12.13/255.255.255.255"[shape=diamond];
+"104.132.24.9" -> "104.132.24.250/255.255.255.255"[label="HNA"];
+"104.132.24.250/255.255.255.255"[shape=diamond];
+"104.23.0.2" -> "0.0.0.0/0.0.0.0"[label="HNA"];
+"0.0.0.0/0.0.0.0"[shape=diamond];
+"104.23.0.2" -> "104.23.0.5/255.255.255.255"[label="HNA"];
+"104.23.0.5/255.255.255.255"[shape=diamond];
+}
+
+digraph topology
+{
+"104.131.131.1" -> "104.131.0.71"[label="0.00", style=dashed];
+"104.131.131.1" -> "104.131.0.42"[label="130.10", style=solid];
+"104.131.0.42"[shape=box];
+"104.131.131.1" -> "104.131.0.55"[label="7.51", style=solid];
+"104.131.131.1" -> "104.131.1.2"[label="40.26", style=solid];
+"104.131.1.2"[shape=box];
+"104.131.131.1" -> "104.131.0.3"[label="1.80", style=solid];
+"104.131.0.3"[shape=box];
+"104.131.131.1" -> "104.131.131.3"[label="0.00", style=dashed];
+"104.131.131.1" -> "104.131.83.77"[label="24.95", style=solid];
+"104.131.83.77"[shape=box];
+"104.131.131.1" -> "104.131.0.147"[label="0.00", style=dashed];
+"104.192.0.40" -> "104.192.192.166"[label="2.06"];
+"104.129.0.107" -> "104.129.0.77"[label="1.52"];
+"104.129.0.107" -> "104.129.81.1"[label="1.67"];
+"104.129.0.107" -> "104.129.1.43"[label="1.42"];
+"104.129.0.107" -> "104.129.1.44"[label="1.04"];
+"104.65.0.42" -> "104.0.7.254"[label="17.91"];
+"104.65.0.42" -> "104.0.0.6"[label="6.54"];
+"104.129.0.234" -> "104.129.37.2"[label="2.01"];
+"104.129.108.1" -> "104.129.105.2"[label="1.80"];
+"104.129.108.1" -> "104.129.105.10"[label="1.18"];
+"104.129.108.1" -> "104.129.103.1"[label="1.16"];
+"104.129.108.1" -> "104.129.103.19"[label="1.30"];
+"104.129.108.1" -> "104.129.0.91"[label="1.17"];
+"104.129.108.1" -> "104.129.0.165"[label="4.82"];
+"104.66.0.46" -> "104.66.0.8"[label="1.23"];
+"104.66.0.46" -> "104.66.0.24"[label="1.46"];
+"104.129.0.108" -> "104.129.0.239"[label="1.50"];
+"104.129.0.108" -> "104.129.0.95"[label="1.24"];
+"104.129.0.108" -> "104.129.0.8"[label="1.50"];
+"104.130.1.110" -> "104.130.1.97"[label="36.78"];
+"104.130.1.110" -> "104.130.27.176"[label="5.08"];
+"104.130.1.110" -> "104.130.3.3"[label="17.71"];
+"104.130.1.110" -> "104.130.17.17"[label="1.59"];
+"104.130.1.110" -> "104.130.1.157"[label="1.94"];
+"104.129.0.239" -> "104.129.0.108"[label="1.53"];
+"104.129.0.239" -> "104.129.0.125"[label="0.00"];
+"104.129.0.239" -> "104.129.0.95"[label="1.38"];
+"104.129.0.239" -> "104.129.37.2"[label="2.55"];
+"104.129.0.239" -> "104.129.0.8"[label="1.63"];
+"104.129.0.239" -> "104.129.1.10"[label="53.87"];
+"104.129.0.239" -> "104.129.1.17"[label="0.00"];
+"104.129.0.110" -> "104.129.0.123"[label="0.00"];
+"104.129.0.110" -> "104.129.0.219"[label="0.00"];
+"104.129.0.110" -> "104.129.0.82"[label="7.90"];
+"104.129.0.110" -> "104.129.37.2"[label="27.44"];
+"104.129.0.110" -> "104.129.1.17"[label="110.59"];
+"104.192.0.32" -> "104.192.192.1"[label="40.14"];
+"104.192.0.32" -> "104.192.192.225"[label="2.20"];
+"104.192.0.32" -> "104.192.0.39"[label="3.94"];
+"104.192.0.32" -> "104.192.192.199"[label="4.01"];
+"104.66.0.34" -> "104.66.0.30"[label="7.70"];
+"104.66.0.34" -> "104.66.107.4"[label="3.33"];
+"104.66.0.34" -> "104.66.0.249"[label="1.19"];
+"104.66.0.34" -> "104.66.0.203"[label="1.82"];
+"104.66.0.34" -> "104.66.77.4"[label="14.34"];
+"104.192.192.225" -> "104.192.0.32"[label="3.41"];
+"104.192.192.225" -> "104.192.192.99"[label="1.00"];
+"104.192.192.225" -> "104.192.0.39"[label="9.97"];
+"104.192.192.225" -> "104.130.1.65"[label="35.42"];
+"104.192.192.225" -> "104.192.192.66"[label="1.00"];
+"104.192.192.225" -> "104.192.192.199"[label="1.00"];
+"104.192.192.225" -> "104.198.65.81"[label="3.31"];
+"104.192.192.225" -> "104.192.192.33"[label="1.00"];
+"104.192.192.225" -> "104.192.192.166"[label="1.00"];
+"104.192.192.225" -> "104.192.192.177"[label="1.00"];
+"104.192.192.225" -> "104.192.192.1"[label="1.00"];
+"104.192.192.225" -> "104.130.100.100"[label="0.00"];
+"104.192.192.225" -> "104.192.192.133"[label="1.00"];
+"104.130.1.97" -> "104.130.17.17"[label="0.00"];
+"104.130.1.97" -> "104.130.1.110"[label="17.82"];
+"104.130.1.97" -> "104.130.27.176"[label="106.60"];
+"104.130.1.97" -> "104.130.3.3"[label="0.00"];
+"104.130.1.97" -> "104.130.1.157"[label="1.56"];
+"104.192.192.99" -> "104.192.192.225"[label="1.00"];
+"104.192.192.99" -> "104.192.0.52"[label="0.00"];
+"104.192.192.99" -> "104.192.192.66"[label="1.00"];
+"104.192.192.99" -> "104.192.192.199"[label="1.00"];
+"104.192.192.99" -> "104.66.0.30"[label="7.28"];
+"104.192.192.99" -> "104.192.192.33"[label="1.00"];
+"104.192.192.99" -> "104.192.103.3"[label="4.18"];
+"104.192.192.99" -> "104.192.192.166"[label="1.00"];
+"104.192.192.99" -> "104.193.24.100"[label="3.64"];
+"104.192.192.99" -> "104.192.192.177"[label="2.01"];
+"104.192.192.99" -> "104.66.77.4"[label="4.33"];
+"104.192.192.99" -> "104.66.0.201"[label="5.21"];
+"104.192.192.99" -> "104.192.192.1"[label="1.00"];
+"104.192.192.99" -> "104.192.192.133"[label="1.00"];
+"104.0.7.100" -> "104.0.7.254"[label="2.68"];
+"104.198.65.97" -> "104.130.77.5"[label="3.21"];
+"104.198.65.97" -> "104.130.77.1"[label="3.98"];
+"104.198.65.97" -> "104.130.1.66"[label="46.12"];
+"104.198.65.97" -> "104.198.65.65"[label="1.46"];
+"104.198.65.97" -> "104.130.77.78"[label="0.00"];
+"104.192.0.38" -> "104.130.1.65"[label="4.36"];
+"104.192.0.38" -> "104.12.1.6"[label="7.37"];
+"104.130.10.111" -> "104.12.1.6"[label="2.50"];
+"104.130.10.111" -> "104.131.25.14"[label="20.58"];
+"104.192.0.39" -> "104.192.0.32"[label="4.61"];
+"104.192.0.39" -> "104.192.192.225"[label="16.67"];
+"104.66.0.58" -> "104.66.0.49"[label="21.25"];
+"104.0.7.254" -> "104.131.9.1"[label="10.63"];
+"104.0.7.254" -> "104.7.2.1"[label="56.06"];
+"104.0.7.254" -> "104.23.0.2"[label="11.09"];
+"104.0.7.254" -> "104.0.7.100"[label="2.58"];
+"104.0.7.254" -> "104.69.0.69"[label="62.83"];
+"104.0.7.254" -> "104.65.0.42"[label="10.92"];
+"104.129.0.123" -> "104.129.0.110"[label="29.21"];
+"104.129.0.123" -> "104.129.0.77"[label="22.83"];
+"104.129.0.123" -> "104.129.0.161"[label="4.11"];
+"104.129.0.123" -> "104.129.37.2"[label="36.86"];
+"104.129.0.123" -> "104.129.0.8"[label="182.14"];
+"104.129.0.123" -> "104.131.9.1"[label="37.81"];
+"104.129.0.125" -> "104.129.0.239"[label="50.49"];
+"104.129.0.125" -> "104.129.0.219"[label="14.83"];
+"104.129.0.125" -> "104.129.0.95"[label="5.04"];
+"104.129.0.125" -> "104.192.192.166"[label="270.94"];
+"104.129.0.125" -> "104.129.0.8"[label="81.79"];
+"104.129.0.125" -> "104.129.1.10"[label="6.36"];
+"104.129.0.125" -> "104.129.1.11"[label="12.47"];
+"104.129.0.125" -> "104.192.192.133"[label="0.00"];
+"104.131.21.104" -> "104.131.21.101"[label="0.00"];
+"104.131.21.104" -> "104.131.21.21"[label="3.36"];
+"104.131.21.104" -> "104.131.21.1"[label="18.69"];
+"104.202.53.1" -> "104.203.0.1"[label="2.18"];
+"104.202.53.1" -> "104.192.192.66"[label="0.00"];
+"104.202.53.1" -> "104.202.19.1"[label="1.34"];
+"104.202.53.1" -> "104.192.192.33"[label="53.26"];
+"104.202.53.1" -> "104.0.0.6"[label="9.92"];
+"104.131.21.105" -> "104.131.21.21"[label="1.97"];
+"104.131.21.105" -> "104.131.21.1"[label="7.72"];
+"104.131.21.102" -> "104.131.21.101"[label="1.12"];
+"104.131.21.102" -> "104.131.21.34"[label="1.24"];
+"104.131.21.102" -> "104.131.21.21"[label="1.45"];
+"104.131.21.102" -> "104.131.21.12"[label="1.12"];
+"104.66.0.49" -> "104.66.0.58"[label="19.23"];
+"104.66.0.49" -> "104.66.0.203"[label="3.58"];
+"104.66.0.49" -> "104.192.192.133"[label="20.32"];
+"104.131.21.101" -> "104.131.21.104"[label="0.00"];
+"104.131.21.101" -> "104.131.21.102"[label="1.13"];
+"104.131.21.101" -> "104.131.21.34"[label="1.10"];
+"104.131.21.101" -> "104.131.21.21"[label="2.16"];
+"104.131.21.101" -> "104.131.21.12"[label="1.23"];
+"104.131.21.101" -> "104.131.21.1"[label="8.95"];
+"104.192.0.52" -> "104.192.192.99"[label="0.00"];
+"104.192.0.52" -> "104.192.192.66"[label="2.20"];
+"104.192.0.52" -> "104.192.0.20"[label="2.83"];
+"104.192.0.52" -> "104.192.192.33"[label="6.75"];
+"104.192.0.52" -> "104.193.24.100"[label="57.95"];
+"104.192.0.52" -> "104.192.0.75"[label="1.32"];
+"104.131.0.245" -> "104.131.25.12"[label="1.12"];
+"104.0.200.1" -> "104.12.0.225"[label="1.45"];
+"104.0.200.1" -> "104.13.1.97"[label="2.80"];
+"104.0.200.1" -> "104.12.0.105"[label="9.96"];
+"104.0.200.1" -> "104.13.3.241"[label="5.86"];
+"104.0.200.1" -> "104.12.9.89"[label="1.27"];
+"104.0.200.1" -> "104.13.3.33"[label="1.14"];
+"104.0.200.1" -> "104.12.0.183"[label="29.61"];
+"104.0.200.1" -> "104.13.0.50"[label="3.03"];
+"104.0.200.1" -> "104.13.3.57"[label="9.51"];
+"104.0.200.1" -> "104.13.1.2"[label="14.77"];
+"104.0.200.1" -> "104.12.0.8"[label="1.58"];
+"104.0.200.1" -> "104.13.138.1"[label="3.66"];
+"104.0.200.1" -> "104.13.0.17"[label="2.53"];
+"104.0.200.1" -> "104.13.0.155"[label="33.29"];
+"104.72.0.1" -> "104.202.19.1"[label="10.04"];
+"104.131.0.74" -> "104.131.25.14"[label="2.56"];
+"104.200.0.1" -> "104.200.0.10"[label="1.00"];
+"104.192.103.109" -> "104.192.103.200"[label="35.65"];
+"104.192.103.109" -> "104.192.99.103"[label="1.36"];
+"104.192.103.109" -> "104.192.103.44"[label="3.73"];
+"104.192.103.109" -> "104.192.192.133"[label="52.44"];
+"104.203.0.1" -> "104.202.53.1"[label="2.09"];
+"104.203.0.1" -> "104.202.19.1"[label="1.43"];
+"104.130.77.5" -> "104.198.65.97"[label="4.47"];
+"104.130.77.5" -> "104.130.77.1"[label="2.06"];
+"104.130.77.5" -> "104.130.1.66"[label="23.06"];
+"104.130.77.5" -> "104.130.77.79"[label="1.00"];
+"104.130.77.5" -> "104.130.77.78"[label="1.00"];
+"104.130.77.5" -> "104.130.77.77"[label="1.00"];
+"104.201.0.3" -> "104.201.0.4"[label="1.47"];
+"104.201.0.3" -> "104.0.0.6"[label="2.88"];
+"104.130.1.73" -> "104.130.77.77"[label="45.16"];
+"104.130.1.73" -> "104.130.1.67"[label="3.84"];
+"104.130.1.73" -> "104.65.5.3"[label="185.79"];
+"104.130.1.73" -> "104.131.34.1"[label="4.37"];
+"104.130.1.73" -> "104.129.31.3"[label="5.23"];
+"104.66.0.8" -> "104.66.0.46"[label="1.27"];
+"104.66.0.8" -> "104.66.0.24"[label="1.37"];
+"104.129.46.100" -> "104.129.0.77"[label="2.80"];
+"104.129.46.100" -> "104.129.81.1"[label="1.54"];
+"104.129.46.100" -> "104.129.18.1"[label="2.72"];
+"104.12.0.192" -> "104.12.0.43"[label="106.60"];
+"104.12.0.192" -> "104.12.0.136"[label="1.71"];
+"104.129.0.77" -> "104.129.0.107"[label="1.93"];
+"104.129.0.77" -> "104.129.0.123"[label="38.89"];
+"104.129.0.77" -> "104.129.46.100"[label="2.80"];
+"104.129.0.77" -> "104.129.81.1"[label="1.37"];
+"104.129.0.77" -> "104.129.1.43"[label="2.07"];
+"104.129.0.77" -> "104.129.1.44"[label="8.08"];
+"104.0.4.200" -> "104.0.4.65"[label="22.31"];
+"104.0.4.200" -> "104.0.4.161"[label="18.07"];
+"104.0.4.200" -> "104.0.0.17"[label="1.01"];
+"104.201.0.4" -> "104.201.0.3"[label="1.45"];
+"104.198.65.73" -> "104.198.65.81"[label="1.27"];
+"104.130.77.1" -> "104.198.65.97"[label="5.22"];
+"104.130.77.1" -> "104.130.77.5"[label="1.61"];
+"104.130.77.1" -> "104.130.77.79"[label="1.40"];
+"104.130.77.1" -> "104.130.77.77"[label="2.06"];
+"104.65.5.4" -> "104.65.5.3"[label="2.65"];
+"104.65.5.4" -> "104.192.192.199"[label="5.45"];
+"104.65.5.4" -> "104.192.192.166"[label="0.00"];
+"104.130.1.67" -> "104.130.1.73"[label="3.15"];
+"104.130.1.67" -> "104.130.1.66"[label="1.00"];
+"104.130.1.67" -> "104.130.1.65"[label="1.00"];
+"104.130.1.67" -> "104.0.4.65"[label="1.00"];
+"104.130.1.67" -> "104.131.34.1"[label="2.87"];
+"104.130.1.67" -> "104.131.9.2"[label="6.89"];
+"104.130.1.67" -> "104.131.9.1"[label="38.64"];
+"104.130.1.67" -> "104.131.10.2"[label="7.16"];
+"104.130.1.67" -> "104.12.1.6"[label="56.30"];
+"104.130.1.67" -> "104.131.9.6"[label="0.00"];
+"104.130.1.67" -> "104.130.1.131"[label="5.37"];
+"104.130.1.67" -> "104.130.1.6"[label="9.11"];
+"104.130.1.67" -> "104.130.1.154"[label="0.00"];
+"104.130.1.67" -> "104.129.1.28"[label="10.43"];
+"104.130.1.67" -> "104.131.83.77"[label="34.30"];
+"104.130.1.67" -> "104.129.31.3"[label="10.21"];
+"104.130.1.67" -> "104.130.30.1"[label="3.85"];
+"104.130.1.67" -> "104.130.30.3"[label="29.03"];
+"104.130.1.67" -> "104.130.1.16"[label="2.55"];
+"104.130.1.67" -> "104.130.30.9"[label="7.36"];
+"104.192.2.2" -> "104.192.103.3"[label="1.13"];
+"104.193.1.1" -> "104.0.3.81"[label="1.00"];
+"104.130.1.66" -> "104.192.192.225"[label="0.00"];
+"104.130.1.66" -> "104.198.65.97"[label="46.92"];
+"104.130.1.66" -> "104.130.77.5"[label="14.45"];
+"104.130.1.66" -> "104.130.1.67"[label="1.00"];
+"104.130.1.66" -> "104.130.1.65"[label="1.00"];
+"104.130.1.66" -> "104.0.4.65"[label="1.00"];
+"104.130.1.66" -> "104.198.23.1"[label="92.63"];
+"104.130.1.66" -> "104.130.1.45"[label="3.68"];
+"104.130.1.66" -> "104.130.1.162"[label="2.84"];
+"104.130.1.66" -> "104.130.77.79"[label="6.45"];
+"104.130.1.66" -> "104.130.77.77"[label="3.46"];
+"104.130.1.66" -> "104.130.100.100"[label="8.24"];
+"104.130.1.66" -> "104.130.1.6"[label="1.84"];
+"104.130.1.66" -> "104.135.0.1"[label="68.30"];
+"104.130.1.66" -> "104.130.1.154"[label="1.00"];
+"104.130.1.66" -> "104.130.30.1"[label="0.00"];
+"104.200.0.10" -> "104.200.0.1"[label="1.00"];
+"104.200.0.10" -> "104.192.192.33"[label="3.27"];
+"104.192.192.66" -> "104.192.192.225"[label="1.00"];
+"104.192.192.66" -> "104.192.192.99"[label="1.00"];
+"104.192.192.66" -> "104.202.53.1"[label="23.69"];
+"104.192.192.66" -> "104.192.0.52"[label="2.18"];
+"104.192.192.66" -> "104.193.0.2"[label="1.81"];
+"104.192.192.66" -> "104.192.192.199"[label="1.00"];
+"104.192.192.66" -> "104.192.0.20"[label="1.44"];
+"104.192.192.66" -> "104.192.192.33"[label="1.00"];
+"104.192.192.66" -> "104.192.192.166"[label="1.00"];
+"104.192.192.66" -> "104.193.24.100"[label="1.67"];
+"104.192.192.66" -> "104.192.192.177"[label="2.01"];
+"104.192.192.66" -> "104.192.192.1"[label="1.00"];
+"104.192.192.66" -> "104.192.192.133"[label="1.00"];
+"104.130.1.65" -> "104.192.192.225"[label="0.00"];
+"104.130.1.65" -> "104.192.0.38"[label="4.60"];
+"104.130.1.65" -> "104.130.1.67"[label="1.00"];
+"104.130.1.65" -> "104.130.1.66"[label="1.00"];
+"104.130.1.65" -> "104.0.4.65"[label="1.00"];
+"104.130.1.65" -> "104.65.5.3"[label="19.52"];
+"104.130.1.65" -> "104.192.192.199"[label="10.83"];
+"104.130.1.65" -> "104.131.34.1"[label="371.57"];
+"104.130.1.65" -> "104.130.77.77"[label="28.33"];
+"104.130.1.65" -> "104.130.1.154"[label="1.00"];
+"104.130.1.65" -> "104.130.30.1"[label="0.00"];
+"104.131.0.192" -> "104.131.25.16"[label="1.95"];
+"104.193.0.2" -> "104.192.192.66"[label="1.71"];
+"104.13.0.73" -> "104.13.0.97"[label="3.81"];
+"104.13.0.73" -> "104.13.0.71"[label="2.04"];
+"104.13.0.73" -> "104.13.0.74"[label="1.36"];
+"104.13.0.73" -> "104.13.0.38"[label="2.13"];
+"104.13.0.73" -> "104.13.3.33"[label="1.00"];
+"104.7.2.193" -> "104.7.2.65"[label="1.33"];
+"104.7.2.65" -> "104.7.2.193"[label="1.11"];
+"104.7.2.65" -> "104.7.2.1"[label="2.37"];
+"104.131.0.71" -> "104.131.1.2"[label="8.56"];
+"104.0.4.65" -> "104.0.4.200"[label="21.96"];
+"104.0.4.65" -> "104.130.1.67"[label="1.00"];
+"104.0.4.65" -> "104.130.1.66"[label="1.00"];
+"104.0.4.65" -> "104.130.1.65"[label="1.00"];
+"104.0.4.65" -> "104.0.4.161"[label="28.26"];
+"104.0.4.65" -> "104.130.1.154"[label="1.00"];
+"104.0.4.65" -> "104.0.0.17"[label="2.58"];
+"104.198.65.65" -> "104.198.65.97"[label="1.46"];
+"104.192.192.199" -> "104.192.0.32"[label="18.96"];
+"104.192.192.199" -> "104.192.192.225"[label="1.00"];
+"104.192.192.199" -> "104.192.192.99"[label="1.00"];
+"104.192.192.199" -> "104.65.5.4"[label="5.19"];
+"104.192.192.199" -> "104.130.1.65"[label="19.79"];
+"104.192.192.199" -> "104.192.192.66"[label="1.00"];
+"104.192.192.199" -> "104.131.34.1"[label="13.05"];
+"104.192.192.199" -> "104.192.192.33"[label="1.00"];
+"104.192.192.199" -> "104.192.192.166"[label="1.00"];
+"104.192.192.199" -> "104.192.192.177"[label="1.00"];
+"104.192.192.199" -> "104.192.192.1"[label="1.00"];
+"104.192.192.199" -> "104.192.192.133"[label="1.00"];
+"104.192.192.199" -> "104.135.0.1"[label="21.38"];
+"104.129.1.71" -> "104.129.37.2"[label="8.49"];
+"104.129.1.71" -> "104.129.1.18"[label="1.57"];
+"104.65.5.3" -> "104.130.1.73"[label="86.70"];
+"104.65.5.3" -> "104.65.5.4"[label="2.45"];
+"104.65.5.3" -> "104.130.1.65"[label="18.21"];
+"104.65.5.3" -> "104.12.1.6"[label="17.18"];
+"104.202.19.1" -> "104.202.53.1"[label="1.34"];
+"104.202.19.1" -> "104.202.0.2"[label="3.58"];
+"104.202.19.1" -> "104.72.0.1"[label="8.62"];
+"104.202.19.1" -> "104.203.0.1"[label="1.76"];
+"104.198.65.94" -> "104.198.65.81"[label="1.00"];
+"104.129.0.219" -> "104.129.0.125"[label="73.72"];
+"104.129.0.219" -> "104.129.0.110"[label="1.40"];
+"104.129.0.219" -> "104.129.0.82"[label="4.52"];
+"104.66.0.24" -> "104.66.0.46"[label="1.44"];
+"104.66.0.24" -> "104.66.0.8"[label="1.36"];
+"104.66.0.24" -> "104.130.1.154"[label="1.34"];
+"104.66.0.30" -> "104.66.0.34"[label="8.03"];
+"104.66.0.30" -> "104.192.192.99"[label="7.52"];
+"104.66.0.30" -> "104.66.107.4"[label="2.34"];
+"104.66.0.30" -> "104.192.103.3"[label="1.52"];
+"104.66.0.30" -> "104.192.192.166"[label="0.00"];
+"104.66.0.30" -> "104.66.0.203"[label="0.00"];
+"104.66.0.30" -> "104.66.77.4"[label="1.66"];
+"104.66.0.30" -> "104.192.192.133"[label="3.76"];
+"104.129.0.95" -> "104.129.0.108"[label="1.20"];
+"104.129.0.95" -> "104.129.0.239"[label="1.42"];
+"104.129.0.95" -> "104.129.0.125"[label="5.86"];
+"104.129.0.95" -> "104.129.0.8"[label="1.86"];
+"104.129.0.95" -> "104.129.1.10"[label="43.01"];
+"104.66.0.18" -> "104.66.24.111"[label="4.11"];
+"104.198.23.1" -> "104.130.1.66"[label="69.47"];
+"104.129.81.1" -> "104.129.0.107"[label="2.38"];
+"104.129.81.1" -> "104.129.103.1"[label="8.87"];
+"104.129.81.1" -> "104.129.46.100"[label="1.65"];
+"104.129.81.1" -> "104.129.0.77"[label="1.40"];
+"104.129.81.1" -> "104.129.1.43"[label="2.02"];
+"104.129.81.1" -> "104.129.1.44"[label="2.19"];
+"104.129.81.1" -> "104.129.0.138"[label="26.27"];
+"104.0.3.81" -> "104.193.1.1"[label="1.00"];
+"104.0.3.81" -> "104.0.3.13"[label="28.00"];
+"104.0.3.81" -> "104.0.0.5"[label="14.14"];
+"104.192.0.20" -> "104.192.0.52"[label="3.05"];
+"104.192.0.20" -> "104.192.192.66"[label="1.44"];
+"104.192.0.20" -> "104.192.192.33"[label="1.57"];
+"104.192.0.20" -> "104.192.192.1"[label="5.49"];
+"104.12.0.89" -> "104.12.0.73"[label="2.00"];
+"104.12.0.89" -> "104.13.3.33"[label="0.00"];
+"104.12.0.89" -> "104.13.0.189"[label="0.00"];
+"104.198.65.81" -> "104.192.192.225"[label="3.28"];
+"104.198.65.81" -> "104.198.65.73"[label="1.21"];
+"104.198.65.81" -> "104.198.65.94"[label="1.00"];
+"104.198.65.81" -> "104.192.192.1"[label="3.41"];
+"104.130.27.176" -> "104.130.1.110"[label="5.05"];
+"104.130.27.176" -> "104.130.1.97"[label="0.00"];
+"104.130.27.176" -> "104.130.17.17"[label="42.03"];
+"104.130.27.176" -> "104.130.3.3"[label="106.25"];
+"104.130.27.176" -> "104.130.1.157"[label="30.79"];
+"104.130.27.176" -> "104.130.1.10"[label="0.00"];
+"104.129.44.7" -> "104.131.0.147"[label="6.88"];
+"104.129.44.7" -> "104.131.0.148"[label="4.10"];
+"104.129.1.43" -> "104.129.0.107"[label="1.40"];
+"104.129.1.43" -> "104.129.46.100"[label="46.45"];
+"104.129.1.43" -> "104.129.0.77"[label="1.92"];
+"104.129.1.43" -> "104.129.81.1"[label="2.08"];
+"104.129.1.43" -> "104.129.1.44"[label="1.21"];
+"104.129.1.43" -> "104.129.6.1"[label="2.23"];
+"104.161.0.10" -> "104.161.0.1"[label="1.70"];
+"104.129.1.44" -> "104.129.0.107"[label="1.04"];
+"104.129.1.44" -> "104.129.81.1"[label="2.19"];
+"104.129.1.44" -> "104.129.1.43"[label="1.37"];
+"104.66.107.4" -> "104.66.0.34"[label="6.90"];
+"104.66.107.4" -> "104.66.0.30"[label="4.26"];
+"104.66.107.4" -> "104.66.0.203"[label="1.97"];
+"104.66.107.4" -> "104.66.77.4"[label="1.00"];
+"104.66.107.4" -> "104.66.0.201"[label="10.74"];
+"104.130.1.45" -> "104.130.1.66"[label="4.04"];
+"104.129.0.161" -> "104.129.0.123"[label="2.03"];
+"104.161.0.1" -> "104.161.0.10"[label="1.72"];
+"104.161.0.1" -> "104.161.0.2"[label="2.30"];
+"104.161.0.1" -> "104.0.4.161"[label="1.00"];
+"104.131.34.1" -> "104.130.1.73"[label="3.28"];
+"104.131.34.1" -> "104.130.1.67"[label="2.84"];
+"104.131.34.1" -> "104.130.1.65"[label="0.00"];
+"104.131.34.1" -> "104.192.192.199"[label="25.01"];
+"104.131.34.1" -> "104.192.192.166"[label="591.14"];
+"104.131.34.1" -> "104.131.21.34"[label="49.26"];
+"104.131.34.1" -> "104.131.9.6"[label="9.11"];
+"104.131.34.1" -> "104.130.1.131"[label="1.79"];
+"104.131.34.1" -> "104.131.21.21"[label="11.73"];
+"104.131.34.1" -> "104.130.17.20"[label="19.32"];
+"104.131.34.1" -> "104.130.1.16"[label="21.85"];
+"104.130.1.162" -> "104.130.1.66"[label="3.10"];
+"104.192.192.33" -> "104.192.192.225"[label="1.00"];
+"104.192.192.33" -> "104.192.192.99"[label="1.00"];
+"104.192.192.33" -> "104.202.53.1"[label="54.73"];
+"104.192.192.33" -> "104.192.0.52"[label="6.75"];
+"104.192.192.33" -> "104.200.0.10"[label="2.20"];
+"104.192.192.33" -> "104.192.192.66"[label="1.00"];
+"104.192.192.33" -> "104.192.192.199"[label="1.00"];
+"104.192.192.33" -> "104.192.0.20"[label="1.54"];
+"104.192.192.33" -> "104.192.192.166"[label="1.00"];
+"104.192.192.33" -> "104.193.24.100"[label="4.40"];
+"104.192.192.33" -> "104.192.192.177"[label="1.00"];
+"104.192.192.33" -> "104.192.192.1"[label="1.00"];
+"104.192.192.33" -> "104.192.192.133"[label="1.00"];
+"104.161.0.2" -> "104.161.0.1"[label="2.37"];
+"104.129.0.165" -> "104.129.105.2"[label="1.63"];
+"104.129.0.165" -> "104.129.108.1"[label="5.73"];
+"104.129.0.165" -> "104.129.105.10"[label="1.40"];
+"104.129.0.165" -> "104.129.103.1"[label="1.08"];
+"104.129.0.165" -> "104.129.103.19"[label="1.44"];
+"104.129.0.165" -> "104.129.0.91"[label="1.21"];
+"104.192.103.3" -> "104.192.192.99"[label="4.57"];
+"104.192.103.3" -> "104.192.2.2"[label="1.13"];
+"104.192.103.3" -> "104.66.0.30"[label="1.50"];
+"104.192.103.3" -> "104.66.0.203"[label="0.00"];
+"104.192.103.3" -> "104.66.0.201"[label="1.24"];
+"104.192.103.3" -> "104.66.77.4"[label="1.44"];
+"104.192.103.3" -> "104.192.192.133"[label="2.93"];
+"104.0.4.161" -> "104.0.4.200"[label="18.38"];
+"104.0.4.161" -> "104.0.4.65"[label="28.26"];
+"104.0.4.161" -> "104.161.0.1"[label="1.00"];
+"104.0.4.161" -> "104.0.0.17"[label="1.11"];
+"104.129.37.2" -> "104.129.0.234"[label="2.01"];
+"104.129.37.2" -> "104.129.0.239"[label="2.65"];
+"104.129.37.2" -> "104.129.0.110"[label="14.80"];
+"104.129.37.2" -> "104.129.0.123"[label="22.94"];
+"104.129.37.2" -> "104.129.1.71"[label="6.75"];
+"104.129.37.2" -> "104.129.0.8"[label="13.47"];
+"104.129.37.2" -> "104.129.1.10"[label="24.10"];
+"104.129.37.2" -> "104.129.1.1"[label="3.04"];
+"104.129.37.2" -> "104.129.1.17"[label="3.29"];
+"104.129.37.2" -> "104.129.1.18"[label="25.01"];
+"104.192.192.166" -> "104.192.192.66"[label="1.00"];
+"104.192.192.166" -> "104.192.192.199"[label="1.00"];
+"104.192.192.166" -> "104.66.0.30"[label="0.00"];
+"104.192.192.166" -> "104.192.192.33"[label="1.00"];
+"104.192.192.166" -> "104.192.192.177"[label="2.01"];
+"104.192.192.166" -> "104.66.77.4"[label="151.57"];
+"104.192.192.166" -> "104.66.0.201"[label="2.00"];
+"104.192.192.166" -> "104.192.192.1"[label="1.00"];
+"104.192.192.166" -> "104.192.192.133"[label="1.00"];
+"104.129.0.187" -> "104.129.1.28"[label="30.39"];
+"104.131.0.184" -> "104.131.131.3"[label="1.60"];
+"104.66.0.249" -> "104.66.0.34"[label="1.17"];
+"104.66.0.249" -> "104.66.0.23"[label="2.51"];
+"104.66.0.249" -> "104.66.0.203"[label="1.74"];
+"104.66.0.249" -> "104.66.0.201"[label="3.02"];
+"104.12.0.176" -> "104.5.0.222"[label="33.87"];
+"104.12.0.176" -> "104.12.0.1"[label="1.47"];
+"104.12.0.176" -> "104.12.1.11"[label="6.06"];
+"104.12.0.176" -> "104.12.0.19"[label="7.31"];
+"104.12.0.176" -> "104.12.0.30"[label="1.52"];
+"104.193.24.100" -> "104.192.192.99"[label="3.35"];
+"104.193.24.100" -> "104.192.0.52"[label="57.95"];
+"104.193.24.100" -> "104.192.192.66"[label="1.73"];
+"104.193.24.100" -> "104.192.192.33"[label="4.34"];
+"104.193.24.100" -> "104.192.192.1"[label="0.00"];
+"104.192.192.177" -> "104.192.192.225"[label="1.00"];
+"104.192.192.177" -> "104.192.192.99"[label="2.01"];
+"104.192.192.177" -> "104.192.192.66"[label="2.01"];
+"104.192.192.177" -> "104.192.192.199"[label="1.00"];
+"104.192.192.177" -> "104.192.192.33"[label="1.00"];
+"104.192.192.177" -> "104.192.192.166"[label="2.01"];
+"104.192.192.177" -> "104.192.192.178"[label="1.03"];
+"104.192.192.177" -> "104.192.192.1"[label="1.00"];
+"104.192.192.177" -> "104.192.192.133"[label="2.01"];
+"104.192.192.178" -> "104.192.192.177"[label="1.04"];
+"104.192.192.178" -> "104.129.29.29"[label="1.00"];
+"104.131.0.55" -> "104.131.131.1"[label="8.17"];
+"104.131.0.55" -> "104.131.0.3"[label="1.78"];
+"104.131.21.34" -> "104.131.21.102"[label="1.24"];
+"104.131.21.34" -> "104.131.21.101"[label="1.11"];
+"104.131.21.34" -> "104.131.34.1"[label="0.00"];
+"104.131.21.34" -> "104.131.21.21"[label="1.84"];
+"104.131.21.34" -> "104.131.21.12"[label="2.25"];
+"104.131.21.34" -> "104.131.21.1"[label="12.90"];
+"104.66.24.111" -> "104.66.0.18"[label="3.51"];
+"104.66.24.111" -> "104.0.3.13"[label="1.00"];
+"104.130.1.52" -> "104.130.17.17"[label="42.50"];
+"104.131.10.1" -> "104.131.10.2"[label="0.00"];
+"104.131.9.2" -> "104.130.1.67"[label="12.68"];
+"104.131.9.2" -> "104.130.1.65"[label="136.61"];
+"104.131.9.2" -> "104.129.0.138"[label="0.00"];
+"104.131.9.2" -> "104.131.9.1"[label="1.00"];
+"104.131.9.2" -> "104.131.9.6"[label="12.39"];
+"104.131.9.2" -> "104.131.9.4"[label="1.00"];
+"104.131.9.2" -> "104.131.9.5"[label="30.10"];
+"104.131.9.2" -> "104.131.0.147"[label="30.53"];
+"104.131.9.2" -> "104.131.0.148"[label="26.22"];
+"104.131.9.2" -> "104.131.21.1"[label="11.87"];
+"104.129.0.8" -> "104.129.0.108"[label="1.65"];
+"104.129.0.8" -> "104.129.0.239"[label="2.31"];
+"104.129.0.8" -> "104.129.0.123"[label="38.16"];
+"104.129.0.8" -> "104.129.0.125"[label="216.03"];
+"104.129.0.8" -> "104.129.0.95"[label="2.15"];
+"104.129.0.8" -> "104.129.37.2"[label="19.35"];
+"104.129.0.8" -> "104.129.1.17"[label="37.81"];
+"104.129.0.8" -> "104.129.1.10"[label="0.00"];
+"104.66.0.203" -> "104.66.0.34"[label="1.88"];
+"104.66.0.203" -> "104.66.0.49"[label="3.41"];
+"104.66.0.203" -> "104.66.0.30"[label="1.81"];
+"104.66.0.203" -> "104.66.107.4"[label="1.54"];
+"104.66.0.203" -> "104.192.103.3"[label="24.86"];
+"104.66.0.203" -> "104.66.0.249"[label="1.67"];
+"104.66.0.203" -> "104.66.0.201"[label="1.00"];
+"104.66.0.203" -> "104.66.77.4"[label="1.67"];
+"104.66.0.203" -> "104.66.68.16"[label="5.82"];
+"104.130.1.10" -> "104.130.1.14"[label="1.00"];
+"104.130.1.10" -> "104.136.12.5"[label="3.05"];
+"104.130.1.10" -> "104.130.3.3"[label="10.90"];
+"104.130.1.10" -> "104.130.17.17"[label="3.71"];
+"104.130.1.10" -> "104.130.1.16"[label="1.04"];
+"104.129.1.10" -> "104.129.0.239"[label="57.95"];
+"104.129.1.10" -> "104.129.0.125"[label="5.65"];
+"104.129.1.10" -> "104.129.0.95"[label="27.37"];
+"104.129.1.10" -> "104.129.37.2"[label="25.16"];
+"104.129.1.10" -> "104.129.0.8"[label="11.70"];
+"104.131.25.16" -> "104.131.0.192"[label="2.09"];
+"104.131.25.16" -> "104.130.1.14"[label="2.63"];
+"104.131.25.16" -> "104.131.25.14"[label="1.00"];
+"104.131.25.16" -> "104.131.25.12"[label="1.00"];
+"104.192.103.44" -> "104.192.103.200"[label="1.46"];
+"104.192.103.44" -> "104.192.103.109"[label="6.27"];
+"104.192.103.44" -> "104.192.99.103"[label="1.68"];
+"104.129.0.138" -> "104.129.0.77"[label="24.86"];
+"104.129.0.138" -> "104.129.81.1"[label="18.21"];
+"104.129.0.138" -> "104.130.1.10"[label="0.00"];
+"104.129.0.138" -> "104.131.21.1"[label="0.00"];
+"104.137.0.2" -> "104.12.1.6"[label="1.56"];
+"104.12.1.6" -> "104.192.0.38"[label="14.47"];
+"104.12.1.6" -> "104.130.10.111"[label="2.47"];
+"104.12.1.6" -> "104.130.1.67"[label="36.86"];
+"104.12.1.6" -> "104.65.5.3"[label="19.45"];
+"104.12.1.6" -> "104.137.0.2"[label="1.59"];
+"104.12.1.6" -> "104.6.0.6"[label="13.88"];
+"104.12.1.6" -> "104.130.1.131"[label="4.40"];
+"104.192.0.75" -> "104.192.0.52"[label="1.27"];
+"104.192.0.75" -> "104.192.192.33"[label="30.39"];
+"104.131.9.1" -> "104.0.7.254"[label="10.20"];
+"104.131.9.1" -> "104.129.0.123"[label="21.00"];
+"104.131.9.1" -> "104.130.1.67"[label="61.34"];
+"104.131.9.1" -> "104.131.9.2"[label="1.00"];
+"104.131.9.1" -> "104.131.9.4"[label="1.00"];
+"104.131.9.1" -> "104.131.9.5"[label="2.01"];
+"104.131.9.1" -> "104.131.0.147"[label="14.93"];
+"104.131.9.1" -> "104.131.0.148"[label="295.57"];
+"104.131.9.1" -> "104.131.21.1"[label="5.92"];
+"104.66.0.201" -> "104.192.192.99"[label="4.67"];
+"104.66.0.201" -> "104.66.107.4"[label="4.12"];
+"104.66.0.201" -> "104.192.103.3"[label="1.26"];
+"104.66.0.201" -> "104.192.192.166"[label="2.12"];
+"104.66.0.201" -> "104.66.0.249"[label="3.51"];
+"104.66.0.201" -> "104.66.0.203"[label="1.00"];
+"104.66.0.201" -> "104.66.77.4"[label="2.28"];
+"104.66.0.201" -> "104.192.192.133"[label="1.96"];
+"104.66.77.4" -> "104.66.0.34"[label="16.13"];
+"104.66.77.4" -> "104.192.192.99"[label="3.63"];
+"104.66.77.4" -> "104.66.0.30"[label="1.60"];
+"104.66.77.4" -> "104.66.107.4"[label="1.00"];
+"104.66.77.4" -> "104.192.103.3"[label="1.43"];
+"104.66.77.4" -> "104.192.192.166"[label="250.10"];
+"104.66.77.4" -> "104.66.0.203"[label="0.00"];
+"104.66.77.4" -> "104.66.0.201"[label="2.32"];
+"104.66.77.4" -> "104.192.192.133"[label="3.31"];
+"104.66.77.4" -> "104.66.68.16"[label="4.61"];
+"104.131.10.2" -> "104.130.1.67"[label="13.72"];
+"104.131.10.2" -> "104.131.10.1"[label="1.42"];
+"104.131.10.2" -> "104.131.83.77"[label="1.00"];
+"104.131.9.6" -> "104.130.1.67"[label="8.46"];
+"104.131.9.6" -> "104.131.34.1"[label="15.56"];
+"104.131.9.6" -> "104.131.9.2"[label="12.39"];
+"104.131.9.6" -> "104.131.0.147"[label="1.86"];
+"104.131.9.6" -> "104.131.21.1"[label="31.64"];
+"104.131.9.6" -> "104.131.0.148"[label="216.75"];
+"104.136.12.9" -> "104.136.22.22"[label="1.34"];
+"104.136.12.9" -> "104.136.12.7"[label="1.00"];
+"104.136.12.9" -> "104.136.12.30"[label="1.00"];
+"104.130.1.14" -> "104.130.1.10"[label="1.00"];
+"104.130.1.14" -> "104.131.25.16"[label="2.89"];
+"104.130.1.14" -> "104.130.1.16"[label="1.04"];
+"104.0.3.13" -> "104.0.3.81"[label="28.00"];
+"104.0.3.13" -> "104.66.24.111"[label="1.00"];
+"104.0.3.13" -> "104.0.0.5"[label="1.29"];
+"104.131.9.4" -> "104.131.9.2"[label="1.00"];
+"104.131.9.4" -> "104.131.9.1"[label="1.00"];
+"104.131.9.4" -> "104.131.9.5"[label="5.17"];
+"104.131.9.5" -> "104.131.9.2"[label="33.18"];
+"104.131.9.5" -> "104.131.9.1"[label="2.21"];
+"104.131.9.5" -> "104.131.9.4"[label="8.96"];
+"104.136.0.7" -> "104.136.22.22"[label="1.25"];
+"104.6.0.6" -> "104.12.1.6"[label="18.75"];
+"104.6.0.6" -> "104.6.0.11"[label="4.31"];
+"104.6.0.6" -> "104.8.0.24"[label="20.37"];
+"104.69.0.69" -> "104.0.7.254"[label="57.80"];
+"104.131.0.3" -> "104.131.131.1"[label="1.68"];
+"104.131.0.3" -> "104.131.131.3"[label="2.46"];
+"104.131.0.3" -> "104.131.0.55"[label="1.88"];
+"104.130.77.79" -> "104.130.77.5"[label="1.00"];
+"104.130.77.79" -> "104.130.77.1"[label="1.43"];
+"104.130.77.79" -> "104.130.1.66"[label="5.45"];
+"104.130.77.79" -> "104.130.77.232"[label="2.83"];
+"104.130.77.79" -> "104.130.77.78"[label="1.00"];
+"104.130.77.79" -> "104.130.77.77"[label="1.00"];
+"104.131.1.2" -> "104.131.131.3"[label="0.00"];
+"104.131.1.2" -> "104.131.83.77"[label="77.41"];
+"104.130.1.131" -> "104.130.1.67"[label="4.76"];
+"104.130.1.131" -> "104.131.34.1"[label="2.15"];
+"104.130.1.131" -> "104.12.1.6"[label="3.72"];
+"104.130.1.131" -> "104.130.1.16"[label="0.00"];
+"104.129.1.1" -> "104.129.37.2"[label="3.52"];
+"104.129.1.1" -> "104.0.0.30"[label="1.00"];
+"104.129.1.1" -> "104.129.1.17"[label="2.69"];
+"104.129.1.1" -> "104.0.0.17"[label="1.00"];
+"104.130.77.78" -> "104.130.77.79"[label="1.00"];
+"104.130.77.78" -> "104.130.77.77"[label="1.00"];
+"104.130.77.78" -> "104.130.77.5"[label="1.00"];
+"104.192.192.1" -> "104.192.0.32"[label="197.05"];
+"104.192.192.1" -> "104.192.192.225"[label="1.00"];
+"104.192.192.1" -> "104.192.192.99"[label="1.00"];
+"104.192.192.1" -> "104.192.192.66"[label="1.00"];
+"104.192.192.1" -> "104.192.192.199"[label="1.00"];
+"104.192.192.1" -> "104.192.0.20"[label="4.79"];
+"104.192.192.1" -> "104.198.65.81"[label="3.16"];
+"104.192.192.1" -> "104.192.192.33"[label="1.00"];
+"104.192.192.1" -> "104.192.192.166"[label="1.00"];
+"104.192.192.1" -> "104.192.192.177"[label="1.00"];
+"104.192.192.1" -> "104.192.192.133"[label="1.00"];
+"104.129.29.29" -> "104.192.192.178"[label="1.00"];
+"104.136.12.5" -> "104.130.1.10"[label="1.43"];
+"104.136.12.5" -> "104.130.3.3"[label="2167.50"];
+"104.136.12.5" -> "104.130.5.5"[label="1.17"];
+"104.136.12.5" -> "104.130.17.17"[label="7.52"];
+"104.130.17.17" -> "104.130.1.110"[label="3.94"];
+"104.130.17.17" -> "104.130.1.97"[label="0.00"];
+"104.130.17.17" -> "104.130.27.176"[label="76.68"];
+"104.130.17.17" -> "104.130.1.52"[label="67.17"];
+"104.130.17.17" -> "104.130.1.10"[label="57.70"];
+"104.130.17.17" -> "104.136.12.5"[label="7.40"];
+"104.130.17.17" -> "104.130.3.3"[label="3.41"];
+"104.130.17.17" -> "104.130.1.157"[label="23.66"];
+"104.130.17.17" -> "104.130.1.16"[label="903.13"];
+"104.130.3.3" -> "104.130.1.110"[label="17.71"];
+"104.130.3.3" -> "104.130.1.97"[label="0.00"];
+"104.130.3.3" -> "104.130.27.176"[label="102.24"];
+"104.130.3.3" -> "104.130.1.10"[label="12.55"];
+"104.130.3.3" -> "104.136.12.5"[label="1625.63"];
+"104.130.3.3" -> "104.130.17.17"[label="8.91"];
+"104.130.3.3" -> "104.130.1.157"[label="0.00"];
+"104.131.131.2" -> "104.131.131.3"[label="1.61"];
+"104.130.77.77" -> "104.130.77.232"[label="5.06"];
+"104.130.77.77" -> "104.130.1.73"[label="35.53"];
+"104.130.77.77" -> "104.130.77.5"[label="1.00"];
+"104.130.77.77" -> "104.130.77.1"[label="2.87"];
+"104.130.77.77" -> "104.130.1.67"[label="0.00"];
+"104.130.77.77" -> "104.130.1.66"[label="3.63"];
+"104.130.77.77" -> "104.130.1.65"[label="12.05"];
+"104.130.77.77" -> "104.130.77.79"[label="1.00"];
+"104.130.77.77" -> "104.130.77.78"[label="1.00"];
+"104.130.100.100" -> "104.192.192.225"[label="0.00"];
+"104.130.100.100" -> "104.130.1.66"[label="13.58"];
+"104.130.5.5" -> "104.136.12.5"[label="1.25"];
+"104.132.22.17" -> "104.132.24.12"[label="1.13"];
+"104.131.13.13" -> "104.131.21.1"[label="16.13"];
+"104.136.12.7" -> "104.136.12.9"[label="1.00"];
+"104.136.12.7" -> "104.136.12.30"[label="1.00"];
+"104.136.12.7" -> "104.131.25.12"[label="1.59"];
+"104.131.131.3" -> "104.131.0.42"[label="2.13"];
+"104.131.131.3" -> "104.131.0.184"[label="1.65"];
+"104.131.131.3" -> "104.131.1.2"[label="0.00"];
+"104.131.131.3" -> "104.131.0.3"[label="2.35"];
+"104.131.131.3" -> "104.131.131.2"[label="1.56"];
+"104.131.131.3" -> "104.131.83.77"[label="6.35"];
+"104.131.131.3" -> "104.131.0.146"[label="13.09"];
+"104.131.21.21" -> "104.131.21.104"[label="3.27"];
+"104.131.21.21" -> "104.131.21.105"[label="1.66"];
+"104.131.21.21" -> "104.131.21.102"[label="1.19"];
+"104.131.21.21" -> "104.131.21.101"[label="1.35"];
+"104.131.21.21" -> "104.131.34.1"[label="18.21"];
+"104.131.21.21" -> "104.131.21.34"[label="1.34"];
+"104.131.21.21" -> "104.131.21.12"[label="1.21"];
+"104.131.21.21" -> "104.131.21.1"[label="8.73"];
+"104.7.2.1" -> "104.0.7.254"[label="57.95"];
+"104.7.2.1" -> "104.7.2.65"[label="3.70"];
+"104.130.1.6" -> "104.130.1.67"[label="8.32"];
+"104.130.1.6" -> "104.130.1.66"[label="2.09"];
+"104.0.0.5" -> "104.0.3.81"[label="13.23"];
+"104.0.0.5" -> "104.0.3.13"[label="1.25"];
+"104.0.0.5" -> "104.0.0.6"[label="1.00"];
+"104.0.0.5" -> "104.0.0.17"[label="1.08"];
+"104.192.192.133" -> "104.192.192.225"[label="1.00"];
+"104.192.192.133" -> "104.192.192.99"[label="1.00"];
+"104.192.192.133" -> "104.129.0.125"[label="285.20"];
+"104.192.192.133" -> "104.66.0.49"[label="14.77"];
+"104.192.192.133" -> "104.192.103.109"[label="0.00"];
+"104.192.192.133" -> "104.192.192.66"[label="1.00"];
+"104.192.192.133" -> "104.192.192.199"[label="1.00"];
+"104.192.192.133" -> "104.66.0.30"[label="4.28"];
+"104.192.192.133" -> "104.192.192.33"[label="1.00"];
+"104.192.192.133" -> "104.192.103.3"[label="2.55"];
+"104.192.192.133" -> "104.192.192.166"[label="1.00"];
+"104.192.192.133" -> "104.192.192.177"[label="2.01"];
+"104.192.192.133" -> "104.192.0.74"[label="0.00"];
+"104.192.192.133" -> "104.66.77.4"[label="3.21"];
+"104.192.192.133" -> "104.66.0.201"[label="1.81"];
+"104.192.192.133" -> "104.192.192.1"[label="1.00"];
+"104.192.192.133" -> "104.192.99.160"[label="21.28"];
+"104.10.2.14" -> "104.10.2.34"[label="1.00"];
+"104.10.2.14" -> "104.6.0.11"[label="1.39"];
+"104.10.2.14" -> "104.10.2.24"[label="1.00"];
+"104.135.0.1" -> "104.192.192.225"[label="36.86"];
+"104.135.0.1" -> "104.130.1.66"[label="65.68"];
+"104.129.6.1" -> "104.129.1.43"[label="2.29"];
+"104.0.0.6" -> "104.65.0.42"[label="1.37"];
+"104.0.0.6" -> "104.202.53.1"[label="10.01"];
+"104.0.0.6" -> "104.201.0.3"[label="3.09"];
+"104.0.0.6" -> "104.201.0.4"[label="1.16"];
+"104.0.0.6" -> "104.202.19.1"[label="1.66"];
+"104.0.0.6" -> "104.0.0.5"[label="1.00"];
+"104.132.0.3" -> "104.132.24.7"[label="90.31"];
+"104.132.0.3" -> "104.132.24.3"[label="22.50"];
+"104.130.17.20" -> "104.131.34.1"[label="24.19"];
+"104.130.17.20" -> "104.130.1.16"[label="4.98"];
+"104.12.0.20" -> "104.12.0.200"[label="361.25"];
+"104.12.0.20" -> "104.12.34.6"[label="2.33"];
+"104.12.0.20" -> "104.13.3.33"[label="1.06"];
+"104.12.0.20" -> "104.12.0.46"[label="1.32"];
+"104.12.0.20" -> "104.12.0.43"[label="0.00"];
+"104.12.0.20" -> "104.13.0.50"[label="137.47"];
+"104.132.24.4" -> "104.132.24.7"[label="1.06"];
+"104.132.24.4" -> "104.132.24.1"[label="1.14"];
+"104.132.24.4" -> "104.132.24.2"[label="2.80"];
+"104.132.24.4" -> "104.132.24.3"[label="1.48"];
+"104.132.24.4" -> "104.132.24.8"[label="1.16"];
+"104.132.24.4" -> "104.132.24.9"[label="11.35"];
+"104.132.24.5" -> "104.132.24.1"[label="2.61"];
+"104.132.24.5" -> "104.132.24.2"[label="3.97"];
+"104.132.24.5" -> "104.132.24.3"[label="1.43"];
+"104.132.24.5" -> "104.132.24.9"[label="117.80"];
+"104.130.1.154" -> "104.130.1.67"[label="1.00"];
+"104.130.1.154" -> "104.130.1.66"[label="1.00"];
+"104.130.1.154" -> "104.130.1.65"[label="1.00"];
+"104.130.1.154" -> "104.0.4.65"[label="1.00"];
+"104.130.1.154" -> "104.66.0.24"[label="1.38"];
+"104.136.12.30" -> "104.132.24.1"[label="1.02"];
+"104.136.12.30" -> "104.136.12.7"[label="1.00"];
+"104.136.12.30" -> "104.136.12.9"[label="1.00"];
+"104.136.12.30" -> "104.136.22.22"[label="1.58"];
+"104.131.21.12" -> "104.131.21.34"[label="1.39"];
+"104.131.21.12" -> "104.131.21.21"[label="1.14"];
+"104.131.21.12" -> "104.131.21.1"[label="17.31"];
+"104.131.21.12" -> "104.131.21.102"[label="1.05"];
+"104.131.21.12" -> "104.131.21.101"[label="1.06"];
+"104.132.24.7" -> "104.132.0.3"[label="197.05"];
+"104.132.24.7" -> "104.132.24.4"[label="1.10"];
+"104.132.24.7" -> "104.132.24.1"[label="2.27"];
+"104.132.24.7" -> "104.132.24.2"[label="14.99"];
+"104.132.24.7" -> "104.132.24.9"[label="11.87"];
+"104.129.1.28" -> "104.130.1.67"[label="5.85"];
+"104.129.1.28" -> "104.129.0.187"[label="61.34"];
+"104.132.24.1" -> "104.132.24.4"[label="1.32"];
+"104.132.24.1" -> "104.132.24.5"[label="15.18"];
+"104.132.24.1" -> "104.136.12.30"[label="1.02"];
+"104.132.24.1" -> "104.132.24.7"[label="2.07"];
+"104.132.24.1" -> "104.132.24.3"[label="1.63"];
+"104.132.24.1" -> "104.132.24.8"[label="1.16"];
+"104.132.24.1" -> "104.132.24.9"[label="1.07"];
+"104.130.30.1" -> "104.130.1.67"[label="4.03"];
+"104.130.30.1" -> "104.130.30.3"[label="1.58"];
+"104.130.30.1" -> "104.130.30.9"[label="1.36"];
+"104.129.31.3" -> "104.130.1.73"[label="4.98"];
+"104.129.31.3" -> "104.129.31.14"[label="1.16"];
+"104.0.0.29" -> "104.0.0.30"[label="1.30"];
+"104.131.83.77" -> "104.130.1.67"[label="56.30"];
+"104.131.83.77" -> "104.131.10.2"[label="1.00"];
+"104.131.83.77" -> "104.131.1.2"[label="32.48"];
+"104.131.83.77" -> "104.131.131.1"[label="22.12"];
+"104.131.83.77" -> "104.131.131.3"[label="8.04"];
+"104.0.0.30" -> "104.129.1.1"[label="1.00"];
+"104.0.0.30" -> "104.0.0.29"[label="1.30"];
+"104.0.0.30" -> "104.0.0.17"[label="1.00"];
+"104.130.1.157" -> "104.130.1.110"[label="2.03"];
+"104.130.1.157" -> "104.130.1.97"[label="4.67"];
+"104.130.1.157" -> "104.130.27.176"[label="37.70"];
+"104.130.1.157" -> "104.130.3.3"[label="0.00"];
+"104.130.1.157" -> "104.130.17.17"[label="23.16"];
+"104.130.30.3" -> "104.130.1.67"[label="0.00"];
+"104.130.30.3" -> "104.130.30.1"[label="1.58"];
+"104.130.30.3" -> "104.130.30.9"[label="1.06"];
+"104.132.24.3" -> "104.132.0.3"[label="32.03"];
+"104.132.24.3" -> "104.132.24.4"[label="2.01"];
+"104.132.24.3" -> "104.132.24.5"[label="20.74"];
+"104.132.24.3" -> "104.132.24.1"[label="13.68"];
+"104.132.24.3" -> "104.132.24.9"[label="11.68"];
+"104.132.24.12" -> "104.132.22.17"[label="1.14"];
+"104.132.24.12" -> "104.132.24.2"[label="1.00"];
+"104.8.0.24" -> "104.6.0.11"[label="3.27"];
+"104.8.0.24" -> "104.6.0.6"[label="22.52"];
+"104.8.0.24" -> "104.8.0.22"[label="1.00"];
+"104.131.0.147" -> "104.131.9.2"[label="7.27"];
+"104.131.0.147" -> "104.131.9.1"[label="5.96"];
+"104.131.0.147" -> "104.131.9.6"[label="1.44"];
+"104.131.0.147" -> "104.131.0.148"[label="1.63"];
+"104.131.0.146" -> "104.131.0.42"[label="1.20"];
+"104.131.0.146" -> "104.131.1.2"[label="0.00"];
+"104.129.1.17" -> "104.129.0.239"[label="0.00"];
+"104.129.1.17" -> "104.129.0.110"[label="0.00"];
+"104.129.1.17" -> "104.129.0.123"[label="0.00"];
+"104.129.1.17" -> "104.129.37.2"[label="3.36"];
+"104.129.1.17" -> "104.129.0.8"[label="33.78"];
+"104.129.1.17" -> "104.129.1.1"[label="2.59"];
+"104.129.1.17" -> "104.129.1.18"[label="1.00"];
+"104.0.0.17" -> "104.0.4.200"[label="1.01"];
+"104.0.0.17" -> "104.0.4.65"[label="2.38"];
+"104.0.0.17" -> "104.0.4.161"[label="1.10"];
+"104.0.0.17" -> "104.129.1.1"[label="1.00"];
+"104.0.0.17" -> "104.0.0.5"[label="1.13"];
+"104.0.0.17" -> "104.0.0.30"[label="1.00"];
+"104.129.18.1" -> "104.129.46.100"[label="2.72"];
+"104.129.1.18" -> "104.129.1.71"[label="1.44"];
+"104.129.1.18" -> "104.129.37.2"[label="27.09"];
+"104.129.1.18" -> "104.129.1.17"[label="1.00"];
+"104.23.0.4" -> "104.23.0.2"[label="1.09"];
+"104.130.1.16" -> "104.130.1.67"[label="2.71"];
+"104.130.1.16" -> "104.131.34.1"[label="22.50"];
+"104.130.1.16" -> "104.130.1.10"[label="1.04"];
+"104.130.1.16" -> "104.130.1.14"[label="1.04"];
+"104.130.1.16" -> "104.130.1.131"[label="25.32"];
+"104.130.1.16" -> "104.130.17.17"[label="677.34"];
+"104.130.1.16" -> "104.130.17.20"[label="4.00"];
+"104.131.25.14" -> "104.130.10.111"[label="18.71"];
+"104.131.25.14" -> "104.131.0.74"[label="2.43"];
+"104.131.25.14" -> "104.131.25.16"[label="1.00"];
+"104.131.25.14" -> "104.131.25.12"[label="1.00"];
+"104.132.24.8" -> "104.132.24.7"[label="0.00"];
+"104.132.24.8" -> "104.132.24.4"[label="1.10"];
+"104.132.24.8" -> "104.132.24.1"[label="1.19"];
+"104.132.24.8" -> "104.132.24.9"[label="2.16"];
+"104.130.30.9" -> "104.130.30.1"[label="1.25"];
+"104.130.30.9" -> "104.130.1.67"[label="8.80"];
+"104.130.30.9" -> "104.130.30.3"[label="1.03"];
+"104.132.24.9" -> "104.132.24.4"[label="12.52"];
+"104.132.24.9" -> "104.132.24.5"[label="134.35"];
+"104.132.24.9" -> "104.132.24.7"[label="12.69"];
+"104.132.24.9" -> "104.132.24.1"[label="1.34"];
+"104.132.24.9" -> "104.132.24.3"[label="13.35"];
+"104.132.24.9" -> "104.132.24.8"[label="2.35"];
+"104.23.0.2" -> "104.0.7.254"[label="10.63"];
+"104.23.0.2" -> "104.23.0.4"[label="1.09"];
+"104.66.68.16" -> "104.66.0.23"[label="1.24"];
+"104.66.68.16" -> "104.66.0.203"[label="6.19"];
+"104.66.68.16" -> "104.66.77.4"[label="6.13"];
+"104.131.25.12" -> "104.131.0.245"[label="1.13"];
+"104.131.25.12" -> "104.131.25.16"[label="1.00"];
+"104.131.25.12" -> "104.136.12.7"[label="1.51"];
+"104.131.25.12" -> "104.131.25.14"[label="1.00"];
+"104.131.21.1" -> "104.131.21.104"[label="8.80"];
+"104.131.21.1" -> "104.131.21.105"[label="3.55"];
+"104.131.21.1" -> "104.131.21.101"[label="20.53"];
+"104.131.21.1" -> "104.131.34.1"[label="0.00"];
+"104.131.21.1" -> "104.131.21.34"[label="20.03"];
+"104.131.21.1" -> "104.131.9.2"[label="4.90"];
+"104.131.21.1" -> "104.131.9.1"[label="3.82"];
+"104.131.21.1" -> "104.131.21.21"[label="5.03"];
+"104.131.21.1" -> "104.131.21.12"[label="24.19"];
+"104.131.0.148" -> "104.129.44.7"[label="0.00"];
+"104.131.0.148" -> "104.131.9.2"[label="32.14"];
+"104.131.0.148" -> "104.131.9.1"[label="244.45"];
+"104.131.0.148" -> "104.131.9.6"[label="50.41"];
+"104.131.0.148" -> "104.131.0.147"[label="1.45"];
+"104.65.0.42" -> "0.0.0.0/0.0.0.0"[label="HNA"];
+"0.0.0.0/0.0.0.0"[shape=diamond];
+"104.0.7.254" -> "10.63.0.0/255.255.0.0"[label="HNA"];
+"10.63.0.0/255.255.0.0"[shape=diamond];
+"104.0.7.254" -> "104.63.0.0/255.255.0.0"[label="HNA"];
+"104.63.0.0/255.255.0.0"[shape=diamond];
+"104.0.7.254" -> "10.99.0.0/255.255.0.0"[label="HNA"];
+"10.99.0.0/255.255.0.0"[shape=diamond];
+"104.131.0.245" -> "104.131.0.145/255.255.255.255"[label="HNA"];
+"104.131.0.145/255.255.255.255"[shape=diamond];
+"104.129.37.2" -> "104.129.37.3/255.255.255.255"[label="HNA"];
+"104.129.37.3/255.255.255.255"[shape=diamond];
+"104.129.37.2" -> "104.129.37.1/255.255.255.255"[label="HNA"];
+"104.129.37.1/255.255.255.255"[shape=diamond];
+"104.131.0.55" -> "0.0.0.0/0.0.0.0"[label="HNA"];
+"0.0.0.0/0.0.0.0"[shape=diamond];
+"104.129.1.10" -> "0.0.0.0/0.0.0.0"[label="HNA"];
+"0.0.0.0/0.0.0.0"[shape=diamond];
+"104.131.9.1" -> "104.131.9.77/255.255.255.255"[label="HNA"];
+"104.131.9.77/255.255.255.255"[shape=diamond];
+"104.131.9.5" -> "104.131.9.136/255.255.255.248"[label="HNA"];
+"104.131.9.136/255.255.255.248"[shape=diamond];
+"104.129.29.29" -> "104.129.29.224/255.255.255.224"[label="HNA"];
+"104.129.29.224/255.255.255.224"[shape=diamond];
+"104.130.77.77" -> "0.0.0.0/0.0.0.0"[label="HNA"];
+"0.0.0.0/0.0.0.0"[shape=diamond];
+"104.130.17.17" -> "104.136.12.12/255.255.255.255"[label="HNA"];
+"104.136.12.12/255.255.255.255"[shape=diamond];
+"104.136.12.7" -> "0.0.0.0/0.0.0.0"[label="HNA"];
+"0.0.0.0/0.0.0.0"[shape=diamond];
+"104.131.21.21" -> "0.0.0.0/0.0.0.0"[label="HNA"];
+"0.0.0.0/0.0.0.0"[shape=diamond];
+"104.132.24.1" -> "0.0.0.0/0.0.0.0"[label="HNA"];
+"0.0.0.0/0.0.0.0"[shape=diamond];
+"104.130.30.1" -> "104.130.30.30/255.255.255.255"[label="HNA"];
+"104.130.30.30/255.255.255.255"[shape=diamond];
+"104.130.1.16" -> "0.0.0.0/0.0.0.0"[label="HNA"];
+"0.0.0.0/0.0.0.0"[shape=diamond];
+"104.132.24.8" -> "104.136.12.13/255.255.255.255"[label="HNA"];
+"104.136.12.13/255.255.255.255"[shape=diamond];
+"104.132.24.9" -> "104.132.24.250/255.255.255.255"[label="HNA"];
+"104.132.24.250/255.255.255.255"[shape=diamond];
+"104.23.0.2" -> "0.0.0.0/0.0.0.0"[label="HNA"];
+"0.0.0.0/0.0.0.0"[shape=diamond];
+"104.23.0.2" -> "104.23.0.5/255.255.255.255"[label="HNA"];
+"104.23.0.5/255.255.255.255"[shape=diamond];
+}
+
+digraph topology
+{
+"104.131.131.1" -> "104.131.0.71"[label="0.00", style=dashed];
+"104.131.131.1" -> "104.131.0.42"[label="140.11", style=solid];
+"104.131.0.42"[shape=box];
+"104.131.131.1" -> "104.131.0.55"[label="9.62", style=solid];
+"104.131.131.1" -> "104.131.1.2"[label="0.00", style=solid];
+"104.131.1.2"[shape=box];
+"104.131.131.1" -> "104.131.0.3"[label="1.78", style=solid];
+"104.131.0.3"[shape=box];
+"104.131.131.1" -> "104.131.83.77"[label="38.81", style=solid];
+"104.131.83.77"[shape=box];
+"104.131.131.1" -> "104.131.0.147"[label="0.00", style=dashed];
+"104.192.0.40" -> "104.192.192.166"[label="2.06"];
+"104.129.0.107" -> "104.129.0.77"[label="1.52"];
+"104.129.0.107" -> "104.129.81.1"[label="1.67"];
+"104.129.0.107" -> "104.129.1.43"[label="1.42"];
+"104.129.0.107" -> "104.129.1.44"[label="1.04"];
+"104.65.0.42" -> "104.0.7.254"[label="4.03"];
+"104.65.0.42" -> "104.0.0.6"[label="6.54"];
+"104.129.0.234" -> "104.129.37.2"[label="2.01"];
+"104.129.108.1" -> "104.129.105.2"[label="1.80"];
+"104.129.108.1" -> "104.129.105.10"[label="1.18"];
+"104.129.108.1" -> "104.129.103.1"[label="1.16"];
+"104.129.108.1" -> "104.129.103.19"[label="1.30"];
+"104.129.108.1" -> "104.129.0.91"[label="1.17"];
+"104.129.108.1" -> "104.129.0.165"[label="4.82"];
+"104.66.0.46" -> "104.66.0.8"[label="1.23"];
+"104.66.0.46" -> "104.66.0.24"[label="1.46"];
+"104.129.0.108" -> "104.129.0.239"[label="1.50"];
+"104.129.0.108" -> "104.129.0.95"[label="1.24"];
+"104.129.0.108" -> "104.129.0.8"[label="1.50"];
+"104.130.1.110" -> "104.130.1.97"[label="36.78"];
+"104.130.1.110" -> "104.130.27.176"[label="5.08"];
+"104.130.1.110" -> "104.130.3.3"[label="17.71"];
+"104.130.1.110" -> "104.130.17.17"[label="1.59"];
+"104.130.1.110" -> "104.130.1.157"[label="1.94"];
+"104.129.0.239" -> "104.129.0.108"[label="1.53"];
+"104.129.0.239" -> "104.129.0.125"[label="0.00"];
+"104.129.0.239" -> "104.129.0.95"[label="1.38"];
+"104.129.0.239" -> "104.129.37.2"[label="2.55"];
+"104.129.0.239" -> "104.129.0.8"[label="1.63"];
+"104.129.0.239" -> "104.129.1.10"[label="53.87"];
+"104.129.0.239" -> "104.129.1.17"[label="0.00"];
+"104.129.0.110" -> "104.129.0.123"[label="0.00"];
+"104.129.0.110" -> "104.129.0.219"[label="0.00"];
+"104.129.0.110" -> "104.129.0.82"[label="7.90"];
+"104.129.0.110" -> "104.129.37.2"[label="27.44"];
+"104.129.0.110" -> "104.129.1.17"[label="110.59"];
+"104.192.0.32" -> "104.192.192.1"[label="40.14"];
+"104.192.0.32" -> "104.192.192.225"[label="2.20"];
+"104.192.0.32" -> "104.192.0.39"[label="3.94"];
+"104.192.0.32" -> "104.192.192.199"[label="4.01"];
+"104.66.0.34" -> "104.66.0.30"[label="7.70"];
+"104.66.0.34" -> "104.66.107.4"[label="3.33"];
+"104.66.0.34" -> "104.66.0.249"[label="1.19"];
+"104.66.0.34" -> "104.66.0.203"[label="1.82"];
+"104.66.0.34" -> "104.66.77.4"[label="14.34"];
+"104.192.192.225" -> "104.192.0.32"[label="3.88"];
+"104.192.192.225" -> "104.192.192.99"[label="1.00"];
+"104.192.192.225" -> "104.192.0.39"[label="10.43"];
+"104.192.192.225" -> "104.130.1.65"[label="37.50"];
+"104.192.192.225" -> "104.192.192.66"[label="1.00"];
+"104.192.192.225" -> "104.192.192.199"[label="1.00"];
+"104.192.192.225" -> "104.198.65.81"[label="3.28"];
+"104.192.192.225" -> "104.192.192.33"[label="1.00"];
+"104.192.192.225" -> "104.192.192.166"[label="1.00"];
+"104.192.192.225" -> "104.192.192.177"[label="1.00"];
+"104.192.192.225" -> "104.192.192.1"[label="1.00"];
+"104.192.192.225" -> "104.130.100.100"[label="0.00"];
+"104.192.192.225" -> "104.192.192.133"[label="1.00"];
+"104.130.1.97" -> "104.130.17.17"[label="0.00"];
+"104.130.1.97" -> "104.130.1.110"[label="17.82"];
+"104.130.1.97" -> "104.130.27.176"[label="106.60"];
+"104.130.1.97" -> "104.130.3.3"[label="0.00"];
+"104.130.1.97" -> "104.130.1.157"[label="1.56"];
+"104.192.192.99" -> "104.192.192.225"[label="1.00"];
+"104.192.192.99" -> "104.192.0.52"[label="0.00"];
+"104.192.192.99" -> "104.192.192.66"[label="1.00"];
+"104.192.192.99" -> "104.192.192.199"[label="1.00"];
+"104.192.192.99" -> "104.66.0.30"[label="7.28"];
+"104.192.192.99" -> "104.192.192.33"[label="1.00"];
+"104.192.192.99" -> "104.192.103.3"[label="4.18"];
+"104.192.192.99" -> "104.192.192.166"[label="1.00"];
+"104.192.192.99" -> "104.193.24.100"[label="3.64"];
+"104.192.192.99" -> "104.192.192.177"[label="2.01"];
+"104.192.192.99" -> "104.66.77.4"[label="4.33"];
+"104.192.192.99" -> "104.66.0.201"[label="5.21"];
+"104.192.192.99" -> "104.192.192.1"[label="1.00"];
+"104.192.192.99" -> "104.192.192.133"[label="1.00"];
+"104.0.7.100" -> "104.0.7.254"[label="1.55"];
+"104.198.65.97" -> "104.130.77.5"[label="3.21"];
+"104.198.65.97" -> "104.130.77.1"[label="3.98"];
+"104.198.65.97" -> "104.130.1.66"[label="46.12"];
+"104.198.65.97" -> "104.198.65.65"[label="1.46"];
+"104.198.65.97" -> "104.130.77.78"[label="0.00"];
+"104.192.0.38" -> "104.130.1.65"[label="4.36"];
+"104.192.0.38" -> "104.12.1.6"[label="7.37"];
+"104.130.10.111" -> "104.12.1.6"[label="2.50"];
+"104.130.10.111" -> "104.131.25.14"[label="20.58"];
+"104.192.0.39" -> "104.192.0.32"[label="4.61"];
+"104.192.0.39" -> "104.192.192.225"[label="16.67"];
+"104.66.0.58" -> "104.66.0.49"[label="21.25"];
+"104.0.7.254" -> "104.131.9.1"[label="10.63"];
+"104.0.7.254" -> "104.7.2.1"[label="56.06"];
+"104.0.7.254" -> "104.23.0.2"[label="11.09"];
+"104.0.7.254" -> "104.0.7.100"[label="2.58"];
+"104.0.7.254" -> "104.69.0.69"[label="62.83"];
+"104.0.7.254" -> "104.65.0.42"[label="10.92"];
+"104.129.0.123" -> "104.129.0.110"[label="29.21"];
+"104.129.0.123" -> "104.129.0.77"[label="22.83"];
+"104.129.0.123" -> "104.129.0.161"[label="4.11"];
+"104.129.0.123" -> "104.129.37.2"[label="36.86"];
+"104.129.0.123" -> "104.129.0.8"[label="182.14"];
+"104.129.0.123" -> "104.131.9.1"[label="37.81"];
+"104.129.0.125" -> "104.129.0.239"[label="50.49"];
+"104.129.0.125" -> "104.129.0.219"[label="14.83"];
+"104.129.0.125" -> "104.129.0.95"[label="5.04"];
+"104.129.0.125" -> "104.192.192.166"[label="270.94"];
+"104.129.0.125" -> "104.129.0.8"[label="81.79"];
+"104.129.0.125" -> "104.129.1.10"[label="6.36"];
+"104.129.0.125" -> "104.129.1.11"[label="12.47"];
+"104.129.0.125" -> "104.192.192.133"[label="0.00"];
+"104.131.21.104" -> "104.131.21.101"[label="0.00"];
+"104.131.21.104" -> "104.131.21.21"[label="3.36"];
+"104.131.21.104" -> "104.131.21.1"[label="18.69"];
+"104.202.53.1" -> "104.203.0.1"[label="2.18"];
+"104.202.53.1" -> "104.192.192.66"[label="0.00"];
+"104.202.53.1" -> "104.202.19.1"[label="1.34"];
+"104.202.53.1" -> "104.192.192.33"[label="53.26"];
+"104.202.53.1" -> "104.0.0.6"[label="9.92"];
+"104.131.21.105" -> "104.131.21.21"[label="1.97"];
+"104.131.21.105" -> "104.131.21.1"[label="7.72"];
+"104.131.21.102" -> "104.131.21.101"[label="1.12"];
+"104.131.21.102" -> "104.131.21.34"[label="1.24"];
+"104.131.21.102" -> "104.131.21.21"[label="1.45"];
+"104.131.21.102" -> "104.131.21.12"[label="1.12"];
+"104.66.0.49" -> "104.66.0.58"[label="19.23"];
+"104.66.0.49" -> "104.66.0.203"[label="3.58"];
+"104.66.0.49" -> "104.192.192.133"[label="20.32"];
+"104.131.21.101" -> "104.131.21.104"[label="0.00"];
+"104.131.21.101" -> "104.131.21.102"[label="1.13"];
+"104.131.21.101" -> "104.131.21.34"[label="1.10"];
+"104.131.21.101" -> "104.131.21.21"[label="2.16"];
+"104.131.21.101" -> "104.131.21.12"[label="1.23"];
+"104.131.21.101" -> "104.131.21.1"[label="8.95"];
+"104.192.0.52" -> "104.192.192.99"[label="0.00"];
+"104.192.0.52" -> "104.192.192.66"[label="2.20"];
+"104.192.0.52" -> "104.192.0.20"[label="2.83"];
+"104.192.0.52" -> "104.192.192.33"[label="6.75"];
+"104.192.0.52" -> "104.193.24.100"[label="57.95"];
+"104.192.0.52" -> "104.192.0.75"[label="1.32"];
+"104.131.0.245" -> "104.131.25.12"[label="1.10"];
+"104.0.200.1" -> "104.12.0.225"[label="1.45"];
+"104.0.200.1" -> "104.13.1.97"[label="2.80"];
+"104.0.200.1" -> "104.12.0.105"[label="9.96"];
+"104.0.200.1" -> "104.13.3.241"[label="5.86"];
+"104.0.200.1" -> "104.12.9.89"[label="1.27"];
+"104.0.200.1" -> "104.13.3.33"[label="1.14"];
+"104.0.200.1" -> "104.12.0.183"[label="29.61"];
+"104.0.200.1" -> "104.13.0.50"[label="3.03"];
+"104.0.200.1" -> "104.13.3.57"[label="9.51"];
+"104.0.200.1" -> "104.13.1.2"[label="14.77"];
+"104.0.200.1" -> "104.12.0.8"[label="1.58"];
+"104.0.200.1" -> "104.13.138.1"[label="3.66"];
+"104.0.200.1" -> "104.13.0.17"[label="2.53"];
+"104.0.200.1" -> "104.13.0.155"[label="33.29"];
+"104.72.0.1" -> "104.202.19.1"[label="10.04"];
+"104.131.0.74" -> "104.131.25.14"[label="2.56"];
+"104.200.0.1" -> "104.200.0.10"[label="1.00"];
+"104.192.103.109" -> "104.192.103.200"[label="35.65"];
+"104.192.103.109" -> "104.192.99.103"[label="1.36"];
+"104.192.103.109" -> "104.192.103.44"[label="3.73"];
+"104.192.103.109" -> "104.192.192.133"[label="52.44"];
+"104.203.0.1" -> "104.202.53.1"[label="2.09"];
+"104.203.0.1" -> "104.202.19.1"[label="1.43"];
+"104.130.77.5" -> "104.198.65.97"[label="4.47"];
+"104.130.77.5" -> "104.130.77.1"[label="2.06"];
+"104.130.77.5" -> "104.130.1.66"[label="23.06"];
+"104.130.77.5" -> "104.130.77.79"[label="1.00"];
+"104.130.77.5" -> "104.130.77.78"[label="1.00"];
+"104.130.77.5" -> "104.130.77.77"[label="1.00"];
+"104.201.0.3" -> "104.201.0.4"[label="1.47"];
+"104.201.0.3" -> "104.0.0.6"[label="2.88"];
+"104.130.1.73" -> "104.130.1.67"[label="3.85"];
+"104.130.1.73" -> "104.65.5.3"[label="216.75"];
+"104.130.1.73" -> "104.131.34.1"[label="3.16"];
+"104.130.1.73" -> "104.129.31.3"[label="4.78"];
+"104.66.0.8" -> "104.66.0.46"[label="1.27"];
+"104.66.0.8" -> "104.66.0.24"[label="1.37"];
+"104.129.46.100" -> "104.129.0.77"[label="2.80"];
+"104.129.46.100" -> "104.129.81.1"[label="1.54"];
+"104.129.46.100" -> "104.129.18.1"[label="2.72"];
+"104.12.0.192" -> "104.12.0.43"[label="106.60"];
+"104.12.0.192" -> "104.12.0.136"[label="1.71"];
+"104.129.0.77" -> "104.129.0.107"[label="1.93"];
+"104.129.0.77" -> "104.129.0.123"[label="38.89"];
+"104.129.0.77" -> "104.129.46.100"[label="2.80"];
+"104.129.0.77" -> "104.129.81.1"[label="1.37"];
+"104.129.0.77" -> "104.129.1.43"[label="2.07"];
+"104.129.0.77" -> "104.129.1.44"[label="8.08"];
+"104.0.4.200" -> "104.0.4.65"[label="22.31"];
+"104.0.4.200" -> "104.0.4.161"[label="18.07"];
+"104.0.4.200" -> "104.0.0.17"[label="1.01"];
+"104.201.0.4" -> "104.201.0.3"[label="1.45"];
+"104.198.65.73" -> "104.198.65.81"[label="1.27"];
+"104.130.77.1" -> "104.198.65.97"[label="5.22"];
+"104.130.77.1" -> "104.130.77.5"[label="1.61"];
+"104.130.77.1" -> "104.130.77.79"[label="1.40"];
+"104.130.77.1" -> "104.130.77.77"[label="2.06"];
+"104.65.5.4" -> "104.65.5.3"[label="2.65"];
+"104.65.5.4" -> "104.192.192.199"[label="5.45"];
+"104.65.5.4" -> "104.192.192.166"[label="0.00"];
+"104.130.1.67" -> "104.130.1.73"[label="3.15"];
+"104.130.1.67" -> "104.130.1.66"[label="1.00"];
+"104.130.1.67" -> "104.130.1.65"[label="1.00"];
+"104.130.1.67" -> "104.0.4.65"[label="1.00"];
+"104.130.1.67" -> "104.131.34.1"[label="2.87"];
+"104.130.1.67" -> "104.131.9.2"[label="6.89"];
+"104.130.1.67" -> "104.131.9.1"[label="38.64"];
+"104.130.1.67" -> "104.131.10.2"[label="7.16"];
+"104.130.1.67" -> "104.12.1.6"[label="56.30"];
+"104.130.1.67" -> "104.131.9.6"[label="0.00"];
+"104.130.1.67" -> "104.130.1.131"[label="5.37"];
+"104.130.1.67" -> "104.130.1.6"[label="9.11"];
+"104.130.1.67" -> "104.130.1.154"[label="0.00"];
+"104.130.1.67" -> "104.129.1.28"[label="10.43"];
+"104.130.1.67" -> "104.131.83.77"[label="34.30"];
+"104.130.1.67" -> "104.129.31.3"[label="10.21"];
+"104.130.1.67" -> "104.130.30.1"[label="3.85"];
+"104.130.1.67" -> "104.130.30.3"[label="29.03"];
+"104.130.1.67" -> "104.130.1.16"[label="2.55"];
+"104.130.1.67" -> "104.130.30.9"[label="7.36"];
+"104.192.2.2" -> "104.192.103.3"[label="1.13"];
+"104.193.1.1" -> "104.0.3.81"[label="1.00"];
+"104.130.1.66" -> "104.192.192.225"[label="0.00"];
+"104.130.1.66" -> "104.198.65.97"[label="46.92"];
+"104.130.1.66" -> "104.130.77.5"[label="14.45"];
+"104.130.1.66" -> "104.130.1.67"[label="1.00"];
+"104.130.1.66" -> "104.130.1.65"[label="1.00"];
+"104.130.1.66" -> "104.0.4.65"[label="1.00"];
+"104.130.1.66" -> "104.198.23.1"[label="92.63"];
+"104.130.1.66" -> "104.130.1.45"[label="3.68"];
+"104.130.1.66" -> "104.130.1.162"[label="2.84"];
+"104.130.1.66" -> "104.130.77.79"[label="6.45"];
+"104.130.1.66" -> "104.130.77.77"[label="3.46"];
+"104.130.1.66" -> "104.130.100.100"[label="8.24"];
+"104.130.1.66" -> "104.130.1.6"[label="1.84"];
+"104.130.1.66" -> "104.135.0.1"[label="68.30"];
+"104.130.1.66" -> "104.130.1.154"[label="1.00"];
+"104.130.1.66" -> "104.130.30.1"[label="0.00"];
+"104.200.0.10" -> "104.200.0.1"[label="1.00"];
+"104.200.0.10" -> "104.192.192.33"[label="3.27"];
+"104.192.192.66" -> "104.192.192.225"[label="1.00"];
+"104.192.192.66" -> "104.192.192.99"[label="1.00"];
+"104.192.192.66" -> "104.202.53.1"[label="23.69"];
+"104.192.192.66" -> "104.192.0.52"[label="2.18"];
+"104.192.192.66" -> "104.193.0.2"[label="1.81"];
+"104.192.192.66" -> "104.192.192.199"[label="1.00"];
+"104.192.192.66" -> "104.192.0.20"[label="1.44"];
+"104.192.192.66" -> "104.192.192.33"[label="1.00"];
+"104.192.192.66" -> "104.192.192.166"[label="1.00"];
+"104.192.192.66" -> "104.193.24.100"[label="1.67"];
+"104.192.192.66" -> "104.192.192.177"[label="2.01"];
+"104.192.192.66" -> "104.192.192.1"[label="1.00"];
+"104.192.192.66" -> "104.192.192.133"[label="1.00"];
+"104.130.1.65" -> "104.192.192.225"[label="0.00"];
+"104.130.1.65" -> "104.192.0.38"[label="4.60"];
+"104.130.1.65" -> "104.130.1.67"[label="1.00"];
+"104.130.1.65" -> "104.130.1.66"[label="1.00"];
+"104.130.1.65" -> "104.0.4.65"[label="1.00"];
+"104.130.1.65" -> "104.65.5.3"[label="19.52"];
+"104.130.1.65" -> "104.192.192.199"[label="10.83"];
+"104.130.1.65" -> "104.131.34.1"[label="371.57"];
+"104.130.1.65" -> "104.130.77.77"[label="28.33"];
+"104.130.1.65" -> "104.130.1.154"[label="1.00"];
+"104.130.1.65" -> "104.130.30.1"[label="0.00"];
+"104.131.0.192" -> "104.131.25.16"[label="1.95"];
+"104.193.0.2" -> "104.192.192.66"[label="1.71"];
+"104.13.0.73" -> "104.13.0.97"[label="3.81"];
+"104.13.0.73" -> "104.13.0.71"[label="2.04"];
+"104.13.0.73" -> "104.13.0.74"[label="1.36"];
+"104.13.0.73" -> "104.13.0.38"[label="2.13"];
+"104.13.0.73" -> "104.13.3.33"[label="1.00"];
+"104.7.2.193" -> "104.7.2.65"[label="1.33"];
+"104.7.2.65" -> "104.7.2.193"[label="1.11"];
+"104.7.2.65" -> "104.7.2.1"[label="2.37"];
+"104.131.0.71" -> "104.131.1.2"[label="8.56"];
+"104.0.4.65" -> "104.0.4.200"[label="21.96"];
+"104.0.4.65" -> "104.130.1.67"[label="1.00"];
+"104.0.4.65" -> "104.130.1.66"[label="1.00"];
+"104.0.4.65" -> "104.130.1.65"[label="1.00"];
+"104.0.4.65" -> "104.0.4.161"[label="28.26"];
+"104.0.4.65" -> "104.130.1.154"[label="1.00"];
+"104.0.4.65" -> "104.0.0.17"[label="2.58"];
+"104.198.65.65" -> "104.198.65.97"[label="1.46"];
+"104.192.192.199" -> "104.192.0.32"[label="18.96"];
+"104.192.192.199" -> "104.192.192.225"[label="1.00"];
+"104.192.192.199" -> "104.192.192.99"[label="1.00"];
+"104.192.192.199" -> "104.65.5.4"[label="5.19"];
+"104.192.192.199" -> "104.130.1.65"[label="19.79"];
+"104.192.192.199" -> "104.192.192.66"[label="1.00"];
+"104.192.192.199" -> "104.131.34.1"[label="13.05"];
+"104.192.192.199" -> "104.192.192.33"[label="1.00"];
+"104.192.192.199" -> "104.192.192.166"[label="1.00"];
+"104.192.192.199" -> "104.192.192.177"[label="1.00"];
+"104.192.192.199" -> "104.192.192.1"[label="1.00"];
+"104.192.192.199" -> "104.192.192.133"[label="1.00"];
+"104.192.192.199" -> "104.135.0.1"[label="21.38"];
+"104.129.1.71" -> "104.129.37.2"[label="8.49"];
+"104.129.1.71" -> "104.129.1.18"[label="1.57"];
+"104.65.5.3" -> "104.130.1.73"[label="86.70"];
+"104.65.5.3" -> "104.65.5.4"[label="2.45"];
+"104.65.5.3" -> "104.130.1.65"[label="18.21"];
+"104.65.5.3" -> "104.12.1.6"[label="17.18"];
+"104.202.19.1" -> "104.202.53.1"[label="1.34"];
+"104.202.19.1" -> "104.202.0.2"[label="3.58"];
+"104.202.19.1" -> "104.72.0.1"[label="8.62"];
+"104.202.19.1" -> "104.203.0.1"[label="1.76"];
+"104.198.65.94" -> "104.198.65.81"[label="1.00"];
+"104.129.0.219" -> "104.129.0.125"[label="73.72"];
+"104.129.0.219" -> "104.129.0.110"[label="1.40"];
+"104.129.0.219" -> "104.129.0.82"[label="4.52"];
+"104.66.0.24" -> "104.66.0.46"[label="1.44"];
+"104.66.0.24" -> "104.66.0.8"[label="1.36"];
+"104.66.0.24" -> "104.130.1.154"[label="1.34"];
+"104.66.0.30" -> "104.66.0.34"[label="8.03"];
+"104.66.0.30" -> "104.192.192.99"[label="7.52"];
+"104.66.0.30" -> "104.66.107.4"[label="2.34"];
+"104.66.0.30" -> "104.192.103.3"[label="1.52"];
+"104.66.0.30" -> "104.192.192.166"[label="0.00"];
+"104.66.0.30" -> "104.66.0.203"[label="0.00"];
+"104.66.0.30" -> "104.66.77.4"[label="1.66"];
+"104.66.0.30" -> "104.192.192.133"[label="3.76"];
+"104.129.0.95" -> "104.129.0.108"[label="1.20"];
+"104.129.0.95" -> "104.129.0.239"[label="1.42"];
+"104.129.0.95" -> "104.129.0.125"[label="5.86"];
+"104.129.0.95" -> "104.129.0.8"[label="1.86"];
+"104.129.0.95" -> "104.129.1.10"[label="43.01"];
+"104.66.0.18" -> "104.66.24.111"[label="4.11"];
+"104.198.23.1" -> "104.130.1.66"[label="69.47"];
+"104.129.81.1" -> "104.129.0.107"[label="2.38"];
+"104.129.81.1" -> "104.129.103.1"[label="8.87"];
+"104.129.81.1" -> "104.129.46.100"[label="1.65"];
+"104.129.81.1" -> "104.129.0.77"[label="1.40"];
+"104.129.81.1" -> "104.129.1.43"[label="2.02"];
+"104.129.81.1" -> "104.129.1.44"[label="2.19"];
+"104.129.81.1" -> "104.129.0.138"[label="26.27"];
+"104.0.3.81" -> "104.193.1.1"[label="1.00"];
+"104.0.3.81" -> "104.0.3.13"[label="28.00"];
+"104.0.3.81" -> "104.0.0.5"[label="14.14"];
+"104.192.0.20" -> "104.192.0.52"[label="3.05"];
+"104.192.0.20" -> "104.192.192.66"[label="1.44"];
+"104.192.0.20" -> "104.192.192.33"[label="1.57"];
+"104.192.0.20" -> "104.192.192.1"[label="5.49"];
+"104.12.0.89" -> "104.12.0.73"[label="2.00"];
+"104.12.0.89" -> "104.13.3.33"[label="0.00"];
+"104.12.0.89" -> "104.13.0.189"[label="0.00"];
+"104.198.65.81" -> "104.192.192.225"[label="3.28"];
+"104.198.65.81" -> "104.198.65.73"[label="1.21"];
+"104.198.65.81" -> "104.198.65.94"[label="1.00"];
+"104.198.65.81" -> "104.192.192.1"[label="3.41"];
+"104.130.27.176" -> "104.130.1.110"[label="5.05"];
+"104.130.27.176" -> "104.130.1.97"[label="0.00"];
+"104.130.27.176" -> "104.130.17.17"[label="42.03"];
+"104.130.27.176" -> "104.130.3.3"[label="106.25"];
+"104.130.27.176" -> "104.130.1.157"[label="30.79"];
+"104.130.27.176" -> "104.130.1.10"[label="0.00"];
+"104.129.44.7" -> "104.131.0.147"[label="6.88"];
+"104.129.44.7" -> "104.131.0.148"[label="4.10"];
+"104.129.1.43" -> "104.129.0.107"[label="1.40"];
+"104.129.1.43" -> "104.129.46.100"[label="46.45"];
+"104.129.1.43" -> "104.129.0.77"[label="1.92"];
+"104.129.1.43" -> "104.129.81.1"[label="2.08"];
+"104.129.1.43" -> "104.129.1.44"[label="1.21"];
+"104.129.1.43" -> "104.129.6.1"[label="2.23"];
+"104.161.0.10" -> "104.161.0.1"[label="1.70"];
+"104.129.1.44" -> "104.129.0.107"[label="1.04"];
+"104.129.1.44" -> "104.129.81.1"[label="2.19"];
+"104.129.1.44" -> "104.129.1.43"[label="1.37"];
+"104.66.107.4" -> "104.66.0.34"[label="6.90"];
+"104.66.107.4" -> "104.66.0.30"[label="4.26"];
+"104.66.107.4" -> "104.66.0.203"[label="1.97"];
+"104.66.107.4" -> "104.66.77.4"[label="1.00"];
+"104.66.107.4" -> "104.66.0.201"[label="10.74"];
+"104.130.1.45" -> "104.130.1.66"[label="4.04"];
+"104.129.0.161" -> "104.129.0.123"[label="2.03"];
+"104.161.0.1" -> "104.161.0.10"[label="1.72"];
+"104.161.0.1" -> "104.161.0.2"[label="2.30"];
+"104.161.0.1" -> "104.0.4.161"[label="1.00"];
+"104.131.34.1" -> "104.130.1.73"[label="3.28"];
+"104.131.34.1" -> "104.130.1.67"[label="2.84"];
+"104.131.34.1" -> "104.130.1.65"[label="0.00"];
+"104.131.34.1" -> "104.192.192.199"[label="25.01"];
+"104.131.34.1" -> "104.192.192.166"[label="591.14"];
+"104.131.34.1" -> "104.131.21.34"[label="49.26"];
+"104.131.34.1" -> "104.131.9.6"[label="9.11"];
+"104.131.34.1" -> "104.130.1.131"[label="1.79"];
+"104.131.34.1" -> "104.131.21.21"[label="11.73"];
+"104.131.34.1" -> "104.130.17.20"[label="19.32"];
+"104.131.34.1" -> "104.130.1.16"[label="21.85"];
+"104.130.1.162" -> "104.130.1.66"[label="3.10"];
+"104.192.192.33" -> "104.192.192.225"[label="1.00"];
+"104.192.192.33" -> "104.192.192.99"[label="1.00"];
+"104.192.192.33" -> "104.202.53.1"[label="54.73"];
+"104.192.192.33" -> "104.192.0.52"[label="6.75"];
+"104.192.192.33" -> "104.200.0.10"[label="2.20"];
+"104.192.192.33" -> "104.192.192.66"[label="1.00"];
+"104.192.192.33" -> "104.192.192.199"[label="1.00"];
+"104.192.192.33" -> "104.192.0.20"[label="1.54"];
+"104.192.192.33" -> "104.192.192.166"[label="1.00"];
+"104.192.192.33" -> "104.193.24.100"[label="4.40"];
+"104.192.192.33" -> "104.192.192.177"[label="1.00"];
+"104.192.192.33" -> "104.192.192.1"[label="1.00"];
+"104.192.192.33" -> "104.192.192.133"[label="1.00"];
+"104.161.0.2" -> "104.161.0.1"[label="2.37"];
+"104.129.0.165" -> "104.129.105.2"[label="1.63"];
+"104.129.0.165" -> "104.129.108.1"[label="5.73"];
+"104.129.0.165" -> "104.129.105.10"[label="1.40"];
+"104.129.0.165" -> "104.129.103.1"[label="1.08"];
+"104.129.0.165" -> "104.129.103.19"[label="1.44"];
+"104.129.0.165" -> "104.129.0.91"[label="1.21"];
+"104.192.103.3" -> "104.192.192.99"[label="4.57"];
+"104.192.103.3" -> "104.192.2.2"[label="1.13"];
+"104.192.103.3" -> "104.66.0.30"[label="1.50"];
+"104.192.103.3" -> "104.66.0.203"[label="0.00"];
+"104.192.103.3" -> "104.66.0.201"[label="1.24"];
+"104.192.103.3" -> "104.66.77.4"[label="1.44"];
+"104.192.103.3" -> "104.192.192.133"[label="2.93"];
+"104.0.4.161" -> "104.0.4.200"[label="18.38"];
+"104.0.4.161" -> "104.0.4.65"[label="44.08"];
+"104.0.4.161" -> "104.161.0.1"[label="1.00"];
+"104.0.4.161" -> "104.0.0.17"[label="1.13"];
+"104.129.37.2" -> "104.129.0.234"[label="2.06"];
+"104.129.37.2" -> "104.129.0.239"[label="2.55"];
+"104.129.37.2" -> "104.129.0.110"[label="15.47"];
+"104.129.37.2" -> "104.129.0.123"[label="26.65"];
+"104.129.37.2" -> "104.129.1.71"[label="8.60"];
+"104.129.37.2" -> "104.129.0.8"[label="16.84"];
+"104.129.37.2" -> "104.129.1.10"[label="19.92"];
+"104.129.37.2" -> "104.129.0.138"[label="0.00"];
+"104.129.37.2" -> "104.129.1.1"[label="3.27"];
+"104.129.37.2" -> "104.129.1.17"[label="3.69"];
+"104.129.37.2" -> "104.129.1.18"[label="22.21"];
+"104.192.192.166" -> "104.192.192.66"[label="1.00"];
+"104.192.192.166" -> "104.192.192.199"[label="1.00"];
+"104.192.192.166" -> "104.66.0.30"[label="0.00"];
+"104.192.192.166" -> "104.192.192.33"[label="1.00"];
+"104.192.192.166" -> "104.192.192.177"[label="2.01"];
+"104.192.192.166" -> "104.66.77.4"[label="151.57"];
+"104.192.192.166" -> "104.66.0.201"[label="2.00"];
+"104.192.192.166" -> "104.192.192.1"[label="1.00"];
+"104.192.192.166" -> "104.192.192.133"[label="1.00"];
+"104.129.0.187" -> "104.129.1.28"[label="30.39"];
+"104.131.0.184" -> "104.131.131.3"[label="1.64"];
+"104.66.0.249" -> "104.66.0.34"[label="1.17"];
+"104.66.0.249" -> "104.66.0.23"[label="2.51"];
+"104.66.0.249" -> "104.66.0.203"[label="1.74"];
+"104.66.0.249" -> "104.66.0.201"[label="3.02"];
+"104.12.0.176" -> "104.5.0.222"[label="33.87"];
+"104.12.0.176" -> "104.12.0.1"[label="1.47"];
+"104.12.0.176" -> "104.12.1.11"[label="6.06"];
+"104.12.0.176" -> "104.12.0.19"[label="7.31"];
+"104.12.0.176" -> "104.12.0.30"[label="1.52"];
+"104.193.24.100" -> "104.192.192.99"[label="3.35"];
+"104.193.24.100" -> "104.192.0.52"[label="57.95"];
+"104.193.24.100" -> "104.192.192.66"[label="1.73"];
+"104.193.24.100" -> "104.192.192.33"[label="4.34"];
+"104.193.24.100" -> "104.192.192.1"[label="0.00"];
+"104.192.192.177" -> "104.192.192.225"[label="1.00"];
+"104.192.192.177" -> "104.192.192.99"[label="2.01"];
+"104.192.192.177" -> "104.192.192.66"[label="2.01"];
+"104.192.192.177" -> "104.192.192.199"[label="1.00"];
+"104.192.192.177" -> "104.192.192.33"[label="1.00"];
+"104.192.192.177" -> "104.192.192.166"[label="2.01"];
+"104.192.192.177" -> "104.192.192.178"[label="1.03"];
+"104.192.192.177" -> "104.192.192.1"[label="1.00"];
+"104.192.192.177" -> "104.192.192.133"[label="2.01"];
+"104.192.192.178" -> "104.192.192.177"[label="1.04"];
+"104.192.192.178" -> "104.129.29.29"[label="1.00"];
+"104.131.0.55" -> "104.131.131.1"[label="8.77"];
+"104.131.0.55" -> "104.131.0.3"[label="1.75"];
+"104.131.21.34" -> "104.131.21.102"[label="1.24"];
+"104.131.21.34" -> "104.131.21.101"[label="1.11"];
+"104.131.21.34" -> "104.131.34.1"[label="0.00"];
+"104.131.21.34" -> "104.131.21.21"[label="1.84"];
+"104.131.21.34" -> "104.131.21.12"[label="2.25"];
+"104.131.21.34" -> "104.131.21.1"[label="12.90"];
+"104.66.24.111" -> "104.66.0.18"[label="3.51"];
+"104.66.24.111" -> "104.0.3.13"[label="1.00"];
+"104.130.1.52" -> "104.130.17.17"[label="42.50"];
+"104.131.10.1" -> "104.131.10.2"[label="0.00"];
+"104.131.9.2" -> "104.130.1.67"[label="12.68"];
+"104.131.9.2" -> "104.130.1.65"[label="136.61"];
+"104.131.9.2" -> "104.129.0.138"[label="0.00"];
+"104.131.9.2" -> "104.131.9.1"[label="1.00"];
+"104.131.9.2" -> "104.131.9.6"[label="12.39"];
+"104.131.9.2" -> "104.131.9.4"[label="1.00"];
+"104.131.9.2" -> "104.131.9.5"[label="30.10"];
+"104.131.9.2" -> "104.131.0.147"[label="30.53"];
+"104.131.9.2" -> "104.131.0.148"[label="26.22"];
+"104.131.9.2" -> "104.131.21.1"[label="11.87"];
+"104.129.0.8" -> "104.129.0.108"[label="1.65"];
+"104.129.0.8" -> "104.129.0.239"[label="2.31"];
+"104.129.0.8" -> "104.129.0.123"[label="38.16"];
+"104.129.0.8" -> "104.129.0.125"[label="216.03"];
+"104.129.0.8" -> "104.129.0.95"[label="2.15"];
+"104.129.0.8" -> "104.129.37.2"[label="19.35"];
+"104.129.0.8" -> "104.129.1.17"[label="37.81"];
+"104.129.0.8" -> "104.129.1.10"[label="0.00"];
+"104.66.0.203" -> "104.66.0.34"[label="1.88"];
+"104.66.0.203" -> "104.66.0.49"[label="3.41"];
+"104.66.0.203" -> "104.66.0.30"[label="1.81"];
+"104.66.0.203" -> "104.66.107.4"[label="1.54"];
+"104.66.0.203" -> "104.192.103.3"[label="24.86"];
+"104.66.0.203" -> "104.66.0.249"[label="1.67"];
+"104.66.0.203" -> "104.66.0.201"[label="1.00"];
+"104.66.0.203" -> "104.66.77.4"[label="1.67"];
+"104.66.0.203" -> "104.66.68.16"[label="5.82"];
+"104.130.1.10" -> "104.130.1.14"[label="1.00"];
+"104.130.1.10" -> "104.136.12.5"[label="3.05"];
+"104.130.1.10" -> "104.130.3.3"[label="10.90"];
+"104.130.1.10" -> "104.130.17.17"[label="3.71"];
+"104.130.1.10" -> "104.130.1.16"[label="1.04"];
+"104.129.1.10" -> "104.129.0.239"[label="49.26"];
+"104.129.1.10" -> "104.129.0.125"[label="5.45"];
+"104.129.1.10" -> "104.129.0.95"[label="33.18"];
+"104.129.1.10" -> "104.129.37.2"[label="20.53"];
+"104.129.1.10" -> "104.129.0.8"[label="45.89"];
+"104.129.1.10" -> "104.129.1.17"[label="0.00"];
+"104.131.25.16" -> "104.131.0.192"[label="2.09"];
+"104.131.25.16" -> "104.130.1.14"[label="2.63"];
+"104.131.25.16" -> "104.131.25.14"[label="1.00"];
+"104.131.25.16" -> "104.131.25.12"[label="1.00"];
+"104.192.103.44" -> "104.192.103.200"[label="1.46"];
+"104.192.103.44" -> "104.192.103.109"[label="6.27"];
+"104.192.103.44" -> "104.192.99.103"[label="1.68"];
+"104.129.0.138" -> "104.129.0.77"[label="24.86"];
+"104.129.0.138" -> "104.129.81.1"[label="18.21"];
+"104.129.0.138" -> "104.130.1.10"[label="0.00"];
+"104.129.0.138" -> "104.131.21.1"[label="0.00"];
+"104.137.0.2" -> "104.12.1.6"[label="1.47"];
+"104.12.1.6" -> "104.192.0.38"[label="21.35"];
+"104.12.1.6" -> "104.130.10.111"[label="2.44"];
+"104.12.1.6" -> "104.130.1.67"[label="58.06"];
+"104.12.1.6" -> "104.137.0.2"[label="1.52"];
+"104.12.1.6" -> "104.6.0.6"[label="14.93"];
+"104.12.1.6" -> "104.130.1.131"[label="4.63"];
+"104.192.0.75" -> "104.192.0.52"[label="1.27"];
+"104.192.0.75" -> "104.192.192.33"[label="30.39"];
+"104.131.9.1" -> "104.0.7.254"[label="10.20"];
+"104.131.9.1" -> "104.129.0.123"[label="61.06"];
+"104.131.9.1" -> "104.130.1.67"[label="61.34"];
+"104.131.9.1" -> "104.131.9.2"[label="1.00"];
+"104.131.9.1" -> "104.129.0.138"[label="10.90"];
+"104.131.9.1" -> "104.131.9.4"[label="1.00"];
+"104.131.9.1" -> "104.131.9.5"[label="2.05"];
+"104.131.9.1" -> "104.131.0.147"[label="10.95"];
+"104.131.9.1" -> "104.131.21.1"[label="2.63"];
+"104.66.0.201" -> "104.192.192.99"[label="4.67"];
+"104.66.0.201" -> "104.66.107.4"[label="4.12"];
+"104.66.0.201" -> "104.192.103.3"[label="1.26"];
+"104.66.0.201" -> "104.192.192.166"[label="2.12"];
+"104.66.0.201" -> "104.66.0.249"[label="3.51"];
+"104.66.0.201" -> "104.66.0.203"[label="1.00"];
+"104.66.0.201" -> "104.66.77.4"[label="2.28"];
+"104.66.0.201" -> "104.192.192.133"[label="1.96"];
+"104.66.77.4" -> "104.66.0.34"[label="16.13"];
+"104.66.77.4" -> "104.192.192.99"[label="3.63"];
+"104.66.77.4" -> "104.66.0.30"[label="1.60"];
+"104.66.77.4" -> "104.66.107.4"[label="1.00"];
+"104.66.77.4" -> "104.192.103.3"[label="1.43"];
+"104.66.77.4" -> "104.192.192.166"[label="250.10"];
+"104.66.77.4" -> "104.66.0.203"[label="0.00"];
+"104.66.77.4" -> "104.66.0.201"[label="2.32"];
+"104.66.77.4" -> "104.192.192.133"[label="3.31"];
+"104.66.77.4" -> "104.66.68.16"[label="4.61"];
+"104.131.10.2" -> "104.130.1.67"[label="13.72"];
+"104.131.10.2" -> "104.131.10.1"[label="1.39"];
+"104.131.10.2" -> "104.131.83.77"[label="1.00"];
+"104.131.9.6" -> "104.130.1.67"[label="8.46"];
+"104.131.9.6" -> "104.131.34.1"[label="15.56"];
+"104.131.9.6" -> "104.131.9.2"[label="12.39"];
+"104.131.9.6" -> "104.131.0.147"[label="1.86"];
+"104.131.9.6" -> "104.131.21.1"[label="31.64"];
+"104.131.9.6" -> "104.131.0.148"[label="216.75"];
+"104.136.12.9" -> "104.136.22.22"[label="1.16"];
+"104.136.12.9" -> "104.136.12.7"[label="1.00"];
+"104.136.12.9" -> "104.136.12.30"[label="1.00"];
+"104.130.1.14" -> "104.130.1.10"[label="1.00"];
+"104.130.1.14" -> "104.131.25.16"[label="3.12"];
+"104.130.1.14" -> "104.130.1.16"[label="1.04"];
+"104.0.3.13" -> "104.0.3.81"[label="36.95"];
+"104.0.3.13" -> "104.66.24.111"[label="1.00"];
+"104.0.3.13" -> "104.0.0.5"[label="1.47"];
+"104.131.9.4" -> "104.131.9.2"[label="1.00"];
+"104.131.9.4" -> "104.131.9.1"[label="1.00"];
+"104.131.9.4" -> "104.131.9.5"[label="13.08"];
+"104.131.9.5" -> "104.131.9.2"[label="33.18"];
+"104.131.9.5" -> "104.131.9.1"[label="2.21"];
+"104.131.9.5" -> "104.131.9.4"[label="8.96"];
+"104.136.0.7" -> "104.136.22.22"[label="1.11"];
+"104.6.0.6" -> "104.12.1.6"[label="18.75"];
+"104.6.0.6" -> "104.6.0.11"[label="4.31"];
+"104.6.0.6" -> "104.8.0.24"[label="20.37"];
+"104.69.0.69" -> "104.0.7.254"[label="21.32"];
+"104.131.0.3" -> "104.131.131.1"[label="1.78"];
+"104.131.0.3" -> "104.131.131.3"[label="2.32"];
+"104.131.0.3" -> "104.131.0.55"[label="1.82"];
+"104.130.77.79" -> "104.130.77.5"[label="1.00"];
+"104.130.77.79" -> "104.130.77.1"[label="1.43"];
+"104.130.77.79" -> "104.130.1.66"[label="5.45"];
+"104.130.77.79" -> "104.130.77.232"[label="2.83"];
+"104.130.77.79" -> "104.130.77.78"[label="1.00"];
+"104.130.77.79" -> "104.130.77.77"[label="1.00"];
+"104.131.1.2" -> "104.131.131.1"[label="0.00"];
+"104.131.1.2" -> "104.131.131.3"[label="24.10"];
+"104.131.1.2" -> "104.131.83.77"[label="77.41"];
+"104.130.1.131" -> "104.130.1.67"[label="4.76"];
+"104.130.1.131" -> "104.131.34.1"[label="2.15"];
+"104.130.1.131" -> "104.12.1.6"[label="3.72"];
+"104.130.1.131" -> "104.130.1.16"[label="0.00"];
+"104.129.1.1" -> "104.129.37.2"[label="3.57"];
+"104.129.1.1" -> "104.0.0.30"[label="1.00"];
+"104.129.1.1" -> "104.129.1.17"[label="3.61"];
+"104.129.1.1" -> "104.0.0.17"[label="1.00"];
+"104.130.77.78" -> "104.130.77.79"[label="1.00"];
+"104.130.77.78" -> "104.130.77.77"[label="1.00"];
+"104.130.77.78" -> "104.130.77.5"[label="1.00"];
+"104.192.192.1" -> "104.192.0.32"[label="197.05"];
+"104.192.192.1" -> "104.192.192.225"[label="1.00"];
+"104.192.192.1" -> "104.192.192.99"[label="1.00"];
+"104.192.192.1" -> "104.192.192.66"[label="1.00"];
+"104.192.192.1" -> "104.192.192.199"[label="1.00"];
+"104.192.192.1" -> "104.192.0.20"[label="4.79"];
+"104.192.192.1" -> "104.198.65.81"[label="3.16"];
+"104.192.192.1" -> "104.192.192.33"[label="1.00"];
+"104.192.192.1" -> "104.192.192.166"[label="1.00"];
+"104.192.192.1" -> "104.192.192.177"[label="1.00"];
+"104.192.192.1" -> "104.192.192.133"[label="1.00"];
+"104.129.29.29" -> "104.192.192.178"[label="1.00"];
+"104.136.12.5" -> "104.130.1.10"[label="1.43"];
+"104.136.12.5" -> "104.130.3.3"[label="2167.50"];
+"104.136.12.5" -> "104.130.5.5"[label="1.17"];
+"104.136.12.5" -> "104.130.17.17"[label="7.52"];
+"104.130.17.17" -> "104.130.1.110"[label="6.33"];
+"104.130.17.17" -> "104.130.1.97"[label="0.00"];
+"104.130.17.17" -> "104.130.27.176"[label="26.75"];
+"104.130.17.17" -> "104.130.1.52"[label="25.50"];
+"104.130.17.17" -> "104.130.1.10"[label="4.59"];
+"104.130.17.17" -> "104.136.12.5"[label="6.47"];
+"104.130.17.17" -> "104.130.3.3"[label="7.71"];
+"104.130.17.17" -> "104.130.1.157"[label="17.71"];
+"104.130.17.17" -> "104.130.1.16"[label="580.58"];
+"104.130.3.3" -> "104.130.1.110"[label="17.71"];
+"104.130.3.3" -> "104.130.1.97"[label="0.00"];
+"104.130.3.3" -> "104.130.27.176"[label="102.24"];
+"104.130.3.3" -> "104.130.1.10"[label="12.55"];
+"104.130.3.3" -> "104.136.12.5"[label="1625.63"];
+"104.130.3.3" -> "104.130.17.17"[label="8.91"];
+"104.130.3.3" -> "104.130.1.157"[label="0.00"];
+"104.131.131.2" -> "104.131.131.3"[label="1.55"];
+"104.130.77.77" -> "104.130.77.232"[label="5.06"];
+"104.130.77.77" -> "104.130.1.73"[label="35.53"];
+"104.130.77.77" -> "104.130.77.5"[label="1.00"];
+"104.130.77.77" -> "104.130.77.1"[label="2.87"];
+"104.130.77.77" -> "104.130.1.67"[label="0.00"];
+"104.130.77.77" -> "104.130.1.66"[label="3.63"];
+"104.130.77.77" -> "104.130.1.65"[label="12.05"];
+"104.130.77.77" -> "104.130.77.79"[label="1.00"];
+"104.130.77.77" -> "104.130.77.78"[label="1.00"];
+"104.130.100.100" -> "104.192.192.225"[label="0.00"];
+"104.130.100.100" -> "104.130.1.66"[label="13.58"];
+"104.130.5.5" -> "104.136.12.5"[label="1.25"];
+"104.132.22.17" -> "104.132.24.12"[label="1.13"];
+"104.131.13.13" -> "104.131.21.1"[label="16.13"];
+"104.136.12.7" -> "104.136.12.9"[label="1.00"];
+"104.136.12.7" -> "104.136.12.30"[label="1.00"];
+"104.136.12.7" -> "104.131.25.12"[label="1.51"];
+"104.131.131.3" -> "104.131.0.42"[label="3.76"];
+"104.131.131.3" -> "104.131.0.184"[label="1.64"];
+"104.131.131.3" -> "104.131.1.2"[label="14.57"];
+"104.131.131.3" -> "104.131.0.3"[label="2.27"];
+"104.131.131.3" -> "104.131.131.2"[label="1.61"];
+"104.131.131.3" -> "104.131.83.77"[label="5.30"];
+"104.131.131.3" -> "104.131.0.146"[label="28.98"];
+"104.131.21.21" -> "104.131.21.104"[label="3.27"];
+"104.131.21.21" -> "104.131.21.105"[label="1.66"];
+"104.131.21.21" -> "104.131.21.102"[label="1.19"];
+"104.131.21.21" -> "104.131.21.101"[label="1.35"];
+"104.131.21.21" -> "104.131.34.1"[label="18.21"];
+"104.131.21.21" -> "104.131.21.34"[label="1.34"];
+"104.131.21.21" -> "104.131.21.12"[label="1.21"];
+"104.131.21.21" -> "104.131.21.1"[label="8.73"];
+"104.7.2.1" -> "104.0.7.254"[label="57.95"];
+"104.7.2.1" -> "104.7.2.65"[label="3.70"];
+"104.130.1.6" -> "104.130.1.67"[label="8.32"];
+"104.130.1.6" -> "104.130.1.66"[label="2.09"];
+"104.0.0.5" -> "104.0.3.81"[label="13.23"];
+"104.0.0.5" -> "104.0.3.13"[label="1.25"];
+"104.0.0.5" -> "104.0.0.6"[label="1.00"];
+"104.0.0.5" -> "104.0.0.17"[label="1.08"];
+"104.192.192.133" -> "104.192.192.225"[label="1.00"];
+"104.192.192.133" -> "104.192.192.99"[label="1.00"];
+"104.192.192.133" -> "104.129.0.125"[label="285.20"];
+"104.192.192.133" -> "104.66.0.49"[label="14.77"];
+"104.192.192.133" -> "104.192.103.109"[label="0.00"];
+"104.192.192.133" -> "104.192.192.66"[label="1.00"];
+"104.192.192.133" -> "104.192.192.199"[label="1.00"];
+"104.192.192.133" -> "104.66.0.30"[label="4.28"];
+"104.192.192.133" -> "104.192.192.33"[label="1.00"];
+"104.192.192.133" -> "104.192.103.3"[label="2.55"];
+"104.192.192.133" -> "104.192.192.166"[label="1.00"];
+"104.192.192.133" -> "104.192.192.177"[label="2.01"];
+"104.192.192.133" -> "104.192.0.74"[label="0.00"];
+"104.192.192.133" -> "104.66.77.4"[label="3.21"];
+"104.192.192.133" -> "104.66.0.201"[label="1.81"];
+"104.192.192.133" -> "104.192.192.1"[label="1.00"];
+"104.192.192.133" -> "104.192.99.160"[label="21.28"];
+"104.10.2.14" -> "104.10.2.34"[label="1.00"];
+"104.10.2.14" -> "104.6.0.11"[label="1.39"];
+"104.10.2.14" -> "104.10.2.24"[label="1.00"];
+"104.135.0.1" -> "104.192.192.225"[label="36.86"];
+"104.135.0.1" -> "104.130.1.66"[label="65.68"];
+"104.129.6.1" -> "104.129.1.43"[label="2.29"];
+"104.0.0.6" -> "104.65.0.42"[label="1.37"];
+"104.0.0.6" -> "104.202.53.1"[label="10.01"];
+"104.0.0.6" -> "104.201.0.3"[label="3.09"];
+"104.0.0.6" -> "104.201.0.4"[label="1.16"];
+"104.0.0.6" -> "104.202.19.1"[label="1.66"];
+"104.0.0.6" -> "104.0.0.5"[label="1.00"];
+"104.132.0.3" -> "104.132.24.7"[label="90.31"];
+"104.132.0.3" -> "104.132.24.3"[label="22.50"];
+"104.130.17.20" -> "104.131.34.1"[label="24.19"];
+"104.130.17.20" -> "104.130.1.16"[label="4.98"];
+"104.12.0.20" -> "104.12.0.200"[label="361.25"];
+"104.12.0.20" -> "104.12.34.6"[label="2.33"];
+"104.12.0.20" -> "104.13.3.33"[label="1.06"];
+"104.12.0.20" -> "104.12.0.46"[label="1.32"];
+"104.12.0.20" -> "104.12.0.43"[label="0.00"];
+"104.12.0.20" -> "104.13.0.50"[label="137.47"];
+"104.132.24.4" -> "104.132.24.7"[label="1.06"];
+"104.132.24.4" -> "104.132.24.1"[label="1.14"];
+"104.132.24.4" -> "104.132.24.2"[label="2.80"];
+"104.132.24.4" -> "104.132.24.3"[label="1.48"];
+"104.132.24.4" -> "104.132.24.8"[label="1.16"];
+"104.132.24.4" -> "104.132.24.9"[label="11.35"];
+"104.132.24.5" -> "104.132.24.1"[label="2.61"];
+"104.132.24.5" -> "104.132.24.2"[label="3.97"];
+"104.132.24.5" -> "104.132.24.3"[label="1.43"];
+"104.132.24.5" -> "104.132.24.9"[label="117.80"];
+"104.130.1.154" -> "104.130.1.67"[label="1.00"];
+"104.130.1.154" -> "104.130.1.66"[label="1.00"];
+"104.130.1.154" -> "104.130.1.65"[label="1.00"];
+"104.130.1.154" -> "104.0.4.65"[label="1.00"];
+"104.130.1.154" -> "104.66.0.24"[label="1.36"];
+"104.136.12.30" -> "104.132.24.1"[label="1.02"];
+"104.136.12.30" -> "104.136.12.7"[label="1.00"];
+"104.136.12.30" -> "104.136.12.9"[label="1.00"];
+"104.136.12.30" -> "104.136.22.22"[label="1.58"];
+"104.131.21.12" -> "104.131.21.102"[label="1.15"];
+"104.131.21.12" -> "104.131.21.101"[label="1.19"];
+"104.131.21.12" -> "104.131.21.34"[label="2.30"];
+"104.131.21.12" -> "104.131.21.21"[label="1.63"];
+"104.131.21.12" -> "104.131.21.1"[label="16.60"];
+"104.132.24.7" -> "104.132.0.3"[label="197.05"];
+"104.132.24.7" -> "104.132.24.4"[label="1.10"];
+"104.132.24.7" -> "104.132.24.1"[label="2.27"];
+"104.132.24.7" -> "104.132.24.2"[label="14.99"];
+"104.132.24.7" -> "104.132.24.9"[label="11.87"];
+"104.129.1.28" -> "104.130.1.67"[label="5.85"];
+"104.129.1.28" -> "104.129.0.187"[label="61.34"];
+"104.132.24.1" -> "104.132.24.4"[label="1.32"];
+"104.132.24.1" -> "104.132.24.5"[label="15.18"];
+"104.132.24.1" -> "104.136.12.30"[label="1.02"];
+"104.132.24.1" -> "104.132.24.7"[label="2.07"];
+"104.132.24.1" -> "104.132.24.3"[label="1.63"];
+"104.132.24.1" -> "104.132.24.8"[label="1.16"];
+"104.132.24.1" -> "104.132.24.9"[label="1.07"];
+"104.130.30.1" -> "104.130.1.67"[label="4.03"];
+"104.130.30.1" -> "104.130.30.3"[label="1.58"];
+"104.130.30.1" -> "104.130.30.9"[label="1.36"];
+"104.129.31.3" -> "104.130.1.73"[label="4.98"];
+"104.129.31.3" -> "104.129.31.14"[label="1.16"];
+"104.0.0.29" -> "104.0.0.30"[label="1.30"];
+"104.131.83.77" -> "104.130.1.67"[label="26.60"];
+"104.131.83.77" -> "104.131.10.2"[label="1.00"];
+"104.131.83.77" -> "104.131.1.2"[label="35.61"];
+"104.131.83.77" -> "104.131.131.1"[label="22.12"];
+"104.131.83.77" -> "104.131.131.3"[label="5.63"];
+"104.0.0.30" -> "104.129.1.1"[label="1.00"];
+"104.0.0.30" -> "104.0.0.29"[label="1.30"];
+"104.0.0.30" -> "104.0.0.17"[label="1.00"];
+"104.130.1.157" -> "104.130.1.110"[label="2.03"];
+"104.130.1.157" -> "104.130.1.97"[label="4.67"];
+"104.130.1.157" -> "104.130.27.176"[label="40.64"];
+"104.130.1.157" -> "104.130.3.3"[label="0.00"];
+"104.130.1.157" -> "104.130.17.17"[label="20.26"];
+"104.130.30.3" -> "104.130.1.67"[label="0.00"];
+"104.130.30.3" -> "104.130.30.1"[label="1.58"];
+"104.130.30.3" -> "104.130.30.9"[label="1.06"];
+"104.132.24.3" -> "104.132.0.3"[label="32.03"];
+"104.132.24.3" -> "104.132.24.4"[label="2.01"];
+"104.132.24.3" -> "104.132.24.5"[label="20.74"];
+"104.132.24.3" -> "104.132.24.1"[label="13.68"];
+"104.132.24.3" -> "104.132.24.9"[label="11.68"];
+"104.132.24.12" -> "104.132.22.17"[label="1.14"];
+"104.132.24.12" -> "104.132.24.2"[label="1.00"];
+"104.8.0.24" -> "104.6.0.11"[label="3.27"];
+"104.8.0.24" -> "104.6.0.6"[label="22.52"];
+"104.8.0.24" -> "104.8.0.22"[label="1.00"];
+"104.131.0.147" -> "104.131.9.2"[label="7.27"];
+"104.131.0.147" -> "104.131.9.1"[label="5.96"];
+"104.131.0.147" -> "104.131.9.6"[label="1.44"];
+"104.131.0.147" -> "104.131.0.148"[label="1.63"];
+"104.131.0.146" -> "104.131.0.42"[label="1.20"];
+"104.131.0.146" -> "104.131.1.2"[label="0.00"];
+"104.129.1.17" -> "104.129.0.239"[label="0.00"];
+"104.129.1.17" -> "104.129.0.110"[label="0.00"];
+"104.129.1.17" -> "104.129.0.123"[label="0.00"];
+"104.129.1.17" -> "104.129.37.2"[label="3.36"];
+"104.129.1.17" -> "104.129.0.8"[label="33.78"];
+"104.129.1.17" -> "104.129.1.1"[label="2.59"];
+"104.129.1.17" -> "104.129.1.18"[label="1.00"];
+"104.0.0.17" -> "104.0.4.200"[label="1.01"];
+"104.0.0.17" -> "104.0.4.65"[label="2.38"];
+"104.0.0.17" -> "104.0.4.161"[label="1.10"];
+"104.0.0.17" -> "104.129.1.1"[label="1.00"];
+"104.0.0.17" -> "104.0.0.5"[label="1.13"];
+"104.0.0.17" -> "104.0.0.30"[label="1.00"];
+"104.129.18.1" -> "104.129.46.100"[label="2.72"];
+"104.129.1.18" -> "104.129.1.71"[label="1.44"];
+"104.129.1.18" -> "104.129.37.2"[label="27.09"];
+"104.129.1.18" -> "104.129.1.17"[label="1.00"];
+"104.23.0.4" -> "104.23.0.2"[label="1.10"];
+"104.130.1.16" -> "104.130.1.67"[label="2.71"];
+"104.130.1.16" -> "104.131.34.1"[label="22.50"];
+"104.130.1.16" -> "104.130.1.10"[label="1.04"];
+"104.130.1.16" -> "104.130.1.14"[label="1.04"];
+"104.130.1.16" -> "104.130.1.131"[label="25.32"];
+"104.130.1.16" -> "104.130.17.17"[label="677.34"];
+"104.130.1.16" -> "104.130.17.20"[label="4.00"];
+"104.131.25.14" -> "104.130.10.111"[label="18.71"];
+"104.131.25.14" -> "104.131.0.74"[label="2.43"];
+"104.131.25.14" -> "104.131.25.16"[label="1.00"];
+"104.131.25.14" -> "104.131.25.12"[label="1.00"];
+"104.132.24.8" -> "104.132.24.7"[label="0.00"];
+"104.132.24.8" -> "104.132.24.4"[label="1.10"];
+"104.132.24.8" -> "104.132.24.1"[label="1.19"];
+"104.132.24.8" -> "104.132.24.9"[label="2.16"];
+"104.132.24.9" -> "104.132.24.4"[label="12.52"];
+"104.132.24.9" -> "104.132.24.5"[label="134.35"];
+"104.132.24.9" -> "104.132.24.7"[label="12.69"];
+"104.132.24.9" -> "104.132.24.1"[label="1.34"];
+"104.132.24.9" -> "104.132.24.3"[label="13.35"];
+"104.132.24.9" -> "104.132.24.8"[label="2.35"];
+"104.23.0.2" -> "104.0.7.254"[label="10.63"];
+"104.23.0.2" -> "104.23.0.4"[label="1.09"];
+"104.66.68.16" -> "104.66.0.23"[label="1.24"];
+"104.66.68.16" -> "104.66.0.203"[label="6.19"];
+"104.66.68.16" -> "104.66.77.4"[label="6.13"];
+"104.131.25.12" -> "104.131.0.245"[label="1.13"];
+"104.131.25.12" -> "104.131.25.16"[label="1.00"];
+"104.131.25.12" -> "104.136.12.7"[label="1.51"];
+"104.131.25.12" -> "104.131.25.14"[label="1.00"];
+"104.131.21.1" -> "104.131.21.104"[label="8.80"];
+"104.131.21.1" -> "104.131.21.105"[label="3.55"];
+"104.131.21.1" -> "104.131.21.101"[label="20.53"];
+"104.131.21.1" -> "104.131.34.1"[label="0.00"];
+"104.131.21.1" -> "104.131.21.34"[label="20.03"];
+"104.131.21.1" -> "104.131.9.2"[label="4.90"];
+"104.131.21.1" -> "104.131.9.1"[label="3.82"];
+"104.131.21.1" -> "104.131.21.21"[label="5.03"];
+"104.131.21.1" -> "104.131.21.12"[label="24.19"];
+"104.131.0.148" -> "104.129.44.7"[label="0.00"];
+"104.131.0.148" -> "104.131.9.2"[label="32.14"];
+"104.131.0.148" -> "104.131.9.1"[label="244.45"];
+"104.131.0.148" -> "104.131.9.6"[label="50.41"];
+"104.131.0.148" -> "104.131.0.147"[label="1.45"];
+"104.65.0.42" -> "0.0.0.0/0.0.0.0"[label="HNA"];
+"0.0.0.0/0.0.0.0"[shape=diamond];
+"104.0.7.254" -> "10.63.0.0/255.255.0.0"[label="HNA"];
+"10.63.0.0/255.255.0.0"[shape=diamond];
+"104.0.7.254" -> "104.63.0.0/255.255.0.0"[label="HNA"];
+"104.63.0.0/255.255.0.0"[shape=diamond];
+"104.0.7.254" -> "10.99.0.0/255.255.0.0"[label="HNA"];
+"10.99.0.0/255.255.0.0"[shape=diamond];
+"104.131.0.245" -> "104.131.0.145/255.255.255.255"[label="HNA"];
+"104.131.0.145/255.255.255.255"[shape=diamond];
+"104.131.0.55" -> "0.0.0.0/0.0.0.0"[label="HNA"];
+"0.0.0.0/0.0.0.0"[shape=diamond];
+"104.129.1.10" -> "0.0.0.0/0.0.0.0"[label="HNA"];
+"0.0.0.0/0.0.0.0"[shape=diamond];
+"104.131.9.1" -> "104.131.9.77/255.255.255.255"[label="HNA"];
+"104.131.9.77/255.255.255.255"[shape=diamond];
+"104.131.9.5" -> "104.131.9.136/255.255.255.248"[label="HNA"];
+"104.131.9.136/255.255.255.248"[shape=diamond];
+"104.129.29.29" -> "104.129.29.224/255.255.255.224"[label="HNA"];
+"104.129.29.224/255.255.255.224"[shape=diamond];
+"104.130.77.77" -> "0.0.0.0/0.0.0.0"[label="HNA"];
+"0.0.0.0/0.0.0.0"[shape=diamond];
+"104.130.17.17" -> "104.136.12.12/255.255.255.255"[label="HNA"];
+"104.136.12.12/255.255.255.255"[shape=diamond];
+"104.136.12.7" -> "0.0.0.0/0.0.0.0"[label="HNA"];
+"0.0.0.0/0.0.0.0"[shape=diamond];
+"104.131.21.21" -> "0.0.0.0/0.0.0.0"[label="HNA"];
+"0.0.0.0/0.0.0.0"[shape=diamond];
+"104.7.2.1" -> "0.0.0.0/0.0.0.0"[label="HNA"];
+"0.0.0.0/0.0.0.0"[shape=diamond];
+"104.7.2.1" -> "104.7.2.16/255.255.255.240"[label="HNA"];
+"104.7.2.16/255.255.255.240"[shape=diamond];
+"104.7.2.1" -> "104.7.2.8/255.255.255.248"[label="HNA"];
+"104.7.2.8/255.255.255.248"[shape=diamond];
+"104.7.2.1" -> "104.7.2.0/255.255.255.248"[label="HNA"];
+"104.7.2.0/255.255.255.248"[shape=diamond];
+"104.132.24.1" -> "0.0.0.0/0.0.0.0"[label="HNA"];
+"0.0.0.0/0.0.0.0"[shape=diamond];
+"104.130.30.1" -> "104.130.30.30/255.255.255.255"[label="HNA"];
+"104.130.30.30/255.255.255.255"[shape=diamond];
+"104.130.1.16" -> "0.0.0.0/0.0.0.0"[label="HNA"];
+"0.0.0.0/0.0.0.0"[shape=diamond];
+"104.132.24.8" -> "104.136.12.13/255.255.255.255"[label="HNA"];
+"104.136.12.13/255.255.255.255"[shape=diamond];
+"104.132.24.9" -> "104.132.24.250/255.255.255.255"[label="HNA"];
+"104.132.24.250/255.255.255.255"[shape=diamond];
+"104.23.0.2" -> "0.0.0.0/0.0.0.0"[label="HNA"];
+"0.0.0.0/0.0.0.0"[shape=diamond];
+"104.23.0.2" -> "104.23.0.5/255.255.255.255"[label="HNA"];
+"104.23.0.5/255.255.255.255"[shape=diamond];
+}
+
+digraph topology
+{
+"104.131.131.1" -> "104.131.0.71"[label="0.00", style=dashed];
+"104.131.131.1" -> "104.131.0.42"[label="140.11", style=solid];
+"104.131.0.42"[shape=box];
+"104.131.131.1" -> "104.131.0.55"[label="9.87", style=solid];
+"104.131.131.1" -> "104.131.1.2"[label="0.00", style=solid];
+"104.131.1.2"[shape=box];
+"104.131.131.1" -> "104.131.0.3"[label="1.81", style=solid];
+"104.131.0.3"[shape=box];
+"104.131.131.1" -> "104.131.131.3"[label="16.67", style=solid];
+"104.131.131.3"[shape=box];
+"104.131.131.1" -> "104.131.83.77"[label="0.00", style=dashed];
+"104.131.131.1" -> "104.131.0.147"[label="0.00", style=dashed];
+"104.192.0.40" -> "104.192.192.166"[label="2.06"];
+"104.129.0.107" -> "104.129.0.77"[label="1.52"];
+"104.129.0.107" -> "104.129.81.1"[label="1.67"];
+"104.129.0.107" -> "104.129.1.43"[label="1.42"];
+"104.129.0.107" -> "104.129.1.44"[label="1.04"];
+"104.65.0.42" -> "104.0.7.254"[label="4.03"];
+"104.65.0.42" -> "104.0.0.6"[label="6.54"];
+"104.129.0.234" -> "104.129.37.2"[label="2.01"];
+"104.129.108.1" -> "104.129.105.2"[label="1.80"];
+"104.129.108.1" -> "104.129.105.10"[label="1.18"];
+"104.129.108.1" -> "104.129.103.1"[label="1.16"];
+"104.129.108.1" -> "104.129.103.19"[label="1.30"];
+"104.129.108.1" -> "104.129.0.91"[label="1.17"];
+"104.129.108.1" -> "104.129.0.165"[label="4.82"];
+"104.66.0.46" -> "104.66.0.8"[label="1.22"];
+"104.66.0.46" -> "104.66.0.24"[label="1.42"];
+"104.129.0.108" -> "104.129.0.239"[label="1.50"];
+"104.129.0.108" -> "104.129.0.95"[label="1.24"];
+"104.129.0.108" -> "104.129.0.8"[label="1.50"];
+"104.130.1.110" -> "104.130.1.97"[label="36.78"];
+"104.130.1.110" -> "104.130.27.176"[label="5.08"];
+"104.130.1.110" -> "104.130.3.3"[label="17.71"];
+"104.130.1.110" -> "104.130.17.17"[label="1.59"];
+"104.130.1.110" -> "104.130.1.157"[label="1.94"];
+"104.129.0.239" -> "104.129.0.108"[label="1.53"];
+"104.129.0.239" -> "104.129.0.125"[label="0.00"];
+"104.129.0.239" -> "104.129.0.95"[label="1.38"];
+"104.129.0.239" -> "104.129.37.2"[label="2.55"];
+"104.129.0.239" -> "104.129.0.8"[label="1.63"];
+"104.129.0.239" -> "104.129.1.10"[label="53.87"];
+"104.129.0.239" -> "104.129.1.17"[label="0.00"];
+"104.129.0.110" -> "104.129.0.123"[label="0.00"];
+"104.129.0.110" -> 
\ No newline at end of file

Modified: trunk/apps/meshs3d/main.c
===================================================================
--- trunk/apps/meshs3d/main.c	2007-10-08 20:27:24 UTC (rev 718)
+++ trunk/apps/meshs3d/main.c	2007-10-08 20:41:53 UTC (rev 719)
@@ -125,7 +125,6 @@
 			else
 				node->obj_id = s3d_clone(Global.obj_node_normal);
 
-
 			s3d_flags_on(node->obj_id, S3D_OF_VISIBLE | S3D_OF_SELECTABLE);
 			
 			node->desc_id = s3d_draw_string(node->ip_string, &node->desc_length);



From dotslash at mail.berlios.de  Mon Oct  8 23:08:01 2007
From: dotslash at mail.berlios.de (dotslash at BerliOS)
Date: Mon, 8 Oct 2007 23:08:01 +0200
Subject: [S3d-svn] r720 - in trunk: . apps/meshs3d
Message-ID: <200710082108.l98L81Ne020405@sheep.berlios.de>

Author: dotslash
Date: 2007-10-08 23:08:00 +0200 (Mon, 08 Oct 2007)
New Revision: 720

Modified:
   trunk/
   trunk/apps/meshs3d/main.c
Log:
 r2604 at kero:  dotslash | 2007-10-08 23:07:48 +0200
 - remove node jitter by calculating 4th root of the value. 
   [you might want to play with that value. 0.25 = 1/4, 
    big value (like squareroot, 0.5) still jitters but converges faster,
    small values might stay in local optima (or at least stay longer)]



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:2591
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:2604

Modified: trunk/apps/meshs3d/main.c
===================================================================
--- trunk/apps/meshs3d/main.c	2007-10-08 20:41:53 UTC (rev 719)
+++ trunk/apps/meshs3d/main.c	2007-10-08 21:08:00 UTC (rev 720)
@@ -203,7 +203,7 @@
 
 					/* we have a connection */
 					wish_distance = ((con->etx1_sqrt + con->etx2_sqrt)) + 4;
-					f = wish_distance / distance;
+					f = powf(wish_distance / distance, 0.25);
 					mov_add(first_node->mov_vec, tmp_mov_vec, (1 / f - 1));
 					mov_add(sec_node->mov_vec, tmp_mov_vec, -(1 / f - 1));
 



From nichtsnutz at mail.berlios.de  Mon Oct  8 23:13:53 2007
From: nichtsnutz at mail.berlios.de (nichtsnutz at BerliOS)
Date: Mon, 8 Oct 2007 23:13:53 +0200
Subject: [S3d-svn] r721 - trunk/apps/meshs3d
Message-ID: <200710082113.l98LDrnh020774@sheep.berlios.de>

Author: nichtsnutz
Date: 2007-10-08 23:13:53 +0200 (Mon, 08 Oct 2007)
New Revision: 721

Modified:
   trunk/apps/meshs3d/main.c
   trunk/apps/meshs3d/process.c
Log:
fix initializing of nodes



Modified: trunk/apps/meshs3d/main.c
===================================================================
--- trunk/apps/meshs3d/main.c	2007-10-08 21:08:00 UTC (rev 720)
+++ trunk/apps/meshs3d/main.c	2007-10-08 21:13:53 UTC (rev 721)
@@ -115,8 +115,8 @@
 		if (node->node_type_modified) {
 
 
-			if (node->obj_id) s3d_del_object(node->obj_id);
-			if (node->desc_id) s3d_del_object(node->desc_id);
+			if (node->obj_id > 0) s3d_del_object(node->obj_id);
+			if (node->desc_id > 0) s3d_del_object(node->desc_id);
 
 			if (node->node_type == 1)
 				node->obj_id = s3d_clone(Global.obj_node_inet);

Modified: trunk/apps/meshs3d/process.c
===================================================================
--- trunk/apps/meshs3d/process.c	2007-10-08 21:08:00 UTC (rev 720)
+++ trunk/apps/meshs3d/process.c	2007-10-08 21:13:53 UTC (rev 721)
@@ -193,8 +193,8 @@
 		orig_node->pos_vec[2] = ((float) 2.0 * rand()) / RAND_MAX - 1.0;
 		orig_node->mov_vec[0] = orig_node->mov_vec[1] = orig_node->mov_vec[2] = 0.0;
 
-		orig_node->obj_id = 0;
-		orig_node->desc_id = 0;
+		orig_node->obj_id = -1;
+		orig_node->desc_id = -1;
 		hash_add(node_hash, orig_node);
 		Global.node_count++;
 	}



From nichtsnutz at mail.berlios.de  Wed Oct 10 00:58:03 2007
From: nichtsnutz at mail.berlios.de (nichtsnutz at BerliOS)
Date: Wed, 10 Oct 2007 00:58:03 +0200
Subject: [S3d-svn] r722 - trunk/apps/meshs3d
Message-ID: <200710092258.l99Mw3kg014392@sheep.berlios.de>

Author: nichtsnutz
Date: 2007-10-10 00:58:02 +0200 (Wed, 10 Oct 2007)
New Revision: 722

Modified:
   trunk/apps/meshs3d/main.c
   trunk/apps/meshs3d/meshs3d.h
   trunk/apps/meshs3d/process.c
Log:
add color and hna objects



Modified: trunk/apps/meshs3d/main.c
===================================================================
--- trunk/apps/meshs3d/main.c	2007-10-08 21:13:53 UTC (rev 721)
+++ trunk/apps/meshs3d/main.c	2007-10-09 22:58:02 UTC (rev 722)
@@ -58,6 +58,7 @@
 	Global.obj_zero_point = 0;
 	Global.obj_node_count = 0;
 	Global.node_count = 0;
+	Global.color_switch = 0;
 	Global.asp = 1.0;
 	Global.left = -1.0;
 	Global.bottom = -1.0;
@@ -171,6 +172,90 @@
 	}
 }
 
+void color_handler(struct node_con *con)
+{
+	float rgb=0.0, r=0.0, g=0.0, b=0.0, etx;
+	int c, c1=0;
+	
+	if (con->etx1 == -1000.00 || con->etx2 == -1000) {
+
+		c = 1;
+		b = 1.0;
+
+	} else {
+
+		etx = (con->etx1 + con->etx2) / 2.0;
+
+		/* very good link - bright blue */
+		if ((etx >= 1.0) && (etx < 1.5)) {
+
+			c = 2;
+			r = 0.5; g = 1.0; b = 1.0;
+
+		/* good link - bright yellow */
+		} else if ((etx >= 1.5) && (etx < 2.0)) {
+
+			rgb = 2.0 - etx;
+
+			c = 3;
+			c1 = con->color == 3 && (int) rintf(con->rgb * 10) != (int) rintf(rgb * 10) ? 1 : 0;
+			r = 1.0; g = 1.0; b = rgb;
+
+		/* not so good link - orange */
+		} else if ((etx >= 2.0) && (etx < 3.0)) {
+
+			rgb = 1.5 - (etx / 2.0);
+			
+			c = 4;
+			c1 = con->color == 4 && (int) rintf(con->rgb * 10) != (int) rintf(rgb * 10) ? 1 : 0;
+			r = 1.0; g = rgb;
+
+		/* bad link (almost dead) - brown */
+		} else if ((etx >= 3.0) && (etx < 5.0)) {
+
+			rgb = 1.75 - (etx / 4.0);
+
+			c = 5;
+			c1 = con->color == 5 && (int) rintf(con->rgb * 10) != (int) rintf(rgb * 10) ? 1 : 0;
+			
+			r = rgb; g = rgb - 0.5; 
+
+
+		/* zombie link - grey */
+		} else if ((etx >= 5.0) && (etx < 1000.0)) {
+
+			rgb = 1000.0 / (1500.0 + etx);
+
+			c = 6;
+			c1 = con->color == 6 && (int) rintf(con->rgb * 10) != (int) rintf(rgb * 10) ? 1 : 0;
+
+			r = g = b = rgb;
+
+		/* wtf - dark grey */
+		} else {
+
+			c = 7;
+			r = g = b = 0.3;
+
+		}
+
+	}
+	
+	if(con->color != c || c1) {
+		s3d_pep_material(con->obj_id,
+			r, g, b,
+			r, g, b,
+			r, g, b);
+
+		con->color = c;
+		
+		if(rgb != 0.0)
+			con->rgb = rgb;
+	}
+
+}
+
+
 void calc_node_mov(void)
 {
 
@@ -214,13 +299,20 @@
 					vertex_buf[4] = sec_node->pos_vec[1];
 					vertex_buf[5] = sec_node->pos_vec[2];
 					s3d_pep_vertices(con->obj_id, vertex_buf, 2);
+					
+					if (Global.color_switch)
+						color_handler(con);
+					else {
 
-					s3d_pep_material(con->obj_id,
+						s3d_pep_material(con->obj_id,
 					                 1.0, 1.0, 1.0,
 					                 1.0, 1.0, 1.0,
 					                 1.0, 1.0, 1.0
 					                );
+						con->color = 0;
 
+					}
+
 				} else {
 
 					/* we have no connection */
@@ -231,18 +323,9 @@
 				}
 			}
 		}
-		/* first_node = hash_find( node_hash, &con->ip[0] );
-		sec_node = hash_find( node_hash, &con->ip[1] );
-		distance = dirt( first_node->pos_vec, sec_node->pos_vec, tmp_mov_vec );
-		f = ( ( con->etx1_sqrt + con->etx2_sqrt ) / 4.0 ) / distance; */
 
-		/***
-		 * drift factor - 0.0 < factor < 1.0 ( best results: 0.3 < factor < 0.9
-		 * small factor: fast and strong drift to neighbours
-		 ***/
-		/* if ( f < Factor ) f = Factor; */
+	}
 
-	}
 	while (NULL != (hashit1 = hash_iterate(node_hash, hashit1))) {
 		first_node = (struct node *) hashit1->bucket->data;
 		move_meshnode(first_node);
@@ -315,6 +398,24 @@
 	return(0);
 }
 
+int keypress(struct s3d_evt *event)
+{
+
+	struct s3d_key_event *key = (struct s3d_key_event *)event->buf;
+	
+	switch (key->keysym) {
+	
+	case S3DK_c: /* color on/off */
+
+		Global.color_switch =  Global.color_switch ? 0 : 1;
+		break;
+
+	}
+	
+	return(0);
+	
+}
+
 int main(int argc, char *argv[])
 {
 	int optchar;
@@ -366,9 +467,10 @@
 	if (!net_init(olsr_host)) {
 		
 		s3d_set_callback( S3D_EVENT_OBJ_INFO, object_info );
+		s3d_set_callback(S3D_EVENT_KEY,keypress);
 		
+
 		/*s3d_set_callback(S3D_EVENT_OBJ_CLICK,object_click);
-		s3d_set_callback(S3D_EVENT_KEY,keypress);
 		s3d_set_callback(S3D_EVENT_QUIT,stop); */
 
 		if (!s3d_init(&argc, &argv, "meshs3d")) {

Modified: trunk/apps/meshs3d/meshs3d.h
===================================================================
--- trunk/apps/meshs3d/meshs3d.h	2007-10-08 21:13:53 UTC (rev 721)
+++ trunk/apps/meshs3d/meshs3d.h	2007-10-09 22:58:02 UTC (rev 722)
@@ -81,6 +81,7 @@
 	int obj_zero_point;
 	int obj_node_count;
 	int node_count;
+	int color_switch;
 	float asp;
 	float bottom;
 	float left;

Modified: trunk/apps/meshs3d/process.c
===================================================================
--- trunk/apps/meshs3d/process.c	2007-10-08 21:13:53 UTC (rev 721)
+++ trunk/apps/meshs3d/process.c	2007-10-09 22:58:02 UTC (rev 722)
@@ -165,7 +165,7 @@
 
 }
 
-void handle_mesh_node(unsigned int *ip, char *ip_string)
+struct node *handle_mesh_node(unsigned int ip, char *ip_string)
 {
 	struct node *orig_node;
 	struct hashtable_t *swaphash;
@@ -176,11 +176,11 @@
 			exit_error("Couldn't resize hash table \n");
 		node_hash = swaphash;
 	}
-	orig_node = (struct node *) hash_find(node_hash, ip);
+	orig_node = (struct node *) hash_find(node_hash, &ip);
 
 	if (NULL == orig_node) {
 		orig_node = (struct node *)debugMalloc(sizeof(struct node), 101);
-		orig_node->ip = *ip;
+		orig_node->ip = ip;
 		strncpy(orig_node->ip_string, ip_string, NAMEMAX);
 
 		orig_node->node_type = 0;
@@ -198,7 +198,7 @@
 		hash_add(node_hash, orig_node);
 		Global.node_count++;
 	}
-	return;
+	return(orig_node);
 }
 
 int process_main()
@@ -206,11 +206,13 @@
 
 	int dn;
 	float f;
-	char *lbuf_ptr, *last_cr_ptr, *con_from, *con_from_end, *con_to, *con_to_end, *etx, *etx_end;
-	/* struct node *node_from, *node_to; */
+	char *lbuf_ptr, *last_cr_ptr, *con_from, *con_from_end, *con_to, *con_to_end, *etx, *etx_end, *tmp_char;
+	char hna_name[NAMEMAX];
+	char hna_node[NAMEMAX];
+	
+	struct node *tmp_node;
+	unsigned int int_con_from = 0, int_con_to = 0, address;
 
-	unsigned int int_con_from = 0, int_con_to = 0;
-
 	lbuf_ptr = lbuf;
 	last_cr_ptr = NULL;
 
@@ -255,7 +257,44 @@
 
 				/* announced network via HNA */
 				if (strncmp(etx, "HNA", NAMEMAX) == 0) {
+				
+					if (strncmp(con_to, "0.0.0.0/0.0.0.0", NAMEMAX) == 0) {
+					
+						tmp_node = handle_mesh_node(int_con_from, con_from);
 
+						if (tmp_node->node_type != 1) {
+
+							tmp_node->node_type = 1;
+							tmp_node->node_type_modified = 1;
+							if (Global.debug) printf("new internet: %s\n", tmp_node->ip_string);
+
+						}
+					
+					} else {
+
+						memmove(hna_node, con_to, NAMEMAX);
+						if ((tmp_char = strchr(hna_node, (int)'/'))) {
+							tmp_char++;
+							address = (int) - inet_network(tmp_char);
+							sprintf(hna_name, "%u", (unsigned int)(32 - ceil(log(address) / log(2))));
+							strcpy(tmp_char, hna_name);
+						}
+
+						handle_mesh_node(int_con_from, con_from);
+						tmp_node = handle_mesh_node(int_con_to, hna_node);
+
+						if (tmp_node->node_type != 2) {
+
+							tmp_node->node_type = 2;
+							tmp_node->node_type_modified = 1;
+							if (Global.debug) printf("new hna network: %s\n", tmp_node->ip_string);
+
+						}
+						
+						handle_con(int_con_from, int_con_to, -1000.00);
+					
+					}
+
 				} else {
 
 					f = strtod(etx, NULL);
@@ -270,11 +309,11 @@
 						printf("%s is not a valid ip address\n", con_to);
 						continue;
 					}
-					handle_mesh_node(&int_con_from, con_from);
-					handle_mesh_node(&int_con_to, con_to);
+
+					handle_mesh_node(int_con_from, con_from);
+					handle_mesh_node(int_con_to, con_to);
 					handle_con(int_con_from, int_con_to, f);
-					/* node_from = (struct node *) hash_find( node_hash, &int_con_from );
-					node_to = (struct node *) hash_find( node_hash, &int_con_to ); */
+
 				}
 				/* remove zerobyte */
 				(*con_from_end) = (*con_to_end) = (*etx_end) = '"';



From lazhur at mail.berlios.de  Sat Oct 13 20:54:02 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Sat, 13 Oct 2007 20:54:02 +0200
Subject: [S3d-svn] r723 - trunk/apps/meshs3d
Message-ID: <200710131854.l9DIs2Do004826@sheep.berlios.de>

Author: lazhur
Date: 2007-10-13 20:54:02 +0200 (Sat, 13 Oct 2007)
New Revision: 723

Modified:
   trunk/apps/meshs3d/main.c
Log:
meshs3d: Remove C++-Comments


Modified: trunk/apps/meshs3d/main.c
===================================================================
--- trunk/apps/meshs3d/main.c	2007-10-09 22:58:02 UTC (rev 722)
+++ trunk/apps/meshs3d/main.c	2007-10-13 18:54:02 UTC (rev 723)
@@ -127,12 +127,12 @@
 				node->obj_id = s3d_clone(Global.obj_node_normal);
 
 			s3d_flags_on(node->obj_id, S3D_OF_VISIBLE | S3D_OF_SELECTABLE);
-			
+
 			node->desc_id = s3d_draw_string(node->ip_string, &node->desc_length);
 			s3d_link(node->desc_id, node->obj_id);
 			s3d_translate(node->desc_id, - node->desc_length / 2, -2, 0);
 			s3d_flags_on(node->desc_id, S3D_OF_VISIBLE);
-			
+
 			node->node_type_modified = 0;
 
 		}
@@ -159,7 +159,7 @@
 	if (!((node->mov_vec[0] == 0) && (node->mov_vec[1] == 0) && (node->mov_vec[2] == 0)) && node->visible) {
 		distance = dirt(node->pos_vec, null_vec, tmp_mov_vec);
 		mov_add(node->mov_vec, tmp_mov_vec, distance / 100);   /* move a little bit to point zero */
-//		mov_add(node->mov_vec, tmp_mov_vec, 1);   /* move a little bit to point zero */
+		/* mov_add(node->mov_vec, tmp_mov_vec, 1); */   /* move a little bit to point zero */
 
 		if ((distance = dist(node->mov_vec, null_vec)) > 10.0)
 			mov_add(node->pos_vec, node->mov_vec, 1.0 / ((float) distance));
@@ -176,7 +176,7 @@
 {
 	float rgb=0.0, r=0.0, g=0.0, b=0.0, etx;
 	int c, c1=0;
-	
+
 	if (con->etx1 == -1000.00 || con->etx2 == -1000) {
 
 		c = 1;
@@ -241,14 +241,14 @@
 
 	}
 	
-	if(con->color != c || c1) {
+	if (con->color != c || c1) {
 		s3d_pep_material(con->obj_id,
 			r, g, b,
 			r, g, b,
 			r, g, b);
 
 		con->color = c;
-		
+
 		if(rgb != 0.0)
 			con->rgb = rgb;
 	}
@@ -299,7 +299,7 @@
 					vertex_buf[4] = sec_node->pos_vec[1];
 					vertex_buf[5] = sec_node->pos_vec[2];
 					s3d_pep_vertices(con->obj_id, vertex_buf, 2);
-					
+
 					if (Global.color_switch)
 						color_handler(con);
 					else {
@@ -344,9 +344,9 @@
 	handle_node();
 
 	
-	if( Global.node_count && Global.node_count != last_count ) {
+	if (Global.node_count && Global.node_count != last_count) {
 
-		if( Global.obj_node_count ) s3d_del_object( Global.obj_node_count );
+		if (Global.obj_node_count) s3d_del_object(Global.obj_node_count);
 		
 		snprintf(nc_str, 20, "node count: %d", Global.node_count );
 		Global.obj_node_count = s3d_draw_string( nc_str, &str_len );
@@ -359,7 +359,7 @@
 		last_count = Global.node_count;
 
 	}
-	
+
 	while ((net_result = net_main()) != 0) {
 		if (net_result == -1) {
 			printf("that's it folks\n");
@@ -376,11 +376,11 @@
 	struct s3d_obj_info *inf;
 	inf = (struct s3d_obj_info *)hrmz->buf;
 	s3dw_object_info(hrmz);
-	
+
 	if (inf->object == 0) {
 	
 		Global.asp = inf->scale;
-		
+
 		if ( Global.asp > 1.0) {
 
 			Global.bottom = -1.0;
@@ -402,18 +402,18 @@
 {
 
 	struct s3d_key_event *key = (struct s3d_key_event *)event->buf;
-	
+
 	switch (key->keysym) {
-	
+
 	case S3DK_c: /* color on/off */
 
 		Global.color_switch =  Global.color_switch ? 0 : 1;
 		break;
 
 	}
-	
+
 	return(0);
-	
+
 }
 
 int main(int argc, char *argv[])
@@ -500,7 +500,7 @@
 			s3d_quit();
 			net_quit();
 			printf("that's it\n");
-		} else 
+		} else
 			printf("s3d init failed\n");
 	}
 	return(0);



From lazhur at mail.berlios.de  Sat Oct 13 20:54:11 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Sat, 13 Oct 2007 20:54:11 +0200
Subject: [S3d-svn] r724 - trunk/apps/comptest
Message-ID: <200710131854.l9DIsB0m004878@sheep.berlios.de>

Author: lazhur
Date: 2007-10-13 20:54:11 +0200 (Sat, 13 Oct 2007)
New Revision: 724

Modified:
   trunk/apps/comptest/comptest.c
Log:
comptest: Remove C++-Comments


Modified: trunk/apps/comptest/comptest.c
===================================================================
--- trunk/apps/comptest/comptest.c	2007-10-13 18:54:02 UTC (rev 723)
+++ trunk/apps/comptest/comptest.c	2007-10-13 18:54:11 UTC (rev 724)
@@ -43,8 +43,8 @@
 #endif
 #endif
 
-#define TEXW	256
-#define TEXH	256
+#define TEXW 256
+#define TEXH 256
 
 struct extension {
 	int event, error;
@@ -115,74 +115,71 @@
 		name = "Circulate";
 		break;
 	}
-	if ( event->type == xdamage.event + XDamageNotify ) {
-		XDamageNotifyEvent *e = (XDamageNotifyEvent*) event ;
-		// e->drawable is the window ID of the damaged window
-		// e->geometry is the geometry of the damaged window	
-		// e->area     is the bounding rect for the damaged area	
-		// e->damage   is the damage handle returned by XDamageCreate()
+	if (event->type == xdamage.event + XDamageNotify) {
+		/* XDamageNotifyEvent *e = (XDamageNotifyEvent*) event; */
+		/* e->drawable is the window ID of the damaged window
+		   e->geometry is the geometry of the damaged window
+		   e->area     is the bounding rect for the damaged area
+		   e->damage   is the damage handle returned by XDamageCreate() */
 
-		// Subtract all the damage, repairing the window.
+		/* Subtract all the damage, repairing the window. */
 		name = "Damage!!";
-	}
-	else if ( event->type == ConfigureNotify ) {
-		XConfigureEvent *e = &event->xconfigure;	
-		// The windows size, position or Z index in the stacking
-		// order has changed
+	} else if (event->type == ConfigureNotify) {
+		/* XConfigureEvent *e = &event->xconfigure; */
+		/* The windows size, position or Z index in the stacking
+		   order has changed */
 		name = "Configure!!";
 	}
 
-
 	printf("Event: %s\n", name);
 	return(0);
-
-
 }
+
 /*static int error(Display *COMPUNUSED(dpy), XErrorEvent *COMPUNUSED(event))*/
 static int error(Display *COMPUNUSED(dpy), XErrorEvent *event)
 {
 	char *name = "";
-    int     o;
+	int     o;
 
-    o = event->error_code - xfixes.error;
-    switch (o) {
-    case BadRegion:
-        name = "BadRegion";
-        break;
-    default:
-        break;
-    }
-    o = event->error_code - xdamage.error;
-    switch (o) {
-    case BadDamage:
-        name = "BadDamage";
-        break;
-    default:
-        break;
-    }
-    o = event->error_code - xrender.error;
-    switch (o) {
-    case BadPictFormat:
-        name = "BadPictFormat";
-        break;
-    case BadPicture:
-        name = "BadPicture";
-        break;
-    case BadPictOp:
-        name = "BadPictOp";
-        break;
-    case BadGlyphSet:
-        name = "BadGlyphSet";
-        break;
-    case BadGlyph:
-        name = "BadGlyph";
-        break;
-    default:
-        break;
-    }
+	o = event->error_code - xfixes.error;
+	switch (o) {
+	case BadRegion:
+		name = "BadRegion";
+		break;
+	default:
+		break;
+	}
+	o = event->error_code - xdamage.error;
+	switch (o) {
+	case BadDamage:
+		name = "BadDamage";
+		break;
+	default:
+		break;
+	}
+	o = event->error_code - xrender.error;
+	switch (o) {
+	case BadPictFormat:
+		name = "BadPictFormat";
+		break;
+	case BadPicture:
+		name = "BadPicture";
+		break;
+	case BadPictOp:
+		name = "BadPictOp";
+		break;
+	case BadGlyphSet:
+		name = "BadGlyphSet";
+		break;
+	case BadGlyph:
+		name = "BadGlyph";
+		break;
+	default:
+		break;
+	}
 
-	 printf ("error %d (name: %s) request %d minor %d serial %d\n",
-	        event->error_code, name, event->request_code, event->minor_code, (int)event->serial);
+	printf("error %d (name: %s) request %d minor %d serial %d\n",
+	       event->error_code, name, event->request_code, event->minor_code, (int)event->serial);
 	return(0);
 }
 
@@ -248,10 +245,10 @@
 	float tbuf[] = { 0.0, 0.0,  1.0, 0.0,  1.0, 1.0,
 	                 0.0, 0.0,  1.0, 1.0,  0.0, 1.0
 	               };
-/*	int i;*/
+	/* int i;*/
 	int x, y;
 	int vindex, voffset, pindex;
-	int	xpos, ypos;
+	int xpos, ypos;
 
 	win->no = win_no++;  /* TODO: REMOVE */
 	win->oid = s3d_new_object();
@@ -280,26 +277,26 @@
 	voffset = 1;
 	vindex = 0;
 	pindex = 0;
-	s3d_push_vertex(win->oid, 0, 0, -1);			/* the first point */
+	s3d_push_vertex(win->oid, 0, 0, -1); /* the first point */
 
-	for (y = 0; y < win->attr.height; y+= TEXH) {	/* the first column */
+	for (y = 0; y < win->attr.height;  y += TEXH) { /* the first column */
 		ypos = (y + TEXH > win->attr.height) ? win->attr.height : y + TEXH ;
 		s3d_push_vertex(win->oid, 0, -((float)ypos) / 20, -1);
 		voffset++;
 	}
-	for (x = 0; x < win->attr.width; x+= TEXW) {	/* the first row */
+	for (x = 0; x < win->attr.width; x += TEXW) { /* the first row */
 		xpos = (x + TEXW > win->attr.width) ? win->attr.width : x + TEXW ;
 		s3d_push_vertex(win->oid, ((float)xpos) / 20, 0, -1);
 
-		for (y = 0; y < win->attr.height; y+= TEXH) {
+		for (y = 0; y < win->attr.height; y += TEXH) {
 			ypos = (y + TEXH > win->attr.height) ? win->attr.height : y + TEXH  ;
 			s3d_push_vertex(win->oid, ((float)xpos) / 20, -((float)ypos) / 20, -1);
 			s3d_push_material_a(win->oid,
-		                    0.0, 0.8, 0.0 , 1.0,
-		                    1.0, 1.0, 1.0 , 1.0,
-		                    0.0, 0.8, 0.0 , 1.0);
+			                    0.0, 0.8, 0.0 , 1.0,
+			                    1.0, 1.0, 1.0 , 1.0,
+			                    0.0, 0.8, 0.0 , 1.0);
 			s3d_push_texture(win->oid, xpos - x, ypos - y);
-			s3d_pep_material_texture(win->oid, pindex); 
+			s3d_pep_material_texture(win->oid, pindex);
 			s3d_push_polygon(win->oid, vindex, vindex + voffset, vindex + voffset + 1, pindex);
 			s3d_push_polygon(win->oid, vindex, vindex + voffset + 1, vindex + 1, pindex);
 			s3d_pep_polygon_tex_coords(win->oid, tbuf, 2);
@@ -321,10 +318,10 @@
 		return;
 	win->id = id;
 	XGetWindowAttributes(dpy, win->id, &win->attr);
-/*	XSelectInput(dpy, win->id, ExposureMask|ButtonPressMask|KeyPressMask*/
+	/* XSelectInput(dpy, win->id, ExposureMask|ButtonPressMask|KeyPressMask*/
 	XSelectInput(dpy, win->id, ExposureMask
-					|SubstructureNotifyMask | ExposureMask | StructureNotifyMask | PropertyChangeMask);
-/*	XSelectInput(dpy, win->id, ExposureMask);*/
+	             | SubstructureNotifyMask | ExposureMask | StructureNotifyMask | PropertyChangeMask);
+	/* XSelectInput(dpy, win->id, ExposureMask);*/
 	win->format = XRenderFindVisualFormat(dpy, win->attr.visual);
 
 	if (win->format != 0) {
@@ -373,22 +370,22 @@
 	texnum = 0;
 
 
-/*	if (!win->oid)
-		deco_box(win);
-*/
+	/* if (!win->oid)
+	  deco_box(win);
+	*/
 	for (xleft = 0; xleft < width ; xleft += TEXW) {
 		xright = (xleft + TEXW > width) ? width : xleft + TEXW;
 		chunk_width = xright - xleft;
 		image = XGetImage(dpy, win->id, xleft, y, chunk_width, win->attr.height, AllPlanes, ZPixmap);
-		if (!image) 
+		if (!image)
 			return;
-		bitmap = malloc( chunk_width * height * sizeof(uint32_t));
+		bitmap = malloc(chunk_width * height * sizeof(uint32_t));
 		if (!win->oid)
 			deco_box(win);
 		if (image->format == ZPixmap) {
 			printf("XImage: %dx%d, format %d (%d), bpp: %d, depth %d, pad %d\n",
-				   image->width, image->height, image->format,
-				   ZPixmap, image->bits_per_pixel, image->depth, image->bitmap_pad);
+			       image->width, image->height, image->format,
+			       ZPixmap, image->bits_per_pixel, image->depth, image->bitmap_pad);
 			rs = get_shift(image->red_mask) - 8;
 			gs = get_shift(image->green_mask) - 8;
 			bs = get_shift(image->blue_mask) - 8;
@@ -410,13 +407,13 @@
 					s = (unsigned long *)img_ptr;
 					t = (uint32_t *)bmp_ptr;
 					/*    bmp_ptr[0] = (rs > 0 ? ((*d & image->red_mask) >> rs)  : ((*d  & image->red_mask) << -rs)) ;
-						bmp_ptr[1] = (gs > 0 ? ((*d & image->green_mask) >> gs) : ((*d  & image->green_mask) << -gs)) ;
-						bmp_ptr[2] = (bs > 0 ? ((*d & image->blue_mask) >> bs)  : ((*d  & image->blue_mask) << -bs));
-						bmp_ptr[3] = 255 ;*/
+					 bmp_ptr[1] = (gs > 0 ? ((*d & image->green_mask) >> gs) : ((*d  & image->green_mask) << -gs)) ;
+					 bmp_ptr[2] = (bs > 0 ? ((*d & image->blue_mask) >> bs)  : ((*d  & image->blue_mask) << -bs));
+					 bmp_ptr[3] = 255 ;*/
 					*t = (rs > 0 ? ((*s & image->red_mask) >> rs)  : ((*s  & image->red_mask) << -rs)) |
-						 (gs > 0 ? ((*s & image->green_mask) >> gs) : ((*s  & image->green_mask) << -gs)) |
-						 (bs > 0 ? ((*s & image->blue_mask) >> bs)  : ((*s  & image->blue_mask) << -bs)) |
-						 255 << 24;
+					     (gs > 0 ? ((*s & image->green_mask) >> gs) : ((*s  & image->green_mask) << -gs)) |
+					     (bs > 0 ? ((*s & image->blue_mask) >> bs)  : ((*s  & image->blue_mask) << -bs)) |
+					     255 << 24;
 
 					bmp_ptr += sizeof(uint32_t);
 					img_ptr += bpp;
@@ -443,11 +440,11 @@
 	while (QLength(dpy)) {
 		XNextEvent(dpy, &event);
 		print_event(dpy, &event);
-		if ( event.type == xdamage.event + XDamageNotify ) {
-			XDamageNotifyEvent *e = (XDamageNotifyEvent*) &event ;
-			printf("window = %d, geometry = %d:%d (at %d:%d), area = %d:%d (at %d:%d)\n", 
-					e->drawable, e->geometry.width, e->geometry.height, e->geometry.x, e->geometry.y,
-					e->area.width, e->area.height, e->area.x, e->area.y);
+		if (event.type == xdamage.event + XDamageNotify) {
+			XDamageNotifyEvent *e = (XDamageNotifyEvent*) & event ;
+			printf("window = %d, geometry = %d:%d (at %d:%d), area = %d:%d (at %d:%d)\n",
+			       e->drawable, e->geometry.width, e->geometry.height, e->geometry.x, e->geometry.y,
+			       e->area.width, e->area.height, e->area.x, e->area.y);
 			XDamageSubtract(dpy, e->damage, None, None);
 		}
 	}
@@ -467,9 +464,9 @@
 	if (!s3d_init(&argc, &argv, "compotest")) {
 		for (scr_no = 0; scr_no < ScreenCount(dpy); scr_no++) {
 			XCompositeRedirectSubwindows(dpy, RootWindow(dpy, scr_no), CompositeRedirectAutomatic);
-/*			XCompositeRedirectSubwindows(dpy, RootWindow(dpy, scr_no), CompositeRedirectManual);*/
+			/*   XCompositeRedirectSubwindows(dpy, RootWindow(dpy, scr_no), CompositeRedirectManual);*/
 			XSelectInput(dpy, RootWindow(dpy, scr_no),
-						SubstructureNotifyMask | ExposureMask | StructureNotifyMask | PropertyChangeMask);
+			             SubstructureNotifyMask | ExposureMask | StructureNotifyMask | PropertyChangeMask);
 
 			XQueryTree(dpy, RootWindow(dpy, scr_no), &root_return, &parent_return, &children, &nchildren);
 			for (i = 0; i < (int)nchildren; i++)



From lazhur at mail.berlios.de  Sat Oct 13 20:54:19 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Sat, 13 Oct 2007 20:54:19 +0200
Subject: [S3d-svn] r725 - trunk/apps/comptest
Message-ID: <200710131854.l9DIsJDl004926@sheep.berlios.de>

Author: lazhur
Date: 2007-10-13 20:54:18 +0200 (Sat, 13 Oct 2007)
New Revision: 725

Modified:
   trunk/apps/comptest/comptest.c
Log:
comptest: Explicit convert "Drawable" to "int" for printf("%d...."


Modified: trunk/apps/comptest/comptest.c
===================================================================
--- trunk/apps/comptest/comptest.c	2007-10-13 18:54:11 UTC (rev 724)
+++ trunk/apps/comptest/comptest.c	2007-10-13 18:54:18 UTC (rev 725)
@@ -443,7 +443,7 @@
 		if (event.type == xdamage.event + XDamageNotify) {
 			XDamageNotifyEvent *e = (XDamageNotifyEvent*) & event ;
 			printf("window = %d, geometry = %d:%d (at %d:%d), area = %d:%d (at %d:%d)\n",
-			       e->drawable, e->geometry.width, e->geometry.height, e->geometry.x, e->geometry.y,
+			       (int)e->drawable, e->geometry.width, e->geometry.height, e->geometry.x, e->geometry.y,
 			       e->area.width, e->area.height, e->area.x, e->area.y);
 			XDamageSubtract(dpy, e->damage, None, None);
 		}



From lazhur at mail.berlios.de  Sat Oct 13 20:54:33 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Sat, 13 Oct 2007 20:54:33 +0200
Subject: [S3d-svn] r726 - trunk/apps/comptest
Message-ID: <200710131854.l9DIsXjU004974@sheep.berlios.de>

Author: lazhur
Date: 2007-10-13 20:54:33 +0200 (Sat, 13 Oct 2007)
New Revision: 726

Modified:
   trunk/apps/comptest/comptest.c
Log:
comptest: Read in pending damage events even when they are not already in display event queue


Modified: trunk/apps/comptest/comptest.c
===================================================================
--- trunk/apps/comptest/comptest.c	2007-10-13 18:54:18 UTC (rev 725)
+++ trunk/apps/comptest/comptest.c	2007-10-13 18:54:33 UTC (rev 726)
@@ -437,7 +437,7 @@
 void event()
 {
 	XEvent event;
-	while (QLength(dpy)) {
+	while (XPending(dpy)) {
 		XNextEvent(dpy, &event);
 		print_event(dpy, &event);
 		if (event.type == xdamage.event + XDamageNotify) {



From dotslash at mail.berlios.de  Sun Oct 14 00:03:56 2007
From: dotslash at mail.berlios.de (dotslash at BerliOS)
Date: Sun, 14 Oct 2007 00:03:56 +0200
Subject: [S3d-svn] r727 - in trunk: . apps/comptest
Message-ID: <200710132203.l9DM3up0015763@sheep.berlios.de>

Author: dotslash
Date: 2007-10-14 00:03:56 +0200 (Sun, 14 Oct 2007)
New Revision: 727

Modified:
   trunk/
   trunk/apps/comptest/comptest.c
Log:
 r2634 at kero:  dotslash | 2007-10-14 00:03:39 +0200
 - updating windows when receiving a damage



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:2604
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:2634

Modified: trunk/apps/comptest/comptest.c
===================================================================
--- trunk/apps/comptest/comptest.c	2007-10-13 18:54:33 UTC (rev 726)
+++ trunk/apps/comptest/comptest.c	2007-10-13 22:03:56 UTC (rev 727)
@@ -309,7 +309,19 @@
 	/*  push data on texture 0 position (0,0) */
 	s3d_flags_on(win->oid, S3D_OF_VISIBLE);
 }
+struct window *window_find(Window id)
+{
+	struct window *window;
+	for (window = window_head; window!=NULL; window = window->next) {
+		if (window->id == id)
+			return(window);
+	}
+	printf("not found. ;(\n");
+	return(NULL);
+	
+}
 
+
 void window_add(Display *dpy, Window id)
 {
 	struct window *win;
@@ -437,15 +449,19 @@
 void event()
 {
 	XEvent event;
+	struct window *window;
 	while (XPending(dpy)) {
 		XNextEvent(dpy, &event);
 		print_event(dpy, &event);
 		if (event.type == xdamage.event + XDamageNotify) {
-			XDamageNotifyEvent *e = (XDamageNotifyEvent*) & event ;
+			XDamageNotifyEvent *e = (XDamageNotifyEvent*) & event;
 			printf("window = %d, geometry = %d:%d (at %d:%d), area = %d:%d (at %d:%d)\n",
 			       (int)e->drawable, e->geometry.width, e->geometry.height, e->geometry.x, e->geometry.y,
 			       e->area.width, e->area.height, e->area.x, e->area.y);
 			XDamageSubtract(dpy, e->damage, None, None);
+			window = window_find(e->drawable);
+			if (window!=NULL)
+				window_update(window, e->area.x, e->area.y, e->area.width, e->area.height);
 		}
 	}
 }



From dotslash at mail.berlios.de  Sun Oct 14 00:20:21 2007
From: dotslash at mail.berlios.de (dotslash at BerliOS)
Date: Sun, 14 Oct 2007 00:20:21 +0200
Subject: [S3d-svn] r728 - in trunk: . apps/comptest
Message-ID: <200710132220.l9DMKLaU016681@sheep.berlios.de>

Author: dotslash
Date: 2007-10-14 00:20:21 +0200 (Sun, 14 Oct 2007)
New Revision: 728

Modified:
   trunk/
   trunk/apps/comptest/comptest.c
Log:
 r2636 at kero:  dotslash | 2007-10-14 00:20:15 +0200
 - limit max events per loop so the comptest-client does not seem deaf to the server



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:2634
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:2636

Modified: trunk/apps/comptest/comptest.c
===================================================================
--- trunk/apps/comptest/comptest.c	2007-10-13 22:03:56 UTC (rev 727)
+++ trunk/apps/comptest/comptest.c	2007-10-13 22:20:21 UTC (rev 728)
@@ -43,6 +43,7 @@
 #endif
 #endif
 
+#define MAXEVENTS	50		/* maximum events per loop. */
 #define TEXW 256
 #define TEXH 256
 
@@ -131,7 +132,7 @@
 		name = "Configure!!";
 	}
 
-	printf("Event: %s\n", name);
+/*	printf("Event: %s\n", name);*/
 	return(0);
 }
 
@@ -395,9 +396,9 @@
 		if (!win->oid)
 			deco_box(win);
 		if (image->format == ZPixmap) {
-			printf("XImage: %dx%d, format %d (%d), bpp: %d, depth %d, pad %d\n",
+/*			printf("XImage: %dx%d, format %d (%d), bpp: %d, depth %d, pad %d\n",
 			       image->width, image->height, image->format,
-			       ZPixmap, image->bits_per_pixel, image->depth, image->bitmap_pad);
+			       ZPixmap, image->bits_per_pixel, image->depth, image->bitmap_pad);*/
 			rs = get_shift(image->red_mask) - 8;
 			gs = get_shift(image->green_mask) - 8;
 			bs = get_shift(image->blue_mask) - 8;
@@ -407,7 +408,7 @@
 			rs = rs;
 			gs = gs - 8;
 			bs = bs - 16;
-			printf("Ximage: rgb: %d|%d|%d\n", rs, gs, bs);;
+/*			printf("Ximage: rgb: %d|%d|%d\n", rs, gs, bs);;*/
 			/*  printf("red: size %d, offset %d\n",rs,roff);
 			  printf("green: size %d, offset %d\n",gs,goff);
 			  printf("blue: size %d, offset %d\n",bs,boff);
@@ -450,14 +451,15 @@
 {
 	XEvent event;
 	struct window *window;
-	while (XPending(dpy)) {
+	int i;
+	for (i=0; i< MAXEVENTS && XPending(dpy); i++) {
 		XNextEvent(dpy, &event);
 		print_event(dpy, &event);
 		if (event.type == xdamage.event + XDamageNotify) {
 			XDamageNotifyEvent *e = (XDamageNotifyEvent*) & event;
-			printf("window = %d, geometry = %d:%d (at %d:%d), area = %d:%d (at %d:%d)\n",
+/*			printf("window = %d, geometry = %d:%d (at %d:%d), area = %d:%d (at %d:%d)\n",
 			       (int)e->drawable, e->geometry.width, e->geometry.height, e->geometry.x, e->geometry.y,
-			       e->area.width, e->area.height, e->area.x, e->area.y);
+			       e->area.width, e->area.height, e->area.x, e->area.y);*/
 			XDamageSubtract(dpy, e->damage, None, None);
 			window = window_find(e->drawable);
 			if (window!=NULL)



From dotslash at mail.berlios.de  Sun Oct 14 22:15:53 2007
From: dotslash at mail.berlios.de (dotslash at BerliOS)
Date: Sun, 14 Oct 2007 22:15:53 +0200
Subject: [S3d-svn] r729 - in trunk: . apps/comptest
Message-ID: <200710142015.l9EKFrpo025925@sheep.berlios.de>

Author: dotslash
Date: 2007-10-14 22:15:53 +0200 (Sun, 14 Oct 2007)
New Revision: 729

Modified:
   trunk/
   trunk/apps/comptest/comptest.c
Log:
 r2641 at kero:  dotslash | 2007-10-14 22:15:43 +0200
 - update window geometry when a configure notify arrives 
   (this gives us support for resizing and moving windows)
 - remember full cover updates, and do them only once in a frame



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:2636
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:2641

Modified: trunk/apps/comptest/comptest.c
===================================================================
--- trunk/apps/comptest/comptest.c	2007-10-13 22:20:21 UTC (rev 728)
+++ trunk/apps/comptest/comptest.c	2007-10-14 20:15:53 UTC (rev 729)
@@ -59,6 +59,7 @@
 	XRenderPictureAttributes  pa;
 	XRenderPictFormat    *format;
 	Picture       picture;
+	int		   already_updated;
 	int        oid;
 	int        no;
 
@@ -74,8 +75,8 @@
 
 static int     win_no = 0;    /* XXX: REMOVE */
 static struct timespec t = {
-	0, 10*1000*1000
-}; /* 10 mili seconds */
+	0, 50*1000*1000
+}; /* 50 mili seconds */
 
 int xinit();
 void window_update(struct window *win, int x, int y, int width, int height);
@@ -251,7 +252,6 @@
 	int vindex, voffset, pindex;
 	int xpos, ypos;
 
-	win->no = win_no++;  /* TODO: REMOVE */
 	win->oid = s3d_new_object();
 /*
 	for (i = 0;i < 8;i++) {
@@ -306,7 +306,7 @@
 		}
 		vindex++;
 	}
-	s3d_translate(win->oid, win->attr.x / 20, -win->attr.y / 20, 5 * win->no);
+	s3d_translate(win->oid, win->attr.x / 20, -win->attr.y / 20, 1 * win->no);
 	/*  push data on texture 0 position (0,0) */
 	s3d_flags_on(win->oid, S3D_OF_VISIBLE);
 }
@@ -317,7 +317,7 @@
 		if (window->id == id)
 			return(window);
 	}
-	printf("not found. ;(\n");
+	printf("not found (window %d). ;(\n", (int)id);
 	return(NULL);
 	
 }
@@ -331,6 +331,8 @@
 		return;
 	win->id = id;
 	XGetWindowAttributes(dpy, win->id, &win->attr);
+
+	win->no = win_no++;  
 	/* XSelectInput(dpy, win->id, ExposureMask|ButtonPressMask|KeyPressMask*/
 	XSelectInput(dpy, win->id, ExposureMask
 	             | SubstructureNotifyMask | ExposureMask | StructureNotifyMask | PropertyChangeMask);
@@ -344,7 +346,8 @@
 		win->pa.subwindow_mode = IncludeInferiors;
 		win->picture = XRenderCreatePicture(dpy, win->id, win->format, CPSubwindowMode, &win->pa);
 
-		win->oid = 0;
+		win->oid = -1;
+		win->already_updated = 0;
 
 		window_update(win, 0, 0, win->attr.width, win->attr.height);
 
@@ -359,6 +362,41 @@
 	free(win);
 }
 
+void window_update_geometry(struct window *win, int x, int y, int width, int height) 
+{
+	
+	printf("window_update_geometry()\n");
+	if (win->oid == -1) {
+		win->attr.x = x;
+		win->attr.y = y;
+		win->attr.width = width;
+		win->attr.height = height;
+
+		window_update(win, 0,0, width, height);
+		return;
+	}
+	if ((win->attr.width == width) && (win->attr.height == height)) {
+		if ((win->attr.x == x) && (win->attr.y == y)) {
+			printf("position did not change\n");
+			return;
+		} else {
+			win->attr.x = x;
+			win->attr.y = y;
+			s3d_translate(win->oid, win->attr.x / 20, -win->attr.y / 20, 1 * win->no);
+		}
+	} else {
+		win->attr.x = x;
+		win->attr.y = y;
+		win->attr.width = width;
+		win->attr.height = height;
+
+		s3d_del_object(win->oid);	/* delete the window and redraw */
+		win->oid = -1;
+		window_update(win, 0,0, width, height);
+
+	}
+}
+
 void window_update(struct window *win, int x, int y, int width, int height)
 {
 	int chunk_width, chunk_height;
@@ -382,6 +420,12 @@
 
 	texnum = 0;
 
+	if (x == 0 && y == 0 && width == win->attr.width && height == win->attr.height) {
+		if (win->already_updated) 
+			return;
+		else
+			win->already_updated = 1;
+	}
 
 	/* if (!win->oid)
 	  deco_box(win);
@@ -393,7 +437,7 @@
 		if (!image)
 			return;
 		bitmap = malloc(chunk_width * height * sizeof(uint32_t));
-		if (!win->oid)
+		if (win->oid == -1) 
 			deco_box(win);
 		if (image->format == ZPixmap) {
 /*			printf("XImage: %dx%d, format %d (%d), bpp: %d, depth %d, pad %d\n",
@@ -452,6 +496,9 @@
 	XEvent event;
 	struct window *window;
 	int i;
+	for (window = window_head; window!=NULL; window = window->next) 
+		window->already_updated = 0;
+
 	for (i=0; i< MAXEVENTS && XPending(dpy); i++) {
 		XNextEvent(dpy, &event);
 		print_event(dpy, &event);
@@ -464,6 +511,16 @@
 			window = window_find(e->drawable);
 			if (window!=NULL)
 				window_update(window, e->area.x, e->area.y, e->area.width, e->area.height);
+		} else if (event.type == ConfigureNotify) {
+			XConfigureEvent *e = &event.xconfigure; 
+			window = window_find(e->window);
+			if (window != NULL) {
+/*				printf("Configure: window = %d, geometry = %d:%d (at %d:%d)\n",
+				       (int)e->window, e->width, e->height, e->x, e->y);*/
+				window_update_geometry(window, e->x, e->y, e->width, e->height);
+			} else {
+				printf("Configure: Could not find window to configure.\n");
+			}
 		}
 	}
 }



From nichtsnutz at mail.berlios.de  Thu Oct 18 17:11:13 2007
From: nichtsnutz at mail.berlios.de (nichtsnutz at BerliOS)
Date: Thu, 18 Oct 2007 17:11:13 +0200
Subject: [S3d-svn] r730 - trunk/apps/meshs3d
Message-ID: <200710181511.l9IFBDv8028743@sheep.berlios.de>

Author: nichtsnutz
Date: 2007-10-18 17:11:12 +0200 (Thu, 18 Oct 2007)
New Revision: 730

Added:
   trunk/apps/meshs3d/testvis.c
Log:
simple test server to simulate dot draw output


Added: trunk/apps/meshs3d/testvis.c
===================================================================
--- trunk/apps/meshs3d/testvis.c	2007-10-14 20:15:53 UTC (rev 729)
+++ trunk/apps/meshs3d/testvis.c	2007-10-18 15:11:12 UTC (rev 730)
@@ -0,0 +1,221 @@
+#include <stdio.h>
+#include <sys/types.h>
+#include <sys/socket.h>
+#include <stdlib.h>
+#include <string.h>
+#include <pthread.h>
+#include <sys/socket.h>
+#include <sys/types.h>
+#include <arpa/inet.h>
+#include <unistd.h>
+#include <signal.h>
+
+#define BUFFER_SIZE 1000
+#define LINE_SIZE 100
+
+struct data {
+	int index;
+	int active;
+	char line[LINE_SIZE];
+	struct data *next;
+};
+
+struct t_data {
+	struct data *head, *end;
+};
+
+
+void list_data(struct data *head, struct data *end) {
+	struct data *tmp;
+	
+	for(tmp=head->next;tmp != end;tmp=tmp->next) {
+		printf("%d: %s | %d\n",tmp->index, tmp->line,tmp->active);
+	}
+}
+
+void rem_data( int index,struct data *head, struct data *end ) {
+	struct data *tmp, *prev=NULL;
+	
+	for(tmp=head->next;tmp != end;prev = tmp, tmp=tmp->next) {
+		if(tmp->index == index)
+			break;
+	}
+
+	if(tmp != end) {
+
+		if(prev == NULL)
+			head->next = end;
+		else if(tmp->next != end)
+			prev->next = tmp->next;
+		else
+			prev->next = end;
+		
+		printf("remove index %d\n",tmp->index);
+		free(tmp);
+	} else {
+		printf("index not found\n");
+	}
+	return;
+}
+
+void dea_data( int index,struct data *head, struct data *end ) {
+	struct data *tmp;
+	
+	for(tmp=head->next;tmp != end; tmp=tmp->next) {
+		if(tmp->index == index)
+			break;
+	}
+
+	if(tmp != end && tmp != head) {
+		tmp->active = 0;
+	}
+	return;
+}
+
+void act_data( int index,struct data *head, struct data *end ) {
+	struct data *tmp;
+	
+	for(tmp=head->next;tmp != end; tmp=tmp->next) {
+		if(tmp->index == index)
+			break;
+	}
+
+	if(tmp != end && tmp != head) {
+		tmp->active = 1;
+	}
+	return;
+}
+
+static void sig(int signr) {
+	return;
+}
+
+void *server(void *args) {
+	struct t_data *t = (struct t_data*)args;
+	int listen_fd,yes=1;
+	struct sockaddr_in sock,client;
+	struct data *tmp;
+	
+	int sock2;
+	socklen_t len;
+	
+	char buffer[2000];
+	char start[] ="digraph topology\n{\n";
+	char end[] = "}\n";
+	int index;
+
+	signal(SIGPIPE, sig);
+	
+	listen_fd = socket(PF_INET, SOCK_STREAM, 0);
+	setsockopt(listen_fd, SOL_SOCKET, SO_REUSEADDR, &yes, sizeof(int));
+
+	memset((char *) &sock, 0, sizeof(sock));
+	sock.sin_family = AF_INET;
+	sock.sin_addr.s_addr = htonl(INADDR_ANY);
+	sock.sin_port = htons(2004);
+
+	bind(listen_fd, (struct sockaddr *) &sock, sizeof(sock));
+	listen(listen_fd, 1);
+	
+	len = sizeof( client );
+		
+	while(1) {
+
+		sock2 =	accept( listen_fd, (struct sockaddr*)&client, &len);
+
+		while(1) {
+		
+			memset(buffer,0,2000);
+			strcat(buffer,start);
+			index = strlen(start);
+
+			for(tmp=t->head->next;tmp != t->end;tmp=tmp->next) {
+
+				if(!tmp->active)
+					continue;
+				strcat(&buffer[index],tmp->line );
+				index += strlen(tmp->line);
+				strcat(&buffer[index], "\n");
+				index++;
+
+			}
+
+			strcat(&buffer[index], end);
+			buffer[index+2] = 0;
+			if( send ( sock2, buffer, strlen(buffer), 0 ) < 1 )
+				break;
+
+			sleep(3);
+
+		}
+	}
+	
+	return NULL;
+}
+
+int main() {
+	char buffer[BUFFER_SIZE];
+	char *tmp_buffer;
+	struct data *head, *z, *t;
+	static int index = 0;
+	struct t_data t_dat;
+	pthread_t thread;
+	
+	head = malloc(sizeof(*head));
+	z = malloc(sizeof(*z));
+
+	head->next = z;
+
+	t_dat.head = head;
+	t_dat.end = z;
+	pthread_create (&thread, NULL, server, &t_dat);
+	pthread_detach(thread);
+	printf("\ntestivs: ");
+
+	while(fgets(buffer, BUFFER_SIZE, stdin)) {
+
+		if( (tmp_buffer = strstr(buffer, "add")) != NULL ) {
+			tmp_buffer[strlen(tmp_buffer) - 1] = 0;
+			tmp_buffer += 4;
+			t = malloc(sizeof(*t));
+			snprintf(t->line, LINE_SIZE, tmp_buffer);
+			t->index = ++index;
+			t->active = 1;
+			t->next = head->next;
+			head->next = t;
+		} else if( (tmp_buffer = strstr(buffer, "list")) != NULL ) {
+
+			list_data(head,z);
+
+		} else if( (tmp_buffer = strstr(buffer, "rem")) != NULL ) {
+
+			tmp_buffer[strlen(tmp_buffer) - 1] = 0;
+			tmp_buffer += 4;
+			rem_data( atoi(tmp_buffer),head,z);
+
+		} else if( (tmp_buffer = strstr(buffer, "dea")) != NULL ) {
+
+			tmp_buffer[strlen(tmp_buffer) - 1] = 0;
+			tmp_buffer += 4;
+			dea_data( atoi(tmp_buffer),head,z);
+
+		} else if( (tmp_buffer = strstr(buffer, "act")) != NULL ) {
+
+			tmp_buffer[strlen(tmp_buffer) - 1] = 0;
+			tmp_buffer += 4;
+			act_data( atoi(tmp_buffer),head,z);
+
+		} else if( (tmp_buffer = strstr(buffer, "quit")) != NULL ) {
+
+			break;
+
+		} else
+
+			printf("command not found\n");
+
+		printf("testivs: ");
+
+	}
+	
+	return 0;
+}



From nichtsnutz at mail.berlios.de  Thu Oct 18 17:51:11 2007
From: nichtsnutz at mail.berlios.de (nichtsnutz at BerliOS)
Date: Thu, 18 Oct 2007 17:51:11 +0200
Subject: [S3d-svn] r731 - trunk/apps/meshs3d
Message-ID: <200710181551.l9IFpBb8031364@sheep.berlios.de>

Author: nichtsnutz
Date: 2007-10-18 17:51:11 +0200 (Thu, 18 Oct 2007)
New Revision: 731

Modified:
   trunk/apps/meshs3d/main.c
   trunk/apps/meshs3d/meshs3d.h
   trunk/apps/meshs3d/olsrd1.data
   trunk/apps/meshs3d/process.c
Log:
add handling to remove nodes and connections


Modified: trunk/apps/meshs3d/main.c
===================================================================
--- trunk/apps/meshs3d/main.c	2007-10-18 15:11:12 UTC (rev 730)
+++ trunk/apps/meshs3d/main.c	2007-10-18 15:51:11 UTC (rev 731)
@@ -59,6 +59,8 @@
 	Global.obj_node_count = 0;
 	Global.node_count = 0;
 	Global.color_switch = 0;
+	Global.output_block_counter = 0;
+	Global.output_block_completed = 0;
 	Global.asp = 1.0;
 	Global.left = -1.0;
 	Global.bottom = -1.0;
@@ -105,17 +107,20 @@
 
 void handle_node()
 {
-	struct node *node;
-	struct hash_it_t *hashit;
+	struct node *node,*tmp_node;
+	struct node_con *con;
+	struct hash_it_t *hashit,*tmp_hashit=NULL;
+	int ip[2];
 
 	if (node_hash->elements == 0)
 		return;
 	hashit = NULL;
 	while (NULL != (hashit = hash_iterate(node_hash, hashit))) {
+
 		node = (struct node *) hashit->bucket->data;
+
 		if (node->node_type_modified) {
 
-
 			if (node->obj_id > 0) s3d_del_object(node->obj_id);
 			if (node->desc_id > 0) s3d_del_object(node->desc_id);
 
@@ -136,6 +141,29 @@
 			node->node_type_modified = 0;
 
 		}
+
+		if ((node->last_seen < Global.output_block_counter - 1) && (node->visible)) {
+
+			s3d_del_object(node->desc_id);
+			s3d_del_object(node->obj_id);
+			node->desc_id = -1;
+			node->obj_id = -1;
+			node->visible = 0;
+			Global.node_count--;
+			while (NULL != (tmp_hashit = hash_iterate(node_hash, tmp_hashit))) {
+				tmp_node = (struct node *) tmp_hashit->bucket->data;
+				if ( node != tmp_node && (max(node->ip, tmp_node->ip) == node->ip)) {
+					ip[0] = node->ip;
+					ip[1] = tmp_node->ip;
+					if (NULL != (con = hash_find(con_hash, ip))) {
+						s3d_del_object(con->obj_id);
+						con->obj_id = -1;
+					}
+				}
+			}
+
+		}
+
 	}
 	return;
 }
@@ -159,7 +187,6 @@
 	if (!((node->mov_vec[0] == 0) && (node->mov_vec[1] == 0) && (node->mov_vec[2] == 0)) && node->visible) {
 		distance = dirt(node->pos_vec, null_vec, tmp_mov_vec);
 		mov_add(node->mov_vec, tmp_mov_vec, distance / 100);   /* move a little bit to point zero */
-		/* mov_add(node->mov_vec, tmp_mov_vec, 1); */   /* move a little bit to point zero */
 
 		if ((distance = dist(node->mov_vec, null_vec)) > 10.0)
 			mov_add(node->pos_vec, node->mov_vec, 1.0 / ((float) distance));
@@ -360,6 +387,13 @@
 
 	}
 
+	if (Global.output_block_completed) {
+
+		Global.output_block_counter++;
+		Global.output_block_completed = 0;
+
+	}
+	
 	while ((net_result = net_main()) != 0) {
 		if (net_result == -1) {
 			printf("that's it folks\n");

Modified: trunk/apps/meshs3d/meshs3d.h
===================================================================
--- trunk/apps/meshs3d/meshs3d.h	2007-10-18 15:11:12 UTC (rev 730)
+++ trunk/apps/meshs3d/meshs3d.h	2007-10-18 15:51:11 UTC (rev 731)
@@ -82,6 +82,8 @@
 	int obj_node_count;
 	int node_count;
 	int color_switch;
+	int output_block_counter;
+	int output_block_completed;
 	float asp;
 	float bottom;
 	float left;

Modified: trunk/apps/meshs3d/olsrd1.data
===================================================================
--- trunk/apps/meshs3d/olsrd1.data	2007-10-18 15:11:12 UTC (rev 730)
+++ trunk/apps/meshs3d/olsrd1.data	2007-10-18 15:51:11 UTC (rev 731)
@@ -3,6 +3,17 @@
 "104.131.131.1" -> "104.131.0.71"[label="0.00", style=dashed];
 "104.131.131.1" -> "104.131.0.42"[label="58.29", style=solid];
 "104.131.0.42"[shape=box];
-04.192.0.40" -> "104.192.192.166"[label="2.06"];
+"104.192.0.40" -> "104.192.192.166"[label="2.06"];
+"104.65.0.42" -> "0.0.0.0/0.0.0.0"[label="HNA"];
+"0.0.0.0/0.0.0.0"[shape=diamond];
 }
 
+digraph topology
+{
+"104.131.131.1" -> "104.131.0.71"[label="0.00", style=dashed];
+"104.131.131.1" -> "104.131.0.42"[label="58.29", style=solid];
+"104.131.0.42"[shape=box];
+"104.192.0.40" -> "104.192.192.166"[label="2.06"];
+"104.65.0.42";
+}
+

Modified: trunk/apps/meshs3d/process.c
===================================================================
--- trunk/apps/meshs3d/process.c	2007-10-18 15:11:12 UTC (rev 730)
+++ trunk/apps/meshs3d/process.c	2007-10-18 15:51:11 UTC (rev 731)
@@ -147,6 +147,18 @@
 		hash_add(con_hash, con);
 	}
 
+	if(con->obj_id == -1) {
+		con->obj_id = s3d_new_object();
+		s3d_push_material(con->obj_id,
+			1.0, 1.0, 1.0,
+      			1.0, 1.0, 1.0,
+      			1.0, 1.0, 1.0);
+		s3d_push_vertex(con->obj_id, 0, 0, 0);
+		s3d_push_vertex(con->obj_id, 0, 0, 0);
+		s3d_push_line(con->obj_id, 0, 1, 0);
+		s3d_flags_on(con->obj_id, S3D_OF_VISIBLE);
+	}
+
 	if (con->ip[0] == ip1) {
 		con->etx1 = etx;
 		con->etx1_sqrt = sqrt(etx);
@@ -198,6 +210,13 @@
 		hash_add(node_hash, orig_node);
 		Global.node_count++;
 	}
+
+	if(!orig_node->visible) {
+		orig_node->visible = 1;
+		orig_node->node_type_modified = 1;
+		Global.node_count++;
+	}
+	orig_node->last_seen = Global.output_block_counter;
 	return(orig_node);
 }
 
@@ -326,6 +345,8 @@
 
 		} else if (((*lbuf_ptr) == '}') && ((*(lbuf_ptr + 1)) == '\n')) {
 
+			Global.output_block_completed = 1;
+
 		}
 
 		lbuf_ptr++;



From nichtsnutz at mail.berlios.de  Thu Oct 18 18:16:55 2007
From: nichtsnutz at mail.berlios.de (nichtsnutz at BerliOS)
Date: Thu, 18 Oct 2007 18:16:55 +0200
Subject: [S3d-svn] r732 - trunk/apps/meshs3d
Message-ID: <200710181616.l9IGGtTa000183@sheep.berlios.de>

Author: nichtsnutz
Date: 2007-10-18 18:16:55 +0200 (Thu, 18 Oct 2007)
New Revision: 732

Modified:
   trunk/apps/meshs3d/main.c
   trunk/apps/meshs3d/meshs3d.h
Log:
rotate description


Modified: trunk/apps/meshs3d/main.c
===================================================================
--- trunk/apps/meshs3d/main.c	2007-10-18 15:51:11 UTC (rev 731)
+++ trunk/apps/meshs3d/main.c	2007-10-18 16:16:55 UTC (rev 732)
@@ -111,7 +111,9 @@
 	struct node_con *con;
 	struct hash_it_t *hashit,*tmp_hashit=NULL;
 	int ip[2];
-
+	float angle, angle_rad;
+	float tmp_mov_vec[3], desc_norm_vec[3] = {0, 0, -1};
+	
 	if (node_hash->elements == 0)
 		return;
 	hashit = NULL;
@@ -164,6 +166,28 @@
 
 		}
 
+		if(node->visible) {
+
+			/* rotate node description so that they are always readable */
+			tmp_mov_vec[0] = Global.cam_position[0][0] - node->pos_vec[0];
+			tmp_mov_vec[1] = 0;   /* we are not interested in the y value */
+			tmp_mov_vec[2] = Global.cam_position[0][2] - node->pos_vec[2];
+
+			angle = s3d_vector_angle(desc_norm_vec, tmp_mov_vec);
+
+			/* take care of inverse cosinus */
+			if (tmp_mov_vec[0] > 0) {
+				angle_rad = 90.0 / M_PI - angle;
+				angle = 180 - (180.0 / M_PI * angle);
+			} else {
+				angle_rad = 90.0 / M_PI + angle;
+				angle = 180 + (180.0 / M_PI * angle);
+			}
+
+			s3d_rotate(node->desc_id, 0, angle , 0);
+			s3d_translate(node->desc_id, -cos(angle_rad)*node->desc_length / 2 , -1.5, sin(angle_rad)*node->desc_length / 2);
+		}
+
 	}
 	return;
 }
@@ -412,7 +436,13 @@
 	s3dw_object_info(hrmz);
 
 	if (inf->object == 0) {
-	
+		Global.cam_position[0][0] = inf->trans_x;
+		Global.cam_position[0][1] = inf->trans_y;
+		Global.cam_position[0][2] = inf->trans_z;
+		Global.cam_position[1][0] = inf->rot_x;
+		Global.cam_position[1][1] = inf->rot_y;
+		Global.cam_position[1][2] = inf->rot_z;
+		
 		Global.asp = inf->scale;
 
 		if ( Global.asp > 1.0) {

Modified: trunk/apps/meshs3d/meshs3d.h
===================================================================
--- trunk/apps/meshs3d/meshs3d.h	2007-10-18 15:51:11 UTC (rev 731)
+++ trunk/apps/meshs3d/meshs3d.h	2007-10-18 16:16:55 UTC (rev 732)
@@ -87,6 +87,7 @@
 	float asp;
 	float bottom;
 	float left;
+	float cam_position[2][3];
 };
 
 extern char lbuf[MAXLINESIZE];



From nichtsnutz at mail.berlios.de  Thu Oct 18 18:27:04 2007
From: nichtsnutz at mail.berlios.de (nichtsnutz at BerliOS)
Date: Thu, 18 Oct 2007 18:27:04 +0200
Subject: [S3d-svn] r733 - trunk/apps/meshs3d
Message-ID: <200710181627.l9IGR4WR000708@sheep.berlios.de>

Author: nichtsnutz
Date: 2007-10-18 18:27:04 +0200 (Thu, 18 Oct 2007)
New Revision: 733

Modified:
   trunk/apps/meshs3d/testvis.c
Log:
fix delete data


Modified: trunk/apps/meshs3d/testvis.c
===================================================================
--- trunk/apps/meshs3d/testvis.c	2007-10-18 16:16:55 UTC (rev 732)
+++ trunk/apps/meshs3d/testvis.c	2007-10-18 16:27:04 UTC (rev 733)
@@ -34,7 +34,7 @@
 }
 
 void rem_data( int index,struct data *head, struct data *end ) {
-	struct data *tmp, *prev=NULL;
+	struct data *tmp, *prev=head;
 	
 	for(tmp=head->next;tmp != end;prev = tmp, tmp=tmp->next) {
 		if(tmp->index == index)
@@ -43,12 +43,7 @@
 
 	if(tmp != end) {
 
-		if(prev == NULL)
-			head->next = end;
-		else if(tmp->next != end)
-			prev->next = tmp->next;
-		else
-			prev->next = end;
+		prev->next = tmp->next;
 		
 		printf("remove index %d\n",tmp->index);
 		free(tmp);



From nichtsnutz at mail.berlios.de  Thu Oct 18 19:02:47 2007
From: nichtsnutz at mail.berlios.de (nichtsnutz at BerliOS)
Date: Thu, 18 Oct 2007 19:02:47 +0200
Subject: [S3d-svn] r734 - trunk/apps/meshs3d
Message-ID: <200710181702.l9IH2lK7015713@sheep.berlios.de>

Author: nichtsnutz
Date: 2007-10-18 19:02:46 +0200 (Thu, 18 Oct 2007)
New Revision: 734

Modified:
   trunk/apps/meshs3d/process.c
Log:
handle hna nodes


Modified: trunk/apps/meshs3d/process.c
===================================================================
--- trunk/apps/meshs3d/process.c	2007-10-18 16:27:04 UTC (rev 733)
+++ trunk/apps/meshs3d/process.c	2007-10-18 17:02:46 UTC (rev 734)
@@ -161,10 +161,16 @@
 
 	if (con->ip[0] == ip1) {
 		con->etx1 = etx;
-		con->etx1_sqrt = sqrt(etx);
+		if(etx != -1000.00)
+			con->etx1_sqrt = sqrt(etx);
+		else
+			con->etx1_sqrt = sqrt(2.0);
 	} else {
 		con->etx2 = etx;
-		con->etx2_sqrt = sqrt(etx);
+		if(etx != -1000.00)
+			con->etx2_sqrt = sqrt(etx);
+		else
+			con->etx2_sqrt = sqrt(2.0);
 	}
 
 
@@ -278,7 +284,12 @@
 				if (strncmp(etx, "HNA", NAMEMAX) == 0) {
 				
 					if (strncmp(con_to, "0.0.0.0/0.0.0.0", NAMEMAX) == 0) {
-					
+
+						if (inet_pton(AF_INET, con_from, &int_con_from) < 1) {
+							printf("%s is not a valid ip address\n", con_from);
+							continue;
+						}
+
 						tmp_node = handle_mesh_node(int_con_from, con_from);
 
 						if (tmp_node->node_type != 1) {
@@ -299,6 +310,18 @@
 							strcpy(tmp_char, hna_name);
 						}
 
+						tmp_char--;
+						tmp_char[0] = 0;
+						if (inet_pton(AF_INET, con_from, &int_con_from) < 1) {
+							printf("%s is not a valid ip address\n", con_from);
+							continue;
+						}
+						if (inet_pton(AF_INET, hna_node, &int_con_to) < 1) {
+							printf("%s is not a valid ip address\n", hna_node);
+							continue;
+						}
+						tmp_char[0] = '/';
+
 						handle_mesh_node(int_con_from, con_from);
 						tmp_node = handle_mesh_node(int_con_to, hna_node);
 
@@ -310,7 +333,7 @@
 
 						}
 						
-						handle_con(int_con_from, int_con_to, -1000.00);
+						handle_con(int_con_from, int_con_to, -1000);
 					
 					}
 



From nichtsnutz at mail.berlios.de  Thu Oct 18 19:09:22 2007
From: nichtsnutz at mail.berlios.de (nichtsnutz at BerliOS)
Date: Thu, 18 Oct 2007 19:09:22 +0200
Subject: [S3d-svn] r735 - trunk/apps/meshs3d
Message-ID: <200710181709.l9IH9M0s022344@sheep.berlios.de>

Author: nichtsnutz
Date: 2007-10-18 19:09:22 +0200 (Thu, 18 Oct 2007)
New Revision: 735

Added:
   trunk/apps/meshs3d/testvis.README
Log:
add little readme vor testvis


Added: trunk/apps/meshs3d/testvis.README
===================================================================
--- trunk/apps/meshs3d/testvis.README	2007-10-18 17:02:46 UTC (rev 734)
+++ trunk/apps/meshs3d/testvis.README	2007-10-18 17:09:22 UTC (rev 735)
@@ -0,0 +1,25 @@
+handle only one connected client
+
+usage:
+
+add a dot draw line:
+
+testivs: add "104.65.0.42" -> "104.0.7.254"[label="4.03"];
+
+list lines (output index:line | active) :
+
+testivs: list
+1: "104.65.0.42" -> "104.0.7.254"[label="4.03"]; | 1
+
+remove line with index 1:
+testvis: rem 1
+
+deactive output of line with index 1:
+testvis: dea 1
+
+activate output of line with index 1:
+testvis: act 1
+
+quit testvis:
+testvis: quit
+



From lazhur at mail.berlios.de  Fri Oct 19 01:52:44 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 01:52:44 +0200
Subject: [S3d-svn] r736 - trunk/libs3d
Message-ID: <200710182352.l9INqiWl029069@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 01:52:42 +0200 (Fri, 19 Oct 2007)
New Revision: 736

Modified:
   trunk/libs3d/event.c
   trunk/libs3d/freetype.c
   trunk/libs3d/io.c
   trunk/libs3d/network.c
   trunk/libs3d/object_queue.c
   trunk/libs3d/proto_out.c
   trunk/libs3d/sei_construct.c
   trunk/libs3d/sei_misc.c
   trunk/libs3d/sei_monotone.c
   trunk/libs3d/sei_tri.c
   trunk/libs3d/shm.c
   trunk/libs3d/tcp.c
Log:
libs3d: Convert to ANSI function declarations


Modified: trunk/libs3d/event.c
===================================================================
--- trunk/libs3d/event.c	2007-10-18 17:09:22 UTC (rev 735)
+++ trunk/libs3d/event.c	2007-10-18 23:52:42 UTC (rev 736)
@@ -56,7 +56,7 @@
 	} else
 		s3d_stack = newevt;
 }
-struct s3d_evt *s3d_pop_event() {
+struct s3d_evt *s3d_pop_event(void) {
 	struct s3d_evt *ret;
 	if ((ret = s3d_stack) != NULL)
 		s3d_stack = s3d_stack->next;
@@ -94,7 +94,7 @@
 	return(-1);
 }
 /*  this function checks the stack for callbacks. */
-void s3d_process_stack()
+void s3d_process_stack(void)
 {
 	struct s3d_evt *p;
 	s3d_cb cb;

Modified: trunk/libs3d/freetype.c
===================================================================
--- trunk/libs3d/freetype.c	2007-10-18 17:09:22 UTC (rev 735)
+++ trunk/libs3d/freetype.c	2007-10-18 23:52:42 UTC (rev 736)
@@ -62,7 +62,7 @@
 
 
 /*  initialize truetype and tess_buf ... */
-int s3d_ft_init()
+int s3d_ft_init(void)
 {
 	int error = FT_Init_FreeType(&library);
 	int i;
@@ -78,7 +78,7 @@
 	return(0);
 }
 
-int s3d_ft_load_font()
+int s3d_ft_load_font(void)
 {
 	FT_Error error;
 	if ((memory_font == NULL) || (memory_font_size == 0)) {
@@ -96,7 +96,7 @@
 	return(0);
 }
 
-int _s3d_clear_tessbuf()
+int _s3d_clear_tessbuf(void)
 {
 	int i;
 
@@ -401,7 +401,7 @@
 	return(xoff);
 
 }
-int s3d_ft_quit()
+int s3d_ft_quit(void)
 {
 	_s3d_clear_tessbuf();
 	FT_Done_FreeType(library);

Modified: trunk/libs3d/io.c
===================================================================
--- trunk/libs3d/io.c	2007-10-18 17:09:22 UTC (rev 735)
+++ trunk/libs3d/io.c	2007-10-18 23:52:42 UTC (rev 736)
@@ -66,7 +66,7 @@
 }
 
 #endif
-void s3d_usage()
+void s3d_usage(void)
 {
 	printf("s3d-parameters:\n");
 	printf(" --s3d-url <url>: skip S3D enviroment and connect to this url\n");
@@ -168,7 +168,7 @@
 	return(-1);
 }
 /*  shuts down the socket, clearing the stack */
-int s3d_quit()
+int s3d_quit(void)
 {
 	struct s3d_evt *ret;
 	if (con_type != CON_NULL && _s3d_ready) {

Modified: trunk/libs3d/network.c
===================================================================
--- trunk/libs3d/network.c	2007-10-18 17:09:22 UTC (rev 735)
+++ trunk/libs3d/network.c	2007-10-18 23:52:42 UTC (rev 736)
@@ -34,7 +34,7 @@
 #endif
 int con_type = CON_NULL;
 #ifdef TCP
-static int _s3d_net_receive();
+static int _s3d_net_receive(void);
 #endif
 
 int net_send(u_int8_t opcode, char *buf, u_int16_t length)
@@ -63,13 +63,13 @@
 }
 /* handler for socket based connection types */
 #ifdef TCP
-int _s3d_net_receive()
+int _s3d_net_receive(void)
 {
 	return(_s3d_tcp_net_receive());
 	return(0);
 }
 #endif
-int s3d_net_check()
+int s3d_net_check(void)
 {
 	switch (con_type) {
 #ifdef TCP

Modified: trunk/libs3d/object_queue.c
===================================================================
--- trunk/libs3d/object_queue.c	2007-10-18 17:09:22 UTC (rev 735)
+++ trunk/libs3d/object_queue.c	2007-10-18 23:52:42 UTC (rev 736)
@@ -49,7 +49,7 @@
 	0, 10*1000
 }; /* 10 micro seconds */
 /*  initializes the object queue */
-int _queue_init()
+int _queue_init(void)
 {
 	int i;
 	queue_size = 1;
@@ -62,7 +62,7 @@
 	return(0);
 }
 /*  checks the queue empty slots and requests new ones if needed */
-int _queue_fill()
+int _queue_fill(void)
 {
 	int i;
 	for (i = 0;i < queue_size;i++)
@@ -92,7 +92,7 @@
 	return(0);
 }
 /*  an object is requested!! give one out: */
-unsigned int _queue_want_object()
+unsigned int _queue_want_object(void)
 {
 	unsigned int ret;
 	int i, j;
@@ -121,7 +121,7 @@
 	return(-1);
 }
 /*  cleans up */
-int _queue_quit()
+int _queue_quit(void)
 {
 	if (queue != NULL) {
 		free(queue);

Modified: trunk/libs3d/proto_out.c
===================================================================
--- trunk/libs3d/proto_out.c	2007-10-18 17:09:22 UTC (rev 735)
+++ trunk/libs3d/proto_out.c	2007-10-18 23:52:42 UTC (rev 736)
@@ -38,7 +38,7 @@
 
 #define MF_LEN 65530  /*  maximum fragmentation length */
 /*  creates a new object */
-int s3d_new_object()
+int s3d_new_object(void)
 {
 	int oid;
 

Modified: trunk/libs3d/sei_construct.c
===================================================================
--- trunk/libs3d/sei_construct.c	2007-10-18 17:09:22 UTC (rev 735)
+++ trunk/libs3d/sei_construct.c	2007-10-18 23:52:42 UTC (rev 736)
@@ -50,7 +50,7 @@
 static int tr_idx;
 
 /* Return a new node to be added into the query tree */
-static int newnode()
+static int newnode(void)
 {
 	if (q_idx < QSIZE)
 		return q_idx++;
@@ -61,7 +61,7 @@
 }
 
 /* Return a free trapezoid */
-static int newtrap()
+static int newtrap(void)
 {
 	if (tr_idx < TRSIZE) {
 		tr[tr_idx].lseg = -1;
@@ -76,10 +76,7 @@
 
 
 /* Return the maximum of the two points into the yval structure */
-static int _max(yval, v0, v1)
-point_t *yval;
-point_t *v0;
-point_t *v1;
+static int _max(point_t *yval, point_t *v0, point_t *v1)
 {
 	if (v0->y > v1->y + C_EPS)
 		*yval = *v0;
@@ -96,10 +93,7 @@
 
 
 /* Return the minimum of the two points into the yval structure */
-static int _min(yval, v0, v1)
-point_t *yval;
-point_t *v0;
-point_t *v1;
+static int _min(point_t *yval, point_t *v0, point_t *v1)
 {
 	if (v0->y < v1->y - C_EPS)
 		*yval = *v0;
@@ -115,9 +109,7 @@
 }
 
 
-int _greater_than(v0, v1)
-point_t *v0;
-point_t *v1;
+int _greater_than(point_t *v0, point_t *v1)
 {
 	if (v0->y > v1->y + C_EPS)
 		return TRUE;
@@ -128,16 +120,12 @@
 }
 
 
-int _equal_to(v0, v1)
-point_t *v0;
-point_t *v1;
+int _equal_to(point_t *v0, point_t *v1)
 {
 	return (FP_EQUAL(v0->y, v1->y) && FP_EQUAL(v0->x, v1->x));
 }
 
-int _greater_than_equal_to(v0, v1)
-point_t *v0;
-point_t *v1;
+int _greater_than_equal_to(point_t *v0, point_t *v1)
 {
 	if (v0->y > v1->y + C_EPS)
 		return TRUE;
@@ -147,9 +135,7 @@
 		return (v0->x >= v1->x);
 }
 
-int _less_than(v0, v1)
-point_t *v0;
-point_t *v1;
+int _less_than(point_t *v0, point_t *v1)
 {
 	if (v0->y < v1->y - C_EPS)
 		return TRUE;
@@ -173,8 +159,7 @@
  *                3
  */
 
-static int init_query_structure(segnum)
-int segnum;
+static int init_query_structure(int segnum)
 {
 	int i1, i2, i3, i4, i5, i6, i7, root;
 	int t1, t2, t3, t4;
@@ -255,9 +240,7 @@
  * have the same y--cood, etc.
  */
 
-static int is_left_of(segnum, v)
-int segnum;
-point_t *v;
+static int is_left_of(int segnum, point_t *v)
 {
 	segment_t *s = &seg[segnum];
 	double area;
@@ -302,9 +285,7 @@
 /* already inserted into the segment tree. Use the simple test of */
 /* whether the segment which shares this endpoint is already inserted */
 
-static int inserted(segnum, whichpt)
-int segnum;
-int whichpt;
+static int inserted(int segnum, int whichpt)
 {
 	if (whichpt == FIRSTPT)
 		return seg[seg[segnum].prev].is_inserted;
@@ -316,10 +297,7 @@
  * point v lie in. The return value is the trapezoid number.
  */
 
-int locate_endpoint(v, vo, r)
-point_t *v;
-point_t *vo;
-int r;
+int locate_endpoint(point_t *v, point_t *vo, int r)
 {
 	node_t *rptr = &qs[r];
 
@@ -373,11 +351,7 @@
  * divided because of its insertion
  */
 
-static int merge_trapezoids(segnum, tfirst, tlast, side)
-int segnum;
-int tfirst;
-int tlast;
-int side;
+static int merge_trapezoids(int segnum, int tfirst, int tlast, int side)
 {
 	int t, tnext, cond;
 	int ptnext;
@@ -442,8 +416,7 @@
  * the  lower trapezoid dividing all the trapezoids in between .
  */
 
-static int add_segment(segnum)
-int segnum;
+static int add_segment(int segnum)
 {
 	segment_t s;
 	int tu, tl, sk, tfirst, tlast;
@@ -937,8 +910,7 @@
  * This is done to speed up the location-query for the endpoint when
  * the segment is inserted into the trapezoidation subsequently
  */
-static int find_new_roots(segnum)
-int segnum;
+static int find_new_roots(int segnum)
 {
 	segment_t *s = &seg[segnum];
 
@@ -955,8 +927,7 @@
 
 
 /* Main routine to perform trapezoidation */
-int construct_trapezoids(nseg)
-int nseg;
+int construct_trapezoids(int nseg)
 {
 	register int i;
 	int root, h;

Modified: trunk/libs3d/sei_misc.c
===================================================================
--- trunk/libs3d/sei_misc.c	2007-10-18 17:09:22 UTC (rev 735)
+++ trunk/libs3d/sei_misc.c	2007-10-18 23:52:42 UTC (rev 736)
@@ -50,8 +50,7 @@
 }
 
 /* Generate a random permutation of the segments 1..n */
-int generate_random_ordering(n)
-int n;
+int generate_random_ordering(int n)
 {
 	struct timeval tval;
 	register int i;
@@ -77,15 +76,14 @@
 
 /* Return the next segment in the generated random ordering of all the */
 /* segments in S */
-int choose_segment()
+int choose_segment(void)
 {
 	errds(VLOW, "sei:choose_segment()", "%d", permute[choose_idx]);
 	return permute[choose_idx++];
 }
 
 /* Get log*n for given n */
-int math_logstar_n(n)
-int n;
+int math_logstar_n(int n)
 {
 	register int i;
 	double v;
@@ -97,9 +95,7 @@
 }
 
 
-int math_N(n, h)
-int n;
-int h;
+int math_N(int n, int h)
 {
 	register int i;
 	double v;

Modified: trunk/libs3d/sei_monotone.c
===================================================================
--- trunk/libs3d/sei_monotone.c	2007-10-18 17:09:22 UTC (rev 735)
+++ trunk/libs3d/sei_monotone.c	2007-10-18 23:52:42 UTC (rev 736)
@@ -65,8 +65,7 @@
 static int traverse_polygon(int, int, int, int);
 
 /* Function returns TRUE if the trapezoid lies inside the polygon */
-static int inside_polygon(t)
-trap_t *t;
+static int inside_polygon(trap_t *t)
 {
 	int rseg = t->rseg;
 
@@ -85,23 +84,20 @@
 
 
 /* return a new mon structure from the table */
-static int newmon()
+static int newmon(void)
 {
 	return ++mon_idx;
 }
 
 
 /* return a new chain element from the table */
-static int new_chain_element()
+static int new_chain_element(void)
 {
 	return ++chain_idx;
 }
 
 
-static double get_angle(vp0, vpnext, vp1)
-point_t *vp0;
-point_t *vpnext;
-point_t *vp1;
+static double get_angle(point_t *vp0, point_t *vpnext, point_t *vp1)
 {
 	point_t v0, v1;
 
@@ -120,11 +116,7 @@
 
 /* (v0, v1) is the new diagonal to be added to the polygon. Find which */
 /* chain to use and return the positions of v0 and v1 in p and q */
-static int get_vertex_positions(v0, v1, ip, iq)
-int v0;
-int v1;
-int *ip;
-int *iq;
+static int get_vertex_positions(int v0, int v1, int *ip, int *iq)
 {
 	vertexchain_t *vp0, *vp1;
 	register int i;
@@ -176,10 +168,7 @@
  * the current monotone polygon mcur. Split the current polygon into
  * two polygons using the diagonal (v0, v1)
  */
-static int make_new_monotone_poly(mcur, v0, v1)
-int mcur;
-int v0;
-int v1;
+static int make_new_monotone_poly(int mcur, int v0, int v1)
 {
 	int p, q, ip, iq;
 	int mnew = newmon();
@@ -238,8 +227,7 @@
  * the polygon.
  */
 
-int monotonate_trapezoids(n)
-int n;
+int monotonate_trapezoids(int n)
 {
 	register int i;
 	int tr_start;
@@ -309,11 +297,7 @@
 
 
 /* recursively visit all the trapezoids */
-static int traverse_polygon(mcur, trnum, from, dir)
-int mcur;
-int trnum;
-int from;
-int dir;
+static int traverse_polygon(int mcur, int trnum, int from, int dir)
 {
 	trap_t *t = &tr[trnum];
 	int mnew;
@@ -541,10 +525,7 @@
 /* triangulation. */
 /* Take care not to triangulate duplicate monotone polygons */
 
-int triangulate_monotone_polygons(nvert, nmonpoly, op)
-int nvert;
-int nmonpoly;
-int op[][3];
+int triangulate_monotone_polygons(int nvert, int nmonpoly, int op[][3])
 {
 	register int i;
 	point_t ymax, ymin;
@@ -608,11 +589,7 @@
  * polygon in O(n) time.
  * Joseph O-Rourke, Computational Geometry in C.
  */
-static int triangulate_single_polygon(nvert, posmax, side, op)
-int nvert;
-int posmax;
-int side;
-int op[][3];
+static int triangulate_single_polygon(int nvert, int posmax, int side, int op[][3])
 {
 	register int v;
 	int rc[SEGSIZE], ri = 0; /* reflex chain */

Modified: trunk/libs3d/sei_tri.c
===================================================================
--- trunk/libs3d/sei_tri.c	2007-10-18 17:09:22 UTC (rev 735)
+++ trunk/libs3d/sei_tri.c	2007-10-18 23:52:42 UTC (rev 736)
@@ -42,8 +42,7 @@
 #include <string.h> /* memset() */
 
 
-static int initialise(n)
-int n;
+static int initialise(int n)
 {
 	register int i;
 
@@ -78,11 +77,7 @@
  */
 
 
-int sei_triangulate_polygon(ncontours, cntr, vertices, triangles)
-int ncontours;
-int cntr[];
-double(*vertices)[2];
-int (*triangles)[3];
+int sei_triangulate_polygon(int ncontours, int cntr[], double(*vertices)[2], int (*triangles)[3])
 {
 	register int i;
 	int nmonpoly, ccount, npoints, genus;
@@ -141,8 +136,7 @@
  * on the boundary is not consistent!!!
  */
 
-int is_point_inside_polygon(vertex)
-double vertex[2];
+int is_point_inside_polygon(double vertex[2])
 {
 	point_t v;
 	int trnum, rseg;

Modified: trunk/libs3d/shm.c
===================================================================
--- trunk/libs3d/shm.c	2007-10-18 17:09:22 UTC (rev 735)
+++ trunk/libs3d/shm.c	2007-10-18 23:52:42 UTC (rev 736)
@@ -112,7 +112,7 @@
 	}
 	return(0);
 }
-int _shm_quit()
+int _shm_quit(void)
 {
 	/* detach from the segment: */
 	if (shmdt(data_in) == -1) {
@@ -166,7 +166,7 @@
 	}
 	return(s - no_left);
 }
-int _shm_net_receive()
+int _shm_net_receive(void)
 {
 	int      found = 0;
 	char     opcode, *buf;

Modified: trunk/libs3d/tcp.c
===================================================================
--- trunk/libs3d/tcp.c	2007-10-18 17:09:22 UTC (rev 735)
+++ trunk/libs3d/tcp.c	2007-10-18 23:52:42 UTC (rev 736)
@@ -107,7 +107,7 @@
 	s3dprintf(MED, "connection to %s:%d established", sv, pn);
 	return(0);
 }
-int _tcp_quit()
+int _tcp_quit(void)
 {
 	if (s3d_socket) {
 		s3dprintf(MED, "closing socket %d", s3d_socket);
@@ -141,7 +141,7 @@
 	}
 	return(s - no_left);
 }
-int _s3d_tcp_net_receive()
+int _s3d_tcp_net_receive(void)
 {
 	fd_set     fs_proc;   /*  filedescriptor set for listening port(s) */
 	struct timeval   tv;   /*  time structure */



From lazhur at mail.berlios.de  Fri Oct 19 01:52:54 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 01:52:54 +0200
Subject: [S3d-svn] r737 - trunk/apps/comptest
Message-ID: <200710182352.l9INqsC0029105@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 01:52:54 +0200 (Fri, 19 Oct 2007)
New Revision: 737

Modified:
   trunk/apps/comptest/comptest.c
Log:
comptest: Convert to ANSI function declarations


Modified: trunk/apps/comptest/comptest.c
===================================================================
--- trunk/apps/comptest/comptest.c	2007-10-18 23:52:42 UTC (rev 736)
+++ trunk/apps/comptest/comptest.c	2007-10-18 23:52:54 UTC (rev 737)
@@ -83,7 +83,7 @@
 static int print_event(Display *dpy, XEvent *event);
 void event();
 
-void mainloop()
+void mainloop(void)
 {
 	event();
 	nanosleep(&t, NULL);
@@ -186,7 +186,7 @@
 }
 
 
-int xinit()
+int xinit(void)
 {
 	dpy = XOpenDisplay(display);
 	if (!dpy) {
@@ -491,7 +491,7 @@
 }
 
 
-void event()
+void event(void)
 {
 	XEvent event;
 	struct window *window;



From lazhur at mail.berlios.de  Fri Oct 19 01:53:10 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 01:53:10 +0200
Subject: [S3d-svn] r738 - trunk/apps/dot_mcp
Message-ID: <200710182353.l9INrA4N029147@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 01:53:09 +0200 (Fri, 19 Oct 2007)
New Revision: 738

Modified:
   trunk/apps/dot_mcp/main.c
   trunk/apps/dot_mcp/menu.c
Log:
dot_mcp: Convert to ANSI function declarations


Modified: trunk/apps/dot_mcp/main.c
===================================================================
--- trunk/apps/dot_mcp/main.c	2007-10-18 23:52:54 UTC (rev 737)
+++ trunk/apps/dot_mcp/main.c	2007-10-18 23:53:09 UTC (rev 738)
@@ -71,7 +71,7 @@
 
 #define SIDES 60
 #define RINGS 60
-int greentorus()
+int greentorus(void)
 {
 	int o, i, j;
 	float R, r, a;
@@ -128,6 +128,7 @@
 	s3d_flags_on(o, S3D_OF_VISIBLE);
 	return(o);
 }
+
 void set_focus(struct app *a)
 {
 	if (focus != a)
@@ -193,6 +194,7 @@
 	n_app += 1;
 	return(0);
 }
+
 void *find_app(int oid)
 {
 	struct app *a = apps;
@@ -203,6 +205,7 @@
 	}
 	return(a);
 }
+
 void *del_app(int oid)
 {
 	struct app *prev = NULL, *a = apps;
@@ -232,12 +235,14 @@
 	}
 	return(a);
 }
-int stop()
+
+int stop(void)
 {
 	s3d_quit();
 	return(0);
 }
-void place_apps()
+
+void place_apps(void)
 {
 	struct app *a = apps;
 	int j = 0;
@@ -270,6 +275,7 @@
 	xa = s3d_vector_angle(v, u);
 	s3d_rotate(menu, 0 , 30, 0);
 }
+
 int mcp_object(struct s3d_evt *hrmz)
 {
 	struct mcp_object *mo;
@@ -303,6 +309,7 @@
 	}
 	return(0);
 }
+
 void app_init(struct app *a)
 {
 	printf("building some window decorations on %d ['%s']\n", a->oid, a->name);
@@ -339,6 +346,7 @@
 	 else*/
 	place_apps();
 }
+
 int mcp_del_object(struct s3d_evt *hrmz)
 {
 	struct mcp_object *mo;
@@ -346,6 +354,7 @@
 	del_app(mo->object);
 	return(0);
 }
+
 int object_click(struct s3d_evt *hrmz)
 {
 	struct app *a;
@@ -382,6 +391,7 @@
 	menu_click(oid);
 	return(0);
 }
+
 int object_info(struct s3d_evt *hrmz)
 {
 	struct s3d_obj_info *inf;
@@ -409,7 +419,8 @@
 	}
 	return(0);
 }
-void mainloop()
+
+void mainloop(void)
 {
 	struct app *a;
 	float al, r;
@@ -468,6 +479,7 @@
 	}
 	return(0);
 }
+
 int keyup(struct s3d_evt *event)
 {
 	struct s3d_key_event *keys = (struct s3d_key_event *)event->buf;

Modified: trunk/apps/dot_mcp/menu.c
===================================================================
--- trunk/apps/dot_mcp/menu.c	2007-10-18 23:52:54 UTC (rev 737)
+++ trunk/apps/dot_mcp/menu.c	2007-10-18 23:53:09 UTC (rev 738)
@@ -33,12 +33,14 @@
 	char *icon, *name, *path;
 	int icon_oid, str_oid;
 };
+
 static int go = -1;
 static int act;
 static struct menu_entry menu[] = {
 	{"objs/comp.3ds", "terminal", "s3dvt",    0, 0
 	}, {"objs/comp.3ds", "olsrs3d", "olsrs3d",    0, 0}, {"objs/comp.3ds", "s3d_x11gate", "s3d_x11gate",  0, 0}, {"objs/comp.3ds", "filebrowser", "filebrowser",  0, 0}, {"objs/comp.3ds", "logout", "LOGOUT",     0, 0},
 };
+
 void menu_click(int oid)
 {
 	unsigned int i;
@@ -74,7 +76,8 @@
 		}
 	}
 }
-int menu_init()
+
+int menu_init(void)
 {
 	unsigned int i;
 	int menu_o;
@@ -97,5 +100,3 @@
 	}
 	return(menu_o);
 }
-
-



From lazhur at mail.berlios.de  Fri Oct 19 01:53:29 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 01:53:29 +0200
Subject: [S3d-svn] r739 - trunk/libs3dw
Message-ID: <200710182353.l9INrTlh029187@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 01:53:29 +0200 (Fri, 19 Oct 2007)
New Revision: 739

Modified:
   trunk/libs3dw/animate.c
   trunk/libs3dw/arrange.c
   trunk/libs3dw/root.c
Log:
libs3dw: Convert to ANSI function declarations


Modified: trunk/libs3dw/animate.c
===================================================================
--- trunk/libs3dw/animate.c	2007-10-18 23:53:09 UTC (rev 738)
+++ trunk/libs3dw/animate.c	2007-10-18 23:53:29 UTC (rev 739)
@@ -42,6 +42,7 @@
 	return(-1);
 
 }
+
 /* add an item on the animation stack */
 void s3dw_ani_add(s3dw_widget *f)
 {
@@ -60,6 +61,7 @@
 	} else /* no place, finish now */
 		s3dw_ani_finish(f, -1);
 }
+
 /* delete an item from the animation stack */
 void s3dw_ani_del(int i)
 {
@@ -71,6 +73,7 @@
 		s3dprintf(MED, "[F]ATAL: can't delete animation!\n");
 	}
 }
+
 /* apply the animation */
 void s3dw_ani_doit(s3dw_widget *f)
 {
@@ -100,6 +103,7 @@
 	if (i != -1)
 		s3dw_ani_del(i);
 }
+
 /* do one step of the animation */
 void s3dw_ani_iterate(s3dw_widget *f)
 {
@@ -128,8 +132,9 @@
 		return(0);
 	return(1);
 }
+
 /* need an arrangement ... */
-void s3dw_ani_needarr()
+void s3dw_ani_needarr(void)
 {
 	ani_need_arr = 1;
 	if (!animation_on) {
@@ -137,8 +142,9 @@
 	}
 
 }
+
 /* doing the whole animation thing */
-void s3dw_ani_mate()
+void s3dw_ani_mate(void)
 {
 	int i;
 	s3dw_widget *f;
@@ -155,4 +161,3 @@
 		}
 	}
 }
-

Modified: trunk/libs3dw/arrange.c
===================================================================
--- trunk/libs3dw/arrange.c	2007-10-18 23:53:09 UTC (rev 738)
+++ trunk/libs3dw/arrange.c	2007-10-18 23:53:29 UTC (rev 739)
@@ -51,6 +51,7 @@
 	center[1] = y;
 	center[2] = z;
 }
+
 void s3dw_arr_normdir(float *dir)
 {
 	float dirlen = s3d_vector_length(dir);
@@ -64,7 +65,8 @@
 	dir[1] /= dirlen;
 	dir[2] /= dirlen;
 }
-void s3dw_turn()
+
+void s3dw_turn(void)
 {
 	s3dw_widget *w, *root = s3dw_getroot();
 	int i;
@@ -114,8 +116,9 @@
 		}
 	}
 }
+
 #define DIST 40.0
-void s3dw_follow()
+void s3dw_follow(void)
 {
 	s3dw_widget *w, *root = s3dw_getroot();
 	int i;
@@ -146,7 +149,8 @@
 		}
 	}
 }
-void s3dw_arrange()
+
+void s3dw_arrange(void)
 {
 	s3dw_widget *w1, *w2, *root = s3dw_getroot();
 	int i, j, arranged, allarr;

Modified: trunk/libs3dw/root.c
===================================================================
--- trunk/libs3dw/root.c	2007-10-18 23:53:09 UTC (rev 738)
+++ trunk/libs3dw/root.c	2007-10-18 23:53:29 UTC (rev 739)
@@ -78,7 +78,7 @@
 }
 
 /* get the root .... if it's NULL, the lib is not initialized, so do this too ... */
-s3dw_widget *s3dw_getroot()
+s3dw_widget* s3dw_getroot(void)
 {
 	if (root == NULL) {
 		root = (s3dw_widget *)malloc(sizeof(s3dw_widget));



From lazhur at mail.berlios.de  Fri Oct 19 01:53:38 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 01:53:38 +0200
Subject: [S3d-svn] r740 - trunk/apps/kism3d
Message-ID: <200710182353.l9INrcG4029223@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 01:53:38 +0200 (Fri, 19 Oct 2007)
New Revision: 740

Modified:
   trunk/apps/kism3d/gui.c
Log:
kism3d: Convert to ANSI function declarations


Modified: trunk/apps/kism3d/gui.c
===================================================================
--- trunk/apps/kism3d/gui.c	2007-10-18 23:53:29 UTC (rev 739)
+++ trunk/apps/kism3d/gui.c	2007-10-18 23:53:38 UTC (rev 740)
@@ -118,7 +118,7 @@
 
 
 
-int handle_networks()
+int handle_networks(void)
 {
 
 	struct list_head *network_pos;
@@ -246,7 +246,7 @@
 
 
 
-int handle_clients()
+int handle_clients(void)
 {
 
 	struct list_head *client_pos;
@@ -380,7 +380,7 @@
 
 
 
-void mainloop()
+void mainloop(void)
 {
 
 	float angle, diff_vec[3], tmp_vec[3] = { 0.0, 0.0, -1.0 };



From lazhur at mail.berlios.de  Fri Oct 19 01:53:48 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 01:53:48 +0200
Subject: [S3d-svn] r741 - trunk/apps/meshs3d
Message-ID: <200710182353.l9INrmLE029260@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 01:53:47 +0200 (Fri, 19 Oct 2007)
New Revision: 741

Modified:
   trunk/apps/meshs3d/main.c
   trunk/apps/meshs3d/net.c
   trunk/apps/meshs3d/process.c
   trunk/apps/meshs3d/testvis.c
Log:
meshs3d: Convert to ANSI function declarations


Modified: trunk/apps/meshs3d/main.c
===================================================================
--- trunk/apps/meshs3d/main.c	2007-10-18 23:53:38 UTC (rev 740)
+++ trunk/apps/meshs3d/main.c	2007-10-18 23:53:47 UTC (rev 741)
@@ -105,15 +105,15 @@
 	return(d);
 }
 
-void handle_node()
+void handle_node(void)
 {
-	struct node *node,*tmp_node;
+	struct node *node, *tmp_node;
 	struct node_con *con;
-	struct hash_it_t *hashit,*tmp_hashit=NULL;
+	struct hash_it_t *hashit, *tmp_hashit = NULL;
 	int ip[2];
 	float angle, angle_rad;
 	float tmp_mov_vec[3], desc_norm_vec[3] = {0, 0, -1};
-	
+
 	if (node_hash->elements == 0)
 		return;
 	hashit = NULL;
@@ -154,7 +154,7 @@
 			Global.node_count--;
 			while (NULL != (tmp_hashit = hash_iterate(node_hash, tmp_hashit))) {
 				tmp_node = (struct node *) tmp_hashit->bucket->data;
-				if ( node != tmp_node && (max(node->ip, tmp_node->ip) == node->ip)) {
+				if (node != tmp_node && (max(node->ip, tmp_node->ip) == node->ip)) {
 					ip[0] = node->ip;
 					ip[1] = tmp_node->ip;
 					if (NULL != (con = hash_find(con_hash, ip))) {
@@ -166,7 +166,7 @@
 
 		}
 
-		if(node->visible) {
+		if (node->visible) {
 
 			/* rotate node description so that they are always readable */
 			tmp_mov_vec[0] = Global.cam_position[0][0] - node->pos_vec[0];
@@ -225,8 +225,8 @@
 
 void color_handler(struct node_con *con)
 {
-	float rgb=0.0, r=0.0, g=0.0, b=0.0, etx;
-	int c, c1=0;
+	float rgb = 0.0, r = 0.0, g = 0.0, b = 0.0, etx;
+	int c, c1 = 0;
 
 	if (con->etx1 == -1000.00 || con->etx2 == -1000) {
 
@@ -241,38 +241,44 @@
 		if ((etx >= 1.0) && (etx < 1.5)) {
 
 			c = 2;
-			r = 0.5; g = 1.0; b = 1.0;
+			r = 0.5;
+			g = 1.0;
+			b = 1.0;
 
-		/* good link - bright yellow */
+			/* good link - bright yellow */
 		} else if ((etx >= 1.5) && (etx < 2.0)) {
 
 			rgb = 2.0 - etx;
 
 			c = 3;
 			c1 = con->color == 3 && (int) rintf(con->rgb * 10) != (int) rintf(rgb * 10) ? 1 : 0;
-			r = 1.0; g = 1.0; b = rgb;
+			r = 1.0;
+			g = 1.0;
+			b = rgb;
 
-		/* not so good link - orange */
+			/* not so good link - orange */
 		} else if ((etx >= 2.0) && (etx < 3.0)) {
 
 			rgb = 1.5 - (etx / 2.0);
-			
+
 			c = 4;
 			c1 = con->color == 4 && (int) rintf(con->rgb * 10) != (int) rintf(rgb * 10) ? 1 : 0;
-			r = 1.0; g = rgb;
+			r = 1.0;
+			g = rgb;
 
-		/* bad link (almost dead) - brown */
+			/* bad link (almost dead) - brown */
 		} else if ((etx >= 3.0) && (etx < 5.0)) {
 
 			rgb = 1.75 - (etx / 4.0);
 
 			c = 5;
 			c1 = con->color == 5 && (int) rintf(con->rgb * 10) != (int) rintf(rgb * 10) ? 1 : 0;
-			
-			r = rgb; g = rgb - 0.5; 
 
+			r = rgb;
+			g = rgb - 0.5;
 
-		/* zombie link - grey */
+
+			/* zombie link - grey */
 		} else if ((etx >= 5.0) && (etx < 1000.0)) {
 
 			rgb = 1000.0 / (1500.0 + etx);
@@ -282,7 +288,7 @@
 
 			r = g = b = rgb;
 
-		/* wtf - dark grey */
+			/* wtf - dark grey */
 		} else {
 
 			c = 7;
@@ -291,16 +297,16 @@
 		}
 
 	}
-	
+
 	if (con->color != c || c1) {
 		s3d_pep_material(con->obj_id,
-			r, g, b,
-			r, g, b,
-			r, g, b);
+		                 r, g, b,
+		                 r, g, b,
+		                 r, g, b);
 
 		con->color = c;
 
-		if(rgb != 0.0)
+		if (rgb != 0.0)
 			con->rgb = rgb;
 	}
 
@@ -356,10 +362,10 @@
 					else {
 
 						s3d_pep_material(con->obj_id,
-					                 1.0, 1.0, 1.0,
-					                 1.0, 1.0, 1.0,
-					                 1.0, 1.0, 1.0
-					                );
+						                 1.0, 1.0, 1.0,
+						                 1.0, 1.0, 1.0,
+						                 1.0, 1.0, 1.0
+						                );
 						con->color = 0;
 
 					}
@@ -384,7 +390,7 @@
 
 }
 
-void mainloop()
+void mainloop(void)
 {
 	static int last_count = 0;
 	int net_result;   /* result of function net_main */
@@ -394,19 +400,19 @@
 	calc_node_mov();
 	handle_node();
 
-	
+
 	if (Global.node_count && Global.node_count != last_count) {
 
 		if (Global.obj_node_count) s3d_del_object(Global.obj_node_count);
-		
-		snprintf(nc_str, 20, "node count: %d", Global.node_count );
-		Global.obj_node_count = s3d_draw_string( nc_str, &str_len );
-		
-		s3d_link( Global.obj_node_count, 0 );
-		s3d_flags_on( Global.obj_node_count, S3D_OF_VISIBLE );
-		s3d_scale( Global.obj_node_count, 0.2 );
-		s3d_translate( Global.obj_node_count, -Global.left * 3.0 - (str_len * 0.2), -Global.bottom * 3.0 - 0.7, -3.0 );
-		
+
+		snprintf(nc_str, 20, "node count: %d", Global.node_count);
+		Global.obj_node_count = s3d_draw_string(nc_str, &str_len);
+
+		s3d_link(Global.obj_node_count, 0);
+		s3d_flags_on(Global.obj_node_count, S3D_OF_VISIBLE);
+		s3d_scale(Global.obj_node_count, 0.2);
+		s3d_translate(Global.obj_node_count, -Global.left * 3.0 - (str_len * 0.2), -Global.bottom * 3.0 - 0.7, -3.0);
+
 		last_count = Global.node_count;
 
 	}
@@ -417,7 +423,7 @@
 		Global.output_block_completed = 0;
 
 	}
-	
+
 	while ((net_result = net_main()) != 0) {
 		if (net_result == -1) {
 			printf("that's it folks\n");
@@ -442,10 +448,10 @@
 		Global.cam_position[1][0] = inf->rot_x;
 		Global.cam_position[1][1] = inf->rot_y;
 		Global.cam_position[1][2] = inf->rot_z;
-		
+
 		Global.asp = inf->scale;
 
-		if ( Global.asp > 1.0) {
+		if (Global.asp > 1.0) {
 
 			Global.bottom = -1.0;
 			Global.left = -Global.asp;
@@ -529,11 +535,11 @@
 	process_init();
 
 	if (!net_init(olsr_host)) {
-		
-		s3d_set_callback( S3D_EVENT_OBJ_INFO, object_info );
-		s3d_set_callback(S3D_EVENT_KEY,keypress);
-		
 
+		s3d_set_callback(S3D_EVENT_OBJ_INFO, object_info);
+		s3d_set_callback(S3D_EVENT_KEY, keypress);
+
+
 		/*s3d_set_callback(S3D_EVENT_OBJ_CLICK,object_click);
 		s3d_set_callback(S3D_EVENT_QUIT,stop); */
 

Modified: trunk/apps/meshs3d/net.c
===================================================================
--- trunk/apps/meshs3d/net.c	2007-10-18 23:53:38 UTC (rev 740)
+++ trunk/apps/meshs3d/net.c	2007-10-18 23:53:47 UTC (rev 741)
@@ -70,7 +70,7 @@
 	return(0);
 }
 
-int net_main()
+int net_main(void)
 {
 	static int net_read_count = 0;
 
@@ -121,7 +121,7 @@
 
 }
 
-int net_quit()
+int net_quit(void)
 {
 	close(sockfd);
 

Modified: trunk/apps/meshs3d/process.c
===================================================================
--- trunk/apps/meshs3d/process.c	2007-10-18 23:53:38 UTC (rev 740)
+++ trunk/apps/meshs3d/process.c	2007-10-18 23:53:47 UTC (rev 741)
@@ -102,7 +102,7 @@
 	exit(EXIT_FAILURE);
 }
 
-void process_init()
+void process_init(void)
 {
 	/* initialize hashtable */
 	if (NULL == (node_hash = hash_new(1600, orig_comp, orig_choose)))
@@ -147,12 +147,12 @@
 		hash_add(con_hash, con);
 	}
 
-	if(con->obj_id == -1) {
+	if (con->obj_id == -1) {
 		con->obj_id = s3d_new_object();
 		s3d_push_material(con->obj_id,
-			1.0, 1.0, 1.0,
-      			1.0, 1.0, 1.0,
-      			1.0, 1.0, 1.0);
+		                  1.0, 1.0, 1.0,
+		                  1.0, 1.0, 1.0,
+		                  1.0, 1.0, 1.0);
 		s3d_push_vertex(con->obj_id, 0, 0, 0);
 		s3d_push_vertex(con->obj_id, 0, 0, 0);
 		s3d_push_line(con->obj_id, 0, 1, 0);
@@ -161,13 +161,13 @@
 
 	if (con->ip[0] == ip1) {
 		con->etx1 = etx;
-		if(etx != -1000.00)
+		if (etx != -1000.00)
 			con->etx1_sqrt = sqrt(etx);
 		else
 			con->etx1_sqrt = sqrt(2.0);
 	} else {
 		con->etx2 = etx;
-		if(etx != -1000.00)
+		if (etx != -1000.00)
 			con->etx2_sqrt = sqrt(etx);
 		else
 			con->etx2_sqrt = sqrt(2.0);
@@ -183,8 +183,7 @@
 
 }
 
-struct node *handle_mesh_node(unsigned int ip, char *ip_string)
-{
+struct node *handle_mesh_node(unsigned int ip, char *ip_string) {
 	struct node *orig_node;
 	struct hashtable_t *swaphash;
 
@@ -217,7 +216,7 @@
 		Global.node_count++;
 	}
 
-	if(!orig_node->visible) {
+	if (!orig_node->visible) {
 		orig_node->visible = 1;
 		orig_node->node_type_modified = 1;
 		Global.node_count++;
@@ -226,7 +225,7 @@
 	return(orig_node);
 }
 
-int process_main()
+int process_main(void)
 {
 
 	int dn;
@@ -234,7 +233,7 @@
 	char *lbuf_ptr, *last_cr_ptr, *con_from, *con_from_end, *con_to, *con_to_end, *etx, *etx_end, *tmp_char;
 	char hna_name[NAMEMAX];
 	char hna_node[NAMEMAX];
-	
+
 	struct node *tmp_node;
 	unsigned int int_con_from = 0, int_con_to = 0, address;
 
@@ -282,7 +281,7 @@
 
 				/* announced network via HNA */
 				if (strncmp(etx, "HNA", NAMEMAX) == 0) {
-				
+
 					if (strncmp(con_to, "0.0.0.0/0.0.0.0", NAMEMAX) == 0) {
 
 						if (inet_pton(AF_INET, con_from, &int_con_from) < 1) {
@@ -299,7 +298,7 @@
 							if (Global.debug) printf("new internet: %s\n", tmp_node->ip_string);
 
 						}
-					
+
 					} else {
 
 						memmove(hna_node, con_to, NAMEMAX);
@@ -332,9 +331,9 @@
 							if (Global.debug) printf("new hna network: %s\n", tmp_node->ip_string);
 
 						}
-						
+
 						handle_con(int_con_from, int_con_to, -1000);
-					
+
 					}
 
 				} else {

Modified: trunk/apps/meshs3d/testvis.c
===================================================================
--- trunk/apps/meshs3d/testvis.c	2007-10-18 23:53:38 UTC (rev 740)
+++ trunk/apps/meshs3d/testvis.c	2007-10-18 23:53:47 UTC (rev 741)
@@ -25,27 +25,29 @@
 };
 
 
-void list_data(struct data *head, struct data *end) {
+void list_data(struct data *head, struct data *end)
+{
 	struct data *tmp;
-	
-	for(tmp=head->next;tmp != end;tmp=tmp->next) {
-		printf("%d: %s | %d\n",tmp->index, tmp->line,tmp->active);
+
+	for (tmp = head->next;tmp != end;tmp = tmp->next) {
+		printf("%d: %s | %d\n", tmp->index, tmp->line, tmp->active);
 	}
 }
 
-void rem_data( int index,struct data *head, struct data *end ) {
-	struct data *tmp, *prev=head;
-	
-	for(tmp=head->next;tmp != end;prev = tmp, tmp=tmp->next) {
-		if(tmp->index == index)
+void rem_data(int index, struct data *head, struct data *end)
+{
+	struct data *tmp, *prev = head;
+
+	for (tmp = head->next;tmp != end;prev = tmp, tmp = tmp->next) {
+		if (tmp->index == index)
 			break;
 	}
 
-	if(tmp != end) {
+	if (tmp != end) {
 
 		prev->next = tmp->next;
-		
-		printf("remove index %d\n",tmp->index);
+
+		printf("remove index %d\n", tmp->index);
 		free(tmp);
 	} else {
 		printf("index not found\n");
@@ -53,54 +55,58 @@
 	return;
 }
 
-void dea_data( int index,struct data *head, struct data *end ) {
+void dea_data(int index, struct data *head, struct data *end)
+{
 	struct data *tmp;
-	
-	for(tmp=head->next;tmp != end; tmp=tmp->next) {
-		if(tmp->index == index)
+
+	for (tmp = head->next;tmp != end; tmp = tmp->next) {
+		if (tmp->index == index)
 			break;
 	}
 
-	if(tmp != end && tmp != head) {
+	if (tmp != end && tmp != head) {
 		tmp->active = 0;
 	}
 	return;
 }
 
-void act_data( int index,struct data *head, struct data *end ) {
+void act_data(int index, struct data *head, struct data *end)
+{
 	struct data *tmp;
-	
-	for(tmp=head->next;tmp != end; tmp=tmp->next) {
-		if(tmp->index == index)
+
+	for (tmp = head->next;tmp != end; tmp = tmp->next) {
+		if (tmp->index == index)
 			break;
 	}
 
-	if(tmp != end && tmp != head) {
+	if (tmp != end && tmp != head) {
 		tmp->active = 1;
 	}
 	return;
 }
 
-static void sig(int signr) {
+static void sig(int signr)
+{
 	return;
 }
 
-void *server(void *args) {
+void *server(void *args)
+{
 	struct t_data *t = (struct t_data*)args;
-	int listen_fd,yes=1;
-	struct sockaddr_in sock,client;
+	int listen_fd, yes = 1;
+	struct sockaddr_in sock, client;
 	struct data *tmp;
-	
+
 	int sock2;
 	socklen_t len;
-	
+
 	char buffer[2000];
-	char start[] ="digraph topology\n{\n";
+	char start[] = "digraph topology\n{\n";
 	char end[] = "}\n";
 	int index;
 
 	signal(SIGPIPE, sig);
-	
+
 	listen_fd = socket(PF_INET, SOCK_STREAM, 0);
 	setsockopt(listen_fd, SOL_SOCKET, SO_REUSEADDR, &yes, sizeof(int));
 
@@ -111,24 +117,24 @@
 
 	bind(listen_fd, (struct sockaddr *) &sock, sizeof(sock));
 	listen(listen_fd, 1);
-	
-	len = sizeof( client );
-		
-	while(1) {
 
-		sock2 =	accept( listen_fd, (struct sockaddr*)&client, &len);
+	len = sizeof(client);
 
-		while(1) {
-		
-			memset(buffer,0,2000);
-			strcat(buffer,start);
+	while (1) {
+
+		sock2 = accept(listen_fd, (struct sockaddr*) & client, &len);
+
+		while (1) {
+
+			memset(buffer, 0, 2000);
+			strcat(buffer, start);
 			index = strlen(start);
 
-			for(tmp=t->head->next;tmp != t->end;tmp=tmp->next) {
+			for (tmp = t->head->next;tmp != t->end;tmp = tmp->next) {
 
-				if(!tmp->active)
+				if (!tmp->active)
 					continue;
-				strcat(&buffer[index],tmp->line );
+				strcat(&buffer[index], tmp->line);
 				index += strlen(tmp->line);
 				strcat(&buffer[index], "\n");
 				index++;
@@ -137,25 +143,26 @@
 
 			strcat(&buffer[index], end);
 			buffer[index+2] = 0;
-			if( send ( sock2, buffer, strlen(buffer), 0 ) < 1 )
+			if (send(sock2, buffer, strlen(buffer), 0) < 1)
 				break;
 
 			sleep(3);
 
 		}
 	}
-	
+
 	return NULL;
 }
 
-int main() {
+int main()
+{
 	char buffer[BUFFER_SIZE];
 	char *tmp_buffer;
 	struct data *head, *z, *t;
 	static int index = 0;
 	struct t_data t_dat;
 	pthread_t thread;
-	
+
 	head = malloc(sizeof(*head));
 	z = malloc(sizeof(*z));
 
@@ -163,13 +170,13 @@
 
 	t_dat.head = head;
 	t_dat.end = z;
-	pthread_create (&thread, NULL, server, &t_dat);
+	pthread_create(&thread, NULL, server, &t_dat);
 	pthread_detach(thread);
 	printf("\ntestivs: ");
 
-	while(fgets(buffer, BUFFER_SIZE, stdin)) {
+	while (fgets(buffer, BUFFER_SIZE, stdin)) {
 
-		if( (tmp_buffer = strstr(buffer, "add")) != NULL ) {
+		if ((tmp_buffer = strstr(buffer, "add")) != NULL) {
 			tmp_buffer[strlen(tmp_buffer) - 1] = 0;
 			tmp_buffer += 4;
 			t = malloc(sizeof(*t));
@@ -178,29 +185,29 @@
 			t->active = 1;
 			t->next = head->next;
 			head->next = t;
-		} else if( (tmp_buffer = strstr(buffer, "list")) != NULL ) {
+		} else if ((tmp_buffer = strstr(buffer, "list")) != NULL) {
 
-			list_data(head,z);
+			list_data(head, z);
 
-		} else if( (tmp_buffer = strstr(buffer, "rem")) != NULL ) {
+		} else if ((tmp_buffer = strstr(buffer, "rem")) != NULL) {
 
 			tmp_buffer[strlen(tmp_buffer) - 1] = 0;
 			tmp_buffer += 4;
-			rem_data( atoi(tmp_buffer),head,z);
+			rem_data(atoi(tmp_buffer), head, z);
 
-		} else if( (tmp_buffer = strstr(buffer, "dea")) != NULL ) {
+		} else if ((tmp_buffer = strstr(buffer, "dea")) != NULL) {
 
 			tmp_buffer[strlen(tmp_buffer) - 1] = 0;
 			tmp_buffer += 4;
-			dea_data( atoi(tmp_buffer),head,z);
+			dea_data(atoi(tmp_buffer), head, z);
 
-		} else if( (tmp_buffer = strstr(buffer, "act")) != NULL ) {
+		} else if ((tmp_buffer = strstr(buffer, "act")) != NULL) {
 
 			tmp_buffer[strlen(tmp_buffer) - 1] = 0;
 			tmp_buffer += 4;
-			act_data( atoi(tmp_buffer),head,z);
+			act_data(atoi(tmp_buffer), head, z);
 
-		} else if( (tmp_buffer = strstr(buffer, "quit")) != NULL ) {
+		} else if ((tmp_buffer = strstr(buffer, "quit")) != NULL) {
 
 			break;
 
@@ -211,6 +218,6 @@
 		printf("testivs: ");
 
 	}
-	
+
 	return 0;
 }



From lazhur at mail.berlios.de  Fri Oct 19 01:54:06 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 01:54:06 +0200
Subject: [S3d-svn] r742 - trunk/apps/olsrs3d
Message-ID: <200710182354.l9INs69w029301@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 01:54:05 +0200 (Fri, 19 Oct 2007)
New Revision: 742

Modified:
   trunk/apps/olsrs3d/main.c
   trunk/apps/olsrs3d/net.c
   trunk/apps/olsrs3d/process.c
   trunk/apps/olsrs3d/search.c
Log:
olsrs3d: Convert to ANSI function declarations


Modified: trunk/apps/olsrs3d/main.c
===================================================================
--- trunk/apps/olsrs3d/main.c	2007-10-18 23:53:47 UTC (rev 741)
+++ trunk/apps/olsrs3d/main.c	2007-10-18 23:54:05 UTC (rev 742)
@@ -118,7 +118,7 @@
 
 
 
-void window_help()
+void window_help(void)
 {
 
 	s3dw_surface *infwin;
@@ -720,7 +720,7 @@
 
 
 
-void mainloop()
+void mainloop(void)
 {
 
 	int net_result;   /* result of function net_main */
@@ -797,7 +797,7 @@
 
 }
 
-int stop()
+int stop(void)
 {
 	s3d_quit();
 	net_quit();
@@ -984,7 +984,7 @@
 	return(0);
 }
 
-void print_etx()
+void print_etx(void)
 {
 	struct olsr_neigh_list *tmpNeighbour;
 	float p = 1.4;

Modified: trunk/apps/olsrs3d/net.c
===================================================================
--- trunk/apps/olsrs3d/net.c	2007-10-18 23:53:47 UTC (rev 741)
+++ trunk/apps/olsrs3d/net.c	2007-10-18 23:54:05 UTC (rev 742)
@@ -71,7 +71,7 @@
 	return(0);
 }
 
-int net_main()
+int net_main(void)
 {
 
 	if ((numbytes = recv(sockfd, buf, MAXDATASIZE - 1, 0)) == -1) {
@@ -120,7 +120,7 @@
 
 }
 
-int net_quit()
+int net_quit(void)
 {
 	close(sockfd);
 

Modified: trunk/apps/olsrs3d/process.c
===================================================================
--- trunk/apps/olsrs3d/process.c	2007-10-18 23:53:47 UTC (rev 741)
+++ trunk/apps/olsrs3d/process.c	2007-10-18 23:54:05 UTC (rev 742)
@@ -249,7 +249,7 @@
  *
  */
 
-void lst_initialize()
+void lst_initialize(void)
 {
 	Obj_to_ip_head = (struct Obj_to_ip*) malloc(sizeof(struct Obj_to_ip));
 	Obj_to_ip_end = (struct Obj_to_ip*) malloc(sizeof(struct Obj_to_ip));
@@ -375,7 +375,7 @@
 
 }
 
-void lst_out()
+void lst_out(void)
 {
 	struct Obj_to_ip *ptr;
 	ptr = Obj_to_ip_head;
@@ -385,7 +385,7 @@
 	}
 }
 
-int process_main()
+int process_main(void)
 {
 
 	int dn;

Modified: trunk/apps/olsrs3d/search.c
===================================================================
--- trunk/apps/olsrs3d/search.c	2007-10-18 23:53:47 UTC (rev 741)
+++ trunk/apps/olsrs3d/search.c	2007-10-18 23:54:05 UTC (rev 742)
@@ -90,7 +90,7 @@
 	_search_widget = NULL;
 	set_search_status(NOTHING);
 }
-void show_search_window()
+void show_search_window(void)
 {
 	s3dw_button *search_button, *abort_button;
 



From lazhur at mail.berlios.de  Fri Oct 19 01:54:17 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 01:54:17 +0200
Subject: [S3d-svn] r743 - trunk/apps/s3dfm
Message-ID: <200710182354.l9INsHX4029345@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 01:54:16 +0200 (Fri, 19 Oct 2007)
New Revision: 743

Modified:
   trunk/apps/s3dfm/animation.c
   trunk/apps/s3dfm/dialog.c
   trunk/apps/s3dfm/main.c
Log:
s3dfm: Convert to ANSI function declarations


Modified: trunk/apps/s3dfm/animation.c
===================================================================
--- trunk/apps/s3dfm/animation.c	2007-10-18 23:54:05 UTC (rev 742)
+++ trunk/apps/s3dfm/animation.c	2007-10-18 23:54:16 UTC (rev 743)
@@ -103,7 +103,7 @@
 	return(1);
 }
 /* doing the whole animation thing */
-void ani_mate()
+void ani_mate(void)
 {
 	int i;
 	t_node *f;

Modified: trunk/apps/s3dfm/dialog.c
===================================================================
--- trunk/apps/s3dfm/dialog.c	2007-10-18 23:54:05 UTC (rev 742)
+++ trunk/apps/s3dfm/dialog.c	2007-10-18 23:54:16 UTC (rev 743)
@@ -70,7 +70,7 @@
 	}
 	return(0);
 }
-void window_help()
+void window_help(void)
 {
 	s3dw_surface *infwin;
 	s3dw_button  *button;
@@ -88,7 +88,7 @@
 	s3dw_show(S3DWIDGET(infwin));
 
 }
-void window_fs_another()
+void window_fs_another(void)
 {
 	s3dw_surface *infwin;
 	s3dw_button  *button;
@@ -98,7 +98,7 @@
 	button->onclick = close_win;
 	s3dw_show(S3DWIDGET(infwin));
 }
-void window_fs_nothing()
+void window_fs_nothing(void)
 {
 	s3dw_surface *infwin;
 	s3dw_button  *button;
@@ -216,7 +216,7 @@
 }
 
 
-void window_unlink()
+void window_unlink(void)
 {
 	s3dw_surface *infwin;
 	s3dw_button  *okbutton, *abortbutton;
@@ -353,7 +353,7 @@
 	s3dw_show(S3DWIDGET(infwin));
 }
 /* check if a file operation is finished and clean up */
-void window_fsani()
+void window_fsani(void)
 {
 	int i;
 	t_node *node, dummy;

Modified: trunk/apps/s3dfm/main.c
===================================================================
--- trunk/apps/s3dfm/main.c	2007-10-18 23:54:05 UTC (rev 742)
+++ trunk/apps/s3dfm/main.c	2007-10-18 23:54:16 UTC (rev 743)
@@ -30,7 +30,7 @@
 };
 t_node root, cam, *focus;
 
-void mainloop()
+void mainloop(void)
 {
 	ani_mate();
 	s3dw_ani_mate();



From lazhur at mail.berlios.de  Fri Oct 19 01:54:26 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 01:54:26 +0200
Subject: [S3d-svn] r744 - trunk/apps/s3dosm
Message-ID: <200710182354.l9INsQ7f029396@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 01:54:24 +0200 (Fri, 19 Oct 2007)
New Revision: 744

Modified:
   trunk/apps/s3dosm/db.c
   trunk/apps/s3dosm/draw.c
   trunk/apps/s3dosm/gps.c
   trunk/apps/s3dosm/http_fetcher.c
   trunk/apps/s3dosm/main.c
   trunk/apps/s3dosm/nav.c
   trunk/apps/s3dosm/object.c
   trunk/apps/s3dosm/ui.c
Log:
s3dosm: Convert to ANSI function declarations


Modified: trunk/apps/s3dosm/db.c
===================================================================
--- trunk/apps/s3dosm/db.c	2007-10-18 23:54:16 UTC (rev 743)
+++ trunk/apps/s3dosm/db.c	2007-10-18 23:54:24 UTC (rev 744)
@@ -243,7 +243,7 @@
 }
 
 /* call this if you're finished with a few stackable operations */
-void db_flush()
+void db_flush(void)
 {
 	if (qlen > 0)
 		db_really_exec(qbuf, NULL, 0);
@@ -289,7 +289,7 @@
 	return(0);
 }
 
-int db_quit()
+int db_quit(void)
 {
 	sqlite3_close(db);
 	if (dbFile != NULL)
@@ -298,7 +298,7 @@
 	return(0);
 }
 
-int db_create()
+int db_create(void)
 {
 	db_exec("CREATE TABLE node (layer_id INT, node_id INTEGER , latitude DOUBLE PRECISION, longitude DOUBLE PRECISION, altitude DOUBLE PRECISION, visible BOOLEAN, tag_id INT, s3doid INT, PRIMARY KEY(layer_id,node_id));", NULL, 0);
 	db_exec("CREATE TABLE segment (layer_id INT, seg_id INTEGER, node_from INT, node_to INT, tag_id INT, way_id INT,PRIMARY KEY(layer_id,seg_id));", NULL, 0);

Modified: trunk/apps/s3dosm/draw.c
===================================================================
--- trunk/apps/s3dosm/draw.c	2007-10-18 23:54:16 UTC (rev 743)
+++ trunk/apps/s3dosm/draw.c	2007-10-18 23:54:24 UTC (rev 744)
@@ -428,12 +428,12 @@
 	db_exec(query, way_group, filter);
 	waylist_draw(filter); /* last way */
 }
-void draw_osm()
+void draw_osm(void)
 {
 	load_window("Drawing Card ...");
 	draw_ways("layer_id=(SELECT layer_id FROM layer WHERE name='osm')");
 }
-void draw_kismet()
+void draw_kismet(void)
 {
 	char query[MAXQ];
 	char filter[] = "layer_id=(SELECT layer_id FROM layer WHERE name='kismet')";
@@ -444,7 +444,7 @@
 	snprintf(query, MAXQ, "SELECT * FROM node WHERE %s;", filter);
 	db_exec(query, draw_icon, filter);
 }
-void draw_all_layers()
+void draw_all_layers(void)
 {
 	draw_osm();
 	draw_kismet();

Modified: trunk/apps/s3dosm/gps.c
===================================================================
--- trunk/apps/s3dosm/gps.c	2007-10-18 23:54:16 UTC (rev 743)
+++ trunk/apps/s3dosm/gps.c	2007-10-18 23:54:24 UTC (rev 744)
@@ -223,7 +223,7 @@
 	gps_query(dgps, "w+x\n");
 	return(0);
 }
-int gps_main()
+int gps_main(void)
 {
 	if (gps_active && ((frame % 6) == 0)) {
 		if (gps_poll(dgps) < 0) {
@@ -253,7 +253,7 @@
 	frame++;
 	return(0);
 }
-int gps_quit()
+int gps_quit(void)
 {
 	if (gps_active) {
 		printf("deactivating gps-connection ...\n");
@@ -269,11 +269,11 @@
 	printf("GPS support not compiled in!\n");
 	return(0);
 }
-int gps_main()
+int gps_main(void)
 {
 	return(0);
 }
-int gps_quit()
+int gps_quit(void)
 {
 	return(0);
 }

Modified: trunk/apps/s3dosm/http_fetcher.c
===================================================================
--- trunk/apps/s3dosm/http_fetcher.c	2007-10-18 23:54:16 UTC (rev 743)
+++ trunk/apps/s3dosm/http_fetcher.c	2007-10-18 23:54:24 UTC (rev 744)
@@ -507,7 +507,7 @@
  * so if you need to hold on to the message for a while you should make
  * a copy of it
  */
-const char *http_strerror()
+const char *http_strerror(void)
 {
 	if (errorSource == ERRNO)
 		return strerror(errno);

Modified: trunk/apps/s3dosm/main.c
===================================================================
--- trunk/apps/s3dosm/main.c	2007-10-18 23:54:16 UTC (rev 743)
+++ trunk/apps/s3dosm/main.c	2007-10-18 23:54:24 UTC (rev 744)
@@ -29,7 +29,7 @@
 #include <time.h>  /*  nanosleep(), struct tm, time_t...  */
 static int ready = 0;
 
-void mainloop()
+void mainloop(void)
 {
 	struct timespec t = {
 		0, 100*1000*1000
@@ -55,7 +55,7 @@
 	ready = 1;
 	return(0);
 }
-int quit()
+int quit(void)
 {
 	ready = 0;
 	gps_quit();

Modified: trunk/apps/s3dosm/nav.c
===================================================================
--- trunk/apps/s3dosm/nav.c	2007-10-18 23:54:16 UTC (rev 743)
+++ trunk/apps/s3dosm/nav.c	2007-10-18 23:54:24 UTC (rev 744)
@@ -8,7 +8,7 @@
 int oidx, oidy;
 static float lat, lon, tlat, tlon;
 /* load rotation centers */
-void nav_init()
+void nav_init(void)
 {
 	lat = lon = tlat = tlon = 0.0;
 	oidx = s3d_new_object();
@@ -50,7 +50,7 @@
 	earthpos[2] = tmp1[2];
 
 }
-void nav_main()
+void nav_main(void)
 {
 	float x[3];
 	if ((fabs(tlat - lat) > 0.00001) && (fabs(tlon - lon) > 0.00001)) {
@@ -102,7 +102,7 @@
 	return(angle);
 }
 /* find some good center on our own */
-void nav_autocenter()
+void nav_autocenter(void)
 {
 	float med[2];
 	char query[] = "SELECT avg(longitude) as lo, avg(latitude) as la FROM node; ";

Modified: trunk/apps/s3dosm/object.c
===================================================================
--- trunk/apps/s3dosm/object.c	2007-10-18 23:54:16 UTC (rev 743)
+++ trunk/apps/s3dosm/object.c	2007-10-18 23:54:24 UTC (rev 744)
@@ -46,7 +46,7 @@
 	nobj->type = T_OBJECT;
 }
 
-object_t *object_new(int key)
+object_t* object_new(int key)
 {
 	object_t *nobj = malloc(sizeof(object_t));
 	object_init(nobj);
@@ -66,7 +66,7 @@
 	nnode->adj_n = 0;
 	nnode->adj_p = NULL;
 }
-node_t *node_new()
+node_t* node_new(void)
 {
 	node_t *nnode = malloc(sizeof(node_t));
 	node_init(nnode);
@@ -85,7 +85,7 @@
 	nsegment->from = 0;
 	nsegment->to = 0;
 }
-segment_t *segment_new()
+segment_t* segment_new(void)
 {
 	segment_t *nsegment = malloc(sizeof(segment_t));
 	segment_init(nsegment);
@@ -104,7 +104,7 @@
 	nway->seg_n = 0;
 	nway->seg_p = NULL;
 }
-way_t *way_new()
+way_t* way_new(void)
 {
 	way_t *nway = malloc(sizeof(way_t));
 	way_init(nway);
@@ -117,7 +117,7 @@
 	free(way);
 }
 /* ########### layer  ############### */
-layer_t *layer_new()
+layer_t* layer_new(void)
 {
 	layer_t *nlayer = malloc(sizeof(layer_t));
 	nlayer->tree = NULL;

Modified: trunk/apps/s3dosm/ui.c
===================================================================
--- trunk/apps/s3dosm/ui.c	2007-10-18 23:54:16 UTC (rev 743)
+++ trunk/apps/s3dosm/ui.c	2007-10-18 23:54:24 UTC (rev 744)
@@ -35,7 +35,7 @@
 };
 
 /* load icons, we want to clone each of them later */
-void ui_loadicons()
+void ui_loadicons(void)
 {
 	int i;
 	for (i = 0;i < ICON_NUM;i++)
@@ -128,7 +128,7 @@
 	s3dw_object_info(evt);
 	return(0);
 }
-int ui_init()
+int ui_init(void)
 {
 	ui_loadicons();
 	s3d_set_callback(S3D_EVENT_OBJ_CLICK, ui_click);
@@ -152,7 +152,7 @@
 	return(0);
 }
 /* remove it if still here */
-int load_window_remove()
+int load_window_remove(void)
 {
 	if (loadwindow != NULL) {
 		s3dw_delete(S3DWIDGET(loadwindow));



From lazhur at mail.berlios.de  Fri Oct 19 01:54:40 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 01:54:40 +0200
Subject: [S3d-svn] r745 - trunk/apps/s3dvt
Message-ID: <200710182354.l9INseX0029444@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 01:54:39 +0200 (Fri, 19 Oct 2007)
New Revision: 745

Modified:
   trunk/apps/s3dvt/main.c
   trunk/apps/s3dvt/terminal.c
Log:
s3dvt: Convert to ANSI function declarations


Modified: trunk/apps/s3dvt/main.c
===================================================================
--- trunk/apps/s3dvt/main.c	2007-10-18 23:54:24 UTC (rev 744)
+++ trunk/apps/s3dvt/main.c	2007-10-18 23:54:39 UTC (rev 745)
@@ -101,7 +101,7 @@
 	}
 	return(NULL); /* huh?! */
 }
-int pty_init_terminal()
+int pty_init_terminal(void)
 {
 	int i;
 	char buf[256];
@@ -183,7 +183,7 @@
 }
 
 
-int pipe_init_terminal()
+int pipe_init_terminal(void)
 {
 	char buf[256];
 	int uid = 0, gid = 0;
@@ -235,7 +235,7 @@
 	}
 	return 1;
 }
-int init_terminal()
+int init_terminal(void)
 {
 	int i;
 	for (i = 0;i < 5;i++)
@@ -243,7 +243,7 @@
 			return(0);
 	return(pipe_init_terminal());  /*  if not, fallback to pipe mode */
 }
-void term_unload()
+void term_unload(void)
 {
 	printf("unloading tty!!\n");
 	switch (term_mode) {
@@ -261,7 +261,7 @@
 	}
 }
 #ifdef M_CHAR
-void paintit()
+void paintit(void)
 {
 	int cline;
 	int c;
@@ -304,7 +304,7 @@
 }
 #endif
 #ifdef M_LINE
-void paintit()
+void paintit(void)
 {
 	int cline;
 	int oid, c;
@@ -467,7 +467,7 @@
 
 }
 int i = 0;
-void mainloop()
+void mainloop(void)
 {
 	usleep(10000);
 	nanosleep(&t, NULL);
@@ -491,7 +491,7 @@
 	s3d_quit();
 	return(0);
 }
-unsigned int draw_background()
+unsigned int draw_background(void)
 {
 	unsigned int b;
 	b = s3d_new_object();
@@ -507,7 +507,7 @@
 	s3d_flags_on(b, S3D_OF_VISIBLE);
 	return(b);
 }
-void chars_s3d_init()
+void chars_s3d_init(void)
 {
 #ifdef M_CHAR
 	char c[2];
@@ -523,7 +523,7 @@
 	s3d_clone_target(cursor, charbuf['_']);
 #endif
 }
-void chars_init()
+void chars_init(void)
 {
 #ifdef M_CHAR
 	int x, y;

Modified: trunk/apps/s3dvt/terminal.c
===================================================================
--- trunk/apps/s3dvt/terminal.c	2007-10-18 23:54:24 UTC (rev 744)
+++ trunk/apps/s3dvt/terminal.c	2007-10-18 23:54:39 UTC (rev 745)
@@ -46,7 +46,7 @@
 static int curfgcolor = DEFAULT_FGCOLOR;
 static int curbgcolor = DEFAULT_BGCOLOR;
 
-void move_all_lines_up()
+void move_all_lines_up(void)
 {
 	t_line *pfirstline = (t_line*) & line;
 	t_line *psecondline = (t_line*) & line + 1;
@@ -69,14 +69,14 @@
 		clear_char(lineid, i);
 }
 
-void clear_line_after_lastchar()
+void clear_line_after_lastchar(void)
 {
 	int i;
 	for (i = cx;i < MAX_CHARS;i++)
 		clear_char(cy, i);
 }
 
-t_line *line_is_full()
+t_line* line_is_full(void)
 {
 	t_line *pcurline = (t_line*) & line + cy;
 	cy++;
@@ -108,7 +108,7 @@
 		cx++;
 }
 
-void backspace()
+void backspace(void)
 {
 	if (cx > 0)
 		cx--;
@@ -116,7 +116,7 @@
 		cx = 0;
 }
 
-void endansi()
+void endansi(void)
 {
 	printf(" [/ANSI(%d)]\n", isansi2);
 	isansi = 0;
@@ -292,7 +292,7 @@
 		break;
 	}
 }
-void remove_beginning_from_curpos()
+void remove_beginning_from_curpos(void)
 {
 	int i, j = cx;
 	for (i = cy;i < MAX_LINES;i++) {
@@ -501,7 +501,7 @@
 	}
 	gotnewdata = 1;
 }
-void init_line()
+void init_line(void)
 {
 	int i;
 	for (i = 0;i < MAX_LINES;i++) {



From lazhur at mail.berlios.de  Fri Oct 19 01:54:56 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 01:54:56 +0200
Subject: [S3d-svn] r746 - trunk/apps/s3d_x11gate
Message-ID: <200710182354.l9INsuOs029487@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 01:54:55 +0200 (Fri, 19 Oct 2007)
New Revision: 746

Modified:
   trunk/apps/s3d_x11gate/s3d_x11gate.c
Log:
s3d_x11gate: Convert to ANSI function declarations


Modified: trunk/apps/s3d_x11gate/s3d_x11gate.c
===================================================================
--- trunk/apps/s3d_x11gate/s3d_x11gate.c	2007-10-18 23:54:39 UTC (rev 745)
+++ trunk/apps/s3d_x11gate/s3d_x11gate.c	2007-10-18 23:54:55 UTC (rev 746)
@@ -73,7 +73,7 @@
 	}
 	return(i);
 }
-void mainloop()
+void mainloop(void)
 {
 #define MAGIC_CHANGED ((unsigned int)~0)
 	unsigned int x, y;



From lazhur at mail.berlios.de  Fri Oct 19 01:55:08 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 01:55:08 +0200
Subject: [S3d-svn] r747 - trunk/example
Message-ID: <200710182355.l9INt8dF029535@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 01:55:05 +0200 (Fri, 19 Oct 2007)
New Revision: 747

Modified:
   trunk/example/filebrowser.c
   trunk/example/hudtest.c
   trunk/example/katze.c
   trunk/example/linetest.c
   trunk/example/modelloader.c
   trunk/example/nichtsnutz.c
   trunk/example/ptrtest.c
   trunk/example/radius_test.c
   trunk/example/s3dclock.c
   trunk/example/snowman.c
   trunk/example/strtest.c
   trunk/example/texturetest.c
   trunk/example/widgets.c
   trunk/example/wiresphere.c
Log:
examples: Convert to ANSI function declarations


Modified: trunk/example/filebrowser.c
===================================================================
--- trunk/example/filebrowser.c	2007-10-18 23:54:55 UTC (rev 746)
+++ trunk/example/filebrowser.c	2007-10-18 23:55:05 UTC (rev 747)
@@ -233,7 +233,7 @@
 	}
 	return(0);
 }
-void mainloop()
+void mainloop(void)
 {
 	nanosleep(&t, NULL);
 }

Modified: trunk/example/hudtest.c
===================================================================
--- trunk/example/hudtest.c	2007-10-18 23:54:55 UTC (rev 746)
+++ trunk/example/hudtest.c	2007-10-18 23:55:05 UTC (rev 747)
@@ -26,7 +26,7 @@
 #include <s3d.h>
 #include <unistd.h>  /*  sleep() */
 #include <stdio.h>  /*  printf() */
-void mainloop()
+void mainloop(void)
 {
 	sleep(1);
 }

Modified: trunk/example/katze.c
===================================================================
--- trunk/example/katze.c	2007-10-18 23:54:55 UTC (rev 746)
+++ trunk/example/katze.c	2007-10-18 23:55:05 UTC (rev 747)
@@ -34,7 +34,7 @@
 int a;
 int rot_point, body, legfr, legbr, legfl, legbl, tail;
 
-void mainloop()
+void mainloop(void)
 {
 	float pos;
 	a = (a + 2) % 360;

Modified: trunk/example/linetest.c
===================================================================
--- trunk/example/linetest.c	2007-10-18 23:54:55 UTC (rev 746)
+++ trunk/example/linetest.c	2007-10-18 23:55:05 UTC (rev 747)
@@ -34,7 +34,7 @@
 	s3d_quit();
 }
 
-void mainloop()
+void mainloop(void)
 {
 	i = (i + 1) % 2;
 	if (i) {

Modified: trunk/example/modelloader.c
===================================================================
--- trunk/example/modelloader.c	2007-10-18 23:54:55 UTC (rev 746)
+++ trunk/example/modelloader.c	2007-10-18 23:55:05 UTC (rev 747)
@@ -32,7 +32,7 @@
 	0, 100*1000*1000
 }; /* 100 mili seconds */
 int i, oid;
-void mainloop()
+void mainloop(void)
 {
 	s3d_rotate(oid, 0, i, 0);
 	i = (i + 1) % 360;

Modified: trunk/example/nichtsnutz.c
===================================================================
--- trunk/example/nichtsnutz.c	2007-10-18 23:54:55 UTC (rev 746)
+++ trunk/example/nichtsnutz.c	2007-10-18 23:55:05 UTC (rev 747)
@@ -45,7 +45,7 @@
 
 float length;
 
-void mainloop()
+void mainloop(void)
 {
 
 	al = (alpha * M_PI / 180);

Modified: trunk/example/ptrtest.c
===================================================================
--- trunk/example/ptrtest.c	2007-10-18 23:54:55 UTC (rev 746)
+++ trunk/example/ptrtest.c	2007-10-18 23:55:05 UTC (rev 747)
@@ -43,7 +43,7 @@
 	return(0);
 }
 
-void mainloop()
+void mainloop(void)
 {
 	float a;
 	alpha = (alpha + 1) % 360;

Modified: trunk/example/radius_test.c
===================================================================
--- trunk/example/radius_test.c	2007-10-18 23:54:55 UTC (rev 746)
+++ trunk/example/radius_test.c	2007-10-18 23:55:05 UTC (rev 747)
@@ -31,7 +31,7 @@
 #include <math.h> /* sin(), cos() */
 int item1, item2, item3;
 int i = 0;
-void mainloop()
+void mainloop(void)
 {
 	float f, g, h;
 	f = sin((M_PI * (i % 360)) / 180.0);

Modified: trunk/example/s3dclock.c
===================================================================
--- trunk/example/s3dclock.c	2007-10-18 23:54:55 UTC (rev 746)
+++ trunk/example/s3dclock.c	2007-10-18 23:55:05 UTC (rev 747)
@@ -41,7 +41,7 @@
 	s3d_quit();
 }
 
-void mainloop()
+void mainloop(void)
 {
 	onow = now;
 	now = time(NULL);

Modified: trunk/example/snowman.c
===================================================================
--- trunk/example/snowman.c	2007-10-18 23:54:55 UTC (rev 746)
+++ trunk/example/snowman.c	2007-10-18 23:55:05 UTC (rev 747)
@@ -33,7 +33,7 @@
 int oid_middle;
 int oid_foot;
 
-void mainloop()
+void mainloop(void)
 {
 	float pos;
 	a = (a + 3) % 360;

Modified: trunk/example/strtest.c
===================================================================
--- trunk/example/strtest.c	2007-10-18 23:54:55 UTC (rev 746)
+++ trunk/example/strtest.c	2007-10-18 23:55:05 UTC (rev 747)
@@ -33,7 +33,7 @@
 	s3d_quit();
 }
 
-void mainloop()
+void mainloop(void)
 {
 	/*  printf("now it's %s\n",time_str); */
 	sleep(1);

Modified: trunk/example/texturetest.c
===================================================================
--- trunk/example/texturetest.c	2007-10-18 23:54:55 UTC (rev 746)
+++ trunk/example/texturetest.c	2007-10-18 23:55:05 UTC (rev 747)
@@ -31,7 +31,7 @@
 }; /* 10 mili seconds */
 
 int i, oid;
-void mainloop()
+void mainloop(void)
 {
 	i = (i + 1) % 360;
 	s3d_rotate(oid, 0, i, 0);

Modified: trunk/example/widgets.c
===================================================================
--- trunk/example/widgets.c	2007-10-18 23:54:55 UTC (rev 746)
+++ trunk/example/widgets.c	2007-10-18 23:55:05 UTC (rev 747)
@@ -37,7 +37,7 @@
 static struct timespec t = {
 	0, 33*1000*1000
 }; /* 33 mili seconds */
-void mainloop()
+void mainloop(void)
 {
 	/* keep this in your mainloop. this will do smooth animations for you ... */
 	s3dw_ani_mate();

Modified: trunk/example/wiresphere.c
===================================================================
--- trunk/example/wiresphere.c	2007-10-18 23:54:55 UTC (rev 746)
+++ trunk/example/wiresphere.c	2007-10-18 23:55:05 UTC (rev 747)
@@ -104,7 +104,7 @@
 	s3d_quit();
 }
 
-void mainloop()
+void mainloop(void)
 {
 	r = (r + 1) % 360;
 	s3d_rotate(oid, 0, r, 0);



From lazhur at mail.berlios.de  Fri Oct 19 01:55:20 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 01:55:20 +0200
Subject: [S3d-svn] r748 - trunk/server
Message-ID: <200710182355.l9INtK1K029590@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 01:55:18 +0200 (Fri, 19 Oct 2007)
New Revision: 748

Modified:
   trunk/server/cull.c
   trunk/server/event.c
   trunk/server/graphics.c
   trunk/server/graphics_glut.c
   trunk/server/graphics_sdl.c
   trunk/server/main.c
   trunk/server/matrix.c
   trunk/server/mcp.c
   trunk/server/navigation.c
   trunk/server/network.c
   trunk/server/process.c
   trunk/server/shm.c
   trunk/server/tcp.c
   trunk/server/user.c
   trunk/server/user_glut.c
   trunk/server/user_sdl.c
Log:
server: Convert to ANSI function declarations


Modified: trunk/server/cull.c
===================================================================
--- trunk/server/cull.c	2007-10-18 23:55:05 UTC (rev 747)
+++ trunk/server/cull.c	2007-10-18 23:55:18 UTC (rev 748)
@@ -38,7 +38,7 @@
 #define PNEAR 4
 #define PFAR 5
 static struct t_plane frustumPlane[6];
-void cull_get_planes()
+void cull_get_planes(void)
 {
 	t_mtrx m, mproj, mmodel;
 	struct t_plane *p;

Modified: trunk/server/event.c
===================================================================
--- trunk/server/event.c	2007-10-18 23:55:05 UTC (rev 747)
+++ trunk/server/event.c	2007-10-18 23:55:18 UTC (rev 748)
@@ -89,7 +89,7 @@
 	return(0);
 }
 /* the cam changed?! we should run and tell this the mcp/focused client! */
-int event_cam_changed()
+int event_cam_changed(void)
 {
 	struct t_process *p;
 	struct t_obj  *o;
@@ -100,7 +100,7 @@
 	return(0);
 }
 /* same for the mouse movement! */
-int event_ptr_changed()
+int event_ptr_changed(void)
 {
 	struct t_process *p;
 	struct t_obj  *o;

Modified: trunk/server/graphics.c
===================================================================
--- trunk/server/graphics.c	2007-10-18 23:55:05 UTC (rev 747)
+++ trunk/server/graphics.c	2007-10-18 23:55:18 UTC (rev 748)
@@ -47,7 +47,7 @@
 extern int frame_mode;  /*  GLUT, SDL, ... ? */
 /*  this detects and opens the SDL things */
 
-int graphics_init()
+int graphics_init(void)
 {
 	GLfloat shin[] = {16.0};
 	switch (frame_mode) {
@@ -169,7 +169,7 @@
 }
 /*  this functions renders by going from mcp objects [as it should be],  */
 /*  recursively positiniong the objects into the space. */
-int render_by_mcp()
+int render_by_mcp(void)
 {
 	struct t_process *p = get_proc_by_pid(MCP);
 	int32_t i;
@@ -332,7 +332,7 @@
 }
 
 
-void graphics_main()
+void graphics_main(void)
 {
 	struct t_process *p = get_proc_by_pid(MCP);
 	t_mtrx m;
@@ -392,7 +392,7 @@
 }
 
 /*  quit the graphic-interface */
-int graphics_quit()
+int graphics_quit(void)
 {
 	return(0);
 }

Modified: trunk/server/graphics_glut.c
===================================================================
--- trunk/server/graphics_glut.c	2007-10-18 23:55:05 UTC (rev 747)
+++ trunk/server/graphics_glut.c	2007-10-18 23:55:18 UTC (rev 748)
@@ -31,7 +31,7 @@
 #include <GL/gl.h>   /*  of course, the gl header */
 #include <stdlib.h>  /* atexit() */
 /*  glut version of graphics init ... */
-int graphics_init_glut()
+int graphics_init_glut(void)
 {
 	/* XXX: Faking argc and argv is probably not a good idea. */
 	int argc = 1;
@@ -49,7 +49,7 @@
 	return(0);
 }
 /*  nothing to be done ... */
-int graphics_quit_glut()
+int graphics_quit_glut(void)
 {
 	return(0);
 }

Modified: trunk/server/graphics_sdl.c
===================================================================
--- trunk/server/graphics_sdl.c	2007-10-18 23:55:05 UTC (rev 747)
+++ trunk/server/graphics_sdl.c	2007-10-18 23:55:18 UTC (rev 748)
@@ -28,7 +28,7 @@
 #include <SDL.h>
 
 int SDLFlags = 0;      /*  some flags for SDL */
-int graphics_init_sdl()
+int graphics_init_sdl(void)
 {
 	SDL_Surface *GLwin = NULL;
 	SDL_VideoInfo *VideoInfo;
@@ -113,7 +113,7 @@
 	graphics_reshape(X_RES, Y_RES);
 	return(0);
 }
-int graphics_quit_sdl()
+int graphics_quit_sdl(void)
 {
 	SDL_Quit();
 	return(0);

Modified: trunk/server/main.c
===================================================================
--- trunk/server/main.c	2007-10-18 23:55:05 UTC (rev 747)
+++ trunk/server/main.c	2007-10-18 23:55:18 UTC (rev 748)
@@ -134,7 +134,7 @@
 struct timespec t = {
 	0, 10*1000*1000
 }; /* 10 mili seconds */
-void one_time()
+void one_time(void)
 {
 	nanosleep(&t, NULL);
 	user_main();
@@ -142,7 +142,7 @@
 	graphics_main();
 }
 /*  this initalizes all components.  */
-int init()
+int init(void)
 {
 #ifdef __APPLE__
 	NSApplicationLoad();
@@ -183,7 +183,7 @@
 }
 
 /*  things to be cleaned up  */
-void quit()
+void quit(void)
 {
 	if (running != 0) {
 		user_quit();

Modified: trunk/server/matrix.c
===================================================================
--- trunk/server/matrix.c	2007-10-18 23:55:05 UTC (rev 747)
+++ trunk/server/matrix.c	2007-10-18 23:55:18 UTC (rev 748)
@@ -34,7 +34,7 @@
 	0.0, 0.0, 1.0, 0.0,
 	0.0, 0.0, 0.0, 1.0
 };
-void myLoadIdentity()
+void myLoadIdentity(void)
 {
 	memcpy(MAT, Identity, sizeof(t_mtrx));
 }
@@ -97,7 +97,7 @@
 #define M(x, y)  Mm[I(x, y)]
 #define P(x, y)  Pm[I(x, y)]
 /* this inverts the matrix M into P in the gauss way */
-int myInvert()
+int myInvert(void)
 {
 	t_mtrx Mm, Pm;
 	int l, lh; /* line*/

Modified: trunk/server/mcp.c
===================================================================
--- trunk/server/mcp.c	2007-10-18 23:55:05 UTC (rev 747)
+++ trunk/server/mcp.c	2007-10-18 23:55:18 UTC (rev 748)
@@ -44,7 +44,7 @@
 };
 #define MCP_NEW_OBJECT 1
 /*  call when a new mcp connects */
-int mcp_init()
+int mcp_init(void)
 {
 	struct t_process *p;
 	uint32_t i;

Modified: trunk/server/navigation.c
===================================================================
--- trunk/server/navigation.c	2007-10-18 23:55:05 UTC (rev 747)
+++ trunk/server/navigation.c	2007-10-18 23:55:18 UTC (rev 748)
@@ -27,19 +27,19 @@
 int alphax, alphay;
 float view_x, view_y, view_z;
 extern int winw, winh;
-void navi_right()
+void navi_right(void)
 {
 	navi_pos(1, 0);
 }
-void navi_left()
+void navi_left(void)
 {
 	navi_pos(-1, 0);
 }
-void navi_fwd()
+void navi_fwd(void)
 {
 	navi_pos(0, 1);
 }
-void navi_back()
+void navi_back(void)
 {
 	navi_pos(0, -1);
 }

Modified: trunk/server/network.c
===================================================================
--- trunk/server/network.c	2007-10-18 23:55:05 UTC (rev 747)
+++ trunk/server/network.c	2007-10-18 23:55:18 UTC (rev 748)
@@ -59,7 +59,7 @@
 }
 #endif
 /*  maybe change the errors to fatal errors ... */
-int network_init()
+int network_init(void)
 {
 #ifdef SIGS
 	/* struct sigaction act;*/
@@ -90,7 +90,7 @@
 }
 
 /*  this basicly polls for new connection */
-int network_main()
+int network_main(void)
 {
 #ifdef TCP
 #ifdef SIGS
@@ -162,7 +162,7 @@
 	return(-1);
 }
 
-int network_quit()
+int network_quit(void)
 {
 #ifdef TCP
 	tcp_quit();

Modified: trunk/server/process.c
===================================================================
--- trunk/server/process.c	2007-10-18 23:55:05 UTC (rev 747)
+++ trunk/server/process.c	2007-10-18 23:55:18 UTC (rev 748)
@@ -126,7 +126,7 @@
 }
 
 /* this is to be called when a new connection appears. a pointer to the added process will be returned */
-struct t_process *process_add() {
+struct t_process *process_add(void) {
 	struct t_process *new_p;
 	procs_n++;
 	procs_p = realloc(procs_p, sizeof(struct t_process)*procs_n); /* increase the block */
@@ -218,7 +218,7 @@
 	}
 	return(0);  /*  successfully deleted */
 }
-int process_init()
+int process_init(void)
 {
 	procs_n = 0;
 	procs_p = NULL;
@@ -229,7 +229,7 @@
 	process_sys_init(mcp_p);
 	return(0);
 }
-int process_quit()
+int process_quit(void)
 {
 	int i;
 	s3dprintf(HIGH, "telling %d processes to go away", procs_n);

Modified: trunk/server/shm.c
===================================================================
--- trunk/server/shm.c	2007-10-18 23:55:05 UTC (rev 747)
+++ trunk/server/shm.c	2007-10-18 23:55:18 UTC (rev 748)
@@ -59,7 +59,7 @@
 {
 	return(oldkey + 1);
 }
-int shm_init()
+int shm_init(void)
 {
 	FILE *fp;
 	key_t key;
@@ -140,7 +140,7 @@
 	return(0);
 }
 
-int shm_quit()
+int shm_quit(void)
 {
 	/* detach from the segment: */
 	s3dprintf(LOW, "shm_quit()...");
@@ -172,7 +172,7 @@
 }
 
 extern int turn; /* set turn to 0 when timeslice is over */
-int shm_main()
+int shm_main(void)
 {
 	int      i/*,found*/;
 	struct buf_t   *dai; /* data in, data out */

Modified: trunk/server/tcp.c
===================================================================
--- trunk/server/tcp.c	2007-10-18 23:55:05 UTC (rev 747)
+++ trunk/server/tcp.c	2007-10-18 23:55:18 UTC (rev 748)
@@ -49,7 +49,7 @@
 extern uint8_t ibuf[MAXPLEN];
 extern int idc;
 int tcp_sockid;
-int tcp_init()
+int tcp_init(void)
 {
 	int yes = 1;
 	struct sockaddr_in my_addr;
@@ -84,7 +84,7 @@
 	return(0);
 
 }
-int tcp_quit()
+int tcp_quit(void)
 {
 	close(tcp_sockid);
 #ifdef WIN32
@@ -93,7 +93,7 @@
 	return(0);
 }
 /*  watches the port for new connections */
-int tcp_pollport()
+int tcp_pollport(void)
 {
 	fd_set     fs_port;   /*  filedescriptor set for listening port(s) */
 	int      newsd;   /*  new socket descriptor */
@@ -137,7 +137,7 @@
 extern int procs_n;
 /*  this is about looking for new data on the sockets */
 /*  returns 1 when there was new data. */
-int tcp_pollproc()
+int tcp_pollproc(void)
 {
 	fd_set     fs_proc;   /*  filedescriptor set for listening port(s) */
 	struct timeval   tv;   /*  time structure */

Modified: trunk/server/user.c
===================================================================
--- trunk/server/user.c	2007-10-18 23:55:05 UTC (rev 747)
+++ trunk/server/user.c	2007-10-18 23:55:18 UTC (rev 748)
@@ -27,7 +27,7 @@
 static int ox, oy;
 static int pressed;
 int but = -1;
-int user_init()
+int user_init(void)
 {
 	switch (frame_mode) {
 #ifdef G_GLUT
@@ -47,7 +47,7 @@
 	ox = oy = 0xFFFFFF;
 	return(0);
 }
-int user_main()
+int user_main(void)
 {
 	switch (frame_mode) {
 #ifdef G_GLUT
@@ -128,7 +128,7 @@
 	/* mouse changed? */
 	ptr_move(x, y);
 }
-int user_quit()
+int user_quit(void)
 {
 	return(0);
 }

Modified: trunk/server/user_glut.c
===================================================================
--- trunk/server/user_glut.c	2007-10-18 23:55:05 UTC (rev 747)
+++ trunk/server/user_glut.c	2007-10-18 23:55:18 UTC (rev 748)
@@ -32,7 +32,7 @@
 void passive_mouse_motion(int x, int y);
 extern int but;
 /*  init user input things for glut */
-int user_init_glut()
+int user_init_glut(void)
 {
 	s3dprintf(MED, "using GLUT for user input");
 	glutKeyboardFunc(keyboard);

Modified: trunk/server/user_sdl.c
===================================================================
--- trunk/server/user_sdl.c	2007-10-18 23:55:05 UTC (rev 747)
+++ trunk/server/user_sdl.c	2007-10-18 23:55:18 UTC (rev 748)
@@ -28,12 +28,12 @@
 /*  this is done right now by SDL-polling */
 
 extern int SDLFlags;
-int user_init_sdl()
+int user_init_sdl(void)
 {
 	SDL_EnableUNICODE(1);
 	return(0);
 }
-int user_main_sdl()
+int user_main_sdl(void)
 {
 	SDL_Event  event;
 	SDL_Surface *GLwin = NULL;
@@ -159,7 +159,7 @@
 	return(0);
 
 }
-int user_quit_sdl()
+int user_quit_sdl(void)
 {
 	return(0);
 }



From lazhur at mail.berlios.de  Fri Oct 19 01:55:28 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 01:55:28 +0200
Subject: [S3d-svn] r749 - trunk/libs3d
Message-ID: <200710182355.l9INtSVn029644@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 01:55:28 +0200 (Fri, 19 Oct 2007)
New Revision: 749

Modified:
   trunk/libs3d/s3dlib.h
Log:
Try to define NULL as pointer instead of an integer


Modified: trunk/libs3d/s3dlib.h
===================================================================
--- trunk/libs3d/s3dlib.h	2007-10-18 23:55:18 UTC (rev 748)
+++ trunk/libs3d/s3dlib.h	2007-10-18 23:55:28 UTC (rev 749)
@@ -53,9 +53,15 @@
 #define OF_TURN_SWAP  3   /*  logical ?! */
 #define TIMEOUT   100000
 #define MAX_CB   256   /*  as much as there are callbacks */
+
 #ifndef NULL
+#if !defined(__cplusplus)
+#define NULL ((void*)0)
+#else
 #define NULL 0
-#endif
+#endif /* !defined(__cplusplus) */
+#endif /* NULL */
+
 #define CON_NULL 0
 #define CON_SHM  1
 #define CON_TCP  2



From lazhur at mail.berlios.de  Fri Oct 19 01:55:51 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 01:55:51 +0200
Subject: [S3d-svn] r750 - trunk/apps/dot_mcp
Message-ID: <200710182355.l9INtpU5029703@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 01:55:50 +0200 (Fri, 19 Oct 2007)
New Revision: 750

Modified:
   trunk/apps/dot_mcp/dot_mcp.h
   trunk/apps/dot_mcp/main.c
Log:
dot_mcp: Correct function declaration of stop for event callback


Modified: trunk/apps/dot_mcp/dot_mcp.h
===================================================================
--- trunk/apps/dot_mcp/dot_mcp.h	2007-10-18 23:55:28 UTC (rev 749)
+++ trunk/apps/dot_mcp/dot_mcp.h	2007-10-18 23:55:50 UTC (rev 750)
@@ -21,5 +21,17 @@
  * Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
  */
 
+#include <config-s3d.h>
+
+#ifndef DOTMCPUNUSED
+#if defined(UNUSEDPARAM_ATTRIBUTE)
+#define DOTMCPUNUSED(x) (x)__attribute__((unused))
+#elif defined(UNUSEDPARAM_OMIT)
+#define DOTMCPUNUSED(x) /* x */
+#else
+#define DOTMCPUNUSED(x) x
+#endif
+#endif
+
 int menu_init();
 void menu_click(int oid);

Modified: trunk/apps/dot_mcp/main.c
===================================================================
--- trunk/apps/dot_mcp/main.c	2007-10-18 23:55:28 UTC (rev 749)
+++ trunk/apps/dot_mcp/main.c	2007-10-18 23:55:50 UTC (rev 750)
@@ -236,7 +236,7 @@
 	return(a);
 }
 
-int stop(void)
+int stop(struct s3d_evt* DOTMCPUNUSED(evt))
 {
 	s3d_quit();
 	return(0);



From lazhur at mail.berlios.de  Fri Oct 19 01:56:05 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 01:56:05 +0200
Subject: [S3d-svn] r751 - trunk/apps/olsrs3d
Message-ID: <200710182356.l9INu5Sv029750@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 01:56:04 +0200 (Fri, 19 Oct 2007)
New Revision: 751

Modified:
   trunk/apps/olsrs3d/main.c
Log:
olsrs3d: Correct function declaration of stop for event callback


Modified: trunk/apps/olsrs3d/main.c
===================================================================
--- trunk/apps/olsrs3d/main.c	2007-10-18 23:55:50 UTC (rev 750)
+++ trunk/apps/olsrs3d/main.c	2007-10-18 23:56:04 UTC (rev 751)
@@ -797,7 +797,7 @@
 
 }
 
-int stop(void)
+int stop(struct s3d_evt* OLSRS3DUNUSED(evt))
 {
 	s3d_quit();
 	net_quit();



From lazhur at mail.berlios.de  Fri Oct 19 01:56:19 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 01:56:19 +0200
Subject: [S3d-svn] r752 - trunk/libs3d
Message-ID: <200710182356.l9INuJJG029799@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 01:56:18 +0200 (Fri, 19 Oct 2007)
New Revision: 752

Modified:
   trunk/libs3d/fontselect.c
   trunk/libs3d/io.c
   trunk/libs3d/modelread.c
   trunk/libs3d/tcp.c
Log:
libs3d: Use NULL for pointers instead of plain 0


Modified: trunk/libs3d/fontselect.c
===================================================================
--- trunk/libs3d/fontselect.c	2007-10-18 23:56:04 UTC (rev 751)
+++ trunk/libs3d/fontselect.c	2007-10-18 23:56:18 UTC (rev 752)
@@ -41,16 +41,16 @@
 #ifdef WITH_FONTCONFIG
 char *s3d_findfont(char *mask)
 {
-	FcPattern *pattern = 0, *match = 0;
-	FcChar8 *file = 0;
+	FcPattern *pattern = NULL, *match = NULL;
+	FcChar8 *file = NULL;
 	FcResult result;
 
 	pattern = FcNameParse((FcChar8 *)mask);
-	FcConfigSubstitute(0, pattern, FcMatchPattern);
+	FcConfigSubstitute(NULL, pattern, FcMatchPattern);
 	FcDefaultSubstitute(pattern);
 	s3dprintf(LOW, "Looking for font %s", mask);
 
-	if (!(match = FcFontMatch(0, pattern, &result)))
+	if (!(match = FcFontMatch(NULL, pattern, &result)))
 		return NULL;
 	if (FcPatternGetString(match, FC_FILE, 0, &file) != FcResultMatch)
 		return NULL;

Modified: trunk/libs3d/io.c
===================================================================
--- trunk/libs3d/io.c	2007-10-18 23:56:04 UTC (rev 751)
+++ trunk/libs3d/io.c	2007-10-18 23:56:18 UTC (rev 752)
@@ -78,8 +78,8 @@
 	char     c;
 	int      lopt_idx;
 	struct option long_options[] = {
-		{"s3d-url", 1, 0, 0
-		}, {"help", 0, 0, 'h'}, {"s3d-help", 0, 0, 'h'}, {0, 0, 0, 0}
+		{"s3d-url", 1, NULL, 0
+		}, {"help", 0, NULL, 'h'}, {"s3d-help", 0, NULL, 'h'}, {NULL, 0, NULL, 0}
 	};
 	if ((argc == NULL) || (argv == NULL)) return(0); /* nothing to parse */
 	optind = 0;

Modified: trunk/libs3d/modelread.c
===================================================================
--- trunk/libs3d/modelread.c	2007-10-18 23:56:04 UTC (rev 751)
+++ trunk/libs3d/modelread.c	2007-10-18 23:56:18 UTC (rev 752)
@@ -110,7 +110,7 @@
 
 	}
 
-	return(0);
+	return(NULL);
 
 }
 

Modified: trunk/libs3d/tcp.c
===================================================================
--- trunk/libs3d/tcp.c	2007-10-18 23:56:04 UTC (rev 751)
+++ trunk/libs3d/tcp.c	2007-10-18 23:56:18 UTC (rev 752)
@@ -60,7 +60,7 @@
 	int      res;
 	/* char     *port=NULL;*/
 	struct sockaddr_in   sock;
-	struct hostent   *server = 0;
+	struct hostent   *server = NULL;
 #ifdef SIGS
 	_s3d_sigio = 0;
 #endif



From lazhur at mail.berlios.de  Fri Oct 19 01:56:32 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 01:56:32 +0200
Subject: [S3d-svn] r753 - trunk/apps/comptest
Message-ID: <200710182356.l9INuWvS029847@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 01:56:31 +0200 (Fri, 19 Oct 2007)
New Revision: 753

Modified:
   trunk/apps/comptest/comptest.c
Log:
comptest: Use NULL for pointers instead of plain 0


Modified: trunk/apps/comptest/comptest.c
===================================================================
--- trunk/apps/comptest/comptest.c	2007-10-18 23:56:18 UTC (rev 752)
+++ trunk/apps/comptest/comptest.c	2007-10-18 23:56:31 UTC (rev 753)
@@ -339,7 +339,7 @@
 	/* XSelectInput(dpy, win->id, ExposureMask);*/
 	win->format = XRenderFindVisualFormat(dpy, win->attr.visual);
 
-	if (win->format != 0) {
+	if (win->format != NULL) {
 		/* printf("add window: %d:%d size: %dx%d\n", win->attr.x, win->attr.y, win->attr.width, win->attr.height);*/
 		win->damage = XDamageCreate(dpy, win->id, XDamageReportNonEmpty);
 



From lazhur at mail.berlios.de  Fri Oct 19 01:56:40 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 01:56:40 +0200
Subject: [S3d-svn] r754 - trunk/apps/kism3d
Message-ID: <200710182356.l9INuecs029884@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 01:56:39 +0200 (Fri, 19 Oct 2007)
New Revision: 754

Modified:
   trunk/apps/kism3d/gui.c
Log:
kism3d: Use NULL for pointers instead of plain 0


Modified: trunk/apps/kism3d/gui.c
===================================================================
--- trunk/apps/kism3d/gui.c	2007-10-18 23:56:31 UTC (rev 753)
+++ trunk/apps/kism3d/gui.c	2007-10-18 23:56:39 UTC (rev 754)
@@ -448,6 +448,6 @@
 	}
 
 	Kism3d_aborted = 1;
-	return(0);
 
+	return(NULL);
 }



From lazhur at mail.berlios.de  Fri Oct 19 01:56:49 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 01:56:49 +0200
Subject: [S3d-svn] r755 - trunk/apps/olsrs3d
Message-ID: <200710182356.l9INunB1029923@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 01:56:48 +0200 (Fri, 19 Oct 2007)
New Revision: 755

Modified:
   trunk/apps/olsrs3d/process.c
Log:
olsrs3d: Use NULL for pointers instead of plain 0


Modified: trunk/apps/olsrs3d/process.c
===================================================================
--- trunk/apps/olsrs3d/process.c	2007-10-18 23:56:39 UTC (rev 754)
+++ trunk/apps/olsrs3d/process.c	2007-10-18 23:56:48 UTC (rev 755)
@@ -240,7 +240,7 @@
 		return (*olsr_node);
 
 	}
-	return(0);
+	return(NULL);
 }
 
 /*



From lazhur at mail.berlios.de  Fri Oct 19 01:57:01 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 01:57:01 +0200
Subject: [S3d-svn] r756 - trunk/apps/s3dfm
Message-ID: <200710182357.l9INv1Cn029983@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 01:57:01 +0200 (Fri, 19 Oct 2007)
New Revision: 756

Modified:
   trunk/apps/s3dfm/fs.c
   trunk/apps/s3dfm/parse.c
Log:
s3dfm: Use NULL for pointers instead of plain 0


Modified: trunk/apps/s3dfm/fs.c
===================================================================
--- trunk/apps/s3dfm/fs.c	2007-10-18 23:56:48 UTC (rev 755)
+++ trunk/apps/s3dfm/fs.c	2007-10-18 23:57:01 UTC (rev 756)
@@ -53,7 +53,7 @@
 	fl = malloc(sizeof(filelist));
 	fl->p = NULL;
 	fl->n = 0;
-	n = scandir(path, &namelist, 0, alphasort);
+	n = scandir(path, &namelist, NULL, alphasort);
 	if (n <= 2) { /* . and .. is always included. */
 		if (n < 0)
 			fs_error("fl_new():scandir()", path);

Modified: trunk/apps/s3dfm/parse.c
===================================================================
--- trunk/apps/s3dfm/parse.c	2007-10-18 23:56:48 UTC (rev 755)
+++ trunk/apps/s3dfm/parse.c	2007-10-18 23:57:01 UTC (rev 756)
@@ -44,7 +44,7 @@
 	for (i = 0;i < dir->n_sub;i++) {
 		dir->sub[i]->check = 1;
 	}
-	n = i = scandir(path, &namelist, 0, alphasort);
+	n = i = scandir(path, &namelist, NULL, alphasort);
 	if (n < 0) {
 		window_fs_errno(path);
 		return(-1);



From lazhur at mail.berlios.de  Fri Oct 19 01:57:16 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 01:57:16 +0200
Subject: [S3d-svn] r757 - trunk/apps/s3dosm
Message-ID: <200710182357.l9INvGrg030022@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 01:57:14 +0200 (Fri, 19 Oct 2007)
New Revision: 757

Modified:
   trunk/apps/s3dosm/db.c
   trunk/apps/s3dosm/draw.c
   trunk/apps/s3dosm/io.c
   trunk/apps/s3dosm/ui.c
Log:
s3dosm: Use NULL for pointers instead of plain 0


Modified: trunk/apps/s3dosm/db.c
===================================================================
--- trunk/apps/s3dosm/db.c	2007-10-18 23:57:01 UTC (rev 756)
+++ trunk/apps/s3dosm/db.c	2007-10-18 23:57:14 UTC (rev 757)
@@ -49,7 +49,7 @@
 	clean_string(mkey, key, MAXQ);
 	clean_string(mval, val, MAXQ);
 	snprintf(tagquery, MAXQ, "INSERT INTO tag VALUES (%d, '%s','%s' );", (int)obj->tagid, mkey, mval);
-	db_exec(tagquery, NULL, 0);
+	db_exec(tagquery, NULL, NULL);
 	return(0);
 }
 
@@ -65,7 +65,7 @@
 		snprintf(addquery, MAXQ, "INSERT INTO node (layer_id, node_id,latitude, longitude, altitude, visible, tag_id) VALUES (%d, %d, %f, %f, %f, %d, %d);",
 		         (int)node->base.layerid, (int)node->base.id, node->lat,  node->lon,  node->alt,  node->visible, (int)node->base.tagid);
 
-	db_exec(addquery, NULL, 0);
+	db_exec(addquery, NULL, NULL);
 	return(0);
 }
 
@@ -85,7 +85,7 @@
 	 else*/
 	snprintf(addquery, MAXQ, "INSERT INTO segment (layer_id, seg_id, node_from, node_to, tag_id) VALUES (%d, %d, %d, %d, %d);",
 	         (int)seg->base.layerid, (int)seg->base.id, (int)seg->from, (int)seg->to, (int)seg->base.tagid);
-	db_exec(addquery, NULL, 0);
+	db_exec(addquery, NULL, NULL);
 
 	return(0);
 }
@@ -95,7 +95,7 @@
 	char addquery[MAXQ];
 	way->base.tagid = tagid++;
 	snprintf(addquery, MAXQ, "INSERT INTO way (layer_id, way_id, tag_id) VALUES (%d, %d, %d);", (int)way->base.layerid, (int)way->base.id, (int)way->base.tagid);
-	db_exec(addquery, NULL, 0);
+	db_exec(addquery, NULL, NULL);
 	return(0);
 }
 
@@ -103,7 +103,7 @@
 {
 	char addquery[MAXQ];
 	snprintf(addquery, MAXQ, "UPDATE segment SET way_id=%d WHERE seg_id=%d AND layer_id=%d;", (int)way->base.id, seg_n, (int)way->base.layerid);
-	db_exec(addquery, NULL, 0);
+	db_exec(addquery, NULL, NULL);
 	return(0);
 }
 
@@ -119,7 +119,7 @@
 	db_exec(findquery, db_getint, &layerid);
 	if (layerid == -1) { /* need to add */
 		snprintf(addquery, MAXQ, "INSERT INTO layer(name) VALUES ('%s');", clayer);
-		db_exec(addquery, NULL, 0);
+		db_exec(addquery, NULL, NULL);
 		db_flush();
 		db_exec(findquery, db_getint, &layerid);
 	}
@@ -232,7 +232,7 @@
 
 static int db_really_exec(const char *query, sqlite3_callback callback, void *arg)
 {
-	char *zErrMsg = 0;
+	char *zErrMsg = NULL;
 	int rc;
 	if (SQLITE_OK != (rc = sqlite3_exec(db, query, callback, arg, &zErrMsg))) {
 		fprintf(stderr, "query: %s\n", query);
@@ -246,7 +246,7 @@
 void db_flush(void)
 {
 	if (qlen > 0)
-		db_really_exec(qbuf, NULL, 0);
+		db_really_exec(qbuf, NULL, NULL);
 	qbuf[0] = 0;
 	qlen = 0;
 }
@@ -300,16 +300,16 @@
 
 int db_create(void)
 {
-	db_exec("CREATE TABLE node (layer_id INT, node_id INTEGER , latitude DOUBLE PRECISION, longitude DOUBLE PRECISION, altitude DOUBLE PRECISION, visible BOOLEAN, tag_id INT, s3doid INT, PRIMARY KEY(layer_id,node_id));", NULL, 0);
-	db_exec("CREATE TABLE segment (layer_id INT, seg_id INTEGER, node_from INT, node_to INT, tag_id INT, way_id INT,PRIMARY KEY(layer_id,seg_id));", NULL, 0);
-	db_exec("CREATE TABLE way (layer_id INTEGER, way_id INTEGER, tag_id INT, s3doid INT, PRIMARY KEY(layer_id,way_id));", NULL, 0);
-	db_exec("CREATE TABLE layer (layer_id INTEGER, name TEXT, PRIMARY KEY(layer_id));", NULL, 0);
-	db_exec("CREATE TABLE tag (tag_id INT, tagkey TEXT, tagvalue TEXT, PRIMARY KEY(tag_id, tagkey));", NULL, 0);
+	db_exec("CREATE TABLE node (layer_id INT, node_id INTEGER , latitude DOUBLE PRECISION, longitude DOUBLE PRECISION, altitude DOUBLE PRECISION, visible BOOLEAN, tag_id INT, s3doid INT, PRIMARY KEY(layer_id,node_id));", NULL, NULL);
+	db_exec("CREATE TABLE segment (layer_id INT, seg_id INTEGER, node_from INT, node_to INT, tag_id INT, way_id INT,PRIMARY KEY(layer_id,seg_id));", NULL, NULL);
+	db_exec("CREATE TABLE way (layer_id INTEGER, way_id INTEGER, tag_id INT, s3doid INT, PRIMARY KEY(layer_id,way_id));", NULL, NULL);
+	db_exec("CREATE TABLE layer (layer_id INTEGER, name TEXT, PRIMARY KEY(layer_id));", NULL, NULL);
+	db_exec("CREATE TABLE tag (tag_id INT, tagkey TEXT, tagvalue TEXT, PRIMARY KEY(tag_id, tagkey));", NULL, NULL);
 
 	/*
-	db_exec("CREATE UNIQUE INDEX node_id_index ON node (node_id,layer_id);", NULL, 0);
-	db_exec("CREATE UNIQUE INDEX segment_id_index ON segment (seg_id,layer_id);", NULL, 0);
-	db_exec("CREATE UNIQUE INDEX tag_id_index ON tag (tag_id,tagkey);", NULL, 0);
+	db_exec("CREATE UNIQUE INDEX node_id_index ON node (node_id,layer_id);", NULL, NULL);
+	db_exec("CREATE UNIQUE INDEX segment_id_index ON segment (seg_id,layer_id);", NULL, NULL);
+	db_exec("CREATE UNIQUE INDEX tag_id_index ON tag (tag_id,tagkey);", NULL, NULL);
 	*/
 	db_flush();
 	return(0);

Modified: trunk/apps/s3dosm/draw.c
===================================================================
--- trunk/apps/s3dosm/draw.c	2007-10-18 23:57:01 UTC (rev 756)
+++ trunk/apps/s3dosm/draw.c	2007-10-18 23:57:14 UTC (rev 757)
@@ -360,7 +360,7 @@
 	s3d_link(way_obj, oidy);
 	s3d_flags_on(way_obj, S3D_OF_VISIBLE | S3D_OF_SELECTABLE);
 	snprintf(query, MAXQ, "UPDATE way SET s3doid=%d WHERE way_id=%d AND %s;", way_obj, lastid, filter);
-	db_exec(query, NULL, 0);
+	db_exec(query, NULL, NULL);
 
 	waylist_n = 0;
 

Modified: trunk/apps/s3dosm/io.c
===================================================================
--- trunk/apps/s3dosm/io.c	2007-10-18 23:57:01 UTC (rev 756)
+++ trunk/apps/s3dosm/io.c	2007-10-18 23:57:14 UTC (rev 757)
@@ -64,8 +64,8 @@
 	float     minlat, minlon, maxlat, maxlon;
 	char      info[1024];
 	struct option long_options[] = {
-		{"help", 0, 0, 'h'
-		}, {"osm", 1, 0, 'o'}, {0, 0, 0, 0}
+		{"help", 0, NULL, 'h'
+		}, {"osm", 1, NULL, 'o'}, {NULL, 0, NULL, 0}
 	};
 	optind = 0;
 	opterr = 0;

Modified: trunk/apps/s3dosm/ui.c
===================================================================
--- trunk/apps/s3dosm/ui.c	2007-10-18 23:57:01 UTC (rev 756)
+++ trunk/apps/s3dosm/ui.c	2007-10-18 23:57:14 UTC (rev 757)
@@ -111,9 +111,9 @@
 	char query[MAXQ];
 	if (s3dw_handle_click(evt)) return(0);
 	snprintf(query, MAXQ, "SELECT * FROM node WHERE s3doid=%d;", oid);
-	db_exec(query, ui_getinfo_node, 0);
+	db_exec(query, ui_getinfo_node, NULL);
 	snprintf(query, MAXQ, "SELECT * FROM way WHERE s3doid=%d;", oid);
-	db_exec(query, ui_getinfo_way, 0);
+	db_exec(query, ui_getinfo_way, NULL);
 
 	return(0);
 }



From lazhur at mail.berlios.de  Fri Oct 19 01:57:32 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 01:57:32 +0200
Subject: [S3d-svn] r758 - trunk/apps/s3dvt
Message-ID: <200710182357.l9INvWSN030077@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 01:57:32 +0200 (Fri, 19 Oct 2007)
New Revision: 758

Modified:
   trunk/apps/s3dvt/main.c
Log:
s3dvt: Send a string to write(..) instead of zero constant


Modified: trunk/apps/s3dvt/main.c
===================================================================
--- trunk/apps/s3dvt/main.c	2007-10-18 23:57:14 UTC (rev 757)
+++ trunk/apps/s3dvt/main.c	2007-10-18 23:57:32 UTC (rev 758)
@@ -248,7 +248,7 @@
 	printf("unloading tty!!\n");
 	switch (term_mode) {
 	case M_PTY:
-		write(curpty, '\0', 1);  /*  send an EOF, just in case */
+		write(curpty, "\0", 1);  /*  send an EOF, just in case */
 		close(curpty);
 		close(curtty);
 		/* kill(pid); */



From lazhur at mail.berlios.de  Fri Oct 19 01:57:40 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 01:57:40 +0200
Subject: [S3d-svn] r759 - trunk/apps/s3d_x11gate
Message-ID: <200710182357.l9INve1g030112@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 01:57:40 +0200 (Fri, 19 Oct 2007)
New Revision: 759

Modified:
   trunk/apps/s3d_x11gate/s3d_x11gate.c
Log:
s3d_x11gate: Use NULL for pointers instead of plain 0


Modified: trunk/apps/s3d_x11gate/s3d_x11gate.c
===================================================================
--- trunk/apps/s3d_x11gate/s3d_x11gate.c	2007-10-18 23:57:32 UTC (rev 758)
+++ trunk/apps/s3d_x11gate/s3d_x11gate.c	2007-10-18 23:57:40 UTC (rev 759)
@@ -49,7 +49,7 @@
 
 int oid;
 XImage *image;
-Display *dpy = 0;
+Display *dpy = NULL;
 int window, scr;
 unsigned int width, height, height, depth;
 int format;
@@ -220,8 +220,8 @@
 
 		image = XShmCreateImage(dpy, visual, depth, ZPixmap, NULL, &shminfo, width, height);
 		shminfo.shmid = shmget(IPC_PRIVATE, image->bytes_per_line * image->height, IPC_CREAT | 0777);
-		shminfo.shmaddr = image->data = shmat(shminfo.shmid, 0, 0);
-		shmctl(shminfo.shmid, IPC_RMID, 0);
+		shminfo.shmaddr = image->data = shmat(shminfo.shmid, NULL, 0);
+		shmctl(shminfo.shmid, IPC_RMID, NULL);
 		shminfo.readOnly = False;
 		if (!XShmAttach(dpy, &shminfo))
 			printf("cannot use the shared memory segment .. :( \n");



From lazhur at mail.berlios.de  Fri Oct 19 01:57:49 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 01:57:49 +0200
Subject: [S3d-svn] r760 - trunk/example
Message-ID: <200710182357.l9INvnb3030160@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 01:57:49 +0200 (Fri, 19 Oct 2007)
New Revision: 760

Modified:
   trunk/example/filebrowser.c
Log:
examples: Use NULL for pointers instead of plain 0


Modified: trunk/example/filebrowser.c
===================================================================
--- trunk/example/filebrowser.c	2007-10-18 23:57:40 UTC (rev 759)
+++ trunk/example/filebrowser.c	2007-10-18 23:57:49 UTC (rev 760)
@@ -75,7 +75,7 @@
 		free(item);
 
 	}
-	n = i = scandir(dir, &namelist, 0, alphasort);
+	n = i = scandir(dir, &namelist, NULL, alphasort);
 	if (n < 0) {
 		perror("scandir");
 		return(-1);



From lazhur at mail.berlios.de  Fri Oct 19 01:58:00 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 01:58:00 +0200
Subject: [S3d-svn] r761 - trunk/server
Message-ID: <200710182358.l9INw0qJ030213@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 01:58:00 +0200 (Fri, 19 Oct 2007)
New Revision: 761

Modified:
   trunk/server/graphics_sdl.c
   trunk/server/main.c
   trunk/server/shm.c
Log:
server: Use NULL for pointers instead of plain 0


Modified: trunk/server/graphics_sdl.c
===================================================================
--- trunk/server/graphics_sdl.c	2007-10-18 23:57:49 UTC (rev 760)
+++ trunk/server/graphics_sdl.c	2007-10-18 23:58:00 UTC (rev 761)
@@ -78,7 +78,7 @@
 			} else
 				errsf("SDL_SetVideoMode()", SDL_GetError());
 		}
-	} while (GLwin == 0);
+	} while (GLwin == NULL);
 	switch (SDL_GetVideoInfo()->vfmt->BitsPerPixel) {
 	case 8:
 		rgb_size[0] = 3;

Modified: trunk/server/main.c
===================================================================
--- trunk/server/main.c	2007-10-18 23:57:49 UTC (rev 760)
+++ trunk/server/main.c	2007-10-18 23:58:00 UTC (rev 761)
@@ -206,8 +206,8 @@
 	int      lopt_idx;
 	char     c;
 	struct option long_options[] = {
-		{"multisample",  1, 0, 'm'
-		}, {"rc",    1, 0, 'r'}, {"help",   0, 0, 'h'}, {"use-glut",  0, 0, 'g'}, {"use-sdl",   0, 0, 's'}, {"no-rc",   0, 0, 'n'}, {0, 0, 0, 0}
+		{"multisample",  1, NULL, 'm'
+		}, {"rc",    1, NULL, 'r'}, {"help",   0, NULL, 'h'}, {"use-glut",  0, NULL, 'g'}, {"use-sdl",   0, NULL, 's'}, {"no-rc",   0, NULL, 'n'}, {NULL, 0, NULL, 0}
 	};
 	while (-1 != (c = getopt_long(argc, argv, "?hgsnr:m:", long_options, &lopt_idx))) {
 		switch (c) {

Modified: trunk/server/shm.c
===================================================================
--- trunk/server/shm.c	2007-10-18 23:57:49 UTC (rev 760)
+++ trunk/server/shm.c	2007-10-18 23:58:00 UTC (rev 761)
@@ -147,7 +147,7 @@
 	unlink(ftoken);
 	if (data != NULL) {
 		data[0] = data[1] = 0;
-		data = 0;
+		data = NULL;
 		s3dprintf(MED, "shm_quit():removing init block");
 		if (shmdt(data) == -1)
 			errn("shm_quit():shmdt()", errno);



From lazhur at mail.berlios.de  Fri Oct 19 01:58:10 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 01:58:10 +0200
Subject: [S3d-svn] r762 - in trunk: apps/dot_mcp apps/meshs3d apps/olsrs3d
	apps/s3dfm apps/s3dosm apps/s3dvt libs3d libs3dw
Message-ID: <200710182358.l9INwA87030293@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 01:58:08 +0200 (Fri, 19 Oct 2007)
New Revision: 762

Modified:
   trunk/apps/dot_mcp/dot_mcp.h
   trunk/apps/meshs3d/meshs3d.h
   trunk/apps/olsrs3d/olsrs3d.h
   trunk/apps/olsrs3d/search.h
   trunk/apps/s3dfm/s3dfm.h
   trunk/apps/s3dosm/http_fetcher.h
   trunk/apps/s3dosm/olsrs3d.h
   trunk/apps/s3dosm/s3dosm.h
   trunk/apps/s3dvt/s3dvt.h
   trunk/libs3d/s3d.h
   trunk/libs3dw/s3dw.h
   trunk/libs3dw/s3dw_int.h
Log:
Convert headers to ANSI function declarations


Modified: trunk/apps/dot_mcp/dot_mcp.h
===================================================================
--- trunk/apps/dot_mcp/dot_mcp.h	2007-10-18 23:58:00 UTC (rev 761)
+++ trunk/apps/dot_mcp/dot_mcp.h	2007-10-18 23:58:08 UTC (rev 762)
@@ -33,5 +33,5 @@
 #endif
 #endif
 
-int menu_init();
+int menu_init(void);
 void menu_click(int oid);

Modified: trunk/apps/meshs3d/meshs3d.h
===================================================================
--- trunk/apps/meshs3d/meshs3d.h	2007-10-18 23:58:00 UTC (rev 761)
+++ trunk/apps/meshs3d/meshs3d.h	2007-10-18 23:58:08 UTC (rev 762)
@@ -97,20 +97,20 @@
 
 /* process.c */
 /*
-void lst_initialize();
+void lst_initialize(void);
 void lst_add(int id,struct olsr_node **olsr_node);
 void lst_del(int id);
 struct olsr_node *lst_search(int id);
-void lst_out();
+void lst_out(void);
 struct olsr_node *move_lst_ptr(int *id);
 */
-int process_main();
-void process_init();
+int process_main(void);
+void process_init(void);
 
 /* net.c */
 int net_init(char *host);
-int net_main();
-int net_quit();
+int net_main(void);
+int net_quit(void);
 
 /* main */
 /*

Modified: trunk/apps/olsrs3d/olsrs3d.h
===================================================================
--- trunk/apps/olsrs3d/olsrs3d.h	2007-10-18 23:58:00 UTC (rev 761)
+++ trunk/apps/olsrs3d/olsrs3d.h	2007-10-18 23:58:08 UTC (rev 762)
@@ -65,17 +65,17 @@
 extern int move_cam_to;
 
 /* process */
-void lst_initialize();
+void lst_initialize(void);
 void lst_add(int id, struct olsr_node **olsr_node);
 void lst_del(int id);
 struct olsr_node *lst_search(int id);
-void lst_out();
+void lst_out(void);
 struct olsr_node *move_lst_ptr(int *id);
-int process_main();
+int process_main(void);
 /* net */
 int net_init(char *host);
-int net_main();
-int net_quit();
+int net_main(void);
+int net_quit(void);
 /* main */
 void out_of_mem(void);
 void print_etx(void);

Modified: trunk/apps/olsrs3d/search.h
===================================================================
--- trunk/apps/olsrs3d/search.h	2007-10-18 23:58:00 UTC (rev 761)
+++ trunk/apps/olsrs3d/search.h	2007-10-18 23:58:08 UTC (rev 762)
@@ -38,4 +38,4 @@
 void follow_node(float cam_position_t[], float cam_position_r[], float rotate);
 void follow_node_by_click(struct olsr_node *olsr_node);
 
-void show_search_window();
+void show_search_window(void);

Modified: trunk/apps/s3dfm/s3dfm.h
===================================================================
--- trunk/apps/s3dfm/s3dfm.h	2007-10-18 23:58:00 UTC (rev 761)
+++ trunk/apps/s3dfm/s3dfm.h	2007-10-18 23:58:08 UTC (rev 762)
@@ -135,7 +135,7 @@
 void    ani_finish(t_node *f, int i);
 void    ani_iterate(t_node *f);
 int    ani_check(t_node *f);
-void    ani_mate();
+void    ani_mate(void);
 /* box.c */
 void    box_draw(t_node *dir);
 void     box_draw_icons(t_node *dir);
@@ -150,10 +150,10 @@
 void    box_focus_color(t_node *dir, int on);
 /* dialog.c */
 void   close_win(s3dw_widget *button);
-void   window_help();
+void   window_help(void);
 void    window_fs(s3dw_widget *button);
-void   window_fs_another();
-void   window_fs_nothing();
+void   window_fs_another(void);
+void   window_fs_nothing(void);
 void   window_fs_errno(char *errmsg);
 void   window_fs_abort(s3dw_widget *button);
 void   window_copy(char *path);
@@ -161,8 +161,8 @@
 void   window_mkdir(char *path);
 void   window_move(char *path);
 void   window_info(char *path);
-void   window_fsani();
-void    window_unlink();
+void   window_fsani(void);
+void    window_unlink(void);
 /* event.c */
 int    event_click(struct s3d_evt *evt);
 int    event_key(struct s3d_evt *evt);

Modified: trunk/apps/s3dosm/http_fetcher.h
===================================================================
--- trunk/apps/s3dosm/http_fetcher.h	2007-10-18 23:58:00 UTC (rev 761)
+++ trunk/apps/s3dosm/http_fetcher.h	2007-10-18 23:58:08 UTC (rev 762)
@@ -124,7 +124,7 @@
  * so if you need to hold on to the message for a while you should make
  * a copy of it.
  */
-const char *http_strerror();
+const char *http_strerror(void);
 
 
 

Modified: trunk/apps/s3dosm/olsrs3d.h
===================================================================
--- trunk/apps/s3dosm/olsrs3d.h	2007-10-18 23:58:00 UTC (rev 761)
+++ trunk/apps/s3dosm/olsrs3d.h	2007-10-18 23:58:08 UTC (rev 762)
@@ -57,17 +57,17 @@
 extern int move_cam_to;
 
 /* process */
-void lst_initialize();
+void lst_initialize(void);
 void lst_add(int id, struct olsr_node **olsr_node);
 void lst_del(int id);
 struct olsr_node *lst_search(int id);
-void lst_out();
+void lst_out(void);
 struct olsr_node *move_lst_ptr(int *id);
-int process_main();
+int process_main(void);
 /* net */
 int net_init(char *host);
-int net_main();
-int net_quit();
+int net_main(void);
+int net_quit(void);
 /* main */
 void out_of_mem(void);
 void print_etx(void);

Modified: trunk/apps/s3dosm/s3dosm.h
===================================================================
--- trunk/apps/s3dosm/s3dosm.h	2007-10-18 23:58:00 UTC (rev 761)
+++ trunk/apps/s3dosm/s3dosm.h	2007-10-18 23:58:08 UTC (rev 762)
@@ -128,16 +128,16 @@
 void    segment_init(segment_t *nsegment);
 void    way_init(way_t *nway);
 object_t  *object_new(int key);
-node_t   *node_new();
-segment_t  *segment_new();
-layer_t  *layer_new();
-way_t   *way_new();
+node_t   *node_new(void);
+segment_t  *segment_new(void);
+layer_t  *layer_new(void);
+way_t   *way_new(void);
 void    node_free(node_t *node);
 void    segment_free(segment_t *segment);
 void    way_free(way_t *way);
 void    layerset_add(layer_t *layer);
 /* main.c */
-void mainloop();
+void mainloop(void);
 /* osm.c */
 void debug_obj(object_t *obj, void *dummy);
 layer_t *parse_osm(char *buf, int length);
@@ -147,15 +147,15 @@
 layer_t *parse_kismet(char *buf, int length);
 layer_t *load_kismet_file(char *filename);
 /* draw.c */
-void draw_all_layers();
+void draw_all_layers(void);
 int draw_layer(layer_t *layer);
 void calc_earth_to_eukl(float lat, float lon, float alt, float *x);
 void draw_translate_icon(int user_icon, float la, float lo);
 /* nav.c */
-void nav_main();
-void nav_init();
+void nav_main(void);
+void nav_init(void);
 void nav_center(float la, float lo);
-void nav_autocenter();
+void nav_autocenter(void);
 void nav_campos(float campos[3], float earthpos[3]);
 float get_heading(float la1, float lo1, float la2, float lo2);
 extern int oidy;
@@ -180,19 +180,19 @@
 int db_insert_way_seg(way_t *way, int seg_n);
 int db_insert_object(object_t *obj);
 int db_init(char *dbFile);
-int db_quit();
-int db_create();
+int db_quit(void);
+int db_create(void);
 int db_insert_layer(char *layer_name);
-void db_flush();
+void db_flush(void);
 int callback(void *NotUsed, int argc, char **argv, char **azColName);
 /* gps.c */
 int gps_init(char *gpshost);
-int gps_main();
-int gps_quit();
+int gps_main(void);
+int gps_quit(void);
 /* ui.c */
-int ui_init();
+int ui_init(void);
 int load_window(char *text);
-int load_window_remove();
+int load_window_remove(void);
 int load_update_status(float percent);
 /* olsrs3d.c */
 #define NODEHEIGHT 10
@@ -200,7 +200,7 @@
 int olsr_object_info(struct s3d_evt *hrmz);
 int olsr_parse_args(int argc, char **argv);
 int olsr_keypress(struct s3d_evt *event);
-void olsr_main();
-int olsr_init();
-int olsr_quit();
+void olsr_main(void);
+int olsr_init(void);
+int olsr_quit(void);
 int olsr_parse_args(int argc, char **argv);

Modified: trunk/apps/s3dvt/s3dvt.h
===================================================================
--- trunk/apps/s3dvt/s3dvt.h	2007-10-18 23:58:00 UTC (rev 761)
+++ trunk/apps/s3dvt/s3dvt.h	2007-10-18 23:58:08 UTC (rev 762)
@@ -59,7 +59,7 @@
 
 extern t_line line[MAX_LINES+1];
 /* main.c */
-void paintit();
+void paintit(void);
 void term_addchar(char toprint);
 /* terminal.c */
 void AddChar(char *_toadd);

Modified: trunk/libs3d/s3d.h
===================================================================
--- trunk/libs3d/s3d.h	2007-10-18 23:58:00 UTC (rev 761)
+++ trunk/libs3d/s3d.h	2007-10-18 23:58:08 UTC (rev 762)
@@ -84,10 +84,10 @@
 #ifdef HAVE_GCCVISIBILITY
 #pragma GCC visibility push(default) /* Only export following functions */
 #endif
-void s3d_usage();
+void s3d_usage(void);
 int s3d_init(int *argc, char ***argv, char *name);
-int s3d_quit();
-int s3d_mainloop(void (*f)());
+int s3d_quit(void);
+int s3d_mainloop(void (*f)(void));
 
 /* object manipulations */
 int s3d_push_vertex(int object, float x, float y, float z);
@@ -138,7 +138,7 @@
 int s3d_load_polygon_tex_coords(int object, float *tbuf, uint32_t start, uint16_t n);
 int s3d_load_texture(int object, uint32_t tex, uint16_t xpos, uint16_t ypos, uint16_t w, uint16_t h, uint8_t *data);
 
-int s3d_new_object();
+int s3d_new_object(void);
 int s3d_del_object(int oid);
 
 int s3d_clone(int oid);
@@ -171,7 +171,7 @@
 
 /* event handlers */
 void s3d_push_event(struct s3d_evt *newevt);
-struct s3d_evt *s3d_pop_event();
+struct s3d_evt *s3d_pop_event(void);
 struct s3d_evt *s3d_find_event(uint8_t event);
 int s3d_delete_event(struct s3d_evt *devt);
 
@@ -179,13 +179,13 @@
 void s3d_clear_callback(uint8_t event);
 void s3d_ignore_callback(uint8_t event);
 s3d_cb s3d_get_callback(uint8_t event);
-void s3d_process_stack();
+void s3d_process_stack(void);
 
 /* mcp special */
 int s3d_mcp_focus(int object);
 
 /* for apps which don't employ s3d_mainloop() */
-int s3d_net_check();
+int s3d_net_check(void);
 #ifdef HAVE_GCCVISIBILITY
 #pragma GCC visibility pop
 #endif

Modified: trunk/libs3dw/s3dw.h
===================================================================
--- trunk/libs3dw/s3dw.h	2007-10-18 23:58:00 UTC (rev 761)
+++ trunk/libs3dw/s3dw.h	2007-10-18 23:58:08 UTC (rev 762)
@@ -172,7 +172,7 @@
 void      s3dw_label_change_text(s3dw_label *label, char *text);
 s3dw_surface   *s3dw_surface_new(char *title, float width, float height);
 
-s3dw_widget   *s3dw_getroot();
+s3dw_widget   *s3dw_getroot(void);
 void     s3dw_moveit(s3dw_widget *widget);
 void      s3dw_delete(s3dw_widget *widget);
 void      s3dw_show(s3dw_widget *widget);
@@ -189,7 +189,7 @@
 int      s3dw_handle_key(struct s3d_evt *evt);
 int      s3dw_object_info(struct s3d_evt *evt);
 
-void      s3dw_ani_mate();
+void      s3dw_ani_mate(void);
 #ifdef HAVE_GCCVISIBILITY
 #pragma GCC visibility pop
 #endif

Modified: trunk/libs3dw/s3dw_int.h
===================================================================
--- trunk/libs3dw/s3dw_int.h	2007-10-18 23:58:00 UTC (rev 761)
+++ trunk/libs3dw/s3dw_int.h	2007-10-18 23:58:08 UTC (rev 762)
@@ -34,7 +34,7 @@
 extern s3dw_key_callback s3dwcb_key[S3DW_NTYPES];
 
 /* root.c */
-s3dw_widget *s3dw_getroot();
+s3dw_widget *s3dw_getroot(void);
 void s3dw_nothing(s3dw_widget *widget);
 int s3dw_click_nothing(s3dw_widget *widget, uint32_t dummy);
 int s3dw_key_nothing(s3dw_widget *widget, struct s3d_key_event *dummy);
@@ -112,10 +112,10 @@
 void s3dw_ani_doit(s3dw_widget *f);
 void s3dw_ani_finish(s3dw_widget *f, int i);
 void s3dw_ani_iterate(s3dw_widget *f);
-void s3dw_ani_needarr();
+void s3dw_ani_needarr(void);
 int  s3dw_ani_check(s3dw_widget *f);
 /* arrange.c */
-void s3dw_arrange();
+void s3dw_arrange(void);
 void s3dw_arr_widgetcenter(s3dw_widget *widget, float *center);
 void s3dw_arr_normdir(float *dir);
-void s3dw_turn();
+void s3dw_turn(void);



From lazhur at mail.berlios.de  Fri Oct 19 01:58:17 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 01:58:17 +0200
Subject: [S3d-svn] r763 - trunk/libs3dw
Message-ID: <200710182358.l9INwHSW030353@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 01:58:17 +0200 (Fri, 19 Oct 2007)
New Revision: 763

Modified:
   trunk/libs3dw/s3dw_int.h
Log:
Sync declaration and definition of s3dw_widget_new


Modified: trunk/libs3dw/s3dw_int.h
===================================================================
--- trunk/libs3dw/s3dw_int.h	2007-10-18 23:58:08 UTC (rev 762)
+++ trunk/libs3dw/s3dw_int.h	2007-10-18 23:58:17 UTC (rev 763)
@@ -41,7 +41,7 @@
 void s3dw_root_destroy(s3dw_widget *widget);
 char *s3dw_get_type_string(int type);
 /* widget.c */
-s3dw_widget *s3dw_widget_new();
+s3dw_widget* s3dw_widget_new(s3dw_widget *widget);
 void s3dw_widget_append(s3dw_widget *parent, s3dw_widget *widget);
 void s3dw_widget_visible(s3dw_widget *widget);
 int s3dw_widget_event_click(s3dw_widget *widget, uint32_t oid);



From lazhur at mail.berlios.de  Fri Oct 19 01:58:25 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 01:58:25 +0200
Subject: [S3d-svn] r764 - trunk/libs3d
Message-ID: <200710182358.l9INwPWS030414@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 01:58:25 +0200 (Fri, 19 Oct 2007)
New Revision: 764

Modified:
   trunk/libs3d/s3dlib.h
Log:
Sync declaration and definition of _tcp_init


Modified: trunk/libs3d/s3dlib.h
===================================================================
--- trunk/libs3d/s3dlib.h	2007-10-18 23:58:17 UTC (rev 763)
+++ trunk/libs3d/s3dlib.h	2007-10-18 23:58:25 UTC (rev 764)
@@ -115,7 +115,7 @@
 int s3d_net_init(char *urlc);
 #ifdef TCP
 /* tcp.c */
-int _tcp_init();
+int _tcp_init(char *sv, int pn);
 int _tcp_quit();
 int _s3d_tcp_net_receive();
 int tcp_writen(char *str, int s);



From lazhur at mail.berlios.de  Fri Oct 19 01:58:35 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 01:58:35 +0200
Subject: [S3d-svn] r765 - trunk/server
Message-ID: <200710182358.l9INwZdQ030487@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 01:58:34 +0200 (Fri, 19 Oct 2007)
New Revision: 765

Modified:
   trunk/server/event.c
   trunk/server/global.h
   trunk/server/mcp.c
   trunk/server/process.c
   trunk/server/proto.c
Log:
Use S3D_NAME_MAX instead of NAME_MAX which is also used by limits.h


Modified: trunk/server/event.c
===================================================================
--- trunk/server/event.c	2007-10-18 23:58:25 UTC (rev 764)
+++ trunk/server/event.c	2007-10-18 23:58:34 UTC (rev 765)
@@ -75,7 +75,7 @@
 /*  tell the client something about us */
 int event_init(struct t_process *p)
 {
-	char s[NAME_MAX+3];
+	char s[S3D_NAME_MAX+3];
 	sprintf(s, "%c%c%c%s", S3D_SERVER_MAJOR, S3D_SERVER_MINOR, S3D_SERVER_PATCH, S3D_SERVER_NAME); /* thanks award */
 	prot_com_out(p, S3D_P_S_INIT, (uint8_t *)s, strlen(S3D_SERVER_NAME) + 4);
 	return(0);
@@ -133,18 +133,18 @@
 
 		mo.r = p->object[oid]->r;
 
-		memset(mo.name, 0, NAME_MAX);
+		memset(mo.name, 0, S3D_NAME_MAX);
 		switch (o->oflags&OF_TYPE) {
 		case OF_VIRTUAL:
 			ap = get_proc_by_pid(o->n_mat);
-			strncpy(mo.name, ap->name, NAME_MAX);
+			strncpy(mo.name, ap->name, S3D_NAME_MAX);
 			break;
 		case OF_CAM:
 			mo.scale = (float)((float)winw) / winh; /* give aspect ratio to program */
-			strncpy(mo.name, "sys_camera0", NAME_MAX);
+			strncpy(mo.name, "sys_camera0", S3D_NAME_MAX);
 			break;
 		case OF_POINTER:
-			strncpy(mo.name, "sys_pointer0", NAME_MAX);
+			strncpy(mo.name, "sys_pointer0", S3D_NAME_MAX);
 			break;
 
 		}

Modified: trunk/server/global.h
===================================================================
--- trunk/server/global.h	2007-10-18 23:58:25 UTC (rev 764)
+++ trunk/server/global.h	2007-10-18 23:58:34 UTC (rev 765)
@@ -45,7 +45,11 @@
 #define S3DUNUSED(x) x
 #endif
 #endif
-#define NAME_MAX 256   /*  limit for names [e.g. process names] */
+
+#ifndef S3D_NAME_MAX
+#define S3D_NAME_MAX 256   /*  limit for names [e.g. process names] */
+#endif /* S3D_NAME_MAX */
+
 #define MCP   0   /*  the mcp's pid  */
 #define TEXTURE_MAX_W 4096
 #define TEXTURE_MAX_H 4096
@@ -168,7 +172,7 @@
 
 /*  l_* is a list-type, t_* is the type itself */
 struct t_process {
-	char       name[NAME_MAX];   /*  process name */
+	char       name[S3D_NAME_MAX];   /*  process name */
 	struct t_obj  **object;     /*  initial pointer to object list */
 	int32_t      n_obj;     /*  number of objects */
 	int32_t      biggest_obj;    /*  the biggest object */
@@ -193,7 +197,7 @@
 	float rot_x, rot_y, rot_z;
 	float scale;
 	float r;
-	char name[NAME_MAX];
+	char name[S3D_NAME_MAX];
 };
 enum {
 	zero,

Modified: trunk/server/mcp.c
===================================================================
--- trunk/server/mcp.c	2007-10-18 23:58:25 UTC (rev 764)
+++ trunk/server/mcp.c	2007-10-18 23:58:34 UTC (rev 765)
@@ -40,7 +40,7 @@
 	float trans_x, trans_y, trans_z;
 	float r;
 	/*  char event; */
-	char name[NAME_MAX];
+	char name[S3D_NAME_MAX];
 };
 #define MCP_NEW_OBJECT 1
 /*  call when a new mcp connects */
@@ -77,7 +77,7 @@
 	mo.r = p->object[mcp_oid]->r;
 	/*  mo.event=MCP_NEW_OBJECT; */
 	ap = get_proc_by_pid(p->object[mcp_oid]->n_mat);
-	strncpy(mo.name, ap->name, NAME_MAX);
+	strncpy(mo.name, ap->name, S3D_NAME_MAX);
 	prot_com_out(p, S3D_P_MCP_OBJECT, (uint8_t *)&mo, sizeof(struct mcp_object));
 	return(0);
 }

Modified: trunk/server/process.c
===================================================================
--- trunk/server/process.c	2007-10-18 23:58:25 UTC (rev 764)
+++ trunk/server/process.c	2007-10-18 23:58:34 UTC (rev 765)
@@ -64,7 +64,7 @@
 			return(NULL);
 		}
 	} else {
-		strncpy(p->name, name, NAME_MAX);
+		strncpy(p->name, name, S3D_NAME_MAX);
 		process_sys_init(p);
 
 		/* register the new process in the mcp */
@@ -224,7 +224,7 @@
 	procs_p = NULL;
 	process_add();
 	/* set up mcp */
-	strncpy(mcp_p->name, "mcp", NAME_MAX);
+	strncpy(mcp_p->name, "mcp", S3D_NAME_MAX);
 	mcp_p->con_type = CON_NULL;
 	process_sys_init(mcp_p);
 	return(0);

Modified: trunk/server/proto.c
===================================================================
--- trunk/server/proto.c	2007-10-18 23:58:25 UTC (rev 764)
+++ trunk/server/proto.c	2007-10-18 23:58:34 UTC (rev 765)
@@ -43,7 +43,7 @@
 {
 	uint8_t  command;
 	int  i;
-	char  name[NAME_MAX];
+	char  name[S3D_NAME_MAX];
 	struct t_process *np;
 	uint8_t *buf, *cptr = NULL;
 	uint16_t length;
@@ -66,8 +66,8 @@
 	/*  if (mcp_oid==-1) s3dprintf(HIGH,"couldn't find mcp-oid for pid %d!",p->id); */
 	switch (command) {
 	case S3D_P_C_INIT:
-		memset(name, 0, NAME_MAX);
-		if (length > NAME_MAX) i = NAME_MAX;
+		memset(name, 0, S3D_NAME_MAX);
+		if (length > S3D_NAME_MAX) i = S3D_NAME_MAX;
 		else i = length;
 		strncpy(name, (char *)buf, i);
 		s3dprintf(LOW, "[%d]\"%s\" logged in", p->id, name);



From lazhur at mail.berlios.de  Fri Oct 19 01:58:44 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 01:58:44 +0200
Subject: [S3d-svn] r766 - trunk/libs3d
Message-ID: <200710182358.l9INwiHF030554@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 01:58:43 +0200 (Fri, 19 Oct 2007)
New Revision: 766

Modified:
   trunk/libs3d/event.c
   trunk/libs3d/freetype.c
   trunk/libs3d/io.c
   trunk/libs3d/modelread.c
   trunk/libs3d/network.c
   trunk/libs3d/sei_misc.c
   trunk/libs3d/sei_tri.c
   trunk/libs3d/shm.c
   trunk/libs3d/tcp.c
Log:
libs3d: Mark local functions and variables as static


Modified: trunk/libs3d/event.c
===================================================================
--- trunk/libs3d/event.c	2007-10-18 23:58:34 UTC (rev 765)
+++ trunk/libs3d/event.c	2007-10-18 23:58:43 UTC (rev 766)
@@ -27,7 +27,7 @@
 #include "proto.h"
 #include <stdlib.h>   /*  malloc(), free() */
 
-struct s3d_evt *s3d_stack;
+static struct s3d_evt *s3d_stack;
 int cb_lock = 2;  /*  callback lock */
 void s3d_push_event(struct s3d_evt *newevt)
 {

Modified: trunk/libs3d/freetype.c
===================================================================
--- trunk/libs3d/freetype.c	2007-10-18 23:58:34 UTC (rev 765)
+++ trunk/libs3d/freetype.c	2007-10-18 23:58:43 UTC (rev 766)
@@ -36,7 +36,7 @@
 #define FT_ERROR_START_LIST     {
 #define FT_ERROR_END_LIST       { 0, 0 } };
 
-const struct {
+static const struct {
 	int          err_code;
 	const char*  err_msg;
 } ft_errors[] =
@@ -57,12 +57,12 @@
 
 static int v_off;   /*  the vertex number offset, to have the right vertex numbers for each character */
 static int ch;
-struct t_buf tess_buf[256];
+static struct t_buf tess_buf[256];
 
 
 
 /*  initialize truetype and tess_buf ... */
-int s3d_ft_init(void)
+static int s3d_ft_init(void)
 {
 	int error = FT_Init_FreeType(&library);
 	int i;
@@ -78,7 +78,7 @@
 	return(0);
 }
 
-int s3d_ft_load_font(void)
+static int s3d_ft_load_font(void)
 {
 	FT_Error error;
 	if ((memory_font == NULL) || (memory_font_size == 0)) {
@@ -96,7 +96,7 @@
 	return(0);
 }
 
-int _s3d_clear_tessbuf(void)
+static int _s3d_clear_tessbuf(void)
 {
 	int i;
 
@@ -115,7 +115,7 @@
 
 /* renders a character with seidels algorithm and stores it in the tess_buf for later
  * usage */
-int _s3d_add_tessbuf(uint16_t a)
+static int _s3d_add_tessbuf(uint16_t a)
 {
 	float norm, ar, xa, ya;
 	int i, j, k, c, n, start, outl, s, e;
@@ -263,7 +263,7 @@
 }
 
 /* draws one charachter a */
-int _s3d_draw_tessbuf(int oid, uint16_t a, int *voff, float *xoff)
+static int _s3d_draw_tessbuf(int oid, uint16_t a, int *voff, float *xoff)
 {
 	float *vbuf;
 	uint32_t *pbuf;
@@ -401,12 +401,13 @@
 	return(xoff);
 
 }
-int s3d_ft_quit(void)
+
+#if 0
+static int s3d_ft_quit(void)
 {
 	_s3d_clear_tessbuf();
 	FT_Done_FreeType(library);
 	ft_init = 0;
 	return(0);
 }
-
-
+#endif /* 0 */

Modified: trunk/libs3d/io.c
===================================================================
--- trunk/libs3d/io.c	2007-10-18 23:58:34 UTC (rev 765)
+++ trunk/libs3d/io.c	2007-10-18 23:58:43 UTC (rev 766)
@@ -59,7 +59,7 @@
 #ifdef SIGS
 int _s3d_sigio = 0;
 int _s3d_ready = 0;
-void sigint_handler(int S3DUNUSED(sig), int S3DUNUSED(code))  /*  ... ? */
+static void sigint_handler(int S3DUNUSED(sig), int S3DUNUSED(code))  /*  ... ? */
 {
 	/*s3d_quit();*/ /* TODO: sometimes no clean quit ?!*/
 	exit(-1);

Modified: trunk/libs3d/modelread.c
===================================================================
--- trunk/libs3d/modelread.c	2007-10-18 23:58:34 UTC (rev 765)
+++ trunk/libs3d/modelread.c	2007-10-18 23:58:43 UTC (rev 766)
@@ -38,7 +38,7 @@
 	int material_id;
 	int texture_id;
 };
-struct material2texture *mat2tex_root = NULL;
+static struct material2texture *mat2tex_root = NULL;
 
 #define MAXSTRN  20
 static int model_load(char *file);
@@ -80,7 +80,7 @@
 	return(-1); /* nothing in search path ... */
 }
 
-void *get_mat2tex(struct material2texture **mat2tex, void *mat_ptr)
+static void* get_mat2tex(struct material2texture **mat2tex, void *mat_ptr)
 {
 
 	while ((*mat2tex) != NULL) {
@@ -116,7 +116,7 @@
 
 
 
-int model_load(char *file)
+static int model_load(char *file)
 {
 	G3DContext     *context;
 	G3DModel    *model;

Modified: trunk/libs3d/network.c
===================================================================
--- trunk/libs3d/network.c	2007-10-18 23:58:34 UTC (rev 765)
+++ trunk/libs3d/network.c	2007-10-18 23:58:43 UTC (rev 766)
@@ -63,7 +63,7 @@
 }
 /* handler for socket based connection types */
 #ifdef TCP
-int _s3d_net_receive(void)
+static int _s3d_net_receive(void)
 {
 	return(_s3d_tcp_net_receive());
 	return(0);

Modified: trunk/libs3d/sei_misc.c
===================================================================
--- trunk/libs3d/sei_misc.c	2007-10-18 23:58:34 UTC (rev 765)
+++ trunk/libs3d/sei_misc.c	2007-10-18 23:58:43 UTC (rev 766)
@@ -44,7 +44,7 @@
 
 static int choose_idx;
 static int permute[SEGSIZE];
-double mlog2(double x)
+static double mlog2(double x)
 {
 	return log(x) / log(2);
 }

Modified: trunk/libs3d/sei_tri.c
===================================================================
--- trunk/libs3d/sei_tri.c	2007-10-18 23:58:34 UTC (rev 765)
+++ trunk/libs3d/sei_tri.c	2007-10-18 23:58:43 UTC (rev 766)
@@ -135,8 +135,8 @@
  * set (polygon-area - polygon-boundary). The return value for points
  * on the boundary is not consistent!!!
  */
-
-int is_point_inside_polygon(double vertex[2])
+#if 0
+static int is_point_inside_polygon(double vertex[2])
 {
 	point_t v;
 	int trnum, rseg;
@@ -156,3 +156,4 @@
 	rseg = t->rseg;
 	return _greater_than_equal_to(&seg[rseg].v1, &seg[rseg].v0);
 }
+#endif /* 0 */

Modified: trunk/libs3d/shm.c
===================================================================
--- trunk/libs3d/shm.c	2007-10-18 23:58:34 UTC (rev 765)
+++ trunk/libs3d/shm.c	2007-10-18 23:58:43 UTC (rev 766)
@@ -47,7 +47,7 @@
 static struct buf_t *data_in, *data_out;
 static int shmid_in, shmid_out;
 static int shm_idle = 0;
-struct timespec t = {
+static struct timespec t = {
 	0, 10*1000*1000
 }; /* 10 mili second */
 /* char ftoken[]="/tmp/.s3d_shm";*/

Modified: trunk/libs3d/tcp.c
===================================================================
--- trunk/libs3d/tcp.c	2007-10-18 23:58:34 UTC (rev 765)
+++ trunk/libs3d/tcp.c	2007-10-18 23:58:43 UTC (rev 766)
@@ -41,14 +41,14 @@
 extern int _s3d_sigio;
 #endif
 
-int s3d_socket;   /*  this is the socket which holds the tcp-socket .... */
+static int s3d_socket;   /*  this is the socket which holds the tcp-socket .... */
 
 #ifdef SIGS
-void sigpipe_handler(int S3DUNUSED(sig), int S3DUNUSED(code))  /*  ... ? */
+static void sigpipe_handler(int S3DUNUSED(sig), int S3DUNUSED(code))  /*  ... ? */
 {
 	errs("sigpipe_handler()", "there is a broken pipe somewhere");
 }
-void sigio_handler(int S3DUNUSED(sig), int S3DUNUSED(code))  /*  ... ? */
+static void sigio_handler(int S3DUNUSED(sig), int S3DUNUSED(code))  /*  ... ? */
 {
 	_s3d_sigio = 1;
 }



From lazhur at mail.berlios.de  Fri Oct 19 01:58:55 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 01:58:55 +0200
Subject: [S3d-svn] r767 - trunk/server
Message-ID: <200710182358.l9INwtZc030621@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 01:58:53 +0200 (Fri, 19 Oct 2007)
New Revision: 767

Modified:
   trunk/server/allocate.c
   trunk/server/graphics.c
   trunk/server/main.c
   trunk/server/matrix.c
   trunk/server/navigation.c
   trunk/server/network.c
   trunk/server/object.c
   trunk/server/process.c
   trunk/server/shm.c
   trunk/server/tcp.c
Log:
server: Mark local functions and variables as static


Modified: trunk/server/allocate.c
===================================================================
--- trunk/server/allocate.c	2007-10-18 23:58:43 UTC (rev 766)
+++ trunk/server/allocate.c	2007-10-18 23:58:53 UTC (rev 767)
@@ -42,7 +42,7 @@
 
 #if defined DEBUG_MALLOC
 
-struct chunkHeader *chunkList = NULL;
+static struct chunkHeader *chunkList = NULL;
 
 struct chunkHeader {
 	struct chunkHeader *next;

Modified: trunk/server/graphics.c
===================================================================
--- trunk/server/graphics.c	2007-10-18 23:58:43 UTC (rev 766)
+++ trunk/server/graphics.c	2007-10-18 23:58:53 UTC (rev 767)
@@ -41,7 +41,7 @@
 /*  local prototypes ... */
 void render_virtual_object(struct t_obj *o);
 /*  ... and types/variables */
-int select_mode = 0;
+static int select_mode = 0;
 int winw, winh;
 extern struct t_process *procs_p;
 extern int frame_mode;  /*  GLUT, SDL, ... ? */

Modified: trunk/server/main.c
===================================================================
--- trunk/server/main.c	2007-10-18 23:58:43 UTC (rev 766)
+++ trunk/server/main.c	2007-10-18 23:58:53 UTC (rev 767)
@@ -38,25 +38,25 @@
 #endif
 #include <errno.h>   /*  errno() */
 int frame_mode = 0;
-int kidpid = 0;
-int norc = 0;
+static int kidpid = 0;
+static int norc = 0;
 int running;
 static char *rc = NULL;
 static char *homerc = "~/.s3drc";
 static char *etcrc = "/etc/s3drc";
 /*static int father_done=0;*/
 extern int aa_level;
-char **s3drc[] = {&rc, &homerc, &etcrc};
+static char **s3drc[] = {&rc, &homerc, &etcrc};
 
 static void mainloop(void);
 #ifdef SIGS
 /*  handles the SIGINT command. maybe put signals in a special file? */
-void sigint_handler(int S3DUNUSED(sig))
+static void sigint_handler(int S3DUNUSED(sig))
 {
 	s3dprintf(HIGH, "oh my gosh there is a sigint/term signal! running away ...");
 	quit();
 }
-void sigchld_handler(int S3DUNUSED(sig))
+static void sigchld_handler(int S3DUNUSED(sig))
 {
 	if (kidpid != 0) {
 		kidpid = 0;
@@ -65,7 +65,7 @@
 	}
 }
 #endif
-void sigusr_handler(int S3DUNUSED(sig))
+static void sigusr_handler(int S3DUNUSED(sig))
 {
 	s3dprintf(HIGH, "father told use he's done, so lets start to think about the rc file ...");
 	running = 1;
@@ -131,7 +131,7 @@
 /*  things which should be done each time in main loop go here! this is */
 /*  just for the case we use a function for the mainloop like we do for glut... */
 
-struct timespec t = {
+static struct timespec t = {
 	0, 10*1000*1000
 }; /* 10 mili seconds */
 void one_time(void)
@@ -201,7 +201,7 @@
 	exit(0);
 }
 /*  processing arguments from the commandline */
-int process_args(int argc, char **argv)
+static int process_args(int argc, char **argv)
 {
 	int      lopt_idx;
 	char     c;

Modified: trunk/server/matrix.c
===================================================================
--- trunk/server/matrix.c	2007-10-18 23:58:43 UTC (rev 766)
+++ trunk/server/matrix.c	2007-10-18 23:58:53 UTC (rev 767)
@@ -40,7 +40,7 @@
 }
 #define I(x, y)  x*4+y
 #define M(x, y)  MAT[I(x, y)]
-void mat_debug(t_mtrx S)
+static void mat_debug(t_mtrx S)
 {
 	s3dprintf(MED, "MAT_0: %.2f %.2f %.2f %.2f", S[I(0,0)], S[I(1,0)], S[I(2,0)], S[I(3,0)]);
 	s3dprintf(MED, "MAT_1: %.2f %.2f %.2f %.2f", S[I(0,1)], S[I(1,1)], S[I(2,1)], S[I(3,1)]);

Modified: trunk/server/navigation.c
===================================================================
--- trunk/server/navigation.c	2007-10-18 23:58:43 UTC (rev 766)
+++ trunk/server/navigation.c	2007-10-18 23:58:53 UTC (rev 767)
@@ -24,8 +24,7 @@
 
 #include "global.h"
 #include <math.h> /* atan() */
-int alphax, alphay;
-float view_x, view_y, view_z;
+
 extern int winw, winh;
 void navi_right(void)
 {

Modified: trunk/server/network.c
===================================================================
--- trunk/server/network.c	2007-10-18 23:58:43 UTC (rev 766)
+++ trunk/server/network.c	2007-10-18 23:58:53 UTC (rev 767)
@@ -44,7 +44,7 @@
 uint8_t ibuf[MAXPLEN]; /* input buffer for a packet */
 uint8_t obuf[MAXPLEN]; /* output buffer */
 #ifdef SIGS
-int sigio = 0;
+static int sigio = 0;
 #endif
 
 #ifdef SIGS

Modified: trunk/server/object.c
===================================================================
--- trunk/server/object.c	2007-10-18 23:58:43 UTC (rev 766)
+++ trunk/server/object.c	2007-10-18 23:58:53 UTC (rev 767)
@@ -1388,7 +1388,7 @@
 		obj_check_biggest_object(p, oid);
 }
 /*  calculates the normal for one polygon, if not present. */
-int calc_normal(struct t_obj *obj, uint32_t pn)
+static int calc_normal(struct t_obj *obj, uint32_t pn)
 {
 	struct t_vertex a, b, n;
 	struct t_vertex *v[3];
@@ -1433,7 +1433,7 @@
 }
 
 /* checks if a normal is set for a line object, or set some default if not */
-int check_line_normal(struct t_obj *obj, uint32_t pn)
+static int check_line_normal(struct t_obj *obj, uint32_t pn)
 {
 	struct t_vertex *v[2];
 	int i, vp;
@@ -1456,7 +1456,7 @@
 
 }
 
-void tex_build_mipmaps(struct t_tex *tex)
+static void tex_build_mipmaps(struct t_tex *tex)
 {
 	int     i, w, h, x, y, c;
 	unsigned char  *buf, *src;
@@ -1500,7 +1500,7 @@
 	free(buf);
 }
 /* generate textures */
-void texture_gen(struct t_obj *obj)
+static void texture_gen(struct t_obj *obj)
 {
 	GLuint t;
 	int i;
@@ -1531,7 +1531,7 @@
 	}
 }
 /* activate/bind texture for object */
-struct t_tex *get_texture(struct t_obj *obj, struct t_mat *m) {
+static struct t_tex* get_texture(struct t_obj *obj, struct t_mat *m) {
 	struct t_tex *tex = NULL;
 	GLfloat matgl[4];
 	/*  int i,j; */

Modified: trunk/server/process.c
===================================================================
--- trunk/server/process.c	2007-10-18 23:58:43 UTC (rev 766)
+++ trunk/server/process.c	2007-10-18 23:58:53 UTC (rev 767)
@@ -161,7 +161,7 @@
 	return(-1);
 }
 /* just kick process out of the process list, no network/mcp-oid cleanup */
-int process_list_rm(int pid)
+static int process_list_rm(int pid)
 {
 	if (pid != (procs_n - 1)) { /* copy last block, swap pid */
 		memcpy(&procs_p[pid], &procs_p[procs_n-1], sizeof(struct t_process));

Modified: trunk/server/shm.c
===================================================================
--- trunk/server/shm.c	2007-10-18 23:58:43 UTC (rev 766)
+++ trunk/server/shm.c	2007-10-18 23:58:53 UTC (rev 767)
@@ -46,12 +46,12 @@
 extern uint8_t ibuf[MAXPLEN];
 extern struct t_process *procs_p;
 extern int procs_n;
-struct t_shmcb waiting_comblock;
+static struct t_shmcb waiting_comblock;
 
-key_t *data = NULL;
-char ftoken[] = "/tmp/.s3d";
-int shmid;
-int mkey; /* increasing key */
+static key_t *data = NULL;
+static char ftoken[] = "/tmp/.s3d";
+static int shmid;
+static int mkey; /* increasing key */
 
 static int shm_new_comblock(key_t *data);
 
@@ -89,7 +89,7 @@
 	shm_new_comblock(data);
 	return(0);
 }
-void comblock_init(struct t_shmcb *p_cb)
+static void comblock_init(struct t_shmcb *p_cb)
 {
 	p_cb->shmid_ctos = -1;
 	p_cb->shmid_stoc = -1;

Modified: trunk/server/tcp.c
===================================================================
--- trunk/server/tcp.c	2007-10-18 23:58:43 UTC (rev 766)
+++ trunk/server/tcp.c	2007-10-18 23:58:53 UTC (rev 767)
@@ -48,7 +48,7 @@
 extern struct t_con mcp;
 extern uint8_t ibuf[MAXPLEN];
 extern int idc;
-int tcp_sockid;
+static int tcp_sockid;
 int tcp_init(void)
 {
 	int yes = 1;



From lazhur at mail.berlios.de  Fri Oct 19 01:59:03 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 01:59:03 +0200
Subject: [S3d-svn] r768 - trunk/example
Message-ID: <200710182359.l9INx3T1030680@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 01:59:02 +0200 (Fri, 19 Oct 2007)
New Revision: 768

Modified:
   trunk/example/filebrowser.c
   trunk/example/hudtest.c
   trunk/example/katze.c
   trunk/example/linetest.c
   trunk/example/modelloader.c
   trunk/example/nichtsnutz.c
   trunk/example/ptrtest.c
   trunk/example/radius_test.c
   trunk/example/s3dclock.c
   trunk/example/snowman.c
   trunk/example/strtest.c
   trunk/example/texturetest.c
   trunk/example/widgets.c
   trunk/example/wiresphere.c
Log:
examples: Mark local functions and variables as static


Modified: trunk/example/filebrowser.c
===================================================================
--- trunk/example/filebrowser.c	2007-10-18 23:58:53 UTC (rev 767)
+++ trunk/example/filebrowser.c	2007-10-18 23:59:02 UTC (rev 768)
@@ -47,15 +47,15 @@
 
 #define M_DIR  512
 #define M_NAME  256
-int folder, geometry, mp3, movie, duno, dot, dotdot;
+static int folder, geometry, mp3, movie, duno, dot, dotdot;
 struct t_item {
 	int icon_oid, descr_oid, pie_oid;
 	char name[M_NAME];
 	int type;
 };
-struct t_item *item;
-int n_item = 0;
-int display_dir(char *dir, int S3DUNUSED(depth), int  posx, int posy, int posz)
+static struct t_item *item;
+static int n_item = 0;
+static int display_dir(char *dir, int S3DUNUSED(depth), int  posx, int posy, int posz)
 {
 	struct dirent **namelist;
 	int n, i;
@@ -196,7 +196,7 @@
 	return(0);
 }
 
-int object_click(struct s3d_evt *evt)
+static int object_click(struct s3d_evt *evt)
 {
 	int i, oid;
 	char execstr[256];
@@ -233,7 +233,7 @@
 	}
 	return(0);
 }
-void mainloop(void)
+static void mainloop(void)
 {
 	nanosleep(&t, NULL);
 }

Modified: trunk/example/hudtest.c
===================================================================
--- trunk/example/hudtest.c	2007-10-18 23:58:53 UTC (rev 767)
+++ trunk/example/hudtest.c	2007-10-18 23:59:02 UTC (rev 768)
@@ -26,7 +26,7 @@
 #include <s3d.h>
 #include <unistd.h>  /*  sleep() */
 #include <stdio.h>  /*  printf() */
-void mainloop(void)
+static void mainloop(void)
 {
 	sleep(1);
 }

Modified: trunk/example/katze.c
===================================================================
--- trunk/example/katze.c	2007-10-18 23:58:53 UTC (rev 767)
+++ trunk/example/katze.c	2007-10-18 23:59:02 UTC (rev 768)
@@ -31,10 +31,10 @@
 	0, 10*1000*1000
 }; /* 10 mili seconds */
 
-int a;
-int rot_point, body, legfr, legbr, legfl, legbl, tail;
+static int a;
+static int rot_point, body, legfr, legbr, legfl, legbl, tail;
 
-void mainloop(void)
+static void mainloop(void)
 {
 	float pos;
 	a = (a + 2) % 360;

Modified: trunk/example/linetest.c
===================================================================
--- trunk/example/linetest.c	2007-10-18 23:58:53 UTC (rev 767)
+++ trunk/example/linetest.c	2007-10-18 23:59:02 UTC (rev 768)
@@ -27,14 +27,14 @@
 #include <stdio.h>  /*  NULL*/
 #include <unistd.h> /* sleep() */
 #include "example.h" /* S3DUNUSED */
-int i;
-int o;
-void stop(struct s3d_evt *S3DUNUSED(evt))
+static int i;
+static int o;
+static void stop(struct s3d_evt *S3DUNUSED(evt))
 {
 	s3d_quit();
 }
 
-void mainloop(void)
+static void mainloop(void)
 {
 	i = (i + 1) % 2;
 	if (i) {

Modified: trunk/example/modelloader.c
===================================================================
--- trunk/example/modelloader.c	2007-10-18 23:58:53 UTC (rev 767)
+++ trunk/example/modelloader.c	2007-10-18 23:59:02 UTC (rev 768)
@@ -31,14 +31,14 @@
 static struct timespec t = {
 	0, 100*1000*1000
 }; /* 100 mili seconds */
-int i, oid;
-void mainloop(void)
+static int i, oid;
+static void mainloop(void)
 {
 	s3d_rotate(oid, 0, i, 0);
 	i = (i + 1) % 360;
 	nanosleep(&t, NULL);
 }
-int object_click(struct s3d_evt *S3DUNUSED(evt))
+static int object_click(struct s3d_evt *S3DUNUSED(evt))
 {
 	s3d_quit();
 	return(0);

Modified: trunk/example/nichtsnutz.c
===================================================================
--- trunk/example/nichtsnutz.c	2007-10-18 23:58:53 UTC (rev 767)
+++ trunk/example/nichtsnutz.c	2007-10-18 23:59:02 UTC (rev 768)
@@ -34,18 +34,18 @@
 	0, 10*1000*1000
 }; /* 10 mili seconds */
 
-int object, foll;
-float al, r, rc , alpha = 0.0, Asp, Bottom, Left, angle;
-float CamPosition[2][3],
+static int object, foll;
+static float al, r, rc , alpha = 0.0, Asp, Bottom, Left, angle;
+static float CamPosition[2][3],
 TmpMove[3],
 Tmp[3],
 TmpCam[2][3],
 RotCam[2][3],
 CatPos[3];
 
-float length;
+static float length;
 
-void mainloop(void)
+static void mainloop(void)
 {
 
 	al = (alpha * M_PI / 180);
@@ -101,7 +101,7 @@
 	nanosleep(&t, NULL);
 }
 
-int object_info(struct s3d_evt *hrmz)
+static int object_info(struct s3d_evt *hrmz)
 {
 	struct s3d_obj_info *inf;
 	inf = (struct s3d_obj_info *)hrmz->buf;
@@ -128,7 +128,7 @@
 
 
 
-int keypress(struct s3d_evt *event)
+static int keypress(struct s3d_evt *event)
 {
 	int key;
 	key = *((unsigned short *)event->buf);

Modified: trunk/example/ptrtest.c
===================================================================
--- trunk/example/ptrtest.c	2007-10-18 23:58:53 UTC (rev 767)
+++ trunk/example/ptrtest.c	2007-10-18 23:59:02 UTC (rev 768)
@@ -27,23 +27,23 @@
 #include <time.h> /* nanosleep() */
 #include <math.h> /* sin(), cos() */
 #include "example.h" /* S3DUNUSED */
-int i;
-int o;
-float bottom = -1.0;
-float left = -1.0;
-float asp = 1.0;
-float len = 1.0;
-int alpha = 0;
+static int i;
+static int o;
+static float bottom = -1.0;
+static float left = -1.0;
+static float asp = 1.0;
+static float len = 1.0;
+static int alpha = 0;
 static struct timespec t = {
 	0, 10*1000*1000
 }; /* 100 mili seconds */
-int stop(struct s3d_evt *S3DUNUSED(evt))
+static int stop(struct s3d_evt *S3DUNUSED(evt))
 {
 	s3d_quit();
 	return(0);
 }
 
-void mainloop(void)
+static void mainloop(void)
 {
 	float a;
 	alpha = (alpha + 1) % 360;
@@ -53,7 +53,7 @@
 	s3d_rotate(0, sin(a)*30, alpha, 0);
 	nanosleep(&t, NULL);
 }
-int object_info(struct s3d_evt *hrmz)
+static int object_info(struct s3d_evt *hrmz)
 {
 	struct s3d_obj_info *inf;
 	inf = (struct s3d_obj_info *)hrmz->buf;
@@ -75,7 +75,7 @@
 	}
 	return(0);
 }
-int mbutton_press(struct s3d_evt *hrmz)
+static int mbutton_press(struct s3d_evt *hrmz)
 {
 	struct s3d_but_info *inf;
 	char s[256];

Modified: trunk/example/radius_test.c
===================================================================
--- trunk/example/radius_test.c	2007-10-18 23:58:53 UTC (rev 767)
+++ trunk/example/radius_test.c	2007-10-18 23:59:02 UTC (rev 768)
@@ -29,9 +29,9 @@
 }; /* 10 mili seconds */
 
 #include <math.h> /* sin(), cos() */
-int item1, item2, item3;
-int i = 0;
-void mainloop(void)
+static int item1, item2, item3;
+static int i = 0;
+static void mainloop(void)
 {
 	float f, g, h;
 	f = sin((M_PI * (i % 360)) / 180.0);

Modified: trunk/example/s3dclock.c
===================================================================
--- trunk/example/s3dclock.c	2007-10-18 23:58:53 UTC (rev 767)
+++ trunk/example/s3dclock.c	2007-10-18 23:59:02 UTC (rev 768)
@@ -30,18 +30,18 @@
 static struct timespec t = {
 	0, 100*1000*1000
 }; /* 100 mili seconds */
-int big_p, lil_p, bg, sec_p;
-int str_oid = -1, o_str_oid;
-struct tm *mytime;
-time_t now, onow;
-char time_str[256];
+static int big_p, lil_p, bg, sec_p;
+static int str_oid = -1, o_str_oid;
+static struct tm *mytime;
+static time_t now, onow;
+static char time_str[256];
 
-void stop(struct s3d_evt *S3DUNUSED(evt))
+static void stop(struct s3d_evt *S3DUNUSED(evt))
 {
 	s3d_quit();
 }
 
-void mainloop(void)
+static void mainloop(void)
 {
 	onow = now;
 	now = time(NULL);

Modified: trunk/example/snowman.c
===================================================================
--- trunk/example/snowman.c	2007-10-18 23:58:53 UTC (rev 767)
+++ trunk/example/snowman.c	2007-10-18 23:59:02 UTC (rev 768)
@@ -28,12 +28,12 @@
 	0, 10*1000*1000
 }; /* 10 mili seconds */
 
-int a;
-int oid_head;
-int oid_middle;
-int oid_foot;
+static int a;
+static int oid_head;
+static int oid_middle;
+static int oid_foot;
 
-void mainloop(void)
+static void mainloop(void)
 {
 	float pos;
 	a = (a + 3) % 360;

Modified: trunk/example/strtest.c
===================================================================
--- trunk/example/strtest.c	2007-10-18 23:58:53 UTC (rev 767)
+++ trunk/example/strtest.c	2007-10-18 23:59:02 UTC (rev 768)
@@ -27,13 +27,13 @@
 #include <stdio.h>  /*  NULL*/
 #include <unistd.h> /* sleep() */
 #include "example.h" /* S3DUNUSED */
-int o;
-void stop(struct s3d_evt *S3DUNUSED(evt))
+static int o;
+static void stop(struct s3d_evt *S3DUNUSED(evt))
 {
 	s3d_quit();
 }
 
-void mainloop(void)
+static void mainloop(void)
 {
 	/*  printf("now it's %s\n",time_str); */
 	sleep(1);

Modified: trunk/example/texturetest.c
===================================================================
--- trunk/example/texturetest.c	2007-10-18 23:58:53 UTC (rev 767)
+++ trunk/example/texturetest.c	2007-10-18 23:59:02 UTC (rev 768)
@@ -30,8 +30,8 @@
 	0, 10*1000*1000
 }; /* 10 mili seconds */
 
-int i, oid;
-void mainloop(void)
+static int i, oid;
+static void mainloop(void)
 {
 	i = (i + 1) % 360;
 	s3d_rotate(oid, 0, i, 0);

Modified: trunk/example/widgets.c
===================================================================
--- trunk/example/widgets.c	2007-10-18 23:58:53 UTC (rev 767)
+++ trunk/example/widgets.c	2007-10-18 23:59:02 UTC (rev 768)
@@ -32,12 +32,12 @@
 #include <string.h> /* strlen() */
 #include "example.h"
 
-s3dw_surface *surface;
-s3dw_input *input;
+static s3dw_surface *surface;
+static s3dw_input *input;
 static struct timespec t = {
 	0, 33*1000*1000
 }; /* 33 mili seconds */
-void mainloop(void)
+static void mainloop(void)
 {
 	/* keep this in your mainloop. this will do smooth animations for you ... */
 	s3dw_ani_mate();
@@ -46,15 +46,15 @@
 /* you should always put the s3dw-handler in your own event handler,
  * if you want s3dw to react on clicks or keys ... and i'm sure you
  * want that ... */
-int click(struct s3d_evt *evt)
+static int click(struct s3d_evt *evt)
 {
 	return(s3dw_handle_click(evt));
 }
-void key_button(s3dw_widget *button)
+static void key_button(s3dw_widget *button)
 {
 	s3dw_delete(button->parent); /* parent =surface. this means close containing window */
 }
-int key(struct s3d_evt *evt)
+static int key(struct s3d_evt *evt)
 {
 	struct s3d_key_event *key = (struct s3d_key_event *)evt->buf;
 	char string[8];
@@ -79,12 +79,12 @@
 
 }
 
-void done_button(s3dw_widget *S3DUNUSED(dummy))
+static void done_button(s3dw_widget *S3DUNUSED(dummy))
 {
 	s3d_quit();
 }
 
-void okay_button(s3dw_widget *S3DUNUSED(dummy))
+static void okay_button(s3dw_widget *S3DUNUSED(dummy))
 {
 	s3dw_button *button;
 	char string[32];
@@ -116,7 +116,7 @@
 	/* we don't need it anymore. always free strings, don't leak around */
 	free(age);
 }
-void no_button(s3dw_widget *S3DUNUSED(dummy))
+static void no_button(s3dw_widget *S3DUNUSED(dummy))
 {
 	s3dw_button *button;
 	s3dw_delete(S3DWIDGET(surface));
@@ -130,7 +130,7 @@
 
 	s3dw_show(S3DWIDGET(surface));
 }
-char *text = "okay\nn2\n3\nfooobarfooobar ...\noh no\n its too loooong\n";
+static char *text = "okay\nn2\n3\nfooobarfooobar ...\noh no\n its too loooong\n";
 int main(int argc, char **argv)
 {
 	s3dw_button *button;

Modified: trunk/example/wiresphere.c
===================================================================
--- trunk/example/wiresphere.c	2007-10-18 23:58:53 UTC (rev 767)
+++ trunk/example/wiresphere.c	2007-10-18 23:59:02 UTC (rev 768)
@@ -31,9 +31,9 @@
 static struct timespec t = {
 	0, 100*1000*1000
 }; /* 100 mili seconds */
-int oid;
-int r;
-int wire_sphere(int slices, int stacks)
+static int oid;
+static int r;
+static int wire_sphere(int slices, int stacks)
 {
 	int x, y, i, o;
 	int num_v, num_l;
@@ -99,12 +99,12 @@
 	free(l);
 	return(o);
 }
-void stop(struct s3d_evt *S3DUNUSED(evt))
+static void stop(struct s3d_evt *S3DUNUSED(evt))
 {
 	s3d_quit();
 }
 
-void mainloop(void)
+static void mainloop(void)
 {
 	r = (r + 1) % 360;
 	s3d_rotate(oid, 0, r, 0);



From lazhur at mail.berlios.de  Fri Oct 19 01:59:10 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 01:59:10 +0200
Subject: [S3d-svn] r769 - trunk/libs3dw
Message-ID: <200710182359.l9INxAhJ030734@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 01:59:09 +0200 (Fri, 19 Oct 2007)
New Revision: 769

Modified:
   trunk/libs3dw/arrange.c
   trunk/libs3dw/scrollbar.c
   trunk/libs3dw/textbox.c
   trunk/libs3dw/widget.c
Log:
libs3dw: Mark local functions and variables as static


Modified: trunk/libs3dw/arrange.c
===================================================================
--- trunk/libs3dw/arrange.c	2007-10-18 23:59:02 UTC (rev 768)
+++ trunk/libs3dw/arrange.c	2007-10-18 23:59:09 UTC (rev 769)
@@ -118,7 +118,7 @@
 }
 
 #define DIST 40.0
-void s3dw_follow(void)
+static void s3dw_follow(void)
 {
 	s3dw_widget *w, *root = s3dw_getroot();
 	int i;

Modified: trunk/libs3dw/scrollbar.c
===================================================================
--- trunk/libs3dw/scrollbar.c	2007-10-18 23:59:02 UTC (rev 768)
+++ trunk/libs3dw/scrollbar.c	2007-10-18 23:59:09 UTC (rev 769)
@@ -28,7 +28,7 @@
 #include <stdlib.h> /* malloc() */
 #include <string.h> /* strdup() */
 
-void s3dw_scrollbar_draw(s3dw_widget *widget)
+static void s3dw_scrollbar_draw(s3dw_widget *widget)
 {
 	s3dw_scrollbar *scrollbar = (s3dw_scrollbar *)widget;
 	float back_vertices[3*32];

Modified: trunk/libs3dw/textbox.c
===================================================================
--- trunk/libs3dw/textbox.c	2007-10-18 23:59:02 UTC (rev 768)
+++ trunk/libs3dw/textbox.c	2007-10-18 23:59:09 UTC (rev 769)
@@ -28,7 +28,7 @@
 #include <stdlib.h> /* malloc() */
 #include <string.h> /* strdup() */
 
-void s3dw_textbox_draw(s3dw_widget *widget)
+static void s3dw_textbox_draw(s3dw_widget *widget)
 {
 	float h, w;
 	float vertices[12*3];

Modified: trunk/libs3dw/widget.c
===================================================================
--- trunk/libs3dw/widget.c	2007-10-18 23:59:02 UTC (rev 768)
+++ trunk/libs3dw/widget.c	2007-10-18 23:59:09 UTC (rev 769)
@@ -79,7 +79,7 @@
 		widget->flags |= S3DW_VISIBLE;
 }
 /* removes an widget from it's parent, should have been appended before */
-void s3dw_widget_remove(s3dw_widget *widget)
+static void s3dw_widget_remove(s3dw_widget *widget)
 {
 	s3dw_widget *parent = widget->parent;
 	int i, stackpos;



From lazhur at mail.berlios.de  Fri Oct 19 01:59:18 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 01:59:18 +0200
Subject: [S3d-svn] r770 - trunk/apps/comptest
Message-ID: <200710182359.l9INxIGJ030790@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 01:59:17 +0200 (Fri, 19 Oct 2007)
New Revision: 770

Modified:
   trunk/apps/comptest/comptest.c
Log:
comptest: Mark local functions and variables as static


Modified: trunk/apps/comptest/comptest.c
===================================================================
--- trunk/apps/comptest/comptest.c	2007-10-18 23:59:09 UTC (rev 769)
+++ trunk/apps/comptest/comptest.c	2007-10-18 23:59:17 UTC (rev 770)
@@ -66,12 +66,10 @@
 	struct window     *next;
 };
 
-struct extension    xrender, xcomposite, xdamage, xfixes;
-struct window   *window_head = NULL;
-Display       *dpy;
-char    *display = NULL;
-int      scr;
-Window     root;
+static struct extension    xrender, xcomposite, xdamage, xfixes;
+static struct window   *window_head = NULL;
+static Display       *dpy;
+static char    *display = NULL;
 
 static int     win_no = 0;    /* XXX: REMOVE */
 static struct timespec t = {
@@ -83,13 +81,13 @@
 static int print_event(Display *dpy, XEvent *event);
 void event();
 
-void mainloop(void)
+static void mainloop(void)
 {
 	event();
 	nanosleep(&t, NULL);
 }
 
-int get_shift(unsigned long t)
+static int get_shift(unsigned long t)
 {
 	int i;
 	for (i = 0; t ; i++)
@@ -216,7 +214,7 @@
 	return(0);
 }
 
-void deco_box(struct window *win)
+static void deco_box(struct window *win)
 {
 /*	float vertices[8*3] = {
 		0, 0, 0,
@@ -310,7 +308,7 @@
 	/*  push data on texture 0 position (0,0) */
 	s3d_flags_on(win->oid, S3D_OF_VISIBLE);
 }
-struct window *window_find(Window id)
+static struct window* window_find(Window id)
 {
 	struct window *window;
 	for (window = window_head; window!=NULL; window = window->next) {
@@ -323,7 +321,7 @@
 }
 
 
-void window_add(Display *dpy, Window id)
+static void window_add(Display *dpy, Window id)
 {
 	struct window *win;
 	win = malloc(sizeof(*win));
@@ -356,13 +354,13 @@
 	}
 }
 
-void window_remove(struct window *win)
+static void window_remove(struct window *win)
 {
 	/* TODO */
 	free(win);
 }
 
-void window_update_geometry(struct window *win, int x, int y, int width, int height) 
+static void window_update_geometry(struct window *win, int x, int y, int width, int height) 
 {
 	
 	printf("window_update_geometry()\n");



From lazhur at mail.berlios.de  Fri Oct 19 01:59:28 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 01:59:28 +0200
Subject: [S3d-svn] r771 - trunk/apps/dot_mcp
Message-ID: <200710182359.l9INxSt5030836@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 01:59:28 +0200 (Fri, 19 Oct 2007)
New Revision: 771

Modified:
   trunk/apps/dot_mcp/main.c
Log:
dot_mcp: Mark local functions and variables as static


Modified: trunk/apps/dot_mcp/main.c
===================================================================
--- trunk/apps/dot_mcp/main.c	2007-10-18 23:59:17 UTC (rev 770)
+++ trunk/apps/dot_mcp/main.c	2007-10-18 23:59:28 UTC (rev 771)
@@ -40,8 +40,8 @@
 struct tver {
 	float x, y, z;
 };
-struct tver campos, camrot;
-float xdif = 0, ydif = 0;
+static struct tver campos, camrot;
+static float xdif = 0, ydif = 0;
 
 struct app {
 	int oid, oid_c;
@@ -54,24 +54,24 @@
 	int sphere;
 	struct app *next;
 };
-int ego_mode = 0;
-float asp = 1.0;
-struct app *apps = NULL;
-float bottom = -1.0;
-float left = -1.0;
-float zoom = 5.0;
-int n_app = 0;
-int rot_flag = 0;
-struct app *focus = NULL;
-float focus_r = 0;
-float alpha = 0;
-int rotate, reset, min_but, close_but, sphere, menu = -1;
+static int ego_mode = 0;
+static float asp = 1.0;
+static struct app *apps = NULL;
+static float bottom = -1.0;
+static float left = -1.0;
+static float zoom = 5.0;
+static int n_app = 0;
+static int rot_flag = 0;
+static struct app *focus = NULL;
+static float focus_r = 0;
+static float alpha = 0;
+static int rotate, reset, min_but, close_but, sphere, menu = -1;
 
 void place_apps();
 
 #define SIDES 60
 #define RINGS 60
-int greentorus(void)
+static int greentorus(void)
 {
 	int o, i, j;
 	float R, r, a;
@@ -129,7 +129,7 @@
 	return(o);
 }
 
-void set_focus(struct app *a)
+static void set_focus(struct app *a)
 {
 	if (focus != a)
 		/* resetting old focus */
@@ -175,7 +175,7 @@
 	place_apps();
 }
 
-int add_app(struct app *a)
+static int add_app(struct app *a)
 {
 	struct app *prev = NULL, *a2 = apps;
 	while ((a2) != NULL) {
@@ -195,7 +195,7 @@
 	return(0);
 }
 
-void *find_app(int oid)
+static void* find_app(int oid)
 {
 	struct app *a = apps;
 	while (a != NULL) {
@@ -206,7 +206,7 @@
 	return(a);
 }
 
-void *del_app(int oid)
+static void* del_app(int oid)
 {
 	struct app *prev = NULL, *a = apps;
 	while ((a != NULL)  && (a->oid != oid)) {
@@ -236,7 +236,7 @@
 	return(a);
 }
 
-int stop(struct s3d_evt* DOTMCPUNUSED(evt))
+static int stop(struct s3d_evt* DOTMCPUNUSED(evt))
 {
 	s3d_quit();
 	return(0);
@@ -276,7 +276,7 @@
 	s3d_rotate(menu, 0 , 30, 0);
 }
 
-int mcp_object(struct s3d_evt *hrmz)
+static int mcp_object(struct s3d_evt *hrmz)
 {
 	struct mcp_object *mo;
 	struct app *a;
@@ -310,7 +310,7 @@
 	return(0);
 }
 
-void app_init(struct app *a)
+static void app_init(struct app *a)
 {
 	printf("building some window decorations on %d ['%s']\n", a->oid, a->name);
 	printf("radius of object %d is %f\n", a->oid, a->r);
@@ -347,7 +347,7 @@
 	place_apps();
 }
 
-int mcp_del_object(struct s3d_evt *hrmz)
+static int mcp_del_object(struct s3d_evt *hrmz)
 {
 	struct mcp_object *mo;
 	mo = (struct mcp_object *)hrmz->buf;
@@ -355,7 +355,7 @@
 	return(0);
 }
 
-int object_click(struct s3d_evt *hrmz)
+static int object_click(struct s3d_evt *hrmz)
 {
 	struct app *a;
 	unsigned int i;
@@ -392,7 +392,7 @@
 	return(0);
 }
 
-int object_info(struct s3d_evt *hrmz)
+static int object_info(struct s3d_evt *hrmz)
 {
 	struct s3d_obj_info *inf;
 	inf = (struct s3d_obj_info *)hrmz->buf;
@@ -420,7 +420,7 @@
 	return(0);
 }
 
-void mainloop(void)
+static void mainloop(void)
 {
 	struct app *a;
 	float al, r;
@@ -454,7 +454,7 @@
 	nanosleep(&t, NULL);
 }
 
-int keydown(struct s3d_evt *event)
+static int keydown(struct s3d_evt *event)
 {
 	struct s3d_key_event *keys = (struct s3d_key_event *)event->buf;
 	switch (keys->keysym) {
@@ -480,7 +480,7 @@
 	return(0);
 }
 
-int keyup(struct s3d_evt *event)
+static int keyup(struct s3d_evt *event)
 {
 	struct s3d_key_event *keys = (struct s3d_key_event *)event->buf;
 	switch (keys->keysym) {



From lazhur at mail.berlios.de  Fri Oct 19 01:59:38 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 01:59:38 +0200
Subject: [S3d-svn] r772 - trunk/apps/kism3d
Message-ID: <200710182359.l9INxcMH030900@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 01:59:38 +0200 (Fri, 19 Oct 2007)
New Revision: 772

Modified:
   trunk/apps/kism3d/gui.c
   trunk/apps/kism3d/kism3d.c
Log:
kism3d: Mark local functions and variables as static


Modified: trunk/apps/kism3d/gui.c
===================================================================
--- trunk/apps/kism3d/gui.c	2007-10-18 23:59:28 UTC (rev 771)
+++ trunk/apps/kism3d/gui.c	2007-10-18 23:59:38 UTC (rev 772)
@@ -34,22 +34,22 @@
 
 
 
-float CamPosition[2][3];          /* CamPosition[trans|rot][x-z] */
+static float CamPosition[2][3];          /* CamPosition[trans|rot][x-z] */
 
-int Last_Click_Oid = 0;
-unsigned int Last_Click_Time = 0;
+static int Last_Click_Oid = 0;
+static unsigned int Last_Click_Time = 0;
 
-void *Cam_target = NULL;
+static void *Cam_target = NULL;
 
-int Client_obj;
+static int Client_obj;
 
-struct timespec sleeptime = {
+static struct timespec sleeptime = {
 	0, 100 * 1000 * 1000
 };   /* 100 mili seconds */
 
 
 
-int wire_sphere(int slices, int stacks)
+static int wire_sphere(int slices, int stacks)
 {
 	int x, y, i, o;
 	int num_v, num_l;
@@ -118,7 +118,7 @@
 
 
 
-int handle_networks(void)
+static int handle_networks(void)
 {
 
 	struct list_head *network_pos;
@@ -246,7 +246,7 @@
 
 
 
-int handle_clients(void)
+static int handle_clients(void)
 {
 
 	struct list_head *client_pos;
@@ -310,7 +310,7 @@
  *
  ***/
 
-int object_click(struct s3d_evt *evt)
+static int object_click(struct s3d_evt *evt)
 {
 
 	struct list_head *network_pos;
@@ -354,7 +354,7 @@
  *
  ***/
 
-int object_info(struct s3d_evt *hrmz)
+static int object_info(struct s3d_evt *hrmz)
 {
 
 	struct s3d_obj_info *inf;
@@ -380,7 +380,7 @@
 
 
 
-void mainloop(void)
+static void mainloop(void)
 {
 
 	float angle, diff_vec[3], tmp_vec[3] = { 0.0, 0.0, -1.0 };

Modified: trunk/apps/kism3d/kism3d.c
===================================================================
--- trunk/apps/kism3d/kism3d.c	2007-10-18 23:59:28 UTC (rev 771)
+++ trunk/apps/kism3d/kism3d.c	2007-10-18 23:59:38 UTC (rev 772)
@@ -38,17 +38,17 @@
 
 
 
-DEFINE_LIST_HEAD(kismet_src_list);
+static DEFINE_LIST_HEAD(kismet_src_list);
 DEFINE_LIST_HEAD(Network_list);
 DEFINE_LIST_HEAD(Client_list);
 
-pthread_t s3d_thread_id;
+static pthread_t s3d_thread_id;
 pthread_mutex_t Network_list_mutex = PTHREAD_MUTEX_INITIALIZER;
 pthread_mutex_t Client_list_mutex = PTHREAD_MUTEX_INITIALIZER;
 
-int thread_running = 0;
+static int thread_running = 0;
 int Kism3d_aborted = 0;
-int Num_networks = 0;
+ int Num_networks = 0;
 
 
 
@@ -70,7 +70,7 @@
 
 
 
-void *realloc_memory(void *ptr, int len)
+static void* realloc_memory(void *ptr, int len)
 {
 
 	void *res = realloc(ptr, len);
@@ -101,7 +101,7 @@
 
 
 
-void parse_buffer(struct kismet_src *kismet_src)
+static void parse_buffer(struct kismet_src *kismet_src)
 {
 
 	struct wlan_network *wlan_network;



From lazhur at mail.berlios.de  Fri Oct 19 01:59:50 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 01:59:50 +0200
Subject: [S3d-svn] r773 - trunk/apps/kism3d
Message-ID: <200710182359.l9INxox8030985@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 01:59:50 +0200 (Fri, 19 Oct 2007)
New Revision: 773

Modified:
   trunk/apps/kism3d/kism3d.c
Log:
kism3d: Remove unused realloc_memory(..)


Modified: trunk/apps/kism3d/kism3d.c
===================================================================
--- trunk/apps/kism3d/kism3d.c	2007-10-18 23:59:38 UTC (rev 772)
+++ trunk/apps/kism3d/kism3d.c	2007-10-18 23:59:50 UTC (rev 773)
@@ -70,24 +70,6 @@
 
 
 
-static void* realloc_memory(void *ptr, int len)
-{
-
-	void *res = realloc(ptr, len);
-
-	if (res == NULL) {
-		printf("Error - can't trallocate memory: %s\n", strerror(errno));
-		exit(1);
-	}
-
-	memset(res, 0, len);
-
-	return res;
-
-}
-
-
-
 unsigned int get_time(void)
 {
 



From lazhur at mail.berlios.de  Fri Oct 19 01:59:58 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 01:59:58 +0200
Subject: [S3d-svn] r774 - trunk/apps/meshs3d
Message-ID: <200710182359.l9INxwnc031052@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 01:59:57 +0200 (Fri, 19 Oct 2007)
New Revision: 774

Modified:
   trunk/apps/meshs3d/allocate.c
   trunk/apps/meshs3d/main.c
   trunk/apps/meshs3d/net.c
   trunk/apps/meshs3d/process.c
Log:
meshs3d: Mark local functions and variables as static


Modified: trunk/apps/meshs3d/allocate.c
===================================================================
--- trunk/apps/meshs3d/allocate.c	2007-10-18 23:59:50 UTC (rev 773)
+++ trunk/apps/meshs3d/allocate.c	2007-10-18 23:59:57 UTC (rev 774)
@@ -37,7 +37,7 @@
 
 #if defined DEBUG_MALLOC
 
-struct chunkHeader *chunkList = NULL;
+static struct chunkHeader *chunkList = NULL;
 
 struct chunkHeader {
 	struct chunkHeader *next;
@@ -54,7 +54,7 @@
 
 #if defined MEMORY_USAGE
 
-struct memoryUsage *memoryList = NULL;
+static struct memoryUsage *memoryList = NULL;
 
 
 struct memoryUsage {
@@ -65,7 +65,7 @@
 };
 
 
-void addMemory(uint32_t length, int32_t tag)
+static void addMemory(uint32_t length, int32_t tag)
 {
 
 	struct memoryUsage *walker;
@@ -98,7 +98,7 @@
 }
 
 
-void removeMemory(int32_t tag, int32_t freetag)
+static void removeMemory(int32_t tag, int32_t freetag)
 {
 
 	struct memoryUsage *walker;

Modified: trunk/apps/meshs3d/main.c
===================================================================
--- trunk/apps/meshs3d/main.c	2007-10-18 23:59:50 UTC (rev 773)
+++ trunk/apps/meshs3d/main.c	2007-10-18 23:59:57 UTC (rev 774)
@@ -47,7 +47,7 @@
 };   /* 100 mili seconds */
 
 
-void init_globals(void)
+static void init_globals(void)
 {
 	Global.debug = 1;
 	Global.obj_node_hna = 0;
@@ -68,7 +68,7 @@
 }
 
 
-void print_usage(void)
+static void print_usage(void)
 {
 
 	printf("Usage is olsrs3d [options] [-- [s3d options]]\n");
@@ -79,7 +79,7 @@
 	s3d_usage();
 }
 
-float dist(float p1[], float p2[])
+static float dist(float p1[], float p2[])
 {
 	float p[3];
 	p[0] = p1[0] - p2[0];
@@ -88,7 +88,7 @@
 	return (sqrt(p[0]*p[0]   +  p[1]*p[1]  +  p[2]*p[2]));
 }
 
-float dirt(float p1[], float p2[], float p3[])
+static float dirt(float p1[], float p2[], float p3[])
 {
 	float d;
 	d = dist(p1, p2);
@@ -105,7 +105,7 @@
 	return(d);
 }
 
-void handle_node(void)
+static void handle_node(void)
 {
 	struct node *node, *tmp_node;
 	struct node_con *con;
@@ -192,7 +192,7 @@
 	return;
 }
 
-void mov_add(float mov[], float p[], float fac)
+static void mov_add(float mov[], float p[], float fac)
 {
 	/* if (fac>1000)
 	  return;
@@ -202,7 +202,7 @@
 	mov[2] += fac * p[2];
 }
 
-void move_meshnode(struct node *node)
+static void move_meshnode(struct node *node)
 {
 	float null_vec[3] = {0, 0, 0};
 	float tmp_mov_vec[3];
@@ -223,7 +223,7 @@
 	}
 }
 
-void color_handler(struct node_con *con)
+static void color_handler(struct node_con *con)
 {
 	float rgb = 0.0, r = 0.0, g = 0.0, b = 0.0, etx;
 	int c, c1 = 0;
@@ -313,7 +313,7 @@
 }
 
 
-void calc_node_mov(void)
+static void calc_node_mov(void)
 {
 
 	float distance;
@@ -390,7 +390,7 @@
 
 }
 
-void mainloop(void)
+static void mainloop(void)
 {
 	static int last_count = 0;
 	int net_result;   /* result of function net_main */
@@ -435,7 +435,7 @@
 	return;
 }
 
-int object_info(struct s3d_evt *hrmz)
+static int object_info(struct s3d_evt *hrmz)
 {
 	struct s3d_obj_info *inf;
 	inf = (struct s3d_obj_info *)hrmz->buf;
@@ -468,7 +468,7 @@
 	return(0);
 }
 
-int keypress(struct s3d_evt *event)
+static int keypress(struct s3d_evt *event)
 {
 
 	struct s3d_key_event *key = (struct s3d_key_event *)event->buf;

Modified: trunk/apps/meshs3d/net.c
===================================================================
--- trunk/apps/meshs3d/net.c	2007-10-18 23:59:50 UTC (rev 773)
+++ trunk/apps/meshs3d/net.c	2007-10-18 23:59:57 UTC (rev 774)
@@ -36,10 +36,10 @@
 #include "meshs3d.h"
 
 #define PORT 2004
-char buf[MAXDATASIZE];
+static char buf[MAXDATASIZE];
 
 
-int sockfd, numbytes;
+static int sockfd, numbytes;
 
 int net_init(char *host)
 {

Modified: trunk/apps/meshs3d/process.c
===================================================================
--- trunk/apps/meshs3d/process.c	2007-10-18 23:59:50 UTC (rev 773)
+++ trunk/apps/meshs3d/process.c	2007-10-18 23:59:57 UTC (rev 774)
@@ -46,12 +46,12 @@
 struct hashtable_t *con_hash;
 
 
-int long_comp(void *data1, void *data2)
+static int long_comp(void *data1, void *data2)
 {
 	return(memcmp(data1, data2, 8));
 }
 
-int long_choose(void *data, int32_t size)
+static int long_choose(void *data, int32_t size)
 {
 	unsigned char *key = data;
 	uint32_t hash = 0;
@@ -68,14 +68,14 @@
 	return (hash % size);
 }
 
-int orig_comp(void *data1, void *data2)
+static int orig_comp(void *data1, void *data2)
 {
 	return(memcmp(data1, data2, 4));
 }
 
 /* hashfunction to choose an entry in a hash table of given size */
 /* hash algorithm from http://en.wikipedia.org/wiki/Hash_table */
-int orig_choose(void *data, int32_t size)
+static int orig_choose(void *data, int32_t size)
 {
 	unsigned char *key = data;
 	uint32_t hash = 0;
@@ -92,7 +92,7 @@
 	return (hash % size);
 }
 
-void exit_error(char *format, ...)
+static void exit_error(char *format, ...)
 {
 	va_list args;
 
@@ -112,7 +112,7 @@
 	return;
 }
 
-void handle_con(unsigned int ip1, unsigned int ip2, float etx)
+static void handle_con(unsigned int ip1, unsigned int ip2, float etx)
 {
 
 	unsigned int ip[2];
@@ -183,7 +183,7 @@
 
 }
 
-struct node *handle_mesh_node(unsigned int ip, char *ip_string) {
+static struct node *handle_mesh_node(unsigned int ip, char *ip_string) {
 	struct node *orig_node;
 	struct hashtable_t *swaphash;
 



From lazhur at mail.berlios.de  Fri Oct 19 02:00:07 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 02:00:07 +0200
Subject: [S3d-svn] r775 - trunk/apps/olsrs3d
Message-ID: <200710190000.l9J007Pi031158@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 02:00:06 +0200 (Fri, 19 Oct 2007)
New Revision: 775

Modified:
   trunk/apps/olsrs3d/main.c
   trunk/apps/olsrs3d/net.c
   trunk/apps/olsrs3d/process.c
   trunk/apps/olsrs3d/search.c
Log:
olsrs3d: Mark local functions and variables as static


Modified: trunk/apps/olsrs3d/main.c
===================================================================
--- trunk/apps/olsrs3d/main.c	2007-10-18 23:59:57 UTC (rev 774)
+++ trunk/apps/olsrs3d/main.c	2007-10-19 00:00:06 UTC (rev 775)
@@ -47,7 +47,7 @@
 
 int Debug = 0;
 
-char Olsr_host[256];   /* ip or hostname of olsr node with running dot_draw plugin */
+static char Olsr_host[256];   /* ip or hostname of olsr node with running dot_draw plugin */
 
 struct olsr_con *Con_begin = NULL;   /* begin of connection list */
 struct olsr_node *Olsr_root = NULL;   /* top of olsr node tree */
@@ -55,10 +55,10 @@
 
 int Olsr_node_count = 0, Last_olsr_node_count = -1;
 int Olsr_node_count_obj = -1;
-int Olsr_ip_label_obj = -1;
-int Output_border[4];
-int *Olsr_neighbour_label_obj = NULL;
-int Size;
+static int Olsr_ip_label_obj = -1;
+static int Output_border[4];
+static int *Olsr_neighbour_label_obj = NULL;
+static int Size;
 
 
 int Net_read_count;
@@ -67,30 +67,30 @@
 
 int Olsr_node_obj, Olsr_node_inet_obj, Olsr_node_hna_net, S3d_obj;
 
-float Asp = 1.0;
+static float Asp = 1.0;
 float Bottom = -1.0;
 float Left = -1.0;
 
 float CamPosition[2][3]; /* CamPosition[trans|rot][x-z] */
-float CamPosition2[2][3]; /* CamPosition[trans|rot][x-z] */
+static float CamPosition2[2][3]; /* CamPosition[trans|rot][x-z] */
 
 /* needed ? */
 /* float ZeroPosition[3] = {0,0,0};  current position zero position */
 
 int ZeroPoint;   /* object zeropoint */
-float Zp_rotate = 0.0;
-int ColorSwitch = 0;   /* enable/disable colored olsr connections */
-int RotateSwitch = 0;
-float RotateSpeed = 0.5;
-float Factor = 0.6; /* Factor in calc_olsr_node_mov */
-struct olsr_node *Olsr_node_pEtx;
+static float Zp_rotate = 0.0;
+static int ColorSwitch = 0;   /* enable/disable colored olsr connections */
+static int RotateSwitch = 0;
+static float RotateSpeed = 0.5;
+static float Factor = 0.6; /* Factor in calc_olsr_node_mov */
+static struct olsr_node *Olsr_node_pEtx;
 
 int Btn_close_id = -1;
 
 int Btn_close_obj;
-unsigned int Last_Click_Time = 0;
-int Last_Click_Oid = 0;
-float Title_len;
+static unsigned int Last_Click_Time = 0;
+static int Last_Click_Oid = 0;
+static float Title_len;
 
 /***
  *
@@ -98,7 +98,7 @@
  *
  ***/
 
-void print_usage(void)
+static void print_usage(void)
 {
 
 	printf("Usage is olsrs3d [options] [-- [s3d options]]\n");
@@ -111,14 +111,14 @@
 }
 
 
-void close_win(s3dw_widget *button)
+static void close_win(s3dw_widget *button)
 {
 	s3dw_delete(button->parent); /* parent =surface. this means close containing window */
 }
 
 
 
-void window_help(void)
+static void window_help(void)
 {
 
 	s3dw_surface *infwin;
@@ -186,7 +186,7 @@
 
 
 
-unsigned int get_time(void)
+static unsigned int get_time(void)
 {
 
 	struct timeval tv;
@@ -234,7 +234,7 @@
  *
  ***/
 
-float dirt(float p1[], float p2[], float p3[])
+static float dirt(float p1[], float p2[], float p3[])
 {
 	float d;
 	d = dist(p1, p2);
@@ -264,7 +264,7 @@
  *
  ***/
 
-void mov_add(float mov[], float p[], float fac)
+static void mov_add(float mov[], float p[], float fac)
 {
 	/* if (fac>1000)
 	  return;
@@ -284,7 +284,7 @@
  *
  ***/
 
-void handle_olsr_node(struct olsr_node *olsr_node)
+static void handle_olsr_node(struct olsr_node *olsr_node)
 {
 
 	float distance, angle, angle_rad;
@@ -498,7 +498,7 @@
  *
  ***/
 
-void calc_olsr_node_mov(void)
+static void calc_olsr_node_mov(void)
 {
 
 	float distance;
@@ -534,7 +534,7 @@
  *
  ***/
 
-void move_olsr_nodes(void)
+static void move_olsr_nodes(void)
 {
 
 	float null_vec[3] = {0, 0, 0}, vertex_buf[6];
@@ -720,7 +720,7 @@
 
 
 
-void mainloop(void)
+static void mainloop(void)
 {
 
 	int net_result;   /* result of function net_main */
@@ -797,7 +797,7 @@
 
 }
 
-int stop(struct s3d_evt* OLSRS3DUNUSED(evt))
+static int stop(struct s3d_evt* OLSRS3DUNUSED(evt))
 {
 	s3d_quit();
 	net_quit();
@@ -810,7 +810,7 @@
  *
  ***/
 
-int keypress(struct s3d_evt *event)
+static int keypress(struct s3d_evt *event)
 {
 
 	struct s3d_key_event *key = (struct s3d_key_event *)event->buf;
@@ -901,7 +901,7 @@
  *
  ***/
 
-int object_click(struct s3d_evt *evt)
+static int object_click(struct s3d_evt *evt)
 {
 	/* int i
 	 char ip_str[50];
@@ -1095,7 +1095,7 @@
  *
  ***/
 
-int object_info(struct s3d_evt *hrmz)
+static int object_info(struct s3d_evt *hrmz)
 {
 	struct s3d_obj_info *inf;
 	inf = (struct s3d_obj_info *)hrmz->buf;
@@ -1122,7 +1122,7 @@
 	return(0);
 }
 
-int mbutton_press(struct s3d_evt *hrmz)
+static int mbutton_press(struct s3d_evt *hrmz)
 {
 	struct s3d_but_info *inf;
 	inf = (struct s3d_but_info *)hrmz->buf;

Modified: trunk/apps/olsrs3d/net.c
===================================================================
--- trunk/apps/olsrs3d/net.c	2007-10-18 23:59:57 UTC (rev 774)
+++ trunk/apps/olsrs3d/net.c	2007-10-19 00:00:06 UTC (rev 775)
@@ -38,10 +38,10 @@
 #include "olsrs3d.h"
 
 #define PORT 2004   /* the port client will be connecting to  */
-char buf[MAXDATASIZE];
+static char buf[MAXDATASIZE];
 
 
-int sockfd, numbytes;
+static int sockfd, numbytes;
 int net_init(char *host)
 {
 	struct hostent *he;

Modified: trunk/apps/olsrs3d/process.c
===================================================================
--- trunk/apps/olsrs3d/process.c	2007-10-18 23:59:57 UTC (rev 774)
+++ trunk/apps/olsrs3d/process.c	2007-10-19 00:00:06 UTC (rev 775)
@@ -50,7 +50,7 @@
  *
  ***/
 
-int add_olsr_con(struct olsr_node *con_from, struct olsr_node *con_to, float etx)
+static int add_olsr_con(struct olsr_node *con_from, struct olsr_node *con_to, float etx)
 {
 
 	struct olsr_con **olsr_con = &Con_begin;
@@ -164,7 +164,7 @@
  *
  ***/
 
-void *get_olsr_node(struct olsr_node **olsr_node, char *ip)
+static void* get_olsr_node(struct olsr_node **olsr_node, char *ip)
 {
 
 	int result;   /* result of strcmp */

Modified: trunk/apps/olsrs3d/search.c
===================================================================
--- trunk/apps/olsrs3d/search.c	2007-10-18 23:59:57 UTC (rev 774)
+++ trunk/apps/olsrs3d/search.c	2007-10-19 00:00:06 UTC (rev 775)
@@ -31,15 +31,15 @@
 /* #include "structs.h"  already included by olsrs3d.h */
 #include "search.h"
 
-s3dw_surface *_search_surface;
-s3dw_input  *_search_input;
-s3dw_widget  *_search_widget;
+static s3dw_surface *_search_surface;
+static s3dw_input  *_search_input;
+static s3dw_widget  *_search_widget;
 
-struct olsr_node *_node_root = NULL;
-struct olsr_node **search_node = NULL;
+static struct olsr_node *_node_root = NULL;
+static struct olsr_node **search_node = NULL;
 
-float _return_point[2][3];    /* cam position before move to the widget */
-int  _search_status = NOTHING;   /* status of search */
+static float _return_point[2][3];    /* cam position before move to the widget */
+static int  _search_status = NOTHING;   /* status of search */
 
 void _search_node(s3dw_widget *dummy);
 void _new_search_node(s3dw_widget *dummy);
@@ -82,7 +82,7 @@
 	s3d_translate(0, cam_position_t[0], cam_position_t[1], cam_position_t[2]);
 	s3d_rotate(0, cam_position_r[0], cam_position_r[1], cam_position_r[2]);
 }
-void _abort_search_window(s3dw_widget *bwidget)
+static void _abort_search_window(s3dw_widget *bwidget)
 {
 	s3dw_delete(bwidget->parent); /* remove the window cointaining the button */
 	_search_surface = NULL;



From lazhur at mail.berlios.de  Fri Oct 19 02:00:14 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 02:00:14 +0200
Subject: [S3d-svn] r776 - trunk/apps/olsrs3d
Message-ID: <200710190000.l9J00EOF031227@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 02:00:13 +0200 (Fri, 19 Oct 2007)
New Revision: 776

Modified:
   trunk/apps/olsrs3d/main.c
Log:
olsrs3d: Remove unused mbutton_press(..)


Modified: trunk/apps/olsrs3d/main.c
===================================================================
--- trunk/apps/olsrs3d/main.c	2007-10-19 00:00:06 UTC (rev 775)
+++ trunk/apps/olsrs3d/main.c	2007-10-19 00:00:13 UTC (rev 776)
@@ -1122,14 +1122,6 @@
 	return(0);
 }
 
-static int mbutton_press(struct s3d_evt *hrmz)
-{
-	struct s3d_but_info *inf;
-	inf = (struct s3d_but_info *)hrmz->buf;
-	printf("button %d, state %d\n", inf->button, inf->state);
-	return(0);
-}
-
 int main(int argc, char *argv[])
 {
 



From lazhur at mail.berlios.de  Fri Oct 19 02:00:22 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 02:00:22 +0200
Subject: [S3d-svn] r777 - trunk/apps/s3dfm
Message-ID: <200710190000.l9J00MKp031288@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 02:00:20 +0200 (Fri, 19 Oct 2007)
New Revision: 777

Modified:
   trunk/apps/s3dfm/dialog.c
   trunk/apps/s3dfm/focus.c
   trunk/apps/s3dfm/icon.c
   trunk/apps/s3dfm/main.c
   trunk/apps/s3dfm/s3dfm.h
Log:
s3dfm: Mark local functions and variables as static


Modified: trunk/apps/s3dfm/dialog.c
===================================================================
--- trunk/apps/s3dfm/dialog.c	2007-10-19 00:00:13 UTC (rev 776)
+++ trunk/apps/s3dfm/dialog.c	2007-10-19 00:00:20 UTC (rev 777)
@@ -39,7 +39,7 @@
 
 extern int typeinput;
 int fs_lock = 0;
-pthread_t filethread;
+static pthread_t filethread;
 
 
 void close_win(s3dw_widget *button)
@@ -47,7 +47,7 @@
 	s3dw_delete(button->parent); /* parent =surface. this means close containing window */
 }
 /* add all selected dirs in the new filelist */
-int get_selected(filelist *fp, t_node *dir)
+static int get_selected(filelist *fp, t_node *dir)
 {
 	int i;
 	char *s;
@@ -108,7 +108,7 @@
 	button->onclick = close_win;
 	s3dw_show(S3DWIDGET(infwin));
 }
-void window_fs_confirm_error(s3dw_widget *button)
+static void window_fs_confirm_error(s3dw_widget *button)
 {
 	fs_err.state = ESTATE_NONE;
 	s3dw_delete(button->parent); /* parent =surface. this means close containing window */
@@ -140,7 +140,7 @@
 	fs_lock = TYPE_NONE;
 	s3dw_delete(button->parent); /* parent =surface. this means close containing window */
 }
-void *thread_start(void *S3DFMUNUSED(ptr))
+static void* thread_start(void *S3DFMUNUSED(ptr))
 {
 	switch (fs_lock) {
 	case TYPE_COPY:

Modified: trunk/apps/s3dfm/focus.c
===================================================================
--- trunk/apps/s3dfm/focus.c	2007-10-19 00:00:13 UTC (rev 776)
+++ trunk/apps/s3dfm/focus.c	2007-10-19 00:00:20 UTC (rev 777)
@@ -25,7 +25,7 @@
 #include <s3d_keysym.h>
 #include <stdio.h> /* printf() */
 #include <math.h>  /* ceil(), sqrt() */
-int moveon = 1;
+static int moveon = 1;
 
 /* get the scale for the rootbox zoom */
 float focus_get_scale(t_node *f)

Modified: trunk/apps/s3dfm/icon.c
===================================================================
--- trunk/apps/s3dfm/icon.c	2007-10-19 00:00:13 UTC (rev 776)
+++ trunk/apps/s3dfm/icon.c	2007-10-19 00:00:20 UTC (rev 777)
@@ -26,7 +26,7 @@
 #include <math.h>  /* sin(),cos() */
 #include <string.h>  /* strlen() */
 #include <stdlib.h>  /* memcpy() */
-float icon_colors[T_TYPENUM][12] = {
+static float icon_colors[T_TYPENUM][12] = {
 	/* T_DUNO */
 	{ 0, 0, 0.5, 1.0,
 		0, 0, 0.5, 1.0,

Modified: trunk/apps/s3dfm/main.c
===================================================================
--- trunk/apps/s3dfm/main.c	2007-10-19 00:00:13 UTC (rev 776)
+++ trunk/apps/s3dfm/main.c	2007-10-19 00:00:20 UTC (rev 777)
@@ -30,7 +30,7 @@
 };
 t_node root, cam, *focus;
 
-void mainloop(void)
+static void mainloop(void)
 {
 	ani_mate();
 	s3dw_ani_mate();

Modified: trunk/apps/s3dfm/s3dfm.h
===================================================================
--- trunk/apps/s3dfm/s3dfm.h	2007-10-19 00:00:13 UTC (rev 776)
+++ trunk/apps/s3dfm/s3dfm.h	2007-10-19 00:00:20 UTC (rev 777)
@@ -115,6 +115,7 @@
 
 extern t_node root, cam; /* some global objects */
 extern t_node *focus; /* the focused object */
+extern int typeinput;
 extern struct fs_error fs_err;
 
 enum {



From lazhur at mail.berlios.de  Fri Oct 19 02:00:32 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 02:00:32 +0200
Subject: [S3d-svn] r778 - trunk/apps/s3dosm
Message-ID: <200710190000.l9J00WSU031390@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 02:00:31 +0200 (Fri, 19 Oct 2007)
New Revision: 778

Modified:
   trunk/apps/s3dosm/db.c
   trunk/apps/s3dosm/draw.c
   trunk/apps/s3dosm/gps.c
   trunk/apps/s3dosm/http_fetcher.c
   trunk/apps/s3dosm/kismet.c
   trunk/apps/s3dosm/main.c
   trunk/apps/s3dosm/nav.c
   trunk/apps/s3dosm/osm.c
   trunk/apps/s3dosm/s3dosm.h
   trunk/apps/s3dosm/ui.c
Log:
s3dosm: Mark local functions and variables as static


Modified: trunk/apps/s3dosm/db.c
===================================================================
--- trunk/apps/s3dosm/db.c	2007-10-19 00:00:20 UTC (rev 777)
+++ trunk/apps/s3dosm/db.c	2007-10-19 00:00:31 UTC (rev 778)
@@ -36,7 +36,7 @@
 int db_exec(const char *query, sqlite3_callback callback, void *arg);
 
 /* TODO: remove '' for security reasons */
-void clean_string(char *clean, char *dirty, int n)
+static void clean_string(char *clean, char *dirty, int n)
 {
 	strncpy(clean, dirty, n);
 	clean[n-1] = 0;

Modified: trunk/apps/s3dosm/draw.c
===================================================================
--- trunk/apps/s3dosm/draw.c	2007-10-19 00:00:20 UTC (rev 777)
+++ trunk/apps/s3dosm/draw.c	2007-10-19 00:00:31 UTC (rev 778)
@@ -64,13 +64,13 @@
 	int seg_id;    /* segment which is involved to the node (both internal counting) */
 };
 
-struct waylist  *waylist_p = NULL;
-struct nodelist *nodelist_p = NULL;
-struct adjlist *adjlist_p = NULL;
-int    nodelist_n = 0;
-int    adjlist_n = 0;
-int    waylist_n = 0;
-int    waylist_bufn = 0;
+static struct waylist  *waylist_p = NULL;
+static struct nodelist *nodelist_p = NULL;
+static struct adjlist *adjlist_p = NULL;
+static int    nodelist_n = 0;
+static int    adjlist_n = 0;
+static int    waylist_n = 0;
+static int    waylist_bufn = 0;
 
 
 void calc_earth_to_eukl(float lat, float lon, float alt, float *x)
@@ -82,7 +82,7 @@
 	x[1] = (ESIZE + alt) *   sin(la);
 	x[2] = (ESIZE + alt) * cos(lo) * cos(la);
 }
-int draw_icon(void *S3DOSMUNUSED(data), int argc, char **argv, char **S3DOSMUNUSED(azColName))
+static int draw_icon(void *S3DOSMUNUSED(data), int argc, char **argv, char **S3DOSMUNUSED(azColName))
 {
 	int i, tagid = -1, oid;
 	int nodeid = -1, layerid = -1;
@@ -129,7 +129,7 @@
 	return(0);
 }
 /* just fetches node information and puts in the nodelist */
-int insert_node(void *data, int argc, char **argv, char **azColName)
+static int insert_node(void *data, int argc, char **argv, char **azColName)
 {
 	struct nodelist *np = data; /* get the nodepointer */
 	int i;
@@ -142,7 +142,7 @@
 	}
 	return(0);
 }
-int select_waytype(void *data, int argc, char **argv, char **S3DOSMUNUSED(azColName))
+static int select_waytype(void *data, int argc, char **argv, char **S3DOSMUNUSED(azColName))
 {
 	int i;
 	for (i = 0; i < argc; i++) {
@@ -157,7 +157,7 @@
 	return(0);
 }
 /* draw waylist, clear the queue */
-void waylist_draw(char *filter)
+static void waylist_draw(char *filter)
 {
 	float len;
 	char query[MAXQ];
@@ -366,7 +366,7 @@
 
 	load_update_status((100.0*num_done) / (float)num_max);
 }
-void waylist_add(struct waylist *p)
+static void waylist_add(struct waylist *p)
 {
 	if (waylist_n >= waylist_bufn) {
 		waylist_bufn += 64;
@@ -379,7 +379,7 @@
 	waylist_n++;
 }
 
-int way_group(void *data, int argc, char **argv, char **azColName)
+static int way_group(void *data, int argc, char **argv, char **azColName)
 {
 	int i;
 	int id = -1;
@@ -418,7 +418,7 @@
 	s3d_rotate(user_icon, (90 - la), lo, 0);
 }
 
-void draw_ways(char *filter)
+static void draw_ways(char *filter)
 {
 	char query[MAXQ];
 	num_done = 0;
@@ -428,12 +428,12 @@
 	db_exec(query, way_group, filter);
 	waylist_draw(filter); /* last way */
 }
-void draw_osm(void)
+static void draw_osm(void)
 {
 	load_window("Drawing Card ...");
 	draw_ways("layer_id=(SELECT layer_id FROM layer WHERE name='osm')");
 }
-void draw_kismet(void)
+static void draw_kismet(void)
 {
 	char query[MAXQ];
 	char filter[] = "layer_id=(SELECT layer_id FROM layer WHERE name='kismet')";

Modified: trunk/apps/s3dosm/gps.c
===================================================================
--- trunk/apps/s3dosm/gps.c	2007-10-19 00:00:20 UTC (rev 777)
+++ trunk/apps/s3dosm/gps.c	2007-10-19 00:00:31 UTC (rev 778)
@@ -25,7 +25,7 @@
 #include <s3d.h>
 #include "s3dosm.h"
 #include <stdio.h>  /* printf() */
-int user_icon = -1, user_icon_rotator = -1;
+static int user_icon = -1, user_icon_rotator = -1;
 #ifdef HAVE_GPS
 #include <gps.h>  /* gps_*() */
 #ifdef NMEA_CHANNELS

Modified: trunk/apps/s3dosm/http_fetcher.c
===================================================================
--- trunk/apps/s3dosm/http_fetcher.c	2007-10-19 00:00:20 UTC (rev 777)
+++ trunk/apps/s3dosm/http_fetcher.c	2007-10-19 00:00:31 UTC (rev 778)
@@ -37,12 +37,12 @@
 #include "http_fetcher.h"
 
 /* Globals */
-int timeout = DEFAULT_READ_TIMEOUT;
-char *userAgent = NULL;
-char *referer = NULL;
-char *auth = NULL;
-int hideUserAgent = 0;
-int hideReferer = 1;
+static int timeout = DEFAULT_READ_TIMEOUT;
+static char *userAgent = NULL;
+static char *referer = NULL;
+static char *auth = NULL;
+static int hideUserAgent = 0;
+static int hideReferer = 1;
 extern const char *http_errlist[]; /* Array of HTTP Fetcher error messages */
 extern char convertedError[128]; /* Buffer to used when errors contain %d */
 static int errorSource = 0;

Modified: trunk/apps/s3dosm/kismet.c
===================================================================
--- trunk/apps/s3dosm/kismet.c	2007-10-19 00:00:20 UTC (rev 777)
+++ trunk/apps/s3dosm/kismet.c	2007-10-19 00:00:31 UTC (rev 778)
@@ -28,7 +28,7 @@
 #include <libxml/parser.h>
 #include <libxml/tree.h>
 static int layerid;
-void parse_kismet_node(xmlNodePtr cur)
+static void parse_kismet_node(xmlNodePtr cur)
 {
 	node_t node;
 	xmlAttrPtr attr;

Modified: trunk/apps/s3dosm/main.c
===================================================================
--- trunk/apps/s3dosm/main.c	2007-10-19 00:00:20 UTC (rev 777)
+++ trunk/apps/s3dosm/main.c	2007-10-19 00:00:31 UTC (rev 778)
@@ -41,7 +41,7 @@
 		s3dw_ani_mate();
 	}
 }
-int init(int argc, char **argv)
+static int init(int argc, char **argv)
 {
 	s3d_select_font("vera");
 	ui_init();
@@ -55,7 +55,7 @@
 	ready = 1;
 	return(0);
 }
-int quit(void)
+static int quit(void)
 {
 	ready = 0;
 	gps_quit();

Modified: trunk/apps/s3dosm/nav.c
===================================================================
--- trunk/apps/s3dosm/nav.c	2007-10-19 00:00:20 UTC (rev 777)
+++ trunk/apps/s3dosm/nav.c	2007-10-19 00:00:31 UTC (rev 778)
@@ -5,7 +5,8 @@
 #include <stdio.h> /* printf() */
 #include <math.h> /* fabs() */
 
-int oidx, oidy;
+static int oidx;
+int oidy;
 static float lat, lon, tlat, tlon;
 /* load rotation centers */
 void nav_init(void)
@@ -70,7 +71,7 @@
 	calc_earth_to_eukl(lon, lat, 0, x);
 }
 
-int get_center(void *data, int argc, char **argv, char **azColName)
+static int get_center(void *data, int argc, char **argv, char **azColName)
 {
 	float *med = (float *)data;
 	int i;

Modified: trunk/apps/s3dosm/osm.c
===================================================================
--- trunk/apps/s3dosm/osm.c	2007-10-19 00:00:20 UTC (rev 777)
+++ trunk/apps/s3dosm/osm.c	2007-10-19 00:00:31 UTC (rev 778)
@@ -28,7 +28,7 @@
 #include <libxml/tree.h>
 #include "http_fetcher.h"
 static int layerid;
-int parse_osm_tags(object_t *obj, xmlNodePtr cur)
+static int parse_osm_tags(object_t *obj, xmlNodePtr cur)
 {
 	xmlNodePtr c;
 	xmlAttrPtr attr;
@@ -47,7 +47,7 @@
 	return(0);
 
 }
-void parse_osm_way(xmlNodePtr cur)
+static void parse_osm_way(xmlNodePtr cur)
 {
 	way_t way;
 	xmlNodePtr kids;
@@ -70,7 +70,7 @@
 		}
 	}
 }
-void parse_osm_segment(xmlNodePtr cur)
+static void parse_osm_segment(xmlNodePtr cur)
 {
 	segment_t segment;
 	xmlAttrPtr attr;
@@ -89,7 +89,7 @@
 		parse_osm_tags(OBJECT_T(&segment), cur);
 	}
 }
-void parse_osm_node(xmlNodePtr cur)
+static void parse_osm_node(xmlNodePtr cur)
 {
 	node_t node;
 	xmlAttrPtr attr;

Modified: trunk/apps/s3dosm/s3dosm.h
===================================================================
--- trunk/apps/s3dosm/s3dosm.h	2007-10-19 00:00:20 UTC (rev 777)
+++ trunk/apps/s3dosm/s3dosm.h	2007-10-19 00:00:31 UTC (rev 778)
@@ -124,6 +124,7 @@
 
 /* object.c */
 void    object_init(object_t *nobj);
+void    object_free(object_t *obj);
 void    node_init(node_t *nnode);
 void    segment_init(segment_t *nsegment);
 void    way_init(way_t *nway);

Modified: trunk/apps/s3dosm/ui.c
===================================================================
--- trunk/apps/s3dosm/ui.c	2007-10-19 00:00:20 UTC (rev 777)
+++ trunk/apps/s3dosm/ui.c	2007-10-19 00:00:31 UTC (rev 778)
@@ -35,7 +35,7 @@
 };
 
 /* load icons, we want to clone each of them later */
-void ui_loadicons(void)
+static void ui_loadicons(void)
 {
 	int i;
 	for (i = 0;i < ICON_NUM;i++)
@@ -46,12 +46,12 @@
 static s3dw_label   *loadlabel = NULL;
 static s3dw_label   *loadstatus = NULL;
 
-void key_button(s3dw_widget *button)
+static void key_button(s3dw_widget *button)
 {
 	s3dw_delete(button->parent); /* parent =surface. this means close containing window */
 }
 
-int ui_getinfo_node(void *S3DOSMUNUSED(data), int argc, char **argv, char **azColName)
+static int ui_getinfo_node(void *S3DOSMUNUSED(data), int argc, char **argv, char **azColName)
 {
 	int i, tagid = -1;
 	char type[MAXQ];
@@ -79,7 +79,7 @@
 
 	return(0);
 }
-int ui_getinfo_way(void *S3DOSMUNUSED(data), int argc, char **argv, char **azColName)
+static int ui_getinfo_way(void *S3DOSMUNUSED(data), int argc, char **argv, char **azColName)
 {
 	int i, tagid = -1;
 	char name[MAXQ];
@@ -105,7 +105,7 @@
 	return(0);
 }
 
-int ui_click(struct s3d_evt *evt)
+static int ui_click(struct s3d_evt *evt)
 {
 	int oid = (int) * ((uint32_t *)evt->buf);
 	char query[MAXQ];
@@ -117,13 +117,13 @@
 
 	return(0);
 }
-int ui_key(struct s3d_evt *evt)
+static int ui_key(struct s3d_evt *evt)
 {
 	/* struct s3d_key_event *key=(struct s3d_key_event *)evt->buf;*/
 	if (s3dw_handle_key(evt)) return(0);
 	return(0);
 }
-int ui_oinfo(struct s3d_evt *evt)
+static int ui_oinfo(struct s3d_evt *evt)
 {
 	s3dw_object_info(evt);
 	return(0);



From lazhur at mail.berlios.de  Fri Oct 19 02:00:39 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 02:00:39 +0200
Subject: [S3d-svn] r779 - trunk/apps/s3dvt
Message-ID: <200710190000.l9J00dvM031424@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 02:00:38 +0200 (Fri, 19 Oct 2007)
New Revision: 779

Modified:
   trunk/apps/s3dvt/main.c
   trunk/apps/s3dvt/terminal.c
Log:
s3dvt: Mark local functions and variables as static


Modified: trunk/apps/s3dvt/main.c
===================================================================
--- trunk/apps/s3dvt/main.c	2007-10-19 00:00:31 UTC (rev 778)
+++ trunk/apps/s3dvt/main.c	2007-10-19 00:00:38 UTC (rev 779)
@@ -65,7 +65,7 @@
 static int    lines[MAX_LINES];
 #endif
 
-void *thread_terminal(void *S3DVTUNUSED(a))
+static void* thread_terminal(void *S3DVTUNUSED(a))
 {
 	int iscon = 1, ret;
 	char buffer[1024];
@@ -101,7 +101,7 @@
 	}
 	return(NULL); /* huh?! */
 }
-int pty_init_terminal(void)
+static int pty_init_terminal(void)
 {
 	int i;
 	char buf[256];
@@ -183,7 +183,7 @@
 }
 
 
-int pipe_init_terminal(void)
+static int pipe_init_terminal(void)
 {
 	char buf[256];
 	int uid = 0, gid = 0;
@@ -235,7 +235,7 @@
 	}
 	return 1;
 }
-int init_terminal(void)
+static int init_terminal(void)
 {
 	int i;
 	for (i = 0;i < 5;i++)
@@ -243,7 +243,7 @@
 			return(0);
 	return(pipe_init_terminal());  /*  if not, fallback to pipe mode */
 }
-void term_unload(void)
+static void term_unload(void)
 {
 	printf("unloading tty!!\n");
 	switch (term_mode) {
@@ -374,7 +374,7 @@
 / *   printf("\n"); * /
  }
 }*/
-int keypress(struct s3d_evt *event)
+static int keypress(struct s3d_evt *event)
 {
 	struct s3d_key_event *keys = (struct s3d_key_event *)event->buf;
 	int key;
@@ -466,8 +466,8 @@
 	return(0);
 
 }
-int i = 0;
-void mainloop(void)
+static int i = 0;
+static void mainloop(void)
 {
 	usleep(10000);
 	nanosleep(&t, NULL);
@@ -486,12 +486,12 @@
 		paintit();
 	}
 }
-int stop(struct s3d_evt *S3DVTUNUSED(event))
+static int stop(struct s3d_evt *S3DVTUNUSED(event))
 {
 	s3d_quit();
 	return(0);
 }
-unsigned int draw_background(void)
+static unsigned int draw_background(void)
 {
 	unsigned int b;
 	b = s3d_new_object();
@@ -507,7 +507,7 @@
 	s3d_flags_on(b, S3D_OF_VISIBLE);
 	return(b);
 }
-void chars_s3d_init(void)
+static void chars_s3d_init(void)
 {
 #ifdef M_CHAR
 	char c[2];
@@ -523,7 +523,7 @@
 	s3d_clone_target(cursor, charbuf['_']);
 #endif
 }
-void chars_init(void)
+static void chars_init(void)
 {
 #ifdef M_CHAR
 	int x, y;

Modified: trunk/apps/s3dvt/terminal.c
===================================================================
--- trunk/apps/s3dvt/terminal.c	2007-10-19 00:00:31 UTC (rev 778)
+++ trunk/apps/s3dvt/terminal.c	2007-10-19 00:00:38 UTC (rev 779)
@@ -46,7 +46,7 @@
 static int curfgcolor = DEFAULT_FGCOLOR;
 static int curbgcolor = DEFAULT_BGCOLOR;
 
-void move_all_lines_up(void)
+static void move_all_lines_up(void)
 {
 	t_line *pfirstline = (t_line*) & line;
 	t_line *psecondline = (t_line*) & line + 1;
@@ -55,28 +55,28 @@
 	memcpy(pfirstline, &tmpline, (MAX_LINES - 1)*sizeof(struct line_struct));
 }
 
-void clear_char(int lineid, int charid)
+static void clear_char(int lineid, int charid)
 {
 	line[lineid].chars[charid].character = 0;
 	line[lineid].chars[charid].fgcolor = DEFAULT_FGCOLOR;
 	line[lineid].chars[charid].bgcolor = DEFAULT_BGCOLOR;
 }
 
-void clear_line(int lineid)
+static void clear_line(int lineid)
 {
 	int i;
 	for (i = 0;i < MAX_CHARS;i++)
 		clear_char(lineid, i);
 }
 
-void clear_line_after_lastchar(void)
+static void clear_line_after_lastchar(void)
 {
 	int i;
 	for (i = cx;i < MAX_CHARS;i++)
 		clear_char(cy, i);
 }
 
-t_line* line_is_full(void)
+static t_line* line_is_full(void)
 {
 	t_line *pcurline = (t_line*) & line + cy;
 	cy++;
@@ -93,7 +93,7 @@
 	return pcurline;
 }
 
-void add_char_append(char toappend)
+static void add_char_append(char toappend)
 {
 	int shouldinc = 1;
 	t_line *pcurline = (t_line*) & line + cy;
@@ -108,7 +108,7 @@
 		cx++;
 }
 
-void backspace(void)
+static void backspace(void)
 {
 	if (cx > 0)
 		cx--;
@@ -116,7 +116,7 @@
 		cx = 0;
 }
 
-void endansi(void)
+static void endansi(void)
 {
 	printf(" [/ANSI(%d)]\n", isansi2);
 	isansi = 0;
@@ -133,7 +133,7 @@
        7                                      Negative (reverse) image
 */
 
-void ansi_change_graphic(char **args)
+static void ansi_change_graphic(char **args)
 {
 	int curcol;
 	int i;
@@ -194,7 +194,7 @@
 		}
 	}
 }
-void move_up_x_lines(char *arg)
+static void move_up_x_lines(char *arg)
 {
 	t_line *pfirstline;
 	t_line *psecondline;
@@ -218,7 +218,7 @@
 	}
 }
 
-void move_down_x_lines(char *arg)
+static void move_down_x_lines(char *arg)
 {
 	t_line *pfirstline;
 	t_line *psecondline;
@@ -239,7 +239,7 @@
 		memcpy(psecondline, &tmpline, (bottom - top)*sizeof(struct line_struct));
 	}
 }
-void delete_x_letters(char *arg1)
+static void delete_x_letters(char *arg1)
 {
 	int tmpint;
 	t_line *pcurline;
@@ -252,7 +252,7 @@
 	for (i = cx;i < cx + tmpint;i++)
 		clear_char(cy, i);
 }
-void move_x_letters(int mode, char *arg1)
+static void move_x_letters(int mode, char *arg1)
 {
 	int tmpint;
 	t_line *pcurline;
@@ -292,7 +292,7 @@
 		break;
 	}
 }
-void remove_beginning_from_curpos(void)
+static void remove_beginning_from_curpos(void)
 {
 	int i, j = cx;
 	for (i = cy;i < MAX_LINES;i++) {
@@ -303,7 +303,7 @@
 	}
 }
 
-int parseansi(char curchar)
+static int parseansi(char curchar)
 {
 	static char arg1[16] = "";
 	static char arg2[16] = "";
@@ -501,14 +501,14 @@
 	}
 	gotnewdata = 1;
 }
-void init_line(void)
+static void init_line(void)
 {
 	int i;
 	for (i = 0;i < MAX_LINES;i++) {
 		clear_line(i);
 	}
 }
-void term_addstring(char *toprint)
+static void term_addstring(char *toprint)
 {
 	char *ns;
 	for (ns = toprint;ns[0];ns++) {



From lazhur at mail.berlios.de  Fri Oct 19 02:00:53 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 02:00:53 +0200
Subject: [S3d-svn] r780 - trunk/apps/s3dvt
Message-ID: <200710190000.l9J00r8h031499@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 02:00:52 +0200 (Fri, 19 Oct 2007)
New Revision: 780

Modified:
   trunk/apps/s3dvt/terminal.c
Log:
s3dvt: Remove unused init_line(..) and term_addstring(..)


Modified: trunk/apps/s3dvt/terminal.c
===================================================================
--- trunk/apps/s3dvt/terminal.c	2007-10-19 00:00:38 UTC (rev 779)
+++ trunk/apps/s3dvt/terminal.c	2007-10-19 00:00:52 UTC (rev 780)
@@ -501,17 +501,3 @@
 	}
 	gotnewdata = 1;
 }
-static void init_line(void)
-{
-	int i;
-	for (i = 0;i < MAX_LINES;i++) {
-		clear_line(i);
-	}
-}
-static void term_addstring(char *toprint)
-{
-	char *ns;
-	for (ns = toprint;ns[0];ns++) {
-		term_addchar(ns[0]);
-	}  /*  better method */
-}



From lazhur at mail.berlios.de  Fri Oct 19 02:00:59 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 02:00:59 +0200
Subject: [S3d-svn] r781 - trunk/apps/s3d_x11gate
Message-ID: <200710190000.l9J00xwe031536@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 02:00:59 +0200 (Fri, 19 Oct 2007)
New Revision: 781

Modified:
   trunk/apps/s3d_x11gate/s3d_x11gate.c
Log:
s3d_x11gate: Mark local functions and variables as static


Modified: trunk/apps/s3d_x11gate/s3d_x11gate.c
===================================================================
--- trunk/apps/s3d_x11gate/s3d_x11gate.c	2007-10-19 00:00:52 UTC (rev 780)
+++ trunk/apps/s3d_x11gate/s3d_x11gate.c	2007-10-19 00:00:59 UTC (rev 781)
@@ -47,24 +47,22 @@
 #endif
 #endif
 
-int oid;
-XImage *image;
-Display *dpy = NULL;
-int window, scr;
-unsigned int width, height, height, depth;
-int format;
-char *data;
-Visual *visual;
-XShmSegmentInfo shminfo;
-char *tex_image = NULL, *otex_image = NULL, *img1, *img2;
+static int oid;
+static XImage *image;
+static Display *dpy = NULL;
+static int window, scr;
+static unsigned int width, height, height, depth;
+static Visual *visual;
+static XShmSegmentInfo shminfo;
+static char *tex_image = NULL, *otex_image = NULL, *img1, *img2;
 
 
 
-struct timeval start, end;
-int iterations;
-float count[3];
+static struct timeval start, end;
+static int iterations;
+static float count[3];
 
-int get_shift(uint32_t t)
+static int get_shift(uint32_t t)
 {
 	int i = 0;
 	while (t) {
@@ -73,7 +71,7 @@
 	}
 	return(i);
 }
-void mainloop(void)
+static void mainloop(void)
 {
 #define MAGIC_CHANGED ((unsigned int)~0)
 	unsigned int x, y;
@@ -156,7 +154,7 @@
 	/* XDestroyImage(image);*/
 	/* nanosleep(&t,NULL); */
 }
-int keypress(struct s3d_evt *event)
+static int keypress(struct s3d_evt *event)
 {
 	int key;
 	int kc;
@@ -180,7 +178,7 @@
 	return(0);
 
 }
-int mouseclick(struct s3d_evt *S3DX11UNUSED(event))
+static int mouseclick(struct s3d_evt *S3DX11UNUSED(event))
 {
 	int i;
 	printf("thats it, collecting:\n");



From lazhur at mail.berlios.de  Fri Oct 19 14:31:23 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 14:31:23 +0200
Subject: [S3d-svn] r782 - trunk/server
Message-ID: <200710191231.l9JCVNK0013839@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 14:31:19 +0200 (Fri, 19 Oct 2007)
New Revision: 782

Modified:
   trunk/server/event.c
   trunk/server/global.h
   trunk/server/graphics.c
   trunk/server/main.c
   trunk/server/mcp.c
   trunk/server/navigation.c
   trunk/server/object.c
   trunk/server/proto.c
   trunk/server/shm.c
   trunk/server/tcp.c
   trunk/server/user_glut.c
   trunk/server/user_sdl.c
Log:
server: Move extern definitions of variables to global.h


Modified: trunk/server/event.c
===================================================================
--- trunk/server/event.c	2007-10-19 00:00:59 UTC (rev 781)
+++ trunk/server/event.c	2007-10-19 12:31:19 UTC (rev 782)
@@ -31,8 +31,7 @@
 #include <netinet/in.h>  /*  htonl(),htons() */
 #endif
 #include <string.h>  /*  strlen(),strcpy() */
-extern int focus_oid;
-extern int winw, winh; /* to give aspect ratio to the program */
+
 /*  I don't plan to keep this until the end, but it can show us how */
 /*  to interact ... */
 int event_obj_click(struct t_process *p, int32_t oid)

Modified: trunk/server/global.h
===================================================================
--- trunk/server/global.h	2007-10-19 00:00:59 UTC (rev 781)
+++ trunk/server/global.h	2007-10-19 12:31:19 UTC (rev 782)
@@ -210,6 +210,9 @@
 void quit(void);
 void one_time(void);
 /*  network.c */
+extern uint8_t ibuf[MAXPLEN];
+extern uint8_t obuf[MAXPLEN];
+extern int turn;
 void sigpipe_handler(int);
 void sigio_handler(int);
 int network_init(void);
@@ -243,6 +246,7 @@
 int shm_write(struct buf_t *rb, char *buf, int n);
 int shm_read(struct buf_t *rb, char *buf, int n);
 /*  proto.c */
+extern int focus_oid;
 int prot_com_in(struct t_process *p, uint8_t *pbuf);
 int prot_com_out(struct t_process *p, uint8_t opcode, uint8_t *buf, uint16_t length);
 /* event.c */
@@ -256,6 +260,7 @@
 int event_quit(struct t_process *p);
 int event_ping_in(struct t_process *p, uint32_t o);
 /*   user.c */
+extern int but;
 int user_init(void);
 int user_quit(void);
 int user_main(void);
@@ -287,6 +292,7 @@
                                  const char *msg __attribute__((unused)), ...) {}
 #endif
 /*  graphics.c */
+extern int winw, winh;
 int graphics_quit(void);
 void graphics_main(void);
 int graphics_pick_obj(int x, int y);
@@ -297,6 +303,8 @@
 int graphics_quit_glut(void);
 #endif
 #ifdef G_SDL
+extern int aa_level;
+extern int SDLFlags;
 int graphics_init_sdl(void);
 int graphics_quit_sdl(void);
 #endif
@@ -315,6 +323,8 @@
 void navi_rot(int xdif, int ydif);
 void ptr_move(int x, int y);
 /*  process.c */
+extern struct t_process  *procs_p;
+extern int procs_n;
 struct t_process *process_add(void);
 int process_del(int id);
 int process_init(void);
@@ -372,6 +382,7 @@
 int mcp_init(void);
 int mcp_focus(int oid);
 /*  matrix.c */
+extern t_mtrx Identity;
 void myMultMatrix(t_mtrx mat2);
 void myGetMatrix(t_mtrx mat);
 void mySetMatrix(t_mtrx mat);

Modified: trunk/server/graphics.c
===================================================================
--- trunk/server/graphics.c	2007-10-19 00:00:59 UTC (rev 781)
+++ trunk/server/graphics.c	2007-10-19 12:31:19 UTC (rev 782)
@@ -43,8 +43,7 @@
 /*  ... and types/variables */
 static int select_mode = 0;
 int winw, winh;
-extern struct t_process *procs_p;
-extern int frame_mode;  /*  GLUT, SDL, ... ? */
+
 /*  this detects and opens the SDL things */
 
 int graphics_init(void)

Modified: trunk/server/main.c
===================================================================
--- trunk/server/main.c	2007-10-19 00:00:59 UTC (rev 781)
+++ trunk/server/main.c	2007-10-19 12:31:19 UTC (rev 782)
@@ -45,7 +45,6 @@
 static char *homerc = "~/.s3drc";
 static char *etcrc = "/etc/s3drc";
 /*static int father_done=0;*/
-extern int aa_level;
 static char **s3drc[] = {&rc, &homerc, &etcrc};
 
 static void mainloop(void);

Modified: trunk/server/mcp.c
===================================================================
--- trunk/server/mcp.c	2007-10-19 00:00:59 UTC (rev 781)
+++ trunk/server/mcp.c	2007-10-19 12:31:19 UTC (rev 782)
@@ -32,8 +32,6 @@
 #include <string.h>    /*  strncpy() */
 
 
-extern int      focus_oid;   /*  the focused program */
-
 /*  this interacts with the actual mcp client */
 struct mcp_object {
 	uint32_t object;

Modified: trunk/server/navigation.c
===================================================================
--- trunk/server/navigation.c	2007-10-19 00:00:59 UTC (rev 781)
+++ trunk/server/navigation.c	2007-10-19 12:31:19 UTC (rev 782)
@@ -25,7 +25,6 @@
 #include "global.h"
 #include <math.h> /* atan() */
 
-extern int winw, winh;
 void navi_right(void)
 {
 	navi_pos(1, 0);

Modified: trunk/server/object.c
===================================================================
--- trunk/server/object.c	2007-10-19 00:00:59 UTC (rev 781)
+++ trunk/server/object.c	2007-10-19 12:31:19 UTC (rev 782)
@@ -34,10 +34,6 @@
 #define MAXLOOP 10
 /*  if oid is always unsigned, we don't have to check oid>=0 */
 
-extern t_mtrx Identity;
-extern int focus_oid;
-
-
 static void obj_update_tex(struct t_tex *tex, u_int16_t x, u_int16_t y, u_int16_t w, u_int16_t h, u_int8_t *pixbuf);
 void obj_sys_update(struct t_process *p, int32_t oid);
 

Modified: trunk/server/proto.c
===================================================================
--- trunk/server/proto.c	2007-10-19 00:00:59 UTC (rev 781)
+++ trunk/server/proto.c	2007-10-19 12:31:19 UTC (rev 782)
@@ -34,7 +34,6 @@
 #endif
 /*  this code should do the protocol work .... */
 /*  */
-extern uint8_t obuf[MAXPLEN];
 int focus_oid = -1;  /*  initially focus the pid */
 /*  handle an incoming command from the client .. */
 

Modified: trunk/server/shm.c
===================================================================
--- trunk/server/shm.c	2007-10-19 00:00:59 UTC (rev 781)
+++ trunk/server/shm.c	2007-10-19 12:31:19 UTC (rev 782)
@@ -43,9 +43,6 @@
 #include <sys/shm.h>
 #include <time.h> /* nanosleep() */
 
-extern uint8_t ibuf[MAXPLEN];
-extern struct t_process *procs_p;
-extern int procs_n;
 static struct t_shmcb waiting_comblock;
 
 static key_t *data = NULL;
@@ -171,7 +168,7 @@
 	return(0);
 }
 
-extern int turn; /* set turn to 0 when timeslice is over */
+
 int shm_main(void)
 {
 	int      i/*,found*/;

Modified: trunk/server/tcp.c
===================================================================
--- trunk/server/tcp.c	2007-10-19 00:00:59 UTC (rev 781)
+++ trunk/server/tcp.c	2007-10-19 12:31:19 UTC (rev 782)
@@ -44,10 +44,6 @@
 #include <unistd.h>   /*  read(),write(),getpid(),close() */
 #include <stdlib.h>   /*  malloc(),free() */
 
-extern struct t_con *con_list;
-extern struct t_con mcp;
-extern uint8_t ibuf[MAXPLEN];
-extern int idc;
 static int tcp_sockid;
 int tcp_init(void)
 {
@@ -133,8 +129,6 @@
 		}
 	return(0);
 }
-extern struct t_process *procs_p;
-extern int procs_n;
 /*  this is about looking for new data on the sockets */
 /*  returns 1 when there was new data. */
 int tcp_pollproc(void)

Modified: trunk/server/user_glut.c
===================================================================
--- trunk/server/user_glut.c	2007-10-19 00:00:59 UTC (rev 781)
+++ trunk/server/user_glut.c	2007-10-19 12:31:19 UTC (rev 782)
@@ -30,7 +30,7 @@
 void special(int skey, int x, int y);
 void mouse_motion(int x, int y);
 void passive_mouse_motion(int x, int y);
-extern int but;
+
 /*  init user input things for glut */
 int user_init_glut(void)
 {

Modified: trunk/server/user_sdl.c
===================================================================
--- trunk/server/user_sdl.c	2007-10-19 00:00:59 UTC (rev 781)
+++ trunk/server/user_sdl.c	2007-10-19 12:31:19 UTC (rev 782)
@@ -27,7 +27,6 @@
 /*  this file reads user input */
 /*  this is done right now by SDL-polling */
 
-extern int SDLFlags;
 int user_init_sdl(void)
 {
 	SDL_EnableUNICODE(1);



From lazhur at mail.berlios.de  Fri Oct 19 14:31:32 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 14:31:32 +0200
Subject: [S3d-svn] r783 - trunk/libs3d
Message-ID: <200710191231.l9JCVWLS013894@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 14:31:31 +0200 (Fri, 19 Oct 2007)
New Revision: 783

Modified:
   trunk/libs3d/io.c
   trunk/libs3d/network.c
   trunk/libs3d/s3dlib.h
   trunk/libs3d/sei_triangulate.h
   trunk/libs3d/tcp.c
Log:
libs3d: Move extern definitions of variables to s3dlib.h


Modified: trunk/libs3d/io.c
===================================================================
--- trunk/libs3d/io.c	2007-10-19 12:31:19 UTC (rev 782)
+++ trunk/libs3d/io.c	2007-10-19 12:31:31 UTC (rev 783)
@@ -53,8 +53,6 @@
 #endif
 
 static char    *url = NULL;
-extern int     con_type;
-extern int     cb_lock;
 /*  this file is the client-lib-implementation which holds the function to connect and control the server. */
 #ifdef SIGS
 int _s3d_sigio = 0;

Modified: trunk/libs3d/network.c
===================================================================
--- trunk/libs3d/network.c	2007-10-19 12:31:19 UTC (rev 782)
+++ trunk/libs3d/network.c	2007-10-19 12:31:31 UTC (rev 783)
@@ -29,9 +29,6 @@
 #include <unistd.h>   /*  read(), write() */
 #include <errno.h>   /*  errno */
 #include <netinet/in.h>  /*  htons(),htonl() */
-#ifdef SIGS
-extern int _s3d_sigio;
-#endif
 int con_type = CON_NULL;
 #ifdef TCP
 static int _s3d_net_receive(void);

Modified: trunk/libs3d/s3dlib.h
===================================================================
--- trunk/libs3d/s3dlib.h	2007-10-19 12:31:19 UTC (rev 782)
+++ trunk/libs3d/s3dlib.h	2007-10-19 12:31:31 UTC (rev 783)
@@ -110,7 +110,12 @@
 int _queue_new_object(unsigned int oid);
 unsigned int _queue_want_object();
 int _queue_quit();
+/* io.c */
+#ifdef SIGS
+extern int _s3d_sigio;
+#endif
 /*  network.c */
+extern int con_type;
 int net_send(uint8_t opcode, char *buf, uint16_t length);
 int s3d_net_init(char *urlc);
 #ifdef TCP

Modified: trunk/libs3d/sei_triangulate.h
===================================================================
--- trunk/libs3d/sei_triangulate.h	2007-10-19 12:31:19 UTC (rev 782)
+++ trunk/libs3d/sei_triangulate.h	2007-10-19 12:31:31 UTC (rev 783)
@@ -185,6 +185,7 @@
 
 extern int monotonate_trapezoids(int);
 extern int triangulate_monotone_polygons(int, int, int (*)[3]);
+extern int sei_triangulate_polygon(int ncontours, int cntr[], double(*vertices)[2], int (*triangles)[3]);
 
 extern int _greater_than(point_t *, point_t *);
 extern int _equal_to(point_t *, point_t *);

Modified: trunk/libs3d/tcp.c
===================================================================
--- trunk/libs3d/tcp.c	2007-10-19 12:31:19 UTC (rev 782)
+++ trunk/libs3d/tcp.c	2007-10-19 12:31:31 UTC (rev 783)
@@ -38,7 +38,6 @@
 #define __USE_BSD 1  /* we want sig_t and F_SETOWN to be defined */
 #include <fcntl.h>   /*  fcntl */
 #include <signal.h>   /*  signal(), SIGPIPE, SIGIO */
-extern int _s3d_sigio;
 #endif
 
 static int s3d_socket;   /*  this is the socket which holds the tcp-socket .... */



From lazhur at mail.berlios.de  Fri Oct 19 14:31:44 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 14:31:44 +0200
Subject: [S3d-svn] r784 - trunk/libs3dw
Message-ID: <200710191231.l9JCViDP013939@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 14:31:43 +0200 (Fri, 19 Oct 2007)
New Revision: 784

Modified:
   trunk/libs3dw/arrange.c
   trunk/libs3dw/event.c
   trunk/libs3dw/root.c
   trunk/libs3dw/s3dw_int.h
   trunk/libs3dw/surface.c
Log:
libs3dw: Move extern definitions of variables to s3dw_int.h


Modified: trunk/libs3dw/arrange.c
===================================================================
--- trunk/libs3dw/arrange.c	2007-10-19 12:31:31 UTC (rev 783)
+++ trunk/libs3dw/arrange.c	2007-10-19 12:31:43 UTC (rev 784)
@@ -28,7 +28,6 @@
 #include <math.h> /* M_PI */
 #define R2D  (180/M_PI)
 s3dw_widget *_s3dw_cam = NULL;
-extern int ani_need_arr;
 
 void s3dw_arr_widgetcenter(s3dw_widget *widget, float *center)
 {

Modified: trunk/libs3dw/event.c
===================================================================
--- trunk/libs3dw/event.c	2007-10-19 12:31:31 UTC (rev 783)
+++ trunk/libs3dw/event.c	2007-10-19 12:31:43 UTC (rev 784)
@@ -24,7 +24,7 @@
 #include <s3d.h>
 #include <s3dw.h>
 #include <s3dw_int.h>
-extern s3dw_widget *_s3dw_cam;
+
 int s3dw_handle_click(struct s3d_evt *evt)
 {
 	uint32_t oid = *((uint32_t *)evt->buf);

Modified: trunk/libs3dw/root.c
===================================================================
--- trunk/libs3dw/root.c	2007-10-19 12:31:31 UTC (rev 783)
+++ trunk/libs3dw/root.c	2007-10-19 12:31:43 UTC (rev 784)
@@ -34,7 +34,6 @@
 
 
 static s3dw_widget *root = NULL;
-extern s3dw_widget *_s3dw_cam;
 
 /* just destroy the widget */
 void s3dw_root_destroy(s3dw_widget *widget)

Modified: trunk/libs3dw/s3dw_int.h
===================================================================
--- trunk/libs3dw/s3dw_int.h	2007-10-19 12:31:31 UTC (rev 783)
+++ trunk/libs3dw/s3dw_int.h	2007-10-19 12:31:43 UTC (rev 784)
@@ -106,6 +106,7 @@
 /* style.c */
 extern s3dw_style def_style;
 /* animate.c */
+extern int ani_need_arr;
 int  s3dw_ani_stackpos(s3dw_widget *f);
 void s3dw_ani_add(s3dw_widget *f);
 void s3dw_ani_del(int i);
@@ -115,6 +116,7 @@
 void s3dw_ani_needarr(void);
 int  s3dw_ani_check(s3dw_widget *f);
 /* arrange.c */
+extern s3dw_widget *_s3dw_cam;
 void s3dw_arrange(void);
 void s3dw_arr_widgetcenter(s3dw_widget *widget, float *center);
 void s3dw_arr_normdir(float *dir);

Modified: trunk/libs3dw/surface.c
===================================================================
--- trunk/libs3dw/surface.c	2007-10-19 12:31:31 UTC (rev 783)
+++ trunk/libs3dw/surface.c	2007-10-19 12:31:43 UTC (rev 784)
@@ -28,7 +28,6 @@
 #include <string.h> /* strdup() */
 #include <math.h> /* cos(), sin() */
 #define POPUPDIST 20
-extern s3dw_widget *_s3dw_cam; /* for correct popup position */
 
 void s3dw_surface_draw(s3dw_widget *widget)
 {



From lazhur at mail.berlios.de  Fri Oct 19 14:31:53 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 14:31:53 +0200
Subject: [S3d-svn] r785 - trunk/apps/s3dosm
Message-ID: <200710191231.l9JCVrXO013979@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 14:31:52 +0200 (Fri, 19 Oct 2007)
New Revision: 785

Modified:
   trunk/apps/s3dosm/http_error_codes.c
   trunk/apps/s3dosm/http_error_codes.h
   trunk/apps/s3dosm/http_fetcher.c
Log:
s3dosm: Move extern definitions of error_codes to http_error_codes.h


Modified: trunk/apps/s3dosm/http_error_codes.c
===================================================================
--- trunk/apps/s3dosm/http_error_codes.c	2007-10-19 12:31:43 UTC (rev 784)
+++ trunk/apps/s3dosm/http_error_codes.c	2007-10-19 12:31:52 UTC (rev 785)
@@ -21,6 +21,7 @@
  * Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
  */
 
+#include "http_error_codes.h"
 
 /* Note that '%d' cannot be escaped at this time */
 const char *http_errlist[] = {

Modified: trunk/apps/s3dosm/http_error_codes.h
===================================================================
--- trunk/apps/s3dosm/http_error_codes.h	2007-10-19 12:31:43 UTC (rev 784)
+++ trunk/apps/s3dosm/http_error_codes.h	2007-10-19 12:31:52 UTC (rev 785)
@@ -39,4 +39,7 @@
 #define HF_STATUSCODE 7
 #define HF_CONTENTLEN 8
 
+extern const char *http_errlist[];
+extern char convertedError[128];
+
 #endif

Modified: trunk/apps/s3dosm/http_fetcher.c
===================================================================
--- trunk/apps/s3dosm/http_fetcher.c	2007-10-19 12:31:43 UTC (rev 784)
+++ trunk/apps/s3dosm/http_fetcher.c	2007-10-19 12:31:52 UTC (rev 785)
@@ -43,8 +43,6 @@
 static char *auth = NULL;
 static int hideUserAgent = 0;
 static int hideReferer = 1;
-extern const char *http_errlist[]; /* Array of HTTP Fetcher error messages */
-extern char convertedError[128]; /* Buffer to used when errors contain %d */
 static int errorSource = 0;
 static int http_errno = 0;
 static int errorInt = 0;   /* When the error message has a %d in it,



From dotslash at mail.berlios.de  Fri Oct 19 16:12:13 2007
From: dotslash at mail.berlios.de (dotslash at BerliOS)
Date: Fri, 19 Oct 2007 16:12:13 +0200
Subject: [S3d-svn] r786 - in trunk: . apps/comptest
Message-ID: <200710191412.l9JECDDh018805@sheep.berlios.de>

Author: dotslash
Date: 2007-10-19 16:12:13 +0200 (Fri, 19 Oct 2007)
New Revision: 786

Modified:
   trunk/
   trunk/apps/comptest/comptest.c
Log:
 r2643 at kero:  dotslash | 2007-10-18 09:58:14 +0200
 - rename window_update to window_update_content



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:2641
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:2643

Modified: trunk/apps/comptest/comptest.c
===================================================================
--- trunk/apps/comptest/comptest.c	2007-10-19 12:31:52 UTC (rev 785)
+++ trunk/apps/comptest/comptest.c	2007-10-19 14:12:13 UTC (rev 786)
@@ -77,7 +77,7 @@
 }; /* 50 mili seconds */
 
 int xinit();
-void window_update(struct window *win, int x, int y, int width, int height);
+void window_update_content(struct window *win, int x, int y, int width, int height);
 static int print_event(Display *dpy, XEvent *event);
 void event();
 
@@ -347,7 +347,7 @@
 		win->oid = -1;
 		win->already_updated = 0;
 
-		window_update(win, 0, 0, win->attr.width, win->attr.height);
+		window_update_content(win, 0, 0, win->attr.width, win->attr.height);
 
 		win->next = window_head;
 		window_head = win;
@@ -370,7 +370,7 @@
 		win->attr.width = width;
 		win->attr.height = height;
 
-		window_update(win, 0,0, width, height);
+		window_update_content(win, 0,0, width, height);
 		return;
 	}
 	if ((win->attr.width == width) && (win->attr.height == height)) {
@@ -390,12 +390,12 @@
 
 		s3d_del_object(win->oid);	/* delete the window and redraw */
 		win->oid = -1;
-		window_update(win, 0,0, width, height);
+		window_update_content(win, 0,0, width, height);
 
 	}
 }
 
-void window_update(struct window *win, int x, int y, int width, int height)
+void window_update_content(struct window *win, int x, int y, int width, int height)
 {
 	int chunk_width, chunk_height;
 	int xleft, xright;
@@ -508,7 +508,7 @@
 			XDamageSubtract(dpy, e->damage, None, None);
 			window = window_find(e->drawable);
 			if (window!=NULL)
-				window_update(window, e->area.x, e->area.y, e->area.width, e->area.height);
+				window_update_content(window, e->area.x, e->area.y, e->area.width, e->area.height);
 		} else if (event.type == ConfigureNotify) {
 			XConfigureEvent *e = &event.xconfigure; 
 			window = window_find(e->window);



From dotslash at mail.berlios.de  Fri Oct 19 16:37:44 2007
From: dotslash at mail.berlios.de (dotslash at BerliOS)
Date: Fri, 19 Oct 2007 16:37:44 +0200
Subject: [S3d-svn] r787 - in trunk: . apps/comptest
Message-ID: <200710191437.l9JEbigQ020198@sheep.berlios.de>

Author: dotslash
Date: 2007-10-19 16:37:43 +0200 (Fri, 19 Oct 2007)
New Revision: 787

Modified:
   trunk/
   trunk/apps/comptest/comptest.c
Log:
 r2729 at kero:  dotslash | 2007-10-19 16:23:43 +0200
 - only update parts affected by the damage (part 1)



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:2643
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:2729

Modified: trunk/apps/comptest/comptest.c
===================================================================
--- trunk/apps/comptest/comptest.c	2007-10-19 14:12:13 UTC (rev 786)
+++ trunk/apps/comptest/comptest.c	2007-10-19 14:37:43 UTC (rev 787)
@@ -44,8 +44,12 @@
 #endif
 
 #define MAXEVENTS	50		/* maximum events per loop. */
+
+/* must be 2^x */
 #define TEXW 256
 #define TEXH 256
+#define TEXNUM(win, x, y)	\
+		((((win->attr.height + TEXH - 1)& ~(TEXH-1))/TEXH) * ((int)(x/TEXH)) + ((int)(y/TEXW)))
 
 struct extension {
 	int event, error;
@@ -76,12 +80,12 @@
 	0, 50*1000*1000
 }; /* 50 mili seconds */
 
-int xinit();
+int xinit(void);
 void window_update_content(struct window *win, int x, int y, int width, int height);
 static int print_event(Display *dpy, XEvent *event);
 void event();
 
-static void mainloop(void)
+static void mainloop()
 {
 	event();
 	nanosleep(&t, NULL);
@@ -308,7 +312,7 @@
 	/*  push data on texture 0 position (0,0) */
 	s3d_flags_on(win->oid, S3D_OF_VISIBLE);
 }
-static struct window* window_find(Window id)
+static struct window *window_find(Window id)
 {
 	struct window *window;
 	for (window = window_head; window!=NULL; window = window->next) {
@@ -337,7 +341,7 @@
 	/* XSelectInput(dpy, win->id, ExposureMask);*/
 	win->format = XRenderFindVisualFormat(dpy, win->attr.visual);
 
-	if (win->format != NULL) {
+	if (win->format != 0) {
 		/* printf("add window: %d:%d size: %dx%d\n", win->attr.x, win->attr.y, win->attr.width, win->attr.height);*/
 		win->damage = XDamageCreate(dpy, win->id, XDamageReportNonEmpty);
 
@@ -394,20 +398,66 @@
 
 	}
 }
+/* convert X-format to s3ds RGBA 32bit format */
+int image_convert(XImage *image, char *bitmap)
+{
+	int x, y;
+	int rs, gs, bs;
+	int bpp;
+	char *img_ptr, *bmp_ptr;
+	unsigned long *s;
+	uint32_t *t;
 
+
+	if (image->format == ZPixmap) {
+/*		printf("XImage: %dx%d, format %d (%d), bpp: %d, depth %d, pad %d\n",
+		       image->width, image->height, image->format,
+		       ZPixmap, image->bits_per_pixel, image->depth, image->bitmap_pad);*/
+		rs = get_shift(image->red_mask) - 8;
+		gs = get_shift(image->green_mask) - 8;
+		bs = get_shift(image->blue_mask) - 8;
+
+		bpp = (image->bits_per_pixel / 8);
+		/* rgb is not bgr */
+		rs = rs;
+		gs = gs - 8;
+		bs = bs - 16;
+/*		printf("Ximage: rgb: %d|%d|%d\n", rs, gs, bs);;*/
+		/*  printf("red: size %d, offset %d\n",rs,roff);
+		  printf("green: size %d, offset %d\n",gs,goff);
+		  printf("blue: size %d, offset %d\n",bs,boff);
+		  printf("bits per pixel:%d\n",bpp);*/
+		for (y = 0; y < image->height ; y++) {
+			img_ptr = image->data + (y * image->width) * bpp;
+			bmp_ptr = bitmap + (y * image->width) * sizeof(uint32_t);
+			for (x = 0; x < image->width; x++) {
+				s = (unsigned long *)	img_ptr;
+				t = (uint32_t *)		bmp_ptr;
+				/*    bmp_ptr[0] = (rs > 0 ? ((*d & image->red_mask) >> rs)  : ((*d  & image->red_mask) << -rs)) ;
+				 bmp_ptr[1] = (gs > 0 ? ((*d & image->green_mask) >> gs) : ((*d  & image->green_mask) << -gs)) ;
+				 bmp_ptr[2] = (bs > 0 ? ((*d & image->blue_mask) >> bs)  : ((*d  & image->blue_mask) << -bs));
+				 bmp_ptr[3] = 255 ;*/
+				*t = (rs > 0 ? ((*s & image->red_mask) >> rs)  : ((*s  & image->red_mask) << -rs)) |
+				     (gs > 0 ? ((*s & image->green_mask) >> gs) : ((*s  & image->green_mask) << -gs)) |
+				     (bs > 0 ? ((*s & image->blue_mask) >> bs)  : ((*s  & image->blue_mask) << -bs)) |
+				     255 << 24;
+
+				bmp_ptr += sizeof(uint32_t);
+				img_ptr += bpp;
+			}
+		}
+		return(0);
+	}
+	return(-1);
+}
+
+/* takes a bounding box and updates its window contents */
 void window_update_content(struct window *win, int x, int y, int width, int height)
 {
 	int chunk_width, chunk_height;
 	int xleft, xright;
 	int ytop, ybottom;
-	int texnum;
-	int xi, yi;
-	int rs, gs, bs;
-	int bpp;
-	char *img_ptr, *bmp_ptr;
 	char *bitmap;
-	unsigned long *s;
-	uint32_t *t;
 	XImage *image;
 
 	/* update the whole window for now. */
@@ -415,9 +465,11 @@
 	y = 0;
 	width = win->attr.width;
 	height = win->attr.height;
+	if (x < 0) x = 0;
+	if (y < 0) y = 0;
+	if (width > win->attr.width - x)			width = win->attr.width - x;
+	if (height > win->attr.height - y)			height = win->attr.height - y;
 
-	texnum = 0;
-
 	if (x == 0 && y == 0 && width == win->attr.width && height == win->attr.height) {
 		if (win->already_updated) 
 			return;
@@ -428,61 +480,32 @@
 	/* if (!win->oid)
 	  deco_box(win);
 	*/
-	for (xleft = 0; xleft < width ; xleft += TEXW) {
-		xright = (xleft + TEXW > width) ? width : xleft + TEXW;
+	for (xleft = x; xleft < x + width ; xleft = xright) {
+		xright = (xleft + TEXW) & ~(TEXW-1);
+		if (xright > (x + width))
+			xright = x + width;
 		chunk_width = xright - xleft;
-		image = XGetImage(dpy, win->id, xleft, y, chunk_width, win->attr.height, AllPlanes, ZPixmap);
+		printf("request image: xleft = %d, xright = %d, width = %d, x:y = %d:%d, width:height = %d:%d, ~TEXW = %08x\n",
+						xleft, xright, width, x, y, width, height, ~TEXW);
+		image = XGetImage(dpy, win->id, xleft, y, chunk_width, height, AllPlanes, ZPixmap);
 		if (!image)
 			return;
-		bitmap = malloc(chunk_width * height * sizeof(uint32_t));
+		bitmap = malloc(TEXW * height * sizeof(uint32_t));
 		if (win->oid == -1) 
 			deco_box(win);
-		if (image->format == ZPixmap) {
-/*			printf("XImage: %dx%d, format %d (%d), bpp: %d, depth %d, pad %d\n",
-			       image->width, image->height, image->format,
-			       ZPixmap, image->bits_per_pixel, image->depth, image->bitmap_pad);*/
-			rs = get_shift(image->red_mask) - 8;
-			gs = get_shift(image->green_mask) - 8;
-			bs = get_shift(image->blue_mask) - 8;
-
-			bpp = (image->bits_per_pixel / 8);
-			/* rgb is not bgr */
-			rs = rs;
-			gs = gs - 8;
-			bs = bs - 16;
-/*			printf("Ximage: rgb: %d|%d|%d\n", rs, gs, bs);;*/
-			/*  printf("red: size %d, offset %d\n",rs,roff);
-			  printf("green: size %d, offset %d\n",gs,goff);
-			  printf("blue: size %d, offset %d\n",bs,boff);
-			  printf("bits per pixel:%d\n",bpp);*/
-			for (yi = 0; yi < height ; yi++) {
-				img_ptr = image->data + (yi * image->width) * bpp;
-				bmp_ptr = bitmap + ((y + yi) * chunk_width + x) * sizeof(uint32_t);
-				for (xi = 0; xi < xright - xleft; xi++) {
-					s = (unsigned long *)img_ptr;
-					t = (uint32_t *)bmp_ptr;
-					/*    bmp_ptr[0] = (rs > 0 ? ((*d & image->red_mask) >> rs)  : ((*d  & image->red_mask) << -rs)) ;
-					 bmp_ptr[1] = (gs > 0 ? ((*d & image->green_mask) >> gs) : ((*d  & image->green_mask) << -gs)) ;
-					 bmp_ptr[2] = (bs > 0 ? ((*d & image->blue_mask) >> bs)  : ((*d  & image->blue_mask) << -bs));
-					 bmp_ptr[3] = 255 ;*/
-					*t = (rs > 0 ? ((*s & image->red_mask) >> rs)  : ((*s  & image->red_mask) << -rs)) |
-					     (gs > 0 ? ((*s & image->green_mask) >> gs) : ((*s  & image->green_mask) << -gs)) |
-					     (bs > 0 ? ((*s & image->blue_mask) >> bs)  : ((*s  & image->blue_mask) << -bs)) |
-					     255 << 24;
-
-					bmp_ptr += sizeof(uint32_t);
-					img_ptr += bpp;
-				}
-			}
-			/*  s3d_load_texture(win->oid,0,x,y,width,height, ???); */
-			for (ytop = 0; ytop < height; ytop += TEXH) {
-				ybottom = (ytop + TEXH > height) ? height : ytop + TEXH;
-				chunk_height = ybottom - ytop;
-				s3d_load_texture(win->oid, texnum, 0, 0, chunk_width, chunk_height, (unsigned char *)bitmap + chunk_width * ytop * 4);
-				texnum++;
-			}
-			/*  swap images */
+//		printf("image_convert\n");
+		image_convert(image, bitmap);
+//		printf("load textures ...\n");
+		for (ytop = y; ytop < y + height; ytop = ybottom) {
+			ybottom = (ytop + TEXH) & ~(TEXH-1);
+			chunk_height = ybottom - ytop;
+			s3d_load_texture(win->oid, TEXNUM(win, xleft, ytop), xleft % TEXW, ytop % TEXH, 
+								chunk_width, chunk_height, (unsigned char *)bitmap + chunk_width * (ytop - y) * 4);
+/*			printf("s3d_load_texture(%d, %d, %d, %d, %d, %d, %010p);\n",
+							win->oid, TEXNUM(win, xleft, ytop), xleft % TEXW, ytop % TEXH, 
+								chunk_width, chunk_height, (unsigned char *)bitmap + chunk_width * (ytop - y) * 4);*/
 		}
+//		printf("done loading textures\n");
 		XDestroyImage(image);
 		free(bitmap);
 	}
@@ -512,7 +535,7 @@
 		} else if (event.type == ConfigureNotify) {
 			XConfigureEvent *e = &event.xconfigure; 
 			window = window_find(e->window);
-			if (window != NULL) {
+			if (window != 0) {
 /*				printf("Configure: window = %d, geometry = %d:%d (at %d:%d)\n",
 				       (int)e->window, e->width, e->height, e->x, e->y);*/
 				window_update_geometry(window, e->x, e->y, e->width, e->height);



From dotslash at mail.berlios.de  Fri Oct 19 16:44:29 2007
From: dotslash at mail.berlios.de (dotslash at BerliOS)
Date: Fri, 19 Oct 2007 16:44:29 +0200
Subject: [S3d-svn] r788 - in trunk: . apps/comptest
Message-ID: <200710191444.l9JEiTdf020840@sheep.berlios.de>

Author: dotslash
Date: 2007-10-19 16:44:29 +0200 (Fri, 19 Oct 2007)
New Revision: 788

Modified:
   trunk/
   trunk/apps/comptest/comptest.c
Log:
 r2731 at kero:  dotslash | 2007-10-19 16:44:24 +0200
 - only update parts affected by the damage (part 1)
 - revert an undone != 0 -> != NULL



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:2729
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:2731

Modified: trunk/apps/comptest/comptest.c
===================================================================
--- trunk/apps/comptest/comptest.c	2007-10-19 14:37:43 UTC (rev 787)
+++ trunk/apps/comptest/comptest.c	2007-10-19 14:44:29 UTC (rev 788)
@@ -461,10 +461,10 @@
 	XImage *image;
 
 	/* update the whole window for now. */
-	x = 0;
-	y = 0;
+/*	x = 50;
+	y = 50;
 	width = win->attr.width;
-	height = win->attr.height;
+	height = win->attr.height;*/
 	if (x < 0) x = 0;
 	if (y < 0) y = 0;
 	if (width > win->attr.width - x)			width = win->attr.width - x;
@@ -493,9 +493,9 @@
 		bitmap = malloc(TEXW * height * sizeof(uint32_t));
 		if (win->oid == -1) 
 			deco_box(win);
-//		printf("image_convert\n");
+/*		printf("image_convert\n");*/
 		image_convert(image, bitmap);
-//		printf("load textures ...\n");
+/*		printf("load textures ...\n");*/
 		for (ytop = y; ytop < y + height; ytop = ybottom) {
 			ybottom = (ytop + TEXH) & ~(TEXH-1);
 			chunk_height = ybottom - ytop;
@@ -505,7 +505,7 @@
 							win->oid, TEXNUM(win, xleft, ytop), xleft % TEXW, ytop % TEXH, 
 								chunk_width, chunk_height, (unsigned char *)bitmap + chunk_width * (ytop - y) * 4);*/
 		}
-//		printf("done loading textures\n");
+/*		printf("done loading textures\n"); */
 		XDestroyImage(image);
 		free(bitmap);
 	}
@@ -535,7 +535,7 @@
 		} else if (event.type == ConfigureNotify) {
 			XConfigureEvent *e = &event.xconfigure; 
 			window = window_find(e->window);
-			if (window != 0) {
+			if (window != NULL) {
 /*				printf("Configure: window = %d, geometry = %d:%d (at %d:%d)\n",
 				       (int)e->window, e->width, e->height, e->x, e->y);*/
 				window_update_geometry(window, e->x, e->y, e->width, e->height);



From lazhur at mail.berlios.de  Fri Oct 19 18:12:57 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 18:12:57 +0200
Subject: [S3d-svn] r789 - trunk/apps/comptest
Message-ID: <200710191612.l9JGCvK6026900@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 18:12:56 +0200 (Fri, 19 Oct 2007)
New Revision: 789

Modified:
   trunk/apps/comptest/comptest.c
Log:
comptest: Reapplied ansi and sparse cleanups


Modified: trunk/apps/comptest/comptest.c
===================================================================
--- trunk/apps/comptest/comptest.c	2007-10-19 14:44:29 UTC (rev 788)
+++ trunk/apps/comptest/comptest.c	2007-10-19 16:12:56 UTC (rev 789)
@@ -85,7 +85,7 @@
 static int print_event(Display *dpy, XEvent *event);
 void event();
 
-static void mainloop()
+static void mainloop(void)
 {
 	event();
 	nanosleep(&t, NULL);
@@ -341,7 +341,7 @@
 	/* XSelectInput(dpy, win->id, ExposureMask);*/
 	win->format = XRenderFindVisualFormat(dpy, win->attr.visual);
 
-	if (win->format != 0) {
+	if (win->format != NULL) {
 		/* printf("add window: %d:%d size: %dx%d\n", win->attr.x, win->attr.y, win->attr.width, win->attr.height);*/
 		win->damage = XDamageCreate(dpy, win->id, XDamageReportNonEmpty);
 
@@ -399,7 +399,7 @@
 	}
 }
 /* convert X-format to s3ds RGBA 32bit format */
-int image_convert(XImage *image, char *bitmap)
+static int image_convert(XImage *image, char *bitmap)
 {
 	int x, y;
 	int rs, gs, bs;



From dotslash at mail.berlios.de  Fri Oct 19 20:32:09 2007
From: dotslash at mail.berlios.de (dotslash at BerliOS)
Date: Fri, 19 Oct 2007 20:32:09 +0200
Subject: [S3d-svn] r790 - in trunk: . apps/comptest
Message-ID: <200710191832.l9JIW9iL020062@sheep.berlios.de>

Author: dotslash
Date: 2007-10-19 20:32:08 +0200 (Fri, 19 Oct 2007)
New Revision: 790

Modified:
   trunk/
   trunk/apps/comptest/comptest.c
Log:
 r2735 at kero:  dotslash | 2007-10-19 20:31:46 +0200
 - astyled comptest



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:2731
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:2735

Modified: trunk/apps/comptest/comptest.c
===================================================================
--- trunk/apps/comptest/comptest.c	2007-10-19 16:12:56 UTC (rev 789)
+++ trunk/apps/comptest/comptest.c	2007-10-19 18:32:08 UTC (rev 790)
@@ -43,13 +43,13 @@
 #endif
 #endif
 
-#define MAXEVENTS	50		/* maximum events per loop. */
+#define MAXEVENTS 50  /* maximum events per loop. */
 
 /* must be 2^x */
 #define TEXW 256
 #define TEXH 256
-#define TEXNUM(win, x, y)	\
-		((((win->attr.height + TEXH - 1)& ~(TEXH-1))/TEXH) * ((int)(x/TEXH)) + ((int)(y/TEXW)))
+#define TEXNUM(win, x, y) \
+  ((((win->attr.height + TEXH - 1)& ~(TEXH-1))/TEXH) * ((int)(x/TEXH)) + ((int)(y/TEXW)))
 
 struct extension {
 	int event, error;
@@ -63,7 +63,7 @@
 	XRenderPictureAttributes  pa;
 	XRenderPictFormat    *format;
 	Picture       picture;
-	int		   already_updated;
+	int     already_updated;
 	int        oid;
 	int        no;
 
@@ -135,7 +135,7 @@
 		name = "Configure!!";
 	}
 
-/*	printf("Event: %s\n", name);*/
+	/* printf("Event: %s\n", name);*/
 	return(0);
 }
 
@@ -220,32 +220,32 @@
 
 static void deco_box(struct window *win)
 {
-/*	float vertices[8*3] = {
-		0, 0, 0,
-		1, 0, 0,
-		1, 1, 0,
-		0, 1, 0,
-		0, 0, 1,
-		1, 0, 1,
-		1, 1, 1,
-		0, 1, 1
-	};
-	float sver[8*3];
-	uint32_t polygon[12*4] = {
-		1, 5, 6, 1,
-		1, 6, 2, 1,
-		2, 6, 7, 1,
-		2, 7, 3, 1,
-		4, 0, 3, 1,
-		4, 3, 7, 1,
-		5, 4, 7, 1,
-		5, 7, 6, 1,
-		0, 4, 1, 1,
-		4, 5, 1, 1,
-		0, 1, 2, 0,
-		0, 2, 3, 0
+	/* float vertices[8*3] = {
+	  0, 0, 0,
+	  1, 0, 0,
+	  1, 1, 0,
+	  0, 1, 0,
+	  0, 0, 1,
+	  1, 0, 1,
+	  1, 1, 1,
+	  0, 1, 1
+	 };
+	 float sver[8*3];
+	 uint32_t polygon[12*4] = {
+	  1, 5, 6, 1,
+	  1, 6, 2, 1,
+	  2, 6, 7, 1,
+	  2, 7, 3, 1,
+	  4, 0, 3, 1,
+	  4, 3, 7, 1,
+	  5, 4, 7, 1,
+	  5, 7, 6, 1,
+	  0, 4, 1, 1,
+	  4, 5, 1, 1,
+	  0, 1, 2, 0,
+	  0, 2, 3, 0
 
-	};*/
+	 };*/
 	float tbuf[] = { 0.0, 0.0,  1.0, 0.0,  1.0, 1.0,
 	                 0.0, 0.0,  1.0, 1.0,  0.0, 1.0
 	               };
@@ -255,28 +255,28 @@
 	int xpos, ypos;
 
 	win->oid = s3d_new_object();
-/*
-	for (i = 0;i < 8;i++) {
-		sver[i*3 + 0] = vertices[i*3+0] * win->attr.width / 20;
-		sver[i*3 + 1] = vertices[i*3+1] * -win->attr.height / 20;
-		sver[i*3 + 2] = vertices[i*3+2] * -1;
-	}
-	
-	s3d_push_material_a(win->oid,
-	                    0.8, 0.0, 0.0 , 1.0,
-	                    1.0, 1.0, 1.0 , 1.0,
-	                    0.8, 0.0, 0.0 , 1.0);
-	s3d_push_texture(win->oid, win->attr.width, win->attr.height);
-	s3d_pep_material_texture(win->oid, 0); / *  assign texture 0 to material 0 * /
-	s3d_push_material_a(win->oid,
-	                    0.0, 0.8, 0.0 , 1.0,
-	                    1.0, 1.0, 1.0 , 1.0,
-	                    0.0, 0.8, 0.0 , 1.0);
+	/*
+	 for (i = 0;i < 8;i++) {
+	  sver[i*3 + 0] = vertices[i*3+0] * win->attr.width / 20;
+	  sver[i*3 + 1] = vertices[i*3+1] * -win->attr.height / 20;
+	  sver[i*3 + 2] = vertices[i*3+2] * -1;
+	 }
 
-	s3d_push_vertices(win->oid, sver, 8);
+	 s3d_push_material_a(win->oid,
+	                     0.8, 0.0, 0.0 , 1.0,
+	                     1.0, 1.0, 1.0 , 1.0,
+	                     0.8, 0.0, 0.0 , 1.0);
+	 s3d_push_texture(win->oid, win->attr.width, win->attr.height);
+	 s3d_pep_material_texture(win->oid, 0); / *  assign texture 0 to material 0 * /
+	 s3d_push_material_a(win->oid,
+	                     0.0, 0.8, 0.0 , 1.0,
+	                     1.0, 1.0, 1.0 , 1.0,
+	                     0.0, 0.8, 0.0 , 1.0);
 
-	s3d_push_polygons(win->oid, polygon, 12);
-	s3d_pep_polygon_tex_coords(win->oid, tbuf, 2);*/
+	 s3d_push_vertices(win->oid, sver, 8);
+
+	 s3d_push_polygons(win->oid, polygon, 12);
+	 s3d_pep_polygon_tex_coords(win->oid, tbuf, 2);*/
 	voffset = 1;
 	vindex = 0;
 	pindex = 0;
@@ -312,16 +312,15 @@
 	/*  push data on texture 0 position (0,0) */
 	s3d_flags_on(win->oid, S3D_OF_VISIBLE);
 }
-static struct window *window_find(Window id)
-{
+static struct window *window_find(Window id) {
 	struct window *window;
-	for (window = window_head; window!=NULL; window = window->next) {
+	for (window = window_head; window != NULL; window = window->next) {
 		if (window->id == id)
 			return(window);
 	}
 	printf("not found (window %d). ;(\n", (int)id);
 	return(NULL);
-	
+
 }
 
 
@@ -334,7 +333,7 @@
 	win->id = id;
 	XGetWindowAttributes(dpy, win->id, &win->attr);
 
-	win->no = win_no++;  
+	win->no = win_no++;
 	/* XSelectInput(dpy, win->id, ExposureMask|ButtonPressMask|KeyPressMask*/
 	XSelectInput(dpy, win->id, ExposureMask
 	             | SubstructureNotifyMask | ExposureMask | StructureNotifyMask | PropertyChangeMask);
@@ -364,9 +363,9 @@
 	free(win);
 }
 
-static void window_update_geometry(struct window *win, int x, int y, int width, int height) 
+static void window_update_geometry(struct window *win, int x, int y, int width, int height)
 {
-	
+
 	printf("window_update_geometry()\n");
 	if (win->oid == -1) {
 		win->attr.x = x;
@@ -374,7 +373,7 @@
 		win->attr.width = width;
 		win->attr.height = height;
 
-		window_update_content(win, 0,0, width, height);
+		window_update_content(win, 0, 0, width, height);
 		return;
 	}
 	if ((win->attr.width == width) && (win->attr.height == height)) {
@@ -392,9 +391,9 @@
 		win->attr.width = width;
 		win->attr.height = height;
 
-		s3d_del_object(win->oid);	/* delete the window and redraw */
+		s3d_del_object(win->oid); /* delete the window and redraw */
 		win->oid = -1;
-		window_update_content(win, 0,0, width, height);
+		window_update_content(win, 0, 0, width, height);
 
 	}
 }
@@ -410,9 +409,9 @@
 
 
 	if (image->format == ZPixmap) {
-/*		printf("XImage: %dx%d, format %d (%d), bpp: %d, depth %d, pad %d\n",
-		       image->width, image->height, image->format,
-		       ZPixmap, image->bits_per_pixel, image->depth, image->bitmap_pad);*/
+		/*  printf("XImage: %dx%d, format %d (%d), bpp: %d, depth %d, pad %d\n",
+		         image->width, image->height, image->format,
+		         ZPixmap, image->bits_per_pixel, image->depth, image->bitmap_pad);*/
 		rs = get_shift(image->red_mask) - 8;
 		gs = get_shift(image->green_mask) - 8;
 		bs = get_shift(image->blue_mask) - 8;
@@ -422,7 +421,7 @@
 		rs = rs;
 		gs = gs - 8;
 		bs = bs - 16;
-/*		printf("Ximage: rgb: %d|%d|%d\n", rs, gs, bs);;*/
+		/*  printf("Ximage: rgb: %d|%d|%d\n", rs, gs, bs);;*/
 		/*  printf("red: size %d, offset %d\n",rs,roff);
 		  printf("green: size %d, offset %d\n",gs,goff);
 		  printf("blue: size %d, offset %d\n",bs,boff);
@@ -431,8 +430,8 @@
 			img_ptr = image->data + (y * image->width) * bpp;
 			bmp_ptr = bitmap + (y * image->width) * sizeof(uint32_t);
 			for (x = 0; x < image->width; x++) {
-				s = (unsigned long *)	img_ptr;
-				t = (uint32_t *)		bmp_ptr;
+				s = (unsigned long *) img_ptr;
+				t = (uint32_t *)  bmp_ptr;
 				/*    bmp_ptr[0] = (rs > 0 ? ((*d & image->red_mask) >> rs)  : ((*d  & image->red_mask) << -rs)) ;
 				 bmp_ptr[1] = (gs > 0 ? ((*d & image->green_mask) >> gs) : ((*d  & image->green_mask) << -gs)) ;
 				 bmp_ptr[2] = (bs > 0 ? ((*d & image->blue_mask) >> bs)  : ((*d  & image->blue_mask) << -bs));
@@ -461,17 +460,17 @@
 	XImage *image;
 
 	/* update the whole window for now. */
-/*	x = 50;
-	y = 50;
-	width = win->attr.width;
-	height = win->attr.height;*/
+	/* x = 50;
+	 y = 50;
+	 width = win->attr.width;
+	 height = win->attr.height;*/
 	if (x < 0) x = 0;
 	if (y < 0) y = 0;
-	if (width > win->attr.width - x)			width = win->attr.width - x;
-	if (height > win->attr.height - y)			height = win->attr.height - y;
+	if (width > win->attr.width - x)   width = win->attr.width - x;
+	if (height > win->attr.height - y)   height = win->attr.height - y;
 
 	if (x == 0 && y == 0 && width == win->attr.width && height == win->attr.height) {
-		if (win->already_updated) 
+		if (win->already_updated)
 			return;
 		else
 			win->already_updated = 1;
@@ -481,31 +480,31 @@
 	  deco_box(win);
 	*/
 	for (xleft = x; xleft < x + width ; xleft = xright) {
-		xright = (xleft + TEXW) & ~(TEXW-1);
+		xright = (xleft + TEXW) & ~(TEXW - 1);
 		if (xright > (x + width))
 			xright = x + width;
 		chunk_width = xright - xleft;
 		printf("request image: xleft = %d, xright = %d, width = %d, x:y = %d:%d, width:height = %d:%d, ~TEXW = %08x\n",
-						xleft, xright, width, x, y, width, height, ~TEXW);
+		       xleft, xright, width, x, y, width, height, ~TEXW);
 		image = XGetImage(dpy, win->id, xleft, y, chunk_width, height, AllPlanes, ZPixmap);
 		if (!image)
 			return;
 		bitmap = malloc(TEXW * height * sizeof(uint32_t));
-		if (win->oid == -1) 
+		if (win->oid == -1)
 			deco_box(win);
-/*		printf("image_convert\n");*/
+		/*  printf("image_convert\n");*/
 		image_convert(image, bitmap);
-/*		printf("load textures ...\n");*/
+		/*  printf("load textures ...\n");*/
 		for (ytop = y; ytop < y + height; ytop = ybottom) {
-			ybottom = (ytop + TEXH) & ~(TEXH-1);
+			ybottom = (ytop + TEXH) & ~(TEXH - 1);
 			chunk_height = ybottom - ytop;
-			s3d_load_texture(win->oid, TEXNUM(win, xleft, ytop), xleft % TEXW, ytop % TEXH, 
-								chunk_width, chunk_height, (unsigned char *)bitmap + chunk_width * (ytop - y) * 4);
-/*			printf("s3d_load_texture(%d, %d, %d, %d, %d, %d, %010p);\n",
-							win->oid, TEXNUM(win, xleft, ytop), xleft % TEXW, ytop % TEXH, 
-								chunk_width, chunk_height, (unsigned char *)bitmap + chunk_width * (ytop - y) * 4);*/
+			s3d_load_texture(win->oid, TEXNUM(win, xleft, ytop), xleft % TEXW, ytop % TEXH,
+			                 chunk_width, chunk_height, (unsigned char *)bitmap + chunk_width * (ytop - y) * 4);
+			/*   printf("s3d_load_texture(%d, %d, %d, %d, %d, %d, %010p);\n",
+			       win->oid, TEXNUM(win, xleft, ytop), xleft % TEXW, ytop % TEXH,
+			        chunk_width, chunk_height, (unsigned char *)bitmap + chunk_width * (ytop - y) * 4);*/
 		}
-/*		printf("done loading textures\n"); */
+		/*  printf("done loading textures\n"); */
 		XDestroyImage(image);
 		free(bitmap);
 	}
@@ -517,27 +516,27 @@
 	XEvent event;
 	struct window *window;
 	int i;
-	for (window = window_head; window!=NULL; window = window->next) 
+	for (window = window_head; window != NULL; window = window->next)
 		window->already_updated = 0;
 
-	for (i=0; i< MAXEVENTS && XPending(dpy); i++) {
+	for (i = 0; i < MAXEVENTS && XPending(dpy); i++) {
 		XNextEvent(dpy, &event);
 		print_event(dpy, &event);
 		if (event.type == xdamage.event + XDamageNotify) {
 			XDamageNotifyEvent *e = (XDamageNotifyEvent*) & event;
-/*			printf("window = %d, geometry = %d:%d (at %d:%d), area = %d:%d (at %d:%d)\n",
-			       (int)e->drawable, e->geometry.width, e->geometry.height, e->geometry.x, e->geometry.y,
-			       e->area.width, e->area.height, e->area.x, e->area.y);*/
+			/*   printf("window = %d, geometry = %d:%d (at %d:%d), area = %d:%d (at %d:%d)\n",
+			          (int)e->drawable, e->geometry.width, e->geometry.height, e->geometry.x, e->geometry.y,
+			          e->area.width, e->area.height, e->area.x, e->area.y);*/
 			XDamageSubtract(dpy, e->damage, None, None);
 			window = window_find(e->drawable);
-			if (window!=NULL)
+			if (window != NULL)
 				window_update_content(window, e->area.x, e->area.y, e->area.width, e->area.height);
 		} else if (event.type == ConfigureNotify) {
-			XConfigureEvent *e = &event.xconfigure; 
+			XConfigureEvent *e = &event.xconfigure;
 			window = window_find(e->window);
 			if (window != NULL) {
-/*				printf("Configure: window = %d, geometry = %d:%d (at %d:%d)\n",
-				       (int)e->window, e->width, e->height, e->x, e->y);*/
+				/*    printf("Configure: window = %d, geometry = %d:%d (at %d:%d)\n",
+				           (int)e->window, e->width, e->height, e->x, e->y);*/
 				window_update_geometry(window, e->x, e->y, e->width, e->height);
 			} else {
 				printf("Configure: Could not find window to configure.\n");



From lazhur at mail.berlios.de  Fri Oct 19 22:28:39 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 22:28:39 +0200
Subject: [S3d-svn] r791 - trunk/apps/comptest
Message-ID: <200710192028.l9JKSd1V024786@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 22:28:38 +0200 (Fri, 19 Oct 2007)
New Revision: 791

Modified:
   trunk/apps/comptest/comptest.c
Log:
comptest: Allocate enough memory to copy it in full texture chunks


Modified: trunk/apps/comptest/comptest.c
===================================================================
--- trunk/apps/comptest/comptest.c	2007-10-19 18:32:08 UTC (rev 790)
+++ trunk/apps/comptest/comptest.c	2007-10-19 20:28:38 UTC (rev 791)
@@ -489,7 +489,7 @@
 		image = XGetImage(dpy, win->id, xleft, y, chunk_width, height, AllPlanes, ZPixmap);
 		if (!image)
 			return;
-		bitmap = malloc(TEXW * height * sizeof(uint32_t));
+		bitmap = malloc(TEXW * ((height + TEXH) & ~(TEXH - 1)) * sizeof(uint32_t));
 		if (win->oid == -1)
 			deco_box(win);
 		/*  printf("image_convert\n");*/



From lazhur at mail.berlios.de  Fri Oct 19 22:50:10 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 19 Oct 2007 22:50:10 +0200
Subject: [S3d-svn] r792 - in trunk/apps: comptest kism3d
Message-ID: <200710192050.l9JKoAtx025942@sheep.berlios.de>

Author: lazhur
Date: 2007-10-19 22:50:09 +0200 (Fri, 19 Oct 2007)
New Revision: 792

Modified:
   trunk/apps/comptest/comptest.c
   trunk/apps/kism3d/kism3d.c
Log:
comptest: Do not allocate bitmap for every slice while updating window


Modified: trunk/apps/comptest/comptest.c
===================================================================
--- trunk/apps/comptest/comptest.c	2007-10-19 20:28:38 UTC (rev 791)
+++ trunk/apps/comptest/comptest.c	2007-10-19 20:50:09 UTC (rev 792)
@@ -479,6 +479,7 @@
 	/* if (!win->oid)
 	  deco_box(win);
 	*/
+	bitmap = malloc(TEXW * ((height + TEXH) & ~(TEXH - 1)) * sizeof(uint32_t));
 	for (xleft = x; xleft < x + width ; xleft = xright) {
 		xright = (xleft + TEXW) & ~(TEXW - 1);
 		if (xright > (x + width))
@@ -489,7 +490,6 @@
 		image = XGetImage(dpy, win->id, xleft, y, chunk_width, height, AllPlanes, ZPixmap);
 		if (!image)
 			return;
-		bitmap = malloc(TEXW * ((height + TEXH) & ~(TEXH - 1)) * sizeof(uint32_t));
 		if (win->oid == -1)
 			deco_box(win);
 		/*  printf("image_convert\n");*/
@@ -506,8 +506,8 @@
 		}
 		/*  printf("done loading textures\n"); */
 		XDestroyImage(image);
-		free(bitmap);
 	}
+	free(bitmap);
 }
 
 

Modified: trunk/apps/kism3d/kism3d.c
===================================================================
--- trunk/apps/kism3d/kism3d.c	2007-10-19 20:28:38 UTC (rev 791)
+++ trunk/apps/kism3d/kism3d.c	2007-10-19 20:50:09 UTC (rev 792)
@@ -48,7 +48,7 @@
 
 static int thread_running = 0;
 int Kism3d_aborted = 0;
- int Num_networks = 0;
+int Num_networks = 0;
 
 
 



From lazhur at mail.berlios.de  Sun Oct 21 14:45:19 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Sun, 21 Oct 2007 14:45:19 +0200
Subject: [S3d-svn] r793 - in trunk: apps/s3dosm server
Message-ID: <200710211245.l9LCjJmx031098@sheep.berlios.de>

Author: lazhur
Date: 2007-10-21 14:45:19 +0200 (Sun, 21 Oct 2007)
New Revision: 793

Modified:
   trunk/apps/s3dosm/io.c
   trunk/server/main.c
Log:
Use int to save return value of getopt for systems with unsigned char


Modified: trunk/apps/s3dosm/io.c
===================================================================
--- trunk/apps/s3dosm/io.c	2007-10-19 20:50:09 UTC (rev 792)
+++ trunk/apps/s3dosm/io.c	2007-10-21 12:45:19 UTC (rev 793)
@@ -60,9 +60,9 @@
 int process_args(int argc, char **argv)
 {
 	int      lopt_idx = 0, i;
-	char     c;
-	float     minlat, minlon, maxlat, maxlon;
-	char      info[1024];
+	int      c;
+	float    minlat, minlon, maxlat, maxlon;
+	char     info[1024];
 	struct option long_options[] = {
 		{"help", 0, NULL, 'h'
 		}, {"osm", 1, NULL, 'o'}, {NULL, 0, NULL, 0}

Modified: trunk/server/main.c
===================================================================
--- trunk/server/main.c	2007-10-19 20:50:09 UTC (rev 792)
+++ trunk/server/main.c	2007-10-21 12:45:19 UTC (rev 793)
@@ -203,7 +203,7 @@
 static int process_args(int argc, char **argv)
 {
 	int      lopt_idx;
-	char     c;
+	int      c;
 	struct option long_options[] = {
 		{"multisample",  1, NULL, 'm'
 		}, {"rc",    1, NULL, 'r'}, {"help",   0, NULL, 'h'}, {"use-glut",  0, NULL, 'g'}, {"use-sdl",   0, NULL, 's'}, {"no-rc",   0, NULL, 'n'}, {NULL, 0, NULL, 0}



From lazhur at mail.berlios.de  Sun Oct 21 14:45:29 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Sun, 21 Oct 2007 14:45:29 +0200
Subject: [S3d-svn] r794 - trunk/apps/s3dosm
Message-ID: <200710211245.l9LCjTMY031151@sheep.berlios.de>

Author: lazhur
Date: 2007-10-21 14:45:28 +0200 (Sun, 21 Oct 2007)
New Revision: 794

Modified:
   trunk/apps/s3dosm/gps.c
Log:
s3dosm: Only declare gps specific variables when gps is enabled


Modified: trunk/apps/s3dosm/gps.c
===================================================================
--- trunk/apps/s3dosm/gps.c	2007-10-21 12:45:19 UTC (rev 793)
+++ trunk/apps/s3dosm/gps.c	2007-10-21 12:45:28 UTC (rev 794)
@@ -25,8 +25,8 @@
 #include <s3d.h>
 #include "s3dosm.h"
 #include <stdio.h>  /* printf() */
+#ifdef HAVE_GPS
 static int user_icon = -1, user_icon_rotator = -1;
-#ifdef HAVE_GPS
 #include <gps.h>  /* gps_*() */
 #ifdef NMEA_CHANNELS
 #define GPS_NEW
@@ -264,7 +264,7 @@
 }
 #else
 
-int gps_init(char *gpshost)
+int gps_init(char *S3DOSMUNUSED(gpshost))
 {
 	printf("GPS support not compiled in!\n");
 	return(0);



From lazhur at mail.berlios.de  Sun Oct 21 14:45:35 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Sun, 21 Oct 2007 14:45:35 +0200
Subject: [S3d-svn] r795 - trunk/apps/s3dosm
Message-ID: <200710211245.l9LCjZqG031186@sheep.berlios.de>

Author: lazhur
Date: 2007-10-21 14:45:35 +0200 (Sun, 21 Oct 2007)
New Revision: 795

Modified:
   trunk/apps/s3dosm/gps.c
Log:
s3dosm: Remove pitch, roll and dip debug output

Newer versions of libgps removed fix.pitch, fix.roll and fix.dip.


Modified: trunk/apps/s3dosm/gps.c
===================================================================
--- trunk/apps/s3dosm/gps.c	2007-10-21 12:45:28 UTC (rev 794)
+++ trunk/apps/s3dosm/gps.c	2007-10-21 12:45:35 UTC (rev 795)
@@ -62,7 +62,6 @@
 	printf("[%d] lat/long: [%f|%f], altitude %f\n", frame, dgps->fix.latitude, dgps->fix.longitude, dgps->fix.altitude);
 	printf("speed [kph]: %f\n", dgps->fix.speed / KNOTS_TO_KPH);
 	printf("used %d/%d satellits\n", dgps->satellites_used, dgps->satellites);
-	printf("################## = %f %f %f\n", dgps->fix.pitch, dgps->fix.roll, dgps->fix.dip);
 #else
 	printf("[%d] lat/long: [%f|%f], altitude %f\n", frame, dgps->latitude, dgps->longitude, dgps->altitude);
 	printf("speed [kph]: %f\n", dgps->speed / KNOTS_TO_KPH);



From dotslash at mail.berlios.de  Mon Oct 22 13:07:03 2007
From: dotslash at mail.berlios.de (dotslash at BerliOS)
Date: Mon, 22 Oct 2007 13:07:03 +0200
Subject: [S3d-svn] r796 - in trunk: . apps/comptest
Message-ID: <200710221107.l9MB73d4028766@sheep.berlios.de>

Author: dotslash
Date: 2007-10-22 13:07:03 +0200 (Mon, 22 Oct 2007)
New Revision: 796

Modified:
   trunk/
   trunk/apps/comptest/comptest.c
Log:
 r2743 at kero:  dotslash | 2007-10-22 13:06:10 +0200
 - limit ybottom to the end of the image. don't upload whole chunk if it's not complete.



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:2735
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:2743

Modified: trunk/apps/comptest/comptest.c
===================================================================
--- trunk/apps/comptest/comptest.c	2007-10-21 12:45:35 UTC (rev 795)
+++ trunk/apps/comptest/comptest.c	2007-10-22 11:07:03 UTC (rev 796)
@@ -497,6 +497,8 @@
 		/*  printf("load textures ...\n");*/
 		for (ytop = y; ytop < y + height; ytop = ybottom) {
 			ybottom = (ytop + TEXH) & ~(TEXH - 1);
+			if (ybottom > y + height)
+				ybottom = y + height;
 			chunk_height = ybottom - ytop;
 			s3d_load_texture(win->oid, TEXNUM(win, xleft, ytop), xleft % TEXW, ytop % TEXH,
 			                 chunk_width, chunk_height, (unsigned char *)bitmap + chunk_width * (ytop - y) * 4);



From nichtsnutz at mail.berlios.de  Mon Oct 22 13:38:13 2007
From: nichtsnutz at mail.berlios.de (nichtsnutz at BerliOS)
Date: Mon, 22 Oct 2007 13:38:13 +0200
Subject: [S3d-svn] r797 - trunk/apps/meshs3d
Message-ID: <200710221138.l9MBcDVt028704@sheep.berlios.de>

Author: nichtsnutz
Date: 2007-10-22 13:38:13 +0200 (Mon, 22 Oct 2007)
New Revision: 797

Modified:
   trunk/apps/meshs3d/main.c
Log:
fix removing of connections


Modified: trunk/apps/meshs3d/main.c
===================================================================
--- trunk/apps/meshs3d/main.c	2007-10-22 11:07:03 UTC (rev 796)
+++ trunk/apps/meshs3d/main.c	2007-10-22 11:38:13 UTC (rev 797)
@@ -145,7 +145,6 @@
 		}
 
 		if ((node->last_seen < Global.output_block_counter - 1) && (node->visible)) {
-
 			s3d_del_object(node->desc_id);
 			s3d_del_object(node->obj_id);
 			node->desc_id = -1;
@@ -154,9 +153,12 @@
 			Global.node_count--;
 			while (NULL != (tmp_hashit = hash_iterate(node_hash, tmp_hashit))) {
 				tmp_node = (struct node *) tmp_hashit->bucket->data;
-				if (node != tmp_node && (max(node->ip, tmp_node->ip) == node->ip)) {
-					ip[0] = node->ip;
-					ip[1] = tmp_node->ip;
+
+				
+				if ( node != tmp_node ) {
+					ip[0] = max(node->ip,tmp_node->ip);
+					ip[1] = min(node->ip,tmp_node->ip);
+
 					if (NULL != (con = hash_find(con_hash, ip))) {
 						s3d_del_object(con->obj_id);
 						con->obj_id = -1;



From lazhur at mail.berlios.de  Mon Oct 22 17:49:05 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Mon, 22 Oct 2007 17:49:05 +0200
Subject: [S3d-svn] r798 - trunk/apps/comptest
Message-ID: <200710221549.l9MFn5HU027306@sheep.berlios.de>

Author: lazhur
Date: 2007-10-22 17:49:04 +0200 (Mon, 22 Oct 2007)
New Revision: 798

Modified:
   trunk/apps/comptest/comptest.c
Log:
Revert "comptest: Allocate enough memory to copy it in full texture chunks"

This was a workaround and isn't needed anymore.


Modified: trunk/apps/comptest/comptest.c
===================================================================
--- trunk/apps/comptest/comptest.c	2007-10-22 11:38:13 UTC (rev 797)
+++ trunk/apps/comptest/comptest.c	2007-10-22 15:49:04 UTC (rev 798)
@@ -479,7 +479,7 @@
 	/* if (!win->oid)
 	  deco_box(win);
 	*/
-	bitmap = malloc(TEXW * ((height + TEXH) & ~(TEXH - 1)) * sizeof(uint32_t));
+	bitmap = malloc(TEXW * height * sizeof(uint32_t));
 	for (xleft = x; xleft < x + width ; xleft = xright) {
 		xright = (xleft + TEXW) & ~(TEXW - 1);
 		if (xright > (x + width))



From lazhur at mail.berlios.de  Mon Oct 22 22:13:00 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Mon, 22 Oct 2007 22:13:00 +0200
Subject: [S3d-svn] r799 - in trunk/Documentation: . libg3d libg3d/api
	libg3d/api/tmpl
Message-ID: <200710222013.l9MKD0IK000220@sheep.berlios.de>

Author: lazhur
Date: 2007-10-22 22:13:00 +0200 (Mon, 22 Oct 2007)
New Revision: 799

Removed:
   trunk/Documentation/libg3d/CMakeLists.txt
   trunk/Documentation/libg3d/api/CMakeLists.txt
   trunk/Documentation/libg3d/api/libg3d-docs.sgml
   trunk/Documentation/libg3d/api/libg3d-overrides.txt
   trunk/Documentation/libg3d/api/libg3d-sections.txt
   trunk/Documentation/libg3d/api/libg3d.types
   trunk/Documentation/libg3d/api/tmpl/context.sgml
   trunk/Documentation/libg3d/api/tmpl/face.sgml
   trunk/Documentation/libg3d/api/tmpl/iff.sgml
   trunk/Documentation/libg3d/api/tmpl/libg3d-unused.sgml
   trunk/Documentation/libg3d/api/tmpl/material.sgml
   trunk/Documentation/libg3d/api/tmpl/matrix.sgml
   trunk/Documentation/libg3d/api/tmpl/model.sgml
   trunk/Documentation/libg3d/api/tmpl/object.sgml
   trunk/Documentation/libg3d/api/tmpl/plugins.sgml
   trunk/Documentation/libg3d/api/tmpl/primitive.sgml
   trunk/Documentation/libg3d/api/tmpl/read.sgml
   trunk/Documentation/libg3d/api/tmpl/texture.sgml
   trunk/Documentation/libg3d/api/tmpl/types.sgml
   trunk/Documentation/libg3d/api/tmpl/vector.sgml
Modified:
   trunk/Documentation/CMakeLists.txt
Log:
Remove libg3d documentation


Modified: trunk/Documentation/CMakeLists.txt
===================================================================
--- trunk/Documentation/CMakeLists.txt	2007-10-22 15:49:04 UTC (rev 798)
+++ trunk/Documentation/CMakeLists.txt	2007-10-22 20:13:00 UTC (rev 799)
@@ -1,4 +1,3 @@
-add_subdirectory(libg3d)
 add_subdirectory(libs3d)
 add_subdirectory(libs3dw)
 add_subdirectory(manpages)

Deleted: trunk/Documentation/libg3d/CMakeLists.txt
===================================================================
--- trunk/Documentation/libg3d/CMakeLists.txt	2007-10-22 15:49:04 UTC (rev 798)
+++ trunk/Documentation/libg3d/CMakeLists.txt	2007-10-22 20:13:00 UTC (rev 799)
@@ -1 +0,0 @@
-add_subdirectory(api)

Deleted: trunk/Documentation/libg3d/api/CMakeLists.txt
===================================================================

Deleted: trunk/Documentation/libg3d/api/libg3d-docs.sgml
===================================================================
--- trunk/Documentation/libg3d/api/libg3d-docs.sgml	2007-10-22 15:49:04 UTC (rev 798)
+++ trunk/Documentation/libg3d/api/libg3d-docs.sgml	2007-10-22 20:13:00 UTC (rev 799)
@@ -1,32 +0,0 @@
-<?xml version="1.0"?>
-<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.1.2//EN" 
-               "http://www.oasis-open.org/docbook/xml/4.1.2/docbookx.dtd">
-<book id="index" xmlns:xi="http://www.w3.org/2003/XInclude">
-  <bookinfo>
-    <title>Libg3d Reference Manual</title>
-  </bookinfo>
-
-  	<chapter>
-    	<title>libg3d types and initialization</title>
-	    <xi:include href="xml/types.xml"/>	
-    	<xi:include href="xml/context.xml"/>
-	</chapter>
-
-	<chapter>
-		<title>object interface</title>
-	    <xi:include href="xml/model.xml"/>
-    	<xi:include href="xml/object.xml"/>
-	    <xi:include href="xml/face.xml"/>
-    	<xi:include href="xml/material.xml"/>
-	    <xi:include href="xml/texture.xml"/>
-	</chapter>
-	<chapter>
-		<title>plugin interface</title>
-    	<xi:include href="xml/plugins.xml"/>
-	    <xi:include href="xml/iff.xml"/>
-    	<xi:include href="xml/read.xml"/>
-	    <xi:include href="xml/matrix.xml"/>
-    	<xi:include href="xml/vector.xml"/>
-	    <xi:include href="xml/primitive.xml"/>
-	</chapter>
-</book>

Deleted: trunk/Documentation/libg3d/api/libg3d-overrides.txt
===================================================================

Deleted: trunk/Documentation/libg3d/api/libg3d-sections.txt
===================================================================
--- trunk/Documentation/libg3d/api/libg3d-sections.txt	2007-10-22 15:49:04 UTC (rev 798)
+++ trunk/Documentation/libg3d/api/libg3d-sections.txt	2007-10-22 20:13:00 UTC (rev 799)
@@ -1,127 +0,0 @@
-<SECTION>
-<FILE>types</FILE>
-G3D_FLAG_IMG_GREYSCALE
-G3DImage
-G3D_FLAG_MAT_TWOSIDE
-G3DMaterial
-G3D_FLAG_FAC_NORMALS
-G3D_FLAG_FAC_TEXMAP
-G3DFace
-G3DObject
-G3DSetBgColorFunc
-G3DUpdateInterfaceFunc
-G3DUpdateProgressBarFunc
-G3DContext
-G3DModel
-</SECTION>
-
-<SECTION>
-<FILE>context</FILE>
-g3d_context_new
-g3d_context_free
-g3d_context_set_bgcolor
-g3d_context_update_interface
-g3d_context_update_progress_bar
-g3d_context_set_set_bgcolor_func
-</SECTION>
-
-<SECTION>
-<FILE>model</FILE>
-g3d_model_new
-g3d_model_load
-g3d_model_check
-g3d_model_center
-g3d_model_clear
-g3d_model_free
-</SECTION>
-
-<SECTION>
-<FILE>object</FILE>
-g3d_object_free
-g3d_object_radius
-g3d_object_scale
-g3d_object_transform
-g3d_object_duplicate
-g3d_object_optimize
-g3d_object_smooth
-g3d_object_merge
-</SECTION>
-
-<SECTION>
-<FILE>face</FILE>
-g3d_face_get_normal
-g3d_face_free
-</SECTION>
-
-<SECTION>
-<FILE>material</FILE>
-g3d_material_new
-g3d_material_free
-</SECTION>
-
-<SECTION>
-<FILE>texture</FILE>
-g3d_texture_load_cached
-g3d_texture_prepare
-</SECTION>
-
-<SECTION>
-<FILE>plugins</FILE>
-G3D_PLUGIN_UNKNOWN
-G3D_PLUGIN_IMPORT
-G3D_PLUGIN_IMAGE
-PluginInitFunc
-PluginCleanupFunc
-PluginLoadModelFunc
-PluginLoadImageFunc
-PluginGetDescFunc
-PluginGetExtFunc
-G3DPlugin
-g3d_plugins_init
-g3d_plugins_cleanup
-g3d_plugins_load_model
-g3d_plugins_load_image
-g3d_plugins_get_image_extensions
-</SECTION>
-
-<SECTION>
-<FILE>iff</FILE>
-G3D_IFF_MKID
-g3d_iff_open
-g3d_iff_readchunk
-</SECTION>
-
-<SECTION>
-<FILE>read</FILE>
-g3d_read_int8
-g3d_read_int16_be
-g3d_read_int16_le
-g3d_read_int32_be
-g3d_read_int32_le
-g3d_read_float_be
-g3d_read_float_le
-</SECTION>
-
-<SECTION>
-<FILE>primitive</FILE>
-g3d_primitive_cylinder
-g3d_primitive_tube
-</SECTION>
-
-<SECTION>
-<FILE>matrix</FILE>
-g3d_matrix_identity
-g3d_matrix_multiply
-g3d_matrix_translate
-g3d_matrix_rotate
-g3d_matrix_rotate_xyz
-</SECTION>
-
-<SECTION>
-<FILE>vector</FILE>
-g3d_vector_normal
-g3d_vector_unify
-g3d_vector_transform
-</SECTION>
-
-

Deleted: trunk/Documentation/libg3d/api/libg3d.types
===================================================================
--- trunk/Documentation/libg3d/api/libg3d.types	2007-10-22 15:49:04 UTC (rev 798)
+++ trunk/Documentation/libg3d/api/libg3d.types	2007-10-22 20:13:00 UTC (rev 799)
@@ -1,2 +0,0 @@
-#include <g3d/g3d.h>
-#include <glib-object.h>

Deleted: trunk/Documentation/libg3d/api/tmpl/context.sgml
===================================================================
--- trunk/Documentation/libg3d/api/tmpl/context.sgml	2007-10-22 15:49:04 UTC (rev 798)
+++ trunk/Documentation/libg3d/api/tmpl/context.sgml	2007-10-22 20:13:00 UTC (rev 799)
@@ -1,78 +0,0 @@
-<!-- ##### SECTION Title ##### -->
-context
-
-<!-- ##### SECTION Short_Description ##### -->
-Libg3d initialization and configuration
-
-<!-- ##### SECTION Long_Description ##### -->
-<para>
-
-</para>
-
-<!-- ##### SECTION See_Also ##### -->
-<para>
-
-</para>
-
-<!-- ##### SECTION Stability_Level ##### -->
-
-
-<!-- ##### FUNCTION g3d_context_new ##### -->
-<para>
-
-</para>
-
- at Returns: 
-
-
-<!-- ##### FUNCTION g3d_context_free ##### -->
-<para>
-
-</para>
-
- at context: 
-
-
-<!-- ##### FUNCTION g3d_context_set_bgcolor ##### -->
-<para>
-
-</para>
-
- at context: 
- at r: 
- at g: 
- at b: 
- at a: 
- at Returns: 
-
-
-<!-- ##### FUNCTION g3d_context_update_interface ##### -->
-<para>
-
-</para>
-
- at context: 
- at Returns: 
-
-
-<!-- ##### FUNCTION g3d_context_update_progress_bar ##### -->
-<para>
-
-</para>
-
- at context: 
- at percentage: 
- at visibility: 
- at Returns: 
-
-
-<!-- ##### FUNCTION g3d_context_set_set_bgcolor_func ##### -->
-<para>
-
-</para>
-
- at context: 
- at func: 
- at user_data: 
-
-

Deleted: trunk/Documentation/libg3d/api/tmpl/face.sgml
===================================================================
--- trunk/Documentation/libg3d/api/tmpl/face.sgml	2007-10-22 15:49:04 UTC (rev 798)
+++ trunk/Documentation/libg3d/api/tmpl/face.sgml	2007-10-22 20:13:00 UTC (rev 799)
@@ -1,40 +0,0 @@
-<!-- ##### SECTION Title ##### -->
-face
-
-<!-- ##### SECTION Short_Description ##### -->
-Face manipulation
-
-<!-- ##### SECTION Long_Description ##### -->
-<para>
-
-</para>
-
-<!-- ##### SECTION See_Also ##### -->
-<para>
-
-</para>
-
-<!-- ##### SECTION Stability_Level ##### -->
-
-
-<!-- ##### FUNCTION g3d_face_get_normal ##### -->
-<para>
-
-</para>
-
- at face: 
- at object: 
- at nx: 
- at ny: 
- at nz: 
- at Returns: 
-
-
-<!-- ##### FUNCTION g3d_face_free ##### -->
-<para>
-
-</para>
-
- at face: 
-
-

Deleted: trunk/Documentation/libg3d/api/tmpl/iff.sgml
===================================================================
--- trunk/Documentation/libg3d/api/tmpl/iff.sgml	2007-10-22 15:49:04 UTC (rev 798)
+++ trunk/Documentation/libg3d/api/tmpl/iff.sgml	2007-10-22 20:13:00 UTC (rev 799)
@@ -1,52 +0,0 @@
-<!-- ##### SECTION Title ##### -->
-iff
-
-<!-- ##### SECTION Short_Description ##### -->
-IFF file helper functions
-
-<!-- ##### SECTION Long_Description ##### -->
-<para>
-
-</para>
-
-<!-- ##### SECTION See_Also ##### -->
-<para>
-
-</para>
-
-<!-- ##### SECTION Stability_Level ##### -->
-
-
-<!-- ##### MACRO G3D_IFF_MKID ##### -->
-<para>
-
-</para>
-
- at a: 
- at b: 
- at c: 
- at d: 
-
-
-<!-- ##### FUNCTION g3d_iff_open ##### -->
-<para>
-
-</para>
-
- at filename: 
- at id: 
- at len: 
- at Returns: 
-
-
-<!-- ##### FUNCTION g3d_iff_readchunk ##### -->
-<para>
-
-</para>
-
- at f: 
- at id: 
- at len: 
- at Returns: 
-
-

Deleted: trunk/Documentation/libg3d/api/tmpl/libg3d-unused.sgml
===================================================================

Deleted: trunk/Documentation/libg3d/api/tmpl/material.sgml
===================================================================
--- trunk/Documentation/libg3d/api/tmpl/material.sgml	2007-10-22 15:49:04 UTC (rev 798)
+++ trunk/Documentation/libg3d/api/tmpl/material.sgml	2007-10-22 20:13:00 UTC (rev 799)
@@ -1,35 +0,0 @@
-<!-- ##### SECTION Title ##### -->
-material
-
-<!-- ##### SECTION Short_Description ##### -->
-Material generation and manipulation
-
-<!-- ##### SECTION Long_Description ##### -->
-<para>
-
-</para>
-
-<!-- ##### SECTION See_Also ##### -->
-<para>
-
-</para>
-
-<!-- ##### SECTION Stability_Level ##### -->
-
-
-<!-- ##### FUNCTION g3d_material_new ##### -->
-<para>
-
-</para>
-
- at Returns: 
-
-
-<!-- ##### FUNCTION g3d_material_free ##### -->
-<para>
-
-</para>
-
- at material: 
-
-

Deleted: trunk/Documentation/libg3d/api/tmpl/matrix.sgml
===================================================================
--- trunk/Documentation/libg3d/api/tmpl/matrix.sgml	2007-10-22 15:49:04 UTC (rev 798)
+++ trunk/Documentation/libg3d/api/tmpl/matrix.sgml	2007-10-22 20:13:00 UTC (rev 799)
@@ -1,76 +0,0 @@
-<!-- ##### SECTION Title ##### -->
-matrix
-
-<!-- ##### SECTION Short_Description ##### -->
-Matrix manipulation and calculation
-
-<!-- ##### SECTION Long_Description ##### -->
-<para>
-
-</para>
-
-<!-- ##### SECTION See_Also ##### -->
-<para>
-
-</para>
-
-<!-- ##### SECTION Stability_Level ##### -->
-
-
-<!-- ##### FUNCTION g3d_matrix_identity ##### -->
-<para>
-
-</para>
-
- at matrix: 
- at Returns: 
-
-
-<!-- ##### FUNCTION g3d_matrix_multiply ##### -->
-<para>
-
-</para>
-
- at m1: 
- at m2: 
- at rm: 
- at Returns: 
-
-
-<!-- ##### FUNCTION g3d_matrix_translate ##### -->
-<para>
-
-</para>
-
- at x: 
- at y: 
- at z: 
- at rm: 
- at Returns: 
-
-
-<!-- ##### FUNCTION g3d_matrix_rotate ##### -->
-<para>
-
-</para>
-
- at angle: 
- at ax: 
- at ay: 
- at az: 
- at rm: 
- at Returns: 
-
-
-<!-- ##### FUNCTION g3d_matrix_rotate_xyz ##### -->
-<para>
-
-</para>
-
- at rx: 
- at ry: 
- at rz: 
- at rm: 
- at Returns: 
-
-

Deleted: trunk/Documentation/libg3d/api/tmpl/model.sgml
===================================================================
--- trunk/Documentation/libg3d/api/tmpl/model.sgml	2007-10-22 15:49:04 UTC (rev 798)
+++ trunk/Documentation/libg3d/api/tmpl/model.sgml	2007-10-22 20:13:00 UTC (rev 799)
@@ -1,71 +0,0 @@
-<!-- ##### SECTION Title ##### -->
-model
-
-<!-- ##### SECTION Short_Description ##### -->
-Model manipulation functions
-
-<!-- ##### SECTION Long_Description ##### -->
-<para>
-
-</para>
-
-<!-- ##### SECTION See_Also ##### -->
-<para>
-
-</para>
-
-<!-- ##### SECTION Stability_Level ##### -->
-
-
-<!-- ##### FUNCTION g3d_model_new ##### -->
-<para>
-
-</para>
-
- at Returns: 
-
-
-<!-- ##### FUNCTION g3d_model_load ##### -->
-<para>
-
-</para>
-
- at context: 
- at filename: 
- at Returns: 
-
-
-<!-- ##### FUNCTION g3d_model_check ##### -->
-<para>
-
-</para>
-
- at model: 
- at Returns: 
-
-
-<!-- ##### FUNCTION g3d_model_center ##### -->
-<para>
-
-</para>
-
- at model: 
- at Returns: 
-
-
-<!-- ##### FUNCTION g3d_model_clear ##### -->
-<para>
-
-</para>
-
- at model: 
-
-
-<!-- ##### FUNCTION g3d_model_free ##### -->
-<para>
-
-</para>
-
- at model: 
-
-

Deleted: trunk/Documentation/libg3d/api/tmpl/object.sgml
===================================================================
--- trunk/Documentation/libg3d/api/tmpl/object.sgml	2007-10-22 15:49:04 UTC (rev 798)
+++ trunk/Documentation/libg3d/api/tmpl/object.sgml	2007-10-22 20:13:00 UTC (rev 799)
@@ -1,93 +0,0 @@
-<!-- ##### SECTION Title ##### -->
-object
-
-<!-- ##### SECTION Short_Description ##### -->
-Object manipulation
-
-<!-- ##### SECTION Long_Description ##### -->
-<para>
-
-</para>
-
-<!-- ##### SECTION See_Also ##### -->
-<para>
-
-</para>
-
-<!-- ##### SECTION Stability_Level ##### -->
-
-
-<!-- ##### FUNCTION g3d_object_free ##### -->
-<para>
-
-</para>
-
- at object: 
-
-
-<!-- ##### FUNCTION g3d_object_radius ##### -->
-<para>
-
-</para>
-
- at object: 
- at Returns: 
-
-
-<!-- ##### FUNCTION g3d_object_scale ##### -->
-<para>
-
-</para>
-
- at object: 
- at scale: 
- at Returns: 
-
-
-<!-- ##### FUNCTION g3d_object_transform ##### -->
-<para>
-
-</para>
-
- at object: 
- at matrix: 
- at Returns: 
-
-
-<!-- ##### FUNCTION g3d_object_duplicate ##### -->
-<para>
-
-</para>
-
- at object: 
- at Returns: 
-
-
-<!-- ##### FUNCTION g3d_object_optimize ##### -->
-<para>
-
-</para>
-
- at object: 
- at Returns: 
-
-
-<!-- ##### FUNCTION g3d_object_smooth ##### -->
-<para>
-
-</para>
-
- at object: 
- at Returns: 
-
-
-<!-- ##### FUNCTION g3d_object_merge ##### -->
-<para>
-
-</para>
-
- at o1: 
- at o2: 
- at Returns: 
-
-

Deleted: trunk/Documentation/libg3d/api/tmpl/plugins.sgml
===================================================================
--- trunk/Documentation/libg3d/api/tmpl/plugins.sgml	2007-10-22 15:49:04 UTC (rev 798)
+++ trunk/Documentation/libg3d/api/tmpl/plugins.sgml	2007-10-22 20:13:00 UTC (rev 799)
@@ -1,165 +0,0 @@
-<!-- ##### SECTION Title ##### -->
-plugins
-
-<!-- ##### SECTION Short_Description ##### -->
-Plugin interface
-
-<!-- ##### SECTION Long_Description ##### -->
-<para>
-
-</para>
-
-<!-- ##### SECTION See_Also ##### -->
-<para>
-
-</para>
-
-<!-- ##### SECTION Stability_Level ##### -->
-
-
-<!-- ##### MACRO G3D_PLUGIN_UNKNOWN ##### -->
-<para>
-
-</para>
-
-
-
-<!-- ##### MACRO G3D_PLUGIN_IMPORT ##### -->
-<para>
-
-</para>
-
-
-
-<!-- ##### MACRO G3D_PLUGIN_IMAGE ##### -->
-<para>
-
-</para>
-
-
-
-<!-- ##### USER_FUNCTION PluginInitFunc ##### -->
-<para>
-
-</para>
-
- at context: 
- at Returns: 
-
-
-<!-- ##### USER_FUNCTION PluginCleanupFunc ##### -->
-<para>
-
-</para>
-
- at user_data: 
-
-
-<!-- ##### USER_FUNCTION PluginLoadModelFunc ##### -->
-<para>
-
-</para>
-
- at context: 
- at filename: 
- at model: 
- at user_data: 
- at Returns: 
-
-
-<!-- ##### USER_FUNCTION PluginLoadImageFunc ##### -->
-<para>
-
-</para>
-
- at context: 
- at filename: 
- at image: 
- at user_data: 
- at Returns: 
-
-
-<!-- ##### USER_FUNCTION PluginGetDescFunc ##### -->
-<para>
-
-</para>
-
- at context: 
- at Returns: 
-
-
-<!-- ##### USER_FUNCTION PluginGetExtFunc ##### -->
-<para>
-
-</para>
-
- at context: 
- at Returns: 
-
-
-<!-- ##### STRUCT G3DPlugin ##### -->
-<para>
-
-</para>
-
- at name: 
- at path: 
- at type: 
- at extensions: 
- at init_func: 
- at cleanup_func: 
- at loadmodel_func: 
- at loadimage_func: 
- at desc_func: 
- at ext_func: 
- at user_data: 
- at module: 
-
-<!-- ##### FUNCTION g3d_plugins_init ##### -->
-<para>
-
-</para>
-
- at context: 
- at Returns: 
-
-
-<!-- ##### FUNCTION g3d_plugins_cleanup ##### -->
-<para>
-
-</para>
-
- at context: 
-
-
-<!-- ##### FUNCTION g3d_plugins_load_model ##### -->
-<para>
-
-</para>
-
- at context: 
- at filename: 
- at model: 
- at Returns: 
-
-
-<!-- ##### FUNCTION g3d_plugins_load_image ##### -->
-<para>
-
-</para>
-
- at context: 
- at filename: 
- at image: 
- at Returns: 
-
-
-<!-- ##### FUNCTION g3d_plugins_get_image_extensions ##### -->
-<para>
-
-</para>
-
- at context: 
- at Returns: 
-
-

Deleted: trunk/Documentation/libg3d/api/tmpl/primitive.sgml
===================================================================
--- trunk/Documentation/libg3d/api/tmpl/primitive.sgml	2007-10-22 15:49:04 UTC (rev 798)
+++ trunk/Documentation/libg3d/api/tmpl/primitive.sgml	2007-10-22 20:13:00 UTC (rev 799)
@@ -1,48 +0,0 @@
-<!-- ##### SECTION Title ##### -->
-primitive
-
-<!-- ##### SECTION Short_Description ##### -->
-3D primitive generation functions
-
-<!-- ##### SECTION Long_Description ##### -->
-<para>
-
-</para>
-
-<!-- ##### SECTION See_Also ##### -->
-<para>
-
-</para>
-
-<!-- ##### SECTION Stability_Level ##### -->
-
-
-<!-- ##### FUNCTION g3d_primitive_cylinder ##### -->
-<para>
-
-</para>
-
- at radius: 
- at height: 
- at sides: 
- at top: 
- at bottom: 
- at material: 
- at Returns: 
-
-
-<!-- ##### FUNCTION g3d_primitive_tube ##### -->
-<para>
-
-</para>
-
- at r_in: 
- at r_out: 
- at height: 
- at sides: 
- at top: 
- at bottom: 
- at material: 
- at Returns: 
-
-

Deleted: trunk/Documentation/libg3d/api/tmpl/read.sgml
===================================================================
--- trunk/Documentation/libg3d/api/tmpl/read.sgml	2007-10-22 15:49:04 UTC (rev 798)
+++ trunk/Documentation/libg3d/api/tmpl/read.sgml	2007-10-22 20:13:00 UTC (rev 799)
@@ -1,82 +0,0 @@
-<!-- ##### SECTION Title ##### -->
-read
-
-<!-- ##### SECTION Short_Description ##### -->
-Binary file reading helper functions
-
-<!-- ##### SECTION Long_Description ##### -->
-<para>
-
-</para>
-
-<!-- ##### SECTION See_Also ##### -->
-<para>
-
-</para>
-
-<!-- ##### SECTION Stability_Level ##### -->
-
-
-<!-- ##### FUNCTION g3d_read_int8 ##### -->
-<para>
-
-</para>
-
- at f: 
- at Returns: 
-
-
-<!-- ##### FUNCTION g3d_read_int16_be ##### -->
-<para>
-
-</para>
-
- at f: 
- at Returns: 
-
-
-<!-- ##### FUNCTION g3d_read_int16_le ##### -->
-<para>
-
-</para>
-
- at f: 
- at Returns: 
-
-
-<!-- ##### FUNCTION g3d_read_int32_be ##### -->
-<para>
-
-</para>
-
- at f: 
- at Returns: 
-
-
-<!-- ##### FUNCTION g3d_read_int32_le ##### -->
-<para>
-
-</para>
-
- at f: 
- at Returns: 
-
-
-<!-- ##### FUNCTION g3d_read_float_be ##### -->
-<para>
-
-</para>
-
- at f: 
- at Returns: 
-
-
-<!-- ##### FUNCTION g3d_read_float_le ##### -->
-<para>
-
-</para>
-
- at f: 
- at Returns: 
-
-

Deleted: trunk/Documentation/libg3d/api/tmpl/texture.sgml
===================================================================
--- trunk/Documentation/libg3d/api/tmpl/texture.sgml	2007-10-22 15:49:04 UTC (rev 798)
+++ trunk/Documentation/libg3d/api/tmpl/texture.sgml	2007-10-22 20:13:00 UTC (rev 799)
@@ -1,39 +0,0 @@
-<!-- ##### SECTION Title ##### -->
-texture
-
-<!-- ##### SECTION Short_Description ##### -->
-Texture loading and manipulation
-
-<!-- ##### SECTION Long_Description ##### -->
-<para>
-
-</para>
-
-<!-- ##### SECTION See_Also ##### -->
-<para>
-
-</para>
-
-<!-- ##### SECTION Stability_Level ##### -->
-
-
-<!-- ##### FUNCTION g3d_texture_load_cached ##### -->
-<para>
-
-</para>
-
- at context: 
- at model: 
- at filename: 
- at Returns: 
-
-
-<!-- ##### FUNCTION g3d_texture_prepare ##### -->
-<para>
-
-</para>
-
- at texture: 
- at Returns: 
-
-

Deleted: trunk/Documentation/libg3d/api/tmpl/types.sgml
===================================================================
--- trunk/Documentation/libg3d/api/tmpl/types.sgml	2007-10-22 15:49:04 UTC (rev 798)
+++ trunk/Documentation/libg3d/api/tmpl/types.sgml	2007-10-22 20:13:00 UTC (rev 799)
@@ -1,173 +0,0 @@
-<!-- ##### SECTION Title ##### -->
-types
-
-<!-- ##### SECTION Short_Description ##### -->
-All types used in libg3d
-
-<!-- ##### SECTION Long_Description ##### -->
-<para>
-
-</para>
-
-<!-- ##### SECTION See_Also ##### -->
-<para>
-
-</para>
-
-<!-- ##### SECTION Stability_Level ##### -->
-
-
-<!-- ##### MACRO G3D_FLAG_IMG_GREYSCALE ##### -->
-<para>
-
-</para>
-
-
-
-<!-- ##### STRUCT G3DImage ##### -->
-<para>
-
-</para>
-
- at name: 
- at width: 
- at height: 
- at depth: 
- at flags: 
- at pixeldata: 
- at tex_id: 
- at tex_scale_u: 
- at tex_scale_v: 
-
-<!-- ##### MACRO G3D_FLAG_MAT_TWOSIDE ##### -->
-<para>
-
-</para>
-
-
-
-<!-- ##### STRUCT G3DMaterial ##### -->
-<para>
-
-</para>
-
- at name: 
- at r: 
- at g: 
- at b: 
- at a: 
- at shininess: 
- at specular: 
- at flags: 
- at tex_image: 
-
-<!-- ##### MACRO G3D_FLAG_FAC_NORMALS ##### -->
-<para>
-
-</para>
-
-
-
-<!-- ##### MACRO G3D_FLAG_FAC_TEXMAP ##### -->
-<para>
-
-</para>
-
-
-
-<!-- ##### STRUCT G3DFace ##### -->
-<para>
-
-</para>
-
- at vertex_count: 
- at vertex_indices: 
- at material: 
- at flags: 
- at normals: 
- at tex_image: 
- at tex_vertex_count: 
- at tex_vertex_data: 
-
-<!-- ##### STRUCT G3DObject ##### -->
-<para>
-
-</para>
-
- at name: 
- at materials: 
- at faces: 
- at objects: 
- at hide: 
- at vertex_count: 
- at vertex_data: 
- at tex_vertex_count: 
- at tex_vertex_data: 
- at tex_image: 
- at _normals: 
- at _materials: 
- at _num_faces: 
- at _indices: 
- at _flags: 
- at _tex_images: 
- at _tex_coords: 
-
-<!-- ##### USER_FUNCTION G3DSetBgColorFunc ##### -->
-<para>
-
-</para>
-
- at r: 
- at g: 
- at b: 
- at a: 
- at user_data: 
- at Returns: 
-
-
-<!-- ##### USER_FUNCTION G3DUpdateInterfaceFunc ##### -->
-<para>
-
-</para>
-
- at user_data: 
- at Returns: 
-
-
-<!-- ##### USER_FUNCTION G3DUpdateProgressBarFunc ##### -->
-<para>
-
-</para>
-
- at percentage: 
- at show: 
- at user_data: 
- at Returns: 
-
-
-<!-- ##### STRUCT G3DContext ##### -->
-<para>
-
-</para>
-
- at plugins: 
- at exts_import: 
- at exts_image: 
- at set_bgcolor_func: 
- at set_bgcolor_data: 
- at update_interface_func: 
- at update_interface_data: 
- at update_progress_bar_func: 
- at update_progress_bar_data: 
-
-<!-- ##### STRUCT G3DModel ##### -->
-<para>
-
-</para>
-
- at filename: 
- at context: 
- at materials: 
- at objects: 
- at tex_images: 
-

Deleted: trunk/Documentation/libg3d/api/tmpl/vector.sgml
===================================================================
--- trunk/Documentation/libg3d/api/tmpl/vector.sgml	2007-10-22 15:49:04 UTC (rev 798)
+++ trunk/Documentation/libg3d/api/tmpl/vector.sgml	2007-10-22 20:13:00 UTC (rev 799)
@@ -1,59 +0,0 @@
-<!-- ##### SECTION Title ##### -->
-vector
-
-<!-- ##### SECTION Short_Description ##### -->
-Vector manipulation and calculation
-
-<!-- ##### SECTION Long_Description ##### -->
-<para>
-
-</para>
-
-<!-- ##### SECTION See_Also ##### -->
-<para>
-
-</para>
-
-<!-- ##### SECTION Stability_Level ##### -->
-
-
-<!-- ##### FUNCTION g3d_vector_normal ##### -->
-<para>
-
-</para>
-
- at ax: 
- at ay: 
- at az: 
- at bx: 
- at by: 
- at bz: 
- at nx: 
- at ny: 
- at nz: 
- at Returns: 
-
-
-<!-- ##### FUNCTION g3d_vector_unify ##### -->
-<para>
-
-</para>
-
- at nx: 
- at ny: 
- at nz: 
- at Returns: 
-
-
-<!-- ##### FUNCTION g3d_vector_transform ##### -->
-<para>
-
-</para>
-
- at x: 
- at y: 
- at z: 
- at matrix: 
- at Returns: 
-
-



From lazhur at mail.berlios.de  Mon Oct 22 22:13:12 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Mon, 22 Oct 2007 22:13:12 +0200
Subject: [S3d-svn] r800 - in trunk: . apps/comptest apps/dot_mcp apps/kism3d
	apps/meshs3d apps/olsrs3d apps/s3d_x11gate apps/s3dfm
	apps/s3dosm apps/s3dvt
Message-ID: <200710222013.l9MKDCSs000265@sheep.berlios.de>

Author: lazhur
Date: 2007-10-22 22:13:11 +0200 (Mon, 22 Oct 2007)
New Revision: 800

Modified:
   trunk/CMakeLists.txt
   trunk/apps/comptest/CMakeLists.txt
   trunk/apps/dot_mcp/CMakeLists.txt
   trunk/apps/kism3d/CMakeLists.txt
   trunk/apps/meshs3d/CMakeLists.txt
   trunk/apps/olsrs3d/CMakeLists.txt
   trunk/apps/s3d_x11gate/CMakeLists.txt
   trunk/apps/s3dfm/CMakeLists.txt
   trunk/apps/s3dosm/CMakeLists.txt
   trunk/apps/s3dvt/CMakeLists.txt
Log:
Specify C as default languages for projects to remove C++ checks


Modified: trunk/CMakeLists.txt
===================================================================
--- trunk/CMakeLists.txt	2007-10-22 20:13:00 UTC (rev 799)
+++ trunk/CMakeLists.txt	2007-10-22 20:13:11 UTC (rev 800)
@@ -1,4 +1,4 @@
-project(s3d)
+project(s3d C)
 set(VERSION 0.1.1)
 
 # we require cmake 2.4.4 or higher

Modified: trunk/apps/comptest/CMakeLists.txt
===================================================================
--- trunk/apps/comptest/CMakeLists.txt	2007-10-22 20:13:00 UTC (rev 799)
+++ trunk/apps/comptest/CMakeLists.txt	2007-10-22 20:13:11 UTC (rev 800)
@@ -1,4 +1,4 @@
-project(comptest)
+project(comptest C)
 
 if (XCOMPOSITE_FOUND AND XDAMAGE_FOUND AND XFIXES_FOUND AND XRENDER_FOUND)
 	include_directories(${s3d_SOURCE_DIR}/libs3d)

Modified: trunk/apps/dot_mcp/CMakeLists.txt
===================================================================
--- trunk/apps/dot_mcp/CMakeLists.txt	2007-10-22 20:13:00 UTC (rev 799)
+++ trunk/apps/dot_mcp/CMakeLists.txt	2007-10-22 20:13:11 UTC (rev 800)
@@ -1,4 +1,4 @@
-project(dot_mcp)
+project(dot_mcp C)
 
 include_directories(${s3d_SOURCE_DIR}/libs3d)
 

Modified: trunk/apps/kism3d/CMakeLists.txt
===================================================================
--- trunk/apps/kism3d/CMakeLists.txt	2007-10-22 20:13:00 UTC (rev 799)
+++ trunk/apps/kism3d/CMakeLists.txt	2007-10-22 20:13:11 UTC (rev 800)
@@ -1,4 +1,4 @@
-project(kism3d)
+project(kism3d C)
 
 if (PTHREADS_FOUND)
 	include_directories(${s3d_SOURCE_DIR}/libs3d ${s3d_SOURCE_DIR}/libs3dw)

Modified: trunk/apps/meshs3d/CMakeLists.txt
===================================================================
--- trunk/apps/meshs3d/CMakeLists.txt	2007-10-22 20:13:00 UTC (rev 799)
+++ trunk/apps/meshs3d/CMakeLists.txt	2007-10-22 20:13:11 UTC (rev 800)
@@ -1,4 +1,4 @@
-project(meshs3d)
+project(meshs3d C)
 
 include_directories(${s3d_SOURCE_DIR}/libs3d ${s3d_SOURCE_DIR}/libs3dw)
 

Modified: trunk/apps/olsrs3d/CMakeLists.txt
===================================================================
--- trunk/apps/olsrs3d/CMakeLists.txt	2007-10-22 20:13:00 UTC (rev 799)
+++ trunk/apps/olsrs3d/CMakeLists.txt	2007-10-22 20:13:11 UTC (rev 800)
@@ -1,4 +1,4 @@
-project(olsrs3d)
+project(olsrs3d C)
 
 include_directories(${s3d_SOURCE_DIR}/libs3d ${s3d_SOURCE_DIR}/libs3dw)
 

Modified: trunk/apps/s3d_x11gate/CMakeLists.txt
===================================================================
--- trunk/apps/s3d_x11gate/CMakeLists.txt	2007-10-22 20:13:00 UTC (rev 799)
+++ trunk/apps/s3d_x11gate/CMakeLists.txt	2007-10-22 20:13:11 UTC (rev 800)
@@ -1,4 +1,4 @@
-project(s3d_x11gate)
+project(s3d_x11gate C)
 
 if (XTST_FOUND)
 	include_directories(${s3d_SOURCE_DIR}/libs3d ${s3d_SOURCE_DIR}/libs3dw)

Modified: trunk/apps/s3dfm/CMakeLists.txt
===================================================================
--- trunk/apps/s3dfm/CMakeLists.txt	2007-10-22 20:13:00 UTC (rev 799)
+++ trunk/apps/s3dfm/CMakeLists.txt	2007-10-22 20:13:11 UTC (rev 800)
@@ -1,4 +1,4 @@
-project(s3dfm)
+project(s3dfm C)
 
 if (PTHREADS_FOUND)
 	include_directories(${s3d_SOURCE_DIR}/libs3d ${s3d_SOURCE_DIR}/libs3dw)

Modified: trunk/apps/s3dosm/CMakeLists.txt
===================================================================
--- trunk/apps/s3dosm/CMakeLists.txt	2007-10-22 20:13:00 UTC (rev 799)
+++ trunk/apps/s3dosm/CMakeLists.txt	2007-10-22 20:13:11 UTC (rev 800)
@@ -1,4 +1,4 @@
-project(s3dosm)
+project(s3dosm C)
 
 # depends on xml2, sqlite3
 if (LIBXML2_FOUND AND SQLITE3_FOUND)

Modified: trunk/apps/s3dvt/CMakeLists.txt
===================================================================
--- trunk/apps/s3dvt/CMakeLists.txt	2007-10-22 20:13:00 UTC (rev 799)
+++ trunk/apps/s3dvt/CMakeLists.txt	2007-10-22 20:13:11 UTC (rev 800)
@@ -1,4 +1,4 @@
-project(s3dvt)
+project(s3dvt C)
 
 if (PTHREADS_FOUND)
 	include_directories(${s3d_SOURCE_DIR}/libs3d)



From lazhur at mail.berlios.de  Mon Oct 22 22:13:26 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Mon, 22 Oct 2007 22:13:26 +0200
Subject: [S3d-svn] r801 - in trunk: . cmake/modules
Message-ID: <200710222013.l9MKDQNH000322@sheep.berlios.de>

Author: lazhur
Date: 2007-10-22 22:13:25 +0200 (Mon, 22 Oct 2007)
New Revision: 801

Added:
   trunk/cmake/modules/FindDocbook.cmake
Modified:
   trunk/ConfigureChecks.cmake
Log:
Add cmake module for docbook


Modified: trunk/ConfigureChecks.cmake
===================================================================
--- trunk/ConfigureChecks.cmake	2007-10-22 20:13:11 UTC (rev 800)
+++ trunk/ConfigureChecks.cmake	2007-10-22 20:13:25 UTC (rev 801)
@@ -128,6 +128,10 @@
 endif (PTHREADS_FOUND)
 
 
+# try to find docbook
+find_package(Docbook)
+
+
 # test for shm
 include(TestForSHM)
 if (HAVE_SHM)

Added: trunk/cmake/modules/FindDocbook.cmake
===================================================================
--- trunk/cmake/modules/FindDocbook.cmake	2007-10-22 20:13:11 UTC (rev 800)
+++ trunk/cmake/modules/FindDocbook.cmake	2007-10-22 20:13:25 UTC (rev 801)
@@ -0,0 +1,84 @@
+# - Find Docbook
+# This module finds if Docbook is installed and determines where the
+# executables are. This code sets the following variables:
+#
+#  DOCBOOK2DVI_COMPILER: path to the DVI convert
+#  DOCBOOK2HTML_COMPILER: path to the HTML convert
+#  DOCBOOK2MAN_COMPILER: path to the MAN convert
+#  DOCBOOK2PDF_COMPILER: path to the PDF convert
+#  DOCBOOK2PS_COMPILER: path to the PS convert
+#  DOCBOOK2RTF_COMPILER: path to the RTF convert
+#  DOCBOOK2TEX_COMPILER: path to the TEX convert
+#  DOCBOOK2TEXI_COMPILER: path to the TEXI convert
+#  DOCBOOK2TXT_COMPILER: path to the TXT convert
+#
+
+set(DOCBOOK_BINARY_PATH ${DOCBOOK_BINARY_PATH}
+	CACHE PATH "Path to the Docbook binary directory."
+)
+
+find_program(DOCBOOK2DVI_COMPILER
+	NAMES docbook2dvi
+	PATHS ${DOCBOOK_BINARY_PATH}
+		/usr/bin
+)
+
+find_program(DOCBOOK2HTML_COMPILER
+	NAMES docbook2html
+	PATHS ${DOCBOOK_BINARY_PATH}
+		/usr/bin
+)
+
+find_program(DOCBOOK2MAN_COMPILER
+	NAMES docbook2man
+	PATHS ${DOCBOOK_BINARY_PATH}
+		/usr/bin
+)
+
+find_program(DOCBOOK2PDF_COMPILER
+	NAMES docbook2pdf
+	PATHS ${DOCBOOK_BINARY_PATH}
+		/usr/bin
+)
+
+find_program(DOCBOOK2PS_COMPILER
+	NAMES docbook2ps
+	PATHS ${DOCBOOK_BINARY_PATH}
+		/usr/bin
+)
+
+find_program(DOCBOOK2RTF_COMPILER
+	NAMES docbook2rtf
+	PATHS ${DOCBOOK_BINARY_PATH}
+		/usr/bin
+)
+
+find_program(DOCBOOK2TEX_COMPILER
+	NAMES docbook2tex
+	PATHS ${DOCBOOK_BINARY_PATH}
+		/usr/bin
+)
+
+find_program(DOCBOOK2TEXI_COMPILER
+	NAMES docbook2texi
+	PATHS ${DOCBOOK_BINARY_PATH}
+		/usr/bin
+)
+
+find_program(DOCBOOK2TXT_COMPILER
+	NAMES docbook2txt
+	PATHS ${DOCBOOK_BINARY_PATH}
+		/usr/bin
+)
+
+mark_as_advanced(
+	DOCBOOK2DVI_COMPILER
+	DOCBOOK2HTML_COMPILER
+	DOCBOOK2MAN_COMPILER
+	DOCBOOK2PDF_COMPILER
+	DOCBOOK2PS_COMPILER
+	DOCBOOK2RTF_COMPILER
+	DOCBOOK2TEX_COMPILER
+	DOCBOOK2TEXI_COMPILER
+	DOCBOOK2TXT_COMPILER
+)



From dotslash at mail.berlios.de  Mon Oct 22 22:23:55 2007
From: dotslash at mail.berlios.de (dotslash at BerliOS)
Date: Mon, 22 Oct 2007 22:23:55 +0200
Subject: [S3d-svn] r802 - in trunk: . apps/meshs3d
Message-ID: <200710222023.l9MKNtAQ000983@sheep.berlios.de>

Author: dotslash
Date: 2007-10-22 22:23:54 +0200 (Mon, 22 Oct 2007)
New Revision: 802

Modified:
   trunk/
   trunk/apps/meshs3d/main.c
Log:
 r2749 at kero:  dotslash | 2007-10-22 22:23:46 +0200
 - only consider nodes if they are both visible



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:2743
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:2749

Modified: trunk/apps/meshs3d/main.c
===================================================================
--- trunk/apps/meshs3d/main.c	2007-10-22 20:13:25 UTC (rev 801)
+++ trunk/apps/meshs3d/main.c	2007-10-22 20:23:54 UTC (rev 802)
@@ -334,16 +334,22 @@
 	while (NULL != (hashit1 = hash_iterate(node_hash, hashit1))) {
 
 		first_node = (struct node *) hashit1->bucket->data;
+		if (!first_node->visible)
+			continue;
+
 		while (NULL != (hashit2 = hash_iterate(node_hash, hashit2))) {
 
 			sec_node = (struct node *) hashit2->bucket->data;
+			if (!sec_node->visible)
+				continue;
+
 			if (first_node != sec_node && (max(first_node->ip, sec_node->ip) == first_node->ip)) {
 
 				ip[0] = first_node->ip;
 				ip[1] = sec_node->ip;
 				distance = dirt(first_node->pos_vec, sec_node->pos_vec, tmp_mov_vec);
 
-				if (NULL != (con = hash_find(con_hash, ip))) {
+				if ((NULL != (con = hash_find(con_hash, ip)))) {
 
 					/* we have a connection */
 					wish_distance = ((con->etx1_sqrt + con->etx2_sqrt)) + 4;



From lazhur at mail.berlios.de  Mon Oct 22 22:40:56 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Mon, 22 Oct 2007 22:40:56 +0200
Subject: [S3d-svn] r803 - trunk/Documentation
Message-ID: <200710222040.l9MKeuR3003098@sheep.berlios.de>

Author: lazhur
Date: 2007-10-22 22:40:55 +0200 (Mon, 22 Oct 2007)
New Revision: 803

Modified:
   trunk/Documentation/s3d.docbook
Log:
Remove references to missing misc.docbook


Modified: trunk/Documentation/s3d.docbook
===================================================================
--- trunk/Documentation/s3d.docbook	2007-10-22 20:23:54 UTC (rev 802)
+++ trunk/Documentation/s3d.docbook	2007-10-22 20:40:55 UTC (rev 803)
@@ -4,13 +4,11 @@
   <!ENTITY server SYSTEM "server/server.docbook">
   <!ENTITY libs3d SYSTEM "libs3d/libs3d.docbook">
   <!ENTITY libs3dw SYSTEM "libs3dw/libs3dw.docbook">
-  <!ENTITY misc SYSTEM "misc.docbook">
 ]>
 <book id="s3d" lang="en">
 &bookinfo;
 &server;
 &libs3d;
 &libs3dw;
-&misc;
 
 </book>



From lazhur at mail.berlios.de  Mon Oct 22 22:41:07 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Mon, 22 Oct 2007 22:41:07 +0200
Subject: [S3d-svn] r804 - trunk/Documentation
Message-ID: <200710222041.l9MKf7C4003159@sheep.berlios.de>

Author: lazhur
Date: 2007-10-22 22:41:07 +0200 (Mon, 22 Oct 2007)
New Revision: 804

Modified:
   trunk/Documentation/CMakeLists.txt
Log:
Generate and install documentation when docbook2html is available


Modified: trunk/Documentation/CMakeLists.txt
===================================================================
--- trunk/Documentation/CMakeLists.txt	2007-10-22 20:40:55 UTC (rev 803)
+++ trunk/Documentation/CMakeLists.txt	2007-10-22 20:41:07 UTC (rev 804)
@@ -2,3 +2,32 @@
 add_subdirectory(libs3dw)
 add_subdirectory(manpages)
 add_subdirectory(server)
+
+project(Documentation C)
+
+if (DOCBOOK2HTML_COMPILER)
+	add_custom_command(
+		OUTPUT  ${Documentation_BINARY_DIR}/index.html
+		COMMAND ${DOCBOOK2HTML_COMPILER}
+		ARGS    ${Documentation_SOURCE_DIR}/s3d.docbook
+		DEPENDS ${Documentation_SOURCE_DIR}/s3d.docbook
+			${Documentation_SOURCE_DIR}/bookinfo.docbook
+			${Documentation_SOURCE_DIR}/server/server.docbook
+			${Documentation_SOURCE_DIR}/libs3dw/libs3dw.docbook
+			${Documentation_SOURCE_DIR}/libs3d/libs3d.docbook
+		COMMENT "Build s3d documentation"
+	)
+	
+	add_custom_target(documentation ALL echo
+		DEPENDS   ${Documentation_BINARY_DIR}/index.html
+	)
+
+	# install
+	file(GLOB DOCS ${Documentation_BINARY_DIR}/*.html)
+	install(FILES ${DOCS} DESTINATION share/doc/s3d)
+else (DOCBOOK2HTML_COMPILER)
+	PkgStatus_Later("docbook2html (pkg name: docbook-utils)")
+	
+	# print late status
+	Collected_PkgStatus("documentation")
+endif (DOCBOOK2HTML_COMPILER)



From lazhur at mail.berlios.de  Mon Oct 22 22:54:41 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Mon, 22 Oct 2007 22:54:41 +0200
Subject: [S3d-svn] r805 - trunk/Documentation
Message-ID: <200710222054.l9MKsfqf004195@sheep.berlios.de>

Author: lazhur
Date: 2007-10-22 22:54:41 +0200 (Mon, 22 Oct 2007)
New Revision: 805

Modified:
   trunk/Documentation/CMakeLists.txt
Log:
Build docbook in special subdirectory


Modified: trunk/Documentation/CMakeLists.txt
===================================================================
--- trunk/Documentation/CMakeLists.txt	2007-10-22 20:41:07 UTC (rev 804)
+++ trunk/Documentation/CMakeLists.txt	2007-10-22 20:54:41 UTC (rev 805)
@@ -7,9 +7,9 @@
 
 if (DOCBOOK2HTML_COMPILER)
 	add_custom_command(
-		OUTPUT  ${Documentation_BINARY_DIR}/index.html
+		OUTPUT  ${Documentation_BINARY_DIR}/doc_output/index.html
 		COMMAND ${DOCBOOK2HTML_COMPILER}
-		ARGS    ${Documentation_SOURCE_DIR}/s3d.docbook
+		ARGS    ${Documentation_SOURCE_DIR}/s3d.docbook -o ${Documentation_BINARY_DIR}/doc_output
 		DEPENDS ${Documentation_SOURCE_DIR}/s3d.docbook
 			${Documentation_SOURCE_DIR}/bookinfo.docbook
 			${Documentation_SOURCE_DIR}/server/server.docbook
@@ -19,11 +19,11 @@
 	)
 	
 	add_custom_target(documentation ALL echo
-		DEPENDS   ${Documentation_BINARY_DIR}/index.html
+		DEPENDS   ${Documentation_BINARY_DIR}/doc_output/index.html
 	)
 
 	# install
-	file(GLOB DOCS ${Documentation_BINARY_DIR}/*.html)
+	file(GLOB DOCS ${Documentation_BINARY_DIR}/doc_output/*)
 	install(FILES ${DOCS} DESTINATION share/doc/s3d)
 else (DOCBOOK2HTML_COMPILER)
 	PkgStatus_Later("docbook2html (pkg name: docbook-utils)")



From dotslash at mail.berlios.de  Mon Oct 22 23:23:41 2007
From: dotslash at mail.berlios.de (dotslash at BerliOS)
Date: Mon, 22 Oct 2007 23:23:41 +0200
Subject: [S3d-svn] r806 - in trunk: . apps/meshs3d
Message-ID: <200710222123.l9MLNfSE006142@sheep.berlios.de>

Author: dotslash
Date: 2007-10-22 23:23:41 +0200 (Mon, 22 Oct 2007)
New Revision: 806

Modified:
   trunk/
   trunk/apps/meshs3d/meshs3d.h
   trunk/apps/meshs3d/process.c
Log:
 r2754 at kero:  dotslash | 2007-10-22 23:23:32 +0200
 - let links to disappear if they are not mentioned in the block (e.g. direct link vanished)



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:2749
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:2754

Modified: trunk/apps/meshs3d/meshs3d.h
===================================================================
--- trunk/apps/meshs3d/meshs3d.h	2007-10-22 20:54:41 UTC (rev 805)
+++ trunk/apps/meshs3d/meshs3d.h	2007-10-22 21:23:41 UTC (rev 806)
@@ -38,6 +38,7 @@
 	float etx2_sqrt;     /* sqrt etx of right olsr node */
 	int obj_id;        /* id of connection object in s3d */
 	int color;
+	int old;			/* check if the node has been announced in the last block */
 	float rgb;
 };
 

Modified: trunk/apps/meshs3d/process.c
===================================================================
--- trunk/apps/meshs3d/process.c	2007-10-22 20:54:41 UTC (rev 805)
+++ trunk/apps/meshs3d/process.c	2007-10-22 21:23:41 UTC (rev 806)
@@ -181,6 +181,8 @@
 		con_hash = swaphash;
 	}
 
+	con->old = 0;
+
 }
 
 static struct node *handle_mesh_node(unsigned int ip, char *ip_string) {
@@ -231,6 +233,8 @@
 	int dn;
 	float f;
 	char *lbuf_ptr, *last_cr_ptr, *con_from, *con_from_end, *con_to, *con_to_end, *etx, *etx_end, *tmp_char;
+	struct hash_it_t *hashit;
+	struct node_con *con;
 	char hna_name[NAMEMAX];
 	char hna_node[NAMEMAX];
 
@@ -369,6 +373,20 @@
 
 			Global.output_block_completed = 1;
 
+			hashit = NULL;
+			/* check for old nodes and remove them */
+			while (NULL != (hashit = hash_iterate(con_hash, hashit))) {
+				con = (struct node_con *) hashit->bucket->data;
+				if (con->old) {
+					if (con->obj_id != -1) 
+						s3d_del_object(con->obj_id);
+					con->obj_id = -1;
+					hash_remove_bucket(con_hash, hashit);
+				}
+				con->old = 1;	/* set con on old. if it's still old in the next iteration, 
+								   we will remove it. */
+			}
+
 		}
 
 		lbuf_ptr++;



From lazhur at mail.berlios.de  Tue Oct 23 00:19:49 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Tue, 23 Oct 2007 00:19:49 +0200
Subject: [S3d-svn] r807 - trunk/extras/distro/gentoo/media-gfx/s3d-svn
Message-ID: <200710222219.l9MMJnER009292@sheep.berlios.de>

Author: lazhur
Date: 2007-10-23 00:19:49 +0200 (Tue, 23 Oct 2007)
New Revision: 807

Modified:
   trunk/extras/distro/gentoo/media-gfx/s3d-svn/ChangeLog
   trunk/extras/distro/gentoo/media-gfx/s3d-svn/Manifest
   trunk/extras/distro/gentoo/media-gfx/s3d-svn/s3d-svn-9999.ebuild
Log:
Added useflag doc to s3d-svn ebuild


Modified: trunk/extras/distro/gentoo/media-gfx/s3d-svn/ChangeLog
===================================================================
--- trunk/extras/distro/gentoo/media-gfx/s3d-svn/ChangeLog	2007-10-22 21:23:41 UTC (rev 806)
+++ trunk/extras/distro/gentoo/media-gfx/s3d-svn/ChangeLog	2007-10-22 22:19:49 UTC (rev 807)
@@ -1,5 +1,10 @@
 # ChangeLog for media-gfx/s3d-svn
 
+*s3d-svn-9999 (22 Oct 2007)
+
+  22 Oct 2007; Sven Eckelmann <sven.eckelmann at gmx.de> s3d-svn-9999.ebuild:
+  Added useflag to build documentation.
+
 *s3d-svn-9999 (5 Jul 2007)
 
   5 Jul 2007; Sven Eckelmann <sven.eckelmann at gmx.de> s3d-svn-9999.ebuild:

Modified: trunk/extras/distro/gentoo/media-gfx/s3d-svn/Manifest
===================================================================
--- trunk/extras/distro/gentoo/media-gfx/s3d-svn/Manifest	2007-10-22 21:23:41 UTC (rev 806)
+++ trunk/extras/distro/gentoo/media-gfx/s3d-svn/Manifest	2007-10-22 22:19:49 UTC (rev 807)
@@ -1,11 +1,11 @@
-EBUILD s3d-svn-9999.ebuild 935 RMD160 8ba7ed1ef9f990eb127c39232a2a5afc50e46740 SHA1 102fc90130eb6bfc86a2bacb7bd6813f39723c61 SHA256 c1e976fb90541a2d360b001052c085f99a10682d5d87479816b07e40cc7acee9
-MD5 fc848a6f76a9fd799e482112d828aed8 s3d-svn-9999.ebuild 935
-RMD160 8ba7ed1ef9f990eb127c39232a2a5afc50e46740 s3d-svn-9999.ebuild 935
-SHA256 c1e976fb90541a2d360b001052c085f99a10682d5d87479816b07e40cc7acee9 s3d-svn-9999.ebuild 935
-MISC ChangeLog 450 RMD160 5e67ae09846f759c44d03abfa3a967e72b50f928 SHA1 3e6232ff249a170c9fab0c2ce88d84fec3ceff1e SHA256 0ce2752a5d002d2ff44085b1cc9ccddaa8d82e52fbaab77cf263d839aa1ab77a
-MD5 ecd9590d12d1825549e098a83c6b37b8 ChangeLog 450
-RMD160 5e67ae09846f759c44d03abfa3a967e72b50f928 ChangeLog 450
-SHA256 0ce2752a5d002d2ff44085b1cc9ccddaa8d82e52fbaab77cf263d839aa1ab77a ChangeLog 450
+EBUILD s3d-svn-9999.ebuild 977 RMD160 832560df4bd0673709ce4bf6c5d14cd39b8ef3ea SHA1 25abea26d8016ac83db84fa66a01468467958a03 SHA256 442a7a7213564bbd85d200c68233f9434fc9adad7f82475bce657e50ad872b98
+MD5 2d63c7d2e99744ac6d9c0bff6c5fd79b s3d-svn-9999.ebuild 977
+RMD160 832560df4bd0673709ce4bf6c5d14cd39b8ef3ea s3d-svn-9999.ebuild 977
+SHA256 442a7a7213564bbd85d200c68233f9434fc9adad7f82475bce657e50ad872b98 s3d-svn-9999.ebuild 977
+MISC ChangeLog 595 RMD160 2c8efb9d72b245a282d9e672cb43cb895d74f5ea SHA1 3d3296f8ba38d567d156b88ad90c62084163728b SHA256 102da7b6d056e063cb8a6ed39149e33a85c5cdfb1bc644c25ec06b0b13ba77e7
+MD5 2d0abf76b3c5bd36bf57b6e9fda10a98 ChangeLog 595
+RMD160 2c8efb9d72b245a282d9e672cb43cb895d74f5ea ChangeLog 595
+SHA256 102da7b6d056e063cb8a6ed39149e33a85c5cdfb1bc644c25ec06b0b13ba77e7 ChangeLog 595
 MISC metadata.xml 239 RMD160 236f28d8249f562b764e2d854580d8301b150418 SHA1 76f167e3abff81e9535c16a637fd1e7f91d4fda3 SHA256 c0f08f1f0c1ce07df414cd87bf028a15cae639c89b2d636714d50d8aa77c370f
 MD5 261031c8b7aca6f50babf7e44b35deb1 metadata.xml 239
 RMD160 236f28d8249f562b764e2d854580d8301b150418 metadata.xml 239

Modified: trunk/extras/distro/gentoo/media-gfx/s3d-svn/s3d-svn-9999.ebuild
===================================================================
--- trunk/extras/distro/gentoo/media-gfx/s3d-svn/s3d-svn-9999.ebuild	2007-10-22 21:23:41 UTC (rev 806)
+++ trunk/extras/distro/gentoo/media-gfx/s3d-svn/s3d-svn-9999.ebuild	2007-10-22 22:19:49 UTC (rev 807)
@@ -1,6 +1,6 @@
 inherit subversion
 
-IUSE="gps"
+IUSE="gps doc"
 
 ESVN_REPO_URI="http://svn.berlios.de/svnroot/repos/s3d/trunk"
 
@@ -36,6 +36,7 @@
 			x11-libs/libXtst )
 		virtual/x11 )
 
+	doc? ( app-text/docbook-sgml-utils )
 	gps? ( sci-geosciences/gpsd )	
 
 	virtual/glut



From lazhur at mail.berlios.de  Tue Oct 23 00:20:02 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Tue, 23 Oct 2007 00:20:02 +0200
Subject: [S3d-svn] r808 - trunk/extras/distro/gentoo/media-gfx/s3d-svn
Message-ID: <200710222220.l9MMK2Wh009335@sheep.berlios.de>

Author: lazhur
Date: 2007-10-23 00:20:01 +0200 (Tue, 23 Oct 2007)
New Revision: 808

Modified:
   trunk/extras/distro/gentoo/media-gfx/s3d-svn/ChangeLog
   trunk/extras/distro/gentoo/media-gfx/s3d-svn/Manifest
   trunk/extras/distro/gentoo/media-gfx/s3d-svn/s3d-svn-9999.ebuild
Log:
Added useflag xcomposite for comptest to s3d-svn ebuild


Modified: trunk/extras/distro/gentoo/media-gfx/s3d-svn/ChangeLog
===================================================================
--- trunk/extras/distro/gentoo/media-gfx/s3d-svn/ChangeLog	2007-10-22 22:19:49 UTC (rev 807)
+++ trunk/extras/distro/gentoo/media-gfx/s3d-svn/ChangeLog	2007-10-22 22:20:01 UTC (rev 808)
@@ -3,6 +3,9 @@
 *s3d-svn-9999 (22 Oct 2007)
 
   22 Oct 2007; Sven Eckelmann <sven.eckelmann at gmx.de> s3d-svn-9999.ebuild:
+  Added useflag xcomposite to build comptest.
+
+  22 Oct 2007; Sven Eckelmann <sven.eckelmann at gmx.de> s3d-svn-9999.ebuild:
   Added useflag to build documentation.
 
 *s3d-svn-9999 (5 Jul 2007)

Modified: trunk/extras/distro/gentoo/media-gfx/s3d-svn/Manifest
===================================================================
--- trunk/extras/distro/gentoo/media-gfx/s3d-svn/Manifest	2007-10-22 22:19:49 UTC (rev 807)
+++ trunk/extras/distro/gentoo/media-gfx/s3d-svn/Manifest	2007-10-22 22:20:01 UTC (rev 808)
@@ -1,11 +1,11 @@
-EBUILD s3d-svn-9999.ebuild 977 RMD160 832560df4bd0673709ce4bf6c5d14cd39b8ef3ea SHA1 25abea26d8016ac83db84fa66a01468467958a03 SHA256 442a7a7213564bbd85d200c68233f9434fc9adad7f82475bce657e50ad872b98
-MD5 2d63c7d2e99744ac6d9c0bff6c5fd79b s3d-svn-9999.ebuild 977
-RMD160 832560df4bd0673709ce4bf6c5d14cd39b8ef3ea s3d-svn-9999.ebuild 977
-SHA256 442a7a7213564bbd85d200c68233f9434fc9adad7f82475bce657e50ad872b98 s3d-svn-9999.ebuild 977
-MISC ChangeLog 595 RMD160 2c8efb9d72b245a282d9e672cb43cb895d74f5ea SHA1 3d3296f8ba38d567d156b88ad90c62084163728b SHA256 102da7b6d056e063cb8a6ed39149e33a85c5cdfb1bc644c25ec06b0b13ba77e7
-MD5 2d0abf76b3c5bd36bf57b6e9fda10a98 ChangeLog 595
-RMD160 2c8efb9d72b245a282d9e672cb43cb895d74f5ea ChangeLog 595
-SHA256 102da7b6d056e063cb8a6ed39149e33a85c5cdfb1bc644c25ec06b0b13ba77e7 ChangeLog 595
+EBUILD s3d-svn-9999.ebuild 1095 RMD160 ae52f86830e1931f2ca591c80da2164aa9a7bd40 SHA1 537b0b887184a943794e6adeac73f1b39b0bc0ef SHA256 5973d09cec59e0c6f8122f985843b3a2d7e21a3e76fb9ea5ba4a32e0b6c03c32
+MD5 94a47bed0b2f6abfd50edc7ec13d5e4e s3d-svn-9999.ebuild 1095
+RMD160 ae52f86830e1931f2ca591c80da2164aa9a7bd40 s3d-svn-9999.ebuild 1095
+SHA256 5973d09cec59e0c6f8122f985843b3a2d7e21a3e76fb9ea5ba4a32e0b6c03c32 s3d-svn-9999.ebuild 1095
+MISC ChangeLog 717 RMD160 732719801434d2f34762040a3d76224a376eafe9 SHA1 e3f6ae8c96e94d078c05f06a26c4671126bf2ae0 SHA256 50813962433038ee35016fdbd5a738f99f8ef5da1dbb6db01c35b258ca180587
+MD5 29def1ab7084d3f1a14f46b8e18774a9 ChangeLog 717
+RMD160 732719801434d2f34762040a3d76224a376eafe9 ChangeLog 717
+SHA256 50813962433038ee35016fdbd5a738f99f8ef5da1dbb6db01c35b258ca180587 ChangeLog 717
 MISC metadata.xml 239 RMD160 236f28d8249f562b764e2d854580d8301b150418 SHA1 76f167e3abff81e9535c16a637fd1e7f91d4fda3 SHA256 c0f08f1f0c1ce07df414cd87bf028a15cae639c89b2d636714d50d8aa77c370f
 MD5 261031c8b7aca6f50babf7e44b35deb1 metadata.xml 239
 RMD160 236f28d8249f562b764e2d854580d8301b150418 metadata.xml 239

Modified: trunk/extras/distro/gentoo/media-gfx/s3d-svn/s3d-svn-9999.ebuild
===================================================================
--- trunk/extras/distro/gentoo/media-gfx/s3d-svn/s3d-svn-9999.ebuild	2007-10-22 22:19:49 UTC (rev 807)
+++ trunk/extras/distro/gentoo/media-gfx/s3d-svn/s3d-svn-9999.ebuild	2007-10-22 22:20:01 UTC (rev 808)
@@ -1,6 +1,6 @@
 inherit subversion
 
-IUSE="gps doc"
+IUSE="gps doc xcomposite"
 
 ESVN_REPO_URI="http://svn.berlios.de/svnroot/repos/s3d/trunk"
 
@@ -38,7 +38,12 @@
 
 	doc? ( app-text/docbook-sgml-utils )
 	gps? ( sci-geosciences/gpsd )	
-
+	xcomposite? (
+		x11-libs/libXcomposite
+		x11-libs/libXdamage
+		x11-libs/libXfixes
+		x11-libs/libXrender
+	)
 	virtual/glut
 	"
 



From dotslash at mail.berlios.de  Tue Oct 23 14:46:52 2007
From: dotslash at mail.berlios.de (dotslash at BerliOS)
Date: Tue, 23 Oct 2007 14:46:52 +0200
Subject: [S3d-svn] r809 - in trunk/Documentation: libs3d libs3dw
Message-ID: <200710231246.l9NCkqK7008731@sheep.berlios.de>

Author: dotslash
Date: 2007-10-23 14:46:51 +0200 (Tue, 23 Oct 2007)
New Revision: 809

Modified:
   trunk/Documentation/libs3d/libs3d.docbook
   trunk/Documentation/libs3dw/libs3dw.docbook
Log:
- add some TODOs in the documentation

Modified: trunk/Documentation/libs3d/libs3d.docbook
===================================================================
--- trunk/Documentation/libs3d/libs3d.docbook	2007-10-22 22:20:01 UTC (rev 808)
+++ trunk/Documentation/libs3d/libs3d.docbook	2007-10-23 12:46:51 UTC (rev 809)
@@ -967,9 +967,16 @@
 </para>
 </sect2>
 
-
+<!-- TODO: 
+		- this is obsolete. update with s3d_import_model_file() ...
+		- add:  s3d_strlen()
+				s3d_vector_cross_product
+				s3d_angle_to_cam()
+				s3d_ignore_callback()
+				s3d_net_check()
+	-->
 <sect2>
-<title>s3d_import_3ds</title>
+<title>s3d_import_3ds</title>	
 <funcsynopsis>
 <funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
 <funcprototype>

Modified: trunk/Documentation/libs3dw/libs3dw.docbook
===================================================================
--- trunk/Documentation/libs3dw/libs3dw.docbook	2007-10-22 22:20:01 UTC (rev 808)
+++ trunk/Documentation/libs3dw/libs3dw.docbook	2007-10-23 12:46:51 UTC (rev 809)
@@ -1,4 +1,8 @@
 <?xml version="1.0" encoding="UTF-8" ?>
+<!-- TODO: 
+	add input, textbox, scrollbar types
+	s3dw_handle_info()
+-->
 <chapter id="libs3dw">
 <title>libs3wd - The S3D Widget Library</title>
 <sect1 id="using_3dw">



From dotslash at mail.berlios.de  Wed Oct 24 01:04:14 2007
From: dotslash at mail.berlios.de (dotslash at BerliOS)
Date: Wed, 24 Oct 2007 01:04:14 +0200
Subject: [S3d-svn] r810 - trunk
Message-ID: <200710232304.l9NN4Ek8016853@sheep.berlios.de>

Author: dotslash
Date: 2007-10-24 01:04:13 +0200 (Wed, 24 Oct 2007)
New Revision: 810

Modified:
   trunk/README
Log:
- add developers to team in readme


Modified: trunk/README
===================================================================
--- trunk/README	2007-10-23 12:46:51 UTC (rev 809)
+++ trunk/README	2007-10-23 23:04:13 UTC (rev 810)
@@ -85,10 +85,12 @@
 
 7. TEAM
 -------
+	Sven Eckelmann <ecsv at hrz.tu-chemnitz.de>
 	Mike Graenz <mog at users.berlios.de>
 	Andreas Langer <andreas_lbg at gmx.de>
 	Marek Lindner <lindner_marek at yahoo.de>
 	Andreas Kohn <andreas at syndrom23.de>
+	Timo Schneider <timos at hrz.tu-chemnitz.de>
 	Christiane Weidauer <yd at freakkind.de>
 	Simon Wunderlich <dotslash at packetmixer.de>
 	



From dotslash at mail.berlios.de  Wed Oct 24 01:04:52 2007
From: dotslash at mail.berlios.de (dotslash at BerliOS)
Date: Wed, 24 Oct 2007 01:04:52 +0200
Subject: [S3d-svn] r811 - in trunk/Documentation: libs3d libs3dw
Message-ID: <200710232304.l9NN4q16017962@sheep.berlios.de>

Author: dotslash
Date: 2007-10-24 01:04:51 +0200 (Wed, 24 Oct 2007)
New Revision: 811

Modified:
   trunk/Documentation/libs3d/libs3d.docbook
   trunk/Documentation/libs3dw/libs3dw.docbook
Log:
- work on TODOs in the docbook


Modified: trunk/Documentation/libs3d/libs3d.docbook
===================================================================
--- trunk/Documentation/libs3d/libs3d.docbook	2007-10-23 23:04:13 UTC (rev 810)
+++ trunk/Documentation/libs3d/libs3d.docbook	2007-10-23 23:04:51 UTC (rev 811)
@@ -967,51 +967,25 @@
 </para>
 </sect2>
 
-<!-- TODO: 
-		- this is obsolete. update with s3d_import_model_file() ...
-		- add:  s3d_strlen()
-				s3d_vector_cross_product
-				s3d_angle_to_cam()
-				s3d_ignore_callback()
-				s3d_net_check()
-	-->
-<sect2>
-<title>s3d_import_3ds</title>	
+<sect2 id="s3d_import_model_file">
+<title>s3d_import_model_file</title>	
 <funcsynopsis>
 <funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
 <funcprototype>
-<funcdef>int <function>s3d_import_3ds</function></funcdef>
+<funcdef>int <function>s3d_import_model_file</function></funcdef>
 <paramdef>
-char *<parameter>buf</parameter>
+		char *<parameter>fname</parameter>
 </paramdef>
 </funcprototype>
 </funcsynopsis>
 <para>
-Imports a 3ds-file from memory (assuming that you have already loaded the 3ds-file and it's located at *buf).
+		Imports an 3d object file and returns the object number. Quite a number of formats are supported, like 3D Studio (.3ds, .prj), Lightwave (.lw, .lwb, .lwo), Quake Models (.md3),
+		or simply everything <ulink url="http://automagically.de/?g3dviewer">libg3d</ulink> supports. :)
 </para>
 <warning><para>Of course, you won't forget to <link linkend="s3d_flags_on">toggle</link> it <link linkend="S3D_OF_VISIBLE">visible</link>, won't you?</para></warning>
 </sect2>
 
 
-<sect2>
-<title>s3d_import_3ds_file</title>
-<funcsynopsis>
-<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
-<funcprototype>
-<funcdef>int <function>s3d_import_3ds_file</function></funcdef>
-<paramdef>
-char *<parameter>fname</parameter>
-</paramdef>
-</funcprototype>
-</funcsynopsis>
-<para>
-Opens the 3ds file referenced by 3ds. The function will also look in your object directories (maybe /usr/share/s3d, depending
-on your installation), so you can also use relative paths.
-</para>
-<warning><para>Of course, you won't forget to <link linkend="s3d_flags_on">toggle</link> it <link linkend="S3D_OF_VISIBLE">visible</link>, won't you?</para></warning>
-</sect2>
-
-
 <sect2 id="s3d_select_font">
 <title>s3d_select_font</title>
 <funcsynopsis>
@@ -1061,6 +1035,24 @@
 </programlisting>
 </sect2>
 
+<sect2 id="s3d_strlen">
+<title>s3d_strlen</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>float <function>s3d_strlen</function></funcdef>
+<paramdef>
+char *<parameter>str</parameter>,
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+		Returns the length of the string if it were rendered with the currently <link linkend="s3d_select_font">selected font</link>.
+		That might be useful to estimate the size used for a text and render the background or bounding box before inserting the text.
+
+</para>
+</sect2>
+
 <sect2>
 <title>s3d_open_file</title>
 <funcsynopsis>
@@ -1295,6 +1287,25 @@
 
 
 <sect2>
+<title>s3d_ignore_callback</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>void <function>s3d_ignore_callback</function></funcdef>
+<paramdef>
+unsigned char <parameter>event</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+Sets the callback on ignore, that means it won't be queued up for later use. 
+An incoming event of this type will simply be skipped.
+
+</para>
+</sect2>
+
+
+<sect2>
 <title>s3d_clear_callback</title>
 <funcsynopsis>
 <funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
@@ -1410,6 +1421,26 @@
 </sect2>
 
 <sect2>
+<title>s3d_vector_cross_product</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>float <function>s3d_vector_cross_product</function></funcdef>
+<paramdef>
+float <parameter>vector1</parameter>[],
+float <parameter>vector2</parameter>[]
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+Calculates and returns the cross product of vector1 and vector2.
+All vectors should have the format  float[3].
+More info <ulink url="http://en.wikipedia.org/wiki/Vector_%28spatial%29#Cross_product">on wikipedia</ulink>.
+</para>
+</sect2>
+
+
+<sect2>
 <title>s3d_vector_angle</title>
 <funcsynopsis>
 <funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
@@ -1430,6 +1461,26 @@
 
 
 <sect2>
+<title>s3d_angle_to_cam</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>float <function>s3d_angle_to_cam</function></funcdef>
+<paramdef>
+float <parameter>obj_pos</parameter>[],
+float <parameter>cam_pos</parameter>[]
+float *<parameter>angle_rad</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+Given obj_pos and cam_pos in the format float[3], angle_rad about which angle the object should be rotated around the y-axis 
+so that it faces the camera. This might become handy if you have some text floating in space and want it to face the camera.
+</para>
+</sect2>
+
+
+<sect2>
 <title>s3d_mcp_focus</title>
 <funcsynopsis>
 <funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
@@ -1446,6 +1497,23 @@
 </para>
 </sect2>
 
+<sect2>
+<title>s3d_net_check</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3d.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>int <function>s3d_net_check</function></funcdef>
+<paramdef>
+		void
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+		This functions is for programs which do not employ a mainloop, hence they need to check 
+		for new events on their own. Programs like these must make sure to call this function
+		from time to time to convince the server that they did not freeze or bail out.
+</para>
+</sect2>
 
 </sect1>
 

Modified: trunk/Documentation/libs3dw/libs3dw.docbook
===================================================================
--- trunk/Documentation/libs3dw/libs3dw.docbook	2007-10-23 23:04:13 UTC (rev 810)
+++ trunk/Documentation/libs3dw/libs3dw.docbook	2007-10-23 23:04:51 UTC (rev 811)
@@ -1,8 +1,4 @@
 <?xml version="1.0" encoding="UTF-8" ?>
-<!-- TODO: 
-	add input, textbox, scrollbar types
-	s3dw_handle_info()
--->
 <chapter id="libs3dw">
 <title>libs3wd - The S3D Widget Library</title>
 <sect1 id="using_3dw">
@@ -127,6 +123,119 @@
 </para>
 </sect2>
 
+<sect2 id="s3dw_textbox_new">
+<title>s3dw_textbox_new</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3dw.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>s3dw_textbox *<function>s3dw_textbox_new</function></funcdef>
+<paramdef>
+s3dw_surface *<parameter>surface</parameter>,
+char         *<parameter>text</parameter>,
+float		  <parameter>posx</parameter>,
+float		  <parameter>posy</parameter>,
+float		  <parameter>width</parameter>,
+float		  <parameter>height</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+		Creates a new textbox on the <link linkend="s3dw_surface">surface</link>, 
+		with "text" written on it and the upper left 
+		corner at (posx,posy) on the <link linkend="s3dw_surface">surface</link>. 
+		Width and height define the size of the textbox including scrollbars which
+		are rendered around the textfield.
+</para>
+<para>
+		See <link linkend="s3dw_textbox">s3dw_textbox</link> for information about callbacks which may be defined.
+</para>
+</sect2>
+
+<sect2 id="s3dw_textbox_scrollup">
+<title>s3dw_textbox_scrollup</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3dw.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>s3dw_textbox *<function>s3dw_textbox_scrollup</function></funcdef>
+<paramdef>
+s3dw_textbox *<parameter>textbox</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+		Scrolls the text in the textbox up by one line, if possible.
+</para>
+</sect2>
+
+<sect2 id="s3dw_textbox_scrolldown">
+<title>s3dw_textbox_scrolldown</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3dw.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>s3dw_textbox *<function>s3dw_textbox_scrolldown</function></funcdef>
+<paramdef>
+s3dw_textbox *<parameter>textbox</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+		Scrolls the text in the textbox down by one line, if possible.
+</para>
+</sect2>
+
+<sect2 id="s3dw_textbox_scrollleft">
+<title>s3dw_textbox_scrollleft</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3dw.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>s3dw_textbox *<function>s3dw_textbox_scrollleft</function></funcdef>
+<paramdef>
+s3dw_textbox *<parameter>textbox</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+		Scrolls the text in the textbox to the left by one character, if possible.
+</para>
+</sect2>
+
+<sect2 id="s3dw_textbox_scrollright">
+<title>s3dw_textbox_scrollright</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3dw.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>s3dw_textbox *<function>s3dw_textbox_scrollright</function></funcdef>
+<paramdef>
+s3dw_textbox *<parameter>textbox</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+		Scrolls the text in the textbox to the right by one character, if possible.
+</para>
+</sect2>
+
+<sect2 id="s3dw_textbox_scrollto">
+<title>s3dw_textbox_scrollto</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3dw.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>s3dw_textbox *<function>s3dw_textbox_scrollto</function></funcdef>
+<paramdef>
+s3dw_textbox *<parameter>textbox</parameter>,
+int <parameter>x</parameter>,
+int <parameter>y</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+		Scrolls the text in the textbox so that the character in row y, column x is in the
+		top left corner of the textbox.
+</para>
+</sect2>
+
+
+
 <sect2 id="s3dw_getroot">
 <title>s3dw_getroot</title>
 <funcsynopsis>
@@ -187,6 +296,41 @@
 </para>
 </sect2>
 
+<sect2 id="s3dw_label_change_text">
+<title>s3dw_label_change_text</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3dw.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>void <function>s3dw_label_change_text</function></funcdef>
+<paramdef>
+		s3dw_label *<parameter>label</parameter>,
+		char *<parameter>text</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+		Change the text in the referenced <link linkend="s3dw_label">label</link> to the specified text.
+</para>
+</sect2>
+
+<sect2 id="s3dw_textbox_change_text">
+<title>s3dw_textbox_change_text</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3dw.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>void <function>s3dw_textbox_change_text</function></funcdef>
+<paramdef>
+		s3dw_textbox *<parameter>textbox</parameter>,
+		char *<parameter>text</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+		Change the text in the referenced <link linkend="s3dw_textbox">textbox</link> to the specified text.
+</para>
+</sect2>
+
+
 <sect2 id="s3dw_delete">
 <title>s3dw_delete</title>
 <funcsynopsis>
@@ -322,6 +466,23 @@
 </programlisting>
 </sect2>
 
+<sect2 id="s3dw_object_info">
+<title>s3dw_object_info</title>
+<funcsynopsis>
+<funcsynopsisinfo><![CDATA[#include <s3dw.h>]]></funcsynopsisinfo>
+<funcprototype>
+<funcdef>void <function>s3dw_object_info</function></funcdef>
+<paramdef>
+		struct s3d_evt *<parameter>event</parameter>
+</paramdef>
+</funcprototype>
+</funcsynopsis>
+<para>
+		This can be used to let s3dw handle S3D_EVENT_OBJ_INFO-events. With this,
+		s3dw can consider the camera position and makes things like following the 
+		camera possible.
+</para>
+</sect2>
 
 <sect2 id="s3dw_ani_mate">
 <title>s3dw_ani_mate</title>
@@ -376,6 +537,7 @@
 		float        width,height;  /* width and height of the widget, outer size */
 		unsigned long oid;          /* the main object which is used for transformations etc ...*/
 		/* public */
+		void  *ptr;   				/* a pointer to a user structure, to use in callbacks etc */
 		float        x,y,z;         /* position, relative to the surface usually */
 		float        s;             /* scale factor */
 		float        rx,ry,rz;      /* rotation around the axis */
@@ -400,8 +562,12 @@
 		This is the most basic widget type, it contains all the "general" widget information. If you want to move a widget, you'd
 		change x,y,z,s and rx,ry,rz and call <link linkend="s3dw_moveit">s3dw_moveit</link> to turn your action reality. Every other
 		widget has this type as first entry, so a simple typecast to <emphasis>s3dw_widget</emphasis> will give you the widgets "general"
-		information. For typecast, you may use S3DWIDGET()
+		information. For typecast, you may use S3DWIDGET().
 </para>
+<para>
+		The pointer ptr allows linking to user-specific datastructures. That comes in handy if the widget is called back by an event, 
+		and the program must now find out on which data the user reacted.
+</para>
 </sect2>
 
 <sect2 id="s3dw_button">
@@ -443,7 +609,50 @@
 </para>
 </sect2>
 
+<sect2 id="s3dw_textbox">
+<title>s3dw_textbox</title>
+<programlisting>
+typedef struct _s3dw_textbox     s3dw_textbox;
+struct _s3dw_textbox {
+    /* private */
+	<link linkend="s3dw_widget">s3dw_widget</link>      widget;
+	<link linkend="s3dw_widget">s3dw_scrollbar</link>      *scroll_vertical, *scroll_horizontal;
+	char            *text;
+	int				n_lineoids, *p_lineoids;
+	int 			window_x, window_y;
+	/* public */
+	<link linkend="s3dw_callback">s3dw_callback</link>    onclick;
+};
+</programlisting>
+<para>
+	A textbox shows some text with scrollbars to scroll around. It can currently only react to a click event.
+</para>
+</sect2>
 
+<sect2 id="s3dw_scrollbar">
+<title>s3dw_scrollbar</title>
+<programlisting>
+typedef struct _s3dw_scrollbar     s3dw_scrollbar;
+struct _s3dw_scrollbar {
+    /* private */
+	<link linkend="s3dw_widget">s3dw_widget</link>      widget;
+	float			pos, max;
+	int				type;  /* 0 = horizontal, 1 = vertical */
+	int 			loid, roid, baroid;
+	/* public */
+	<link linkend="s3dw_callback">s3dw_callback</link>    lonclick, ronclick;
+};
+</programlisting>
+<para>
+		The Scrollbar should be placed around scrollable content. Currently only the
+		left and right icons are clickable (lonclick and ronclick callbacks), in 
+		vertical mode lonclick is the callback for the up icon, 
+		ronclick the callback for the down icon.
+</para>
+</sect2>
+
+
+
 <sect2 id="s3dw_label">
 <title>s3dw_label</title>
 <programlisting>



From dotslash at mail.berlios.de  Wed Oct 24 01:09:41 2007
From: dotslash at mail.berlios.de (dotslash at BerliOS)
Date: Wed, 24 Oct 2007 01:09:41 +0200
Subject: [S3d-svn] r812 - in trunk: . apps apps/meshs3d svnonly
	svnonly/testvis
Message-ID: <200710232309.l9NN9fk6023251@sheep.berlios.de>

Author: dotslash
Date: 2007-10-24 01:09:41 +0200 (Wed, 24 Oct 2007)
New Revision: 812

Added:
   trunk/svnonly/
   trunk/svnonly/comptest/
   trunk/svnonly/meshs3d_testdata/
   trunk/svnonly/olsrs3d/
   trunk/svnonly/testvis/
   trunk/svnonly/testvis/testvis.README
   trunk/svnonly/testvis/testvis.c
   trunk/svnonly/vistest/
Removed:
   trunk/apps/comptest/
   trunk/apps/meshs3d/testvis.README
   trunk/apps/meshs3d/testvis.c
   trunk/apps/olsrs3d/
Modified:
   trunk/CMakeLists.txt
   trunk/apps/CMakeLists.txt
Log:
- create svnonly and move some things into it which
  are not to be part of the release


Modified: trunk/CMakeLists.txt
===================================================================
--- trunk/CMakeLists.txt	2007-10-23 23:04:51 UTC (rev 811)
+++ trunk/CMakeLists.txt	2007-10-23 23:09:41 UTC (rev 812)
@@ -27,6 +27,7 @@
 include(ConfigureChecks.cmake)
 
 add_subdirectory(apps)
+add_subdirectory(svnonly)
 add_subdirectory(cmake)
 add_subdirectory(Documentation)
 add_subdirectory(example)

Modified: trunk/apps/CMakeLists.txt
===================================================================
--- trunk/apps/CMakeLists.txt	2007-10-23 23:04:51 UTC (rev 811)
+++ trunk/apps/CMakeLists.txt	2007-10-23 23:09:41 UTC (rev 812)
@@ -1,8 +1,6 @@
-add_subdirectory(comptest)
 add_subdirectory(dot_mcp)
 add_subdirectory(kism3d)
 add_subdirectory(meshs3d)
-add_subdirectory(olsrs3d)
 add_subdirectory(s3dfm)
 add_subdirectory(s3dosm)
 add_subdirectory(s3dvt)

Deleted: trunk/apps/meshs3d/testvis.README
===================================================================
--- trunk/apps/meshs3d/testvis.README	2007-10-23 23:04:51 UTC (rev 811)
+++ trunk/apps/meshs3d/testvis.README	2007-10-23 23:09:41 UTC (rev 812)
@@ -1,25 +0,0 @@
-handle only one connected client
-
-usage:
-
-add a dot draw line:
-
-testivs: add "104.65.0.42" -> "104.0.7.254"[label="4.03"];
-
-list lines (output index:line | active) :
-
-testivs: list
-1: "104.65.0.42" -> "104.0.7.254"[label="4.03"]; | 1
-
-remove line with index 1:
-testvis: rem 1
-
-deactive output of line with index 1:
-testvis: dea 1
-
-activate output of line with index 1:
-testvis: act 1
-
-quit testvis:
-testvis: quit
-

Deleted: trunk/apps/meshs3d/testvis.c
===================================================================
--- trunk/apps/meshs3d/testvis.c	2007-10-23 23:04:51 UTC (rev 811)
+++ trunk/apps/meshs3d/testvis.c	2007-10-23 23:09:41 UTC (rev 812)
@@ -1,223 +0,0 @@
-#include <stdio.h>
-#include <sys/types.h>
-#include <sys/socket.h>
-#include <stdlib.h>
-#include <string.h>
-#include <pthread.h>
-#include <sys/socket.h>
-#include <sys/types.h>
-#include <arpa/inet.h>
-#include <unistd.h>
-#include <signal.h>
-
-#define BUFFER_SIZE 1000
-#define LINE_SIZE 100
-
-struct data {
-	int index;
-	int active;
-	char line[LINE_SIZE];
-	struct data *next;
-};
-
-struct t_data {
-	struct data *head, *end;
-};
-
-
-void list_data(struct data *head, struct data *end)
-{
-	struct data *tmp;
-
-	for (tmp = head->next;tmp != end;tmp = tmp->next) {
-		printf("%d: %s | %d\n", tmp->index, tmp->line, tmp->active);
-	}
-}
-
-void rem_data(int index, struct data *head, struct data *end)
-{
-	struct data *tmp, *prev = head;
-
-	for (tmp = head->next;tmp != end;prev = tmp, tmp = tmp->next) {
-		if (tmp->index == index)
-			break;
-	}
-
-	if (tmp != end) {
-
-		prev->next = tmp->next;
-
-		printf("remove index %d\n", tmp->index);
-		free(tmp);
-	} else {
-		printf("index not found\n");
-	}
-	return;
-}
-
-void dea_data(int index, struct data *head, struct data *end)
-{
-	struct data *tmp;
-
-	for (tmp = head->next;tmp != end; tmp = tmp->next) {
-		if (tmp->index == index)
-			break;
-	}
-
-	if (tmp != end && tmp != head) {
-		tmp->active = 0;
-	}
-	return;
-}
-
-void act_data(int index, struct data *head, struct data *end)
-{
-	struct data *tmp;
-
-	for (tmp = head->next;tmp != end; tmp = tmp->next) {
-		if (tmp->index == index)
-			break;
-	}
-
-	if (tmp != end && tmp != head) {
-		tmp->active = 1;
-	}
-	return;
-}
-
-static void sig(int signr)
-{
-	return;
-}
-
-void *server(void *args)
-{
-	struct t_data *t = (struct t_data*)args;
-	int listen_fd, yes = 1;
-	struct sockaddr_in sock, client;
-	struct data *tmp;
-
-	int sock2;
-	socklen_t len;
-
-	char buffer[2000];
-	char start[] = "digraph topology\n{\n";
-	char end[] = "}\n";
-	int index;
-
-	signal(SIGPIPE, sig);
-
-	listen_fd = socket(PF_INET, SOCK_STREAM, 0);
-	setsockopt(listen_fd, SOL_SOCKET, SO_REUSEADDR, &yes, sizeof(int));
-
-	memset((char *) &sock, 0, sizeof(sock));
-	sock.sin_family = AF_INET;
-	sock.sin_addr.s_addr = htonl(INADDR_ANY);
-	sock.sin_port = htons(2004);
-
-	bind(listen_fd, (struct sockaddr *) &sock, sizeof(sock));
-	listen(listen_fd, 1);
-
-	len = sizeof(client);
-
-	while (1) {
-
-		sock2 = accept(listen_fd, (struct sockaddr*) & client, &len);
-
-		while (1) {
-
-			memset(buffer, 0, 2000);
-			strcat(buffer, start);
-			index = strlen(start);
-
-			for (tmp = t->head->next;tmp != t->end;tmp = tmp->next) {
-
-				if (!tmp->active)
-					continue;
-				strcat(&buffer[index], tmp->line);
-				index += strlen(tmp->line);
-				strcat(&buffer[index], "\n");
-				index++;
-
-			}
-
-			strcat(&buffer[index], end);
-			buffer[index+2] = 0;
-			if (send(sock2, buffer, strlen(buffer), 0) < 1)
-				break;
-
-			sleep(3);
-
-		}
-	}
-
-	return NULL;
-}
-
-int main()
-{
-	char buffer[BUFFER_SIZE];
-	char *tmp_buffer;
-	struct data *head, *z, *t;
-	static int index = 0;
-	struct t_data t_dat;
-	pthread_t thread;
-
-	head = malloc(sizeof(*head));
-	z = malloc(sizeof(*z));
-
-	head->next = z;
-
-	t_dat.head = head;
-	t_dat.end = z;
-	pthread_create(&thread, NULL, server, &t_dat);
-	pthread_detach(thread);
-	printf("\ntestivs: ");
-
-	while (fgets(buffer, BUFFER_SIZE, stdin)) {
-
-		if ((tmp_buffer = strstr(buffer, "add")) != NULL) {
-			tmp_buffer[strlen(tmp_buffer) - 1] = 0;
-			tmp_buffer += 4;
-			t = malloc(sizeof(*t));
-			snprintf(t->line, LINE_SIZE, tmp_buffer);
-			t->index = ++index;
-			t->active = 1;
-			t->next = head->next;
-			head->next = t;
-		} else if ((tmp_buffer = strstr(buffer, "list")) != NULL) {
-
-			list_data(head, z);
-
-		} else if ((tmp_buffer = strstr(buffer, "rem")) != NULL) {
-
-			tmp_buffer[strlen(tmp_buffer) - 1] = 0;
-			tmp_buffer += 4;
-			rem_data(atoi(tmp_buffer), head, z);
-
-		} else if ((tmp_buffer = strstr(buffer, "dea")) != NULL) {
-
-			tmp_buffer[strlen(tmp_buffer) - 1] = 0;
-			tmp_buffer += 4;
-			dea_data(atoi(tmp_buffer), head, z);
-
-		} else if ((tmp_buffer = strstr(buffer, "act")) != NULL) {
-
-			tmp_buffer[strlen(tmp_buffer) - 1] = 0;
-			tmp_buffer += 4;
-			act_data(atoi(tmp_buffer), head, z);
-
-		} else if ((tmp_buffer = strstr(buffer, "quit")) != NULL) {
-
-			break;
-
-		} else
-
-			printf("command not found\n");
-
-		printf("testivs: ");
-
-	}
-
-	return 0;
-}

Copied: trunk/svnonly/comptest (from rev 809, trunk/apps/comptest)

Copied: trunk/svnonly/olsrs3d (from rev 809, trunk/apps/olsrs3d)

Copied: trunk/svnonly/testvis/testvis.README (from rev 809, trunk/apps/meshs3d/testvis.README)

Copied: trunk/svnonly/testvis/testvis.c (from rev 809, trunk/apps/meshs3d/testvis.c)



From lazhur at mail.berlios.de  Wed Oct 24 10:59:46 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Wed, 24 Oct 2007 10:59:46 +0200
Subject: [S3d-svn] r813 - trunk/svnonly
Message-ID: <200710240859.l9O8xkvY003321@sheep.berlios.de>

Author: lazhur
Date: 2007-10-24 10:59:46 +0200 (Wed, 24 Oct 2007)
New Revision: 813

Added:
   trunk/svnonly/CMakeLists.txt
Log:
Added folders under svnonly to buildsystem


Added: trunk/svnonly/CMakeLists.txt
===================================================================
--- trunk/svnonly/CMakeLists.txt	2007-10-23 23:09:41 UTC (rev 812)
+++ trunk/svnonly/CMakeLists.txt	2007-10-24 08:59:46 UTC (rev 813)
@@ -0,0 +1,3 @@
+add_subdirectory(comptest)
+add_subdirectory(olsrs3d)
+add_subdirectory(testvis)



From lazhur at mail.berlios.de  Wed Oct 24 10:59:51 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Wed, 24 Oct 2007 10:59:51 +0200
Subject: [S3d-svn] r814 - trunk/svnonly/testvis
Message-ID: <200710240859.l9O8xp7V003357@sheep.berlios.de>

Author: lazhur
Date: 2007-10-24 10:59:51 +0200 (Wed, 24 Oct 2007)
New Revision: 814

Added:
   trunk/svnonly/testvis/CMakeLists.txt
Log:
Build testvis with cmake


Added: trunk/svnonly/testvis/CMakeLists.txt
===================================================================
--- trunk/svnonly/testvis/CMakeLists.txt	2007-10-24 08:59:46 UTC (rev 813)
+++ trunk/svnonly/testvis/CMakeLists.txt	2007-10-24 08:59:51 UTC (rev 814)
@@ -0,0 +1,14 @@
+project(testvis C)
+
+if (PTHREADS_FOUND)
+	add_executable(testvis testvis.c)
+	target_link_libraries(testvis ${PTHREADS_LIBRARIES})
+
+	# install 
+	install(TARGETS testvis RUNTIME DESTINATION bin)
+else (PTHREADS_FOUND)
+	PkgStatus_Later("pthreads")
+	
+	# print late status
+	Collected_PkgStatus("testvis")
+endif (PTHREADS_FOUND)



From dotslash at mail.berlios.de  Wed Oct 24 15:26:11 2007
From: dotslash at mail.berlios.de (dotslash at BerliOS)
Date: Wed, 24 Oct 2007 15:26:11 +0200
Subject: [S3d-svn] r815 - trunk/apps/meshs3d
Message-ID: <200710241326.l9ODQBNC008764@sheep.berlios.de>

Author: dotslash
Date: 2007-10-24 15:26:11 +0200 (Wed, 24 Oct 2007)
New Revision: 815

Modified:
   trunk/apps/meshs3d/main.c
   trunk/apps/meshs3d/meshs3d.h
   trunk/apps/meshs3d/process.c
Log:
- astyle meshs3d


Modified: trunk/apps/meshs3d/main.c
===================================================================
--- trunk/apps/meshs3d/main.c	2007-10-24 08:59:51 UTC (rev 814)
+++ trunk/apps/meshs3d/main.c	2007-10-24 13:26:11 UTC (rev 815)
@@ -154,10 +154,10 @@
 			while (NULL != (tmp_hashit = hash_iterate(node_hash, tmp_hashit))) {
 				tmp_node = (struct node *) tmp_hashit->bucket->data;
 
-				
+
 				if ( node != tmp_node ) {
-					ip[0] = max(node->ip,tmp_node->ip);
-					ip[1] = min(node->ip,tmp_node->ip);
+					ip[0] = max(node->ip, tmp_node->ip);
+					ip[1] = min(node->ip, tmp_node->ip);
 
 					if (NULL != (con = hash_find(con_hash, ip))) {
 						s3d_del_object(con->obj_id);

Modified: trunk/apps/meshs3d/meshs3d.h
===================================================================
--- trunk/apps/meshs3d/meshs3d.h	2007-10-24 08:59:51 UTC (rev 814)
+++ trunk/apps/meshs3d/meshs3d.h	2007-10-24 13:26:11 UTC (rev 815)
@@ -38,7 +38,7 @@
 	float etx2_sqrt;     /* sqrt etx of right olsr node */
 	int obj_id;        /* id of connection object in s3d */
 	int color;
-	int old;			/* check if the node has been announced in the last block */
+	int old;   /* check if the node has been announced in the last block */
 	float rgb;
 };
 

Modified: trunk/apps/meshs3d/process.c
===================================================================
--- trunk/apps/meshs3d/process.c	2007-10-24 08:59:51 UTC (rev 814)
+++ trunk/apps/meshs3d/process.c	2007-10-24 13:26:11 UTC (rev 815)
@@ -378,13 +378,13 @@
 			while (NULL != (hashit = hash_iterate(con_hash, hashit))) {
 				con = (struct node_con *) hashit->bucket->data;
 				if (con->old) {
-					if (con->obj_id != -1) 
+					if (con->obj_id != -1)
 						s3d_del_object(con->obj_id);
 					con->obj_id = -1;
 					hash_remove_bucket(con_hash, hashit);
 				}
-				con->old = 1;	/* set con on old. if it's still old in the next iteration, 
-								   we will remove it. */
+				con->old = 1; /* set con on old. if it's still old in the next iteration,
+           we will remove it. */
 			}
 
 		}



From dotslash at mail.berlios.de  Wed Oct 24 15:44:50 2007
From: dotslash at mail.berlios.de (dotslash at BerliOS)
Date: Wed, 24 Oct 2007 15:44:50 +0200
Subject: [S3d-svn] r816 - trunk
Message-ID: <200710241344.l9ODioT5009675@sheep.berlios.de>

Author: dotslash
Date: 2007-10-24 15:44:49 +0200 (Wed, 24 Oct 2007)
New Revision: 816

Modified:
   trunk/ChangeLog
Log:
- add release message into changelog


Modified: trunk/ChangeLog
===================================================================
--- trunk/ChangeLog	2007-10-24 13:26:11 UTC (rev 815)
+++ trunk/ChangeLog	2007-10-24 13:44:49 UTC (rev 816)
@@ -1,3 +1,27 @@
+(detailed ChangeLog can be generated with "svn log" in a subversion 
+Checkout. We will only give a brief summary of the changes here.)
+
+
+2007-10-?? Simon Wunderlich - <dotslash at packetmixer.de>
+	- Released S3D Version 0.2
+	- now using cmake instead of autohell, which seems to be faster,
+	  more configurable and at least comprehensible (Thanks to Sven 
+	  Eckelmann)
+	- meshs3d is a complete rewrite of olsrs3d, using faster 
+	  data structures and clean design (implented by Andreas Langer)
+	- s3dosm is a new program to navigate on openstreetmap maps.
+	  it has gps-support, superseding the old s3dgps which operated
+	  on bitmap map files.
+	- kism3d (implemented by Marek Lindner) visualizes the wireless 
+	  networks and works as a frontend to kismet
+	- texture support is now using mipmaps
+	- added a few widgets (textbox/scrollbars) 
+	- of course: fixed various bugs
+2006-09-19 Simon Wunderlich - <dotslash at packetmixer.de>
+	- Released S3D Version 0.1.1
+	- client is now libs3d
+	- added widget library libs3dw
+	- olsrs3d uses widgets for search input
 2006-03-19  Simon Wunderlich - <dotslash at packetmixer.de>
 	- FINALLY, PROUDLY PRESENTING: S3D VERSION 0.1!!!
 	- this changelog is pretty incomplete. Please use the



From dotslash at mail.berlios.de  Wed Oct 24 17:52:42 2007
From: dotslash at mail.berlios.de (dotslash at BerliOS)
Date: Wed, 24 Oct 2007 17:52:42 +0200
Subject: [S3d-svn] r817 - in trunk: . apps/s3dosm cmake/modules
Message-ID: <200710241552.l9OFqgwT022123@sheep.berlios.de>

Author: dotslash
Date: 2007-10-24 17:52:42 +0200 (Wed, 24 Oct 2007)
New Revision: 817

Added:
   trunk/cmake/modules/LateStatusPartial.cmake
Modified:
   trunk/ConfigureChecks.cmake
   trunk/apps/s3dosm/CMakeLists.txt
Log:
Warn about missing package for gps features in s3dosm

Modified: trunk/ConfigureChecks.cmake
===================================================================
--- trunk/ConfigureChecks.cmake	2007-10-24 13:44:49 UTC (rev 816)
+++ trunk/ConfigureChecks.cmake	2007-10-24 15:52:42 UTC (rev 817)
@@ -1,5 +1,6 @@
 include(LateErrors)
 include(LateStatus)
+include(LateStatusPartial)
 
 # find required lib and add include dir for FREETYPE
 find_package(FREETYPE)

Modified: trunk/apps/s3dosm/CMakeLists.txt
===================================================================
--- trunk/apps/s3dosm/CMakeLists.txt	2007-10-24 13:44:49 UTC (rev 816)
+++ trunk/apps/s3dosm/CMakeLists.txt	2007-10-24 15:52:42 UTC (rev 817)
@@ -12,8 +12,11 @@
 
 	if (GPS_FOUND)
 		target_link_libraries(s3dosm ${GPS_LIBRARIES})
+	else (GPS_FOUND)
+		PkgStatusPartial_Later("GPS support - libgps (pkg name: libgps-dev or gpsd)")
 	endif (GPS_FOUND)
 
+	Collected_PkgStatusPartial("s3dosm")
 	# install 
 	install(TARGETS s3dosm RUNTIME DESTINATION bin)
 else (LIBXML2_FOUND AND SQLITE3_FOUND)

Added: trunk/cmake/modules/LateStatusPartial.cmake
===================================================================
--- trunk/cmake/modules/LateStatusPartial.cmake	2007-10-24 13:44:49 UTC (rev 816)
+++ trunk/cmake/modules/LateStatusPartial.cmake	2007-10-24 15:52:42 UTC (rev 817)
@@ -0,0 +1,15 @@
+# Defines the following macros:
+#
+# PkgStatusPartial_Later(errmsg)
+# Collected_PkgStatusPartial(modulename)
+
+macro(PkgStatusPartial_Later _errmsg)
+	set(pgk_statuspartial "${pgk_status}\n\t${_errmsg}")
+endmacro(PkgStatusPartial_Later _errmsg)
+
+macro(Collected_PkgStatusPartial _modulename)
+	if (pgk_statuspartial)
+		message(STATUS "${_modulename} will be built without some features because of missing packages: ${pgk_statuspartial}\n\t"
+			"The exact names can differ depending on the distribution.")
+	endif (pgk_statuspartial)
+endmacro(Collected_PkgStatusPartial _modulename)



From dotslash at mail.berlios.de  Wed Oct 24 17:56:20 2007
From: dotslash at mail.berlios.de (dotslash at BerliOS)
Date: Wed, 24 Oct 2007 17:56:20 +0200
Subject: [S3d-svn] r818 - trunk
Message-ID: <200710241556.l9OFuKWi022329@sheep.berlios.de>

Author: dotslash
Date: 2007-10-24 17:56:19 +0200 (Wed, 24 Oct 2007)
New Revision: 818

Modified:
   trunk/CMakeLists.txt
   trunk/ChangeLog
Log:
- change release date to today
- change version to 0.2

Modified: trunk/CMakeLists.txt
===================================================================
--- trunk/CMakeLists.txt	2007-10-24 15:52:42 UTC (rev 817)
+++ trunk/CMakeLists.txt	2007-10-24 15:56:19 UTC (rev 818)
@@ -1,5 +1,5 @@
 project(s3d C)
-set(VERSION 0.1.1)
+set(VERSION 0.2)
 
 # we require cmake 2.4.4 or higher
 cmake_minimum_required(VERSION 2.4.4)

Modified: trunk/ChangeLog
===================================================================
--- trunk/ChangeLog	2007-10-24 15:52:42 UTC (rev 817)
+++ trunk/ChangeLog	2007-10-24 15:56:19 UTC (rev 818)
@@ -2,7 +2,7 @@
 Checkout. We will only give a brief summary of the changes here.)
 
 
-2007-10-?? Simon Wunderlich - <dotslash at packetmixer.de>
+2007-10-24 Simon Wunderlich - <dotslash at packetmixer.de>
 	- Released S3D Version 0.2
 	- now using cmake instead of autohell, which seems to be faster,
 	  more configurable and at least comprehensible (Thanks to Sven 



From dotslash at mail.berlios.de  Wed Oct 24 17:56:39 2007
From: dotslash at mail.berlios.de (dotslash at BerliOS)
Date: Wed, 24 Oct 2007 17:56:39 +0200
Subject: [S3d-svn] r819 - tags
Message-ID: <200710241556.l9OFudj5022413@sheep.berlios.de>

Author: dotslash
Date: 2007-10-24 17:56:38 +0200 (Wed, 24 Oct 2007)
New Revision: 819

Added:
   tags/s3d-0.2/
Log:
- tag version 0.2


Copied: tags/s3d-0.2 (from rev 818, trunk)



From dotslash at mail.berlios.de  Wed Oct 24 18:01:07 2007
From: dotslash at mail.berlios.de (dotslash at BerliOS)
Date: Wed, 24 Oct 2007 18:01:07 +0200
Subject: [S3d-svn] r820 - tags/s3d-0.2
Message-ID: <200710241601.l9OG17xN022810@sheep.berlios.de>

Author: dotslash
Date: 2007-10-24 18:01:07 +0200 (Wed, 24 Oct 2007)
New Revision: 820

Removed:
   tags/s3d-0.2/svnonly/
Modified:
   tags/s3d-0.2/CMakeLists.txt
Log:
- remove svnonly directory from 0.2 release


Modified: tags/s3d-0.2/CMakeLists.txt
===================================================================
--- tags/s3d-0.2/CMakeLists.txt	2007-10-24 15:56:38 UTC (rev 819)
+++ tags/s3d-0.2/CMakeLists.txt	2007-10-24 16:01:07 UTC (rev 820)
@@ -27,7 +27,6 @@
 include(ConfigureChecks.cmake)
 
 add_subdirectory(apps)
-add_subdirectory(svnonly)
 add_subdirectory(cmake)
 add_subdirectory(Documentation)
 add_subdirectory(example)



From dotslash at mail.berlios.de  Wed Oct 24 18:59:25 2007
From: dotslash at mail.berlios.de (dotslash at BerliOS)
Date: Wed, 24 Oct 2007 18:59:25 +0200
Subject: [S3d-svn] r821 - trunk
Message-ID: <200710241659.l9OGxPH2002990@sheep.berlios.de>

Author: dotslash
Date: 2007-10-24 18:59:24 +0200 (Wed, 24 Oct 2007)
New Revision: 821

Modified:
   trunk/ChangeLog
Log:
- fix a typo in the changelog

Modified: trunk/ChangeLog
===================================================================
--- trunk/ChangeLog	2007-10-24 16:01:07 UTC (rev 820)
+++ trunk/ChangeLog	2007-10-24 16:59:24 UTC (rev 821)
@@ -8,7 +8,7 @@
 	  more configurable and at least comprehensible (Thanks to Sven 
 	  Eckelmann)
 	- meshs3d is a complete rewrite of olsrs3d, using faster 
-	  data structures and clean design (implented by Andreas Langer)
+	  data structures and clean design (implemented by Andreas Langer)
 	- s3dosm is a new program to navigate on openstreetmap maps.
 	  it has gps-support, superseding the old s3dgps which operated
 	  on bitmap map files.



From lazhur at mail.berlios.de  Thu Oct 25 00:33:45 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Thu, 25 Oct 2007 00:33:45 +0200
Subject: [S3d-svn] r822 - in trunk/extras/distro/gentoo/media-gfx/s3d: .
	files
Message-ID: <200710242233.l9OMXj1V006571@sheep.berlios.de>

Author: lazhur
Date: 2007-10-25 00:33:43 +0200 (Thu, 25 Oct 2007)
New Revision: 822

Added:
   trunk/extras/distro/gentoo/media-gfx/s3d/files/digest-s3d-0.2
   trunk/extras/distro/gentoo/media-gfx/s3d/s3d-0.2.ebuild
Modified:
   trunk/extras/distro/gentoo/media-gfx/s3d/ChangeLog
   trunk/extras/distro/gentoo/media-gfx/s3d/Manifest
Log:
Added gentoo ebuild for s3d-0.2


Modified: trunk/extras/distro/gentoo/media-gfx/s3d/ChangeLog
===================================================================
--- trunk/extras/distro/gentoo/media-gfx/s3d/ChangeLog	2007-10-24 16:59:24 UTC (rev 821)
+++ trunk/extras/distro/gentoo/media-gfx/s3d/ChangeLog	2007-10-24 22:33:43 UTC (rev 822)
@@ -1,5 +1,10 @@
 # ChangeLog for media-gfx/s3d
 
+*s3d-0.2 (25 Oct 2007)
+
+ 25 Oct 2006; Sven Eckelmann <sven.eckelmann at gmx.de> +s3d-0.2.ebuild
+ Updated to latest version
+
 *s3d-0.1.1 (25 Oct 2006)
 
   25 Oct 2006; Sven Eckelmann <sven.eckelmann at gmx.de> s3d-0.1.1.ebuild:

Modified: trunk/extras/distro/gentoo/media-gfx/s3d/Manifest
===================================================================
--- trunk/extras/distro/gentoo/media-gfx/s3d/Manifest	2007-10-24 16:59:24 UTC (rev 821)
+++ trunk/extras/distro/gentoo/media-gfx/s3d/Manifest	2007-10-24 22:33:43 UTC (rev 822)
@@ -1,12 +1,17 @@
 DIST s3d-0.1.1.tar.bz2 1737935 RMD160 88189600659dd4d184be044dd668597ab2b17334 SHA1 3765171848d519784a436468ac613c9bfe85c3ae SHA256 1e2be7c806deaaf07e7f00d018f6f08723a1b26332419a80e732c8b7a1a515e4
+DIST s3d-0.2.tar.bz2 1715297 RMD160 166ad7a3657916bdfda29e1b5de6a676449b76a4 SHA1 c288902d4b93180628a805ef00fd295eaabe2c88 SHA256 0f7db68fbd760b765e63f912391c99e674b8bf9c7425de4b6eb24d53f3a32e89
 EBUILD s3d-0.1.1.ebuild 831 RMD160 7ab28a5a7b10a86051ff35dec715524ddac33d98 SHA1 becb13dedb85a733431241c0985b285553b0df4b SHA256 661794ee708d800655fe6e4c568173d7c7f7996e7c1bda077d52028d88b9d841
 MD5 745d3278b3dc2e7ffa3e13fe8d670061 s3d-0.1.1.ebuild 831
 RMD160 7ab28a5a7b10a86051ff35dec715524ddac33d98 s3d-0.1.1.ebuild 831
 SHA256 661794ee708d800655fe6e4c568173d7c7f7996e7c1bda077d52028d88b9d841 s3d-0.1.1.ebuild 831
-MISC ChangeLog 148 RMD160 cb8db163c4842d0f8d8d4ad41ba7516765f1b0a3 SHA1 70661ac4033b04c51f6928f82d9903bfa86eb0b3 SHA256 e61b9d97b0c64076e833b27201c5eda91b02f5d885a37b5f4d005c03a44c405c
-MD5 31944463e2ea8d52f7172c7b838927be ChangeLog 148
-RMD160 cb8db163c4842d0f8d8d4ad41ba7516765f1b0a3 ChangeLog 148
-SHA256 e61b9d97b0c64076e833b27201c5eda91b02f5d885a37b5f4d005c03a44c405c ChangeLog 148
+EBUILD s3d-0.2.ebuild 952 RMD160 aaff9d97ab87ac49d57151d61b63a8bf2401a7e2 SHA1 17e1c5b1d36c415c74a8ab6e08085d17e393c5de SHA256 0de17aac96eabb657514209fd1aaebda0df86f1cbef56cf473abaa076f503474
+MD5 3fdbf6456ce8c49565c35a515a0d2eb6 s3d-0.2.ebuild 952
+RMD160 aaff9d97ab87ac49d57151d61b63a8bf2401a7e2 s3d-0.2.ebuild 952
+SHA256 0de17aac96eabb657514209fd1aaebda0df86f1cbef56cf473abaa076f503474 s3d-0.2.ebuild 952
+MISC ChangeLog 269 RMD160 a641084011215012185fc32525f40da6b1632c1f SHA1 b512e2389b04e048b7d683b0a1416f80a53d3435 SHA256 2eba9fc8b0f109bdcf26c1fb1ed44868a3d43f6d269c9b4a13f11c300a5a0399
+MD5 05e75cd56fedba5d551a4187070179a5 ChangeLog 269
+RMD160 a641084011215012185fc32525f40da6b1632c1f ChangeLog 269
+SHA256 2eba9fc8b0f109bdcf26c1fb1ed44868a3d43f6d269c9b4a13f11c300a5a0399 ChangeLog 269
 MISC metadata.xml 239 RMD160 236f28d8249f562b764e2d854580d8301b150418 SHA1 76f167e3abff81e9535c16a637fd1e7f91d4fda3 SHA256 c0f08f1f0c1ce07df414cd87bf028a15cae639c89b2d636714d50d8aa77c370f
 MD5 261031c8b7aca6f50babf7e44b35deb1 metadata.xml 239
 RMD160 236f28d8249f562b764e2d854580d8301b150418 metadata.xml 239
@@ -14,3 +19,6 @@
 MD5 423924e2e8645a03c8a35c37406b0700 files/digest-s3d-0.1.1 235
 RMD160 5fae00369c6a80caa87cabd4836537d213a68e0f files/digest-s3d-0.1.1 235
 SHA256 26e3661db664bbb79e6f5bb1b18e01f558f9ee4fe21e842351dc22629b0567a4 files/digest-s3d-0.1.1 235
+MD5 5b7e96796275ed1eac96754e64bdc7cb files/digest-s3d-0.2 229
+RMD160 8aa0410e944113dc421fa7f89f6f2b35651d44ac files/digest-s3d-0.2 229
+SHA256 02a2e5021f0f2b799d9cfc44878c8ca9cc34a9da091d2adc772bc3657076da9c files/digest-s3d-0.2 229

Added: trunk/extras/distro/gentoo/media-gfx/s3d/files/digest-s3d-0.2
===================================================================
--- trunk/extras/distro/gentoo/media-gfx/s3d/files/digest-s3d-0.2	2007-10-24 16:59:24 UTC (rev 821)
+++ trunk/extras/distro/gentoo/media-gfx/s3d/files/digest-s3d-0.2	2007-10-24 22:33:43 UTC (rev 822)
@@ -0,0 +1,3 @@
+MD5 1b3f844445526df15b407e8866190750 s3d-0.2.tar.bz2 1715297
+RMD160 166ad7a3657916bdfda29e1b5de6a676449b76a4 s3d-0.2.tar.bz2 1715297
+SHA256 0f7db68fbd760b765e63f912391c99e674b8bf9c7425de4b6eb24d53f3a32e89 s3d-0.2.tar.bz2 1715297

Added: trunk/extras/distro/gentoo/media-gfx/s3d/s3d-0.2.ebuild
===================================================================
--- trunk/extras/distro/gentoo/media-gfx/s3d/s3d-0.2.ebuild	2007-10-24 16:59:24 UTC (rev 821)
+++ trunk/extras/distro/gentoo/media-gfx/s3d/s3d-0.2.ebuild	2007-10-24 22:33:43 UTC (rev 822)
@@ -0,0 +1,51 @@
+IUSE="gps doc"
+
+SRC_URI="http://download.berlios.de/${PN}/${P}.tar.bz2"
+
+DESCRIPTION="a 3d network display server"
+HOMEPAGE="http://s3d.berlios.de/"
+
+LICENSE="GPL-2 LGPL"
+KEYWORDS="x86 amd64"
+SLOT="0"
+
+DEPEND="${RDEPEND}
+	sys-devel/flex
+	>=dev-db/sqlite-3
+	>=dev-util/cmake-2.4.4
+	"
+RDEPEND="!media-gfx/s3d-svn
+	>=media-libs/libsdl-1.2.7
+	>=media-libs/freetype-2
+	>=dev-libs/glib-2
+	dev-libs/libxml2
+	media-fonts/ttf-bitstream-vera
+	media-libs/fontconfig
+	>=media-libs/libg3d-0.0.6
+	media-libs/mesa
+
+	|| ( 	(
+			sys-libs/zlib
+			x11-libs/libX11
+			x11-libs/libXext
+			x11-libs/libXi
+			x11-libs/libXmu
+			x11-libs/libXt
+			x11-libs/libXtst )
+		virtual/x11 )
+
+	doc? ( app-text/docbook-sgml-utils )
+	gps? ( sci-geosciences/gpsd )	
+	virtual/glut
+	"
+
+src_compile() {
+	cmake -DCMAKE_INSTALL_PREFIX=/usr/ ${cmake_opts} || die "cmake failed"
+	emake || die "emake failed"
+}
+
+src_install() {
+	emake DESTDIR="${D}" install || die
+	dodoc ChangeLog README TODO
+}
+



From dotslash at mail.berlios.de  Thu Oct 25 23:46:36 2007
From: dotslash at mail.berlios.de (dotslash at BerliOS)
Date: Thu, 25 Oct 2007 23:46:36 +0200
Subject: [S3d-svn] r823 - trunk/svnonly
Message-ID: <200710252146.l9PLka0O004722@sheep.berlios.de>

Author: dotslash
Date: 2007-10-25 23:46:35 +0200 (Thu, 25 Oct 2007)
New Revision: 823

Added:
   trunk/svnonly/ROADMAP
Log:
- add roadmap to svn


Added: trunk/svnonly/ROADMAP
===================================================================
--- trunk/svnonly/ROADMAP	2007-10-24 22:33:43 UTC (rev 822)
+++ trunk/svnonly/ROADMAP	2007-10-25 21:46:35 UTC (rev 823)
@@ -0,0 +1,99 @@
+(please excuse that this document is german only, but this is for internal use
+ and all our current developers are german. If you're interested in it anyways,
+ don't hesitate to drop me a mail.)
+
+===============================================================================
+=== S3D 0.3 ===================================================================
+
+Bemerkung:
+
+Das ganze ist eine grobe Zusammenfassung der Ideen die ich mir fuers naechste 
+Release vorstelle. Fuer jegliche Kommentare, Kritik oder weitere Ideen waere
+ich aeusserst dankbar. :)
+Bitte benutzt diese ROADMAP wie ein Wiki, d.h. Anmerkungen, Bookmarks etc 
+koennen auch gleich hier mit rein.
+
+Um eine Koexistenz zwischen 3D und 2D-Programmen zu gewaehrleisten muessen 
+gewoehnliche X11-Programme ohne Nachteile oder Einschraenkungen nutzbar sein, 
+um Kompatibilitaet zu schaffen und auf dieser Basis aufbauen zu koennen.
+
+Daher ist das Hauptziel fuer 0.3 eine transparente (im Sinne von nicht 
+spuerbare) Schicht zwischen X11-Desktop und S3D zu ziehen. Der Desktop soll
+wie gewohnt bedienbar sein, in Wirklichkeit ist er aber nur einen Teil der 
+3D-Welt in die (bei Bedarf) umgeschalten werden kann. Das eroeffnet natuerlich
+auch neue GUI-Moeglichkeiten (z.B. Expose etc).
+
+Um das ganze durchzufuehren wuerde ich 3 grosesere Schritte vorschlagen, die 
+einigermassen unabhaengig voneinander sind:
+
+1. Threads im Server
+   --------------------
+   Im Moment hat der Server ein recht plumpes Design: Es gibt eine 
+   Hauptschleife, in der nacheinander Netzwerkverbindungen (also 
+   Client-Requests) geprueft werden, ein neuer Frame gezeichnet wird und 
+   Usereingaben (Mouse/Tastatur) gecheckt werden. Falls aber z.B. keine
+   Client-Daten kamen und das Bild unveraendert ist, waere es unnoetig
+   einen neuen Frame zu zeichnen. Ausserdem muss explizit darauf geachtet 
+   werden dass nicht die ganze Zeit nur gelesen wird (sodass keine Zeit
+   zum Zeichnen uebrig bleibt) etc.
+
+   Daher sollen diese unabhaengigen Tasks in Threads unterteilt werden
+   und parallel abgearbeitet werden. Das bedeutet natuerlich dass die
+   Strukturen irgendwie gelockt werden muessen, ohne dass Deadlocks auftreten
+   koennen. Idealerweise haette dann jeder Client seinen eigenen Thread
+   in dem er auch blockierend auf Eingabedaten warten kann, und der Graphik-
+   thread wird nur aufgeweckt wenn es etwas zu zeichnen gibt.
+
+2. Shared Memory Zugriff auf Texturen
+   -------------------------------------
+   Texturen werden an der Server gesendet indem sie ins Protokoll verpackt 
+   werden und auf der anderen Seite wieder ausgepackt werden. Dieser Overhead
+   ist unnoetig wenn Server und Client auf derselben Maschine sind, denn dann
+   koennte der Client direkt in einen gemeinsamen Texturespeicher schreiben
+   und wenn er fertig ist dem Server ein "Updated"-Event schicken, woraufhin
+   dieser dann seine Textur erneuert.
+   
+3. Aufbau eines Composite-Managers als MCP
+   -----------------------------------------
+   Um die 2D-Fenster in den 3D-Bereich zu bringen koennen wir die proof-of-
+   concept-Implementation comptest zu einem vollstaendigen MCP/Composite 
+   Manager umwandeln. Dafuer muessen alle moeglichen X11-Window-Events 
+   (Window create/resize/destroy) verarbeitet werden und die Fenster 
+   entsprechend dargestellt werden und die Kamera an der richtigen Position
+   gehalten werden. Man koennte vorerst einen 2D-Desktop-Modus und einen
+   3D-Modus haben, zwischen denen gewechselt werden kann.
+
+Nice to have
+------------
+Noch ein paar Erweiterungen, die ganz nett waeren, aber jetzt nicht so 
+richtig auf die Roadmap draufgepasst haben. :)
+
+Sortieren fuer Alpha-Transparenz
+-----------------------------------
+- fuer Transparenz-Effekte muss sich eigentlich selbst um Tiefensortierung 
+  gekuemmert werden,  d.h. das Bild muss von hinten nach vorn aufgebaut werden.
+  S3D ignoriert diese Tatsache derzeit einfach und malt die Objekte einfach
+  irgendwie. :)
+  Ein erster Ansatz waere vor dem Zeichnen die Objekte (mal abgesehen von den
+  Polygonen die sie enthalten) nach ihrer Entfernung von der Kamera zu 
+  sortieren.
+
+Wii-Controller
+----------------
+- eigentlich das Top-Eingabergeraet fuer 3D-Kram, und auch billig. ^^
+  Es gibt das library libcwiid, was auch von wminput verwendet wird
+  und scheinbar ganz gut funktioniert. In S3D gibt es virtuelle 
+  Devices (z.B. Pointer), die man darueber steuern koennte.
+
+ http://abstrakraft.org/cwiid/wiki/libcwiid
+
+Mehrere Displays
+------------------
+- Wenn man mehrere Displays in den Raum stellt koennte man die Ausrichtung und
+  Position an S3D uebergeben, sodass diese wie Fenster in den virtuellen
+  Raum wirken, also auch die richtige Richtung haben. Anwendungen fuer sowas
+  waeren z.B. CAVEs, bei denen man im Inneren eines Wuerfels steht und auf 
+  alle Seiten ein Bild projiziert bekommt, oder 3D-Stereo-Brillen, bei denen
+  man 2 leicht voneinander verschobene Bilder fuer beide Augen haben moechte.
+
+- http://en.wikipedia.org/wiki/Cave_Automatic_Virtual_Environment



From dotslash at mail.berlios.de  Fri Oct 26 00:03:38 2007
From: dotslash at mail.berlios.de (dotslash at BerliOS)
Date: Fri, 26 Oct 2007 00:03:38 +0200
Subject: [S3d-svn] r824 - trunk/svnonly
Message-ID: <200710252203.l9PM3c6B005838@sheep.berlios.de>

Author: dotslash
Date: 2007-10-26 00:03:38 +0200 (Fri, 26 Oct 2007)
New Revision: 824

Modified:
   trunk/svnonly/ROADMAP
Log:
- update ROADMAP


Modified: trunk/svnonly/ROADMAP
===================================================================
--- trunk/svnonly/ROADMAP	2007-10-25 21:46:35 UTC (rev 823)
+++ trunk/svnonly/ROADMAP	2007-10-25 22:03:38 UTC (rev 824)
@@ -18,10 +18,10 @@
 um Kompatibilitaet zu schaffen und auf dieser Basis aufbauen zu koennen.
 
 Daher ist das Hauptziel fuer 0.3 eine transparente (im Sinne von nicht 
-spuerbare) Schicht zwischen X11-Desktop und S3D zu ziehen. Der Desktop soll
-wie gewohnt bedienbar sein, in Wirklichkeit ist er aber nur einen Teil der 
-3D-Welt in die (bei Bedarf) umgeschalten werden kann. Das eroeffnet natuerlich
-auch neue GUI-Moeglichkeiten (z.B. Expose etc).
+spuerbare) Schicht zwischen Graphikausgabe und X11-Desktop in Form von S3D zu 
+ziehen. Der Desktop soll wie gewohnt bedienbar sein, in Wirklichkeit ist er 
+aber nur einen Teil der 3D-Welt in die (bei Bedarf) umgeschalten werden kann. 
+Das eroeffnet natuerlich auch neue GUI-Moeglichkeiten (z.B. Expose etc).
 
 Um das ganze durchzufuehren wuerde ich 3 grosesere Schritte vorschlagen, die 
 einigermassen unabhaengig voneinander sind:
@@ -42,7 +42,10 @@
    Strukturen irgendwie gelockt werden muessen, ohne dass Deadlocks auftreten
    koennen. Idealerweise haette dann jeder Client seinen eigenen Thread
    in dem er auch blockierend auf Eingabedaten warten kann, und der Graphik-
-   thread wird nur aufgeweckt wenn es etwas zu zeichnen gibt.
+   thread wird nur aufgeweckt wenn es etwas zu zeichnen gibt. Usereingaben
+   koennten einen weiteren Thread erhalten, evtl. auch ein Thread der
+   regelmaessig Shared-Memory-Updates checkt und Threads weckt (die 
+   SHM-Verbindungen muessen nach wie vor gepolled werden).
 
 2. Shared Memory Zugriff auf Texturen
    -------------------------------------
@@ -59,7 +62,7 @@
    concept-Implementation comptest zu einem vollstaendigen MCP/Composite 
    Manager umwandeln. Dafuer muessen alle moeglichen X11-Window-Events 
    (Window create/resize/destroy) verarbeitet werden und die Fenster 
-   entsprechend dargestellt werden und die Kamera an der richtigen Position
+   entsprechend dargestellt werden, sowie die Kamera an der richtigen Position
    gehalten werden. Man koennte vorerst einen 2D-Desktop-Modus und einen
    3D-Modus haben, zwischen denen gewechselt werden kann.
 
@@ -72,8 +75,8 @@
 -----------------------------------
 - fuer Transparenz-Effekte muss sich eigentlich selbst um Tiefensortierung 
   gekuemmert werden,  d.h. das Bild muss von hinten nach vorn aufgebaut werden.
-  S3D ignoriert diese Tatsache derzeit einfach und malt die Objekte einfach
-  irgendwie. :)
+  S3D ignoriert diese Tatsache derzeit und malt die Objekte einfach irgendwie. 
+  :)
   Ein erster Ansatz waere vor dem Zeichnen die Objekte (mal abgesehen von den
   Polygonen die sie enthalten) nach ihrer Entfernung von der Kamera zu 
   sortieren.
@@ -85,7 +88,7 @@
   und scheinbar ganz gut funktioniert. In S3D gibt es virtuelle 
   Devices (z.B. Pointer), die man darueber steuern koennte.
 
- http://abstrakraft.org/cwiid/wiki/libcwiid
+http://abstrakraft.org/cwiid/wiki/libcwiid
 
 Mehrere Displays
 ------------------
@@ -96,4 +99,4 @@
   alle Seiten ein Bild projiziert bekommt, oder 3D-Stereo-Brillen, bei denen
   man 2 leicht voneinander verschobene Bilder fuer beide Augen haben moechte.
 
-- http://en.wikipedia.org/wiki/Cave_Automatic_Virtual_Environment
+http://en.wikipedia.org/wiki/Cave_Automatic_Virtual_Environment



From nichtsnutz at mail.berlios.de  Fri Oct 26 15:08:00 2007
From: nichtsnutz at mail.berlios.de (nichtsnutz at BerliOS)
Date: Fri, 26 Oct 2007 15:08:00 +0200
Subject: [S3d-svn] r825 - trunk/svnonly
Message-ID: <200710261308.l9QD80uL014535@sheep.berlios.de>

Author: nichtsnutz
Date: 2007-10-26 15:07:58 +0200 (Fri, 26 Oct 2007)
New Revision: 825

Modified:
   trunk/svnonly/ROADMAP
Log:
one comment, one question


Modified: trunk/svnonly/ROADMAP
===================================================================
--- trunk/svnonly/ROADMAP	2007-10-25 22:03:38 UTC (rev 824)
+++ trunk/svnonly/ROADMAP	2007-10-26 13:07:58 UTC (rev 825)
@@ -55,6 +55,9 @@
    koennte der Client direkt in einen gemeinsamen Texturespeicher schreiben
    und wenn er fertig ist dem Server ein "Updated"-Event schicken, woraufhin
    dieser dann seine Textur erneuert.
+
+Frage Andreas:
+soll es denn ?berhaupt weiterhin m?glich sein, von einem anderen rechner zu connecten ?
    
 3. Aufbau eines Composite-Managers als MCP
    -----------------------------------------
@@ -90,6 +93,11 @@
 
 http://abstrakraft.org/cwiid/wiki/libcwiid
 
+kommentar andreas:
+http://www.wiili.org/index.php/Wiiuse sieht auch nicht verkehrt aus
+
+
+
 Mehrere Displays
 ------------------
 - Wenn man mehrere Displays in den Raum stellt koennte man die Ausrichtung und



From dotslash at mail.berlios.de  Fri Oct 26 15:24:23 2007
From: dotslash at mail.berlios.de (dotslash at BerliOS)
Date: Fri, 26 Oct 2007 15:24:23 +0200
Subject: [S3d-svn] r826 - trunk/svnonly
Message-ID: <200710261324.l9QDON0s015585@sheep.berlios.de>

Author: dotslash
Date: 2007-10-26 15:24:23 +0200 (Fri, 26 Oct 2007)
New Revision: 826

Modified:
   trunk/svnonly/ROADMAP
Log:
- answer question, update


Modified: trunk/svnonly/ROADMAP
===================================================================
--- trunk/svnonly/ROADMAP	2007-10-26 13:07:58 UTC (rev 825)
+++ trunk/svnonly/ROADMAP	2007-10-26 13:24:23 UTC (rev 826)
@@ -57,7 +57,17 @@
    dieser dann seine Textur erneuert.
 
 Frage Andreas:
-soll es denn ?berhaupt weiterhin m?glich sein, von einem anderen rechner zu connecten ?
+soll es denn ?berhaupt weiterhin m?glich sein, von einem anderen rechner zu 
+connecten ?
+
+Ja, auf jeden Fall! Man koennte ja eine Funktion 
+"s3d_get_texture_buffer(void **)", die lokal einen Pointer auf den 
+shared-memory Bereich zurueckgibt, und remote einfach einen ganz normalen 
+Speicherbereich. Wenn jetzt "update" aufgeruften wird, uebertraegt die Funktion
+auf dem remote-Rechner wie gehabt diesen Speicherbereich zum Server, auf einem
+SHM-Rechner macht sie aber das oben beschriebene (also nur dem Server Bescheid 
+sagen).
+Damit haetten wir gewissermassen Abwaertskompatibilitaet.
    
 3. Aufbau eines Composite-Managers als MCP
    -----------------------------------------
@@ -108,3 +118,9 @@
   man 2 leicht voneinander verschobene Bilder fuer beide Augen haben moechte.
 
 http://en.wikipedia.org/wiki/Cave_Automatic_Virtual_Environment
+
+GLUT
+------
+
+Kann eigentlich raus, SDL tut alles was wir wollen und mehr, und ist auch 
+Defacto-Standard und auf vielen Platformen verfuegbar.



From lazhur at mail.berlios.de  Fri Oct 26 17:07:23 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 26 Oct 2007 17:07:23 +0200
Subject: [S3d-svn] r827 - in trunk: . cmake/modules
Message-ID: <200710261507.l9QF7Nbj024487@sheep.berlios.de>

Author: lazhur
Date: 2007-10-26 17:07:22 +0200 (Fri, 26 Oct 2007)
New Revision: 827

Added:
   trunk/cmake/modules/FindCWiid.cmake
Modified:
   trunk/ConfigureChecks.cmake
Log:
Added cmake test for CWiid


Modified: trunk/ConfigureChecks.cmake
===================================================================
--- trunk/ConfigureChecks.cmake	2007-10-26 13:24:23 UTC (rev 826)
+++ trunk/ConfigureChecks.cmake	2007-10-26 15:07:22 UTC (rev 827)
@@ -49,6 +49,13 @@
 endif (OPENGL_FOUND)
 
 
+# find lib and add include dir for CWiid
+find_package(CWiid)
+if (CWIID_FOUND)
+	include_directories(${CWIID_INCLUDE_DIR})
+endif (CWIID_FOUND)
+
+
 # try to find lib and add include dir for GLUT
 find_package(GLUT)
 if (GLUT_FOUND)

Added: trunk/cmake/modules/FindCWiid.cmake
===================================================================
--- trunk/cmake/modules/FindCWiid.cmake	2007-10-26 13:24:23 UTC (rev 826)
+++ trunk/cmake/modules/FindCWiid.cmake	2007-10-26 15:07:22 UTC (rev 827)
@@ -0,0 +1,36 @@
+# Try to find CWiid
+#  CWIID_FOUND - If false, do not try to use CWiid.
+#  CWIID_INCLUDE_DIR - where to find cwiid.h
+#  CWIID_LIBRARIES - the libraries to link against
+
+
+if (CWIID_LIBRARIES AND CWIID_INCLUDE_DIR)
+	# path set by user or was found in the past
+	set(CWIID_FOUND TRUE)
+else (CWIID_LIBRARIES AND CWIID_INCLUDE_DIR)
+	find_path(CWIID_INCLUDE_DIR
+		NAMES cwiid.h
+	)
+
+	find_library(CWIID_LIBRARIES
+		NAMES cwiid
+	)
+
+	if (CWIID_INCLUDE_DIR AND CWIID_LIBRARIES)
+		set(CWIID_FOUND TRUE)
+	endif (CWIID_INCLUDE_DIR AND CWIID_LIBRARIES)
+
+	if (CWIID_FOUND)
+		if (NOT CWIID_FIND_QUIETLY)
+			message(STATUS "Found CWiid: ${CWIID_LIBRARIES}")
+		endif (NOT CWIID_FIND_QUIETLY)
+	else (CWIID_FOUND)
+		if (CWIID_FIND_REQUIRED)
+			message(FATAL_ERROR "Could not find CWiid")
+		endif (CWIID_FIND_REQUIRED)
+	endif (CWIID_FOUND)
+
+	# set visibility in cache
+ 	mark_as_advanced(CWIID_INCLUDE_DIR CWIID_LIBRARIES)
+
+endif (CWIID_LIBRARIES AND CWIID_INCLUDE_DIR)



From lazhur at mail.berlios.de  Fri Oct 26 17:07:32 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Fri, 26 Oct 2007 17:07:32 +0200
Subject: [S3d-svn] r828 - trunk
Message-ID: <200710261507.l9QF7Wl6024565@sheep.berlios.de>

Author: lazhur
Date: 2007-10-26 17:07:31 +0200 (Fri, 26 Oct 2007)
New Revision: 828

Modified:
   trunk/ConfigureChecks.cmake
Log:
Sort find_packages by (required|optional) and then by name


Modified: trunk/ConfigureChecks.cmake
===================================================================
--- trunk/ConfigureChecks.cmake	2007-10-26 15:07:22 UTC (rev 827)
+++ trunk/ConfigureChecks.cmake	2007-10-26 15:07:31 UTC (rev 828)
@@ -49,13 +49,6 @@
 endif (OPENGL_FOUND)
 
 
-# find lib and add include dir for CWiid
-find_package(CWiid)
-if (CWIID_FOUND)
-	include_directories(${CWIID_INCLUDE_DIR})
-endif (CWIID_FOUND)
-
-
 # try to find lib and add include dir for GLUT
 find_package(GLUT)
 if (GLUT_FOUND)
@@ -76,6 +69,38 @@
 endif (NOT SDL_FOUND AND NOT GLUT_FOUND)
 
 
+# find lib and add include dir for CWiid
+find_package(CWiid)
+if (CWIID_FOUND)
+	include_directories(${CWIID_INCLUDE_DIR})
+endif (CWIID_FOUND)
+
+
+# try to find docbook
+find_package(Docbook)
+
+
+# try to find lib and add include dir for GPS
+find_package(GPS)
+if (GPS_FOUND)
+	set(HAVE_GPS GPS_FOUND)
+endif (GPS_FOUND)
+
+
+# try to find lib and add include dir for PThreads
+find_package(PThreads)
+if (PTHREADS_FOUND)
+	include_directories(${PTHREADS_INCLUDE_DIR})
+endif (PTHREADS_FOUND)
+
+
+# try to find lib and add include dir for SQLite3
+find_package(SQLite3)
+if (SQLITE3_FOUND)
+	add_definitions(${SQLITE3_DEFINITIONS})
+endif (SQLITE3_FOUND)
+
+
 # try to find lib and add include dir for LibXml2
 find_package(LibXml2)
 if (LIBXML2_FOUND)
@@ -115,31 +140,6 @@
 endif (XTST_FOUND)
 
 
-# try to find lib and add include dir for GPS
-find_package(GPS)
-if (GPS_FOUND)
-	set(HAVE_GPS GPS_FOUND)
-endif (GPS_FOUND)
-
-
-# try to find lib and add include dir for SQLite3
-find_package(SQLite3)
-if (SQLITE3_FOUND)
-	add_definitions(${SQLITE3_DEFINITIONS})
-endif (SQLITE3_FOUND)
-
-
-# try to find lib and add include dir for PThreads
-find_package(PThreads)
-if (PTHREADS_FOUND)
-	include_directories(${PTHREADS_INCLUDE_DIR})
-endif (PTHREADS_FOUND)
-
-
-# try to find docbook
-find_package(Docbook)
-
-
 # test for shm
 include(TestForSHM)
 if (HAVE_SHM)



From lazhur at mail.berlios.de  Tue Oct 30 17:43:49 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Tue, 30 Oct 2007 17:43:49 +0100
Subject: [S3d-svn] r828 - in trunk: . server
Message-ID: <200710301643.l9UGhnEA030514@sheep.berlios.de>

Author: lazhur
Date: 2007-10-30 17:43:49 +0100 (Tue, 30 Oct 2007)
New Revision: 828

Modified:
   trunk/ConfigureChecks.cmake
   trunk/config.h.cmake
   trunk/server/CMakeLists.txt
Log:
Remove GLUT specific parts from build system


Modified: trunk/ConfigureChecks.cmake
===================================================================
--- trunk/ConfigureChecks.cmake	2007-10-27 10:29:38 UTC (rev 827)
+++ trunk/ConfigureChecks.cmake	2007-10-30 16:43:49 UTC (rev 828)
@@ -49,26 +49,16 @@
 endif (OPENGL_FOUND)
 
 
-# try to find lib and add include dir for GLUT
-find_package(GLUT)
-if (GLUT_FOUND)
-	include_directories(${GLUT_INCLUDE_DIR})
-	set(G_GLUT GLUT_FOUND)
-endif (GLUT_FOUND)
-
 # try to find lib and add include dir for SDL
 find_package(SDL)
 if (SDL_FOUND)
 	include_directories(${SDL_INCLUDE_DIR})
 	set(G_SDL SDL_FOUND)
+else (SDL_FOUND)
+	PkgError_Later("Could not find SDL (pkg name: libsdl-dev)")
 endif (SDL_FOUND)
 
-# we need SDL and/or GLUT
-if (NOT SDL_FOUND AND NOT GLUT_FOUND)
-	PkgError_Later("Could not find SDL (pkg name: libsdl-dev) or GLUT (pkg name: libglut-dev)")
-endif (NOT SDL_FOUND AND NOT GLUT_FOUND)
 
-
 # find lib and add include dir for CWiid
 find_package(CWiid)
 if (CWIID_FOUND)

Modified: trunk/config.h.cmake
===================================================================
--- trunk/config.h.cmake	2007-10-27 10:29:38 UTC (rev 827)
+++ trunk/config.h.cmake	2007-10-30 16:43:49 UTC (rev 828)
@@ -3,7 +3,6 @@
 
 /* config.h.  Generated by cmake from config.h.cmake */
 
-#cmakedefine G_GLUT 1
 #cmakedefine G_SDL 1
 #cmakedefine HAVE_GPS 1
 #cmakedefine SHM 1

Modified: trunk/server/CMakeLists.txt
===================================================================
--- trunk/server/CMakeLists.txt	2007-10-27 10:29:38 UTC (rev 827)
+++ trunk/server/CMakeLists.txt	2007-10-30 16:43:49 UTC (rev 828)
@@ -8,22 +8,13 @@
 # files for sdl support
 set(server_sdl_src graphics_sdl.c user_sdl.c)
 
-# files for glut support
-set(server_glut_src graphics_glut.c user_glut.c)
-
-# add glut files and libs when glut was found
-if (GLUT_FOUND)
-	list(APPEND server_src ${server_glut_src})
-	list(APPEND server_libs ${GLUT_glut_LIBRARY})
-endif (GLUT_FOUND)
-
-# add sdl files and libs when sdl was found
+# add sdl files and libs
 if (SDL_FOUND)
 	list(APPEND server_src ${server_sdl_src})
 	list(APPEND server_libs ${SDL_LIBRARY})
 endif (SDL_FOUND)
 
-# compile base files + sdl or glut specific parts
+# compile base files + sdl specific parts
 add_executable(server ${server_src})
 
 target_link_libraries(server ${OPENGL_LIBRARY} ${server_libs})



From lazhur at mail.berlios.de  Tue Oct 30 17:51:08 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Tue, 30 Oct 2007 17:51:08 +0100
Subject: [S3d-svn] r829 - trunk/server
Message-ID: <200710301651.l9UGp8Md031050@sheep.berlios.de>

Author: lazhur
Date: 2007-10-30 17:51:06 +0100 (Tue, 30 Oct 2007)
New Revision: 829

Removed:
   trunk/server/graphics_glut.c
   trunk/server/user_glut.c
Modified:
   trunk/server/global.h
   trunk/server/graphics.c
   trunk/server/main.c
   trunk/server/user.c
Log:
server: Remove GLUT specific parts


Modified: trunk/server/global.h
===================================================================
--- trunk/server/global.h	2007-10-30 16:43:49 UTC (rev 828)
+++ trunk/server/global.h	2007-10-30 16:51:06 UTC (rev 829)
@@ -33,7 +33,7 @@
 #include <sys/shm.h> /* key_t */
 #endif
 /*  variables and defines */
-extern int frame_mode;   /*  GLUT, SDL, ... ? */
+extern int frame_mode;   /*  SDL, ... ? */
 extern int running;   /*  server running flag */
 /*  relevance macros */
 #ifndef S3DUNUSED
@@ -201,7 +201,6 @@
 };
 enum {
 	zero,
-	FRAME_GLUT,
 	FRAME_SDL
 };
 /*  main.c */
@@ -264,10 +263,6 @@
 int user_init(void);
 int user_quit(void);
 int user_main(void);
-#ifdef G_GLUT
-int user_init_glut(void);
-int user_quit_glut(void);
-#endif
 #ifdef G_SDL
 int user_init_sdl(void);
 int user_quit_sdl(void);
@@ -298,10 +293,6 @@
 int graphics_pick_obj(int x, int y);
 int graphics_init(void);
 int render_by_mcp(void);
-#ifdef G_GLUT
-int graphics_init_glut(void);
-int graphics_quit_glut(void);
-#endif
 #ifdef G_SDL
 extern int aa_level;
 extern int SDLFlags;

Modified: trunk/server/graphics.c
===================================================================
--- trunk/server/graphics.c	2007-10-30 16:43:49 UTC (rev 828)
+++ trunk/server/graphics.c	2007-10-30 16:51:06 UTC (rev 829)
@@ -25,10 +25,6 @@
 #include <stdlib.h>   /*  malloc() */
 #include <string.h>   /*  memcpy() */
 
-#ifdef G_GLUT
-#include <GL/glut.h>   /*  glutSwapBuffers() */
-#endif
-
 #include <GL/gl.h>   /*  GLint */
 #ifdef G_SDL
 #include <SDL.h>  /*  SDL_GL_SwapBuffers */
@@ -55,11 +51,6 @@
 		graphics_init_sdl();
 		break;
 #endif
-#ifdef G_GLUT
-	case FRAME_GLUT:
-		graphics_init_glut();
-		break;
-#endif
 	default:
 		return(-1);
 	}
@@ -371,12 +362,6 @@
 	glMultMatrixf(m);
 
 	switch (frame_mode) {
-#ifdef G_GLUT
-	case FRAME_GLUT:
-		glFlush();
-		glutSwapBuffers();
-		break;
-#endif
 #ifdef G_SDL
 	case FRAME_SDL:
 		/* SDL will glFlush itself */

Deleted: trunk/server/graphics_glut.c
===================================================================
--- trunk/server/graphics_glut.c	2007-10-30 16:43:49 UTC (rev 828)
+++ trunk/server/graphics_glut.c	2007-10-30 16:51:06 UTC (rev 829)
@@ -1,55 +0,0 @@
-/*
- * graphics_glut.c
- *
- * Copyright (C) 2004-2006 Simon Wunderlich <dotslash at packetmixer.de>
- *
- * This file is part of s3d, a 3d network display server.
- * See http://s3d.berlios.de/ for more updates.
- *
- * s3d is free software; you can redistribute it and/or modify
- * it under the terms of the GNU General Public License as published by
- * the Free Software Foundation; either version 2 of the License, or
- * (at your option) any later version.
- *
- * s3d is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- * GNU General Public License for more details.
- *
- * You should have received a copy of the GNU General Public License
- * along with s3d; if not, write to the Free Software
- * Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
- */
-
-
-/*  this is the file for operation with glut ... */
-/*  maybe we are able to choose if we want to use glut or sdl or any other lib later ... */
-
-#include "global.h"
-#include <stdio.h>  /* NULL */
-#include <GL/glut.h>   /*  all the glut functions */
-#include <GL/gl.h>   /*  of course, the gl header */
-#include <stdlib.h>  /* atexit() */
-/*  glut version of graphics init ... */
-int graphics_init_glut(void)
-{
-	/* XXX: Faking argc and argv is probably not a good idea. */
-	int argc = 1;
-	char *argv[] = {"s3d", NULL};
-	s3dprintf(MED, "Using GLUT for GL/windowing ...");
-	glutInit(&argc, argv);
-	glutInitDisplayMode(GLUT_DOUBLE | GLUT_DEPTH | GLUT_RGBA);
-	glutInitWindowSize(X_RES, Y_RES);
-	glutCreateWindow("grmbl");
-	glutIdleFunc(one_time);
-	if (0 != (atexit(quit)))
-		s3dprintf(MED, "Error in setting Exit function ...");
-	glutDisplayFunc(graphics_main);
-	glutReshapeFunc(graphics_reshape);
-	return(0);
-}
-/*  nothing to be done ... */
-int graphics_quit_glut(void)
-{
-	return(0);
-}

Modified: trunk/server/main.c
===================================================================
--- trunk/server/main.c	2007-10-30 16:43:49 UTC (rev 828)
+++ trunk/server/main.c	2007-10-30 16:51:06 UTC (rev 829)
@@ -26,9 +26,6 @@
 #include <time.h>   /* nanosleep() */
 #include <stdlib.h>   /* exit() */
 #include <unistd.h>   /* sleep(), fork() */
-#ifdef G_GLUT
-#include <GL/glut.h>   /*  glutMainLoop() */
-#endif
 #define  X_RES 800
 #define  Y_RES 600
 #include <getopt.h>   /*  getopt() */
@@ -156,10 +153,7 @@
 #ifdef G_SDL
 		frame_mode = FRAME_SDL;
 #else
-#ifdef G_GLUT
-		frame_mode = FRAME_GLUT;
 #endif
-#endif
 	}
 	if (!frame_mode) {
 		errsf("init()", "no framework mode available");
@@ -206,19 +200,12 @@
 	int      c;
 	struct option long_options[] = {
 		{"multisample",  1, NULL, 'm'
-		}, {"rc",    1, NULL, 'r'}, {"help",   0, NULL, 'h'}, {"use-glut",  0, NULL, 'g'}, {"use-sdl",   0, NULL, 's'}, {"no-rc",   0, NULL, 'n'}, {NULL, 0, NULL, 0}
+		}, {"rc",    1, NULL, 'r'}, {"help",   0, NULL, 'h'}, {"use-sdl",   0, NULL, 's'}, {"no-rc",   0, NULL, 'n'}, {NULL, 0, NULL, 0}
 	};
 	while (-1 != (c = getopt_long(argc, argv, "?hgsnr:m:", long_options, &lopt_idx))) {
 		switch (c) {
 		case 0:
 			break;
-		case 'g':
-#ifdef G_GLUT
-			frame_mode = FRAME_GLUT;
-#else
-			errsf("process_args()", "sorry, GLUT is not available");
-#endif
-			break;
 		case 's':
 #ifdef G_SDL
 			frame_mode = FRAME_SDL;
@@ -249,9 +236,6 @@
 			s3dprintf(VHIGH, " --multisample, -m:\tSpecify Multisampling level (antialiasing) if available.\n\t\t(value 1-16, default 4, 0 = off),");
 			s3dprintf(VHIGH, " --rc, -r:\tspecify a rc (startup script)");
 			s3dprintf(VHIGH, " --no-rc, -n:\tdon't use a rc file (useful for debugging mcp's)");
-#ifdef G_GLUT
-			s3dprintf(VHIGH, " --use-glut, -g:\tuse GLUT as framework-system");
-#endif
 #ifdef G_SDL
 			s3dprintf(VHIGH, " --use-sdl, -s:\tuse SDL as framework-system");
 #endif
@@ -267,15 +251,7 @@
 {
 	process_args(argc, argv);
 	init();
-	switch (frame_mode) {
-#ifdef G_GLUT
-	case FRAME_GLUT:
-		glutMainLoop();
-		break;
-#endif
-	default:
-		mainloop();
-	}
+	mainloop();
 	quit();
 	return(0);
 }

Modified: trunk/server/user.c
===================================================================
--- trunk/server/user.c	2007-10-30 16:43:49 UTC (rev 828)
+++ trunk/server/user.c	2007-10-30 16:51:06 UTC (rev 829)
@@ -30,11 +30,6 @@
 int user_init(void)
 {
 	switch (frame_mode) {
-#ifdef G_GLUT
-	case FRAME_GLUT:
-		user_init_glut();
-		break;
-#endif
 #ifdef G_SDL
 	case FRAME_SDL:
 		user_init_sdl();
@@ -50,10 +45,6 @@
 int user_main(void)
 {
 	switch (frame_mode) {
-#ifdef G_GLUT
-	case FRAME_GLUT:
-		return(0);  /*  glut uses callback functions */
-#endif
 #ifdef G_SDL
 	case FRAME_SDL:
 		user_main_sdl();

Deleted: trunk/server/user_glut.c
===================================================================
--- trunk/server/user_glut.c	2007-10-30 16:43:49 UTC (rev 828)
+++ trunk/server/user_glut.c	2007-10-30 16:51:06 UTC (rev 829)
@@ -1,133 +0,0 @@
-/*
- * user_glut.c
- *
- * Copyright (C) 2004-2006 Simon Wunderlich <dotslash at packetmixer.de>
- *
- * This file is part of s3d, a 3d network display server.
- * See http://s3d.berlios.de/ for more updates.
- *
- * s3d is free software; you can redistribute it and/or modify
- * it under the terms of the GNU General Public License as published by
- * the Free Software Foundation; either version 2 of the License, or
- * (at your option) any later version.
- *
- * s3d is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- * GNU General Public License for more details.
- *
- * You should have received a copy of the GNU General Public License
- * along with s3d; if not, write to the Free Software
- * Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
- */
-
-
-#include "global.h"
-#include <GL/glut.h>   /*  all the glut functions */
-#include <s3d_keysym.h> /* our very own (haha) keysyms */
-/*  local prototypes */
-void keyboard(uint8_t key, int x, int y);
-void special(int skey, int x, int y);
-void mouse_motion(int x, int y);
-void passive_mouse_motion(int x, int y);
-
-/*  init user input things for glut */
-int user_init_glut(void)
-{
-	s3dprintf(MED, "using GLUT for user input");
-	glutKeyboardFunc(keyboard);
-	glutSpecialFunc(special);
-	glutMouseFunc(user_mouse);
-	glutMotionFunc(mouse_motion);
-	glutPassiveMotionFunc(passive_mouse_motion);
-	return(0);
-}
-
-void keyboard(uint8_t key, int S3DUNUSED(x), int S3DUNUSED(y))
-{
-	user_key(key, key, 0, 0);
-	user_key(key, key, 0, 1);
-}
-void special(int skey, int S3DUNUSED(x), int S3DUNUSED(y))
-{
-	uint16_t mkey;
-	switch (skey) { /* handle special keys */
-	case GLUT_KEY_F1:
-		mkey = S3DK_F1;
-		break;
-	case GLUT_KEY_F2:
-		mkey = S3DK_F2;
-		break;
-	case GLUT_KEY_F3:
-		mkey = S3DK_F3;
-		break;
-	case GLUT_KEY_F4:
-		mkey = S3DK_F4;
-		break;
-	case GLUT_KEY_F5:
-		mkey = S3DK_F5;
-		break;
-	case GLUT_KEY_F6:
-		mkey = S3DK_F6;
-		break;
-	case GLUT_KEY_F7:
-		mkey = S3DK_F7;
-		break;
-	case GLUT_KEY_F8:
-		mkey = S3DK_F8;
-		break;
-	case GLUT_KEY_F9:
-		mkey = S3DK_F9;
-		break;
-	case GLUT_KEY_F10:
-		mkey = S3DK_F10;
-		break;
-	case GLUT_KEY_F11:
-		mkey = S3DK_F11;
-		break;
-	case GLUT_KEY_F12:
-		mkey = S3DK_F12;
-		break;
-	case GLUT_KEY_LEFT:
-		mkey = S3DK_LEFT;
-		break;
-	case GLUT_KEY_RIGHT:
-		mkey = S3DK_RIGHT;
-		break;
-	case GLUT_KEY_UP:
-		mkey = S3DK_UP;
-		break;
-	case GLUT_KEY_DOWN:
-		mkey = S3DK_DOWN;
-		break;
-	case GLUT_KEY_PAGE_UP:
-		mkey = S3DK_PAGEUP;
-		break;
-	case GLUT_KEY_PAGE_DOWN:
-		mkey = S3DK_PAGEDOWN;
-		break;
-	case GLUT_KEY_HOME:
-		mkey = S3DK_HOME;
-		break;
-	case GLUT_KEY_END:
-		mkey = S3DK_END;
-		break;
-	case GLUT_KEY_INSERT:
-		mkey = S3DK_INSERT;
-		break;
-	default:
-		mkey = skey;
-		break;
-	}
-	s3dprintf(MED, "special(): %d -> %d", skey, mkey);
-	user_key(mkey, 0, 0, 0);
-	user_key(mkey, 0, 0, 1);
-}
-void mouse_motion(int x, int y)
-{
-	user_mouse(but, 2, x, y);
-}
-void passive_mouse_motion(int x, int y)
-{
-	user_mouse(-1, -1, x, y);
-}



From lazhur at mail.berlios.de  Tue Oct 30 18:28:22 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Tue, 30 Oct 2007 18:28:22 +0100
Subject: [S3d-svn] r830 - trunk/Documentation/manpages
Message-ID: <200710301728.l9UHSMhn032755@sheep.berlios.de>

Author: lazhur
Date: 2007-10-30 18:28:17 +0100 (Tue, 30 Oct 2007)
New Revision: 830

Modified:
   trunk/Documentation/manpages/s3d.1
   trunk/Documentation/manpages/s3dmanpage.sgml
Log:
Remove glut specific parts from manpage


Modified: trunk/Documentation/manpages/s3d.1
===================================================================
--- trunk/Documentation/manpages/s3d.1	2007-10-30 16:51:06 UTC (rev 829)
+++ trunk/Documentation/manpages/s3d.1	2007-10-30 17:28:17 UTC (rev 830)
@@ -9,7 +9,7 @@
 s3d \- network display server
 .SH SYNOPSIS
 
-\fBs3d\fR [ \fB-g|--use-glut\fR ] [ \fB-s|--use-sdl\fR ] [ \fB-r|--rc\fR ] [ \fB-n|--no-rc\fR ] [ \fB-h|-?|--help\fR ]
+\fBs3d\fR [ \fB-s|--use-sdl\fR ] [ \fB-r|--rc\fR ] [ \fB-n|--no-rc\fR ] [ \fB-h|-?|--help\fR ]
 
 .SH "DESCRIPTION"
 .PP
@@ -23,9 +23,6 @@
 \fB-h, -?, --help\fR
 Show summary of options and exit. 
 .TP
-\fB-g, --use-glut\fR
-Tells s3d to use GLUT as graphics framework system. 
-.TP
 \fB-s, --use-sdl\fR
 Tells s3d to use SDL as graphics framework system. 
 .TP

Modified: trunk/Documentation/manpages/s3dmanpage.sgml
===================================================================
--- trunk/Documentation/manpages/s3dmanpage.sgml	2007-10-30 16:51:06 UTC (rev 829)
+++ trunk/Documentation/manpages/s3dmanpage.sgml	2007-10-30 17:28:17 UTC (rev 830)
@@ -14,7 +14,6 @@
 	<refsynopsisdiv> 
 		<cmdsynopsis> 
 			<command>s3d</command> 
-			<arg choice="opt">-g|--use-glut</arg>
 			<arg choice="opt">-s|--use-sdl</arg>
 			<arg choice="opt">-r|--rc</arg>
 			<arg choice="opt">-n|--no-rc</arg>
@@ -44,12 +43,6 @@
 				</listitem> 
 			</varlistentry> 
 			<varlistentry> 
-				<term>-g, --use-glut</term> 
-				<listitem> 
-					<para> Tells s3d to use GLUT as graphics framework system. </para>
-				</listitem> 
-			</varlistentry>
-			<varlistentry> 
 				<term>-s, --use-sdl</term> 
 				<listitem> 
 					<para> Tells s3d to use SDL as graphics framework system. </para>



From lazhur at mail.berlios.de  Tue Oct 30 18:28:39 2007
From: lazhur at mail.berlios.de (lazhur at BerliOS)
Date: Tue, 30 Oct 2007 18:28:39 +0100
Subject: [S3d-svn] r831 - trunk/extras/distro/gentoo/media-gfx/s3d-svn
Message-ID: <200710301728.l9UHSdRO000023@sheep.berlios.de>

Author: lazhur
Date: 2007-10-30 18:28:39 +0100 (Tue, 30 Oct 2007)
New Revision: 831

Modified:
   trunk/extras/distro/gentoo/media-gfx/s3d-svn/Manifest
   trunk/extras/distro/gentoo/media-gfx/s3d-svn/s3d-svn-9999.ebuild
Log:
Remove glut dependencies from s3d-svn ebuild


Modified: trunk/extras/distro/gentoo/media-gfx/s3d-svn/Manifest
===================================================================
--- trunk/extras/distro/gentoo/media-gfx/s3d-svn/Manifest	2007-10-30 17:28:17 UTC (rev 830)
+++ trunk/extras/distro/gentoo/media-gfx/s3d-svn/Manifest	2007-10-30 17:28:39 UTC (rev 831)
@@ -1,7 +1,7 @@
-EBUILD s3d-svn-9999.ebuild 1095 RMD160 ae52f86830e1931f2ca591c80da2164aa9a7bd40 SHA1 537b0b887184a943794e6adeac73f1b39b0bc0ef SHA256 5973d09cec59e0c6f8122f985843b3a2d7e21a3e76fb9ea5ba4a32e0b6c03c32
-MD5 94a47bed0b2f6abfd50edc7ec13d5e4e s3d-svn-9999.ebuild 1095
-RMD160 ae52f86830e1931f2ca591c80da2164aa9a7bd40 s3d-svn-9999.ebuild 1095
-SHA256 5973d09cec59e0c6f8122f985843b3a2d7e21a3e76fb9ea5ba4a32e0b6c03c32 s3d-svn-9999.ebuild 1095
+EBUILD s3d-svn-9999.ebuild 1080 RMD160 dc3c9fe70997bf2496a0c2edccd2cc51681dbeeb SHA1 03cfd6342ee586319d88ddfe8ee92cb2cdf4dcab SHA256 a38520cb14c71bce43bd711c02b58bff8dbd20851e22bd29ca08cd3a544ec07a
+MD5 460aeebf714955e28675ff46157bfc83 s3d-svn-9999.ebuild 1080
+RMD160 dc3c9fe70997bf2496a0c2edccd2cc51681dbeeb s3d-svn-9999.ebuild 1080
+SHA256 a38520cb14c71bce43bd711c02b58bff8dbd20851e22bd29ca08cd3a544ec07a s3d-svn-9999.ebuild 1080
 MISC ChangeLog 717 RMD160 732719801434d2f34762040a3d76224a376eafe9 SHA1 e3f6ae8c96e94d078c05f06a26c4671126bf2ae0 SHA256 50813962433038ee35016fdbd5a738f99f8ef5da1dbb6db01c35b258ca180587
 MD5 29def1ab7084d3f1a14f46b8e18774a9 ChangeLog 717
 RMD160 732719801434d2f34762040a3d76224a376eafe9 ChangeLog 717

Modified: trunk/extras/distro/gentoo/media-gfx/s3d-svn/s3d-svn-9999.ebuild
===================================================================
--- trunk/extras/distro/gentoo/media-gfx/s3d-svn/s3d-svn-9999.ebuild	2007-10-30 17:28:17 UTC (rev 830)
+++ trunk/extras/distro/gentoo/media-gfx/s3d-svn/s3d-svn-9999.ebuild	2007-10-30 17:28:39 UTC (rev 831)
@@ -37,14 +37,13 @@
 		virtual/x11 )
 
 	doc? ( app-text/docbook-sgml-utils )
-	gps? ( sci-geosciences/gpsd )	
+	gps? ( sci-geosciences/gpsd )
 	xcomposite? (
 		x11-libs/libXcomposite
 		x11-libs/libXdamage
 		x11-libs/libXfixes
 		x11-libs/libXrender
 	)
-	virtual/glut
 	"
 
 src_compile() {



From dotslash at mail.berlios.de  Tue Oct 30 19:17:49 2007
From: dotslash at mail.berlios.de (dotslash at BerliOS)
Date: Tue, 30 Oct 2007 19:17:49 +0100
Subject: [S3d-svn] r832 - trunk/server
Message-ID: <200710301817.l9UIHn7D017826@sheep.berlios.de>

Author: dotslash
Date: 2007-10-30 19:17:48 +0100 (Tue, 30 Oct 2007)
New Revision: 832

Added:
   trunk/server/THREADS
Log:
- add description of current status/idea for thread-implementation


Added: trunk/server/THREADS
===================================================================
--- trunk/server/THREADS	2007-10-30 17:28:39 UTC (rev 831)
+++ trunk/server/THREADS	2007-10-30 18:17:48 UTC (rev 832)
@@ -0,0 +1,45 @@
+currently:
+----------
+mainloop		(main.c)
+	onetime
+		nanosleep()
+		user_main()
+		network_main()
+		graphics_main()
+
+
+network_main():
+	tcp_pollport()					polls for new processes
+	tcp_pollproc()					reads data from the new processes (connected with TCP)
+	shm_main()						check for new data from processes (connected via SHM)
+
+user_main:
+	user_main_sdl()					get and process SDL events, e.g. sending events to the processes
+	-> graphics_pick_obj()			must render the scene, therefore needs exclusive access to GL
+
+graphics_main
+	...								setup the camera, set GL stuff
+	render_by_mcp()					render the mcp
+		render_virtual_object()		render a process (it's an virtual object in the MCPs object space)
+			obj_render				render objects from the non-MCP process
+		obj_render()				render a "normal" object from the MCP process
+		
+idea:
+-----
+TODO: formulate locks
+process threads:
+each process has its own thread, blocking in tcp_proc_com_in if TCP, or simply sleeping in SHM 
+(pollin will be done in network thread)
+
+network thread:
+does tcp_pollport, spawning new process-threads. After select times out, it polls all SHM 
+connections if there is new data and wakes process threads up if there is anything to do.
+
+graphic thread:
+draws a frame and sleeps until it wakes up. processes make wake it up when new data was
+received, or user events (pick object, window was resized/damaged).
+
+user/event thread:
+processes events from outside (via SDL), send notifications to the processes
+
+



