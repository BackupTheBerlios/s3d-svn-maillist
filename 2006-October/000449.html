<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [S3d-svn] r456 - in trunk: . extras extras/distro	extras/distro/gentoo extras/distro/gentoo/media-gfx	extras/distro/gentoo/media-gfx/s3d	extras/distro/gentoo/media-gfx/s3d/files	extras/distro/gentoo/media-gfx/s3d-svn	extras/distro/gentoo/media-gfx/s3d-svn/files extras/mplayer	extras/swig
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/s3d-svn/2006-October/index.html" >
   <LINK REL="made" HREF="mailto:s3d-svn%40lists.berlios.de?Subject=Re%3A%20%5BS3d-svn%5D%20r456%20-%20in%20trunk%3A%20.%20extras%20extras/distro%0A%09extras/distro/gentoo%20extras/distro/gentoo/media-gfx%0A%09extras/distro/gentoo/media-gfx/s3d%0A%09extras/distro/gentoo/media-gfx/s3d/files%0A%09extras/distro/gentoo/media-gfx/s3d-svn%0A%09extras/distro/gentoo/media-gfx/s3d-svn/files%20extras/mplayer%0A%09extras/swig&In-Reply-To=%3C200610261432.k9QEWrex031981%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000448.html">
   <LINK REL="Next"  HREF="000450.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[S3d-svn] r456 - in trunk: . extras extras/distro	extras/distro/gentoo extras/distro/gentoo/media-gfx	extras/distro/gentoo/media-gfx/s3d	extras/distro/gentoo/media-gfx/s3d/files	extras/distro/gentoo/media-gfx/s3d-svn	extras/distro/gentoo/media-gfx/s3d-svn/files extras/mplayer	extras/swig</H1>
    <B>dotslash at BerliOS</B> 
    <A HREF="mailto:s3d-svn%40lists.berlios.de?Subject=Re%3A%20%5BS3d-svn%5D%20r456%20-%20in%20trunk%3A%20.%20extras%20extras/distro%0A%09extras/distro/gentoo%20extras/distro/gentoo/media-gfx%0A%09extras/distro/gentoo/media-gfx/s3d%0A%09extras/distro/gentoo/media-gfx/s3d/files%0A%09extras/distro/gentoo/media-gfx/s3d-svn%0A%09extras/distro/gentoo/media-gfx/s3d-svn/files%20extras/mplayer%0A%09extras/swig&In-Reply-To=%3C200610261432.k9QEWrex031981%40sheep.berlios.de%3E"
       TITLE="[S3d-svn] r456 - in trunk: . extras extras/distro	extras/distro/gentoo extras/distro/gentoo/media-gfx	extras/distro/gentoo/media-gfx/s3d	extras/distro/gentoo/media-gfx/s3d/files	extras/distro/gentoo/media-gfx/s3d-svn	extras/distro/gentoo/media-gfx/s3d-svn/files extras/mplayer	extras/swig">dotslash at mail.berlios.de
       </A><BR>
    <I>Thu Oct 26 16:32:53 CEST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000448.html">[S3d-svn] r455 - in trunk: . apps/dot_mcp
</A></li>
        <LI>Next message: <A HREF="000450.html">[S3d-svn] r457 - in trunk: . apps/s3dfm
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#449">[ date ]</a>
              <a href="thread.html#449">[ thread ]</a>
              <a href="subject.html#449">[ subject ]</a>
              <a href="author.html#449">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: dotslash
Date: 2006-10-26 16:32:52 +0200 (Thu, 26 Oct 2006)
New Revision: 456

Added:
   trunk/extras/distro/
   trunk/extras/distro/gentoo/
   trunk/extras/distro/gentoo/media-gfx/
   trunk/extras/distro/gentoo/media-gfx/s3d-svn/
   trunk/extras/distro/gentoo/media-gfx/s3d-svn/ChangeLog
   trunk/extras/distro/gentoo/media-gfx/s3d-svn/Manifest
   trunk/extras/distro/gentoo/media-gfx/s3d-svn/files/
   trunk/extras/distro/gentoo/media-gfx/s3d-svn/files/digest-s3d-svn-9999
   trunk/extras/distro/gentoo/media-gfx/s3d-svn/metadata.xml
   trunk/extras/distro/gentoo/media-gfx/s3d-svn/s3d-svn-9999.ebuild
   trunk/extras/distro/gentoo/media-gfx/s3d/
   trunk/extras/distro/gentoo/media-gfx/s3d/ChangeLog
   trunk/extras/distro/gentoo/media-gfx/s3d/Manifest
   trunk/extras/distro/gentoo/media-gfx/s3d/files/
   trunk/extras/distro/gentoo/media-gfx/s3d/files/digest-s3d-0.1.1
   trunk/extras/distro/gentoo/media-gfx/s3d/metadata.xml
   trunk/extras/distro/gentoo/media-gfx/s3d/s3d-0.1.1.ebuild
   trunk/extras/mplayer/
   trunk/extras/mplayer/README
   trunk/extras/mplayer/mplayer.1.0pre7try2.s3d.patch
   trunk/extras/swig/
   trunk/extras/swig/Makefile
   trunk/extras/swig/TODO
   trunk/extras/swig/s3d.i
   trunk/extras/swig/s3d_test.pl
   trunk/extras/swig/s3d_test.py
Removed:
   trunk/extras/README
   trunk/extras/mplayer.1.0pre7try2.s3d.patch
   trunk/swig/
Modified:
   trunk/
Log:
 <A HREF="https://lists.berlios.de/mailman/listinfo/s3d-svn">r1104 at kero</A>:  dotslash | 2006-10-26 16:31:17 +0200
 - adding svens gentoo ebuilds (thank you!!)
 - moving things around (put additional stuff into &quot;extras&quot;)



Property changes on: trunk
___________________________________________________________________
Name: svk:merge
   - bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:1101
   + bf2c72c7-850b-0410-b9e4-c1fddb578f10:/s3d-trunk:1104

Deleted: trunk/extras/README
===================================================================
--- trunk/extras/README	2006-10-23 16:05:56 UTC (rev 455)
+++ trunk/extras/README	2006-10-26 14:32:52 UTC (rev 456)
@@ -1,13 +0,0 @@
-INSTALL
--------
-1. install the client library (or the whole s3d package)
-2. go into your mplayer-source directory
-3. use
-   $ patch -p1 &lt; /path/to/mplayer.1.0pre7try2.s3d.patch
-   to patch the source
-4. do ./configure
-   In the summary, you should see &quot;s3d&quot; in the 
-   &quot;Enabled optional drivers&quot;, &quot;Video Output&quot;
-5. install mplayer and watch videos like this:
-   mplayer -vo s3d movie.mpg
-6. enjoy ;)

Added: trunk/extras/distro/gentoo/media-gfx/s3d/ChangeLog
===================================================================
--- trunk/extras/distro/gentoo/media-gfx/s3d/ChangeLog	2006-10-23 16:05:56 UTC (rev 455)
+++ trunk/extras/distro/gentoo/media-gfx/s3d/ChangeLog	2006-10-26 14:32:52 UTC (rev 456)
@@ -0,0 +1,7 @@
+# ChangeLog for media-gfx/s3d
+
+*s3d-0.1.1 (25 Oct 2006)
+
+  25 Oct 2006; Sven Eckelmann &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/s3d-svn">sven.eckelmann at gmx.de</A>&gt; s3d-0.1.1.ebuild:
+  Initial import.
+

Added: trunk/extras/distro/gentoo/media-gfx/s3d/Manifest
===================================================================
--- trunk/extras/distro/gentoo/media-gfx/s3d/Manifest	2006-10-23 16:05:56 UTC (rev 455)
+++ trunk/extras/distro/gentoo/media-gfx/s3d/Manifest	2006-10-26 14:32:52 UTC (rev 456)
@@ -0,0 +1,16 @@
+DIST s3d-0.1.1.tar.bz2 1737935 RMD160 88189600659dd4d184be044dd668597ab2b17334 SHA1 3765171848d519784a436468ac613c9bfe85c3ae SHA256 1e2be7c806deaaf07e7f00d018f6f08723a1b26332419a80e732c8b7a1a515e4
+EBUILD s3d-0.1.1.ebuild 779 RMD160 1139e842ece34fa21a6ec1bab8d46ec78f78f0d7 SHA1 849426853a809fb99af0b8d3993614ad1017f4ad SHA256 673bf5f1f0c2d03bb5da9483284b00d6038fe59fdf3dcf6289f4aac51f449937
+MD5 a0b3edd9261aac5e7fe1acedb51e3b37 s3d-0.1.1.ebuild 779
+RMD160 1139e842ece34fa21a6ec1bab8d46ec78f78f0d7 s3d-0.1.1.ebuild 779
+SHA256 673bf5f1f0c2d03bb5da9483284b00d6038fe59fdf3dcf6289f4aac51f449937 s3d-0.1.1.ebuild 779
+MISC ChangeLog 148 RMD160 cb8db163c4842d0f8d8d4ad41ba7516765f1b0a3 SHA1 70661ac4033b04c51f6928f82d9903bfa86eb0b3 SHA256 e61b9d97b0c64076e833b27201c5eda91b02f5d885a37b5f4d005c03a44c405c
+MD5 31944463e2ea8d52f7172c7b838927be ChangeLog 148
+RMD160 cb8db163c4842d0f8d8d4ad41ba7516765f1b0a3 ChangeLog 148
+SHA256 e61b9d97b0c64076e833b27201c5eda91b02f5d885a37b5f4d005c03a44c405c ChangeLog 148
+MISC metadata.xml 239 RMD160 236f28d8249f562b764e2d854580d8301b150418 SHA1 76f167e3abff81e9535c16a637fd1e7f91d4fda3 SHA256 c0f08f1f0c1ce07df414cd87bf028a15cae639c89b2d636714d50d8aa77c370f
+MD5 261031c8b7aca6f50babf7e44b35deb1 metadata.xml 239
+RMD160 236f28d8249f562b764e2d854580d8301b150418 metadata.xml 239
+SHA256 c0f08f1f0c1ce07df414cd87bf028a15cae639c89b2d636714d50d8aa77c370f metadata.xml 239
+MD5 423924e2e8645a03c8a35c37406b0700 files/digest-s3d-0.1.1 235
+RMD160 5fae00369c6a80caa87cabd4836537d213a68e0f files/digest-s3d-0.1.1 235
+SHA256 26e3661db664bbb79e6f5bb1b18e01f558f9ee4fe21e842351dc22629b0567a4 files/digest-s3d-0.1.1 235

Added: trunk/extras/distro/gentoo/media-gfx/s3d/files/digest-s3d-0.1.1
===================================================================
--- trunk/extras/distro/gentoo/media-gfx/s3d/files/digest-s3d-0.1.1	2006-10-23 16:05:56 UTC (rev 455)
+++ trunk/extras/distro/gentoo/media-gfx/s3d/files/digest-s3d-0.1.1	2006-10-26 14:32:52 UTC (rev 456)
@@ -0,0 +1,3 @@
+MD5 5105ff41059f57394b7a9346ff64f277 s3d-0.1.1.tar.bz2 1737935
+RMD160 88189600659dd4d184be044dd668597ab2b17334 s3d-0.1.1.tar.bz2 1737935
+SHA256 1e2be7c806deaaf07e7f00d018f6f08723a1b26332419a80e732c8b7a1a515e4 s3d-0.1.1.tar.bz2 1737935

Added: trunk/extras/distro/gentoo/media-gfx/s3d/metadata.xml
===================================================================
--- trunk/extras/distro/gentoo/media-gfx/s3d/metadata.xml	2006-10-23 16:05:56 UTC (rev 455)
+++ trunk/extras/distro/gentoo/media-gfx/s3d/metadata.xml	2006-10-26 14:32:52 UTC (rev 456)
@@ -0,0 +1,8 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
+&lt;!DOCTYPE pkgmetadata SYSTEM &quot;<A HREF="http://www.gentoo.org/dtd/metadata.dtd">http://www.gentoo.org/dtd/metadata.dtd</A>&quot;&gt;
+&lt;pkgmetadata&gt;
+  &lt;herd&gt;d0tslash&lt;/herd&gt;
+    &lt;maintainer&gt;
+    &lt;email&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/s3d-svn">dotslash at packetmixer.de</A>&lt;/email&gt;
+  &lt;/maintainer&gt;
+&lt;/pkgmetadata&gt;

Added: trunk/extras/distro/gentoo/media-gfx/s3d/s3d-0.1.1.ebuild
===================================================================
--- trunk/extras/distro/gentoo/media-gfx/s3d/s3d-0.1.1.ebuild	2006-10-23 16:05:56 UTC (rev 455)
+++ trunk/extras/distro/gentoo/media-gfx/s3d/s3d-0.1.1.ebuild	2006-10-26 14:32:52 UTC (rev 456)
@@ -0,0 +1,49 @@
+IUSE=&quot;&quot;
+
+SRC_URI=&quot;<A HREF="http://download.berlios.de/${PN">http://download.berlios.de/${PN</A>}/${P}.tar.bz2&quot;
+
+DESCRIPTION=&quot;a 3d network display server&quot;
+HOMEPAGE=&quot;<A HREF="http://s3d.berlios.de/">http://s3d.berlios.de/</A>&quot;
+
+LICENSE=&quot;GPL-2 LGPL&quot;
+KEYWORDS=&quot;x86&quot;
+SLOT=&quot;0&quot;
+
+DEPEND=&quot;${RDEPEND}
+	&gt;=sys-devel/autoconf-2.59
+	&gt;=sys-devel/automake-1.9
+	sys-devel/flex
+	&gt;=sys-devel/libtool-1.5
+	&quot;
+RDEPEND=&quot;!media-gfx/s3d-svn
+	&gt;=media-libs/libsdl-1.2.7
+	&gt;=media-libs/freetype-2
+	&gt;=dev-libs/glib-2
+	media-libs/fontconfig
+	media-libs/mesa
+
+	|| ( 	(
+			sys-libs/zlib
+			x11-libs/libX11
+			x11-libs/libXext
+			x11-libs/libXi
+			x11-libs/libXmu
+			x11-libs/libXt
+			x11-libs/libXtst )
+		virtual/x11 )
+
+	virtual/glut
+	&quot;
+
+src_compile() {
+	econf \
+		--prefix=/usr/ \
+		|| die &quot;econf failed&quot;
+
+	emake || die &quot;emake failed&quot;
+}
+
+src_install() {
+	emake DESTDIR=&quot;${D}&quot; install || die
+}
+

Added: trunk/extras/distro/gentoo/media-gfx/s3d-svn/ChangeLog
===================================================================
--- trunk/extras/distro/gentoo/media-gfx/s3d-svn/ChangeLog	2006-10-23 16:05:56 UTC (rev 455)
+++ trunk/extras/distro/gentoo/media-gfx/s3d-svn/ChangeLog	2006-10-26 14:32:52 UTC (rev 456)
@@ -0,0 +1,7 @@
+# ChangeLog for media-gfx/s3d-svn
+
+*s3d-svn-9999 (25 Oct 2006)
+
+  25 Oct 2006; Sven Eckelmann &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/s3d-svn">sven.eckelmann at gmx.de</A>&gt; s3d-svn-9999.ebuild:
+  Initial import.
+

Added: trunk/extras/distro/gentoo/media-gfx/s3d-svn/Manifest
===================================================================
--- trunk/extras/distro/gentoo/media-gfx/s3d-svn/Manifest	2006-10-23 16:05:56 UTC (rev 455)
+++ trunk/extras/distro/gentoo/media-gfx/s3d-svn/Manifest	2006-10-26 14:32:52 UTC (rev 456)
@@ -0,0 +1,15 @@
+EBUILD s3d-svn-9999.ebuild 854 RMD160 71332ca7afce19258d03d30369f6fd40768f80bc SHA1 c18620febb279103d2e69dc4b5bfb99b8fca33d4 SHA256 bb3f63536f9266a033c880e4f00ef881e23928b89f7af8932f75607b5ee0286c
+MD5 5d86860506b4fd6edd49cafd70af217f s3d-svn-9999.ebuild 854
+RMD160 71332ca7afce19258d03d30369f6fd40768f80bc s3d-svn-9999.ebuild 854
+SHA256 bb3f63536f9266a033c880e4f00ef881e23928b89f7af8932f75607b5ee0286c s3d-svn-9999.ebuild 854
+MISC ChangeLog 158 RMD160 e817888af84d9f7ae286bbf1f23ada86c95e97f8 SHA1 df2ceb7d586962142785b91bdf915b4e7c02e04a SHA256 27a1ef992b0259bd3b203fb70e6c8e57f2cdeb39af98343069a2d1a0798eff17
+MD5 39106091ba185d909931a2d120f05db4 ChangeLog 158
+RMD160 e817888af84d9f7ae286bbf1f23ada86c95e97f8 ChangeLog 158
+SHA256 27a1ef992b0259bd3b203fb70e6c8e57f2cdeb39af98343069a2d1a0798eff17 ChangeLog 158
+MISC metadata.xml 239 RMD160 236f28d8249f562b764e2d854580d8301b150418 SHA1 76f167e3abff81e9535c16a637fd1e7f91d4fda3 SHA256 c0f08f1f0c1ce07df414cd87bf028a15cae639c89b2d636714d50d8aa77c370f
+MD5 261031c8b7aca6f50babf7e44b35deb1 metadata.xml 239
+RMD160 236f28d8249f562b764e2d854580d8301b150418 metadata.xml 239
+SHA256 c0f08f1f0c1ce07df414cd87bf028a15cae639c89b2d636714d50d8aa77c370f metadata.xml 239
+MD5 d41d8cd98f00b204e9800998ecf8427e files/digest-s3d-svn-9999 0
+RMD160 9c1185a5c5e9fc54612808977ee8f548b2258d31 files/digest-s3d-svn-9999 0
+SHA256 e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855 files/digest-s3d-svn-9999 0

Added: trunk/extras/distro/gentoo/media-gfx/s3d-svn/files/digest-s3d-svn-9999
===================================================================

Added: trunk/extras/distro/gentoo/media-gfx/s3d-svn/metadata.xml
===================================================================
--- trunk/extras/distro/gentoo/media-gfx/s3d-svn/metadata.xml	2006-10-23 16:05:56 UTC (rev 455)
+++ trunk/extras/distro/gentoo/media-gfx/s3d-svn/metadata.xml	2006-10-26 14:32:52 UTC (rev 456)
@@ -0,0 +1,8 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
+&lt;!DOCTYPE pkgmetadata SYSTEM &quot;<A HREF="http://www.gentoo.org/dtd/metadata.dtd">http://www.gentoo.org/dtd/metadata.dtd</A>&quot;&gt;
+&lt;pkgmetadata&gt;
+  &lt;herd&gt;d0tslash&lt;/herd&gt;
+    &lt;maintainer&gt;
+    &lt;email&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/s3d-svn">dotslash at packetmixer.de</A>&lt;/email&gt;
+  &lt;/maintainer&gt;
+&lt;/pkgmetadata&gt;

Added: trunk/extras/distro/gentoo/media-gfx/s3d-svn/s3d-svn-9999.ebuild
===================================================================
--- trunk/extras/distro/gentoo/media-gfx/s3d-svn/s3d-svn-9999.ebuild	2006-10-23 16:05:56 UTC (rev 455)
+++ trunk/extras/distro/gentoo/media-gfx/s3d-svn/s3d-svn-9999.ebuild	2006-10-26 14:32:52 UTC (rev 456)
@@ -0,0 +1,52 @@
+inherit subversion
+
+IUSE=&quot;&quot;
+
+ESVN_REPO_URI=&quot;<A HREF="http://svn.berlios.de/svnroot/repos/s3d/trunk">http://svn.berlios.de/svnroot/repos/s3d/trunk</A>&quot;
+ESVN_BOOTSTRAP=&quot;./autogen.sh --no-configure&quot;
+
+DESCRIPTION=&quot;a 3d network display server&quot;
+HOMEPAGE=&quot;<A HREF="http://s3d.berlios.de/">http://s3d.berlios.de/</A>&quot;
+
+LICENSE=&quot;GPL-2 LGPL&quot;
+KEYWORDS=&quot;~x86 ~amd64&quot;
+SLOT=&quot;0&quot;
+
+DEPEND=&quot;${RDEPEND}
+	&gt;=sys-devel/autoconf-2.59
+	&gt;=sys-devel/automake-1.9
+	sys-devel/flex
+	&gt;=sys-devel/libtool-1.5
+	&quot;
+RDEPEND=&quot;!media-gfx/s3d
+	&gt;=media-libs/libsdl-1.2.7
+	&gt;=media-libs/freetype-2
+	&gt;=dev-libs/glib-2
+	media-libs/fontconfig
+	media-libs/mesa
+
+	|| ( 	(
+			sys-libs/zlib
+			x11-libs/libX11
+			x11-libs/libXext
+			x11-libs/libXi
+			x11-libs/libXmu
+			x11-libs/libXt
+			x11-libs/libXtst )
+		virtual/x11 )
+
+	virtual/glut
+	&quot;
+
+src_compile() {
+	econf \
+		--prefix=/usr/ \
+		|| die &quot;econf failed&quot;
+
+	emake || die &quot;emake failed&quot;
+}
+
+src_install() {
+	emake DESTDIR=&quot;${D}&quot; install || die
+}
+

Added: trunk/extras/mplayer/README
===================================================================
--- trunk/extras/mplayer/README	2006-10-23 16:05:56 UTC (rev 455)
+++ trunk/extras/mplayer/README	2006-10-26 14:32:52 UTC (rev 456)
@@ -0,0 +1,13 @@
+INSTALL
+-------
+1. install the client library (or the whole s3d package)
+2. go into your mplayer-source directory
+3. use
+   $ patch -p1 &lt; /path/to/mplayer.1.0pre7try2.s3d.patch
+   to patch the source
+4. do ./configure
+   In the summary, you should see &quot;s3d&quot; in the 
+   &quot;Enabled optional drivers&quot;, &quot;Video Output&quot;
+5. install mplayer and watch videos like this:
+   mplayer -vo s3d movie.mpg
+6. enjoy ;)

Added: trunk/extras/mplayer/mplayer.1.0pre7try2.s3d.patch
===================================================================
--- trunk/extras/mplayer/mplayer.1.0pre7try2.s3d.patch	2006-10-23 16:05:56 UTC (rev 455)
+++ trunk/extras/mplayer/mplayer.1.0pre7try2.s3d.patch	2006-10-26 14:32:52 UTC (rev 456)
@@ -0,0 +1,371 @@
+diff -Naur MPlayer-1.0pre7try2/configure MPlayer-1.0pre7try2.s3d/configure
+--- MPlayer-1.0pre7try2/configure	2005-04-13 13:46:35.000000000 +0200
++++ MPlayer-1.0pre7try2.s3d/configure	2006-06-10 18:37:34.000000000 +0200
+@@ -234,6 +234,7 @@
+   --disable-vidix        disable VIDIX [enable on x86 *nix]
+   --enable-gl            build with OpenGL render support [autodetect]
+   --enable-dga[=n]       build with DGA [n in {1, 2} ] support [autodetect]
++  --enable-s3d           build with s3d support [autodetect]
+   --enable-vesa          build with VESA support [autodetect]
+   --enable-svga          build with SVGAlib support [autodetect]
+   --enable-sdl           build with SDL render support [autodetect]
+@@ -1288,6 +1289,7 @@
+ _mencoder=yes
+ _x11=auto
+ _dga=auto	# 1 2 no auto
++_s3d=auto
+ _xv=auto
+ _xvmc=no  #auto when complete
+ _sdl=auto
+@@ -1444,6 +1446,8 @@
+   --disable-xvmc)       _xvmc=no        ;;
+   --enable-sdl)		_sdl=yes	;;
+   --disable-sdl)	_sdl=no		;;
++  --enable-s3d)		_s3d=yes	;;
++  --disable-s3d)	_s3d=no		;;
+   --enable-directx)     _directx=yes    ;;
+   --disable-directx)    _directx=no     ;;
+   --enable-win32waveout)  _win32waveout=yes ;;
+@@ -3798,6 +3802,27 @@
+ fi
+ echores &quot;$_aa&quot;
+ 
++echocheck &quot;s3d&quot;
++if test &quot;$_s3d&quot; = auto ; then
++  cat &gt; $TMPC &lt;&lt; EOF
++#include &lt;s3d.h&gt;
++int main(int argc, char **argv) { s3d_init( &amp;argc, &amp;argv, &quot;mplayer_test&quot;); s3d_quit(); return 0; }
++EOF
++  _s3d=no
++  cc_check -ls3d &amp;&amp; _s3d=yes
++fi
++if test &quot;$_s3d&quot; = yes ; then
++  _def_s3d='#define HAVE_S3D 1'
++  _ld_s3d='-ls3d'
++  _vosrc=&quot;$_vosrc vo_s3d.c&quot;
++  _vomodules=&quot;s3d $_vomodules&quot;
++else
++  _def_aa='#undef HAVE_S3D'
++  _novomodules=&quot;s3d $_novomodules&quot;
++fi
++echores &quot;$_s3d&quot;
++
++
+ 
+ echocheck &quot;CACA&quot;
+ if test &quot;$_caca&quot; = auto ; then
+@@ -6769,6 +6794,7 @@
+ SDL_LIB = $_ld_sdl
+ SVGA_LIB = $_ld_svga
+ AA_LIB = $_ld_aa
++S3D_LIB = $_ld_s3d
+ CACA_INC = $_inc_caca
+ CACA_LIB = $_ld_caca
+ 
+@@ -7484,6 +7510,7 @@
+ $_def_vesa
+ $_def_xdpms
+ $_def_aa
++$_def_s3d
+ $_def_caca
+ $_def_tga
+ $_def_toolame
+diff -Naur MPlayer-1.0pre7try2/libvo/video_out.c MPlayer-1.0pre7try2.s3d/libvo/video_out.c
+--- MPlayer-1.0pre7try2/libvo/video_out.c	2004-12-21 21:33:51.000000000 +0100
++++ MPlayer-1.0pre7try2.s3d/libvo/video_out.c	2006-06-10 18:37:34.000000000 +0200
+@@ -84,6 +84,7 @@
+ extern vo_functions_t video_out_png;
+ extern vo_functions_t video_out_ggi;
+ extern vo_functions_t video_out_aa;
++extern vo_functions_t video_out_s3d;
+ extern vo_functions_t video_out_caca;
+ extern vo_functions_t video_out_mpegpes;
+ extern vo_functions_t video_out_yuv4mpeg;
+@@ -192,6 +193,9 @@
+ #ifdef HAVE_AA
+ 	&amp;video_out_aa,
+ #endif
++#ifdef HAVE_S3D
++	&amp;video_out_s3d,
++#endif
+ #ifdef HAVE_CACA
+ 	&amp;video_out_caca,
+ #endif
+diff -Naur MPlayer-1.0pre7try2/libvo/vo_s3d.c MPlayer-1.0pre7try2.s3d/libvo/vo_s3d.c
+--- MPlayer-1.0pre7try2/libvo/vo_s3d.c	1970-01-01 01:00:00.000000000 +0100
++++ MPlayer-1.0pre7try2.s3d/libvo/vo_s3d.c	2006-06-11 17:44:27.000000000 +0200
+@@ -0,0 +1,262 @@
++#include &lt;stdio.h&gt;
++#include &lt;stdlib.h&gt;
++#include &lt;string.h&gt;
++#include &lt;errno.h&gt;
++#include &lt;s3d.h&gt;
++#include &lt;s3d_keysym.h&gt;
++#include &quot;config.h&quot;
++#include &quot;video_out.h&quot;
++#include &quot;video_out_internal.h&quot;
++#include &quot;mp_msg.h&quot;
++#include &quot;input/mouse.h&quot;
++#include &quot;input/input.h&quot;
++
++static vo_info_t info = 
++{
++	&quot;s3d video output&quot;,
++	&quot;s3d&quot;,
++	&quot;&lt;<A HREF="https://lists.berlios.de/mailman/listinfo/s3d-svn">dotslash at packetmixer.de</A>&gt;&quot;,
++	&quot;&quot;
++};
++
++LIBVO_EXTERN( s3d )
++
++static uint32_t image_width, image_height;
++static int int_pause;
++static uint32_t oid;
++static char *data2;
++
++//static uint32_t
++static uint32_t draw_slice(uint8_t *image[], int stride[], int w,int h,int x,int y)
++{
++//	int x2,y2;
++//	unsigned char *data;
++	// ignoring stride, as I don't know what it is O_o
++    mp_msg (MSGT_VO, MSGL_INFO, &quot;[s3d] calling stride: %dx%d image at %dx%d\n&quot;,w,h,x,y);
++/*	data=*image;
++	for (y2=x;y2&lt;w;y2++)
++	for (x2=y;x2&lt;h;x2++)
++	{
++		data2[(y2*image_width+x2)*4+0]=data[(y2*image_width+x2)*3+0];
++		data2[(y2*image_width+x2)*4+1]=data[(y2*image_width+x2)*3+1];
++		data2[(y2*image_width+x2)*4+2]=data[(y2*image_width+x2)*3+2];
++		data2[(y2*image_width+x2)*4+3]=255;
++	}
++	s3d_load_texture(oid,0,x,y,w,h,data2);
++	return(0);*/
++	return(0);
++}
++
++static void draw_osd(void)
++{
++}
++
++static void
++flip_page(void)
++{
++}
++
++static uint32_t
++draw_frame(uint8_t *src[])
++{
++	uint32_t x,y;
++	unsigned char *data;
++	data=*src;
++	for (y=0;y&lt;image_height;y++)
++		for (x=0;x&lt;image_width;x++)
++		{
++			data2[(y*image_width+x)*4+0]=data[(y*image_width+x)*3+0];
++			data2[(y*image_width+x)*4+1]=data[(y*image_width+x)*3+1];
++			data2[(y*image_width+x)*4+2]=data[(y*image_width+x)*3+2];
++			data2[(y*image_width+x)*4+3]=255;
++		}
++	s3d_load_texture(oid,0,0,0,image_width,image_height,data2);
++	return VO_TRUE;
++}
++
++static uint32_t
++config(uint32_t width, uint32_t height, uint32_t d_width, uint32_t d_height, uint32_t fullscreen, char *title, uint32_t format)
++{
++	float aspect;
++	image_width = width;
++	image_height = height;
++	printf(&quot;config!!\n\n&quot;);
++	if (vo_config_count&gt;0) 
++	{
++	} else {
++		free(data2);
++		s3d_pop_texture(oid,1);
++		s3d_pop_vertex(oid,4);
++	}
++	aspect=((float) d_width)/((float) d_height);
++	s3d_push_vertex(oid,-3*aspect,-3,0);
++	s3d_push_vertex(oid, 3*aspect,-3,0);
++	s3d_push_vertex(oid, 3*aspect, 3,0);
++	s3d_push_vertex(oid,-3*aspect, 3,0);
++
++/*	s3d_scale(oid,(((float) d_width)/((float) d_height)),1.0,1.0);*/
++	data2=malloc(width*height*4);
++	memset(data2,128,width*height*4);
++	s3d_push_texture(oid,image_width,image_height);		
++   	mp_msg (MSGT_VO, MSGL_INFO,&quot;[s3d] requesting a %d %d texture... \n&quot;,image_width,image_height);
++   	mp_msg (MSGT_VO, MSGL_INFO,&quot;[s3d] wanted size is %d %d... \n&quot;,d_width,d_height);
++	s3d_pep_material_texture(oid,0);	// assign texture 0 to material 0
++	return 0;
++}
++
++static void
++uninit(void)
++{
++	if (data2!=NULL)
++		free(data2);
++	s3d_quit();
++}
++
++#include &quot;osdep/keycodes.h&quot;
++extern void mplayer_put_key(int code);
++
++static void check_events(void)
++{
++	s3d_net_check();
++}
++#define shift_key (ki-&gt;modifier==(S3D_KMOD_LSHIFT||S3D_KMOD_RSHIFT)) 
++void s3dmp_key(struct s3d_evt *evt)
++{
++	struct s3d_key_event *ki=(struct s3d_key_event *)evt-&gt;buf;
++	switch (ki-&gt;keysym)
++	{
++		case S3DK_RETURN: mplayer_put_key(KEY_ENTER);break;
++        case S3DK_ESCAPE: mplayer_put_key(KEY_ESC);break;
++		case S3DK_q: mplayer_put_key('q');break;
++ 		case S3DK_F1: mplayer_put_key(KEY_F+1);break;
++ 		case S3DK_F2: mplayer_put_key(KEY_F+2);break;
++ 		case S3DK_F3: mplayer_put_key(KEY_F+3);break;
++ 		case S3DK_F4: mplayer_put_key(KEY_F+4);break;
++ 		case S3DK_F5: mplayer_put_key(KEY_F+5);break;
++ 		case S3DK_F6: mplayer_put_key(KEY_F+6);break;
++ 		case S3DK_F7: mplayer_put_key(KEY_F+7);break;
++ 		case S3DK_F8: mplayer_put_key(KEY_F+8);break;
++ 		case S3DK_F9: mplayer_put_key(KEY_F+9);break;
++ 		case S3DK_F10: mplayer_put_key(KEY_F+10);break;
++ 		case S3DK_F11: mplayer_put_key(KEY_F+11);break;
++ 		case S3DK_F12: mplayer_put_key(KEY_F+12);break;
++                                /*case S3DK_o: mplayer_put_key('o');break;
++                                case S3DK_SPACE: mplayer_put_key(' ');break;
++                                case S3DK_p: mplayer_put_key('p');break;*/
++		case S3DK_7: mplayer_put_key(shift_key?'/':'7');
++        case S3DK_PLUS: mplayer_put_key(shift_key?'*':'+');
++        case S3DK_KP_PLUS: mplayer_put_key('+');break;
++        case S3DK_MINUS:
++        case S3DK_KP_MINUS: mplayer_put_key('-');break;
++		case S3DK_TAB: mplayer_put_key('\t');break;
++		case S3DK_PAGEUP: mplayer_put_key(KEY_PAGE_UP);break;
++		case S3DK_PAGEDOWN: mplayer_put_key(KEY_PAGE_DOWN);break;  
++		case S3DK_UP: mplayer_put_key(KEY_UP);break;
++        case S3DK_DOWN: mplayer_put_key(KEY_DOWN);break;
++        case S3DK_LEFT: mplayer_put_key(KEY_LEFT);break;
++        case S3DK_RIGHT: mplayer_put_key(KEY_RIGHT);break;
++        case S3DK_LESS: mplayer_put_key(shift_key?'&gt;':'&lt;'); break;
++        case S3DK_GREATER: mplayer_put_key('&gt;'); break;
++        case S3DK_ASTERISK:
++		case S3DK_KP_MULTIPLY: mplayer_put_key('*'); break;
++		case S3DK_SLASH:
++		case S3DK_KP_DIVIDE: mplayer_put_key('/'); break;
++		case S3DK_KP0: mplayer_put_key(KEY_KP0); break;
++		case S3DK_KP1: mplayer_put_key(KEY_KP1); break;
++		case S3DK_KP2: mplayer_put_key(KEY_KP2); break;
++		case S3DK_KP3: mplayer_put_key(KEY_KP3); break;
++		case S3DK_KP4: mplayer_put_key(KEY_KP4); break;
++		case S3DK_KP5: mplayer_put_key(KEY_KP5); break;
++		case S3DK_KP6: mplayer_put_key(KEY_KP6); break;
++		case S3DK_KP7: mplayer_put_key(KEY_KP7); break;
++		case S3DK_KP8: mplayer_put_key(KEY_KP8); break;
++		case S3DK_KP9: mplayer_put_key(KEY_KP9); break;
++		case S3DK_KP_PERIOD: mplayer_put_key(KEY_KPDEC); break;
++		case S3DK_KP_ENTER: mplayer_put_key(KEY_KPENTER); break;
++		default:
++			mplayer_put_key(ki-&gt;keysym);
++			break;
++
++	}
++	
++}
++int mbutton;
++void s3dmp_mbutton(struct s3d_evt *evt)
++{
++	struct s3d_but_info *bi=(struct s3d_but_info *)evt-&gt;buf;
++	mbutton=-1;
++	if ((bi-&gt;state==0) &amp;&amp; (!vo_nomouse_input))
++		mbutton=bi-&gt;button;
++}
++void s3dmp_obj_click(struct s3d_evt *evt)
++{
++	uint32_t coid=*((uint32_t *)evt-&gt;buf);
++	if (coid==oid)
++	{
++		mplayer_put_key(MOUSE_BASE+mbutton-1);
++	}
++	mbutton=-1;
++}
++
++
++
++
++static uint32_t preinit(const char *arg)
++{
++	int argc=0;
++	char *arg1=NULL;
++	char **argv=&amp;arg1;
++    mp_msg (MSGT_VO, MSGL_INFO, &quot;[s3d] hello, i'm initing - darn it!\n&quot;);
++	mbutton=-1;
++    s3d_set_callback(S3D_EVENT_MBUTTON,s3dmp_mbutton);
++    s3d_set_callback(S3D_EVENT_OBJ_CLICK,s3dmp_obj_click);
++    s3d_set_callback(S3D_EVENT_KEY,s3dmp_key);
++
++	if (s3d_init(&amp;argc,&amp;argv,&quot;mplayer&quot;))
++	{
++    	mp_msg (MSGT_VO, MSGL_WARN, &quot;[s3d] sorry, can't reach server.\n&quot;);
++		return(ENOSYS);
++	}
++	oid=s3d_new_object();
++	s3d_push_vertex(oid,-3,-3,0);
++	s3d_push_vertex(oid, 3,-3,0);
++	s3d_push_vertex(oid, 3, 3,0);
++	s3d_push_vertex(oid,-3, 3,0);
++	s3d_push_material_a(oid,
++					0.0,	0.0,	0.8	,1.0,
++					1.0,	1.0,	1.0	,1.0,
++					0.0,	0.0,	0.8	,1.0);
++	s3d_push_polygon(oid,0,2,1,0);
++	s3d_pep_polygon_tex_coord(oid, 0.0,1.0, 
++								   1.0,0.0,
++								   1.0,1.0);
++	s3d_push_polygon(oid,0,3,2,0);
++	s3d_pep_polygon_tex_coord(oid, 0.0,1.0, 
++								   0.0,0.0,
++								   1.0,0.0);
++	s3d_flags_on(oid,S3D_OF_VISIBLE);
++    if(arg) 
++    {
++    	mp_msg (MSGT_VO, MSGL_WARN, &quot;[s3d] what should I do with this arg? \n&quot;);
++		return ENOSYS;
++    }
++    return 0;
++}
++
++static uint32_t
++query_format(uint32_t format)
++{
++    if (format == IMGFMT_RGB24)
++        return VFCAP_CSP_SUPPORTED | VFCAP_CSP_SUPPORTED_BY_HW;
++    return 0;
++}
++static uint32_t control(uint32_t request, void *data, ...)
++{
++  switch (request) {
++  case VOCTRL_PAUSE: return (int_pause=1);
++  case VOCTRL_RESUME: return (int_pause=0);
++  case VOCTRL_QUERY_FORMAT:
++    return query_format(*((uint32_t*)data));
++  }
++  return VO_NOTIMPL;
++}
+diff -Naur MPlayer-1.0pre7try2/Makefile MPlayer-1.0pre7try2.s3d/Makefile
+--- MPlayer-1.0pre7try2/Makefile	2005-04-16 22:18:12.000000000 +0200
++++ MPlayer-1.0pre7try2.s3d/Makefile	2006-06-10 18:37:34.000000000 +0200
+@@ -30,7 +30,7 @@
+ OBJS_MENCODER = $(SRCS_MENCODER:.c=.o)
+ OBJS_MPLAYER = $(SRCS_MPLAYER:.c=.o)
+ 
+-VO_LIBS = $(AA_LIB) $(X_LIB) $(SDL_LIB) $(GGI_LIB) $(MP1E_LIB) $(MLIB_LIB) $(SVGA_LIB) $(DIRECTFB_LIB) $(CACA_LIB)
++VO_LIBS = $(AA_LIB) $(X_LIB) $(SDL_LIB) $(GGI_LIB) $(MP1E_LIB) $(MLIB_LIB) $(SVGA_LIB) $(DIRECTFB_LIB) $(CACA_LIB) $(S3D_LIB)
+ AO_LIBS = $(ARTS_LIB) $(ESD_LIB) $(JACK_LIB) $(NAS_LIB) $(SGIAUDIO_LIB) $(POLYP_LIB)
+ CODEC_LIBS = $(AV_LIB) $(FAME_LIB) $(MAD_LIB) $(VORBIS_LIB) $(THEORA_LIB) $(FAAD_LIB) $(LIBLZO_LIB) $(DECORE_LIB) $(XVID_LIB) $(DTS_LIB) $(PNG_LIB) $(Z_LIB) $(JPEG_LIB) $(ALSA_LIB) $(XMMS_LIB) $(X264_LIB)
+ COMMON_LIBS = libmpcodecs/libmpcodecs.a $(W32_LIB) $(DS_LIB) libaf/libaf.a libmpdemux/libmpdemux.a input/libinput.a postproc/libswscale.a osdep/libosdep.a $(DVDREAD_LIB) $(CODEC_LIBS) $(FREETYPE_LIB) $(TERMCAP_LIB) $(CDPARANOIA_LIB) $(MPLAYER_NETWORK_LIB) $(WIN32_LIB) $(GIF_LIB) $(MACOSX_FRAMEWORKS) $(SMBSUPPORT_LIB) $(FRIBIDI_LIB) $(FONTCONFIG_LIB) $(ENCA_LIB)


Property changes on: trunk/extras/mplayer/mplayer.1.0pre7try2.s3d.patch
___________________________________________________________________
Name: svn:mime-type
   + text/x-patch

Deleted: trunk/extras/mplayer.1.0pre7try2.s3d.patch
===================================================================
--- trunk/extras/mplayer.1.0pre7try2.s3d.patch	2006-10-23 16:05:56 UTC (rev 455)
+++ trunk/extras/mplayer.1.0pre7try2.s3d.patch	2006-10-26 14:32:52 UTC (rev 456)
@@ -1,371 +0,0 @@
-diff -Naur MPlayer-1.0pre7try2/configure MPlayer-1.0pre7try2.s3d/configure
---- MPlayer-1.0pre7try2/configure	2005-04-13 13:46:35.000000000 +0200
-+++ MPlayer-1.0pre7try2.s3d/configure	2006-06-10 18:37:34.000000000 +0200
-@@ -234,6 +234,7 @@
-   --disable-vidix        disable VIDIX [enable on x86 *nix]
-   --enable-gl            build with OpenGL render support [autodetect]
-   --enable-dga[=n]       build with DGA [n in {1, 2} ] support [autodetect]
-+  --enable-s3d           build with s3d support [autodetect]
-   --enable-vesa          build with VESA support [autodetect]
-   --enable-svga          build with SVGAlib support [autodetect]
-   --enable-sdl           build with SDL render support [autodetect]
-@@ -1288,6 +1289,7 @@
- _mencoder=yes
- _x11=auto
- _dga=auto	# 1 2 no auto
-+_s3d=auto
- _xv=auto
- _xvmc=no  #auto when complete
- _sdl=auto
-@@ -1444,6 +1446,8 @@
-   --disable-xvmc)       _xvmc=no        ;;
-   --enable-sdl)		_sdl=yes	;;
-   --disable-sdl)	_sdl=no		;;
-+  --enable-s3d)		_s3d=yes	;;
-+  --disable-s3d)	_s3d=no		;;
-   --enable-directx)     _directx=yes    ;;
-   --disable-directx)    _directx=no     ;;
-   --enable-win32waveout)  _win32waveout=yes ;;
-@@ -3798,6 +3802,27 @@
- fi
- echores &quot;$_aa&quot;
- 
-+echocheck &quot;s3d&quot;
-+if test &quot;$_s3d&quot; = auto ; then
-+  cat &gt; $TMPC &lt;&lt; EOF
-+#include &lt;s3d.h&gt;
-+int main(int argc, char **argv) { s3d_init( &amp;argc, &amp;argv, &quot;mplayer_test&quot;); s3d_quit(); return 0; }
-+EOF
-+  _s3d=no
-+  cc_check -ls3d &amp;&amp; _s3d=yes
-+fi
-+if test &quot;$_s3d&quot; = yes ; then
-+  _def_s3d='#define HAVE_S3D 1'
-+  _ld_s3d='-ls3d'
-+  _vosrc=&quot;$_vosrc vo_s3d.c&quot;
-+  _vomodules=&quot;s3d $_vomodules&quot;
-+else
-+  _def_aa='#undef HAVE_S3D'
-+  _novomodules=&quot;s3d $_novomodules&quot;
-+fi
-+echores &quot;$_s3d&quot;
-+
-+
- 
- echocheck &quot;CACA&quot;
- if test &quot;$_caca&quot; = auto ; then
-@@ -6769,6 +6794,7 @@
- SDL_LIB = $_ld_sdl
- SVGA_LIB = $_ld_svga
- AA_LIB = $_ld_aa
-+S3D_LIB = $_ld_s3d
- CACA_INC = $_inc_caca
- CACA_LIB = $_ld_caca
- 
-@@ -7484,6 +7510,7 @@
- $_def_vesa
- $_def_xdpms
- $_def_aa
-+$_def_s3d
- $_def_caca
- $_def_tga
- $_def_toolame
-diff -Naur MPlayer-1.0pre7try2/libvo/video_out.c MPlayer-1.0pre7try2.s3d/libvo/video_out.c
---- MPlayer-1.0pre7try2/libvo/video_out.c	2004-12-21 21:33:51.000000000 +0100
-+++ MPlayer-1.0pre7try2.s3d/libvo/video_out.c	2006-06-10 18:37:34.000000000 +0200
-@@ -84,6 +84,7 @@
- extern vo_functions_t video_out_png;
- extern vo_functions_t video_out_ggi;
- extern vo_functions_t video_out_aa;
-+extern vo_functions_t video_out_s3d;
- extern vo_functions_t video_out_caca;
- extern vo_functions_t video_out_mpegpes;
- extern vo_functions_t video_out_yuv4mpeg;
-@@ -192,6 +193,9 @@
- #ifdef HAVE_AA
- 	&amp;video_out_aa,
- #endif
-+#ifdef HAVE_S3D
-+	&amp;video_out_s3d,
-+#endif
- #ifdef HAVE_CACA
- 	&amp;video_out_caca,
- #endif
-diff -Naur MPlayer-1.0pre7try2/libvo/vo_s3d.c MPlayer-1.0pre7try2.s3d/libvo/vo_s3d.c
---- MPlayer-1.0pre7try2/libvo/vo_s3d.c	1970-01-01 01:00:00.000000000 +0100
-+++ MPlayer-1.0pre7try2.s3d/libvo/vo_s3d.c	2006-06-11 17:44:27.000000000 +0200
-@@ -0,0 +1,262 @@
-+#include &lt;stdio.h&gt;
-+#include &lt;stdlib.h&gt;
-+#include &lt;string.h&gt;
-+#include &lt;errno.h&gt;
-+#include &lt;s3d.h&gt;
-+#include &lt;s3d_keysym.h&gt;
-+#include &quot;config.h&quot;
-+#include &quot;video_out.h&quot;
-+#include &quot;video_out_internal.h&quot;
-+#include &quot;mp_msg.h&quot;
-+#include &quot;input/mouse.h&quot;
-+#include &quot;input/input.h&quot;
-+
-+static vo_info_t info = 
-+{
-+	&quot;s3d video output&quot;,
-+	&quot;s3d&quot;,
-+	&quot;&lt;<A HREF="https://lists.berlios.de/mailman/listinfo/s3d-svn">dotslash at packetmixer.de</A>&gt;&quot;,
-+	&quot;&quot;
-+};
-+
-+LIBVO_EXTERN( s3d )
-+
-+static uint32_t image_width, image_height;
-+static int int_pause;
-+static uint32_t oid;
-+static char *data2;
-+
-+//static uint32_t
-+static uint32_t draw_slice(uint8_t *image[], int stride[], int w,int h,int x,int y)
-+{
-+//	int x2,y2;
-+//	unsigned char *data;
-+	// ignoring stride, as I don't know what it is O_o
-+    mp_msg (MSGT_VO, MSGL_INFO, &quot;[s3d] calling stride: %dx%d image at %dx%d\n&quot;,w,h,x,y);
-+/*	data=*image;
-+	for (y2=x;y2&lt;w;y2++)
-+	for (x2=y;x2&lt;h;x2++)
-+	{
-+		data2[(y2*image_width+x2)*4+0]=data[(y2*image_width+x2)*3+0];
-+		data2[(y2*image_width+x2)*4+1]=data[(y2*image_width+x2)*3+1];
-+		data2[(y2*image_width+x2)*4+2]=data[(y2*image_width+x2)*3+2];
-+		data2[(y2*image_width+x2)*4+3]=255;
-+	}
-+	s3d_load_texture(oid,0,x,y,w,h,data2);
-+	return(0);*/
-+	return(0);
-+}
-+
-+static void draw_osd(void)
-+{
-+}
-+
-+static void
-+flip_page(void)
-+{
-+}
-+
-+static uint32_t
-+draw_frame(uint8_t *src[])
-+{
-+	uint32_t x,y;
-+	unsigned char *data;
-+	data=*src;
-+	for (y=0;y&lt;image_height;y++)
-+		for (x=0;x&lt;image_width;x++)
-+		{
-+			data2[(y*image_width+x)*4+0]=data[(y*image_width+x)*3+0];
-+			data2[(y*image_width+x)*4+1]=data[(y*image_width+x)*3+1];
-+			data2[(y*image_width+x)*4+2]=data[(y*image_width+x)*3+2];
-+			data2[(y*image_width+x)*4+3]=255;
-+		}
-+	s3d_load_texture(oid,0,0,0,image_width,image_height,data2);
-+	return VO_TRUE;
-+}
-+
-+static uint32_t
-+config(uint32_t width, uint32_t height, uint32_t d_width, uint32_t d_height, uint32_t fullscreen, char *title, uint32_t format)
-+{
-+	float aspect;
-+	image_width = width;
-+	image_height = height;
-+	printf(&quot;config!!\n\n&quot;);
-+	if (vo_config_count&gt;0) 
-+	{
-+	} else {
-+		free(data2);
-+		s3d_pop_texture(oid,1);
-+		s3d_pop_vertex(oid,4);
-+	}
-+	aspect=((float) d_width)/((float) d_height);
-+	s3d_push_vertex(oid,-3*aspect,-3,0);
-+	s3d_push_vertex(oid, 3*aspect,-3,0);
-+	s3d_push_vertex(oid, 3*aspect, 3,0);
-+	s3d_push_vertex(oid,-3*aspect, 3,0);
-+
-+/*	s3d_scale(oid,(((float) d_width)/((float) d_height)),1.0,1.0);*/
-+	data2=malloc(width*height*4);
-+	memset(data2,128,width*height*4);
-+	s3d_push_texture(oid,image_width,image_height);		
-+   	mp_msg (MSGT_VO, MSGL_INFO,&quot;[s3d] requesting a %d %d texture... \n&quot;,image_width,image_height);
-+   	mp_msg (MSGT_VO, MSGL_INFO,&quot;[s3d] wanted size is %d %d... \n&quot;,d_width,d_height);
-+	s3d_pep_material_texture(oid,0);	// assign texture 0 to material 0
-+	return 0;
-+}
-+
-+static void
-+uninit(void)
-+{
-+	if (data2!=NULL)
-+		free(data2);
-+	s3d_quit();
-+}
-+
-+#include &quot;osdep/keycodes.h&quot;
-+extern void mplayer_put_key(int code);
-+
-+static void check_events(void)
-+{
-+	s3d_net_check();
-+}
-+#define shift_key (ki-&gt;modifier==(S3D_KMOD_LSHIFT||S3D_KMOD_RSHIFT)) 
-+void s3dmp_key(struct s3d_evt *evt)
-+{
-+	struct s3d_key_event *ki=(struct s3d_key_event *)evt-&gt;buf;
-+	switch (ki-&gt;keysym)
-+	{
-+		case S3DK_RETURN: mplayer_put_key(KEY_ENTER);break;
-+        case S3DK_ESCAPE: mplayer_put_key(KEY_ESC);break;
-+		case S3DK_q: mplayer_put_key('q');break;
-+ 		case S3DK_F1: mplayer_put_key(KEY_F+1);break;
-+ 		case S3DK_F2: mplayer_put_key(KEY_F+2);break;
-+ 		case S3DK_F3: mplayer_put_key(KEY_F+3);break;
-+ 		case S3DK_F4: mplayer_put_key(KEY_F+4);break;
-+ 		case S3DK_F5: mplayer_put_key(KEY_F+5);break;
-+ 		case S3DK_F6: mplayer_put_key(KEY_F+6);break;
-+ 		case S3DK_F7: mplayer_put_key(KEY_F+7);break;
-+ 		case S3DK_F8: mplayer_put_key(KEY_F+8);break;
-+ 		case S3DK_F9: mplayer_put_key(KEY_F+9);break;
-+ 		case S3DK_F10: mplayer_put_key(KEY_F+10);break;
-+ 		case S3DK_F11: mplayer_put_key(KEY_F+11);break;
-+ 		case S3DK_F12: mplayer_put_key(KEY_F+12);break;
-+                                /*case S3DK_o: mplayer_put_key('o');break;
-+                                case S3DK_SPACE: mplayer_put_key(' ');break;
-+                                case S3DK_p: mplayer_put_key('p');break;*/
-+		case S3DK_7: mplayer_put_key(shift_key?'/':'7');
-+        case S3DK_PLUS: mplayer_put_key(shift_key?'*':'+');
-+        case S3DK_KP_PLUS: mplayer_put_key('+');break;
-+        case S3DK_MINUS:
-+        case S3DK_KP_MINUS: mplayer_put_key('-');break;
-+		case S3DK_TAB: mplayer_put_key('\t');break;
-+		case S3DK_PAGEUP: mplayer_put_key(KEY_PAGE_UP);break;
-+		case S3DK_PAGEDOWN: mplayer_put_key(KEY_PAGE_DOWN);break;  
-+		case S3DK_UP: mplayer_put_key(KEY_UP);break;
-+        case S3DK_DOWN: mplayer_put_key(KEY_DOWN);break;
-+        case S3DK_LEFT: mplayer_put_key(KEY_LEFT);break;
-+        case S3DK_RIGHT: mplayer_put_key(KEY_RIGHT);break;
-+        case S3DK_LESS: mplayer_put_key(shift_key?'&gt;':'&lt;'); break;
-+        case S3DK_GREATER: mplayer_put_key('&gt;'); break;
-+        case S3DK_ASTERISK:
-+		case S3DK_KP_MULTIPLY: mplayer_put_key('*'); break;
-+		case S3DK_SLASH:
-+		case S3DK_KP_DIVIDE: mplayer_put_key('/'); break;
-+		case S3DK_KP0: mplayer_put_key(KEY_KP0); break;
-+		case S3DK_KP1: mplayer_put_key(KEY_KP1); break;
-+		case S3DK_KP2: mplayer_put_key(KEY_KP2); break;
-+		case S3DK_KP3: mplayer_put_key(KEY_KP3); break;
-+		case S3DK_KP4: mplayer_put_key(KEY_KP4); break;
-+		case S3DK_KP5: mplayer_put_key(KEY_KP5); break;
-+		case S3DK_KP6: mplayer_put_key(KEY_KP6); break;
-+		case S3DK_KP7: mplayer_put_key(KEY_KP7); break;
-+		case S3DK_KP8: mplayer_put_key(KEY_KP8); break;
-+		case S3DK_KP9: mplayer_put_key(KEY_KP9); break;
-+		case S3DK_KP_PERIOD: mplayer_put_key(KEY_KPDEC); break;
-+		case S3DK_KP_ENTER: mplayer_put_key(KEY_KPENTER); break;
-+		default:
-+			mplayer_put_key(ki-&gt;keysym);
-+			break;
-+
-+	}
-+	
-+}
-+int mbutton;
-+void s3dmp_mbutton(struct s3d_evt *evt)
-+{
-+	struct s3d_but_info *bi=(struct s3d_but_info *)evt-&gt;buf;
-+	mbutton=-1;
-+	if ((bi-&gt;state==0) &amp;&amp; (!vo_nomouse_input))
-+		mbutton=bi-&gt;button;
-+}
-+void s3dmp_obj_click(struct s3d_evt *evt)
-+{
-+	uint32_t coid=*((uint32_t *)evt-&gt;buf);
-+	if (coid==oid)
-+	{
-+		mplayer_put_key(MOUSE_BASE+mbutton-1);
-+	}
-+	mbutton=-1;
-+}
-+
-+
-+
-+
-+static uint32_t preinit(const char *arg)
-+{
-+	int argc=0;
-+	char *arg1=NULL;
-+	char **argv=&amp;arg1;
-+    mp_msg (MSGT_VO, MSGL_INFO, &quot;[s3d] hello, i'm initing - darn it!\n&quot;);
-+	mbutton=-1;
-+    s3d_set_callback(S3D_EVENT_MBUTTON,s3dmp_mbutton);
-+    s3d_set_callback(S3D_EVENT_OBJ_CLICK,s3dmp_obj_click);
-+    s3d_set_callback(S3D_EVENT_KEY,s3dmp_key);
-+
-+	if (s3d_init(&amp;argc,&amp;argv,&quot;mplayer&quot;))
-+	{
-+    	mp_msg (MSGT_VO, MSGL_WARN, &quot;[s3d] sorry, can't reach server.\n&quot;);
-+		return(ENOSYS);
-+	}
-+	oid=s3d_new_object();
-+	s3d_push_vertex(oid,-3,-3,0);
-+	s3d_push_vertex(oid, 3,-3,0);
-+	s3d_push_vertex(oid, 3, 3,0);
-+	s3d_push_vertex(oid,-3, 3,0);
-+	s3d_push_material_a(oid,
-+					0.0,	0.0,	0.8	,1.0,
-+					1.0,	1.0,	1.0	,1.0,
-+					0.0,	0.0,	0.8	,1.0);
-+	s3d_push_polygon(oid,0,2,1,0);
-+	s3d_pep_polygon_tex_coord(oid, 0.0,1.0, 
-+								   1.0,0.0,
-+								   1.0,1.0);
-+	s3d_push_polygon(oid,0,3,2,0);
-+	s3d_pep_polygon_tex_coord(oid, 0.0,1.0, 
-+								   0.0,0.0,
-+								   1.0,0.0);
-+	s3d_flags_on(oid,S3D_OF_VISIBLE);
-+    if(arg) 
-+    {
-+    	mp_msg (MSGT_VO, MSGL_WARN, &quot;[s3d] what should I do with this arg? \n&quot;);
-+		return ENOSYS;
-+    }
-+    return 0;
-+}
-+
-+static uint32_t
-+query_format(uint32_t format)
-+{
-+    if (format == IMGFMT_RGB24)
-+        return VFCAP_CSP_SUPPORTED | VFCAP_CSP_SUPPORTED_BY_HW;
-+    return 0;
-+}
-+static uint32_t control(uint32_t request, void *data, ...)
-+{
-+  switch (request) {
-+  case VOCTRL_PAUSE: return (int_pause=1);
-+  case VOCTRL_RESUME: return (int_pause=0);
-+  case VOCTRL_QUERY_FORMAT:
-+    return query_format(*((uint32_t*)data));
-+  }
-+  return VO_NOTIMPL;
-+}
-diff -Naur MPlayer-1.0pre7try2/Makefile MPlayer-1.0pre7try2.s3d/Makefile
---- MPlayer-1.0pre7try2/Makefile	2005-04-16 22:18:12.000000000 +0200
-+++ MPlayer-1.0pre7try2.s3d/Makefile	2006-06-10 18:37:34.000000000 +0200
-@@ -30,7 +30,7 @@
- OBJS_MENCODER = $(SRCS_MENCODER:.c=.o)
- OBJS_MPLAYER = $(SRCS_MPLAYER:.c=.o)
- 
--VO_LIBS = $(AA_LIB) $(X_LIB) $(SDL_LIB) $(GGI_LIB) $(MP1E_LIB) $(MLIB_LIB) $(SVGA_LIB) $(DIRECTFB_LIB) $(CACA_LIB)
-+VO_LIBS = $(AA_LIB) $(X_LIB) $(SDL_LIB) $(GGI_LIB) $(MP1E_LIB) $(MLIB_LIB) $(SVGA_LIB) $(DIRECTFB_LIB) $(CACA_LIB) $(S3D_LIB)
- AO_LIBS = $(ARTS_LIB) $(ESD_LIB) $(JACK_LIB) $(NAS_LIB) $(SGIAUDIO_LIB) $(POLYP_LIB)
- CODEC_LIBS = $(AV_LIB) $(FAME_LIB) $(MAD_LIB) $(VORBIS_LIB) $(THEORA_LIB) $(FAAD_LIB) $(LIBLZO_LIB) $(DECORE_LIB) $(XVID_LIB) $(DTS_LIB) $(PNG_LIB) $(Z_LIB) $(JPEG_LIB) $(ALSA_LIB) $(XMMS_LIB) $(X264_LIB)
- COMMON_LIBS = libmpcodecs/libmpcodecs.a $(W32_LIB) $(DS_LIB) libaf/libaf.a libmpdemux/libmpdemux.a input/libinput.a postproc/libswscale.a osdep/libosdep.a $(DVDREAD_LIB) $(CODEC_LIBS) $(FREETYPE_LIB) $(TERMCAP_LIB) $(CDPARANOIA_LIB) $(MPLAYER_NETWORK_LIB) $(WIN32_LIB) $(GIF_LIB) $(MACOSX_FRAMEWORKS) $(SMBSUPPORT_LIB) $(FRIBIDI_LIB) $(FONTCONFIG_LIB) $(ENCA_LIB)

Added: trunk/extras/swig/Makefile
===================================================================
--- trunk/extras/swig/Makefile	2006-10-23 16:05:56 UTC (rev 455)
+++ trunk/extras/swig/Makefile	2006-10-26 14:32:52 UTC (rev 456)
@@ -0,0 +1,18 @@
+PYTHON_MOD=_s3d.so
+PERL_MOD=s3d.so
+MODS=$(PYTHON_MOD) $(PERL_MOD)
+
+default:	all
+all:		$(MODS)
+python:		$(PYTHON_MOD)
+perl:		$(PERL_MOD)
+$(PYTHON_MOD):	s3d.i
+	 swig -python s3d.i
+	 gcc -fPIC -c s3d_wrap.c -I/usr/include/python2.3/
+	 gcc -shared s3d_wrap.o -ls3d -o $(PYTHON_MOD)
+$(PERL_MOD):	s3d.i
+	swig -perl5 s3d.i
+	gcc -fPIC -c s3d_wrap.c  `perl -MExtUtils::Embed -e ccopts`
+	ld -G  s3d_wrap.o -lperl -ls3d -o $(PERL_MOD)
+clean:
+	rm -f $(MODS) *.o s3d_wrap.c s3d.py s3d.pyc s3d.pm

Added: trunk/extras/swig/TODO
===================================================================
--- trunk/extras/swig/TODO	2006-10-23 16:05:56 UTC (rev 455)
+++ trunk/extras/swig/TODO	2006-10-26 14:32:52 UTC (rev 456)
@@ -0,0 +1,2 @@
+- do something[tm] about the callbacks and structs
+- build some wrappers, remove s3d_ wrappers, we have proper namespaces in python/perl

Added: trunk/extras/swig/s3d.i
===================================================================
--- trunk/extras/swig/s3d.i	2006-10-23 16:05:56 UTC (rev 455)
+++ trunk/extras/swig/s3d.i	2006-10-26 14:32:52 UTC (rev 456)
@@ -0,0 +1,20 @@
+%module s3d
+typedef unsigned int uint32_t;
+%inline %{
+#include &lt;stdint.h&gt;
+int s3dpy_init(char *name)
+{
+	return s3d_init(NULL,NULL,name);
+}
+int s3dpy_draw_string(char *str)
+{
+	return s3d_draw_string(str,NULL);
+}
+%}
+%{
+#include &lt;s3d.h&gt;
+#include &lt;s3d_keysym.h&gt;
+%}
+
+%include &quot;../libs3d/s3d.h&quot;
+%include &quot;../libs3d/s3d_keysym.h&quot;

Added: trunk/extras/swig/s3d_test.pl
===================================================================
--- trunk/extras/swig/s3d_test.pl	2006-10-23 16:05:56 UTC (rev 455)
+++ trunk/extras/swig/s3d_test.pl	2006-10-26 14:32:52 UTC (rev 456)
@@ -0,0 +1,12 @@
+use s3d;
+if (0==s3d::s3dpy_init(&quot;hello perl&quot;))
+{
+	s3d::s3d_select_font(&quot;vera&quot;);
+	$o= s3d::s3dpy_draw_string(&quot;hello from perl&quot;);
+	print(&quot;object $o\n&quot;);
+	s3d::s3d_flags_on($o,$s3d::S3D_OF_VISIBLE);
+	sleep(10);
+	s3d::s3d_quit();
+	
+	
+}

Added: trunk/extras/swig/s3d_test.py
===================================================================
--- trunk/extras/swig/s3d_test.py	2006-10-23 16:05:56 UTC (rev 455)
+++ trunk/extras/swig/s3d_test.py	2006-10-26 14:32:52 UTC (rev 456)
@@ -0,0 +1,9 @@
+#!/usr/bin/python
+from s3d import *
+from time import sleep
+if 0 == s3dpy_init(&quot;hello world&quot;):
+	s3d_select_font(&quot;vera&quot;)
+	o = s3dpy_draw_string(&quot;hello from python&quot;)
+	s3d_flags_on(o, S3D_OF_VISIBLE)
+	sleep(10)
+	s3d_quit()


Property changes on: trunk/extras/swig/s3d_test.py
___________________________________________________________________
Name: svn:mime-type
   + text/script


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000448.html">[S3d-svn] r455 - in trunk: . apps/dot_mcp
</A></li>
	<LI>Next message: <A HREF="000450.html">[S3d-svn] r457 - in trunk: . apps/s3dfm
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#449">[ date ]</a>
              <a href="thread.html#449">[ thread ]</a>
              <a href="subject.html#449">[ subject ]</a>
              <a href="author.html#449">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/s3d-svn">More information about the S3d-svn
mailing list</a><br>
</body></html>
